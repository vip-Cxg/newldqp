# Android签名生成工具使用说明

## 脚本功能
- 根据输入的alias自动生成Android签名文件
- 密码规则：`alias + "123456"`
- 签名文件命名：`alias.keystore`

## 使用方法

### 1. 基本用法
```bash
./generate_keystore.sh <alias>
```

### 2. 示例
```bash
# 生成名为 myapp 的签名
./generate_keystore.sh myapp

# 结果：
# - 文件：myapp.keystore
# - 密码：myapp123456
# - Alias：myapp
```

## 生成后的配置

### 1. 更新 gradle.properties
将以下配置添加到 `build/jsb-link/frameworks/runtime-src/proj.android-studio/gradle.properties`：

```properties
RELEASE_STORE_FILE=/Users/gj/develop/newldqp/your_alias.keystore
RELEASE_STORE_PASSWORD=your_alias123456
RELEASE_KEY_ALIAS=your_alias
RELEASE_KEY_PASSWORD=your_alias123456
```

### 2. 获取MD5签名（用于微信开放平台）

#### 方法1：使用专用脚本（推荐）
```bash
./get_md5_signature.sh your_alias.keystore your_alias your_alias123456
```

#### 方法2：使用keytool命令
```bash
# 推荐方法：使用exportcert + openssl
keytool -exportcert -alias your_alias -keystore your_alias.keystore -storepass your_alias123456 | openssl dgst -md5

# 传统方法：使用list -v
keytool -list -v -keystore your_alias.keystore -alias your_alias -storepass your_alias123456 | grep -i md5
```

## 微信开放平台配置流程

### 1. 准备信息
- **包名**：如 `com.ldplay.game`
- **MD5签名**：通过上述命令获取
- **应用名称**：您的应用名称

### 2. 微信开放平台操作
1. 登录 [微信开放平台](https://open.weixin.qq.com/)
2. 进入"移动应用" → "创建移动应用"
3. 填写应用信息：
   - 应用名称
   - 应用简介
   - 应用官网
4. 填写平台信息：
   - 应用包名：`com.ldplay.game`
   - 应用签名：MD5值（去掉冒号和空格）
5. 提交审核

### 3. 获取AppID
审核通过后，您将获得：
- **AppID**：用于替换代码中的 `wx_appid`
- **AppSecret**：用于服务端验证

## 代码中的修改

### 1. 更新微信AppID
在 `src/org/cocos2dx/javascript/AppActivity.java` 中：
```java
// 第79行，替换为新的AppID
public static String wx_appid = "wx你的新AppID";
```

### 2. 更新包名（如果需要）
- 修改 `app/build.gradle` 中的 `namespace`
- 修改 `app/AndroidManifest.xml` 中的 `package`
- 重命名Java包目录结构
- 更新所有Java文件中的package声明

## 注意事项

1. **备份原签名**：修改前请备份原有的签名文件
2. **测试环境**：先在测试环境验证新签名
3. **应用商店**：新签名需要重新上架应用商店
4. **用户数据**：用户需要重新安装应用
5. **微信审核**：微信开放平台审核通常需要1-3个工作日

## 常见问题

### Q: 如何查看现有签名的MD5值？
```bash
keytool -list -v -keystore fuyun-release.keystore -alias fuyun -storepass fuyun123456 | grep -i md5
```

### Q: 签名文件可以重复使用吗？
可以，同一个签名文件可以用于多个应用，但建议每个应用使用独立的签名。

### Q: 忘记签名密码怎么办？
无法恢复，只能重新生成新的签名文件。
