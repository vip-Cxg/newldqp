# çƒ­æ›´æ–°ç›®å½•æ›¿æ¢æ¸…å•

## ğŸ¯ ç›®æ ‡
å°† `xhupdate` ç›®å½•åæ”¹ä¸º `ldupdate`

## ğŸ“‹ éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

### 1. **æ ¸å¿ƒé…ç½®æ–‡ä»¶**

#### `version_generator.js` (ç¬¬4è¡Œ)
```javascript
// ä¿®æ”¹å‰
const BASE_URL = "http://pku.qzhagy.com/xhupdate/";

// ä¿®æ”¹å  
const BASE_URL = "http://pku.qzhagy.com/ldupdate/";
```

#### `assets/project.manifest` (ç¬¬1è¡Œ)
```json
// ä¿®æ”¹å‰
{"packageUrl":"http://pku.qzhagy.com/xhupdate/","remoteManifestUrl":"http://pku.qzhagy.com/xhupdate/project.manifest","remoteVersionUrl":"http://pku.qzhagy.com/xhupdate/version.manifest"}

// ä¿®æ”¹å
{"packageUrl":"http://pku.qzhagy.com/ldupdate/","remoteManifestUrl":"http://pku.qzhagy.com/ldupdate/project.manifest","remoteVersionUrl":"http://pku.qzhagy.com/ldupdate/version.manifest"}
```

### 2. **é…ç½®æ–‡ä»¶**

#### `assets/resources/Main/debug.json` (ç¬¬6-7è¡Œ)
```json
// ä¿®æ”¹å‰
"https://xh.ajvisas.com/xhupdate/",
"https://xyqp.online/xhupdate/"

// ä¿®æ”¹å
"https://xh.ajvisas.com/ldupdate/",
"https://xyqp.online/ldupdate/"
```

#### `assets/resources/Main/release.json` (ç¬¬6è¡Œ)
```json
// ä¿®æ”¹å‰
"http://pku.qzhagy.com/newupdate/"

// ä¿®æ”¹å
"http://pku.qzhagy.com/ldupdate/"
```

### 3. **æ¸¸æˆé…ç½®æ–‡ä»¶**

#### `assets/GameBase/GameConfig.js`
```javascript
// ç¬¬266è¡Œ - ä¿®æ”¹å‰
static DefaultUrl = "http://pku.qzhagy.com/newconfig/release_first.json";

// ç¬¬266è¡Œ - ä¿®æ”¹å
static DefaultUrl = "http://pku.qzhagy.com/ldconfig/release_first.json";

// ç¬¬1279è¡Œ - ä¿®æ”¹å‰  
static ConfigUrl = "https://pku.qzhagy.com/";

// ç¬¬1279è¡Œ - ä¿®æ”¹å
static ConfigUrl = "https://pku.qzhagy.com/";  // è¿™ä¸ªä¸éœ€è¦ä¿®æ”¹
```

#### `assets/Main/Script/SelectLink.js`
```javascript
// ç¬¬95è¡Œ - ä¿®æ”¹å‰
"https://pku.qzhagy.com/xhconfig/release_first.json",

// ç¬¬95è¡Œ - ä¿®æ”¹å
"https://pku.qzhagy.com/ldconfig/release_first.json",
```

### 4. **å…¶ä»–ç”Ÿæˆå™¨æ–‡ä»¶**

#### `version_generator1.js` (ç¬¬4è¡Œ)
```javascript
// ä¿®æ”¹å‰
const BASE_URL = "http://pku.qzhagy.com/update/";

// ä¿®æ”¹å
const BASE_URL = "http://pku.qzhagy.com/ldupdate/";
```

#### `media_generator.js` (ç¬¬4è¡Œ)
```javascript
// ä¿®æ”¹å‰
const BASE_URL = "https://pku.qzhagy.com/update_media/";

// ä¿®æ”¹å
const BASE_URL = "https://pku.qzhagy.com/update_media/";  // ä¸éœ€è¦ä¿®æ”¹
```

### 5. **åª’ä½“æ–‡ä»¶**

#### `media/Audio/*.json` æ–‡ä»¶
```json
// ä¿®æ”¹å‰
{"packageUrl":"https://pku.qzhagy.com/update_media/","remoteUrl":"https://pku.qzhagy.com/update_media/media16.json"}

// ä¿®æ”¹å
{"packageUrl":"https://pku.qzhagy.com/update_media/","remoteUrl":"https://pku.qzhagy.com/update_media/media16.json"}  // ä¸éœ€è¦ä¿®æ”¹
```

### 6. **å·¥å…·æ–‡ä»¶**

#### `assets/Main/Script/utils.js` (ç¬¬770è¡Œ)
```javascript
// ä¿®æ”¹å‰
"https://pku.qzhagy.com/update/"

// ä¿®æ”¹å
"https://pku.qzhagy.com/ldupdate/"
```

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬
```bash
./signTool/change_update_dir.sh ldupdate
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨æ›¿æ¢
```bash
# ä½¿ç”¨sedå‘½ä»¤æ‰¹é‡æ›¿æ¢
find . -name "*.js" -o -name "*.json" -o -name "*.manifest" | xargs sed -i 's|/xhupdate/|/ldupdate/|g'
find . -name "*.js" -o -name "*.json" -o -name "*.manifest" | xargs sed -i 's|xhupdate/|ldupdate/|g'
```

## ğŸŒ æœåŠ¡å™¨ç«¯é…ç½®

### éœ€è¦åˆ›å»ºçš„ç›®å½•ç»“æ„
```
æœåŠ¡å™¨æ ¹ç›®å½•/
â”œâ”€â”€ ldupdate/                    # æ–°çš„çƒ­æ›´æ–°ç›®å½•
â”‚   â”œâ”€â”€ project.manifest
â”‚   â”œâ”€â”€ version.manifest
â”‚   â””â”€â”€ assets/
â””â”€â”€ ldconfig/                    # æ–°çš„é…ç½®ç›®å½•
    â””â”€â”€ release_first.json
```

### æ–‡ä»¶ä¸Šä¼ 
1. ä½¿ç”¨ `version_generator.js` ç”Ÿæˆæ–°çš„çƒ­æ›´æ–°æ–‡ä»¶
2. ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ `ldupdate/` ç›®å½•
3. å°†é…ç½®æ–‡ä»¶ `release_first.json` ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ `ldconfig/` ç›®å½•

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½é‡è¦**ï¼šä¿®æ”¹å‰åŠ¡å¿…å¤‡ä»½åŸå§‹æ–‡ä»¶
2. **æœåŠ¡å™¨åŒæ­¥**ï¼šç¡®ä¿æœåŠ¡å™¨ç«¯ä¹Ÿåˆ›å»ºå¯¹åº”çš„ç›®å½•
3. **æµ‹è¯•éªŒè¯**ï¼šä¿®æ”¹åæµ‹è¯•çƒ­æ›´æ–°åŠŸèƒ½æ˜¯å¦æ­£å¸¸
4. **é…ç½®æ–‡ä»¶**ï¼šæ³¨æ„é…ç½®ç›®å½•ä¹Ÿè¦ç›¸åº”ä¿®æ”¹
5. **ç‰ˆæœ¬ç®¡ç†**ï¼šé‡æ–°ç”Ÿæˆç‰ˆæœ¬æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°æ–°ç›®å½•

## ğŸ”„ è¿˜åŸæ–¹æ³•

å¦‚æœéœ€è¦è¿˜åŸåˆ°åŸå§‹çŠ¶æ€ï¼š
```bash
# ä»å¤‡ä»½æ¢å¤
cp backup_*/version_generator.js ./
cp backup_*/assets/project.manifest ./
# ... æ¢å¤å…¶ä»–æ–‡ä»¶
```
