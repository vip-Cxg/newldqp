window.__require = function e(t, n, i) {
function a(o, s) {
if (!n[o]) {
if (!t[o]) {
var c = o.split("/");
c = c[c.length - 1];
if (!t[c]) {
var l = "function" == typeof __require && __require;
if (!s && l) return l(c, !0);
if (r) return r(c, !0);
throw new Error("Cannot find module '" + o + "'");
}
o = c;
}
var u = n[o] = {
exports: {}
};
t[o][0].call(u.exports, function(e) {
return a(t[o][1][e] || e);
}, u, u.exports, e, t, n, i);
}
return n[o].exports;
}
for (var r = "function" == typeof __require && __require, o = 0; o < i.length; o++) a(i[o]);
return a;
}({
1: [ function(e, t) {
var n = e("util/"), i = Array.prototype.slice, a = Object.prototype.hasOwnProperty, r = t.exports = u;
r.AssertionError = function(e) {
this.name = "AssertionError";
this.actual = e.actual;
this.expected = e.expected;
this.operator = e.operator;
if (e.message) {
this.message = e.message;
this.generatedMessage = !1;
} else {
this.message = c(this);
this.generatedMessage = !0;
}
var t = e.stackStartFunction || l;
if (Error.captureStackTrace) Error.captureStackTrace(this, t); else {
var n = new Error();
if (n.stack) {
var i = n.stack, a = t.name, r = i.indexOf("\n" + a);
if (r >= 0) {
var o = i.indexOf("\n", r + 1);
i = i.substring(o + 1);
}
this.stack = i;
}
}
};
n.inherits(r.AssertionError, Error);
function o(e, t) {
return n.isUndefined(t) ? "" + t : n.isNumber(t) && !isFinite(t) ? t.toString() : n.isFunction(t) || n.isRegExp(t) ? t.toString() : t;
}
function s(e, t) {
return n.isString(e) ? e.length < t ? e : e.slice(0, t) : e;
}
function c(e) {
return s(JSON.stringify(e.actual, o), 128) + " " + e.operator + " " + s(JSON.stringify(e.expected, o), 128);
}
function l(e, t, n, i, a) {
throw new r.AssertionError({
message: n,
actual: e,
expected: t,
operator: i,
stackStartFunction: a
});
}
r.fail = l;
function u(e, t) {
e || l(e, !0, t, "==", r.ok);
}
r.ok = u;
r.equal = function(e, t, n) {
e != t && l(e, t, n, "==", r.equal);
};
r.notEqual = function(e, t, n) {
e == t && l(e, t, n, "!=", r.notEqual);
};
r.deepEqual = function(e, t, n) {
d(e, t) || l(e, t, n, "deepEqual", r.deepEqual);
};
function d(e, t) {
if (e === t) return !0;
if (n.isBuffer(e) && n.isBuffer(t)) {
if (e.length != t.length) return !1;
for (var i = 0; i < e.length; i++) if (e[i] !== t[i]) return !1;
return !0;
}
return n.isDate(e) && n.isDate(t) ? e.getTime() === t.getTime() : n.isRegExp(e) && n.isRegExp(t) ? e.source === t.source && e.global === t.global && e.multiline === t.multiline && e.lastIndex === t.lastIndex && e.ignoreCase === t.ignoreCase : n.isObject(e) || n.isObject(t) ? f(e, t) : e == t;
}
function h(e) {
return "[object Arguments]" == Object.prototype.toString.call(e);
}
function f(e, t) {
if (n.isNullOrUndefined(e) || n.isNullOrUndefined(t)) return !1;
if (e.prototype !== t.prototype) return !1;
if (n.isPrimitive(e) || n.isPrimitive(t)) return e === t;
var a = h(e), r = h(t);
if (a && !r || !a && r) return !1;
if (a) return d(e = i.call(e), t = i.call(t));
var o, s, c = g(e), l = g(t);
if (c.length != l.length) return !1;
c.sort();
l.sort();
for (s = c.length - 1; s >= 0; s--) if (c[s] != l[s]) return !1;
for (s = c.length - 1; s >= 0; s--) if (!d(e[o = c[s]], t[o])) return !1;
return !0;
}
r.notDeepEqual = function(e, t, n) {
d(e, t) && l(e, t, n, "notDeepEqual", r.notDeepEqual);
};
r.strictEqual = function(e, t, n) {
e !== t && l(e, t, n, "===", r.strictEqual);
};
r.notStrictEqual = function(e, t, n) {
e === t && l(e, t, n, "!==", r.notStrictEqual);
};
function p(e, t) {
return !(!e || !t) && ("[object RegExp]" == Object.prototype.toString.call(t) ? t.test(e) : e instanceof t || !0 === t.call({}, e));
}
function m(e, t, i, a) {
var r;
if (n.isString(i)) {
a = i;
i = null;
}
try {
t();
} catch (e) {
r = e;
}
a = (i && i.name ? " (" + i.name + ")." : ".") + (a ? " " + a : ".");
e && !r && l(r, i, "Missing expected exception" + a);
!e && p(r, i) && l(r, i, "Got unwanted exception" + a);
if (e && r && i && !p(r, i) || !e && r) throw r;
}
r.throws = function(e, t, n) {
m.apply(this, [ !0 ].concat(i.call(arguments)));
};
r.doesNotThrow = function(e, t) {
m.apply(this, [ !1 ].concat(i.call(arguments)));
};
r.ifError = function(e) {
if (e) throw e;
};
var g = Object.keys || function(e) {
var t = [];
for (var n in e) a.call(e, n) && t.push(n);
return t;
};
}, {
"util/": 4
} ],
2: [ function(e, t) {
"function" == typeof Object.create ? t.exports = function(e, t) {
e.super_ = t;
e.prototype = Object.create(t.prototype, {
constructor: {
value: e,
enumerable: !1,
writable: !0,
configurable: !0
}
});
} : t.exports = function(e, t) {
e.super_ = t;
var n = function() {};
n.prototype = t.prototype;
e.prototype = new n();
e.prototype.constructor = e;
};
}, {} ],
3: [ function(e, t) {
t.exports = function(e) {
return e && "object" == typeof e && "function" == typeof e.copy && "function" == typeof e.fill && "function" == typeof e.readUInt8;
};
}, {} ],
4: [ function(e, t, n) {
(function(t, i) {
var a = /%[sdj%]/g;
n.format = function(e) {
if (!S(e)) {
for (var t = [], n = 0; n < arguments.length; n++) t.push(s(arguments[n]));
return t.join(" ");
}
n = 1;
for (var i = arguments, r = i.length, o = String(e).replace(a, function(e) {
if ("%%" === e) return "%";
if (n >= r) return e;
switch (e) {
case "%s":
return String(i[n++]);

case "%d":
return Number(i[n++]);

case "%j":
try {
return JSON.stringify(i[n++]);
} catch (e) {
return "[Circular]";
}

default:
return e;
}
}), c = i[n]; n < r; c = i[++n]) b(c) || !E(c) ? o += " " + c : o += " " + s(c);
return o;
};
n.deprecate = function(e, a) {
if (_(i.process)) return function() {
return n.deprecate(e, a).apply(this, arguments);
};
if (!0 === t.noDeprecation) return e;
var r = !1;
return function() {
if (!r) {
if (t.throwDeprecation) throw new Error(a);
t.traceDeprecation ? console.trace(a) : console.error(a);
r = !0;
}
return e.apply(this, arguments);
};
};
var r, o = {};
n.debuglog = function(e) {
_(r) && (r = t.env.NODE_DEBUG || "");
e = e.toUpperCase();
if (!o[e]) if (new RegExp("\\b" + e + "\\b", "i").test(r)) {
var i = t.pid;
o[e] = function() {
var t = n.format.apply(n, arguments);
console.error("%s %d: %s", e, i, t);
};
} else o[e] = function() {};
return o[e];
};
function s(e, t) {
var i = {
seen: [],
stylize: l
};
arguments.length >= 3 && (i.depth = arguments[2]);
arguments.length >= 4 && (i.colors = arguments[3]);
C(t) ? i.showHidden = t : t && n._extend(i, t);
_(i.showHidden) && (i.showHidden = !1);
_(i.depth) && (i.depth = 2);
_(i.colors) && (i.colors = !1);
_(i.customInspect) && (i.customInspect = !0);
i.colors && (i.stylize = c);
return d(i, e, i.depth);
}
n.inspect = s;
s.colors = {
bold: [ 1, 22 ],
italic: [ 3, 23 ],
underline: [ 4, 24 ],
inverse: [ 7, 27 ],
white: [ 37, 39 ],
grey: [ 90, 39 ],
black: [ 30, 39 ],
blue: [ 34, 39 ],
cyan: [ 36, 39 ],
green: [ 32, 39 ],
magenta: [ 35, 39 ],
red: [ 31, 39 ],
yellow: [ 33, 39 ]
};
s.styles = {
special: "cyan",
number: "yellow",
boolean: "yellow",
undefined: "grey",
null: "bold",
string: "green",
date: "magenta",
regexp: "red"
};
function c(e, t) {
var n = s.styles[t];
return n ? "[" + s.colors[n][0] + "m" + e + "[" + s.colors[n][1] + "m" : e;
}
function l(e) {
return e;
}
function u(e) {
var t = {};
e.forEach(function(e) {
t[e] = !0;
});
return t;
}
function d(e, t, i) {
if (e.customInspect && t && N(t.inspect) && t.inspect !== n.inspect && (!t.constructor || t.constructor.prototype !== t)) {
var a = t.inspect(i, e);
S(a) || (a = d(e, a, i));
return a;
}
var r = h(e, t);
if (r) return r;
var o = Object.keys(t), s = u(o);
e.showHidden && (o = Object.getOwnPropertyNames(t));
if (I(t) && (o.indexOf("message") >= 0 || o.indexOf("description") >= 0)) return f(t);
if (0 === o.length) {
if (N(t)) {
var c = t.name ? ": " + t.name : "";
return e.stylize("[Function" + c + "]", "special");
}
if (T(t)) return e.stylize(RegExp.prototype.toString.call(t), "regexp");
if (A(t)) return e.stylize(Date.prototype.toString.call(t), "date");
if (I(t)) return f(t);
}
var l, C = "", b = !1, y = [ "{", "}" ];
if (v(t)) {
b = !0;
y = [ "[", "]" ];
}
N(t) && (C = " [Function" + (t.name ? ": " + t.name : "") + "]");
T(t) && (C = " " + RegExp.prototype.toString.call(t));
A(t) && (C = " " + Date.prototype.toUTCString.call(t));
I(t) && (C = " " + f(t));
if (0 === o.length && (!b || 0 == t.length)) return y[0] + C + y[1];
if (i < 0) return T(t) ? e.stylize(RegExp.prototype.toString.call(t), "regexp") : e.stylize("[Object]", "special");
e.seen.push(t);
l = b ? p(e, t, i, s, o) : o.map(function(n) {
return m(e, t, i, s, n, b);
});
e.seen.pop();
return g(l, C, y);
}
function h(e, t) {
if (_(t)) return e.stylize("undefined", "undefined");
if (S(t)) {
var n = "'" + JSON.stringify(t).replace(/^"|"$/g, "").replace(/'/g, "\\'").replace(/\\"/g, '"') + "'";
return e.stylize(n, "string");
}
return y(t) ? e.stylize("" + t, "number") : C(t) ? e.stylize("" + t, "boolean") : b(t) ? e.stylize("null", "null") : void 0;
}
function f(e) {
return "[" + Error.prototype.toString.call(e) + "]";
}
function p(e, t, n, i, a) {
for (var r = [], o = 0, s = t.length; o < s; ++o) x(t, String(o)) ? r.push(m(e, t, n, i, String(o), !0)) : r.push("");
a.forEach(function(a) {
a.match(/^\d+$/) || r.push(m(e, t, n, i, a, !0));
});
return r;
}
function m(e, t, n, i, a, r) {
var o, s, c;
(c = Object.getOwnPropertyDescriptor(t, a) || {
value: t[a]
}).get ? s = c.set ? e.stylize("[Getter/Setter]", "special") : e.stylize("[Getter]", "special") : c.set && (s = e.stylize("[Setter]", "special"));
x(i, a) || (o = "[" + a + "]");
s || (e.seen.indexOf(c.value) < 0 ? (s = b(n) ? d(e, c.value, null) : d(e, c.value, n - 1)).indexOf("\n") > -1 && (s = r ? s.split("\n").map(function(e) {
return "  " + e;
}).join("\n").substr(2) : "\n" + s.split("\n").map(function(e) {
return "   " + e;
}).join("\n")) : s = e.stylize("[Circular]", "special"));
if (_(o)) {
if (r && a.match(/^\d+$/)) return s;
if ((o = JSON.stringify("" + a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)) {
o = o.substr(1, o.length - 2);
o = e.stylize(o, "name");
} else {
o = o.replace(/'/g, "\\'").replace(/\\"/g, '"').replace(/(^"|"$)/g, "'");
o = e.stylize(o, "string");
}
}
return o + ": " + s;
}
function g(e, t, n) {
return e.reduce(function(e, t) {
t.indexOf("\n");
return e + t.replace(/\u001b\[\d\d?m/g, "").length + 1;
}, 0) > 60 ? n[0] + ("" === t ? "" : t + "\n ") + " " + e.join(",\n  ") + " " + n[1] : n[0] + t + " " + e.join(", ") + " " + n[1];
}
function v(e) {
return Array.isArray(e);
}
n.isArray = v;
function C(e) {
return "boolean" == typeof e;
}
n.isBoolean = C;
function b(e) {
return null === e;
}
n.isNull = b;
n.isNullOrUndefined = function(e) {
return null == e;
};
function y(e) {
return "number" == typeof e;
}
n.isNumber = y;
function S(e) {
return "string" == typeof e;
}
n.isString = S;
n.isSymbol = function(e) {
return "symbol" == typeof e;
};
function _(e) {
return void 0 === e;
}
n.isUndefined = _;
function T(e) {
return E(e) && "[object RegExp]" === w(e);
}
n.isRegExp = T;
function E(e) {
return "object" == typeof e && null !== e;
}
n.isObject = E;
function A(e) {
return E(e) && "[object Date]" === w(e);
}
n.isDate = A;
function I(e) {
return E(e) && ("[object Error]" === w(e) || e instanceof Error);
}
n.isError = I;
function N(e) {
return "function" == typeof e;
}
n.isFunction = N;
n.isPrimitive = function(e) {
return null === e || "boolean" == typeof e || "number" == typeof e || "string" == typeof e || "symbol" == typeof e || "undefined" == typeof e;
};
n.isBuffer = e("./support/isBuffer");
function w(e) {
return Object.prototype.toString.call(e);
}
function D(e) {
return e < 10 ? "0" + e.toString(10) : e.toString(10);
}
var P = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
function M() {
var e = new Date(), t = [ D(e.getHours()), D(e.getMinutes()), D(e.getSeconds()) ].join(":");
return [ e.getDate(), P[e.getMonth()], t ].join(" ");
}
n.log = function() {
console.log("%s - %s", M(), n.format.apply(n, arguments));
};
n.inherits = e("inherits");
n._extend = function(e, t) {
if (!t || !E(t)) return e;
for (var n = Object.keys(t), i = n.length; i--; ) e[n[i]] = t[n[i]];
return e;
};
function x(e, t) {
return Object.prototype.hasOwnProperty.call(e, t);
}
}).call(this, e("_process"), "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
}, {
"./support/isBuffer": 3,
_process: 9,
inherits: 2
} ],
5: [ function(e, t, n) {
"use strict";
n.byteLength = function(e) {
var t = l(e), n = t[0], i = t[1];
return 3 * (n + i) / 4 - i;
};
n.toByteArray = function(e) {
var t, n, i = l(e), o = i[0], s = i[1], c = new r(u(0, o, s)), d = 0, h = s > 0 ? o - 4 : o;
for (n = 0; n < h; n += 4) {
t = a[e.charCodeAt(n)] << 18 | a[e.charCodeAt(n + 1)] << 12 | a[e.charCodeAt(n + 2)] << 6 | a[e.charCodeAt(n + 3)];
c[d++] = t >> 16 & 255;
c[d++] = t >> 8 & 255;
c[d++] = 255 & t;
}
if (2 === s) {
t = a[e.charCodeAt(n)] << 2 | a[e.charCodeAt(n + 1)] >> 4;
c[d++] = 255 & t;
}
if (1 === s) {
t = a[e.charCodeAt(n)] << 10 | a[e.charCodeAt(n + 1)] << 4 | a[e.charCodeAt(n + 2)] >> 2;
c[d++] = t >> 8 & 255;
c[d++] = 255 & t;
}
return c;
};
n.fromByteArray = function(e) {
for (var t, n = e.length, a = n % 3, r = [], o = 0, s = n - a; o < s; o += 16383) r.push(d(e, o, o + 16383 > s ? s : o + 16383));
if (1 === a) {
t = e[n - 1];
r.push(i[t >> 2] + i[t << 4 & 63] + "==");
} else if (2 === a) {
t = (e[n - 2] << 8) + e[n - 1];
r.push(i[t >> 10] + i[t >> 4 & 63] + i[t << 2 & 63] + "=");
}
return r.join("");
};
for (var i = [], a = [], r = "undefined" != typeof Uint8Array ? Uint8Array : Array, o = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", s = 0, c = o.length; s < c; ++s) {
i[s] = o[s];
a[o.charCodeAt(s)] = s;
}
a["-".charCodeAt(0)] = 62;
a["_".charCodeAt(0)] = 63;
function l(e) {
var t = e.length;
if (t % 4 > 0) throw new Error("Invalid string. Length must be a multiple of 4");
var n = e.indexOf("=");
-1 === n && (n = t);
return [ n, n === t ? 0 : 4 - n % 4 ];
}
function u(e, t, n) {
return 3 * (t + n) / 4 - n;
}
function d(e, t, n) {
for (var a, r, o = [], s = t; s < n; s += 3) {
a = (e[s] << 16 & 16711680) + (e[s + 1] << 8 & 65280) + (255 & e[s + 2]);
o.push(i[(r = a) >> 18 & 63] + i[r >> 12 & 63] + i[r >> 6 & 63] + i[63 & r]);
}
return o.join("");
}
}, {} ],
6: [ function(e, t, n) {
(function(t) {
"use strict";
var i = e("base64-js"), a = e("ieee754"), r = e("isarray");
n.Buffer = c;
n.SlowBuffer = function(e) {
+e != e && (e = 0);
return c.alloc(+e);
};
n.INSPECT_MAX_BYTES = 50;
c.TYPED_ARRAY_SUPPORT = void 0 !== t.TYPED_ARRAY_SUPPORT ? t.TYPED_ARRAY_SUPPORT : function() {
try {
var e = new Uint8Array(1);
e.__proto__ = {
__proto__: Uint8Array.prototype,
foo: function() {
return 42;
}
};
return 42 === e.foo() && "function" == typeof e.subarray && 0 === e.subarray(1, 1).byteLength;
} catch (e) {
return !1;
}
}();
n.kMaxLength = o();
function o() {
return c.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
}
function s(e, t) {
if (o() < t) throw new RangeError("Invalid typed array length");
if (c.TYPED_ARRAY_SUPPORT) (e = new Uint8Array(t)).__proto__ = c.prototype; else {
null === e && (e = new c(t));
e.length = t;
}
return e;
}
function c(e, t, n) {
if (!(c.TYPED_ARRAY_SUPPORT || this instanceof c)) return new c(e, t, n);
if ("number" == typeof e) {
if ("string" == typeof t) throw new Error("If encoding is specified then the first argument must be a string");
return h(this, e);
}
return l(this, e, t, n);
}
c.poolSize = 8192;
c._augment = function(e) {
e.__proto__ = c.prototype;
return e;
};
function l(e, t, n, i) {
if ("number" == typeof t) throw new TypeError('"value" argument must not be a number');
return "undefined" != typeof ArrayBuffer && t instanceof ArrayBuffer ? m(e, t, n, i) : "string" == typeof t ? f(e, t, n) : g(e, t);
}
c.from = function(e, t, n) {
return l(null, e, t, n);
};
if (c.TYPED_ARRAY_SUPPORT) {
c.prototype.__proto__ = Uint8Array.prototype;
c.__proto__ = Uint8Array;
"undefined" != typeof Symbol && Symbol.species && c[Symbol.species] === c && Object.defineProperty(c, Symbol.species, {
value: null,
configurable: !0
});
}
function u(e) {
if ("number" != typeof e) throw new TypeError('"size" argument must be a number');
if (e < 0) throw new RangeError('"size" argument must not be negative');
}
function d(e, t, n, i) {
u(t);
return t <= 0 ? s(e, t) : void 0 !== n ? "string" == typeof i ? s(e, t).fill(n, i) : s(e, t).fill(n) : s(e, t);
}
c.alloc = function(e, t, n) {
return d(null, e, t, n);
};
function h(e, t) {
u(t);
e = s(e, t < 0 ? 0 : 0 | v(t));
if (!c.TYPED_ARRAY_SUPPORT) for (var n = 0; n < t; ++n) e[n] = 0;
return e;
}
c.allocUnsafe = function(e) {
return h(null, e);
};
c.allocUnsafeSlow = function(e) {
return h(null, e);
};
function f(e, t, n) {
"string" == typeof n && "" !== n || (n = "utf8");
if (!c.isEncoding(n)) throw new TypeError('"encoding" must be a valid string encoding');
var i = 0 | C(t, n), a = (e = s(e, i)).write(t, n);
a !== i && (e = e.slice(0, a));
return e;
}
function p(e, t) {
var n = t.length < 0 ? 0 : 0 | v(t.length);
e = s(e, n);
for (var i = 0; i < n; i += 1) e[i] = 255 & t[i];
return e;
}
function m(e, t, n, i) {
t.byteLength;
if (n < 0 || t.byteLength < n) throw new RangeError("'offset' is out of bounds");
if (t.byteLength < n + (i || 0)) throw new RangeError("'length' is out of bounds");
t = void 0 === n && void 0 === i ? new Uint8Array(t) : void 0 === i ? new Uint8Array(t, n) : new Uint8Array(t, n, i);
c.TYPED_ARRAY_SUPPORT ? (e = t).__proto__ = c.prototype : e = p(e, t);
return e;
}
function g(e, t) {
if (c.isBuffer(t)) {
var n = 0 | v(t.length);
if (0 === (e = s(e, n)).length) return e;
t.copy(e, 0, 0, n);
return e;
}
if (t) {
if ("undefined" != typeof ArrayBuffer && t.buffer instanceof ArrayBuffer || "length" in t) return "number" != typeof t.length || (i = t.length) != i ? s(e, 0) : p(e, t);
if ("Buffer" === t.type && r(t.data)) return p(e, t.data);
}
var i;
throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
}
function v(e) {
if (e >= o()) throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + o().toString(16) + " bytes");
return 0 | e;
}
c.isBuffer = function(e) {
return !(null == e || !e._isBuffer);
};
c.compare = function(e, t) {
if (!c.isBuffer(e) || !c.isBuffer(t)) throw new TypeError("Arguments must be Buffers");
if (e === t) return 0;
for (var n = e.length, i = t.length, a = 0, r = Math.min(n, i); a < r; ++a) if (e[a] !== t[a]) {
n = e[a];
i = t[a];
break;
}
return n < i ? -1 : i < n ? 1 : 0;
};
c.isEncoding = function(e) {
switch (String(e).toLowerCase()) {
case "hex":
case "utf8":
case "utf-8":
case "ascii":
case "latin1":
case "binary":
case "base64":
case "ucs2":
case "ucs-2":
case "utf16le":
case "utf-16le":
return !0;

default:
return !1;
}
};
c.concat = function(e, t) {
if (!r(e)) throw new TypeError('"list" argument must be an Array of Buffers');
if (0 === e.length) return c.alloc(0);
var n;
if (void 0 === t) {
t = 0;
for (n = 0; n < e.length; ++n) t += e[n].length;
}
var i = c.allocUnsafe(t), a = 0;
for (n = 0; n < e.length; ++n) {
var o = e[n];
if (!c.isBuffer(o)) throw new TypeError('"list" argument must be an Array of Buffers');
o.copy(i, a);
a += o.length;
}
return i;
};
function C(e, t) {
if (c.isBuffer(e)) return e.length;
if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(e) || e instanceof ArrayBuffer)) return e.byteLength;
"string" != typeof e && (e = "" + e);
var n = e.length;
if (0 === n) return 0;
for (var i = !1; ;) switch (t) {
case "ascii":
case "latin1":
case "binary":
return n;

case "utf8":
case "utf-8":
case void 0:
return J(e).length;

case "ucs2":
case "ucs-2":
case "utf16le":
case "utf-16le":
return 2 * n;

case "hex":
return n >>> 1;

case "base64":
return Z(e).length;

default:
if (i) return J(e).length;
t = ("" + t).toLowerCase();
i = !0;
}
}
c.byteLength = C;
function b(e, t, n) {
var i = !1;
(void 0 === t || t < 0) && (t = 0);
if (t > this.length) return "";
(void 0 === n || n > this.length) && (n = this.length);
if (n <= 0) return "";
if ((n >>>= 0) <= (t >>>= 0)) return "";
e || (e = "utf8");
for (;;) switch (e) {
case "hex":
return R(this, t, n);

case "utf8":
case "utf-8":
return P(this, t, n);

case "ascii":
return O(this, t, n);

case "latin1":
case "binary":
return G(this, t, n);

case "base64":
return D(this, t, n);

case "ucs2":
case "ucs-2":
case "utf16le":
case "utf-16le":
return k(this, t, n);

default:
if (i) throw new TypeError("Unknown encoding: " + e);
e = (e + "").toLowerCase();
i = !0;
}
}
c.prototype._isBuffer = !0;
function y(e, t, n) {
var i = e[t];
e[t] = e[n];
e[n] = i;
}
c.prototype.swap16 = function() {
var e = this.length;
if (e % 2 != 0) throw new RangeError("Buffer size must be a multiple of 16-bits");
for (var t = 0; t < e; t += 2) y(this, t, t + 1);
return this;
};
c.prototype.swap32 = function() {
var e = this.length;
if (e % 4 != 0) throw new RangeError("Buffer size must be a multiple of 32-bits");
for (var t = 0; t < e; t += 4) {
y(this, t, t + 3);
y(this, t + 1, t + 2);
}
return this;
};
c.prototype.swap64 = function() {
var e = this.length;
if (e % 8 != 0) throw new RangeError("Buffer size must be a multiple of 64-bits");
for (var t = 0; t < e; t += 8) {
y(this, t, t + 7);
y(this, t + 1, t + 6);
y(this, t + 2, t + 5);
y(this, t + 3, t + 4);
}
return this;
};
c.prototype.toString = function() {
var e = 0 | this.length;
return 0 === e ? "" : 0 === arguments.length ? P(this, 0, e) : b.apply(this, arguments);
};
c.prototype.equals = function(e) {
if (!c.isBuffer(e)) throw new TypeError("Argument must be a Buffer");
return this === e || 0 === c.compare(this, e);
};
c.prototype.inspect = function() {
var e = "", t = n.INSPECT_MAX_BYTES;
if (this.length > 0) {
e = this.toString("hex", 0, t).match(/.{2}/g).join(" ");
this.length > t && (e += " ... ");
}
return "<Buffer " + e + ">";
};
c.prototype.compare = function(e, t, n, i, a) {
if (!c.isBuffer(e)) throw new TypeError("Argument must be a Buffer");
void 0 === t && (t = 0);
void 0 === n && (n = e ? e.length : 0);
void 0 === i && (i = 0);
void 0 === a && (a = this.length);
if (t < 0 || n > e.length || i < 0 || a > this.length) throw new RangeError("out of range index");
if (i >= a && t >= n) return 0;
if (i >= a) return -1;
if (t >= n) return 1;
if (this === e) return 0;
for (var r = (a >>>= 0) - (i >>>= 0), o = (n >>>= 0) - (t >>>= 0), s = Math.min(r, o), l = this.slice(i, a), u = e.slice(t, n), d = 0; d < s; ++d) if (l[d] !== u[d]) {
r = l[d];
o = u[d];
break;
}
return r < o ? -1 : o < r ? 1 : 0;
};
function S(e, t, n, i, a) {
if (0 === e.length) return -1;
if ("string" == typeof n) {
i = n;
n = 0;
} else n > 2147483647 ? n = 2147483647 : n < -2147483648 && (n = -2147483648);
n = +n;
isNaN(n) && (n = a ? 0 : e.length - 1);
n < 0 && (n = e.length + n);
if (n >= e.length) {
if (a) return -1;
n = e.length - 1;
} else if (n < 0) {
if (!a) return -1;
n = 0;
}
"string" == typeof t && (t = c.from(t, i));
if (c.isBuffer(t)) return 0 === t.length ? -1 : _(e, t, n, i, a);
if ("number" == typeof t) {
t &= 255;
return c.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? a ? Uint8Array.prototype.indexOf.call(e, t, n) : Uint8Array.prototype.lastIndexOf.call(e, t, n) : _(e, [ t ], n, i, a);
}
throw new TypeError("val must be string, number or Buffer");
}
function _(e, t, n, i, a) {
var r, o = 1, s = e.length, c = t.length;
if (void 0 !== i && ("ucs2" === (i = String(i).toLowerCase()) || "ucs-2" === i || "utf16le" === i || "utf-16le" === i)) {
if (e.length < 2 || t.length < 2) return -1;
o = 2;
s /= 2;
c /= 2;
n /= 2;
}
function l(e, t) {
return 1 === o ? e[t] : e.readUInt16BE(t * o);
}
if (a) {
var u = -1;
for (r = n; r < s; r++) if (l(e, r) === l(t, -1 === u ? 0 : r - u)) {
-1 === u && (u = r);
if (r - u + 1 === c) return u * o;
} else {
-1 !== u && (r -= r - u);
u = -1;
}
} else {
n + c > s && (n = s - c);
for (r = n; r >= 0; r--) {
for (var d = !0, h = 0; h < c; h++) if (l(e, r + h) !== l(t, h)) {
d = !1;
break;
}
if (d) return r;
}
}
return -1;
}
c.prototype.includes = function(e, t, n) {
return -1 !== this.indexOf(e, t, n);
};
c.prototype.indexOf = function(e, t, n) {
return S(this, e, t, n, !0);
};
c.prototype.lastIndexOf = function(e, t, n) {
return S(this, e, t, n, !1);
};
function T(e, t, n, i) {
n = Number(n) || 0;
var a = e.length - n;
i ? (i = Number(i)) > a && (i = a) : i = a;
var r = t.length;
if (r % 2 != 0) throw new TypeError("Invalid hex string");
i > r / 2 && (i = r / 2);
for (var o = 0; o < i; ++o) {
var s = parseInt(t.substr(2 * o, 2), 16);
if (isNaN(s)) return o;
e[n + o] = s;
}
return o;
}
function E(e, t, n, i) {
return Q(J(t, e.length - n), e, n, i);
}
function A(e, t, n, i) {
return Q(V(t), e, n, i);
}
function I(e, t, n, i) {
return A(e, t, n, i);
}
function N(e, t, n, i) {
return Q(Z(t), e, n, i);
}
function w(e, t, n, i) {
return Q(K(t, e.length - n), e, n, i);
}
c.prototype.write = function(e, t, n, i) {
if (void 0 === t) {
i = "utf8";
n = this.length;
t = 0;
} else if (void 0 === n && "string" == typeof t) {
i = t;
n = this.length;
t = 0;
} else {
if (!isFinite(t)) throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
t |= 0;
if (isFinite(n)) {
n |= 0;
void 0 === i && (i = "utf8");
} else {
i = n;
n = void 0;
}
}
var a = this.length - t;
(void 0 === n || n > a) && (n = a);
if (e.length > 0 && (n < 0 || t < 0) || t > this.length) throw new RangeError("Attempt to write outside buffer bounds");
i || (i = "utf8");
for (var r = !1; ;) switch (i) {
case "hex":
return T(this, e, t, n);

case "utf8":
case "utf-8":
return E(this, e, t, n);

case "ascii":
return A(this, e, t, n);

case "latin1":
case "binary":
return I(this, e, t, n);

case "base64":
return N(this, e, t, n);

case "ucs2":
case "ucs-2":
case "utf16le":
case "utf-16le":
return w(this, e, t, n);

default:
if (r) throw new TypeError("Unknown encoding: " + i);
i = ("" + i).toLowerCase();
r = !0;
}
};
c.prototype.toJSON = function() {
return {
type: "Buffer",
data: Array.prototype.slice.call(this._arr || this, 0)
};
};
function D(e, t, n) {
return 0 === t && n === e.length ? i.fromByteArray(e) : i.fromByteArray(e.slice(t, n));
}
function P(e, t, n) {
n = Math.min(e.length, n);
for (var i = [], a = t; a < n; ) {
var r = e[a], o = null, s = r > 239 ? 4 : r > 223 ? 3 : r > 191 ? 2 : 1;
if (a + s <= n) {
var c, l, u, d;
switch (s) {
case 1:
r < 128 && (o = r);
break;

case 2:
128 == (192 & (c = e[a + 1])) && (d = (31 & r) << 6 | 63 & c) > 127 && (o = d);
break;

case 3:
c = e[a + 1];
l = e[a + 2];
128 == (192 & c) && 128 == (192 & l) && (d = (15 & r) << 12 | (63 & c) << 6 | 63 & l) > 2047 && (d < 55296 || d > 57343) && (o = d);
break;

case 4:
c = e[a + 1];
l = e[a + 2];
u = e[a + 3];
128 == (192 & c) && 128 == (192 & l) && 128 == (192 & u) && (d = (15 & r) << 18 | (63 & c) << 12 | (63 & l) << 6 | 63 & u) > 65535 && d < 1114112 && (o = d);
}
}
if (null === o) {
o = 65533;
s = 1;
} else if (o > 65535) {
o -= 65536;
i.push(o >>> 10 & 1023 | 55296);
o = 56320 | 1023 & o;
}
i.push(o);
a += s;
}
return x(i);
}
var M = 4096;
function x(e) {
var t = e.length;
if (t <= M) return String.fromCharCode.apply(String, e);
for (var n = "", i = 0; i < t; ) n += String.fromCharCode.apply(String, e.slice(i, i += M));
return n;
}
function O(e, t, n) {
var i = "";
n = Math.min(e.length, n);
for (var a = t; a < n; ++a) i += String.fromCharCode(127 & e[a]);
return i;
}
function G(e, t, n) {
var i = "";
n = Math.min(e.length, n);
for (var a = t; a < n; ++a) i += String.fromCharCode(e[a]);
return i;
}
function R(e, t, n) {
var i, a = e.length;
(!t || t < 0) && (t = 0);
(!n || n < 0 || n > a) && (n = a);
for (var r = "", o = t; o < n; ++o) r += (i = e[o]) < 16 ? "0" + i.toString(16) : i.toString(16);
return r;
}
function k(e, t, n) {
for (var i = e.slice(t, n), a = "", r = 0; r < i.length; r += 2) a += String.fromCharCode(i[r] + 256 * i[r + 1]);
return a;
}
c.prototype.slice = function(e, t) {
var n, i = this.length;
(e = ~~e) < 0 ? (e += i) < 0 && (e = 0) : e > i && (e = i);
(t = void 0 === t ? i : ~~t) < 0 ? (t += i) < 0 && (t = 0) : t > i && (t = i);
t < e && (t = e);
if (c.TYPED_ARRAY_SUPPORT) (n = this.subarray(e, t)).__proto__ = c.prototype; else {
var a = t - e;
n = new c(a, void 0);
for (var r = 0; r < a; ++r) n[r] = this[r + e];
}
return n;
};
function L(e, t, n) {
if (e % 1 != 0 || e < 0) throw new RangeError("offset is not uint");
if (e + t > n) throw new RangeError("Trying to access beyond buffer length");
}
c.prototype.readUIntLE = function(e, t, n) {
e |= 0;
t |= 0;
n || L(e, t, this.length);
for (var i = this[e], a = 1, r = 0; ++r < t && (a *= 256); ) i += this[e + r] * a;
return i;
};
c.prototype.readUIntBE = function(e, t, n) {
e |= 0;
t |= 0;
n || L(e, t, this.length);
for (var i = this[e + --t], a = 1; t > 0 && (a *= 256); ) i += this[e + --t] * a;
return i;
};
c.prototype.readUInt8 = function(e, t) {
t || L(e, 1, this.length);
return this[e];
};
c.prototype.readUInt16LE = function(e, t) {
t || L(e, 2, this.length);
return this[e] | this[e + 1] << 8;
};
c.prototype.readUInt16BE = function(e, t) {
t || L(e, 2, this.length);
return this[e] << 8 | this[e + 1];
};
c.prototype.readUInt32LE = function(e, t) {
t || L(e, 4, this.length);
return (this[e] | this[e + 1] << 8 | this[e + 2] << 16) + 16777216 * this[e + 3];
};
c.prototype.readUInt32BE = function(e, t) {
t || L(e, 4, this.length);
return 16777216 * this[e] + (this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3]);
};
c.prototype.readIntLE = function(e, t, n) {
e |= 0;
t |= 0;
n || L(e, t, this.length);
for (var i = this[e], a = 1, r = 0; ++r < t && (a *= 256); ) i += this[e + r] * a;
i >= (a *= 128) && (i -= Math.pow(2, 8 * t));
return i;
};
c.prototype.readIntBE = function(e, t, n) {
e |= 0;
t |= 0;
n || L(e, t, this.length);
for (var i = t, a = 1, r = this[e + --i]; i > 0 && (a *= 256); ) r += this[e + --i] * a;
r >= (a *= 128) && (r -= Math.pow(2, 8 * t));
return r;
};
c.prototype.readInt8 = function(e, t) {
t || L(e, 1, this.length);
return 128 & this[e] ? -1 * (255 - this[e] + 1) : this[e];
};
c.prototype.readInt16LE = function(e, t) {
t || L(e, 2, this.length);
var n = this[e] | this[e + 1] << 8;
return 32768 & n ? 4294901760 | n : n;
};
c.prototype.readInt16BE = function(e, t) {
t || L(e, 2, this.length);
var n = this[e + 1] | this[e] << 8;
return 32768 & n ? 4294901760 | n : n;
};
c.prototype.readInt32LE = function(e, t) {
t || L(e, 4, this.length);
return this[e] | this[e + 1] << 8 | this[e + 2] << 16 | this[e + 3] << 24;
};
c.prototype.readInt32BE = function(e, t) {
t || L(e, 4, this.length);
return this[e] << 24 | this[e + 1] << 16 | this[e + 2] << 8 | this[e + 3];
};
c.prototype.readFloatLE = function(e, t) {
t || L(e, 4, this.length);
return a.read(this, e, !0, 23, 4);
};
c.prototype.readFloatBE = function(e, t) {
t || L(e, 4, this.length);
return a.read(this, e, !1, 23, 4);
};
c.prototype.readDoubleLE = function(e, t) {
t || L(e, 8, this.length);
return a.read(this, e, !0, 52, 8);
};
c.prototype.readDoubleBE = function(e, t) {
t || L(e, 8, this.length);
return a.read(this, e, !1, 52, 8);
};
function B(e, t, n, i, a, r) {
if (!c.isBuffer(e)) throw new TypeError('"buffer" argument must be a Buffer instance');
if (t > a || t < r) throw new RangeError('"value" argument is out of bounds');
if (n + i > e.length) throw new RangeError("Index out of range");
}
c.prototype.writeUIntLE = function(e, t, n, i) {
e = +e;
t |= 0;
n |= 0;
i || B(this, e, t, n, Math.pow(2, 8 * n) - 1, 0);
var a = 1, r = 0;
this[t] = 255 & e;
for (;++r < n && (a *= 256); ) this[t + r] = e / a & 255;
return t + n;
};
c.prototype.writeUIntBE = function(e, t, n, i) {
e = +e;
t |= 0;
n |= 0;
i || B(this, e, t, n, Math.pow(2, 8 * n) - 1, 0);
var a = n - 1, r = 1;
this[t + a] = 255 & e;
for (;--a >= 0 && (r *= 256); ) this[t + a] = e / r & 255;
return t + n;
};
c.prototype.writeUInt8 = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 1, 255, 0);
c.TYPED_ARRAY_SUPPORT || (e = Math.floor(e));
this[t] = 255 & e;
return t + 1;
};
function F(e, t, n, i) {
t < 0 && (t = 65535 + t + 1);
for (var a = 0, r = Math.min(e.length - n, 2); a < r; ++a) e[n + a] = (t & 255 << 8 * (i ? a : 1 - a)) >>> 8 * (i ? a : 1 - a);
}
c.prototype.writeUInt16LE = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 2, 65535, 0);
if (c.TYPED_ARRAY_SUPPORT) {
this[t] = 255 & e;
this[t + 1] = e >>> 8;
} else F(this, e, t, !0);
return t + 2;
};
c.prototype.writeUInt16BE = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 2, 65535, 0);
if (c.TYPED_ARRAY_SUPPORT) {
this[t] = e >>> 8;
this[t + 1] = 255 & e;
} else F(this, e, t, !1);
return t + 2;
};
function U(e, t, n, i) {
t < 0 && (t = 4294967295 + t + 1);
for (var a = 0, r = Math.min(e.length - n, 4); a < r; ++a) e[n + a] = t >>> 8 * (i ? a : 3 - a) & 255;
}
c.prototype.writeUInt32LE = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 4, 4294967295, 0);
if (c.TYPED_ARRAY_SUPPORT) {
this[t + 3] = e >>> 24;
this[t + 2] = e >>> 16;
this[t + 1] = e >>> 8;
this[t] = 255 & e;
} else U(this, e, t, !0);
return t + 4;
};
c.prototype.writeUInt32BE = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 4, 4294967295, 0);
if (c.TYPED_ARRAY_SUPPORT) {
this[t] = e >>> 24;
this[t + 1] = e >>> 16;
this[t + 2] = e >>> 8;
this[t + 3] = 255 & e;
} else U(this, e, t, !1);
return t + 4;
};
c.prototype.writeIntLE = function(e, t, n, i) {
e = +e;
t |= 0;
if (!i) {
var a = Math.pow(2, 8 * n - 1);
B(this, e, t, n, a - 1, -a);
}
var r = 0, o = 1, s = 0;
this[t] = 255 & e;
for (;++r < n && (o *= 256); ) {
e < 0 && 0 === s && 0 !== this[t + r - 1] && (s = 1);
this[t + r] = (e / o >> 0) - s & 255;
}
return t + n;
};
c.prototype.writeIntBE = function(e, t, n, i) {
e = +e;
t |= 0;
if (!i) {
var a = Math.pow(2, 8 * n - 1);
B(this, e, t, n, a - 1, -a);
}
var r = n - 1, o = 1, s = 0;
this[t + r] = 255 & e;
for (;--r >= 0 && (o *= 256); ) {
e < 0 && 0 === s && 0 !== this[t + r + 1] && (s = 1);
this[t + r] = (e / o >> 0) - s & 255;
}
return t + n;
};
c.prototype.writeInt8 = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 1, 127, -128);
c.TYPED_ARRAY_SUPPORT || (e = Math.floor(e));
e < 0 && (e = 255 + e + 1);
this[t] = 255 & e;
return t + 1;
};
c.prototype.writeInt16LE = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 2, 32767, -32768);
if (c.TYPED_ARRAY_SUPPORT) {
this[t] = 255 & e;
this[t + 1] = e >>> 8;
} else F(this, e, t, !0);
return t + 2;
};
c.prototype.writeInt16BE = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 2, 32767, -32768);
if (c.TYPED_ARRAY_SUPPORT) {
this[t] = e >>> 8;
this[t + 1] = 255 & e;
} else F(this, e, t, !1);
return t + 2;
};
c.prototype.writeInt32LE = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 4, 2147483647, -2147483648);
if (c.TYPED_ARRAY_SUPPORT) {
this[t] = 255 & e;
this[t + 1] = e >>> 8;
this[t + 2] = e >>> 16;
this[t + 3] = e >>> 24;
} else U(this, e, t, !0);
return t + 4;
};
c.prototype.writeInt32BE = function(e, t, n) {
e = +e;
t |= 0;
n || B(this, e, t, 4, 2147483647, -2147483648);
e < 0 && (e = 4294967295 + e + 1);
if (c.TYPED_ARRAY_SUPPORT) {
this[t] = e >>> 24;
this[t + 1] = e >>> 16;
this[t + 2] = e >>> 8;
this[t + 3] = 255 & e;
} else U(this, e, t, !1);
return t + 4;
};
function H(e, t, n, i) {
if (n + i > e.length) throw new RangeError("Index out of range");
if (n < 0) throw new RangeError("Index out of range");
}
function z(e, t, n, i, r) {
r || H(e, 0, n, 4);
a.write(e, t, n, i, 23, 4);
return n + 4;
}
c.prototype.writeFloatLE = function(e, t, n) {
return z(this, e, t, !0, n);
};
c.prototype.writeFloatBE = function(e, t, n) {
return z(this, e, t, !1, n);
};
function j(e, t, n, i, r) {
r || H(e, 0, n, 8);
a.write(e, t, n, i, 52, 8);
return n + 8;
}
c.prototype.writeDoubleLE = function(e, t, n) {
return j(this, e, t, !0, n);
};
c.prototype.writeDoubleBE = function(e, t, n) {
return j(this, e, t, !1, n);
};
c.prototype.copy = function(e, t, n, i) {
n || (n = 0);
i || 0 === i || (i = this.length);
t >= e.length && (t = e.length);
t || (t = 0);
i > 0 && i < n && (i = n);
if (i === n) return 0;
if (0 === e.length || 0 === this.length) return 0;
if (t < 0) throw new RangeError("targetStart out of bounds");
if (n < 0 || n >= this.length) throw new RangeError("sourceStart out of bounds");
if (i < 0) throw new RangeError("sourceEnd out of bounds");
i > this.length && (i = this.length);
e.length - t < i - n && (i = e.length - t + n);
var a, r = i - n;
if (this === e && n < t && t < i) for (a = r - 1; a >= 0; --a) e[a + t] = this[a + n]; else if (r < 1e3 || !c.TYPED_ARRAY_SUPPORT) for (a = 0; a < r; ++a) e[a + t] = this[a + n]; else Uint8Array.prototype.set.call(e, this.subarray(n, n + r), t);
return r;
};
c.prototype.fill = function(e, t, n, i) {
if ("string" == typeof e) {
if ("string" == typeof t) {
i = t;
t = 0;
n = this.length;
} else if ("string" == typeof n) {
i = n;
n = this.length;
}
if (1 === e.length) {
var a = e.charCodeAt(0);
a < 256 && (e = a);
}
if (void 0 !== i && "string" != typeof i) throw new TypeError("encoding must be a string");
if ("string" == typeof i && !c.isEncoding(i)) throw new TypeError("Unknown encoding: " + i);
} else "number" == typeof e && (e &= 255);
if (t < 0 || this.length < t || this.length < n) throw new RangeError("Out of range index");
if (n <= t) return this;
t >>>= 0;
n = void 0 === n ? this.length : n >>> 0;
e || (e = 0);
var r;
if ("number" == typeof e) for (r = t; r < n; ++r) this[r] = e; else {
var o = c.isBuffer(e) ? e : J(new c(e, i).toString()), s = o.length;
for (r = 0; r < n - t; ++r) this[r + t] = o[r % s];
}
return this;
};
var W = /[^+\/0-9A-Za-z-_]/g;
function q(e) {
if ((e = Y(e).replace(W, "")).length < 2) return "";
for (;e.length % 4 != 0; ) e += "=";
return e;
}
function Y(e) {
return e.trim ? e.trim() : e.replace(/^\s+|\s+$/g, "");
}
function J(e, t) {
t = t || Infinity;
for (var n, i = e.length, a = null, r = [], o = 0; o < i; ++o) {
if ((n = e.charCodeAt(o)) > 55295 && n < 57344) {
if (!a) {
if (n > 56319) {
(t -= 3) > -1 && r.push(239, 191, 189);
continue;
}
if (o + 1 === i) {
(t -= 3) > -1 && r.push(239, 191, 189);
continue;
}
a = n;
continue;
}
if (n < 56320) {
(t -= 3) > -1 && r.push(239, 191, 189);
a = n;
continue;
}
n = 65536 + (a - 55296 << 10 | n - 56320);
} else a && (t -= 3) > -1 && r.push(239, 191, 189);
a = null;
if (n < 128) {
if ((t -= 1) < 0) break;
r.push(n);
} else if (n < 2048) {
if ((t -= 2) < 0) break;
r.push(n >> 6 | 192, 63 & n | 128);
} else if (n < 65536) {
if ((t -= 3) < 0) break;
r.push(n >> 12 | 224, n >> 6 & 63 | 128, 63 & n | 128);
} else {
if (!(n < 1114112)) throw new Error("Invalid code point");
if ((t -= 4) < 0) break;
r.push(n >> 18 | 240, n >> 12 & 63 | 128, n >> 6 & 63 | 128, 63 & n | 128);
}
}
return r;
}
function V(e) {
for (var t = [], n = 0; n < e.length; ++n) t.push(255 & e.charCodeAt(n));
return t;
}
function K(e, t) {
for (var n, i, a, r = [], o = 0; o < e.length && !((t -= 2) < 0); ++o) {
i = (n = e.charCodeAt(o)) >> 8;
a = n % 256;
r.push(a);
r.push(i);
}
return r;
}
function Z(e) {
return i.toByteArray(q(e));
}
function Q(e, t, n, i) {
for (var a = 0; a < i && !(a + n >= t.length || a >= e.length); ++a) t[a + n] = e[a];
return a;
}
}).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
}, {
"base64-js": 5,
ieee754: 8,
isarray: 7
} ],
7: [ function(e, t) {
var n = {}.toString;
t.exports = Array.isArray || function(e) {
return "[object Array]" == n.call(e);
};
}, {} ],
8: [ function(e, t, n) {
n.read = function(e, t, n, i, a) {
var r, o, s = 8 * a - i - 1, c = (1 << s) - 1, l = c >> 1, u = -7, d = n ? a - 1 : 0, h = n ? -1 : 1, f = e[t + d];
d += h;
r = f & (1 << -u) - 1;
f >>= -u;
u += s;
for (;u > 0; r = 256 * r + e[t + d], d += h, u -= 8) ;
o = r & (1 << -u) - 1;
r >>= -u;
u += i;
for (;u > 0; o = 256 * o + e[t + d], d += h, u -= 8) ;
if (0 === r) r = 1 - l; else {
if (r === c) return o ? NaN : Infinity * (f ? -1 : 1);
o += Math.pow(2, i);
r -= l;
}
return (f ? -1 : 1) * o * Math.pow(2, r - i);
};
n.write = function(e, t, n, i, a, r) {
var o, s, c, l = 8 * r - a - 1, u = (1 << l) - 1, d = u >> 1, h = 23 === a ? Math.pow(2, -24) - Math.pow(2, -77) : 0, f = i ? 0 : r - 1, p = i ? 1 : -1, m = t < 0 || 0 === t && 1 / t < 0 ? 1 : 0;
t = Math.abs(t);
if (isNaN(t) || Infinity === t) {
s = isNaN(t) ? 1 : 0;
o = u;
} else {
o = Math.floor(Math.log(t) / Math.LN2);
if (t * (c = Math.pow(2, -o)) < 1) {
o--;
c *= 2;
}
if ((t += o + d >= 1 ? h / c : h * Math.pow(2, 1 - d)) * c >= 2) {
o++;
c /= 2;
}
if (o + d >= u) {
s = 0;
o = u;
} else if (o + d >= 1) {
s = (t * c - 1) * Math.pow(2, a);
o += d;
} else {
s = t * Math.pow(2, d - 1) * Math.pow(2, a);
o = 0;
}
}
for (;a >= 8; e[n + f] = 255 & s, f += p, s /= 256, a -= 8) ;
o = o << a | s;
l += a;
for (;l > 0; e[n + f] = 255 & o, f += p, o /= 256, l -= 8) ;
e[n + f - p] |= 128 * m;
};
}, {} ],
9: [ function(e, t) {
var n, i, a = t.exports = {};
function r() {
throw new Error("setTimeout has not been defined");
}
function o() {
throw new Error("clearTimeout has not been defined");
}
(function() {
try {
n = "function" == typeof setTimeout ? setTimeout : r;
} catch (e) {
n = r;
}
try {
i = "function" == typeof clearTimeout ? clearTimeout : o;
} catch (e) {
i = o;
}
})();
function s(e) {
if (n === setTimeout) return setTimeout(e, 0);
if ((n === r || !n) && setTimeout) {
n = setTimeout;
return setTimeout(e, 0);
}
try {
return n(e, 0);
} catch (t) {
try {
return n.call(null, e, 0);
} catch (t) {
return n.call(this, e, 0);
}
}
}
function c(e) {
if (i === clearTimeout) return clearTimeout(e);
if ((i === o || !i) && clearTimeout) {
i = clearTimeout;
return clearTimeout(e);
}
try {
return i(e);
} catch (t) {
try {
return i.call(null, e);
} catch (t) {
return i.call(this, e);
}
}
}
var l, u = [], d = !1, h = -1;
function f() {
if (d && l) {
d = !1;
l.length ? u = l.concat(u) : h = -1;
u.length && p();
}
}
function p() {
if (!d) {
var e = s(f);
d = !0;
for (var t = u.length; t; ) {
l = u;
u = [];
for (;++h < t; ) l && l[h].run();
h = -1;
t = u.length;
}
l = null;
d = !1;
c(e);
}
}
a.nextTick = function(e) {
var t = new Array(arguments.length - 1);
if (arguments.length > 1) for (var n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
u.push(new m(e, t));
1 !== u.length || d || s(p);
};
function m(e, t) {
this.fun = e;
this.array = t;
}
m.prototype.run = function() {
this.fun.apply(null, this.array);
};
a.title = "browser";
a.browser = !0;
a.env = {};
a.argv = [];
a.version = "";
a.versions = {};
function g() {}
a.on = g;
a.addListener = g;
a.once = g;
a.off = g;
a.removeListener = g;
a.removeAllListeners = g;
a.emit = g;
a.prependListener = g;
a.prependOnceListener = g;
a.listeners = function() {
return [];
};
a.binding = function() {
throw new Error("process.binding is not supported");
};
a.cwd = function() {
return "/";
};
a.chdir = function() {
throw new Error("process.chdir is not supported");
};
a.umask = function() {
return 0;
};
}, {} ],
10: [ function(e, t, n) {
this, i = function(e) {
var t;
function n(e, t, n) {
null != e && ("number" == typeof e ? this.fromNumber(e, t, n) : null == t && "string" != typeof e ? this.fromString(e, 256) : this.fromString(e, t));
}
function i() {
return new n(null);
}
if ("Microsoft Internet Explorer" == navigator.appName) {
n.prototype.am = function(e, t, n, i, a, r) {
for (var o = 32767 & t, s = t >> 15; --r >= 0; ) {
var c = 32767 & this[e], l = this[e++] >> 15, u = s * c + l * o;
a = ((c = o * c + ((32767 & u) << 15) + n[i] + (1073741823 & a)) >>> 30) + (u >>> 15) + s * l + (a >>> 30);
n[i++] = 1073741823 & c;
}
return a;
};
t = 30;
} else if ("Netscape" != navigator.appName) {
n.prototype.am = function(e, t, n, i, a, r) {
for (;--r >= 0; ) {
var o = t * this[e++] + n[i] + a;
a = Math.floor(o / 67108864);
n[i++] = 67108863 & o;
}
return a;
};
t = 26;
} else {
n.prototype.am = function(e, t, n, i, a, r) {
for (var o = 16383 & t, s = t >> 14; --r >= 0; ) {
var c = 16383 & this[e], l = this[e++] >> 14, u = s * c + l * o;
a = ((c = o * c + ((16383 & u) << 14) + n[i] + a) >> 28) + (u >> 14) + s * l;
n[i++] = 268435455 & c;
}
return a;
};
t = 28;
}
n.prototype.DB = t;
n.prototype.DM = (1 << t) - 1;
n.prototype.DV = 1 << t;
n.prototype.FV = Math.pow(2, 52);
n.prototype.F1 = 52 - t;
n.prototype.F2 = 2 * t - 52;
var a, r, o = "0123456789abcdefghijklmnopqrstuvwxyz", s = new Array();
a = "0".charCodeAt(0);
for (r = 0; r <= 9; ++r) s[a++] = r;
a = "a".charCodeAt(0);
for (r = 10; r < 36; ++r) s[a++] = r;
a = "A".charCodeAt(0);
for (r = 10; r < 36; ++r) s[a++] = r;
function c(e) {
return o.charAt(e);
}
function l(e, t) {
var n = s[e.charCodeAt(t)];
return null == n ? -1 : n;
}
function u(e) {
var t = i();
t.fromInt(e);
return t;
}
function d(e) {
var t, n = 1;
if (0 != (t = e >>> 16)) {
e = t;
n += 16;
}
if (0 != (t = e >> 8)) {
e = t;
n += 8;
}
if (0 != (t = e >> 4)) {
e = t;
n += 4;
}
if (0 != (t = e >> 2)) {
e = t;
n += 2;
}
if (0 != (t = e >> 1)) {
e = t;
n += 1;
}
return n;
}
function h(e) {
this.m = e;
}
h.prototype.convert = function(e) {
return e.s < 0 || e.compareTo(this.m) >= 0 ? e.mod(this.m) : e;
};
h.prototype.revert = function(e) {
return e;
};
h.prototype.reduce = function(e) {
e.divRemTo(this.m, null, e);
};
h.prototype.mulTo = function(e, t, n) {
e.multiplyTo(t, n);
this.reduce(n);
};
h.prototype.sqrTo = function(e, t) {
e.squareTo(t);
this.reduce(t);
};
function f(e) {
this.m = e;
this.mp = e.invDigit();
this.mpl = 32767 & this.mp;
this.mph = this.mp >> 15;
this.um = (1 << e.DB - 15) - 1;
this.mt2 = 2 * e.t;
}
f.prototype.convert = function(e) {
var t = i();
e.abs().dlShiftTo(this.m.t, t);
t.divRemTo(this.m, null, t);
e.s < 0 && t.compareTo(n.ZERO) > 0 && this.m.subTo(t, t);
return t;
};
f.prototype.revert = function(e) {
var t = i();
e.copyTo(t);
this.reduce(t);
return t;
};
f.prototype.reduce = function(e) {
for (;e.t <= this.mt2; ) e[e.t++] = 0;
for (var t = 0; t < this.m.t; ++t) {
var n = 32767 & e[t], i = n * this.mpl + ((n * this.mph + (e[t] >> 15) * this.mpl & this.um) << 15) & e.DM;
e[n = t + this.m.t] += this.m.am(0, i, e, t, 0, this.m.t);
for (;e[n] >= e.DV; ) {
e[n] -= e.DV;
e[++n]++;
}
}
e.clamp();
e.drShiftTo(this.m.t, e);
e.compareTo(this.m) >= 0 && e.subTo(this.m, e);
};
f.prototype.mulTo = function(e, t, n) {
e.multiplyTo(t, n);
this.reduce(n);
};
f.prototype.sqrTo = function(e, t) {
e.squareTo(t);
this.reduce(t);
};
n.prototype.copyTo = function(e) {
for (var t = this.t - 1; t >= 0; --t) e[t] = this[t];
e.t = this.t;
e.s = this.s;
};
n.prototype.fromInt = function(e) {
this.t = 1;
this.s = e < 0 ? -1 : 0;
e > 0 ? this[0] = e : e < -1 ? this[0] = e + this.DV : this.t = 0;
};
n.prototype.fromString = function(e, t) {
var i;
if (16 == t) i = 4; else if (8 == t) i = 3; else if (256 == t) i = 8; else if (2 == t) i = 1; else if (32 == t) i = 5; else {
if (4 != t) {
this.fromRadix(e, t);
return;
}
i = 2;
}
this.t = 0;
this.s = 0;
for (var a = e.length, r = !1, o = 0; --a >= 0; ) {
var s = 8 == i ? 255 & e[a] : l(e, a);
if (s < 0) "-" == e.charAt(a) && (r = !0); else {
r = !1;
if (0 == o) this[this.t++] = s; else if (o + i > this.DB) {
this[this.t - 1] |= (s & (1 << this.DB - o) - 1) << o;
this[this.t++] = s >> this.DB - o;
} else this[this.t - 1] |= s << o;
(o += i) >= this.DB && (o -= this.DB);
}
}
if (8 == i && 0 != (128 & e[0])) {
this.s = -1;
o > 0 && (this[this.t - 1] |= (1 << this.DB - o) - 1 << o);
}
this.clamp();
r && n.ZERO.subTo(this, this);
};
n.prototype.clamp = function() {
for (var e = this.s & this.DM; this.t > 0 && this[this.t - 1] == e; ) --this.t;
};
n.prototype.dlShiftTo = function(e, t) {
var n;
for (n = this.t - 1; n >= 0; --n) t[n + e] = this[n];
for (n = e - 1; n >= 0; --n) t[n] = 0;
t.t = this.t + e;
t.s = this.s;
};
n.prototype.drShiftTo = function(e, t) {
for (var n = e; n < this.t; ++n) t[n - e] = this[n];
t.t = Math.max(this.t - e, 0);
t.s = this.s;
};
n.prototype.lShiftTo = function(e, t) {
var n, i = e % this.DB, a = this.DB - i, r = (1 << a) - 1, o = Math.floor(e / this.DB), s = this.s << i & this.DM;
for (n = this.t - 1; n >= 0; --n) {
t[n + o + 1] = this[n] >> a | s;
s = (this[n] & r) << i;
}
for (n = o - 1; n >= 0; --n) t[n] = 0;
t[o] = s;
t.t = this.t + o + 1;
t.s = this.s;
t.clamp();
};
n.prototype.rShiftTo = function(e, t) {
t.s = this.s;
var n = Math.floor(e / this.DB);
if (n >= this.t) t.t = 0; else {
var i = e % this.DB, a = this.DB - i, r = (1 << i) - 1;
t[0] = this[n] >> i;
for (var o = n + 1; o < this.t; ++o) {
t[o - n - 1] |= (this[o] & r) << a;
t[o - n] = this[o] >> i;
}
i > 0 && (t[this.t - n - 1] |= (this.s & r) << a);
t.t = this.t - n;
t.clamp();
}
};
n.prototype.subTo = function(e, t) {
for (var n = 0, i = 0, a = Math.min(e.t, this.t); n < a; ) {
i += this[n] - e[n];
t[n++] = i & this.DM;
i >>= this.DB;
}
if (e.t < this.t) {
i -= e.s;
for (;n < this.t; ) {
i += this[n];
t[n++] = i & this.DM;
i >>= this.DB;
}
i += this.s;
} else {
i += this.s;
for (;n < e.t; ) {
i -= e[n];
t[n++] = i & this.DM;
i >>= this.DB;
}
i -= e.s;
}
t.s = i < 0 ? -1 : 0;
i < -1 ? t[n++] = this.DV + i : i > 0 && (t[n++] = i);
t.t = n;
t.clamp();
};
n.prototype.multiplyTo = function(e, t) {
var i = this.abs(), a = e.abs(), r = i.t;
t.t = r + a.t;
for (;--r >= 0; ) t[r] = 0;
for (r = 0; r < a.t; ++r) t[r + i.t] = i.am(0, a[r], t, r, 0, i.t);
t.s = 0;
t.clamp();
this.s != e.s && n.ZERO.subTo(t, t);
};
n.prototype.squareTo = function(e) {
for (var t = this.abs(), n = e.t = 2 * t.t; --n >= 0; ) e[n] = 0;
for (n = 0; n < t.t - 1; ++n) {
var i = t.am(n, t[n], e, 2 * n, 0, 1);
if ((e[n + t.t] += t.am(n + 1, 2 * t[n], e, 2 * n + 1, i, t.t - n - 1)) >= t.DV) {
e[n + t.t] -= t.DV;
e[n + t.t + 1] = 1;
}
}
e.t > 0 && (e[e.t - 1] += t.am(n, t[n], e, 2 * n, 0, 1));
e.s = 0;
e.clamp();
};
n.prototype.divRemTo = function(e, t, a) {
var r = e.abs();
if (!(r.t <= 0)) {
var o = this.abs();
if (o.t < r.t) {
null != t && t.fromInt(0);
null != a && this.copyTo(a);
} else {
null == a && (a = i());
var s = i(), c = this.s, l = e.s, u = this.DB - d(r[r.t - 1]);
if (u > 0) {
r.lShiftTo(u, s);
o.lShiftTo(u, a);
} else {
r.copyTo(s);
o.copyTo(a);
}
var h = s.t, f = s[h - 1];
if (0 != f) {
var p = f * (1 << this.F1) + (h > 1 ? s[h - 2] >> this.F2 : 0), m = this.FV / p, g = (1 << this.F1) / p, v = 1 << this.F2, C = a.t, b = C - h, y = null == t ? i() : t;
s.dlShiftTo(b, y);
if (a.compareTo(y) >= 0) {
a[a.t++] = 1;
a.subTo(y, a);
}
n.ONE.dlShiftTo(h, y);
y.subTo(s, s);
for (;s.t < h; ) s[s.t++] = 0;
for (;--b >= 0; ) {
var S = a[--C] == f ? this.DM : Math.floor(a[C] * m + (a[C - 1] + v) * g);
if ((a[C] += s.am(0, S, a, b, 0, h)) < S) {
s.dlShiftTo(b, y);
a.subTo(y, a);
for (;a[C] < --S; ) a.subTo(y, a);
}
}
if (null != t) {
a.drShiftTo(h, t);
c != l && n.ZERO.subTo(t, t);
}
a.t = h;
a.clamp();
u > 0 && a.rShiftTo(u, a);
c < 0 && n.ZERO.subTo(a, a);
}
}
}
};
n.prototype.invDigit = function() {
if (this.t < 1) return 0;
var e = this[0];
if (0 == (1 & e)) return 0;
var t = 3 & e;
return (t = (t = (t = (t = t * (2 - (15 & e) * t) & 15) * (2 - (255 & e) * t) & 255) * (2 - ((65535 & e) * t & 65535)) & 65535) * (2 - e * t % this.DV) % this.DV) > 0 ? this.DV - t : -t;
};
n.prototype.isEven = function() {
return 0 == (this.t > 0 ? 1 & this[0] : this.s);
};
n.prototype.exp = function(e, t) {
if (e > 4294967295 || e < 1) return n.ONE;
var a = i(), r = i(), o = t.convert(this), s = d(e) - 1;
o.copyTo(a);
for (;--s >= 0; ) {
t.sqrTo(a, r);
if ((e & 1 << s) > 0) t.mulTo(r, o, a); else {
var c = a;
a = r;
r = c;
}
}
return t.revert(a);
};
n.prototype.toString = function(e) {
if (this.s < 0) return "-" + this.negate().toString(e);
var t;
if (16 == e) t = 4; else if (8 == e) t = 3; else if (2 == e) t = 1; else if (32 == e) t = 5; else {
if (4 != e) return this.toRadix(e);
t = 2;
}
var n, i = (1 << t) - 1, a = !1, r = "", o = this.t, s = this.DB - o * this.DB % t;
if (o-- > 0) {
if (s < this.DB && (n = this[o] >> s) > 0) {
a = !0;
r = c(n);
}
for (;o >= 0; ) {
if (s < t) {
n = (this[o] & (1 << s) - 1) << t - s;
n |= this[--o] >> (s += this.DB - t);
} else {
n = this[o] >> (s -= t) & i;
if (s <= 0) {
s += this.DB;
--o;
}
}
n > 0 && (a = !0);
a && (r += c(n));
}
}
return a ? r : "0";
};
n.prototype.negate = function() {
var e = i();
n.ZERO.subTo(this, e);
return e;
};
n.prototype.abs = function() {
return this.s < 0 ? this.negate() : this;
};
n.prototype.compareTo = function(e) {
var t = this.s - e.s;
if (0 != t) return t;
var n = this.t;
if (0 != (t = n - e.t)) return this.s < 0 ? -t : t;
for (;--n >= 0; ) if (0 != (t = this[n] - e[n])) return t;
return 0;
};
n.prototype.bitLength = function() {
return this.t <= 0 ? 0 : this.DB * (this.t - 1) + d(this[this.t - 1] ^ this.s & this.DM);
};
n.prototype.mod = function(e) {
var t = i();
this.abs().divRemTo(e, null, t);
this.s < 0 && t.compareTo(n.ZERO) > 0 && e.subTo(t, t);
return t;
};
n.prototype.modPowInt = function(e, t) {
var n;
n = e < 256 || t.isEven() ? new h(t) : new f(t);
return this.exp(e, n);
};
n.ZERO = u(0);
n.ONE = u(1);
function p(e, t) {
return e & t;
}
function m(e, t) {
return e | t;
}
function g(e, t) {
return e ^ t;
}
function C(e, t) {
return e & ~t;
}
function b(e) {
if (0 == e) return -1;
var t = 0;
if (0 == (65535 & e)) {
e >>= 16;
t += 16;
}
if (0 == (255 & e)) {
e >>= 8;
t += 8;
}
if (0 == (15 & e)) {
e >>= 4;
t += 4;
}
if (0 == (3 & e)) {
e >>= 2;
t += 2;
}
0 == (1 & e) && ++t;
return t;
}
function y(e) {
for (var t = 0; 0 != e; ) {
e &= e - 1;
++t;
}
return t;
}
function S() {}
function _(e) {
return e;
}
S.prototype.convert = _;
S.prototype.revert = _;
S.prototype.mulTo = function(e, t, n) {
e.multiplyTo(t, n);
};
S.prototype.sqrTo = function(e, t) {
e.squareTo(t);
};
function T(e) {
this.r2 = i();
this.q3 = i();
n.ONE.dlShiftTo(2 * e.t, this.r2);
this.mu = this.r2.divide(e);
this.m = e;
}
T.prototype.convert = function(e) {
if (e.s < 0 || e.t > 2 * this.m.t) return e.mod(this.m);
if (e.compareTo(this.m) < 0) return e;
var t = i();
e.copyTo(t);
this.reduce(t);
return t;
};
T.prototype.revert = function(e) {
return e;
};
T.prototype.reduce = function(e) {
e.drShiftTo(this.m.t - 1, this.r2);
if (e.t > this.m.t + 1) {
e.t = this.m.t + 1;
e.clamp();
}
this.mu.multiplyUpperTo(this.r2, this.m.t + 1, this.q3);
this.m.multiplyLowerTo(this.q3, this.m.t + 1, this.r2);
for (;e.compareTo(this.r2) < 0; ) e.dAddOffset(1, this.m.t + 1);
e.subTo(this.r2, e);
for (;e.compareTo(this.m) >= 0; ) e.subTo(this.m, e);
};
T.prototype.mulTo = function(e, t, n) {
e.multiplyTo(t, n);
this.reduce(n);
};
T.prototype.sqrTo = function(e, t) {
e.squareTo(t);
this.reduce(t);
};
var E = [ 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, 71, 73, 79, 83, 89, 97, 101, 103, 107, 109, 113, 127, 131, 137, 139, 149, 151, 157, 163, 167, 173, 179, 181, 191, 193, 197, 199, 211, 223, 227, 229, 233, 239, 241, 251, 257, 263, 269, 271, 277, 281, 283, 293, 307, 311, 313, 317, 331, 337, 347, 349, 353, 359, 367, 373, 379, 383, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487, 491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743, 751, 757, 761, 769, 773, 787, 797, 809, 811, 821, 823, 827, 829, 839, 853, 857, 859, 863, 877, 881, 883, 887, 907, 911, 919, 929, 937, 941, 947, 953, 967, 971, 977, 983, 991, 997 ], A = (1 << 26) / E[E.length - 1];
n.prototype.chunkSize = function(e) {
return Math.floor(Math.LN2 * this.DB / Math.log(e));
};
n.prototype.toRadix = function(e) {
null == e && (e = 10);
if (0 == this.signum() || e < 2 || e > 36) return "0";
var t = this.chunkSize(e), n = Math.pow(e, t), a = u(n), r = i(), o = i(), s = "";
this.divRemTo(a, r, o);
for (;r.signum() > 0; ) {
s = (n + o.intValue()).toString(e).substr(1) + s;
r.divRemTo(a, r, o);
}
return o.intValue().toString(e) + s;
};
n.prototype.fromRadix = function(e, t) {
this.fromInt(0);
null == t && (t = 10);
for (var i = this.chunkSize(t), a = Math.pow(t, i), r = !1, o = 0, s = 0, c = 0; c < e.length; ++c) {
var u = l(e, c);
if (u < 0) "-" == e.charAt(c) && 0 == this.signum() && (r = !0); else {
s = t * s + u;
if (++o >= i) {
this.dMultiply(a);
this.dAddOffset(s, 0);
o = 0;
s = 0;
}
}
}
if (o > 0) {
this.dMultiply(Math.pow(t, o));
this.dAddOffset(s, 0);
}
r && n.ZERO.subTo(this, this);
};
n.prototype.fromNumber = function(e, t, i) {
if ("number" == typeof t) if (e < 2) this.fromInt(1); else {
this.fromNumber(e, i);
this.testBit(e - 1) || this.bitwiseTo(n.ONE.shiftLeft(e - 1), m, this);
this.isEven() && this.dAddOffset(1, 0);
for (;!this.isProbablePrime(t); ) {
this.dAddOffset(2, 0);
this.bitLength() > e && this.subTo(n.ONE.shiftLeft(e - 1), this);
}
} else {
var a = new Array(), r = 7 & e;
a.length = 1 + (e >> 3);
t.nextBytes(a);
r > 0 ? a[0] &= (1 << r) - 1 : a[0] = 0;
this.fromString(a, 256);
}
};
n.prototype.bitwiseTo = function(e, t, n) {
var i, a, r = Math.min(e.t, this.t);
for (i = 0; i < r; ++i) n[i] = t(this[i], e[i]);
if (e.t < this.t) {
a = e.s & this.DM;
for (i = r; i < this.t; ++i) n[i] = t(this[i], a);
n.t = this.t;
} else {
a = this.s & this.DM;
for (i = r; i < e.t; ++i) n[i] = t(a, e[i]);
n.t = e.t;
}
n.s = t(this.s, e.s);
n.clamp();
};
n.prototype.changeBit = function(e, t) {
var i = n.ONE.shiftLeft(e);
this.bitwiseTo(i, t, i);
return i;
};
n.prototype.addTo = function(e, t) {
for (var n = 0, i = 0, a = Math.min(e.t, this.t); n < a; ) {
i += this[n] + e[n];
t[n++] = i & this.DM;
i >>= this.DB;
}
if (e.t < this.t) {
i += e.s;
for (;n < this.t; ) {
i += this[n];
t[n++] = i & this.DM;
i >>= this.DB;
}
i += this.s;
} else {
i += this.s;
for (;n < e.t; ) {
i += e[n];
t[n++] = i & this.DM;
i >>= this.DB;
}
i += e.s;
}
t.s = i < 0 ? -1 : 0;
i > 0 ? t[n++] = i : i < -1 && (t[n++] = this.DV + i);
t.t = n;
t.clamp();
};
n.prototype.dMultiply = function(e) {
this[this.t] = this.am(0, e - 1, this, 0, 0, this.t);
++this.t;
this.clamp();
};
n.prototype.dAddOffset = function(e, t) {
if (0 != e) {
for (;this.t <= t; ) this[this.t++] = 0;
this[t] += e;
for (;this[t] >= this.DV; ) {
this[t] -= this.DV;
++t >= this.t && (this[this.t++] = 0);
++this[t];
}
}
};
n.prototype.multiplyLowerTo = function(e, t, n) {
var i, a = Math.min(this.t + e.t, t);
n.s = 0;
n.t = a;
for (;a > 0; ) n[--a] = 0;
for (i = n.t - this.t; a < i; ++a) n[a + this.t] = this.am(0, e[a], n, a, 0, this.t);
for (i = Math.min(e.t, t); a < i; ++a) this.am(0, e[a], n, a, 0, t - a);
n.clamp();
};
n.prototype.multiplyUpperTo = function(e, t, n) {
--t;
var i = n.t = this.t + e.t - t;
n.s = 0;
for (;--i >= 0; ) n[i] = 0;
for (i = Math.max(t - this.t, 0); i < e.t; ++i) n[this.t + i - t] = this.am(t - i, e[i], n, 0, 0, this.t + i - t);
n.clamp();
n.drShiftTo(1, n);
};
n.prototype.modInt = function(e) {
if (e <= 0) return 0;
var t = this.DV % e, n = this.s < 0 ? e - 1 : 0;
if (this.t > 0) if (0 == t) n = this[0] % e; else for (var i = this.t - 1; i >= 0; --i) n = (t * n + this[i]) % e;
return n;
};
n.prototype.millerRabin = function(e) {
var t = this.subtract(n.ONE), a = t.getLowestSetBit();
if (a <= 0) return !1;
var r = t.shiftRight(a);
(e = e + 1 >> 1) > E.length && (e = E.length);
for (var o = i(), s = 0; s < e; ++s) {
o.fromInt(E[Math.floor(Math.random() * E.length)]);
var c = o.modPow(r, this);
if (0 != c.compareTo(n.ONE) && 0 != c.compareTo(t)) {
for (var l = 1; l++ < a && 0 != c.compareTo(t); ) if (0 == (c = c.modPowInt(2, this)).compareTo(n.ONE)) return !1;
if (0 != c.compareTo(t)) return !1;
}
}
return !0;
};
n.prototype.clone = function() {
var e = i();
this.copyTo(e);
return e;
};
n.prototype.intValue = function() {
if (this.s < 0) {
if (1 == this.t) return this[0] - this.DV;
if (0 == this.t) return -1;
} else {
if (1 == this.t) return this[0];
if (0 == this.t) return 0;
}
return (this[1] & (1 << 32 - this.DB) - 1) << this.DB | this[0];
};
n.prototype.byteValue = function() {
return 0 == this.t ? this.s : this[0] << 24 >> 24;
};
n.prototype.shortValue = function() {
return 0 == this.t ? this.s : this[0] << 16 >> 16;
};
n.prototype.signum = function() {
return this.s < 0 ? -1 : this.t <= 0 || 1 == this.t && this[0] <= 0 ? 0 : 1;
};
n.prototype.toByteArray = function() {
var e = this.t, t = new Array();
t[0] = this.s;
var n, i = this.DB - e * this.DB % 8, a = 0;
if (e-- > 0) {
i < this.DB && (n = this[e] >> i) != (this.s & this.DM) >> i && (t[a++] = n | this.s << this.DB - i);
for (;e >= 0; ) {
if (i < 8) {
n = (this[e] & (1 << i) - 1) << 8 - i;
n |= this[--e] >> (i += this.DB - 8);
} else {
n = this[e] >> (i -= 8) & 255;
if (i <= 0) {
i += this.DB;
--e;
}
}
0 != (128 & n) && (n |= -256);
0 == a && (128 & this.s) != (128 & n) && ++a;
(a > 0 || n != this.s) && (t[a++] = n);
}
}
return t;
};
n.prototype.equals = function(e) {
return 0 == this.compareTo(e);
};
n.prototype.min = function(e) {
return this.compareTo(e) < 0 ? this : e;
};
n.prototype.max = function(e) {
return this.compareTo(e) > 0 ? this : e;
};
n.prototype.and = function(e) {
var t = i();
this.bitwiseTo(e, p, t);
return t;
};
n.prototype.or = function(e) {
var t = i();
this.bitwiseTo(e, m, t);
return t;
};
n.prototype.xor = function(e) {
var t = i();
this.bitwiseTo(e, g, t);
return t;
};
n.prototype.andNot = function(e) {
var t = i();
this.bitwiseTo(e, C, t);
return t;
};
n.prototype.not = function() {
for (var e = i(), t = 0; t < this.t; ++t) e[t] = this.DM & ~this[t];
e.t = this.t;
e.s = ~this.s;
return e;
};
n.prototype.shiftLeft = function(e) {
var t = i();
e < 0 ? this.rShiftTo(-e, t) : this.lShiftTo(e, t);
return t;
};
n.prototype.shiftRight = function(e) {
var t = i();
e < 0 ? this.lShiftTo(-e, t) : this.rShiftTo(e, t);
return t;
};
n.prototype.getLowestSetBit = function() {
for (var e = 0; e < this.t; ++e) if (0 != this[e]) return e * this.DB + b(this[e]);
return this.s < 0 ? this.t * this.DB : -1;
};
n.prototype.bitCount = function() {
for (var e = 0, t = this.s & this.DM, n = 0; n < this.t; ++n) e += y(this[n] ^ t);
return e;
};
n.prototype.testBit = function(e) {
var t = Math.floor(e / this.DB);
return t >= this.t ? 0 != this.s : 0 != (this[t] & 1 << e % this.DB);
};
n.prototype.setBit = function(e) {
return this.changeBit(e, m);
};
n.prototype.clearBit = function(e) {
return this.changeBit(e, C);
};
n.prototype.flipBit = function(e) {
return this.changeBit(e, g);
};
n.prototype.add = function(e) {
var t = i();
this.addTo(e, t);
return t;
};
n.prototype.subtract = function(e) {
var t = i();
this.subTo(e, t);
return t;
};
n.prototype.multiply = function(e) {
var t = i();
this.multiplyTo(e, t);
return t;
};
n.prototype.divide = function(e) {
var t = i();
this.divRemTo(e, t, null);
return t;
};
n.prototype.remainder = function(e) {
var t = i();
this.divRemTo(e, null, t);
return t;
};
n.prototype.divideAndRemainder = function(e) {
var t = i(), n = i();
this.divRemTo(e, t, n);
return new Array(t, n);
};
n.prototype.modPow = function(e, t) {
var n, a, r = e.bitLength(), o = u(1);
if (r <= 0) return o;
n = r < 18 ? 1 : r < 48 ? 3 : r < 144 ? 4 : r < 768 ? 5 : 6;
a = r < 8 ? new h(t) : t.isEven() ? new T(t) : new f(t);
var s = new Array(), c = 3, l = n - 1, p = (1 << n) - 1;
s[1] = a.convert(this);
if (n > 1) {
var m = i();
a.sqrTo(s[1], m);
for (;c <= p; ) {
s[c] = i();
a.mulTo(m, s[c - 2], s[c]);
c += 2;
}
}
var g, v, C = e.t - 1, b = !0, y = i();
r = d(e[C]) - 1;
for (;C >= 0; ) {
if (r >= l) g = e[C] >> r - l & p; else {
g = (e[C] & (1 << r + 1) - 1) << l - r;
C > 0 && (g |= e[C - 1] >> this.DB + r - l);
}
c = n;
for (;0 == (1 & g); ) {
g >>= 1;
--c;
}
if ((r -= c) < 0) {
r += this.DB;
--C;
}
if (b) {
s[g].copyTo(o);
b = !1;
} else {
for (;c > 1; ) {
a.sqrTo(o, y);
a.sqrTo(y, o);
c -= 2;
}
if (c > 0) a.sqrTo(o, y); else {
v = o;
o = y;
y = v;
}
a.mulTo(y, s[g], o);
}
for (;C >= 0 && 0 == (e[C] & 1 << r); ) {
a.sqrTo(o, y);
v = o;
o = y;
y = v;
if (--r < 0) {
r = this.DB - 1;
--C;
}
}
}
return a.revert(o);
};
n.prototype.modInverse = function(e) {
var t = e.isEven();
if (this.isEven() && t || 0 == e.signum()) return n.ZERO;
for (var i = e.clone(), a = this.clone(), r = u(1), o = u(0), s = u(0), c = u(1); 0 != i.signum(); ) {
for (;i.isEven(); ) {
i.rShiftTo(1, i);
if (t) {
if (!r.isEven() || !o.isEven()) {
r.addTo(this, r);
o.subTo(e, o);
}
r.rShiftTo(1, r);
} else o.isEven() || o.subTo(e, o);
o.rShiftTo(1, o);
}
for (;a.isEven(); ) {
a.rShiftTo(1, a);
if (t) {
if (!s.isEven() || !c.isEven()) {
s.addTo(this, s);
c.subTo(e, c);
}
s.rShiftTo(1, s);
} else c.isEven() || c.subTo(e, c);
c.rShiftTo(1, c);
}
if (i.compareTo(a) >= 0) {
i.subTo(a, i);
t && r.subTo(s, r);
o.subTo(c, o);
} else {
a.subTo(i, a);
t && s.subTo(r, s);
c.subTo(o, c);
}
}
if (0 != a.compareTo(n.ONE)) return n.ZERO;
if (c.compareTo(e) >= 0) return c.subtract(e);
if (!(c.signum() < 0)) return c;
c.addTo(e, c);
return c.signum() < 0 ? c.add(e) : c;
};
n.prototype.pow = function(e) {
return this.exp(e, new S());
};
n.prototype.gcd = function(e) {
var t = this.s < 0 ? this.negate() : this.clone(), n = e.s < 0 ? e.negate() : e.clone();
if (t.compareTo(n) < 0) {
var i = t;
t = n;
n = i;
}
var a = t.getLowestSetBit(), r = n.getLowestSetBit();
if (r < 0) return t;
a < r && (r = a);
if (r > 0) {
t.rShiftTo(r, t);
n.rShiftTo(r, n);
}
for (;t.signum() > 0; ) {
(a = t.getLowestSetBit()) > 0 && t.rShiftTo(a, t);
(a = n.getLowestSetBit()) > 0 && n.rShiftTo(a, n);
if (t.compareTo(n) >= 0) {
t.subTo(n, t);
t.rShiftTo(1, t);
} else {
n.subTo(t, n);
n.rShiftTo(1, n);
}
}
r > 0 && n.lShiftTo(r, n);
return n;
};
n.prototype.isProbablePrime = function(e) {
var t, n = this.abs();
if (1 == n.t && n[0] <= E[E.length - 1]) {
for (t = 0; t < E.length; ++t) if (n[0] == E[t]) return !0;
return !1;
}
if (n.isEven()) return !1;
t = 1;
for (;t < E.length; ) {
for (var i = E[t], a = t + 1; a < E.length && i < A; ) i *= E[a++];
i = n.modInt(i);
for (;t < a; ) if (i % E[t++] == 0) return !1;
}
return n.millerRabin(e);
};
n.prototype.square = function() {
var e = i();
this.squareTo(e);
return e;
};
function I() {
this.i = 0;
this.j = 0;
this.S = new Array();
}
I.prototype.init = function(e) {
var t, n, i;
for (t = 0; t < 256; ++t) this.S[t] = t;
n = 0;
for (t = 0; t < 256; ++t) {
n = n + this.S[t] + e[t % e.length] & 255;
i = this.S[t];
this.S[t] = this.S[n];
this.S[n] = i;
}
this.i = 0;
this.j = 0;
};
I.prototype.next = function() {
var e;
this.i = this.i + 1 & 255;
this.j = this.j + this.S[this.i] & 255;
e = this.S[this.i];
this.S[this.i] = this.S[this.j];
this.S[this.j] = e;
return this.S[e + this.S[this.i] & 255];
};
var N, w, D, P = 256;
if (null == w) {
w = new Array();
D = 0;
var M;
if (window.crypto && window.crypto.getRandomValues) {
var x = new Uint32Array(256);
window.crypto.getRandomValues(x);
for (M = 0; M < x.length; ++M) w[D++] = 255 & x[M];
}
var O = function() {};
window.addEventListener ? window.addEventListener("mousemove", O, !1) : window.attachEvent && window.attachEvent("onmousemove", O);
}
function G() {
if (null == N) {
N = new I();
for (;D < P; ) {
var e = Math.floor(65536 * Math.random());
w[D++] = 255 & e;
}
N.init(w);
for (D = 0; D < w.length; ++D) w[D] = 0;
D = 0;
}
return N.next();
}
function R() {}
R.prototype.nextBytes = function(e) {
var t;
for (t = 0; t < e.length; ++t) e[t] = G();
};
function k(e, t) {
return new n(e, t);
}
function L(e, t) {
if (t < e.length + 11) {
console.error("Message too long for RSA");
return null;
}
for (var i = new Array(), a = e.length - 1; a >= 0 && t > 0; ) {
var r = e.charCodeAt(a--);
if (r < 128) i[--t] = r; else if (r > 127 && r < 2048) {
i[--t] = 63 & r | 128;
i[--t] = r >> 6 | 192;
} else {
i[--t] = 63 & r | 128;
i[--t] = r >> 6 & 63 | 128;
i[--t] = r >> 12 | 224;
}
}
i[--t] = 0;
for (var o = new R(), s = new Array(); t > 2; ) {
s[0] = 0;
for (;0 == s[0]; ) o.nextBytes(s);
i[--t] = s[0];
}
i[--t] = 2;
i[--t] = 0;
return new n(i);
}
function B() {
this.n = null;
this.e = 0;
this.d = null;
this.p = null;
this.q = null;
this.dmp1 = null;
this.dmq1 = null;
this.coeff = null;
}
B.prototype.doPublic = function(e) {
return e.modPowInt(this.e, this.n);
};
B.prototype.setPublic = function(e, t) {
if (null != e && null != t && e.length > 0 && t.length > 0) {
this.n = k(e, 16);
this.e = parseInt(t, 16);
} else console.error("Invalid RSA public key");
};
B.prototype.encrypt = function(e) {
var t = L(e, this.n.bitLength() + 7 >> 3);
if (null == t) return null;
var n = this.doPublic(t);
if (null == n) return null;
var i = n.toString(16);
return 0 == (1 & i.length) ? i : "0" + i;
};
function F(e, t) {
for (var n = e.toByteArray(), i = 0; i < n.length && 0 == n[i]; ) ++i;
if (n.length - i != t - 1 || 2 != n[i]) return null;
++i;
for (;0 != n[i]; ) if (++i >= n.length) return null;
for (var a = ""; ++i < n.length; ) {
var r = 255 & n[i];
if (r < 128) a += String.fromCharCode(r); else if (r > 191 && r < 224) {
a += String.fromCharCode((31 & r) << 6 | 63 & n[i + 1]);
++i;
} else {
a += String.fromCharCode((15 & r) << 12 | (63 & n[i + 1]) << 6 | 63 & n[i + 2]);
i += 2;
}
}
return a;
}
B.prototype.doPrivate = function(e) {
if (null == this.p || null == this.q) return e.modPow(this.d, this.n);
for (var t = e.mod(this.p).modPow(this.dmp1, this.p), n = e.mod(this.q).modPow(this.dmq1, this.q); t.compareTo(n) < 0; ) t = t.add(this.p);
return t.subtract(n).multiply(this.coeff).mod(this.p).multiply(this.q).add(n);
};
B.prototype.setPrivate = function(e, t, n) {
if (null != e && null != t && e.length > 0 && t.length > 0) {
this.n = k(e, 16);
this.e = parseInt(t, 16);
this.d = k(n, 16);
} else console.error("Invalid RSA private key");
};
B.prototype.setPrivateEx = function(e, t, n, i, a, r, o, s) {
if (null != e && null != t && e.length > 0 && t.length > 0) {
this.n = k(e, 16);
this.e = parseInt(t, 16);
this.d = k(n, 16);
this.p = k(i, 16);
this.q = k(a, 16);
this.dmp1 = k(r, 16);
this.dmq1 = k(o, 16);
this.coeff = k(s, 16);
} else console.error("Invalid RSA private key");
};
B.prototype.generate = function(e, t) {
var i = new R(), a = e >> 1;
this.e = parseInt(t, 16);
for (var r = new n(t, 16); ;) {
for (;;) {
this.p = new n(e - a, 1, i);
if (0 == this.p.subtract(n.ONE).gcd(r).compareTo(n.ONE) && this.p.isProbablePrime(10)) break;
}
for (;;) {
this.q = new n(a, 1, i);
if (0 == this.q.subtract(n.ONE).gcd(r).compareTo(n.ONE) && this.q.isProbablePrime(10)) break;
}
if (this.p.compareTo(this.q) <= 0) {
var o = this.p;
this.p = this.q;
this.q = o;
}
var s = this.p.subtract(n.ONE), c = this.q.subtract(n.ONE), l = s.multiply(c);
if (0 == l.gcd(r).compareTo(n.ONE)) {
this.n = this.p.multiply(this.q);
this.d = r.modInverse(l);
this.dmp1 = this.d.mod(s);
this.dmq1 = this.d.mod(c);
this.coeff = this.q.modInverse(this.p);
break;
}
}
};
B.prototype.decrypt = function(e) {
var t = k(e, 16), n = this.doPrivate(t);
return null == n ? null : F(n, this.n.bitLength() + 7 >> 3);
};
(function() {
B.prototype.generateAsync = function(e, t, a) {
var r = new R(), o = e >> 1;
this.e = parseInt(t, 16);
var s = new n(t, 16), c = this, l = function() {
var t = function() {
if (c.p.compareTo(c.q) <= 0) {
var e = c.p;
c.p = c.q;
c.q = e;
}
var t = c.p.subtract(n.ONE), i = c.q.subtract(n.ONE), r = t.multiply(i);
if (0 == r.gcd(s).compareTo(n.ONE)) {
c.n = c.p.multiply(c.q);
c.d = s.modInverse(r);
c.dmp1 = c.d.mod(t);
c.dmq1 = c.d.mod(i);
c.coeff = c.q.modInverse(c.p);
setTimeout(function() {
a();
}, 0);
} else setTimeout(l, 0);
}, u = function() {
c.q = i();
c.q.fromNumberAsync(o, 1, r, function() {
c.q.subtract(n.ONE).gcda(s, function(e) {
0 == e.compareTo(n.ONE) && c.q.isProbablePrime(10) ? setTimeout(t, 0) : setTimeout(u, 0);
});
});
}, d = function() {
c.p = i();
c.p.fromNumberAsync(e - o, 1, r, function() {
c.p.subtract(n.ONE).gcda(s, function(e) {
0 == e.compareTo(n.ONE) && c.p.isProbablePrime(10) ? setTimeout(u, 0) : setTimeout(d, 0);
});
});
};
setTimeout(d, 0);
};
setTimeout(l, 0);
};
n.prototype.gcda = function(e, t) {
var n = this.s < 0 ? this.negate() : this.clone(), i = e.s < 0 ? e.negate() : e.clone();
if (n.compareTo(i) < 0) {
var a = n;
n = i;
i = a;
}
var r = n.getLowestSetBit(), o = i.getLowestSetBit();
if (o < 0) t(n); else {
r < o && (o = r);
if (o > 0) {
n.rShiftTo(o, n);
i.rShiftTo(o, i);
}
var s = function() {
(r = n.getLowestSetBit()) > 0 && n.rShiftTo(r, n);
(r = i.getLowestSetBit()) > 0 && i.rShiftTo(r, i);
if (n.compareTo(i) >= 0) {
n.subTo(i, n);
n.rShiftTo(1, n);
} else {
i.subTo(n, i);
i.rShiftTo(1, i);
}
if (n.signum() > 0) setTimeout(s, 0); else {
o > 0 && i.lShiftTo(o, i);
setTimeout(function() {
t(i);
}, 0);
}
};
setTimeout(s, 10);
}
};
n.prototype.fromNumberAsync = function(e, t, i, a) {
if ("number" == typeof t) if (e < 2) this.fromInt(1); else {
this.fromNumber(e, i);
this.testBit(e - 1) || this.bitwiseTo(n.ONE.shiftLeft(e - 1), m, this);
this.isEven() && this.dAddOffset(1, 0);
var r = this, o = function() {
r.dAddOffset(2, 0);
r.bitLength() > e && r.subTo(n.ONE.shiftLeft(e - 1), r);
r.isProbablePrime(t) ? setTimeout(function() {
a();
}, 0) : setTimeout(o, 0);
};
setTimeout(o, 0);
} else {
var s = new Array(), c = 7 & e;
s.length = 1 + (e >> 3);
t.nextBytes(s);
c > 0 ? s[0] &= (1 << c) - 1 : s[0] = 0;
this.fromString(s, 256);
}
};
})();
var U = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", H = "=";
function z(e) {
var t, n, i = "";
for (t = 0; t + 3 <= e.length; t += 3) {
n = parseInt(e.substring(t, t + 3), 16);
i += U.charAt(n >> 6) + U.charAt(63 & n);
}
if (t + 1 == e.length) {
n = parseInt(e.substring(t, t + 1), 16);
i += U.charAt(n << 2);
} else if (t + 2 == e.length) {
n = parseInt(e.substring(t, t + 2), 16);
i += U.charAt(n >> 2) + U.charAt((3 & n) << 4);
}
for (;(3 & i.length) > 0; ) i += H;
return i;
}
function j(e) {
var t, n, i = "", a = 0;
for (t = 0; t < e.length && e.charAt(t) != H; ++t) {
v = U.indexOf(e.charAt(t));
if (!(v < 0)) if (0 == a) {
i += c(v >> 2);
n = 3 & v;
a = 1;
} else if (1 == a) {
i += c(n << 2 | v >> 4);
n = 15 & v;
a = 2;
} else if (2 == a) {
i += c(n);
i += c(v >> 2);
n = 3 & v;
a = 3;
} else {
i += c(n << 2 | v >> 4);
i += c(15 & v);
a = 0;
}
}
1 == a && (i += c(n << 2));
return i;
}
var W = W || {};
W.env = W.env || {};
var q = W, Y = Object.prototype, J = [ "toString", "valueOf" ];
W.env.parseUA = function(e) {
var t, n = function(e) {
var t = 0;
return parseFloat(e.replace(/\./g, function() {
return 1 == t++ ? "" : ".";
}));
}, i = navigator, a = {
ie: 0,
opera: 0,
gecko: 0,
webkit: 0,
chrome: 0,
mobile: null,
air: 0,
ipad: 0,
iphone: 0,
ipod: 0,
ios: null,
android: 0,
webos: 0,
caja: i && i.cajaVersion,
secure: !1,
os: null
}, r = e || navigator && navigator.userAgent, o = window && window.location, s = o && o.href;
a.secure = s && 0 === s.toLowerCase().indexOf("https");
if (r) {
/windows|win32/i.test(r) ? a.os = "windows" : /macintosh/i.test(r) ? a.os = "macintosh" : /rhino/i.test(r) && (a.os = "rhino");
/KHTML/.test(r) && (a.webkit = 1);
if ((t = r.match(/AppleWebKit\/([^\s]*)/)) && t[1]) {
a.webkit = n(t[1]);
if (/ Mobile\//.test(r)) {
a.mobile = "Apple";
(t = r.match(/OS ([^\s]*)/)) && t[1] && (t = n(t[1].replace("_", ".")));
a.ios = t;
a.ipad = a.ipod = a.iphone = 0;
(t = r.match(/iPad|iPod|iPhone/)) && t[0] && (a[t[0].toLowerCase()] = a.ios);
} else {
(t = r.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/)) && (a.mobile = t[0]);
if (/webOS/.test(r)) {
a.mobile = "WebOS";
(t = r.match(/webOS\/([^\s]*);/)) && t[1] && (a.webos = n(t[1]));
}
if (/ Android/.test(r)) {
a.mobile = "Android";
(t = r.match(/Android ([^\s]*);/)) && t[1] && (a.android = n(t[1]));
}
}
(t = r.match(/Chrome\/([^\s]*)/)) && t[1] ? a.chrome = n(t[1]) : (t = r.match(/AdobeAIR\/([^\s]*)/)) && (a.air = t[0]);
}
if (!a.webkit) if ((t = r.match(/Opera[\s\/]([^\s]*)/)) && t[1]) {
a.opera = n(t[1]);
(t = r.match(/Version\/([^\s]*)/)) && t[1] && (a.opera = n(t[1]));
(t = r.match(/Opera Mini[^;]*/)) && (a.mobile = t[0]);
} else if ((t = r.match(/MSIE\s([^;]*)/)) && t[1]) a.ie = n(t[1]); else if (t = r.match(/Gecko\/([^\s]*)/)) {
a.gecko = 1;
(t = r.match(/rv:([^\s\)]*)/)) && t[1] && (a.gecko = n(t[1]));
}
}
return a;
};
W.env.ua = W.env.parseUA();
W.isFunction = function(e) {
return "function" == typeof e || "[object Function]" === Y.toString.apply(e);
};
W._IEEnumFix = W.env.ua.ie ? function(e, t) {
var n, i, a;
for (n = 0; n < J.length; n += 1) {
a = t[i = J[n]];
q.isFunction(a) && a != Y[i] && (e[i] = a);
}
} : function() {};
W.extend = function(e, t, n) {
if (!t || !e) throw new Error("extend failed, please check that all dependencies are included.");
var i, a = function() {};
a.prototype = t.prototype;
e.prototype = new a();
e.prototype.constructor = e;
e.superclass = t.prototype;
t.prototype.constructor == Y.constructor && (t.prototype.constructor = t);
if (n) {
for (i in n) q.hasOwnProperty(n, i) && (e.prototype[i] = n[i]);
q._IEEnumFix(e.prototype, n);
}
};
"undefined" != typeof window.KJUR && window.KJUR || (window.KJUR = {});
KJUR = window.KJUR;
KJUR.asn1 = KJUR.asn1 || {};
window.KJUR = KJUR;
KJUR.asn1.ASN1Util = new function() {
this.integerToByteHex = function(e) {
var t = e.toString(16);
t.length % 2 == 1 && (t = "0" + t);
return t;
};
this.bigIntToMinTwosComplementsHex = function(e) {
var t = e.toString(16);
if ("-" != t.substr(0, 1)) t.length % 2 == 1 ? t = "0" + t : t.match(/^[0-7]/) || (t = "00" + t); else {
var i = t.substr(1).length;
i % 2 == 1 ? i += 1 : t.match(/^[0-7]/) || (i += 2);
for (var a = "", r = 0; r < i; r++) a += "f";
t = new n(a, 16).xor(e).add(n.ONE).toString(16).replace(/^-/, "");
}
return t;
};
this.getPEMStringFromHex = function(e, t) {
var n = CryptoJS.enc.Hex.parse(e), i = CryptoJS.enc.Base64.stringify(n).replace(/(.{64})/g, "$1\r\n");
return "-----BEGIN " + t + "-----\r\n" + (i = i.replace(/\r\n$/, "")) + "\r\n-----END " + t + "-----\r\n";
};
}();
window.KJUR = KJUR;
KJUR.asn1.ASN1Object = function() {
this.getLengthHexFromValue = function() {
if ("undefined" == typeof this.hV || null == this.hV) throw "this.hV is null or undefined.";
if (this.hV.length % 2 == 1) throw "value hex must be even length: n=" + "".length + ",v=" + this.hV;
var e = this.hV.length / 2, t = e.toString(16);
t.length % 2 == 1 && (t = "0" + t);
if (e < 128) return t;
var n = t.length / 2;
if (n > 15) throw "ASN.1 length too long to represent by 8x: n = " + e.toString(16);
return (128 + n).toString(16) + t;
};
this.getEncodedHex = function() {
if (null == this.hTLV || this.isModified) {
this.hV = this.getFreshValueHex();
this.hL = this.getLengthHexFromValue();
this.hTLV = this.hT + this.hL + this.hV;
this.isModified = !1;
}
return this.hTLV;
};
this.getValueHex = function() {
this.getEncodedHex();
return this.hV;
};
this.getFreshValueHex = function() {
return "";
};
};
KJUR.asn1.DERAbstractString = function(e) {
KJUR.asn1.DERAbstractString.superclass.constructor.call(this);
this.getString = function() {
return this.s;
};
this.setString = function(e) {
this.hTLV = null;
this.isModified = !0;
this.s = e;
this.hV = stohex(this.s);
};
this.setStringHex = function(e) {
this.hTLV = null;
this.isModified = !0;
this.s = null;
this.hV = e;
};
this.getFreshValueHex = function() {
return this.hV;
};
"undefined" != typeof e && ("undefined" != typeof e.str ? this.setString(e.str) : "undefined" != typeof e.hex && this.setStringHex(e.hex));
};
W.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object);
KJUR.asn1.DERAbstractTime = function() {
KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);
this.localDateToUTC = function(e) {
utc = e.getTime() + 6e4 * e.getTimezoneOffset();
return new Date(utc);
};
this.formatDate = function(e, t) {
var n = this.zeroPadding, i = this.localDateToUTC(e), a = String(i.getFullYear());
"utc" == t && (a = a.substr(2, 2));
return a + n(String(i.getMonth() + 1), 2) + n(String(i.getDate()), 2) + n(String(i.getHours()), 2) + n(String(i.getMinutes()), 2) + n(String(i.getSeconds()), 2) + "Z";
};
this.zeroPadding = function(e, t) {
return e.length >= t ? e : new Array(t - e.length + 1).join("0") + e;
};
this.getString = function() {
return this.s;
};
this.setString = function(e) {
this.hTLV = null;
this.isModified = !0;
this.s = e;
this.hV = stohex(this.s);
};
this.setByDateValue = function(e, t, n, i, a, r) {
var o = new Date(Date.UTC(e, t - 1, n, i, a, r, 0));
this.setByDate(o);
};
this.getFreshValueHex = function() {
return this.hV;
};
};
W.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object);
KJUR.asn1.DERAbstractStructured = function(e) {
KJUR.asn1.DERAbstractString.superclass.constructor.call(this);
this.setByASN1ObjectArray = function(e) {
this.hTLV = null;
this.isModified = !0;
this.asn1Array = e;
};
this.appendASN1Object = function(e) {
this.hTLV = null;
this.isModified = !0;
this.asn1Array.push(e);
};
this.asn1Array = new Array();
"undefined" != typeof e && "undefined" != typeof e.array && (this.asn1Array = e.array);
};
W.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object);
KJUR.asn1.DERBoolean = function() {
KJUR.asn1.DERBoolean.superclass.constructor.call(this);
this.hT = "01";
this.hTLV = "0101ff";
};
W.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object);
KJUR.asn1.DERInteger = function(e) {
KJUR.asn1.DERInteger.superclass.constructor.call(this);
this.hT = "02";
this.setByBigInteger = function(e) {
this.hTLV = null;
this.isModified = !0;
this.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e);
};
this.setByInteger = function(e) {
var t = new n(String(e), 10);
this.setByBigInteger(t);
};
this.setValueHex = function(e) {
this.hV = e;
};
this.getFreshValueHex = function() {
return this.hV;
};
"undefined" != typeof e && ("undefined" != typeof e.bigint ? this.setByBigInteger(e.bigint) : "undefined" != typeof e.int ? this.setByInteger(e.int) : "undefined" != typeof e.hex && this.setValueHex(e.hex));
};
W.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object);
KJUR.asn1.DERBitString = function(e) {
KJUR.asn1.DERBitString.superclass.constructor.call(this);
this.hT = "03";
this.setHexValueIncludingUnusedBits = function(e) {
this.hTLV = null;
this.isModified = !0;
this.hV = e;
};
this.setUnusedBitsAndHexValue = function(e, t) {
if (e < 0 || 7 < e) throw "unused bits shall be from 0 to 7: u = " + e;
var n = "0" + e;
this.hTLV = null;
this.isModified = !0;
this.hV = n + t;
};
this.setByBinaryString = function(e) {
var t = 8 - (e = e.replace(/0+$/, "")).length % 8;
8 == t && (t = 0);
for (var n = 0; n <= t; n++) e += "0";
var i = "";
for (n = 0; n < e.length - 1; n += 8) {
var a = e.substr(n, 8), r = parseInt(a, 2).toString(16);
1 == r.length && (r = "0" + r);
i += r;
}
this.hTLV = null;
this.isModified = !0;
this.hV = "0" + t + i;
};
this.setByBooleanArray = function(e) {
for (var t = "", n = 0; n < e.length; n++) 1 == e[n] ? t += "1" : t += "0";
this.setByBinaryString(t);
};
this.newFalseArray = function(e) {
for (var t = new Array(e), n = 0; n < e; n++) t[n] = !1;
return t;
};
this.getFreshValueHex = function() {
return this.hV;
};
"undefined" != typeof e && ("undefined" != typeof e.hex ? this.setHexValueIncludingUnusedBits(e.hex) : "undefined" != typeof e.bin ? this.setByBinaryString(e.bin) : "undefined" != typeof e.array && this.setByBooleanArray(e.array));
};
W.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object);
KJUR.asn1.DEROctetString = function(e) {
KJUR.asn1.DEROctetString.superclass.constructor.call(this, e);
this.hT = "04";
};
W.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString);
KJUR.asn1.DERNull = function() {
KJUR.asn1.DERNull.superclass.constructor.call(this);
this.hT = "05";
this.hTLV = "0500";
};
W.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object);
KJUR.asn1.DERObjectIdentifier = function(e) {
var t = function(e) {
var t = e.toString(16);
1 == t.length && (t = "0" + t);
return t;
}, i = function(e) {
var i = "", a = new n(e, 10).toString(2), r = 7 - a.length % 7;
7 == r && (r = 0);
for (var o = "", s = 0; s < r; s++) o += "0";
a = o + a;
for (s = 0; s < a.length - 1; s += 7) {
var c = a.substr(s, 7);
s != a.length - 7 && (c = "1" + c);
i += t(parseInt(c, 2));
}
return i;
};
KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);
this.hT = "06";
this.setValueHex = function(e) {
this.hTLV = null;
this.isModified = !0;
this.s = null;
this.hV = e;
};
this.setValueOidString = function(e) {
if (!e.match(/^[0-9.]+$/)) throw "malformed oid string: " + e;
var n = "", a = e.split("."), r = 40 * parseInt(a[0]) + parseInt(a[1]);
n += t(r);
a.splice(0, 2);
for (var o = 0; o < a.length; o++) n += i(a[o]);
this.hTLV = null;
this.isModified = !0;
this.s = null;
this.hV = n;
};
this.setValueName = function(e) {
if ("undefined" == typeof KJUR.asn1.x509.OID.name2oidList[e]) throw "DERObjectIdentifier oidName undefined: " + e;
var t = KJUR.asn1.x509.OID.name2oidList[e];
this.setValueOidString(t);
};
this.getFreshValueHex = function() {
return this.hV;
};
"undefined" != typeof e && ("undefined" != typeof e.oid ? this.setValueOidString(e.oid) : "undefined" != typeof e.hex ? this.setValueHex(e.hex) : "undefined" != typeof e.name && this.setValueName(e.name));
};
W.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object);
KJUR.asn1.DERUTF8String = function(e) {
KJUR.asn1.DERUTF8String.superclass.constructor.call(this, e);
this.hT = "0c";
};
W.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString);
KJUR.asn1.DERNumericString = function(e) {
KJUR.asn1.DERNumericString.superclass.constructor.call(this, e);
this.hT = "12";
};
W.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString);
KJUR.asn1.DERPrintableString = function(e) {
KJUR.asn1.DERPrintableString.superclass.constructor.call(this, e);
this.hT = "13";
};
W.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString);
KJUR.asn1.DERTeletexString = function(e) {
KJUR.asn1.DERTeletexString.superclass.constructor.call(this, e);
this.hT = "14";
};
W.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString);
KJUR.asn1.DERIA5String = function(e) {
KJUR.asn1.DERIA5String.superclass.constructor.call(this, e);
this.hT = "16";
};
W.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString);
KJUR.asn1.DERUTCTime = function(e) {
KJUR.asn1.DERUTCTime.superclass.constructor.call(this, e);
this.hT = "17";
this.setByDate = function(e) {
this.hTLV = null;
this.isModified = !0;
this.date = e;
this.s = this.formatDate(this.date, "utc");
this.hV = stohex(this.s);
};
"undefined" != typeof e && ("undefined" != typeof e.str ? this.setString(e.str) : "undefined" != typeof e.hex ? this.setStringHex(e.hex) : "undefined" != typeof e.date && this.setByDate(e.date));
};
W.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime);
KJUR.asn1.DERGeneralizedTime = function(e) {
KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, e);
this.hT = "18";
this.setByDate = function(e) {
this.hTLV = null;
this.isModified = !0;
this.date = e;
this.s = this.formatDate(this.date, "gen");
this.hV = stohex(this.s);
};
"undefined" != typeof e && ("undefined" != typeof e.str ? this.setString(e.str) : "undefined" != typeof e.hex ? this.setStringHex(e.hex) : "undefined" != typeof e.date && this.setByDate(e.date));
};
W.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime);
KJUR.asn1.DERSequence = function(e) {
KJUR.asn1.DERSequence.superclass.constructor.call(this, e);
this.hT = "30";
this.getFreshValueHex = function() {
for (var e = "", t = 0; t < this.asn1Array.length; t++) e += this.asn1Array[t].getEncodedHex();
this.hV = e;
return this.hV;
};
};
W.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured);
KJUR.asn1.DERSet = function(e) {
KJUR.asn1.DERSet.superclass.constructor.call(this, e);
this.hT = "31";
this.getFreshValueHex = function() {
for (var e = new Array(), t = 0; t < this.asn1Array.length; t++) {
var n = this.asn1Array[t];
e.push(n.getEncodedHex());
}
e.sort();
this.hV = e.join("");
return this.hV;
};
};
W.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured);
KJUR.asn1.DERTaggedObject = function(e) {
KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);
this.hT = "a0";
this.hV = "";
this.isExplicit = !0;
this.asn1Object = null;
this.setASN1Object = function(e, t, n) {
this.hT = t;
this.isExplicit = e;
this.asn1Object = n;
if (this.isExplicit) {
this.hV = this.asn1Object.getEncodedHex();
this.hTLV = null;
this.isModified = !0;
} else {
this.hV = null;
this.hTLV = n.getEncodedHex();
this.hTLV = this.hTLV.replace(/^../, t);
this.isModified = !1;
}
};
this.getFreshValueHex = function() {
return this.hV;
};
if ("undefined" != typeof e) {
"undefined" != typeof e.tag && (this.hT = e.tag);
"undefined" != typeof e.explicit && (this.isExplicit = e.explicit);
if ("undefined" != typeof e.obj) {
this.asn1Object = e.obj;
this.setASN1Object(this.isExplicit, this.hT, this.asn1Object);
}
}
};
W.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);
(function() {
"use strict";
var e, t = {
decode: function(t) {
var n;
if (void 0 === e) {
var i = "0123456789ABCDEF", a = " \f\n\r\t \u2028\u2029";
e = [];
for (n = 0; n < 16; ++n) e[i.charAt(n)] = n;
i = i.toLowerCase();
for (n = 10; n < 16; ++n) e[i.charAt(n)] = n;
for (n = 0; n < a.length; ++n) e[a.charAt(n)] = -1;
}
var r = [], o = 0, s = 0;
for (n = 0; n < t.length; ++n) {
var c = t.charAt(n);
if ("=" == c) break;
if (-1 != (c = e[c])) {
if (void 0 === c) throw "Illegal character at offset " + n;
o |= c;
if (++s >= 2) {
r[r.length] = o;
o = 0;
s = 0;
} else o <<= 4;
}
}
if (s) throw "Hex encoding incomplete: 4 bits missing";
return r;
}
};
window.Hex = t;
})();
(function() {
"use strict";
var e, t = {
decode: function(t) {
var n;
if (void 0 === e) {
var i = "= \f\n\r\t \u2028\u2029";
e = [];
for (n = 0; n < 64; ++n) e["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(n)] = n;
for (n = 0; n < i.length; ++n) e[i.charAt(n)] = -1;
}
var a = [], r = 0, o = 0;
for (n = 0; n < t.length; ++n) {
var s = t.charAt(n);
if ("=" == s) break;
if (-1 != (s = e[s])) {
if (void 0 === s) throw "Illegal character at offset " + n;
r |= s;
if (++o >= 4) {
a[a.length] = r >> 16;
a[a.length] = r >> 8 & 255;
a[a.length] = 255 & r;
r = 0;
o = 0;
} else r <<= 6;
}
}
switch (o) {
case 1:
throw "Base64 encoding incomplete: at least 2 bits missing";

case 2:
a[a.length] = r >> 10;
break;

case 3:
a[a.length] = r >> 16;
a[a.length] = r >> 8 & 255;
}
return a;
},
re: /-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/,
unarmor: function(e) {
var n = t.re.exec(e);
if (n) if (n[1]) e = n[1]; else {
if (!n[2]) throw "RegExp out of sync";
e = n[2];
}
return t.decode(e);
}
};
window.Base64 = t;
})();
(function() {
"use strict";
var e = function(e, t) {
var n = document.createElement(e);
n.className = t;
return n;
}, t = function(e) {
return document.createTextNode(e);
};
function n(e, t) {
if (e instanceof n) {
this.enc = e.enc;
this.pos = e.pos;
} else {
this.enc = e;
this.pos = t;
}
}
n.prototype.get = function(e) {
void 0 === e && (e = this.pos++);
if (e >= this.enc.length) throw "Requesting byte offset " + e + " on a stream of length " + this.enc.length;
return this.enc[e];
};
n.prototype.hexDigits = "0123456789ABCDEF";
n.prototype.hexByte = function(e) {
return this.hexDigits.charAt(e >> 4 & 15) + this.hexDigits.charAt(15 & e);
};
n.prototype.hexDump = function(e, t, n) {
for (var i = "", a = e; a < t; ++a) {
i += this.hexByte(this.get(a));
if (!0 !== n) switch (15 & a) {
case 7:
i += "  ";
break;

case 15:
i += "\n";
break;

default:
i += " ";
}
}
return i;
};
n.prototype.parseStringISO = function(e, t) {
for (var n = "", i = e; i < t; ++i) n += String.fromCharCode(this.get(i));
return n;
};
n.prototype.parseStringUTF = function(e, t) {
for (var n = "", i = e; i < t; ) {
var a = this.get(i++);
n += a < 128 ? String.fromCharCode(a) : a > 191 && a < 224 ? String.fromCharCode((31 & a) << 6 | 63 & this.get(i++)) : String.fromCharCode((15 & a) << 12 | (63 & this.get(i++)) << 6 | 63 & this.get(i++));
}
return n;
};
n.prototype.parseStringBMP = function(e, t) {
for (var n = "", i = e; i < t; i += 2) {
var a = this.get(i), r = this.get(i + 1);
n += String.fromCharCode((a << 8) + r);
}
return n;
};
n.prototype.reTime = /^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;
n.prototype.parseTime = function(e, t) {
var n = this.parseStringISO(e, t), i = this.reTime.exec(n);
if (!i) return "Unrecognized time: " + n;
n = i[1] + "-" + i[2] + "-" + i[3] + " " + i[4];
if (i[5]) {
n += ":" + i[5];
if (i[6]) {
n += ":" + i[6];
i[7] && (n += "." + i[7]);
}
}
if (i[8]) {
n += " UTC";
if ("Z" != i[8]) {
n += i[8];
i[9] && (n += ":" + i[9]);
}
}
return n;
};
n.prototype.parseInteger = function(e, t) {
var n = t - e;
if (n > 4) {
n <<= 3;
var i = this.get(e);
if (0 === i) n -= 8; else for (;i < 128; ) {
i <<= 1;
--n;
}
return "(" + n + " bit)";
}
for (var a = 0, r = e; r < t; ++r) a = a << 8 | this.get(r);
return a;
};
n.prototype.parseBitString = function(e, t) {
var n = this.get(e), i = (t - e - 1 << 3) - n, a = "(" + i + " bit)";
if (i <= 20) {
var r = n;
a += " ";
for (var o = t - 1; o > e; --o) {
for (var s = this.get(o), c = r; c < 8; ++c) a += s >> c & 1 ? "1" : "0";
r = 0;
}
}
return a;
};
n.prototype.parseOctetString = function(e, t) {
var n = t - e, i = "(" + n + " byte) ";
n > 100 && (t = e + 100);
for (var a = e; a < t; ++a) i += this.hexByte(this.get(a));
n > 100 && (i += "…");
return i;
};
n.prototype.parseOID = function(e, t) {
for (var n = "", i = 0, a = 0, r = e; r < t; ++r) {
var o = this.get(r);
i = i << 7 | 127 & o;
a += 7;
if (!(128 & o)) {
if ("" === n) {
var s = i < 80 ? i < 40 ? 0 : 1 : 2;
n = s + "." + (i - 40 * s);
} else n += "." + (a >= 31 ? "bigint" : i);
i = a = 0;
}
}
return n;
};
function i(e, t, n, i, a) {
this.stream = e;
this.header = t;
this.length = n;
this.tag = i;
this.sub = a;
}
i.prototype.typeName = function() {
if (void 0 === this.tag) return "unknown";
var e = this.tag >> 6, t = (this.tag, 31 & this.tag);
switch (e) {
case 0:
switch (t) {
case 0:
return "EOC";

case 1:
return "BOOLEAN";

case 2:
return "INTEGER";

case 3:
return "BIT_STRING";

case 4:
return "OCTET_STRING";

case 5:
return "NULL";

case 6:
return "OBJECT_IDENTIFIER";

case 7:
return "ObjectDescriptor";

case 8:
return "EXTERNAL";

case 9:
return "REAL";

case 10:
return "ENUMERATED";

case 11:
return "EMBEDDED_PDV";

case 12:
return "UTF8String";

case 16:
return "SEQUENCE";

case 17:
return "SET";

case 18:
return "NumericString";

case 19:
return "PrintableString";

case 20:
return "TeletexString";

case 21:
return "VideotexString";

case 22:
return "IA5String";

case 23:
return "UTCTime";

case 24:
return "GeneralizedTime";

case 25:
return "GraphicString";

case 26:
return "VisibleString";

case 27:
return "GeneralString";

case 28:
return "UniversalString";

case 30:
return "BMPString";

default:
return "Universal_" + t.toString(16);
}

case 1:
return "Application_" + t.toString(16);

case 2:
return "[" + t + "]";

case 3:
return "Private_" + t.toString(16);
}
};
i.prototype.reSeemsASCII = /^[ -~]+$/;
i.prototype.content = function() {
if (void 0 === this.tag) return null;
var e = this.tag >> 6, t = 31 & this.tag, n = this.posContent(), i = Math.abs(this.length);
if (0 !== e) {
if (null !== this.sub) return "(" + this.sub.length + " elem)";
var a = this.stream.parseStringISO(n, n + Math.min(i, 100));
return this.reSeemsASCII.test(a) ? a.substring(0, 200) + (a.length > 200 ? "…" : "") : this.stream.parseOctetString(n, n + i);
}
switch (t) {
case 1:
return 0 === this.stream.get(n) ? "false" : "true";

case 2:
return this.stream.parseInteger(n, n + i);

case 3:
return this.sub ? "(" + this.sub.length + " elem)" : this.stream.parseBitString(n, n + i);

case 4:
return this.sub ? "(" + this.sub.length + " elem)" : this.stream.parseOctetString(n, n + i);

case 6:
return this.stream.parseOID(n, n + i);

case 16:
case 17:
return "(" + this.sub.length + " elem)";

case 12:
return this.stream.parseStringUTF(n, n + i);

case 18:
case 19:
case 20:
case 21:
case 22:
case 26:
return this.stream.parseStringISO(n, n + i);

case 30:
return this.stream.parseStringBMP(n, n + i);

case 23:
case 24:
return this.stream.parseTime(n, n + i);
}
return null;
};
i.prototype.toString = function() {
return this.typeName() + "@" + this.stream.pos + "[header:" + this.header + ",length:" + this.length + ",sub:" + (null === this.sub ? "null" : this.sub.length) + "]";
};
i.prototype.print = function(e) {
void 0 === e && (e = "");
document.writeln(e + this);
if (null !== this.sub) {
e += "  ";
for (var t = 0, n = this.sub.length; t < n; ++t) this.sub[t].print(e);
}
};
i.prototype.toPrettyString = function(e) {
void 0 === e && (e = "");
var t = e + this.typeName() + " @" + this.stream.pos;
this.length >= 0 && (t += "+");
t += this.length;
32 & this.tag ? t += " (constructed)" : 3 != this.tag && 4 != this.tag || null === this.sub || (t += " (encapsulates)");
t += "\n";
if (null !== this.sub) {
e += "  ";
for (var n = 0, i = this.sub.length; n < i; ++n) t += this.sub[n].toPrettyString(e);
}
return t;
};
i.prototype.toDOM = function() {
var n = e("div", "node");
n.asn1 = this;
var i = e("div", "head"), a = this.typeName().replace(/_/g, " ");
i.innerHTML = a;
var r = this.content();
if (null !== r) {
r = String(r).replace(/</g, "&lt;");
var o = e("span", "preview");
o.appendChild(t(r));
i.appendChild(o);
}
n.appendChild(i);
this.node = n;
this.head = i;
var s = e("div", "value");
a = "Offset: " + this.stream.pos + "<br/>";
a += "Length: " + this.header + "+";
this.length >= 0 ? a += this.length : a += -this.length + " (undefined)";
32 & this.tag ? a += "<br/>(constructed)" : 3 != this.tag && 4 != this.tag || null === this.sub || (a += "<br/>(encapsulates)");
if (null !== r) {
a += "<br/>Value:<br/><b>" + r + "</b>";
if ("object" == typeof oids && 6 == this.tag) {
var c = oids[r];
if (c) {
c.d && (a += "<br/>" + c.d);
c.c && (a += "<br/>" + c.c);
c.w && (a += "<br/>(warning!)");
}
}
}
s.innerHTML = a;
n.appendChild(s);
var l = e("div", "sub");
if (null !== this.sub) for (var u = 0, d = this.sub.length; u < d; ++u) l.appendChild(this.sub[u].toDOM());
n.appendChild(l);
i.onclick = function() {
n.className = "node collapsed" == n.className ? "node" : "node collapsed";
};
return n;
};
i.prototype.posStart = function() {
return this.stream.pos;
};
i.prototype.posContent = function() {
return this.stream.pos + this.header;
};
i.prototype.posEnd = function() {
return this.stream.pos + this.header + Math.abs(this.length);
};
i.prototype.fakeHover = function(e) {
this.node.className += " hover";
e && (this.head.className += " hover");
};
i.prototype.fakeOut = function(e) {
var t = / ?hover/;
this.node.className = this.node.className.replace(t, "");
e && (this.head.className = this.head.className.replace(t, ""));
};
i.prototype.toHexDOM_sub = function(n, i, a, r, o) {
if (!(r >= o)) {
var s = e("span", i);
s.appendChild(t(a.hexDump(r, o)));
n.appendChild(s);
}
};
i.prototype.toHexDOM = function(n) {
var i = e("span", "hex");
void 0 === n && (n = i);
this.head.hexNode = i;
this.head.onmouseover = function() {
this.hexNode.className = "hexCurrent";
};
this.head.onmouseout = function() {
this.hexNode.className = "hex";
};
i.asn1 = this;
i.onmouseover = function() {
var e = !n.selected;
if (e) {
n.selected = this.asn1;
this.className = "hexCurrent";
}
this.asn1.fakeHover(e);
};
i.onmouseout = function() {
var e = n.selected == this.asn1;
this.asn1.fakeOut(e);
if (e) {
n.selected = null;
this.className = "hex";
}
};
this.toHexDOM_sub(i, "tag", this.stream, this.posStart(), this.posStart() + 1);
this.toHexDOM_sub(i, this.length >= 0 ? "dlen" : "ulen", this.stream, this.posStart() + 1, this.posContent());
if (null === this.sub) i.appendChild(t(this.stream.hexDump(this.posContent(), this.posEnd()))); else if (this.sub.length > 0) {
var a = this.sub[0], r = this.sub[this.sub.length - 1];
this.toHexDOM_sub(i, "intro", this.stream, this.posContent(), a.posStart());
for (var o = 0, s = this.sub.length; o < s; ++o) i.appendChild(this.sub[o].toHexDOM(n));
this.toHexDOM_sub(i, "outro", this.stream, r.posEnd(), this.posEnd());
}
return i;
};
i.prototype.toHexString = function() {
return this.stream.hexDump(this.posStart(), this.posEnd(), !0);
};
i.decodeLength = function(e) {
var t = e.get(), n = 127 & t;
if (n == t) return n;
if (n > 3) throw "Length over 24 bits not supported at position " + (e.pos - 1);
if (0 === n) return -1;
t = 0;
for (var i = 0; i < n; ++i) t = t << 8 | e.get();
return t;
};
i.hasContent = function(e, t, a) {
if (32 & e) return !0;
if (e < 3 || e > 4) return !1;
var r = new n(a);
3 == e && r.get();
if (r.get() >> 6 & 1) return !1;
try {
var o = i.decodeLength(r);
return r.pos - a.pos + o == t;
} catch (e) {
return !1;
}
};
i.decode = function(e) {
e instanceof n || (e = new n(e, 0));
var t = new n(e), a = e.get(), r = i.decodeLength(e), o = e.pos - t.pos, s = null;
if (i.hasContent(a, r, e)) {
var c = e.pos;
3 == a && e.get();
s = [];
if (r >= 0) {
for (var l = c + r; e.pos < l; ) s[s.length] = i.decode(e);
if (e.pos != l) throw "Content size is not correct for container starting at offset " + c;
} else try {
for (;;) {
var u = i.decode(e);
if (0 === u.tag) break;
s[s.length] = u;
}
r = c - e.pos;
} catch (e) {
throw "Exception while decoding undefined length content: " + e;
}
} else e.pos += r;
return new i(t, o, r, a, s);
};
i.test = function() {
for (var e = [ {
value: [ 39 ],
expected: 39
}, {
value: [ 129, 201 ],
expected: 201
}, {
value: [ 131, 254, 220, 186 ],
expected: 16702650
} ], t = 0, a = e.length; t < a; ++t) {
var r = new n(e[t].value, 0), o = i.decodeLength(r);
o != e[t].expected && document.write("In test[" + t + "] expected " + e[t].expected + " got " + o + "\n");
}
};
window.ASN1 = i;
})();
ASN1.prototype.getHexStringValue = function() {
var e = this.toHexString(), t = 2 * this.header, n = 2 * this.length;
return e.substr(t, n);
};
B.prototype.parseKey = function(e) {
try {
var t = 0, n = 0, i = /^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/.test(e) ? Hex.decode(e) : Base64.unarmor(e), a = ASN1.decode(i);
3 === a.sub.length && (a = a.sub[2].sub[0]);
if (9 === a.sub.length) {
t = a.sub[1].getHexStringValue();
this.n = k(t, 16);
n = a.sub[2].getHexStringValue();
this.e = parseInt(n, 16);
var r = a.sub[3].getHexStringValue();
this.d = k(r, 16);
var o = a.sub[4].getHexStringValue();
this.p = k(o, 16);
var s = a.sub[5].getHexStringValue();
this.q = k(s, 16);
var c = a.sub[6].getHexStringValue();
this.dmp1 = k(c, 16);
var l = a.sub[7].getHexStringValue();
this.dmq1 = k(l, 16);
var u = a.sub[8].getHexStringValue();
this.coeff = k(u, 16);
} else {
if (2 !== a.sub.length) return !1;
var d = a.sub[1].sub[0];
t = d.sub[0].getHexStringValue();
this.n = k(t, 16);
n = d.sub[1].getHexStringValue();
this.e = parseInt(n, 16);
}
return !0;
} catch (e) {
return !1;
}
};
B.prototype.getPrivateBaseKey = function() {
var e = {
array: [ new KJUR.asn1.DERInteger({
int: 0
}), new KJUR.asn1.DERInteger({
bigint: this.n
}), new KJUR.asn1.DERInteger({
int: this.e
}), new KJUR.asn1.DERInteger({
bigint: this.d
}), new KJUR.asn1.DERInteger({
bigint: this.p
}), new KJUR.asn1.DERInteger({
bigint: this.q
}), new KJUR.asn1.DERInteger({
bigint: this.dmp1
}), new KJUR.asn1.DERInteger({
bigint: this.dmq1
}), new KJUR.asn1.DERInteger({
bigint: this.coeff
}) ]
};
return new KJUR.asn1.DERSequence(e).getEncodedHex();
};
B.prototype.getPrivateBaseKeyB64 = function() {
return z(this.getPrivateBaseKey());
};
B.prototype.getPublicBaseKey = function() {
var e = {
array: [ new KJUR.asn1.DERObjectIdentifier({
oid: "1.2.840.113549.1.1.1"
}), new KJUR.asn1.DERNull() ]
}, t = new KJUR.asn1.DERSequence(e);
e = {
array: [ new KJUR.asn1.DERInteger({
bigint: this.n
}), new KJUR.asn1.DERInteger({
int: this.e
}) ]
};
e = {
hex: "00" + new KJUR.asn1.DERSequence(e).getEncodedHex()
};
e = {
array: [ t, new KJUR.asn1.DERBitString(e) ]
};
return new KJUR.asn1.DERSequence(e).getEncodedHex();
};
B.prototype.getPublicBaseKeyB64 = function() {
return z(this.getPublicBaseKey());
};
B.prototype.wordwrap = function(e, t) {
if (!e) return e;
var n = "(.{1," + (t = t || 64) + "})( +|$\n?)|(.{1," + t + "})";
return e.match(RegExp(n, "g")).join("\n");
};
B.prototype.getPrivateKey = function() {
var e = "-----BEGIN RSA PRIVATE KEY-----\n";
return (e += this.wordwrap(this.getPrivateBaseKeyB64()) + "\n") + "-----END RSA PRIVATE KEY-----";
};
B.prototype.getPublicKey = function() {
var e = "-----BEGIN PUBLIC KEY-----\n";
return (e += this.wordwrap(this.getPublicBaseKeyB64()) + "\n") + "-----END PUBLIC KEY-----";
};
B.prototype.hasPublicKeyProperty = function(e) {
return (e = e || {}).hasOwnProperty("n") && e.hasOwnProperty("e");
};
B.prototype.hasPrivateKeyProperty = function(e) {
return (e = e || {}).hasOwnProperty("n") && e.hasOwnProperty("e") && e.hasOwnProperty("d") && e.hasOwnProperty("p") && e.hasOwnProperty("q") && e.hasOwnProperty("dmp1") && e.hasOwnProperty("dmq1") && e.hasOwnProperty("coeff");
};
B.prototype.parsePropertiesFrom = function(e) {
this.n = e.n;
this.e = e.e;
if (e.hasOwnProperty("d")) {
this.d = e.d;
this.p = e.p;
this.q = e.q;
this.dmp1 = e.dmp1;
this.dmq1 = e.dmq1;
this.coeff = e.coeff;
}
};
var V = function(e) {
B.call(this);
e && ("string" == typeof e ? this.parseKey(e) : (this.hasPrivateKeyProperty(e) || this.hasPublicKeyProperty(e)) && this.parsePropertiesFrom(e));
};
(V.prototype = new B()).constructor = V;
var K = function(e) {
e = e || {};
this.default_key_size = parseInt(e.default_key_size) || 1024;
this.default_public_exponent = e.default_public_exponent || "010001";
this.log = e.log || !1;
this.key = null;
};
K.prototype.setKey = function(e) {
this.log && this.key && console.warn("A key was already set, overriding existing.");
this.key = new V(e);
};
K.prototype.setPrivateKey = function(e) {
this.setKey(e);
};
K.prototype.setPublicKey = function(e) {
this.setKey(e);
};
K.prototype.decrypt = function(e) {
try {
console.log("111111", this.getKey());
console.log("222222", this.getKey().decrypt);
console.log("333333", j(e));
console.log("444444", this.getKey().decrypt(j(e)));
return this.getKey().decrypt(j(e));
} catch (e) {
return !1;
}
};
K.prototype.encrypt = function(e) {
try {
return z(this.getKey().encrypt(e));
} catch (e) {
return !1;
}
};
K.prototype.getKey = function(e) {
if (!this.key) {
this.key = new V();
if (e && "[object Function]" === {}.toString.call(e)) {
this.key.generateAsync(this.default_key_size, this.default_public_exponent, e);
return;
}
this.key.generate(this.default_key_size, this.default_public_exponent);
}
return this.key;
};
K.prototype.getPrivateKey = function() {
return this.getKey().getPrivateKey();
};
K.prototype.getPrivateKeyB64 = function() {
return this.getKey().getPrivateBaseKeyB64();
};
K.prototype.getPublicKey = function() {
return this.getKey().getPublicKey();
};
K.prototype.getPublicKeyB64 = function() {
return this.getKey().getPublicBaseKeyB64();
};
K.version = "2.3.1";
e.JSEncrypt = K;
}, "function" == typeof define && define.amd ? define([ "exports" ], i) : "object" == typeof n && "string" != typeof n.nodeName ? i(t.exports) : i(this);
var i;
}, {} ],
AdComponent: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "276a6l40+xDWIhNVWYLvno6", "AdComponent");
n.__esModule = !0;
n.default = void 0;
var i, a, r = e("../../../GameBase/GameConfig"), o = e("../../../Main/Script/native-extend"), s = (i = e("../../common/GameUtils")) && i.__esModule ? i : {
default: i
};
function c(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
l(e, t);
}
function l(e, t) {
return (l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
var u = cc._decorator, d = u.ccclass, h = (u.property, d(a = function(e) {
c(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
(t = e.call.apply(e, [ this ].concat(i)) || this).url = "";
t.jumpType = "url";
return t;
}
var n = t.prototype;
n.initAd = function(e) {
var t = this;
this.url = e.adUrl;
this.jumpType = e.jumpType;
s.default.loadImg(e.imgUrl).then(function(e) {
t.node.getComponent(cc.Sprite).spriteFrame = e;
});
this.node.on(cc.Node.EventType.TOUCH_END, this.jumpUrl, this);
};
n.jumpUrl = function() {
if (!s.default.isNullOrEmpty(this.url)) switch (this.jumpType) {
case "url":
o.Social.openUrl(this.url);
break;

case "pop":
s.default.pop(r.GameConfig.pop[this.url]);
}
};
n.hideAd = function() {
this.node.active = !1;
};
n.showAd = function() {
this.node.active = !0;
};
return t;
}(cc.Component)) || a);
n.default = h;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/native-extend": "native-extend",
"../../common/GameUtils": "GameUtils"
} ],
AdminClubItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "ddb6749jopIQrpbs8iIyqVC", "AdminClubItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d = e("../../../GameBase/GameConfig"), h = (p(e("../../../Main/NetWork/Connector")), 
p(e("../../../Main/Script/Cache"))), f = (p(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App"), p(e("../../common/GameUtils")));
p(e("../common/Avatar"));
function p(e) {
return e && e.__esModule ? e : {
default: e
};
}
function m(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function g(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function v(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
C(e, t);
}
function C(e, t) {
return (C = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function b(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var y = cc._decorator, S = y.ccclass, _ = y.property, T = (i = _(cc.Label), a = _(cc.Label), 
r = _(cc.Label), S(o = (s = function(e) {
v(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
m(t = e.call.apply(e, [ this ].concat(i)) || this, "lblName", c, g(t));
m(t, "lblId", l, g(t));
m(t, "lblCount", u, g(t));
t.clubData = null;
return t;
}
var n = t.prototype;
n.addEvents = function() {};
n.removeEvents = function() {};
n.updateScore = function() {};
n.initData = function(e) {
this.clubData = e;
this.lblName.string = "" + e.name;
this.lblId.string = "" + e.id;
this.lblCount.string = "" + e.persons;
};
n.onClickDetail = function() {
var e = this;
h.default.playSfx();
f.default.pop(d.GameConfig.pop.AdminDetailPop, function(t) {
t.getComponent("AdminDetailPop").renderClub(e.clubData);
});
};
n.onDestroy = function() {
this.removeEvents();
};
return t;
}(cc.Component), c = b(s.prototype, "lblName", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = b(s.prototype, "lblId", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = b(s.prototype, "lblCount", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = T;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
AdminDetailPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "7ca9cx+zYRBvI/SuiI3kOZs", "AdminDetailPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M, x, O = e("../../../GameBase/GameConfig"), G = B(e("../../../Main/NetWork/Connector")), R = B(e("../../../Main/Script/Cache")), k = (B(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App"), B(e("../../common/GameUtils"))), L = B(e("../common/Avatar"));
function B(e) {
return e && e.__esModule ? e : {
default: e
};
}
function F(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function U(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function H(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
z(e, t);
}
function z(e, t) {
return (z = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function j(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var W = cc._decorator, q = W.ccclass, Y = W.property, J = (i = Y(L.default), a = Y(cc.Label), 
r = Y(cc.Label), o = Y(cc.Label), s = Y(cc.Label), c = Y(cc.Label), l = Y(cc.Label), 
u = Y(cc.Label), d = Y(cc.Label), h = Y(cc.Label), f = Y(cc.Node), p = Y(cc.Prefab), 
m = Y(cc.Node), g = Y(cc.Label), q(v = (C = function(e) {
H(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
F(t = e.call.apply(e, [ this ].concat(i)) || this, "avatar", b, U(t));
F(t, "lblName", y, U(t));
F(t, "lblId", S, U(t));
F(t, "lblCount", _, U(t));
F(t, "lblCost", T, U(t));
F(t, "lblCreatedAt", E, U(t));
F(t, "lblUpdatedAt", A, U(t));
F(t, "tips1", I, U(t));
F(t, "tips2", N, U(t));
F(t, "tips3", w, U(t));
F(t, "itemContent", D, U(t));
F(t, "listItem", P, U(t));
F(t, "pageContainer", M, U(t));
F(t, "lblPage", x, U(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.currentData = null;
return t;
}
var n = t.prototype;
n.addEvents = function() {};
n.removeEvents = function() {};
n.renderClub = function(e) {
this.renderData = {
page: [],
rows: {}
};
this.tips1.string = "日期";
this.tips2.string = "局数";
this.tips3.node.active = !1;
this.currentData = e;
this.lblCreatedAt.string = "总人数: " + e.persons;
this.downloadClubList(1);
this.currentFun = this.downloadClubList;
};
n.downloadClubList = function(e) {
var t = this;
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) G.default.request(O.GameConfig.ServerEventName.AdminClubInfo, {
clubID: this.currentData.id,
page: e,
pageSize: 8
}, function(n) {
t.avatar.avatarUrl = n.club.user.head;
t.lblName.string = "会长名: " + n.club.user.name;
t.lblId.string = "会长ID: " + n.club.user.id;
t.lblCount.string = "公会名: " + n.club.name;
t.lblCost.string = "公会ID: " + n.club.id;
t.lblUpdatedAt.string = "总局数: " + n.total;
if (!k.default.isNullOrEmpty(n.rows)) {
-1 == t.renderData.page.indexOf(e) && t.renderData.page.push(e);
t.renderData.rows["" + e] = [];
t.renderData.rows["" + e] = n.rows;
t.pageContainer.active = !0;
t.page = e;
t.totalPage = Math.ceil(n.count / 8);
t.lblPage.string = e + "/" + Math.ceil(n.count / 8);
n.rows.forEach(function(e) {
var n = cc.instantiate(t.listItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("turn").getComponent(cc.Label).string = e.turn;
n.getChildByName("count").active = !1;
t.itemContent.addChild(n);
});
}
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.listItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("turn").getComponent(cc.Label).string = e.turn;
n.getChildByName("count").active = !1;
t.itemContent.addChild(n);
});
}
};
n.renderUser = function(e) {
this.renderData = {
page: [],
rows: {}
};
this.tips1.string = "日期";
this.tips2.string = "消耗";
this.tips3.string = "充值";
this.currentData = e;
this.avatar.avatarUrl = e.head;
this.lblName.string = "玩家名: " + e.name;
this.lblId.string = "玩家ID: " + e.id;
this.lblCount.string = "金币: " + k.default.formatGold(e.wallet);
this.downloadUserList(1);
this.currentFun = this.downloadUserList;
};
n.downloadUserList = function(e) {
var t = this;
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) G.default.request(O.GameConfig.ServerEventName.AdminUserInfo, {
userID: this.currentData.id,
page: e,
pageSize: 8
}, function(n) {
t.lblCost.string = "总消耗: " + k.default.formatGold(n.total);
t.lblCreatedAt.string = "创建时间:" + new Date(n.user.createdAt).format("yyyy-MM-dd hh:mm:ss");
t.lblUpdatedAt.string = "更新时间:" + new Date(n.user.updatedAt).format("yyyy-MM-dd hh:mm:ss");
if (!k.default.isNullOrEmpty(n.rows)) {
-1 == t.renderData.page.indexOf(e) && t.renderData.page.push(e);
t.renderData.rows["" + e] = [];
t.renderData.rows["" + e] = n.rows;
t.pageContainer.active = !0;
t.page = e;
t.totalPage = Math.ceil(n.count / 8);
t.lblPage.string = e + "/" + Math.ceil(n.count / 8);
n.rows.forEach(function(e) {
var n = cc.instantiate(t.listItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("turn").getComponent(cc.Label).string = k.default.formatGold(e.dec);
n.getChildByName("count").getComponent(cc.Label).string = k.default.formatGold(e.inc);
t.itemContent.addChild(n);
});
}
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.listItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("turn").getComponent(cc.Label).string = k.default.formatGold(e.dec);
n.getChildByName("count").getComponent(cc.Label).string = k.default.formatGold(e.inc);
t.itemContent.addChild(n);
});
}
};
n.addPage = function() {
R.default.playSfx();
if (this.page >= this.totalPage) R.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.currentFun(e);
}
};
n.reducePage = function() {
R.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.currentFun(e);
} else R.default.alertTip("已经是第一页");
};
n.onClickClose = function() {
R.default.playSfx();
this.removeEvents();
this.node.destroy();
};
n.onDestroy = function() {
this.removeEvents();
};
return t;
}(cc.Component), b = j(C.prototype, "avatar", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = j(C.prototype, "lblName", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = j(C.prototype, "lblId", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = j(C.prototype, "lblCount", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = j(C.prototype, "lblCost", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = j(C.prototype, "lblCreatedAt", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = j(C.prototype, "lblUpdatedAt", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = j(C.prototype, "tips1", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), N = j(C.prototype, "tips2", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), w = j(C.prototype, "tips3", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), D = j(C.prototype, "itemContent", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), P = j(C.prototype, "listItem", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), M = j(C.prototype, "pageContainer", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), x = j(C.prototype, "lblPage", [ g ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C)) || v);
n.default = J;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
AdminHead07: [ function(e, t) {
"use strict";
cc._RF.push(t, "80a47RhtLRDlZx5wT7SAXKq", "AdminHead07");
var n = e("../../../Main/Script/TableInfo"), i = e("../../../Main/Script/Cache"), a = (e("../../../Main/Script/DataBase"), 
e("audio-ctrl"), e("../../../Main/Script/utils")), r = e("../../../GameBase/GameConfig").GameConfig, o = (cc.v2(-511, -232), 
cc.v2(509, 148), cc.v2(-511, 148), [ cc.v2(106, 48), cc.v2(-106, 48), cc.v2(106, 48) ]);
cc.Class({
extends: cc.Component,
properties: {
sprHead: cc.Sprite,
nodeBln: cc.Node,
imgBanker: cc.Node,
lblZongjifen: cc.Label,
lblName: cc.Label,
sprStatus: cc.Node,
lastTime: 0,
sprBaodan: cc.Node,
nodeAutoPlay: cc.Node,
readyIcon: cc.Node,
scoreChange: cc.Node,
loseFont: cc.Font,
winFont: cc.Font,
niaoNode: cc.Node,
clock: cc.Node,
cardContainer: cc.Node,
cardCount: cc.Label,
publishPage: cc.Prefab
},
init: function(e) {
var t = cc.find("Canvas"), i = [ cc.v2(69.5 - t.width / 2 + r.FitScreen, 0), cc.v2(t.width / 2 - 69.5 - r.FitScreen, 130), cc.v2(69.5 - t.width / 2 + r.FitScreen, 110) ];
this.node.position = i[n.realIdx[e.idx]];
var s = [ cc.v2(90, 0), cc.v2(-90, 0), cc.v2(90, 0) ];
this.cardContainer.position = s[n.realIdx[e.idx]];
this.nodeBln.active = !1;
this.sprStatus.active = !!e.offline && e.offline;
this.imgBanker.active = e.idx == n.zhuang;
this.lblZongjifen.string = a.formatGold(e.wallet, 2);
this.cardCount.string = "";
this.showUserInfo(e);
this.sprBaodan.setPosition(o[n.realIdx[e.idx]]);
},
showUserInfo: function(e) {
var t = this;
this.lblName.string = a.getStringByLength(e.prop.name, 6);
this.scheduleOnce(function() {
a.setHead(t.sprHead, e.prop.head);
}, .5);
},
showInfo: function(e) {
var t = new Date().getTime();
if (t - this.lastTime < 2e3) {
this.lastTime = t;
i.alertTip("发言间隔需要2秒");
} else {
var n = e.idx;
a.pop(r.pop.PlayerInfo, function(e) {
e.getComponent("ModulePlayerInfo").init(n);
});
}
},
activeBanker: function(e) {
this.imgBanker.active = e;
},
activeBln: function() {
this.nodeBln.active = !0;
this.nodeBln.stopAllActions();
this.nodeBln.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(1), cc.delayTime(.2), cc.fadeIn(1))));
},
activeBaodan: function(e) {
this.sprBaodan.active = e;
},
activeAutoPlay: function(e) {
this.nodeAutoPlay.active = e;
},
activeReady: function(e) {
this.readyIcon.active = e;
},
changeCardCount: function(e) {
this.cardCount.string = e + "";
},
showBombScores: function(e, t, n, i) {
var r = this;
this.lblZongjifen.string = a.formatGold(t, 2);
if (n < 0) {
this.scoreChange.getComponent(cc.Label).font = this.loseFont;
this.scoreChange.getComponent(cc.Label).string = a.formatGold(n);
} else {
this.scoreChange.getComponent(cc.Label).font = this.winFont;
this.scoreChange.getComponent(cc.Label).string = a.formatGold(n);
}
this.scoreChange.anchorX = 1 == e ? 1 : 0;
this.scoreChange.position = 1 == e ? cc.v2(-81, -108) : cc.v2(79, -108);
this.scoreChange.opacity = 0;
this.scoreChange.active = !0;
var o = cc.fadeIn(.3), s = 1 == e ? cc.moveTo(.3, cc.v2(-81, -65)) : cc.moveTo(.3, cc.v2(79, -65)), c = cc.spawn(o, s), l = cc.delayTime(1), u = cc.callFunc(function() {
r.scoreChange.active = !1;
a.isNullOrEmpty(i) || i();
});
this.scoreChange.runAction(cc.sequence(c, l, u));
},
showClock: function(e) {
var t = this, n = this.clock.getChildByName("time").getComponent(cc.Label);
n.string = a.isNullOrEmpty(e) ? "15" : "" + e;
var i = a.isNullOrEmpty(e) ? 15 : parseInt(e);
n.unscheduleAllCallbacks();
this.clock.active = !0;
n.schedule(function() {
i--;
t.clock.getChildByName("time").getComponent(cc.Label).string = Math.max(i, 0);
}, 1);
},
hideClock: function() {
this.clock.getChildByName("time").getComponent(cc.Label).unscheduleAllCallbacks();
this.clock.active = !1;
},
activeNiao: function(e) {
if (!a.isNullOrEmpty(e.ready)) if (1 == e.ready) {
this.niaoNode.active = !0;
this.niaoNode.scale = 0;
var t = cc.fadeIn(.5), n = cc.scaleTo(.1, 3), i = cc.scaleTo(.3, .2), r = cc.scaleTo(.1, 1), o = cc.sequence(n, cc.delayTime(.3), i, r);
cc.spawn(t, o);
this.niaoNode.runAction(o);
} else this.niaoNode.active = !1;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"audio-ctrl": "audio-ctrl"
} ],
AdminHead08: [ function(e, t) {
"use strict";
cc._RF.push(t, "35753U/DtJDaKRx2N6IbYIf", "AdminHead08");
var n = e("../../../Main/Script/TableInfo"), i = (e("audio-ctrl"), e("Cache")), a = e("../../../Main/Script/utils"), r = e("../../../GameBase/GameConfig").GameConfig, o = (e("../../../Main/Script/DataBase"), 
[ cc.v2(48, 169), cc.v2(48, -119) ]), s = [ cc.v2(160, 55), cc.v2(160, 55) ];
cc.v2(-1.2, -38.6), cc.v2(105, 48), cc.v2(56, -40), cc.v2(56, 2.5), cc.v2(148, -30), 
cc.v2(148, -30), cc.v2(94, 49), cc.v2(-94, 49), cc.v2(94, 49);
cc.Class({
extends: cc.Component,
properties: {
nodePlayer: cc.Node,
lblName: cc.Label,
sprHead: cc.Sprite,
headCircle: cc.Node,
lblHuxi: cc.Label,
sprActive: cc.Sprite,
sprReady: [ cc.Sprite ],
lblscore: cc.Label,
sprOffline: cc.Sprite,
qi: cc.Node,
ground: cc.Node,
lblEmpty: cc.Label,
group: cc.Prefab,
card: cc.Prefab,
headMask: cc.Node,
imgBanker: cc.Node,
autoNode: cc.Node,
betStr: cc.Label,
clock: cc.Node,
niaoNode: cc.Node,
scoreNode: cc.Node,
maskBg: cc.Node,
huxiBgNode: cc.Node,
totalHuxi: cc.Node,
publishPage: cc.Prefab,
totalHuxiLabel: cc.Label
},
onLoad: function() {
this.node.active = !1;
this.lastTime = 0;
},
init: function(e) {
this.node.active = !0;
if (null != e) {
var t = n.realIdx[e.idx];
if (-1 != r.CurrentGameType.indexOf(r.GameType.LDZP)) {
this.totalHuxi.active = !0;
this.totalHuxiLabel.string = e.scores.turn;
}
this.realIdx = t;
this.idx = e.idx;
this.imgBanker.active = n.zhuang == this.idx;
this.realIdx = t;
this.qi.position = o[t];
if (0 == t) {
this.scoreNode.active = !0;
this.qi.getComponent(cc.Layout).verticalDirection = cc.Layout.VerticalDirection.BOTTOM_TO_TOP;
}
this.ground.position = s[t];
n.players[e.idx] = e;
this.showUserInfo(e);
this.sprOffline.node.active = e.offline;
this.lblHuxi.string = "0";
this.lblHuxi.value = 0;
if (-1 != r.CurrentGameType.indexOf(r.GameType.XHZP)) {
this.betStr.node.setPosition(47, 44);
this.headCircle.setPosition(-17, 48);
this.sprHead.node.parent.setPosition(-17, 48);
}
this.lblscore.string = "" + a.formatGold(e.wallet, 2);
this.sprReady[1 == t ? 1 : 0].node.active = e.ready;
this.niaoNode.active = 1 == e.ready;
this.lblEmpty.node.active = !1;
this.initGround(e.ground);
this.initQi(e.qi);
}
},
showUserInfo: function(e) {
var t = this;
this.lblName.string = a.getStringByLength(e.prop.name, 4);
this.scheduleOnce(function() {
a.setHead(t.sprHead, e.prop.head);
}, .5);
},
activeAutoPlay: function(e) {
this.autoNode.scale = 1;
this.autoNode.active = e;
},
showInfo: function() {
if (new Date().getTime() - this.lastTime < 2e3) i.alertTip("发言间隔需要2秒"); else {
var e = this.idx;
a.pop(r.pop.PlayerInfo, function(t) {
t.getComponent("ModulePlayerInfo").init(e);
});
}
},
reset: function(e) {
this.headMask.off("touchend");
var t = n.realIdx[e.idx];
this.lblName.string = "";
a.setHead(this.sprHead, "");
this.lblHuxi.string = "0";
this.lblHuxi.value = 0;
this.lblscore.string = "";
this.lblscore.value = 0;
this.sprReady[1 == t ? 1 : 0].node.active = !1;
this.sprOffline.node.active = !1;
n.players[e.idx] = null;
n.playerHead[e.idx] = null;
this.lblEmpty.node.active = !0;
this.niaoNode.active = !1;
this.node.active = !1;
},
showReady: function(e) {
var t = n.realIdx[e.idx];
this.sprReady[1 == t ? 1 : 0].node.active = !0;
if (!a.isNullOrEmpty(e.ready)) if (1 == e.ready) {
this.niaoNode.active = !0;
this.niaoNode.scale = 0;
var i = cc.fadeIn(.5), r = cc.scaleTo(.1, 3), o = cc.scaleTo(.3, .2), s = cc.scaleTo(.1, 1), c = cc.sequence(r, cc.delayTime(.3), o, s);
cc.spawn(i, c);
this.niaoNode.runAction(c);
} else this.niaoNode.active = !1;
},
hideReady: function() {
this.sprReady.forEach(function(e) {
e.node.active = !1;
});
},
active: function(e) {
var t = this.sprActive.node;
t.active = this.idx == e.idx;
t.stopAllActions();
t.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5), cc.fadeOut(1), cc.delayTime(.5), cc.fadeIn(1))));
},
refreshHuxi: function() {
var e = 0;
this.ground.content.forEach(function(t) {
"hu" == t.type && (t.xi = 0);
e += t.xi;
});
this.lblHuxi.value = e;
this.lblHuxi.string = "" + this.lblHuxi.value;
},
roundReset: function(e) {
void 0 === e && (e = 0);
this.imgBanker.active = this.idx == n.zhuang;
this.lblHuxi.string = "0";
this.lblHuxi.value = 0;
this.qi.content = [];
this.group.content = [];
0 == e && this.hideReady();
this.initGround(null);
this.initQi(null);
},
changeStatus: function(e) {
this.sprOffline.node.active = e.offline;
},
initGround: function(e) {
var t = this;
this.ground.removeAllChildren();
this.ground.length = 0;
this.ground.content = [];
a.isNullOrEmpty(e) || e.forEach(function(e) {
t.newGroup(e, !0);
});
},
initQi: function(e) {
var t = this;
this.qi.removeAllChildren();
this.qi.length = 0;
this.qi.content = [];
a.isNullOrEmpty(e) || e.forEach(function(e) {
t.newQi(e, !0);
});
},
newGroup: function(e, t) {
"wei" == e.type && n.zhao.push(e.card);
var i = [], a = cc.instantiate(this.group);
a.scale = .35;
a.parent = this.ground;
var r = {
x: 34 * this.ground.length - 76,
y: 20
}, o = cc.v2(r.x + 80, 20);
a.getComponent("BaseGroupZP").init(e, {
bg: !1,
click: !1
});
this.ground.content.push(a.getComponent("BaseGroupZP"));
if (t) a.position = cc.v2(r.x, 20); else {
a.position = o;
i.push(cc.targetedAction(a, cc.sequence(cc.place(o), cc.delayTime(.2), cc.moveTo(.2, r.x, r.y))));
}
this.ground.length++;
this.refreshHuxi();
return i;
},
resetGroupPos: function() {
for (var e = 0; e < this.ground.content.length; e++) this.ground.content[e].node.position = cc.v2(34 * e - 76, 20);
},
newQi: function(e, t) {
this.qi.content.push(e);
var n = cc.instantiate(this.card);
n.width = 34;
n.height = 38.85;
n.parent = this.qi;
n.getComponent("BaseCardZP").init(e);
n.active = t;
this.qi.length++;
return n;
},
showBet: function(e) {
this.betStr.node.active = !0;
this.betStr.string = e;
},
hideBet: function() {
this.betStr.node.active = !1;
},
showClock: function(e) {
var t = this, n = this.clock.getChildByName("time").getComponent(cc.Label);
n.string = a.isNullOrEmpty(e) ? "15" : "" + e;
var i = a.isNullOrEmpty(e) ? 15 : parseInt(e);
n.unscheduleAllCallbacks();
this.clock.active = !0;
n.schedule(function() {
i--;
t.clock.getChildByName("time").getComponent(cc.Label).string = Math.max(i, 0);
}, 1);
},
hideClock: function() {
this.clock.getChildByName("time").getComponent(cc.Label).unscheduleAllCallbacks();
this.clock.active = !1;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
Cache: "Cache",
"audio-ctrl": "audio-ctrl"
} ],
AdminHead09: [ function(e, t) {
"use strict";
cc._RF.push(t, "d5b58a6j5lND7e8iQJfynHF", "AdminHead09");
var n = e("TableInfo"), i = (e("DataBase"), e("audio-ctrl"), e("../../../Main/Script/utils")), a = e("../../../GameBase/GameConfig").GameConfig, r = e("../../../Main/Script/Cache");
cc.Class({
extends: cc.Component,
properties: {
sprHead: cc.Sprite,
nodeBln: cc.Node,
lblJifen: cc.Label,
lblXifen: cc.Label,
lblName: cc.Label,
lblScore: cc.Label,
scoreNode: cc.Node,
sprStatus: cc.Node,
lastTime: 0,
sprBZ: cc.Node,
readyNode: cc.Node,
autoIcon: cc.Node,
clock: cc.Node,
imgPass: cc.Node,
sprBaodan: cc.Node,
avatarMask: cc.Node,
avatarCircle: cc.Node,
rankSpr: cc.Sprite,
publishPage: cc.Prefab,
rankSfArr: [ cc.SpriteFrame ]
},
init: function(e, t) {
void 0 === t && (t = !1);
this.sprBaodan.active = !1;
this.imgPass.active = !1;
this.sprBZ.active = 1 == e.bao;
this.nodeBln.active = !1;
this.sprStatus.active = !!e.offline && e.offline;
a.IsLeague ? this.lblScore.string = t || e.idx == n.idx ? "" + i.formatGold(e.wallet, 2) : "" : this.lblScore.string = i.formatGold(e.wallet, 2);
this.lblJifen.string = "" + e.scores.base;
this.lblXifen.string = "" + e.scores.bomb;
this.showUserInfo(e, t);
switch (n.realIdx[e.idx]) {
case 0:
this.node.setPosition(-cc.winSize.width / 2 + this.node.width / 2 + a.FitScreen, -200);
this.scoreNode.active = !0;
this.sprBaodan.setPosition(110, -60);
break;

case 1:
this.node.setPosition(cc.winSize.width / 2 - this.node.width / 2 - a.FitScreen, 35);
this.imgPass.setPosition(-140, 38);
this.sprBaodan.setPosition(-110, -60);
break;

case 2:
this.node.setPosition(-168, 220);
this.imgPass.setPosition(197, -115);
this.sprBaodan.setPosition(110, -60);
break;

case 3:
this.node.setPosition(-cc.winSize.width / 2 + this.node.width / 2 + a.FitScreen, 35);
this.sprBaodan.setPosition(110, -60);
}
},
showUserInfo: function(e, t) {
var r = this;
if (n.idx == e.idx) {
this.lblName.string = i.getStringByLength(e.prop.name, 5);
this.scheduleOnce(function() {
i.setHead(r.sprHead, e.prop.head);
}, .5);
} else {
var o = t || !a.IsLeague ? e.prop.name : "玩家" + (e.idx + 1);
this.lblName.string = i.getStringByLength(o, 5);
if (!t && a.IsLeague) return;
var s = e.prop.head;
this.scheduleOnce(function() {
i.setHead(r.sprHead, s);
}, .5);
}
},
activeBln: function() {
this.nodeBln.active = !0;
this.nodeBln.stopAllActions();
this.nodeBln.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(1), cc.delayTime(.2), cc.fadeIn(1))));
},
showInfo: function(e) {
var t = new Date().getTime();
if (t - this.lastTime < 2e3) {
this.lastTime = t;
r.alertTip("发言间隔需要2秒");
} else {
var n = e.idx;
i.pop(a.pop.PlayerInfo, function(e) {
e.getComponent("ModulePlayerInfo").init(n);
});
}
},
activeReady: function(e) {
this.readyNode.active = e;
},
activeAuto: function(e) {
this.autoIcon.active = e;
},
showClock: function(e) {
var t = this, n = this.clock.getChildByName("time").getComponent(cc.Label);
n.string = i.isNullOrEmpty(e) ? "15" : "" + e;
var a = i.isNullOrEmpty(e) ? 15 : parseInt(e);
n.unscheduleAllCallbacks();
this.clock.active = !0;
n.schedule(function() {
a--;
t.clock.getChildByName("time").getComponent(cc.Label).string = Math.max(a, 0);
}, 1);
},
hideClock: function() {
this.clock.getChildByName("time").getComponent(cc.Label).unscheduleAllCallbacks();
this.clock.active = !1;
},
activeBaodan: function(e) {
this.sprBaodan.active = e;
},
activeRank: function() {
this.rankSpr.node.active = !1;
this.avatarCircle.runAction(cc.moveTo(.3, cc.v2(0, 62)));
this.avatarMask.runAction(cc.moveTo(.3, cc.v2(0, 62)));
},
finishAnim: function(e, t) {
void 0 === t && (t = !1);
this.rankSpr.spriteFrame = this.rankSfArr[e];
if (t) {
this.avatarCircle.runAction(cc.moveBy(.3, cc.v2(-19, 0)));
this.avatarMask.runAction(cc.moveBy(.3, cc.v2(-19, 0)));
this.rankSpr.node.position = cc.v2(44, 61);
this.rankSpr.node.active = !0;
} else {
var n = cc.find("Canvas").convertToWorldSpaceAR(cc.v2(0, 0)), i = this.node.convertToNodeSpaceAR(n);
this.rankSpr.node.position = i;
this.rankSpr.node.scale = 10;
this.rankSpr.node.active = !0;
cc.scaleTo(.3, 7);
var a = cc.scaleTo(.3, 3), o = cc.scaleTo(.3, 1);
r.playSound("addScore");
this.avatarCircle.runAction(cc.moveBy(.3, cc.v2(-19, 0)));
this.avatarMask.runAction(cc.moveBy(.3, cc.v2(-19, 0)));
this.rankSpr.node.runAction(cc.sequence(a, cc.delayTime(.3), cc.spawn(o, cc.moveTo(.3, cc.v2(44, 61)))));
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/utils": "utils",
DataBase: "DataBase",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
AdminHistoryPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "1f1c5Rg7WFHwKwvK9PTku39", "AdminHistoryPop");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("../../NetWork/Connector"), a = e("../../Script/Cache"), r = e("../../Script/utils");
cc.Class({
extends: e("../../Script/PopBase"),
properties: {
historyContainer: cc.Node,
historyItem: cc.Prefab,
lblPage: cc.Label,
pageContainer: cc.Node,
lblStartDate: cc.Label,
lblEndDate: cc.Label,
selectDate: cc.Prefab,
noData: cc.Node,
userId: 0,
gameType: "ALL",
startDate: null,
endDate: null,
page: 1,
totalPage: 0,
renderData: null
},
start: function() {},
initData: function(e) {
this.renderData = {
page: [],
rows: {}
};
this.userId = e;
this.gameType = "ALL";
var t = new Date(), n = t.getFullYear(), i = t.getMonth() + 1 >= 10 ? t.getMonth() + 1 : "0" + (t.getMonth() + 1), a = t.getDate() >= 10 ? t.getDate() : "0" + t.getDate();
this.startDate = "" + n + i + a;
this.endDate = "" + n + i + a;
this.lblEndDate.string = "截止日期: " + n + "年" + i + "月" + a + "日";
this.lblStartDate.string = "起始日期: " + n + "年" + i + "月" + a + "日";
this.downloadData(1);
},
downloadData: function(e) {
var t = this;
this.noData.active = !1;
if (-1 == this.renderData.page.indexOf(e)) i.request(n.ServerEventName.ProxyUserHistory, {
id: this.userId,
gameType: this.gameType,
startDate: this.startDate,
endDate: this.endDate,
page: e,
limit: 10
}, function(e) {
t.historyContainer.removeAllChildren();
if (e.logs && !r.isNullOrEmpty(e.logs.rows)) {
t.renderData.page.push(e.logs.page);
t.renderData.rows["" + e.logs.page] = e.logs.rows;
t.pageContainer.active = !0;
t.page = e.logs.page;
t.totalPage = Math.ceil(e.logs.count / 10);
t.lblPage.string = e.logs.page + "/" + Math.ceil(e.logs.count / 10);
t.historyContainer.removeAllChildren();
e.logs.rows.forEach(function(e) {
var n = cc.instantiate(t.historyItem);
n.getComponent("ModuleHistoryDetailItem").init(e);
t.historyContainer.addChild(n);
});
} else {
t.noData.active = !0;
t.pageContainer.active = !1;
}
}); else {
this.page = e;
this.historyContainer.removeAllChildren();
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.historyItem);
n.getComponent("ModuleHistoryDetailItem").init(e);
t.historyContainer.addChild(n);
});
}
},
selectGameType: function(e, t) {
this.gameType = t;
this.renderData = {
page: [],
rows: {}
};
this.downloadData(1);
},
addPage: function() {
a.playSfx();
if (this.page >= this.totalPage) a.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.downloadData(e);
}
},
reducePage: function() {
a.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.downloadData(e);
} else a.alertTip("已经是第一页");
},
openSelectDate: function(e, t) {
var n = this, i = cc.instantiate(this.selectDate);
this.node.addChild(i);
var a = i.getComponent("UIDatePicker");
a.setDate(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
a.setPickDateCallback(function(e, i, a) {
i = i + 1 > 9 ? i + 1 : "0" + (i + 1);
if (1 == t) {
n.startDate = "" + e + i + a;
n.lblStartDate.string = "起始日期: " + e + "年" + i + "月" + a + "日";
} else {
n.endDate = "" + e + i + a;
n.lblEndDate.string = "截止日期: " + e + "年" + i + "月" + a + "日";
}
console.log("" + e + i + a);
});
},
selectByDate: function() {
if (parseInt(this.startDate) > parseInt(this.endDate)) a.alertTip("截止日期不能早于起始日期"); else {
this.renderData = {
page: [],
rows: {}
};
this.downloadData(1);
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../NetWork/Connector": "Connector",
"../../Script/Cache": "Cache",
"../../Script/PopBase": "PopBase",
"../../Script/utils": "utils"
} ],
AdminManagerPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "8ca8biLNelIiYsC6VUde8cL", "AdminManagerPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T = e("../../../GameBase/GameConfig"), E = N(e("../../../Main/NetWork/Connector")), A = N(e("../../../Main/Script/Cache")), I = (N(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App"), N(e("../../common/GameUtils")));
function N(e) {
return e && e.__esModule ? e : {
default: e
};
}
function w(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function D(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function P(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
M(e, t);
}
function M(e, t) {
return (M = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function x(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var O = cc._decorator, G = O.ccclass, R = O.property, k = (i = R(cc.Node), a = R(cc.Node), 
r = R(cc.Prefab), o = R(cc.Node), s = R(cc.Node), c = R(cc.Prefab), l = R(cc.Node), 
u = R(cc.Label), d = R(cc.Label), G(h = (f = function(e) {
P(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
w(t = e.call.apply(e, [ this ].concat(i)) || this, "userContainer", p, D(t));
w(t, "userContent", m, D(t));
w(t, "userItem", g, D(t));
w(t, "clubContainer", v, D(t));
w(t, "clubContent", C, D(t));
w(t, "clubItem", b, D(t));
w(t, "pageContainer", y, D(t));
w(t, "lblTotalCount", S, D(t));
w(t, "lblPage", _, D(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.currentFun = null;
t.currentListType = "club";
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.onShowClub(1);
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.renderClub = function(e) {
var t = this;
this.clubContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) this.downloadClubList(e); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.clubItem);
n.getComponent("AdminClubItem").initData(e);
t.clubContent.addChild(n);
});
}
};
n.downloadClubList = function(e, t) {
var n = this;
void 0 === t && (t = null);
this.clubContent.removeAllChildren();
var i = t ? {
clubID: t,
page: e,
pageSize: 5
} : {
page: e,
pageSize: 5
};
E.default.request(T.GameConfig.ServerEventName.AdminClubList, i, function(t) {
if (!I.default.isNullOrEmpty(t.rows)) {
-1 == n.renderData.page.indexOf(e) && n.renderData.page.push(e);
n.renderData.rows["" + e] = [];
n.renderData.rows["" + e] = t.rows;
n.pageContainer.active = !0;
n.page = e;
n.totalPage = Math.ceil(t.count / 5);
n.lblPage.string = e + "/" + Math.ceil(t.count / 5);
n.lblTotalCount.string = "总数: " + t.count;
t.rows.forEach(function(e) {
var t = cc.instantiate(n.clubItem);
t.getComponent("AdminClubItem").initData(e);
n.clubContent.addChild(t);
});
}
});
};
n.renderUser = function(e) {
var t = this;
this.userContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) this.downloadUserList(e); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("AdminUserItem").initData(e);
t.userContent.addChild(n);
});
}
};
n.downloadUserList = function(e, t) {
var n = this;
void 0 === t && (t = null);
this.userContent.removeAllChildren();
var i = t ? {
userID: t,
page: e,
pageSize: 5
} : {
page: e,
pageSize: 5
};
E.default.request(T.GameConfig.ServerEventName.AdminUserList, i, function(t) {
if (!I.default.isNullOrEmpty(t.rows)) {
-1 == n.renderData.page.indexOf(e) && n.renderData.page.push(e);
n.renderData.rows["" + e] = [];
n.renderData.rows["" + e] = t.rows;
n.pageContainer.active = !0;
n.page = e;
n.totalPage = Math.ceil(t.count / 5);
n.lblPage.string = e + "/" + Math.ceil(t.count / 5);
n.lblTotalCount.string = "总人数: " + t.count;
t.rows.forEach(function(e) {
var t = cc.instantiate(n.userItem);
t.getComponent("AdminUserItem").initData(e);
n.userContent.addChild(t);
});
}
});
};
n.addPage = function() {
A.default.playSfx();
if (this.page >= this.totalPage) A.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.currentFun(e);
}
};
n.reducePage = function() {
A.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.currentFun(e);
} else A.default.alertTip("已经是第一页");
};
n.onShowClub = function() {
A.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.userContainer.active = !1;
this.clubContainer.active = !0;
this.renderClub(1);
this.currentListType = "club";
this.currentFun = this.renderClub;
};
n.onShowUser = function() {
A.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.userContainer.active = !0;
this.clubContainer.active = !1;
this.renderUser(1);
this.currentListType = "user";
this.currentFun = this.renderUser;
};
n.onSearch = function() {
var e = this;
A.default.playSfx();
A.default.showNumer("输入查询ID", T.GameConfig.NumberType.INT, function(t) {
e.onSearchRes(t);
});
};
n.onSearchRes = function(e) {
this.pageContainer.active = !1;
this.renderData = {
page: [],
rows: {}
};
"club" == this.currentListType ? this.downloadClubList(1, e) : this.downloadUserList(1, e);
};
n.createLeague = function() {
A.default.playSfx();
I.default.pop(T.GameConfig.pop.CreateClubPop, function(e) {
e.getComponent("CreateClubPop").renderLeague();
});
};
n.onClickClose = function() {
A.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), p = x(f.prototype, "userContainer", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = x(f.prototype, "userContent", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = x(f.prototype, "userItem", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = x(f.prototype, "clubContainer", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = x(f.prototype, "clubContent", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = x(f.prototype, "clubItem", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = x(f.prototype, "pageContainer", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = x(f.prototype, "lblTotalCount", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = x(f.prototype, "lblPage", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f)) || h);
n.default = k;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
AdminOtherPage: [ function(e, t) {
"use strict";
cc._RF.push(t, "d43ee82KbZOAqRBrYmpJVsI", "AdminOtherPage");
var n = e("../../NetWork/Connector"), i = e("../../Script/Cache"), a = e("../../Script/utils"), r = (e("../../GoEasy/GoEasy").GoEasy, 
e("../../../GameBase/GameConfig").GameConfig);
cc.Class({
extends: cc.Component,
properties: {
lblScore: cc.EditBox,
lblMailTitle: cc.EditBox,
lblMailContent: cc.EditBox,
lblPlayerID: cc.Label,
playerID: ""
},
start: function() {},
refreshUI: function(e) {
console.log("data----", e);
this.playerID = e.prop.pid;
this.lblPlayerID.string = "当前玩家ID :" + this.playerID;
},
onSendMail: function() {
i.playSfx();
if (a.isNullOrEmpty(this.lblMailTitle.string)) i.alertTip("请输入邮件标题"); else if (a.isNullOrEmpty(this.lblMailContent.string)) i.alertTip("请输入邮件内容"); else {
var e = this.lblMailTitle.string, t = this.lblMailContent.string, o = {
id: this.playerID,
content: t,
title: e
};
i.showConfirm("是否发送邮件", function() {
n.request(r.ServerEventName.ProxyMail, o, function() {
i.alertTip("发送成功");
});
});
}
},
addWellet: function() {
var e = this;
i.playSfx();
/^[0-9]*[1-9][0-9]*$/.test(this.lblScore.string) ? i.showConfirm("确认充值金额：" + this.lblScore.string, function() {
n.request(r.ServerEventName.ProxyAdminChange, {
id: parseInt(e.playerID),
wallet: 100 * parseFloat(e.lblScore.string)
}, function() {
i.alertTip("上分成功");
});
}) : i.alertTip("请输入整数金额");
},
reduceWellet: function() {
var e = this;
i.playSfx();
/^[0-9]*[1-9][0-9]*$/.test(this.lblScore.string) ? i.showConfirm("确认下分金额：" + this.lblScore.string, function() {
n.request(r.ServerEventName.ProxyAdminChange, {
id: parseInt(e.playerID),
wallet: 100 * parseFloat("-" + e.lblScore.string)
}, function() {
i.alertTip("下分成功");
});
}) : i.alertTip("请输入整数金额");
},
onFrozenUser: function(e, t) {
i.playSfx();
n.request(r.ServerEventName.ProxyBan, {
id: parseInt(this.playerID),
status: t
}, function() {
i.alertTip("normal" == t ? "解封成功" : "封号成功");
});
},
onClickClose: function() {
i.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../GoEasy/GoEasy": "GoEasy",
"../../NetWork/Connector": "Connector",
"../../Script/Cache": "Cache",
"../../Script/utils": "utils"
} ],
AdminPunishPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "8863aJDmeFONbsYkqbFiNIu", "AdminPunishPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d = e("../../../GameBase/GameConfig"), h = function(e) {
if (e && e.__esModule) return e;
if (null === e || "object" != typeof e && "function" != typeof e) return {
default: e
};
var t = g(void 0);
if (t && t.has(e)) return t.get(e);
var n = {}, i = Object.defineProperty && Object.getOwnPropertyDescriptor;
for (var a in e) if ("default" !== a && Object.prototype.hasOwnProperty.call(e, a)) {
var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a];
}
n.default = e;
t && t.set(e, n);
return n;
}(e("../../../Main/NetWork/Connector")), f = m(e("../../../Main/Script/Cache")), p = (m(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App"));
m(e("../../common/GameUtils"));
function m(e) {
return e && e.__esModule ? e : {
default: e
};
}
function g(e) {
if ("function" != typeof WeakMap) return null;
var t = new WeakMap(), n = new WeakMap();
return (g = function(e) {
return e ? n : t;
})(e);
}
function v(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function C(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function b(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
y(e, t);
}
function y(e, t) {
return (y = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function S(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var _ = cc._decorator, T = _.ccclass, E = _.property, A = (i = E(cc.Label), a = E(cc.Label), 
r = E(cc.Label), T(o = (s = function(e) {
b(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
v(t = e.call.apply(e, [ this ].concat(i)) || this, "lblAmount", c, C(t));
v(t, "lblName", l, C(t));
v(t, "lblID", u, C(t));
t.user = null;
t.reportData = null;
return t;
}
var n = t.prototype;
n.initData = function(e, t) {
this.user = e;
this.reportData = t;
this.lblID.string = "" + this.user.pid;
this.lblName.string = "" + this.user.name;
};
n.inputAmount = function() {
var e = this;
f.default.showNumer("请输入赔偿金额", d.GameConfig.NumberType.INT, function(t) {
e.lblAmount.string = "" + t;
});
};
n.onClickClose = function() {
f.default.playSfx();
this.node.removeFromParent();
this.node.destroy();
};
n.handleReport = function() {
var e = this;
h.default.request(d.GameConfig.ServerEventName.HandleReport, {
fileID: d.GameConfig.CurrentReplayData,
userID: this.user.pid,
reportID: this.reportData.id,
amount: 100 * parseInt(this.lblAmount.string),
clubID: p.App.Club.CurrentClubID
}, function() {
f.default.alertTip("补偿成功");
e.node.removeFromParent();
e.node.destroy();
});
};
return t;
}(cc.Component), c = S(s.prototype, "lblAmount", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = S(s.prototype, "lblName", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = S(s.prototype, "lblID", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = A;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
AdminReplay07: [ function(e, t) {
"use strict";
cc._RF.push(t, "e4d9avbVr1OVKg2mhXOhUJ1", "AdminReplay07");
var n = e("ROUTE"), i = e("DataBase"), a = e("Cache"), r = e("TableInfo"), o = e("audio-ctrl"), s = e("../../../GameBase/GameConfig").GameConfig, c = e("../../../Main/Script/utils"), l = (cc.v2(-500, -234), 
cc.v2(500, 122), cc.v2(-500, 122), {
ext: !0,
show: !0,
black: !0,
bird: !0,
rand: !0,
four: !0,
aaa: !0,
limit: !0,
person: 2,
clan: !0,
turn: 10
});
cc.v2(-522, -234), cc.v2(522, 122), cc.v2(-522, 122);
cc.Class({
extends: cc.Component,
properties: {
_delayTime: 0,
bgCount: [ cc.Layout ],
btnOperate: [ cc.Button ],
sprProgress: cc.Sprite,
lblSpeed: cc.Label,
lblRoomId: cc.Label,
lblTurn: cc.Label,
lblRule: cc.Label,
nodeRule: cc.Node,
exitBtn: cc.Node,
prePlayerInfo: cc.Prefab,
bgTable: cc.Node,
nodePlayerInfo: [],
imgPass: [ cc.Node ],
nodeHands: [ cc.Node ],
dropCards: [ cc.Node ],
prePlayCards: cc.Prefab,
hands: [],
preScore: cc.Prefab,
lblReDate: cc.Label,
preCoin: cc.Prefab,
summaryPrefab: cc.Prefab,
debug: !0
},
initData: function(e, t, n) {
console.log("--------------", e, t, n);
s.CurrentGameType = e;
this.replayID = t;
this.userID = n;
},
onLoad: function() {
this.hands = [ null, null, null, null ];
this._queueGameMsg = [];
this._queueGameMsg = a.replayData;
this.msgCount = this._queueGameMsg.length;
this.speed = 1;
this.node.on(s.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
this.btnOperate[1].node.active = !1;
this.schedule(this.gameMsgSchedule.bind(this), .2);
cc.director.getScheduler().setTimeScale(this.speed);
},
resume: function() {
cc.director.getScheduler().resumeTarget(this);
this.btnOperate[0].node.active = !0;
this.btnOperate[1].node.active = !1;
},
pause: function() {
cc.director.getScheduler().pauseTarget(this);
this.btnOperate[0].node.active = !1;
this.btnOperate[1].node.active = !0;
},
quit: function() {
this.node.off(s.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
a.replayData = [];
cc.director.getScheduler().setTimeScale(1);
cc.director.getScheduler().unscheduleAllForTarget(this);
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
playSpeed: function(e, t) {
var n = parseInt(t);
this.speed = 1 == n ? this.speed - .2 : this.speed + .2;
this.speed > 1.6 && (this.speed = 1.6);
this.speed < .4 && (this.speed = .4);
this.lblSpeed.string = "当前速度: x" + this.speed.toFixed(1);
cc.director.getScheduler().setTimeScale(this.speed);
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else {
this.sprProgress.fillRange = 1 - this._queueGameMsg.length / this.msgCount;
if (!(this._queueGameMsg.length <= 0)) {
var e = this._queueGameMsg.shift();
this.node.getComponent("BgTableAudioCtr07");
switch (e.route) {
case n.SC_RECORD:
this.initTable(e.data);
break;

case n.SC_PLAY_CARD:
this.showBln(e.data.idx);
break;

case n.SC_SHOW_CARD:
this.showPlayCards(e.data);
break;

case n.SC_PASS_CARD:
this.showPass(e.data);
break;

case n.SC_SCORE:
this.scoreFly(e.data);
break;

case n.SC_ROUND_SUMMARY:
this.roundSummary(e.data);
}
}
}
},
roundSummary: function(e) {
var t = this;
r.zhuang = null;
e.winner == r.idx ? this.playManageAudio("audio_win.mp3") : this.playManageAudio("audio_lose.mp3");
this.node.runAction(cc.sequence(cc.delayTime(1.5), cc.callFunc(function() {
var n = cc.instantiate(t.summaryPrefab);
t.node.addChild(n, 2, "roundSummary");
n.getComponent("ModuleSummary07").initData(e, !0);
t.exitBtn.zIndex = 999;
e.players.forEach(function(e) {
t.nodePlayerInfo[r.realIdx[e.idx]].getComponent("AdminHead07").activeBaodan(!1);
t.nodePlayerInfo[r.realIdx[e.idx]].getComponent("AdminHead07").lblZongjifen.string = c.formatGold(e.wallet, 2);
t.nodePlayerInfo[r.realIdx[e.idx]].getComponent("AdminHead07").hideClock();
var n = cc.instantiate(t.prePlayCards);
n.scale = 1;
n.parent = t.dropCards[r.realIdx[e.idx]].node;
var i = JSON.parse(JSON.stringify(e.hands));
n.getComponent("LayoutShowCards07").initRemainCard(i);
});
})));
},
showPlayCards: function(e) {
var t = this, n = r.realIdx[e.idx];
r.current = null;
r.current = e;
this._delayTime = 4;
var i = cc.url.raw("resources/Audio/Common/playCard.mp3");
o.getInstance().playSFX(i);
this.dropCards.forEach(function(e, n) {
e.destroyAllChildren();
t.imgPass[n].active = !1;
});
this.nodePlayerInfo[n].getComponent("AdminHead07").activeAutoPlay(e.auto);
var a = cc.instantiate(this.prePlayCards);
0 == n && (a.scale = 1);
a.parent = this.dropCards[n];
a.getComponent("LayoutShowCards07").init(e);
this.bgTable.getComponent("BgTableAudioCtr07").playVoice(e, r.players[e.idx].prop.sex);
this.removeHands(e);
},
removeHands: function(e) {
var t = this, n = r.realIdx[e.idx];
e.cards.forEach(function(e) {
for (var i = 0; i < t.hands[n].length; i++) {
var a = t.hands[n].findIndex(function(t) {
return e == t;
});
if (a >= 0) {
t.hands[n].splice(a, 1);
return;
}
}
});
this.nodeHands[n].getComponent("ReHands07").refreshHandCards(this.hands[n], !0);
},
showPass: function(e) {
this._delayTime = 3;
this.bgTable.getComponent("BgTableAudioCtr07").PassVoice(1);
var t = this.imgPass[r.realIdx[e.idx]];
t.active = !0;
t.scale = 0;
t.runAction(cc.scaleTo(.2, 1));
},
showBln: function(e) {
this.nodePlayerInfo.forEach(function(e) {
return e.getComponent("AdminHead07").nodeBln.active = !1;
});
this.nodePlayerInfo[r.realIdx[e]].getComponent("AdminHead07").activeBln(!0);
},
initRealIdx: function(e) {
var t = null;
e.players.forEach(function(e) {
e.prop.pid == i.player.id && (t = e.idx);
});
null == t && (t = e.players[0].idx);
r.idx = t;
var n = [ 0, 0, 0 ];
n[t] = 0;
n[(t + 1) % 3] = 1;
2 == r.config.person ? n[(t + 2) % 3] = 1 : n[(t + 2) % 3] = 2;
r.realIdx = n;
},
initTable: function(e) {
e.turn = e.turn ? e.turn : 0;
r.idx = e.idx;
r.config = l;
r.tid = e.tid;
r.current = e.current;
r.zhuang = e.zhuang;
this.lblReDate.string = a.replayTime ? "当时日期：" + a.replayTime : "";
this.lblRoomId.string = e.tid + "";
this.setTurn(e);
this.initRealIdx(e);
this.initPlayers(e);
},
playSE: function() {},
initPlayers: function(e) {
var t = this;
this.nodePlayerInfo = new Array(3);
r.players = new Array(3);
r.playerHead = new Array(3);
var n = this;
r.players = e.players;
e.players.forEach(function(i, a) {
if (null != i) {
var o = cc.instantiate(t.prePlayerInfo);
o.parent = t.bgTable;
o.on(cc.Node.EventType.TOUCH_END, function() {
c.pop(s.pop.AdminPunishPage, function(e) {
e.getComponent("AdminPunishPage").renderUI(n.replayID, n.userID);
});
}, t);
o.getComponent("AdminHead07").init(e.players[i.idx], a);
t.nodePlayerInfo[r.realIdx[i.idx]] = o;
t.initHands(i);
}
});
},
initHands: function(e) {
var t = r.realIdx[e.idx];
e.hands.sort(function(e, t) {
return e % 100 - t % 100;
});
this.hands[t] = e.hands;
this.hands[t].reverse();
this.nodeHands[t].getComponent("ReHands07").refreshHandCards(this.hands[t], !0);
},
showRule: function() {
this.nodeRule.active = !this.nodeRule.active;
},
setTurn: function(e) {
r.turn = e.turn;
this.lblTurn.string = e.turn + "局";
},
scoreFly: function(e) {
var t = this;
this.dropCards.forEach(function(e, n) {
e.removeAllChildren(!0);
t.bgCount[n].node.removeAllChildren(!0);
t.imgPass[n].active = !1;
});
e.from.length;
var n = cc.url.raw("resources/Audio/Common/addScore.mp3");
o.getInstance().playSFX(n);
r.realIdx[e.to[0].idx];
try {
this.nodePlayerInfo[r.realIdx[e.to[0].idx]].getComponent("AdminHead07").showBombScores(r.realIdx[e.to[0].idx], e.to[0].wallet, e.to[0].score, function() {});
e.from.forEach(function(e) {
t.nodePlayerInfo[r.realIdx[e.idx]].getComponent("AdminHead07").showBombScores(r.realIdx[e.idx], e.wallet, e.score);
});
} catch (e) {}
},
playManageAudio: function(e) {
var t = i.gameType < 10 ? "Game0" + i.gameType : "Game" + i.gameType;
if (cc.sys.isNative) {
var n = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + t + "/" + e;
cc.loader.load(n, function(e, t) {
o.getInstance().playSFX(t);
});
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/utils": "utils",
Cache: "Cache",
DataBase: "DataBase",
ROUTE: "ROUTE",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
AdminReplay08: [ function(e, t) {
"use strict";
cc._RF.push(t, "61d22B2IrdJ7asv53pM8LF6", "AdminReplay08");
var n = e("../../../Main/Script/ROUTE"), i = (e("../../../Main/Script/DataBase"), 
e("../../../Main/Script/Cache")), a = e("TableInfo"), r = (e("audio-ctrl"), e("../../Script/utils")), o = e("../../../GameBase/GameConfig").GameConfig, s = (cc.v2(-502, -150), 
cc.v2(502, 130), cc.v2(-502, 130), [ {
begin: cc.v2(-424, -168),
end: cc.v2(-1, 143)
}, {
begin: cc.v2(-446, 152),
end: cc.v2(-195, 132)
} ]), c = {
yhz: !0,
piao: !0,
person: 3,
clan: !0,
turn: 10
}, l = [ cc.v2(-10, 86), cc.v2(-310, 158) ], u = [ {
begin: cc.v2(0, 174),
end: cc.v2(0, 0)
}, {
begin: cc.v2(0, 174),
end: cc.v2(-468, 190)
} ], d = {
begin: cc.v2(0, 300),
end: cc.v2(0, 0)
};
cc.Class({
extends: cc.Component,
properties: {
_queueGameMsg: [],
player: cc.Prefab,
lblTurn: cc.Label,
lblDeck: cc.Label,
lblTid: cc.Label,
card: cc.Prefab,
layoutShowCard: cc.Layout,
show: cc.Prefab,
nodehands: [ cc.Layout ],
nodeQuestImg: cc.Label,
spriteFrameQuest: [ cc.SpriteFrame ],
btnOperate: [ cc.Node ],
preRoundSummary: cc.Prefab,
preGameSummary: cc.Prefab,
lblSpeed: cc.Label,
lblReplayTime: cc.Label,
imgProgress: cc.Sprite,
replayID: null,
userID: null
},
playManageAudio: function(t) {
if (cc.sys.isNative) {
var n = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/Game08/" + t;
cc.loader.load(n, function(t, n) {
e("audio-ctrl").getInstance().playSFX(n);
});
}
},
initData: function(e, t, n) {
o.CurrentGameType = e;
this.replayID = t;
this.userID = n;
},
onLoad: function() {
var e = this;
this._queueGameMsg = [];
this._queueGameMsg = i.replayData;
this.length = this._queueGameMsg.length;
this.layoutShowCard.node.zIndex = 20;
this.lblReplayTime.string = i.replayTime ? "当时日期：" + i.replayTime : "";
this.lblSpeed.string = "当前速度: x1";
a.zhao = [];
this.hands = [ null, null ];
this.nodehands.forEach(function(t, n) {
e.hands[n] = t.node.getComponent("BaseHandZP");
});
this.speed = 1;
a.playerHead = [ null, null ];
a.realIdx = [ null, null ];
a.players = [ null, null ];
this.players = [ null, null ];
for (var t = cc.find("Canvas"), n = [ cc.v2(69.5 - t.width / 2, -170), cc.v2(69.5 - t.width / 2, 220) ], s = this, c = 0; c < 2; c++) {
var l = cc.instantiate(this.player);
l.parent = this.node;
l.position = n[c];
l.zIndex = 1;
this.players[c] = l.getComponent("AdminHead08");
l.on(cc.Node.EventType.TOUCH_END, function() {
r.pop(o.pop.AdminPunishPage, function(e) {
e.getComponent("AdminPunishPage").renderUI(s.replayID, s.userID);
});
}, this);
}
this.node.on(o.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
this.node.on(o.GameEventNames.REPLAY_CONTINUE, this.onReplayNext, this);
this.node.on(o.GameEventNames.REPLAY_SHOW_GAME_SUMMARY, this.showGameSummary, this);
setTimeout(function() {
e.schedule(e.gameMsgSchedule, .1);
}, 500);
},
resume: function() {
cc.director.getScheduler().resumeTarget(this);
this.btnOperate[0].active = !0;
this.btnOperate[1].active = !1;
},
pause: function() {
cc.director.getScheduler().pauseTarget(this);
this.btnOperate[0].active = !1;
this.btnOperate[1].active = !0;
},
playSpeed: function(e, t) {
cc.director.getScheduler().isTargetPaused(this) && this.resume();
this.speed = "1" == t ? this.speed - .2 : this.speed + .2;
this.speed > 1.6 && (this.speed = 1.6);
this.speed < .4 && (this.speed = .4);
this.lblSpeed.string = "当前速度: x" + this.speed.toFixed(1);
cc.director.getScheduler().setTimeScale(this.speed);
},
quit: function() {
i.replayData = null;
this.node.off(o.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
cc.director.getScheduler().setTimeScale(1);
cc.director.getScheduler().unscheduleAllForTarget(this);
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
var e = cc.find("Canvas/gameSummary");
if (e) {
e.removeFromParent();
e.destroy();
}
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else if (!(this._queueGameMsg.length <= 0)) {
var e = this._queueGameMsg.shift();
this.imgProgress.fillRange = 1 - this._queueGameMsg.length / this.length;
cc.log(e);
switch (e.route) {
case "SC_RECORD":
this.record(e.data);
break;

case n.SC_SHOW_CARD:
this.showCard(e.data);
break;

case n.SC_PLAY_CARD:
this.playCard(e.data);
break;

case n.SC_PASS_CARD:
this.passCard(e.data);
break;

case n.SC_ACTION:
this.action(e.data);
break;

case n.SC_ROUND_SUMMARY:
-1 != o.CurrentGameType.indexOf(o.GameType.XHZP) ? this.roundSummary(e.data) : this.gameSummary(e.data);
break;

case n.SC_GAME_SUMMARY:
cc.director.getScheduler().unscheduleAllForTarget(this);
this.roundSummary(e.data);
break;

case n.SC_GET_CARD:
cc.log(e.data);
this.getCard(e.data);
break;

case n.SC_GAME_DRAW:
this.gameDraw();
break;

default:
cc.log(e.route);
}
}
},
record: function(e) {
var t = this, n = null;
e.players.forEach(function(e) {
0 == e.prop.pid && (n = e.idx);
});
null == n && (n = 0);
a.zhuang = e.zhuang;
a.idx = n;
this.realIdx = [ 0, 0, 0 ];
this.realIdx[n] = 0;
this.realIdx[(n + 1) % 3] = 1;
this.realIdx[(n + 2) % 3] = 2;
a.realIdx = this.realIdx;
this.lblDeck.string = "19";
this.lblTurn.string = e.turn + "局";
a.turn = e.turn;
a.tid = e.tid;
a.config = c;
this.lblTid.string = e.tid;
e.players.forEach(function(e) {
var n = a.realIdx[e.idx];
e.score ? e.scores = e.score : e.scores = [ 0, 0, 0, 0 ];
t.players[n].init(e, !0);
t.hands[n].init(e.hands, !0);
});
},
gameDraw: function() {
var e = this;
this._delayTime = 15;
this.nodeQuestImg.node.position = l[0];
this.nodeQuestImg.spriteFrame = this.spriteFrameQuest[6];
this.nodeQuestImg.node.active = !0;
this.nodeQuestImg.node.opacity = 255;
this.nodeQuestImg.node.scale = 2.5;
this.nodeQuestImg.node.runAction(cc.sequence(cc.callFunc(function() {
e.nodeQuestImg.node.opacity = 255;
}), cc.place(l[0]), cc.scaleTo(.3, 1), cc.delayTime(.5), cc.fadeOut(.3)));
},
playCard: function(e) {
a.currentPlayer = e.idx;
this.players.forEach(function(t) {
t.active(e);
});
},
getCard: function(e) {
var t, n = this, i = [], r = [];
this._delayTime = 6;
var o = a.realIdx[e.idx];
(t = cc.instantiate(this.show)).getComponent("BaseCardZP").init(e.card, !0);
t.parent = this.node;
t.position = u[0].begin;
var c = 0, l = [];
this.hands[o]._hands.forEach(function(t) {
t.length;
t.forEach(function(t) {
if (t._card == e.card) {
c++;
l.push(t);
}
});
});
var d = [], h = null;
if (2 == c) {
for (var f = 0; f < 3; f++) {
var p = cc.instantiate(this.card);
p.scale = .8;
p.parent = this.hands[o].node;
p.pao = !0;
p._pos = {
x: 0,
y: f
};
p._card = e.card;
p.active = !1;
p.getComponent("BaseCardZP").init(e.card, !1, !0);
d.push(p);
}
for (var m = function() {
var e = l.shift();
n.hands[o]._hands[e._pos.x].splice(e._pos.y, 1);
n.hands[o].sortHands();
r.push(cc.targetedAction(e, cc.callFunc(function() {
e.destroy();
})));
}; l.length > 0; ) m();
this.hands[o]._hands.splice(0, 0, d);
} else {
(h = cc.instantiate(this.card)).scale = .8;
h.parent = this.hands[o].node;
h.getComponent("BaseCardZP").init(e.card);
h._card = e.card;
h.pao = !1;
h.active = !1;
this.hands[o]._hands[12].splice(0, 0, h);
}
i.push(cc.targetedAction(t, cc.sequence(cc.delayTime(.3), cc.moveTo(.3, s[o].begin), cc.callFunc(function() {
t.destroy();
}))));
r.length > 0 && i.push(cc.spawn(r));
i.push(cc.callFunc(function() {
d.forEach(function(e) {
e.active = !0;
});
}));
i.push(cc.callFunc(function() {
n.hands[o].sortHands();
}));
null != h && i.push(cc.callFunc(function() {
h.active = !0;
}));
this.node.runAction(cc.sequence(i));
cc.log(this.hands[o]._hands[7]);
},
showCard: function(e) {
var t = a.realIdx[e.idx];
this.players.forEach(function(t) {
t.active(e);
});
this._delayTime = 4;
var n = "DECK" == e.src;
if ("PLAY" == e.src) {
this.hands[t].removeHands(e.card);
this.hands[t].sortHands();
a.currentPlayer = null;
}
this.players[t].activeAutoPlay(e.auto);
var i = a.players[e.idx].prop.sex, r = e.card + ".mp3";
this.playManageAudio(i + "_" + r);
a.currentCard = e.card;
this.layoutShowCard.node.stopAllActions();
this.layoutShowCard.node.removeAllChildren();
var o = cc.instantiate(this.show);
o.parent = this.layoutShowCard.node;
o.position = "DECK" == e.src ? d.begin : s[t].begin;
o.getComponent("BaseCardZP").init(e.card, !0, !1, n);
o.runAction(cc.spawn(cc.moveTo(.2, s[t].end), cc.scaleTo(.2, 1)));
this.currentCard = o;
null != e.deck && (this.lblDeck.string = "" + e.deck);
},
playAudio: function(e, t, n, i) {
var r = a.realIdx[e.idx], o = e.type, s = a.players[e.idx].prop.sex;
"pao" == o && "PLAY" == e.src && (o = "kaijiao");
t && (o = "pao");
n && (o = "fangjiao");
i && (o = "ti");
var c = 0;
this.players[r].ground.content.forEach(function(e) {
"pao" != e.type && "ti" != e.type || c++;
});
c > 1 && "pao" == e.type && (o = "chongpao");
(4 & e.hu) > 0 && (o = "zimo");
var l = o + ".mp3";
this.playManageAudio(s + "_" + l);
},
passCard: function(e) {
this._delayTime = 10;
var t = a.realIdx[e.idx], n = cc.instantiate(this.show);
n.getComponent("BaseCardZP").init(e.card, !0);
n.parent = this.node;
n.zIndex = 20;
n.position = s[t].end;
var i = this.players[t].newQi(e.card, !1), r = this.players[t].qi.position.add(i), o = this.players[t].nodePlayer.position.add(r);
this.layoutShowCard.node.removeAllChildren();
n.runAction(cc.sequence(cc.place(s[t].end), cc.delayTime(.5), cc.spawn(cc.moveTo(.4, o), cc.scaleTo(.4, .2)), cc.callFunc(function() {
i.active = !0;
}), cc.callFunc(function() {
n.destroy();
})));
},
action: function(e) {
var t = this;
this._delayTime = 5;
cc.log("action++++++++++++", e);
var n = a.realIdx[e.idx];
this.layoutShowCard.node.removeAllChildren();
this.nodeQuestImg.node.active = !0;
this.nodeQuestImg.node.opacity = 0;
switch (e.type) {
case "chi":
this.nodeQuestImg.string = "吃";
break;

case "peng":
this.nodeQuestImg.string = "碰";
break;

case "wei":
this.nodeQuestImg.string = "偎";
break;

case "ti":
this.nodeQuestImg.string = "提";
break;

case "pao":
this.nodeQuestImg.string = "跑";
break;

case "bi":
break;

case "hu":
this.nodeQuestImg.string = "胡";
break;

default:
cc.log(e.type);
}
switch (e.type) {
case "chi":
this.nodeQuestImg.string = "吃";
e.cards.forEach(function(e, i) {
0 != i && t.hands[n].removeHands(e);
});
break;

case "peng":
this.nodeQuestImg.string = "碰";
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
break;

case "wei":
this.nodeQuestImg.string = "偎";
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
break;

case "ti":
this.nodeQuestImg.string = "提";
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
break;

case "pao":
this.nodeQuestImg.string = "跑";
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
break;

case "bi":
e.cards.forEach(function(e) {
t.hands[n].removeHands(e);
});
break;

case "hu":
this._delayTime = 5;
this.nodeQuestImg.string = "胡";
break;

default:
cc.log(e.type);
}
this.hands[n].sortHands();
var i = [], r = !1, o = !1;
if ("pao" == e.type && "DECK" == e.src || "ti" == e.type && "GROUND" == e.src || "pao" == e.type && "GROUND" == e.src) {
cc.log("welcome to the 绝对领域");
this._delayTime = 2;
this.players[n].ground.content.forEach(function(i, a) {
cc.log("detail", i);
if (e.card == i.cardValue && ("peng" == i.type || "wei" == i.type)) {
i.remove();
r = "wei" == i.type && "GROUND" == e.src;
o = "ti" == e.type && "GROUND" == e.src;
t.players[n].ground.content.splice(a, 1);
t.players[n].ground.length--;
cc.log(t.players[n]);
t.players[n].resetGroupPos();
}
});
}
var s = this.players[n].newGroup(e, !1);
this.nodeQuestImg.node.scale = 2.5;
i.push(cc.targetedAction(this.nodeQuestImg.node, cc.sequence(cc.callFunc(function() {
t.nodeQuestImg.node.opacity = 255;
}), cc.place(l[n]), cc.scaleTo(.3, 1), cc.delayTime(.3), cc.fadeOut(.2))));
i.push(s[0]);
this.node.runAction(cc.spawn(i));
this.playAudio(e, !1, r, o);
},
refreshScore: function(e) {
this.players.forEach(function(t) {
t.idx == e.idx ? t.lblscore.value = t.lblscore.value + (e.card > 9 ? 4 : 2) : t.lblscore.value = t.lblscore.value - (e.card > 9 ? 2 : 1);
t.lblscore.string = "" + t.lblscore.value;
});
},
roundSummary: function(e) {
var t = this;
a.currentPlayer = null;
var n = cc.instantiate(this.preRoundSummary);
n.getComponent("ModuleRoundSummary08").init(e, !0);
n.parent = this.node;
this.nodeRoundSummary = n;
n.zIndex = 10;
e.players.forEach(function(n) {
var i = a.realIdx[n.idx];
-1 != o.CurrentGameType.indexOf(o.GameType.LDZP) && (t.players[i].totalHuxiLabel.string = e.finish ? "0" : "" + n.scores.turn);
});
},
gameSummary: function(e) {
var t = cc.instantiate(this.preGameSummary);
t.getComponent("ModuleGameSummary08").init(e, !0);
t.parent = cc.find("Canvas");
t.zIndex = 10;
},
showGameSummary: function() {},
onReplayNext: function() {
this.schedule(this.gameMsgSchedule, .1);
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/ROUTE": "ROUTE",
"../../Script/utils": "utils",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
AdminReplay09: [ function(e, t) {
"use strict";
cc._RF.push(t, "dfbb7ZkFMdGwpBffxaw6dYi", "AdminReplay09");
var n = e("ROUTE"), i = e("DataBase"), a = e("Cache"), r = e("TableInfo"), o = e("../../Script/utils"), s = e("audio-ctrl"), c = e("../../../GameBase/GameConfig").GameConfig;
cc.v2(-490, -294), cc.v2(526, 121), cc.v2(-61, 295), cc.v2(-492, 70);
cc.Class({
extends: cc.Component,
properties: {
_delayTime: 0,
lblCurrentScore: cc.Label,
bgCount: [ cc.Layout ],
btnOperate: [ cc.Button ],
sprProgress: cc.Sprite,
lblSpeed: cc.Label,
lblTurn: cc.Label,
lblRule: cc.Label,
nodeRule: cc.Node,
prePlayerInfo: cc.Prefab,
bgTable: cc.Node,
nodePlayerInfo: [],
imgPass: [ cc.Node ],
nodeHands: [ cc.Node ],
dropCards: [ cc.Node ],
prePlayCards: cc.Prefab,
hands: [],
preCoin: cc.Prefab,
preScore: cc.Prefab,
layerRemainCard: cc.Node,
nodeRemainCard: cc.Prefab,
lblReDate: cc.Label,
summaryPrefab: cc.Prefab,
replayID: null,
userID: null
},
initData: function(e, t, n) {
console.log("--------------", e, t, n);
c.CurrentGameType = e;
this.replayID = t;
this.userID = n;
},
onLoad: function() {
this.hands = [ null, null, null, null ];
this.addEvents();
this.initChat();
this.speed = 1;
this._queueGameMsg = [];
this._queueGameMsg = a.replayData;
this.msgCount = this._queueGameMsg.length;
this.btnOperate[1].node.active = !1;
cc.director.getScheduler().schedule(this.gameMsgSchedule, this, .2);
cc.director.getScheduler().setTimeScale(this.speed);
},
addEvents: function() {
this.node.on(c.GameEventNames.ZD_BACK_HALL, this.quit, this);
},
removeEvents: function() {
this.node.off(c.GameEventNames.ZD_BACK_HALL, this.quit, this);
},
resume: function() {
cc.director.getScheduler().resumeTarget(this);
this.btnOperate[0].node.active = !0;
this.btnOperate[1].node.active = !1;
},
pause: function() {
cc.director.getScheduler().pauseTarget(this);
this.btnOperate[0].node.active = !1;
this.btnOperate[1].node.active = !0;
},
quit: function() {
a.replayData = [];
cc.director.getScheduler().setTimeScale(1);
cc.director.getScheduler().unscheduleAllForTarget(this);
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
playSpeed: function(e, t) {
cc.director.getScheduler().isTargetPaused(this) && this.resume();
this.speed = 1 == t ? this.speed - .2 : this.speed + .2;
this.speed > 1.6 && (this.speed = 1.6);
this.speed < .4 && (this.speed = .4);
this.lblSpeed.string = "当前速度: x" + this.speed.toFixed(1);
cc.director.getScheduler().setTimeScale(this.speed);
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else {
this.sprProgress.fillRange = 1 - this._queueGameMsg.length / this.msgCount;
if (!(this._queueGameMsg.length <= 0)) {
var e = this._queueGameMsg.shift();
this.node.getComponent("ModuleAudioCtr_09");
switch (e.route) {
case n.SC_RECORD:
this.initTable(e.data);
break;

case n.SC_PLAY_CARD:
this.showBln(e.data.idx);
break;

case n.SC_SHOW_CARD:
this.showPlayCards(e.data);
break;

case n.SC_PASS_CARD:
this.showPass(e.data);
break;

case n.SC_ACTION:
this.addXi(e.data);
break;

case n.SC_SCORE:
this.scoreFly(e.data);
break;

case n.SC_FINISH:
var t = r.realIdx[e.data.idx];
e.data.idx == r.idx && (r.status = c.GameStatus.FINISH);
this.nodePlayerInfo[t].getComponent("AdminHead09").activeBaodan(!1);
this.nodePlayerInfo[t].getComponent("AdminHead09").finishAnim(e.data.finish);
r.players[t].finish = e.data.finish;
break;

case n.SC_ROUND_SUMMARY:
this.roundSummary(e.data);
break;

case n.SC_GAME_CHAT:
if (null != this.chat) {
this.chat.contentFly(e.data);
this._delayTime = 10;
}
}
}
}
},
roundSummary: function(e) {
var t = this;
this._delayTime = 10;
e.players.forEach(function(e) {
var n = t.nodePlayerInfo[r.realIdx[e.idx]].getComponent("AdminHead09");
n.lblJifen.string = "0";
n.lblXifen.string = "0";
});
var n = cc.instantiate(this.summaryPrefab);
this.node.addChild(n, 2, "roundSummary");
n.getComponent("ModuleSummary09").initData(e, !0);
r.bao = -1;
},
refreshTableScore: function(e) {
var t = this;
e.cards.forEach(function(e) {
var n = e % 100;
if (5 == n || 10 == n) {
t.lblCurrentScore.node.runAction(cc.sequence(cc.scaleTo(.3, 1.3), cc.scaleTo(.2, 1)));
t.lblCurrentScore.string = "" + (n + parseInt(t.lblCurrentScore.string));
}
if (13 == n) {
t.lblCurrentScore.node.runAction(cc.sequence(cc.scaleTo(.3, 1.3), cc.scaleTo(.2, 1)));
t.lblCurrentScore.string = "" + (10 + parseInt(t.lblCurrentScore.string));
}
});
},
showPlayCards: function(e) {
var t = this;
e.action && this.addXi(e.action);
var n = e.currentCard ? e.currentCard : e, i = r.realIdx[n.idx];
r.current = null;
r.current = n;
this._delayTime = 4;
this.refreshTableScore(n);
var a = cc.url.raw("resources/Audio/Common/playCard.mp3");
s.getInstance().playSFX(a);
this.dropCards.forEach(function(e, n) {
e.destroyAllChildren();
t.imgPass[n].active = !1;
});
var o = cc.instantiate(this.prePlayCards);
o.parent = this.dropCards[i];
o.getComponent("ModuleShowCards_09").init(n, !0);
this.nodePlayerInfo[i].getComponent("AdminHead09").activeAuto(n.auto);
this.bgTable.getComponent("ModuleAudioCtr_09").playVoice(n, r.players[n.idx].prop.sex);
this.removeHands(n);
},
removeHands: function(e) {
var t = this, n = r.realIdx[e.idx];
e.cards.forEach(function(e) {
for (var i = 0; i < t.hands[n].length; i++) {
var a = t.hands[n].findIndex(function(t) {
return e == t;
});
if (a >= 0) {
t.hands[n].splice(a, 1);
return;
}
}
});
this.nodeHands[n].getComponent("ModuleHands_09").refreshHandCards(this.hands[n], !0);
},
showPass: function(e) {
this.nodePlayerInfo[r.realIdx[e.idx]].getComponent("AdminHead09").activeAuto(e.auto);
this._delayTime = 3;
this.bgTable.getComponent("ModuleAudioCtr_09").PassVoice(this.nodePlayerInfo[r.realIdx[e.idx]].sex);
var t = this.imgPass[r.realIdx[e.idx]];
t.active = !0;
t.scale = 0;
t.runAction(cc.scaleTo(.2, 1));
},
showBln: function(e) {
this.nodePlayerInfo.forEach(function(e) {
return e.getComponent("AdminHead09").nodeBln.active = !1;
});
this.nodePlayerInfo[r.realIdx[e]].getComponent("AdminHead09").activeBln(!0);
},
initRealIdx: function(e) {
var t = null;
e.players.forEach(function(e) {
e.prop.pid == i.player.id && (t = e.idx);
});
null == t && (t = 0);
r.idx = t;
var n = [ 0, 0, 0, 0 ];
n[t] = 0;
n[(t + 1) % 4] = 1;
n[(t + 2) % 4] = 2;
n[(t + 3) % 4] = 3;
r.realIdx = n;
},
initTable: function(e) {
e.turn = e.turn ? e.turn : 0;
r.idx = e.idx;
r.config = e.config;
r.tid = e.tid;
r.current = e.current;
this.setTurn(e);
this.initRealIdx(e);
this.initPlayers(e);
e.players.forEach(function(e) {
1 == e.bao && (r.bao = e.idx);
});
},
initPlayers: function(e) {
var t = this;
this.nodePlayerInfo = new Array(4);
r.players = new Array(4);
r.playerHead = new Array(4);
r.players = e.players;
var n = this;
e.players.forEach(function(i, a) {
cc.log(i);
if (null != i) {
var s = cc.instantiate(t.prePlayerInfo);
s.parent = t.bgTable;
s.sex = e.players[a].prop.sex;
var l = s.getComponent("AdminHead09");
s.on(cc.Node.EventType.TOUCH_END, function() {
o.pop(c.pop.AdminPunishPage, function(e) {
e.getComponent("AdminPunishPage").renderUI(n.replayID, n.userID);
});
}, t);
l.init(e.players[i.idx], !0);
t.nodePlayerInfo[r.realIdx[i.idx]] = s;
t.initHands(i);
}
});
},
initHands: function(e) {
var t = r.realIdx[e.idx];
e.hands.sort(function(e, t) {
return e % 100 - t % 100;
});
this.hands[t] = e.hands;
this.hands[t].reverse();
this.nodeHands[t].getComponent("ModuleHands_09").refreshHandCards(this.hands[t], !0);
},
showRule: function() {
this.nodeRule.active = !this.nodeRule.active;
},
initRule: function(e) {
e.config;
var t = "";
t += r.config.turn + "局\n";
r.config.plus ? t += "喜分算加分\n" : t += "喜分算乘分\n";
r.config.shun && (t += "可打顺子\n");
r.config.bomb && (t += "三个炸弹算一个喜分");
this.lblRule.string = t;
},
addXi: function(e) {
var t = this, n = e.from.length, i = cc.url.raw("resources/Audio/Common/addScore.mp3");
s.getInstance().playSFX(i);
var a = [ cc.v2(-cc.winSize.width / 2 + 69.5 + c.FitScreen, -272), cc.v2(cc.winSize.width / 2 - 69.5 - c.FitScreen, -37), cc.v2(-168, 148), cc.v2(-cc.winSize.width / 2 + 69.5 + c.FitScreen, -37) ], o = [], l = [], u = [], d = a[r.realIdx[e.to[0].idx]], h = 5 * e.to[0].score;
try {
o.push(cc.delayTime(.1));
for (var f = 0; f < h; f++) {
var p = cc.instantiate(this.preCoin);
p.parent = this.node;
p.setPosition(a[r.realIdx[e.from[f % n].idx]]);
var m = cc.v2(100 * Math.random() - 50, 100 * Math.random() - 50);
o.push(cc.targetedAction(p, cc.sequence(cc.delayTime(.5 * Math.random()), cc.spawn(cc.moveBy(.3, m), cc.scaleTo(.1, .7)), cc.moveTo(.3, d), cc.callFunc(function() {
this.destroy();
}, p))));
}
l.push(cc.spawn(o));
var g = cc.instantiate(this.preScore);
g.getComponent(cc.Label).string = "+" + e.to[0].score;
g.parent = this.node;
g.opacity = 0;
g.scale = .2;
g.position = d;
var v = this.nodePlayerInfo[r.realIdx[e.to[0].idx]].getComponent("AdminHead09");
e.from.forEach(function(e) {
var n = t.nodePlayerInfo[r.realIdx[e.idx]].getComponent("AdminHead09");
u.push(n);
});
l.push(cc.targetedAction(g, cc.sequence(cc.spawn(cc.scaleTo(.2, 1.2), cc.fadeIn(.2)), cc.scaleTo(.1, 1), cc.delayTime(.1), cc.callFunc(function() {
try {
v.lblXifen.string = "" + e.to[0].bomb;
e.from.forEach(function(e, t) {
u[t].lblXifen.string = "" + e.bomb;
});
} catch (e) {}
}), cc.spawn(cc.moveBy(.4, 0, 40), cc.fadeOut(.4)), cc.callFunc(function() {
this.destroy();
}, g))));
} catch (e) {}
try {
this.node.runAction(cc.sequence(l));
} catch (e) {}
},
scoreFly: function(e) {
var t = this;
e.action && this.addXi(e.action);
r.current = null;
this.dropCards.forEach(function(e, n) {
e.removeAllChildren(!0);
t.bgCount[n].node.removeAllChildren(!0);
t.imgPass[n].active = !1;
});
if ("0" != this.lblCurrentScore.string) {
var n = cc.url.raw("resources/Audio/Common/addScore.mp3");
s.getInstance().playSFX(n);
this.lblCurrentScore.string = "0";
e.scores.forEach(function(e, n) {
t.nodePlayerInfo[r.realIdx[n]].getComponent("AdminHead09").lblJifen.string = "" + e.base;
r.players[r.realIdx[n]].scores = e;
});
}
},
initChat: function() {
var e = this;
cc.loader.loadRes("GameBase/preChat", function(t, n) {
if (t) e.initChat(); else {
e.chat = cc.instantiate(n).getComponent("ModuleChat");
var i = {
str: [ "哎呀头都被你们炸晕了", "赢了钱请大家去满天红吃火锅", "不要走决战到天亮", "对家的牌还不错", "跟你们打牌真是太开心了", "手气不好 建议你去趟台湾岛", "在哪个山沟沟里,信号这么差", "快点呀,头发都等白了", "跟你合作真是太愉快了" ],
url: "ChatImg/Game09",
aniPos: [ cc.v2(-cc.winSize.width / 2 + 69.5 + c.FitScreen, -210), cc.v2(cc.winSize.width / 2 - 69.5 - c.FitScreen, 65), cc.v2(-168, 250), cc.v2(-cc.winSize.width / 2 + 69.5 + c.FitScreen, 65) ],
msgPos: [ cc.v2(-cc.winSize.width / 2 + 69.5 + c.FitScreen + 50, -180), cc.v2(cc.winSize.width / 2 - 69.5 - c.FitScreen - 50, 95), cc.v2(-118, 280), cc.v2(-cc.winSize.width / 2 + 69.5 + c.FitScreen + 50, 95) ],
facePos: [ cc.v2(-cc.winSize.width / 2 + 69.5 + c.FitScreen + 139, -196), cc.v2(cc.winSize.width / 2 - 69.5 - c.FitScreen - 139, 79), cc.v2(-29, 264), cc.v2(-cc.winSize.width / 2 + 69.5 + c.FitScreen + 139, 79) ]
};
e.chat.init(i);
}
});
},
setTurn: function(e) {
r.turn = e.turn;
this.lblTurn.string = e.turn + " 局";
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../Script/utils": void 0,
Cache: "Cache",
DataBase: "DataBase",
ROUTE: "ROUTE",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
AdminTradeInfo: [ function(e, t) {
"use strict";
cc._RF.push(t, "9eabatTatpIDZ2gio72Oxd7", "AdminTradeInfo");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("../../NetWork/Connector"), a = e("../../Script/Cache"), r = e("../../Script/utils"), o = {
wait: {
desc: "等待付款",
color: "#43AFFF"
},
process: {
desc: "等待放行",
color: "#43AFFF"
},
trans: {
desc: "到账中",
color: "#43AFFF"
},
done: {
desc: "已完成",
color: "#00d900"
},
judge: {
desc: "申诉",
color: "#ff2d2d"
},
cancel: {
desc: "取消",
color: "#a6afb2"
},
release: {
desc: "协议取消",
color: "#ff2d2d"
},
confirm: {
desc: "协议放行",
color: "#ff2d2d"
},
service: {
desc: "客服介入",
color: "#ff2d2d"
}
};
cc.Class({
extends: e("../../Script/PopBase"),
properties: {
lblSellerID: cc.Label,
lblSellerDone: cc.Label,
lblSellerService: cc.Label,
lblSellerSin: cc.Label,
lblSellerPhone: cc.Label,
lblSellerName: cc.Label,
lblBuyerID: cc.Label,
lblBuyerCancel: cc.Label,
lblBuyerDone: cc.Label,
lblBuyerGoing: cc.Label,
lblBuyerService: cc.Label,
lblBuyerSin: cc.Label,
lblBuyerPhone: cc.Label,
lblBuyerName: cc.Label,
lblTradeID: cc.Label,
lblAccount: cc.Label,
lblAmount: cc.Label,
lblCreatedAt: cc.Label,
lblUpdateAt: cc.Label,
lblHistory: cc.Label,
lblSuperSeller: cc.Label,
lblPayType: cc.Label,
receiptSpr: cc.Sprite,
bgSpr: cc.Node,
remarks: cc.EditBox,
tradeID: null,
sellerId: null,
buyerId: null,
receiptUrl: null
},
start: function() {},
downloadTrades: function(e) {
var t = this;
this.lblTradeID.string = e;
this.tradeID = e;
i.request(n.ServerEventName.OTCAdminTradeDetail, {
tradeID: e
}, function(e) {
if (!r.isNullOrEmpty(e.sellerInfo)) {
t.sellerId = e.sellerInfo.user.id;
t.lblSellerID.string = "" + e.sellerInfo.user.id;
t.lblSellerName.string = "" + e.sellerInfo.user.name;
t.lblSellerPhone.string = "" + e.sellerInfo.user.phone;
t.lblSellerDone.string = "" + e.sellerInfo.doneCount;
t.lblSellerService.string = "" + e.sellerInfo.serviceCount;
t.lblSellerSin.string = "" + e.sellerInfo.sinCount;
}
if (!r.isNullOrEmpty(e.buyerInfo)) {
t.buyerId = e.buyerInfo.user.id;
t.lblBuyerID.string = "" + e.buyerInfo.user.id;
t.lblBuyerName.string = "" + e.buyerInfo.user.name;
t.lblBuyerPhone.string = "" + e.buyerInfo.user.phone;
t.lblBuyerDone.string = "" + e.buyerInfo.doneCount;
t.lblBuyerService.string = "" + e.buyerInfo.serviceCount;
t.lblBuyerSin.string = "" + e.buyerInfo.sinCount;
t.lblBuyerCancel.string = "" + e.buyerInfo.cancelCount;
t.lblBuyerGoing.string = "" + e.buyerInfo.goingCount;
}
if (!r.isNullOrEmpty(e.trade)) {
t.lblAmount.string = e.trade.amount / 100 + "元";
t.lblCreatedAt.string = "" + new Date(e.trade.createdAt).format("yyyy-MM-dd hh:mm:ss");
t.lblUpdateAt.string = "" + new Date(e.trade.updatedAt).format("yyyy-MM-dd hh:mm:ss");
var i = "";
e.trade.history.forEach(function(e) {
i = i + o[e].desc + "=>";
});
t.lblHistory.string = i;
t.lblSuperSeller.string = e.trade.isSuperSeller ? "是" : "不是";
t.lblPayType.string = "" + e.trade.payType;
t.receiptUrl = e.trade.receipt;
if (!r.isNullOrEmpty(e.trade.receipt)) {
r.setHead(t.receiptSpr, n.GameInfo.resourceURL + e.trade.receipt);
if (t.receiptSpr.node.height > 545) {
var a = 545 * t.receiptSpr.node.width / t.receiptSpr.node.height;
t.receiptSpr.node.width = a;
t.receiptSpr.node.height = 545;
}
}
}
});
},
onJudgeTrade: function(e, t) {
if (r.isNullOrEmpty(this.remarks.string)) a.alertTip("请输入判决理由"); else {
var o = {
tradeID: this.tradeID,
sinnerID: "cancel" == t ? this.buyerId : this.sellerId,
remarks: this.remarks.string,
decide: t
};
i.request(n.ServerEventName.OTCAdminTradeJudge, o, function() {
a.alertTip("cancel" == t ? "取消成功" : "放行成功");
});
}
},
hideSpr: function() {
this.bgSpr.active = !1;
},
showSpr: function() {
r.isNullOrEmpty(this.receiptUrl) ? a.alertTip("买家未上传付款凭证") : this.bgSpr.active = !0;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../NetWork/Connector": "Connector",
"../../Script/Cache": "Cache",
"../../Script/PopBase": "PopBase",
"../../Script/utils": "utils"
} ],
AdminTradeItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "68ac5iOP8xI9L7+na2S4TUw", "AdminTradeItem");
var n = e("../../Script/Cache"), i = e("../../Script/utils"), a = {
wait: {
desc: "待付款",
color: "#43AFFF"
},
process: {
desc: "待放行",
color: "#43AFFF"
},
trans: {
desc: "到账中",
color: "#43AFFF"
},
done: {
desc: "已完成",
color: "#00d900"
},
judge: {
desc: "申诉中",
color: "#ff2d2d"
},
cancel: {
desc: "已取消",
color: "#a6afb2"
},
release: {
desc: "协议取消",
color: "#ff2d2d"
},
confirm: {
desc: "协议放行",
color: "#ff2d2d"
},
service: {
desc: "客服介入",
color: "#ff2d2d"
}
};
cc.Class({
extends: cc.Component,
properties: {
createTime: cc.Label,
amount: cc.Label,
statusLbl: cc.Label,
lblSellerID: cc.Label,
lblBuyerID: cc.Label,
cancelBtn: cc.Node,
payTypeContainer: cc.Node,
tradeDetail: cc.Prefab
},
initData: function(e) {
var t = this;
this.lblSellerID.string = "卖家ID:" + e.sellerID;
this.lblBuyerID.string = "买家ID:" + e.buyerID;
this.payTypeContainer.getChildByName("" + e.payType).active = !0;
this.statusLbl.node.color = new cc.color(a[e.status].color);
this.statusLbl.string = a[e.status].desc;
this.amount.string = "当前交易金额: " + e.amount / 100;
this.createTime.string = "交易时间: " + i.timestampToTime(new Date(e.createdAt).getTime());
this.node.on(cc.Node.EventType.TOUCH_END, function() {
n.playSfx();
var i = cc.instantiate(t.tradeDetail);
i.getComponent("AdminTradeInfo").downloadTrades(e.id);
cc.find("Canvas").addChild(i);
}, this);
}
});
cc._RF.pop();
}, {
"../../Script/Cache": "Cache",
"../../Script/utils": "utils"
} ],
AdminTradePage: [ function(e, t) {
"use strict";
cc._RF.push(t, "149970pO7tAGqbIYQKON5jy", "AdminTradePage");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("../../NetWork/Connector"), a = e("../../Script/utils");
cc.Class({
extends: e("../../Script/PopBase"),
properties: {
buyerInput: cc.EditBox,
sellerInput: cc.EditBox,
tradeItem: cc.Prefab,
tradeContainer: cc.Node
},
start: function() {
this.searchTrade();
},
searchTrade: function() {
var e = this, t = {
status: "service"
};
a.isNullOrEmpty(this.buyerInput.string) || (t.buyerID = this.buyerInput.string);
a.isNullOrEmpty(this.sellerInput.string) || (t.sellerID = this.sellerInput.string);
this.tradeContainer.removeAllChildren();
i.request(n.ServerEventName.OTCAdminTradeList, {
condition: t
}, function(t) {
a.isNullOrEmpty(t.trades) || t.trades.forEach(function(t) {
var n = cc.instantiate(e.tradeItem);
n.getComponent("AdminTradeItem").initData(t);
e.tradeContainer.addChild(n);
});
});
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../NetWork/Connector": "Connector",
"../../Script/PopBase": "PopBase",
"../../Script/utils": "utils"
} ],
AdminUserItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "dd3fc/FjotFX5bZNJMlberB", "AdminUserItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m = e("../../../GameBase/GameConfig"), g = y(e("../../../Main/NetWork/Connector")), v = y(e("../../../Main/Script/Cache")), C = (y(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App"), y(e("../../common/GameUtils"))), b = y(e("../common/Avatar"));
function y(e) {
return e && e.__esModule ? e : {
default: e
};
}
function S(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function _(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function T(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
E(e, t);
}
function E(e, t) {
return (E = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function A(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var I = cc._decorator, N = I.ccclass, w = I.property, D = (i = w(b.default), a = w(cc.Label), 
r = w(cc.Label), o = w(cc.Label), s = w(cc.Label), N(c = (l = function(e) {
T(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
S(t = e.call.apply(e, [ this ].concat(i)) || this, "avatar", u, _(t));
S(t, "lblName", d, _(t));
S(t, "lblId", h, _(t));
S(t, "lblCard", f, _(t));
S(t, "lblDiamond", p, _(t));
t.userData = null;
return t;
}
var n = t.prototype;
n.addEvents = function() {};
n.removeEvents = function() {};
n.updateScore = function() {};
n.initData = function(e) {
this.userData = e;
this.avatar.avatarUrl = e.head;
this.lblName.string = "" + e.name;
this.lblId.string = "" + e.id;
this.lblCard.string = "" + e.card;
this.lblDiamond.string = "" + e.diamond;
};
n.onClickDetail = function() {
var e = this;
v.default.playSfx();
C.default.pop(m.GameConfig.pop.AdminDetailPop, function(t) {
t.getComponent("AdminDetailPop").renderUser(e.userData);
});
};
n.onAddCard = function() {
var e = this;
v.default.playSfx();
v.default.showNumer("请输入充值房卡数", m.GameConfig.NumberType.INT, function(t) {
g.default.request(m.GameConfig.ServerEventName.AdminWallet, {
userID: e.userData.id,
card: t,
add: !0
}, function() {
v.default.alertTip("充值成功");
e.lblCard.string = "" + (e.userData.card + t);
}, !0, function(e) {
v.default.alertTip(e.message || "调配失败");
});
});
};
n.onReduceCard = function() {
var e = this;
v.default.playSfx();
v.default.showNumer("请输入减少房卡数", m.GameConfig.NumberType.INT, function(t) {
g.default.request(m.GameConfig.ServerEventName.AdminWallet, {
userID: e.userData.id,
card: t,
add: !1
}, function() {
v.default.alertTip("操作成功");
e.lblCard.string = "" + (e.userData.card - t);
}, !0, function(e) {
v.default.alertTip(e.message || "调配失败");
});
});
};
n.onAddDiamond = function() {
var e = this;
v.default.playSfx();
v.default.showNumer("请输入充值钻石数", m.GameConfig.NumberType.INT, function(t) {
g.default.request(m.GameConfig.ServerEventName.AdminWallet, {
userID: e.userData.id,
diamond: t,
add: !0
}, function() {
v.default.alertTip("充值成功");
e.lblDiamond.string = "" + (e.userData.diamond + t);
}, !0, function(e) {
v.default.alertTip(e.message || "调配失败");
});
});
};
n.onReduceDiamond = function() {
var e = this;
v.default.playSfx();
v.default.showNumer("请输入减少钻石数", m.GameConfig.NumberType.INT, function(t) {
g.default.request(m.GameConfig.ServerEventName.AdminWallet, {
userID: e.userData.id,
diamond: t,
add: !1
}, function() {
v.default.alertTip("操作成功");
e.lblDiamond.string = "" + (e.userData.diamond - t);
}, !0, function(e) {
v.default.alertTip(e.message || "调配失败");
});
});
};
n.onDestroy = function() {
this.removeEvents();
};
return t;
}(cc.Component), u = A(l.prototype, "avatar", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = A(l.prototype, "lblName", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = A(l.prototype, "lblId", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = A(l.prototype, "lblCard", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = A(l.prototype, "lblDiamond", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l)) || c);
n.default = D;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
App: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "2d537vcQIdFUbZWjwc/OwDK", "App");
n.__esModule = !0;
n.App = void 0;
var i = e("../../../base/pop/PopQueue"), a = e("../ClubManager"), r = e("./EventManager"), o = e("./Proxy"), s = e("./PushManager");
function c(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function l(e, t, n) {
t && c(e.prototype, t);
n && c(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var u = function() {
function e() {}
var t = e.prototype;
t.lockScene = function() {
var e = cc.director.getScene();
if (d._lockSceneNode && d._lockSceneNode.getParent()) {
if (d._lockSceneNode.getParent() == e) return;
d._lockSceneNode.destroy();
d._lockSceneNode = null;
}
var t = cc.winSize, n = new cc.Node();
n.width = t.width;
n.height = t.height;
n.x = t.width / 2;
n.y = t.height / 2;
n.addComponent(cc.BlockInputEvents);
d._lockSceneNode = n;
e.addChild(d._lockSceneNode);
};
t.unlockScene = function() {
if (d._lockSceneNode && d._lockSceneNode.getParent()) {
d._lockSceneNode.destroy();
d._lockSceneNode = null;
}
};
l(e, [ {
key: "Proxy",
get: function() {
return o.Proxy.getInstance();
}
}, {
key: "Club",
get: function() {
return a.ClubManager.getInstance();
}
}, {
key: "PopQueue",
get: function() {
return i.PopQueue.getInstance();
}
}, {
key: "PushManager",
get: function() {
return s.PushManager.getInstance();
}
}, {
key: "EventManager",
get: function() {
return r.EventManager.getInstance();
}
} ]);
return e;
}();
u.Instance = new u();
var d = u.Instance;
n.App = d;
cc._RF.pop();
}, {
"../../../base/pop/PopQueue": "PopQueue",
"../ClubManager": "ClubManager",
"./EventManager": "EventManager",
"./Proxy": "Proxy",
"./PushManager": "PushManager"
} ],
AudioBase: [ function(e, t) {
"use strict";
cc._RF.push(t, "0200aqJr7RNd7P90quuR2df", "AudioBase");
var n = e("DataBase");
cc.Class({
extends: cc.Component,
properties: {},
playAudio: function(t) {
var i = n.gameType < 10 ? "Game0" + n.gameType : "Game" + n.gameType;
if (cc.sys.isNative) {
var a = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + i + "/" + t;
cc.loader.load(a, function(t, n) {
e("audio-ctrl").getInstance().playSFX(n);
});
}
}
});
cc._RF.pop();
}, {
DataBase: "DataBase",
"audio-ctrl": "audio-ctrl"
} ],
Avatar: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "929faVSkzVBU7HEis7Q5uRX", "Avatar");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c = e("../../../GameBase/GameConfig"), l = (i = e("../../common/GameUtils")) && i.__esModule ? i : {
default: i
};
function u(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function d(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function h(e, t, n) {
t && d(e.prototype, t);
n && d(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
function f(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function p(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
m(e, t);
}
function m(e, t) {
return (m = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
var g = cc._decorator, v = g.ccclass, C = (a = (0, g.property)(cc.SpriteFrame), 
v(r = (o = function(e) {
p(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
u(t = e.call.apply(e, [ this ].concat(i)) || this, "sfDefaultAvatar", s, f(t));
t._avatarUrl = "";
return t;
}
t.prototype.renderUI = function() {
var e = this, t = this.node.getComponent(cc.Sprite);
if (l.default.isNullOrEmpty(this._avatarUrl)) t.spriteFrame = this.sfDefaultAvatar; else {
var n = this._avatarUrl;
-1 == this._avatarUrl.indexOf("://") && (n = c.GameConfig.HeadUrl + this._avatarUrl);
var i = n.split("://")[0], a = n.split("://")[1];
switch (i) {
case "remote":
finalUrl = c.GameConfig.ConfigUrl + imgUrl;
cc.loader.load(c.GameConfig.ConfigUrl + imgUrl + "?file=a.png", function(n, i) {
if (n) cc.isValid(t, !0) && (t.spriteFrame = e.sfDefaultAvatar); else try {
var a = new cc.SpriteFrame(i);
t && (t.spriteFrame = a);
} catch (n) {
cc.isValid(t, !0) && (t.spriteFrame = e.sfDefaultAvatar);
}
});
break;

case "file":
t.spriteFrame = c.GameConfig.AvatartAtlas.getSpriteFrame("mj_face" + a);
break;

case "https":
case "http":
cc.loader.load(n + "?file=a.png", function(n, i) {
if (n) cc.isValid(t, !0) && (t.spriteFrame = e.sfDefaultAvatar); else try {
var a = new cc.SpriteFrame(i);
t && (t.spriteFrame = a);
} catch (n) {
cc.isValid(t, !0) && (t.spriteFrame = e.sfDefaultAvatar);
}
});
}
}
};
h(t, [ {
key: "avatarUrl",
get: function() {
return this._avatarUrl;
},
set: function(e) {
this._avatarUrl = e;
this.renderUI();
}
} ]);
return t;
}(cc.Component), s = function(e, t, n, i) {
var a = {};
Object.keys(i).forEach(function(e) {
a[e] = i[e];
});
a.enumerable = !!a.enumerable;
a.configurable = !!a.configurable;
("value" in a || a.initializer) && (a.writable = !0);
void 0;
if (void 0 === (a = n.slice().reverse().reduce(function(t, n) {
return n(e, "sfDefaultAvatar", t) || t;
}, a)).initializer) {
Object.defineProperty(e, "sfDefaultAvatar", a);
a = null;
}
return a;
}(o.prototype, 0, [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return {
type: cc.SpriteFrame,
default: null,
displayname: "默认头像"
};
}
}), o)) || r);
n.default = C;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../common/GameUtils": "GameUtils"
} ],
BaseCardZP: [ function(e, t) {
"use strict";
cc._RF.push(t, "0010fNc//1IzZFlTp7gVcSR", "BaseCardZP");
cc.Class({
extends: cc.Component,
properties: {
spriteFrame: [ cc.SpriteFrame ],
imgPao: cc.Node,
imgBlin: cc.Node,
tingIcon: cc.Node
},
onLoad: function() {},
init: function(e, t, n, i) {
(t ? this.node.getChildByName("2").getComponent(cc.Sprite) : this.node.getComponent(cc.Sprite)).spriteFrame = this.spriteFrame[e];
this.node.value = e;
n && (this.imgPao.active = n);
i && (this.imgBlin.active = i);
},
showTing: function(e) {
this.tingIcon && (this.tingIcon.active = e);
},
changeLoad: function(e) {
this.node.getComponent(cc.Sprite).spriteFrame = this.spriteFrame[e];
}
});
cc._RF.pop();
}, {} ],
BaseGroupZP: [ function(e, t) {
"use strict";
cc._RF.push(t, "f7db6aURqtGLpcJf8ChebyS", "BaseGroupZP");
var n = e("Connector"), i = (e("PACK"), e("ROUTE")), a = (e("Cache"), e("TableInfo")), r = e("DataBase");
cc.Class({
extends: cc.Component,
properties: {
card: [ cc.Node ],
bg: cc.Sprite,
bgSf: cc.SpriteFrame
},
onLoad: function() {},
init: function(e, t, o, s) {
var c = this;
switch (e.type) {
case "wai":
for (var l = 0; l < 3; l++) {
var u = this.card[l].getChildByName("back");
"wai" == e.type && (u.active = o ? 0 != l : 0 != l || e.idx != a.idx && 6 != r.gameType && 25 != r.gameType);
this.card[l].active = !0;
this.card[l].getComponent("BaseCardZP").init("wai" == e.type ? e.card : e.cards[l]);
s && "wai" == e.type && (this.card[2].active = !1);
}
break;

case "dui":
case "men":
case "shun":
case "bi":
case "dan":
case "chi":
e.cards.forEach(function(e, t) {
c.card[t].active = !0;
c.card[t].getComponent("BaseCardZP").init(e);
});
break;

case "peng":
case "wei":
case "kan":
for (var d = 0; d < 3; d++) {
var h = this.card[d].getChildByName("back");
if (17 == r.gameType || 19 == r.gameType) "wei" == e.type && (h.active = o ? 0 != d : 0 != d || e.idx != a.idx); else {
h.active = "wei" == e.type && 0 != d && !o;
0 == d && (h.active = "wei" == e.type && !o && e.idx != a.idx && e.mask);
}
this.card[d].active = !0;
this.card[d].getComponent("BaseCardZP").init(e.cards ? e.cards[d] : e.card);
}
break;

case "ti":
case "piao":
case "pao":
case "liu":
("liu" == e.type && o || "piao" == e.type && o) && e.cards && (e.card = e.cards[0]);
for (var f = 0; f < 4; f++) {
var p = this.card[f].getChildByName("back");
if ("liu" == e.type) if ("17" == r.gameType) p.active = o ? 0 != f : 0 != f || e.idx != a.idx; else {
p.active = 0 != f || "HANDS" == e.src && e.idx != a.idx;
o && (p.active = 0 != f);
} else p.active = 0 == f ? "ti" == e.type && !o && e.idx != a.idx && e.mask : "ti" == e.type || "liu" == e.type;
this.card[f].active = !0;
this.card[f].getComponent("BaseCardZP").init(e.card);
}
}
this.type = e.type;
this.cardValue = e.card;
this.xi = e.xi;
this.src = e.src;
this.cards = e.cards || null;
t.bg && (this.bg.spriteFrame = this.bgSf);
t.click && this.node.on("touchend", function() {
6 == r.gameType ? n.gameMessage(i.CS_ANSWER, {
serialID: a.serialID,
answer: e.idx,
card: a.currentCard,
tag: e.tag || null
}) : n.gameMessage(i.CS_ANSWER, {
serialID: a.serialID,
answer: e.idx,
card: a.currentCard
});
c.node.parent.parent.active = !1;
});
},
resetStatus: function() {
var e = this;
"pao" == this.type && "ti" == this.type && this.card.forEach(function(t, n) {
t.getChildByName("back").active = e.type != pao || "ti" == e.type && 0 == n;
});
},
remove: function() {
this.node && this.node.destroy();
}
});
cc._RF.pop();
}, {
Cache: "Cache",
Connector: "Connector",
DataBase: "DataBase",
PACK: "PACK",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
BaseHandZP: [ function(e, t) {
"use strict";
cc._RF.push(t, "3e738qDC6ROKrxcRI7WBhAO", "BaseHandZP");
var n = e("DataBase"), i = e("TableInfo"), a = e("Connector"), r = (e("PACK"), e("ROUTE")), o = e("Cache");
e("../../Main/Script/ROUTE").SC_SYNC_CARD;
cc.Class({
extends: cc.Component,
properties: {
nodeCard: cc.Prefab
},
onLoad: function() {
var e = this;
this.scirpt = [];
for (var t = 0; t < 26; t++) 5 == t ? this.scirpt.push("SceneTable05") : 25 == t ? this.scirpt.push("ModuleScene25") : 10 == t ? this.scirpt.push("ModuleScene10") : 6 == t ? this.scirpt.push("SceneTable06") : 22 == t ? this.scirpt.push("SceneTable08") : 8 == t ? this.scirpt.push("SceneTable08") : this.scirpt.push("0");
this.checkTing = !1;
this.node.on("touchstart", function(t) {
e.touchstart(t);
});
this.node.on("touchmove", function(t) {
e.touchmove(t);
});
this.node.on("touchend", function(t) {
e.touchend(t);
});
this.node.on("touchcancel", function(t) {
e.touchcancel(t);
});
},
init: function(e, t) {
var i = this;
this.dealCards = [];
this.node.removeAllChildren();
var a = this.makeHands(e, t);
this._hands = [ [], [], [], [], [], [], [], [], [], [], [], [], [] ];
var r = 6 - Math.floor(a.length / 2);
r > 0 && r--;
a.forEach(function(e) {
var t = 0 == e.filter(function(t) {
return t != e[0];
}).length && e.length > 2 ? 1 : 0;
e.forEach(function(e, a) {
var o = cc.instantiate(i.nodeCard);
o.scale = 1;
o.parent = i.node;
o._card = e;
o.ban = !1;
o.pao = t;
o.getComponent("BaseCardZP").init(e, !1, t);
o.pao > 0 && 3 != n.gameType && 10 != n.gameType && (o.getChildByName("shadow").active = !0);
o._pos = {
x: r,
y: a
};
o.setPosition(97 * o._pos.x - 500, 100 * o._pos.y - 273);
i._hands[r].push(o);
i.dealCards.push(o);
});
r++;
});
this.sortHands(!0);
},
makeHands: function(e) {
var t = [], i = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
e.forEach(function(e, n) {
if (e > 1) {
for (var a = [], r = 0; r < e; r++) a.push(n);
t.push(a);
} else i[n] += e;
});
i.forEach(function(e, n) {
if (e > 0 && n % 10 < 8 && i[n] > 0 && i[n + 1] > 0 && i[n + 2] > 0) {
t.push([ n + 2, n + 1, n ]);
i[n + 2]--;
i[n + 1]--;
i[n]--;
}
});
if (i[9] > 0 && i[6] > 0 && i[1] > 0) {
t.push([ 9, 6, 1 ]);
i[9]--;
i[6]--;
i[1]--;
}
if (i[19] > 0 && i[16] > 0 && i[11] > 0) {
t.push([ 19, 16, 11 ]);
i[19]--;
i[16]--;
i[11]--;
}
i.forEach(function(e, n) {
var a = t.findIndex(function(e) {
return e[0] % 10 == n % 10 && 2 == e.length && e[0] == e[1];
});
if (a > -1 && e > 0) {
t[a].push(n);
i[n]--;
}
});
if (i[0] > 0 && i[1] > 0) {
t.push([ 0, 1 ]);
i[0]--;
i[1]--;
}
if (i[0] > 0 && i[2] > 0) {
t.push([ 0, 2 ]);
i[0]--;
i[2]--;
}
if (i[1] > 0 && i[2] > 0) {
t.push([ 1, 2 ]);
i[1]--;
i[2]--;
}
if (i[10] > 0 && i[11] > 0) {
t.push([ 10, 11 ]);
i[10]--;
i[11]--;
}
if (i[10] > 0 && i[12] > 0) {
t.push([ 10, 12 ]);
i[10]--;
i[12]--;
}
if (i[11] > 0 && i[12] > 0) {
t.push([ 12, 11 ]);
i[11]--;
i[12]--;
}
if (i[9] > 0 && i[6] > 0) {
t.push([ 9, 6 ]);
i[9]--;
i[6]--;
}
if (i[9] > 0 && i[1] > 0) {
t.push([ 9, 1 ]);
i[9]--;
i[1]--;
}
if (i[6] > 0 && i[1] > 0) {
t.push([ 6, 1 ]);
i[6]--;
i[1]--;
}
if (i[19] > 0 && i[16] > 0) {
t.push([ 19, 16 ]);
i[19]--;
i[16]--;
}
if (i[19] > 0 && i[11] > 0) {
t.push([ 19, 11 ]);
i[19]--;
i[11]--;
}
if (i[16] > 0 && i[11] > 0) {
t.push([ 16, 11 ]);
i[16]--;
i[11]--;
}
i.forEach(function(e, n) {
if (e > 0 && n % 10 < 9 && i[n] > 0 && i[n + 1] > 0) {
t.push([ n + 1, n ]);
i[n + 1]--;
i[n]--;
}
});
i.forEach(function(e, n) {
if (e > 0 && n % 10 < 8 && i[n] > 0 && i[n + 2] > 0) {
t.push([ n + 2, n ]);
i[n + 2]--;
i[n]--;
}
});
i.forEach(function(e, n) {
e > 0 && t.push([ n ]);
});
t.forEach(function(e) {
e.sort(function(e, t) {
return e - t;
});
});
t.sort(function(e, t) {
return e[0] % 10 - t[0] % 10;
});
t.forEach(function(e) {
e.dan = 1 == e.length;
e.pao = (e[0] % 10 + 1) * (3 == e.length && e[0] == e[1] && e[1] == e[2] ? -20 : 1);
});
3 != n.gameType && 10 != n.gameType || t.sort(function(e, t) {
return e.pao == t.pao ? e[0] - t[0] : e.pao - t.pao;
});
for (;t.length > 11; ) {
var a = t.findIndex(function(e) {
return 1 == e.length;
}), r = t[a][0];
cc.log("card", r);
t.splice(a, 1);
var o = t.findIndex(function(e) {
return e.length < 3;
});
t[o].push(r);
}
return t;
},
touchstart: function(e) {
if (null == this.current && this._hands && 0 != this.node.children.length) {
this.checkTing = !0;
for (var t = 0; t < this._hands.length; t++) for (var i = 0; i < this._hands[t].length; i++) {
var a = this._hands[t][i], r = this._hands[t][i].getBoundingBox();
if (0 != i) {
r.y = r.y + 8.8;
r.height = r.height - 8.8;
}
var o = e.target.convertToNodeSpaceAR(e.getLocation());
if (r.contains(o)) {
if (1 == a.pao) return;
this.current = a;
3 != n.gameType && 10 != n.gameType || (this.current.scale = 1.1);
this.current.zIndex = 200;
}
}
}
},
joinHands: function() {
var e = this, t = 0;
this._hands.forEach(function(e) {
return t += e.length > 0 ? 1 : 0;
});
var n = 6 - Math.floor(t / 2);
n > 0 && n--;
var i = this._hands.slice();
this._hands = [ [], [], [], [], [], [], [], [], [], [], [], [], [] ];
i.forEach(function(t) {
if (t.length > 0) {
e._hands[n] = t;
n++;
}
});
},
sortHands: function() {
var e = this;
this.joinHands();
for (var t = function(t) {
if (3 == e._hands[t].length && 0 == e._hands[t][0].pao && e._hands[t][0].value % 10 == e._hands[t][1].value % 10 && e._hands[t][1].value % 10 == e._hands[t][2].value % 10) {
e._hands[t].forEach(function(n) {
var i = e._hands[t].findIndex(function(e) {
return n.value == e.value && n != e;
});
n.count = -1 != i ? 2 : 1;
});
e._hands[t].sort(function(e, t) {
return t.count - e.count;
});
}
for (var n = 0; n < e._hands[t].length; n++) {
var i = e._hands[t][n];
i.scale = 1;
i._pos = {
x: t,
y: n
};
i.zIndex = 100 - i._pos.y;
i.stopAllActions();
i.runAction(cc.moveTo(.15, 97 * i._pos.x - 500, 100 * i._pos.y - 273));
}
}, n = 0; n < this._hands.length; n++) t(n);
},
removeHands: function(e) {
for (var t = 0; t < this._hands.length; t++) for (var n = 0; n < this._hands[t].length; n++) if (e == this._hands[t][n]._card) {
this._hands[t][n].opacity = 0;
this._hands[t][n].removeFromParent();
this._hands[t][n].destroy();
this._hands[t].splice(n, 1);
return;
}
},
touchmove: function(e) {
if (null != this.current) {
var t = e.target.convertToNodeSpaceAR(e.getLocation());
try {
t && (this.current.position = t);
} catch (e) {}
if (this.checkTing && (5 == n.gameType || 25 == n.gameType || 6 == n.gameType || 22 == n.gameType || 8 == n.gameType)) {
cc.find("Canvas/nodeTable").getComponent(this.scirpt[n.gameType]).checkTing(this.current._card, this.current._card);
this.checkTing = !1;
}
}
},
touchend: function() {
var e = this;
if (null != this.current) {
var t = cc.find("Canvas/nodeTable/bg2/imgOutCard");
if (1 == t.active && this.current.y > 45 && !this.current.ban) {
if (-1 != i.zhao.findIndex(function(t) {
return t == e.current.value;
}) && !i.config.mask) {
o.showConfirm("接下来不可以吃和碰，是否出牌？", function() {
e._hands[e.current._pos.x].splice(e.current._pos.y, 1);
e.current.opacity = 0;
try {
e.current.removeFromParent();
e.current.destroy();
} catch (e) {
console.log(e);
}
e.sendPlay();
e.current = null;
e.sortHands();
}, function() {
e.current = null;
e.sortHands();
});
return;
}
this._hands[this.current._pos.x].splice(this.current._pos.y, 1);
this.sendPlay();
this.current && this.current.position && (cc.outCardPosition = this.current.position);
this.current.opacity = 0;
try {
this.current.removeFromParent();
this.current.destroy();
} catch (e) {
console.log(e);
}
t.active = !1;
this.current = null;
this.sortHands();
} else {
var a = this.current.getPosition(), r = Math.floor((a.x - -500 + 48.5) / 97);
r = Math.max(r, 0);
r = Math.min(r, 12);
var s = 0;
this._hands.forEach(function(e) {
e.length > 0 && s++;
});
var c = 6 - Math.floor(s / 2), l = s + c - 1, u = a.x < this._hands[c][0] - 30 || a.x < this._hands[l][0] + 30, d = Math.round((a.y + 100) / 100);
d = Math.min(d, 4);
d = Math.max(d, 0);
this.moveHands(this.current, r, d, u && d <= 2);
this.current = null;
this.sortHands();
5 != n.gameType && 10 != n.gameType && 25 != n.gameType && 6 != n.gameType && 22 != n.gameType && 8 != n.gameType || cc.find("Canvas/nodeTable").getComponent(this.scirpt[n.gameType]).checkTing();
}
}
},
moveHands: function(e, t, n, i) {
var a = this.current._pos, r = 0;
this._hands.forEach(function(e) {
e.length > 0 && r++;
});
if (null == this._hands[t][0] || 1 != this._hands[t][0].pao) if (r < 12 && i) {
this._hands[a.x].splice(a.y, 1);
this._hands.splice(t, 0, [ this.current ]);
} else if (this._hands[t].length < 4) {
this._hands[a.x].splice(a.y, 1);
this._hands[t].splice(this._hands[t].length, 0, this.current);
}
},
touchcancel: function() {
if (null != this.current) if (1 == cc.find("Canvas/nodeTable/bg2/imgOutCard").active && this.current.y > 45 && !this.current.ban) this.touchend(); else {
this.current = null;
this.sortHands();
!this.checkTing || 5 != n.gameType && 10 != n.gameType && 25 != n.gameType && 6 != n.gameType && 22 != n.gameType && 8 != n.gameType || cc.find("Canvas/nodeTable").getComponent(this.scirpt[n.gameType]).checkTing();
}
},
sendPlay: function(e) {
a.gameMessage(r.CS_PLAY_CARD, e || this.current.value);
},
sendAction: function() {},
showLayoutAction: function() {},
showLayoutBi: function() {},
showLayoutChi: function() {},
syncCard: function(e) {
for (var t = new Array(20).fill(0), n = 0; n < this._hands.length; n++) for (var i = 0; i < this._hands[n].length; i++) t[this._hands[n][i]._card]++;
for (var a = !1, r = 0; r < e.length; r++) 0 != e[r] - t[r] && (a = !0);
if (a) this.init(e, !0); else for (var o = 0; o < this._hands.length; o++) for (var s = 0; s < this._hands[o].length; s++) this._hands[o][s] && this._hands[o][s].getComponent("BaseCardZP").changeLoad(this._hands[o][s]._card);
},
addHands: function(e, t) {
for (var n = this._hands.length - 1; n >= 0; n--) if (this._hands[n].length <= 4 - t) {
for (var i = 0; i < t; i++) {
var a = cc.instantiate(this.nodeCard);
a.scale = .8;
a.parent = this.node;
a._card = e;
a.ban = !1;
a.pao = 0;
a.getComponent("BaseCardZP").init(e, !1, 0);
a._pos = {
x: n,
y: this._hands[n].length
};
a.setPosition(97 * a._pos.x - 500, 100 * a._pos.y - 273);
this._hands[n].push(a);
}
this.sortHands();
return;
}
},
reduceHands: function(e, t) {
for (var n = 0; n < t; n++) {
this.removeHands(e);
this.sortHands();
}
}
});
cc._RF.pop();
}, {
"../../Main/Script/ROUTE": "ROUTE",
Cache: "Cache",
Connector: "Connector",
DataBase: "DataBase",
PACK: "PACK",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
BaseSummaryDeck: [ function(e, t) {
"use strict";
cc._RF.push(t, "f6f22uUgMVA/a0+ffIcdHIS", "BaseSummaryDeck");
cc.Class({
extends: cc.Component,
properties: {
content: cc.Layout,
card: cc.Prefab
},
start: function() {},
init: function(e) {
var t = this;
this.content.node.destroyAllChildren();
this.show = !0;
e.forEach(function(e) {
var n = cc.instantiate(t.card);
n.getComponent("BaseCardZP").init(e);
n.width = 50;
n.height = 57;
n.parent = t.content.node;
});
},
btnHandleCall: function() {
this.content.node.active = !this.show;
this.show = !this.show;
}
});
cc._RF.pop();
}, {} ],
BaseSummaryToggleZP: [ function(e, t) {
"use strict";
cc._RF.push(t, "954a89bKMxNeb0RjhE/QUk1", "BaseSummaryToggleZP");
e("audio-ctrl");
cc.Class({
extends: cc.Component,
properties: {
toggle: [ cc.Toggle ]
},
onLoad: function() {},
show: function() {
var e = cc.find("Canvas/nodeTable/roundSummary"), t = cc.find("Canvas/roundSummary"), n = cc.find("Canvas/replay/roundSummary");
e && (e.active = !0);
t && (t.active = !0);
n && (n.active = !0);
},
hide: function() {
var e = cc.find("Canvas/nodeTable/roundSummary"), t = cc.find("Canvas/roundSummary"), n = cc.find("Canvas/replay/roundSummary");
cc.log(e);
e && (e.active = !1);
t && (t.active = !1);
n && (n.active = !1);
},
playSound: function() {}
});
cc._RF.pop();
}, {
"audio-ctrl": "audio-ctrl"
} ],
Base_DragBtn: [ function(e, t) {
"use strict";
cc._RF.push(t, "487ebKB9bFEmZcqxMvX5PD/", "Base_DragBtn");
var n = e("./utils");
cc.Class({
extends: cc.Component,
properties: {
touchTime: 0
},
onLoad: function() {
this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);
this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);
this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);
},
onTouchStart: function(e) {
this.touchPos = e.getLocation();
this.touchTime = n.getTimeStamp();
},
onTouchMove: function(e) {
if (n.getTimeStamp() - this.touchTime > 400) {
var t = e.getLocation(), i = cc.find("Canvas").convertToNodeSpaceAR(t);
this.node.x = parseInt(i.x);
this.node.y = parseInt(i.y);
}
},
onTouchEnd: function() {
n.getTimeStamp() - this.touchTime <= 400 && this.onClickBtn();
},
onClickBtn: function() {}
});
cc._RF.pop();
}, {
"./utils": "utils"
} ],
BgTableAudioCtr07: [ function(e, t) {
"use strict";
cc._RF.push(t, "f7f3dfFdQNMZrKQcf0gNGaA", "BgTableAudioCtr07");
var n = cc.Class({
extends: e("AudioBase"),
properties: {},
PassVoice: function(e) {
var t;
t = e;
Math.random() > .5 ? this.playAudio(t + "_pass0.mp3") : this.playAudio(t + "_pass1.mp3");
},
playVoice: function(e, t) {
var n, i;
n = t;
i = e.card % 100;
var a = Math.random();
switch (e.type) {
case "DAN":
case "DUI":
this.playAudio(n + "_" + e.cards.length + "_" + i + ".mp3");
break;

case "LIANDUI":
case "FEIJI":
case "SHUN":
case "BOMB":
this.playAudio(n + "_" + e.type + ".mp3");
break;

case "SAN":
if (a > .2) {
5 == e.cards.length && this.playAudio(n + "_32.mp3");
4 == e.cards.length && this.playAudio(n + "_31.mp3");
6 == e.cards.length && this.playAudio(n + "_42.mp3");
} else this.playAudio(n + "_3_" + i + ".mp3");
}
}
});
t.exports = n;
cc._RF.pop();
}, {
AudioBase: "AudioBase"
} ],
BlackListItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "6e8c6iCSlBMx78a1ZnAm+C/", "BlackListItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T = e("../../../GameBase/GameConfig"), E = D(e("../../../Main/NetWork/Connector")), A = D(e("../../../Main/Script/Cache")), I = (D(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App")), N = D(e("../../common/GameUtils")), w = e("../../../Main/Script/native-extend");
function D(e) {
return e && e.__esModule ? e : {
default: e
};
}
function P(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function M(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function x(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
O(e, t);
}
function O(e, t) {
return (O = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function G(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var R = cc._decorator, k = R.ccclass, L = R.property, B = (i = L(cc.Label), a = L(cc.Label), 
r = L(cc.Label), o = L(cc.Label), s = L(cc.Label), c = L(cc.Label), l = L(cc.Label), 
u = L(cc.Node), d = L(cc.Node), k(h = (f = function(e) {
x(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
P(t = e.call.apply(e, [ this ].concat(i)) || this, "lblSuspectID", p, M(t));
P(t, "lblReporterID", m, M(t));
P(t, "lblSuspectName", g, M(t));
P(t, "lblReporteName", v, M(t));
P(t, "lblReason", C, M(t));
P(t, "lblFileID", b, M(t));
P(t, "lblStatus", y, M(t));
P(t, "handleBtn", S, M(t));
P(t, "maliciousBtn", _, M(t));
t.itemData = null;
t.reportID = null;
t.reporterID = null;
t.linkCount = 0;
return t;
}
var n = t.prototype;
n.onLoad = function() {};
n.renderUI = function(e) {
try {
this.itemData = e;
this.reporterID = e.reporterID;
this.reportID = e.id;
this.handleBtn.active = 0 == e.status;
this.maliciousBtn.active = 0 == e.status;
switch (e.status) {
case -1:
this.lblStatus.string = "未冻结钱";
break;

case 1:
this.lblStatus.string = "已处理";
break;

case 0:
this.lblStatus.string = "未处理";
break;

default:
this.lblStatus.string = "未知状态";
}
this.lblFileID.string = e.fileID;
this.lblReporterID.string = e.reporterID;
this.lblSuspectID.string = e.suspectID;
this.lblReporteName.string = e.reporterName;
this.lblSuspectName.string = e.suspectName;
this.lblReason.string = e.reason;
} catch (t) {
A.default.alertTip(e.id + "数据错误");
}
};
n.openReplay = function() {
var e = this;
A.default.playSfx();
w.Social.setCopy(this.lblFileID.string);
A.default.alertTip("回放码已复制");
E.default.get(T.GameConfig.RecordUrl + "records/" + this.lblFileID.string + ".json", "getJson", function(t) {
A.default.replayData = t;
T.GameConfig.CurrentReplayData = e.lblFileID.string;
e.linkCount = 0;
null != t ? cc.loader.loadRes("prefab/AdminReplay09", function(t, n) {
if (t) cc.log("error to load replay"); else {
var i = cc.instantiate(n);
i.getComponent("ModuleReplay_09").adminReplayInit(e.itemData);
i.parent = cc.find("Canvas");
}
}) : A.default.alertTip("暂无回放");
}, !0, function() {
if (0 == e.linkCount) {
var t = e.lblFileID.string.split("/")[0], n = t.substring(0, 4), i = t.substring(4, 6) - 1, a = t.substring(6, 8), r = new Date(n, i, a);
r.setDate(r.getDate() - 1);
e.linkCount++;
var o = r.getFullYear() + ("0" + (r.getMonth() + 1)).slice(-2) + ("0" + r.getDate()).slice(-2), s = o + "/" + e.lblFileID.string.split("/")[1];
console.log(o, s);
e.lblFileID.string = s;
e.openReplay();
}
});
};
n.onClickDetail = function() {
var e = this;
A.default.playSfx();
N.default.pop(T.GameConfig.pop.UserInfoPop, function(t) {
t.getComponent("UserInfoPop").initUserID(parseInt(e.lblSuspectID.string));
});
};
n.handleReport = function() {
E.default.request(T.GameConfig.ServerEventName.FinishReport, {
fileID: this.lblFileID.string,
clubID: I.App.Club.CurrentClubID,
reportID: this.reportID
}, function() {
I.App.EventManager.dispatchEventWith(T.GameConfig.GameEventNames.UPDATE_REPORT_LIST);
});
};
n.setMalicious = function() {
E.default.request(T.GameConfig.ServerEventName.SetMalicious, {
fileID: this.lblFileID.string,
clubID: I.App.Club.CurrentClubID,
userID: this.reporterID,
reportID: this.reportID
}, function() {
I.App.EventManager.dispatchEventWith(T.GameConfig.GameEventNames.UPDATE_REPORT_LIST);
});
};
return t;
}(cc.Component), p = G(f.prototype, "lblSuspectID", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = G(f.prototype, "lblReporterID", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = G(f.prototype, "lblSuspectName", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = G(f.prototype, "lblReporteName", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = G(f.prototype, "lblReason", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = G(f.prototype, "lblFileID", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = G(f.prototype, "lblStatus", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = G(f.prototype, "handleBtn", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = G(f.prototype, "maliciousBtn", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f)) || h);
n.default = B;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/native-extend": "native-extend",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
BlackListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "186e5RB5EdB84mbcrCZrKTQ", "BlackListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d = e("../../../GameBase/GameConfig"), h = g(e("../../../Main/NetWork/Connector")), f = g(e("../../../Main/Script/Cache")), p = (g(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App")), m = g(e("../../common/GameUtils"));
function g(e) {
return e && e.__esModule ? e : {
default: e
};
}
function v(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function C(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function b(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
y(e, t);
}
function y(e, t) {
return (y = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function S(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var _ = cc._decorator, T = _.ccclass, E = _.property, A = (i = E(cc.Node), a = E(cc.Prefab), 
r = E(cc.EditBox), T(o = (s = function(e) {
b(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
v(t = e.call.apply(e, [ this ].concat(i)) || this, "itemContent", c, C(t));
v(t, "listItem", l, C(t));
v(t, "fileIDInput", u, C(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.downloadList();
};
n.addEvents = function() {
p.App.EventManager.addEventListener(d.GameConfig.GameEventNames.UPDATE_REPORT_LIST, this.downloadList, this);
};
n.removeEvents = function() {
p.App.EventManager.removeEventListener(d.GameConfig.GameEventNames.UPDATE_REPORT_LIST, this.downloadList, this);
};
n.downloadList = function() {
var e = this;
this.itemContent.removeAllChildren();
h.default.request(d.GameConfig.ServerEventName.ReportLogs, {
clubID: p.App.Club.CurrentClubID
}, function(t) {
m.default.isNullOrEmpty(t.data) || t.data.forEach(function(t) {
var n = cc.instantiate(e.listItem);
n.getComponent("BlackListItem").renderUI(t);
e.itemContent.addChild(n);
});
});
};
n.onSearch = function() {
var e = this;
f.default.playSfx();
if ("" != this.fileIDInput.string) {
this.itemContent.removeAllChildren();
h.default.request(d.GameConfig.ServerEventName.ReportLogs, {
clubID: p.App.Club.CurrentClubID,
fileID: this.fileIDInput.string
}, function(t) {
m.default.isNullOrEmpty(t.data) || t.data.forEach(function(t) {
var n = cc.instantiate(e.listItem);
n.getComponent("BlackListItem").renderUI(t);
e.itemContent.addChild(n);
});
});
}
};
n.onClickClose = function() {
f.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), c = S(s.prototype, "itemContent", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = S(s.prototype, "listItem", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = S(s.prototype, "fileIDInput", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = A;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
BombAnim: [ function(e, t) {
"use strict";
cc._RF.push(t, "b1981QXI5lFQp8n02dAloON", "BombAnim");
cc.Class({
extends: cc.Component,
properties: {
bombArr: [ cc.SpriteFrame ]
},
start: function() {},
startAnim: function(e) {
var t = this;
this.node.getComponent(cc.Sprite).spriteFrame = this.bombArr[e - 3];
this.node.scale = 7;
var n = cc.scaleTo(.3, 1), i = cc.moveBy(.3, cc.v2(0, 100)), a = cc.fadeOut(.3), r = cc.spawn(i, a), o = cc.sequence(n, cc.delayTime(.3), r, cc.callFunc(function() {
if (t.node) {
t.node.removeFromParent();
t.node.destroy();
}
}));
this.node.runAction(o);
}
});
cc._RF.pop();
}, {} ],
BtnTips07: [ function(e, t) {
"use strict";
cc._RF.push(t, "4771cD4IVtBa5FBnVKHO2CR", "BtnTips07");
var n = e("Logic07"), i = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
layerHandCards: cc.Layout,
sprDisnable: cc.Node,
btnTip: cc.Button,
canvas: cc.Node
},
tipsStart: function() {
this.sprDisnable.active = !1;
var e = this.canvas.getComponent("SceneTable07").hands, t = this.layerHandCards.node.getComponent("LayerHandsCards07").nodeCards, a = [];
e.forEach(function(e) {
a.push(e);
});
var r = n.autoplay(a, i.current, this.node.tipsTime, i.config), o = r[this.node.tipsTime % r.length];
if (null != o) if (0 != o.length) {
i.tipResult = [];
i.tipResult = o;
this.node.tipsTime++;
t.forEach(function(e) {
e.getChildByName("bgCardMask").active = !1;
e._prior = !1;
e.setPosition(e.pos0);
});
o.forEach(function(e) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
if (i._value == e && !i._prior) {
i._prior = !0;
i.position = i.pos1;
return;
}
}
});
this.layerHandCards.node.getComponent("LayerHandsCards07").checkCurrent();
} else {
this.sprDisnable.active = !0;
this.node.getComponent(cc.Button).interactable = !1;
}
}
});
cc._RF.pop();
}, {
Logic07: "Logic07",
TableInfo: "TableInfo"
} ],
CONSTS: [ function(e, t) {
"use strict";
cc._RF.push(t, "57147srWGFNV795VRZEpRak", "CONSTS");
t.exports = {
WAIT: 0,
CUTE: 1,
START: 2,
SUMMARY: 3,
DESTORY: 4,
BAO: 11,
RES_URL: "http://www.p64sd.cn/"
};
cc._RF.pop();
}, {} ],
Cache: [ function(e, t) {
"use strict";
cc._RF.push(t, "0b51cG3d/9D/Z8iyUpflIhN", "Cache");
var n = e("audio-ctrl");
e("DataBase");
t.exports = {
preReplay: [ null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null ],
mjCards: null,
winTips: null,
openType: 0,
showMask: function(e) {
if (cc.find("winMask")) {
this.maskTimeOut && clearTimeout(this.maskTimeOut);
this.maskTimeOut = setTimeout(function() {
var t = cc.find("winMask").getComponent("ModuleWinMask");
t.lblMessage.string = e || "正在连接中，请稍后";
t.show();
}, 500);
}
},
hideMask: function() {
this.maskTimeOut && clearTimeout(this.maskTimeOut);
cc.find("winMask") && cc.find("winMask").getComponent("ModuleWinMask").hide();
},
alertTip: function(e, t) {
cc.loader.loadRes("Main/Prefab/winTips", function(n, i) {
cc.instantiate(i).getComponent("ModuleWinTips").tipsInit(e, t);
});
},
alertTipRightBottom: function(e) {
cc.find("Canvas/tipsRightBottom") || cc.loader.loadRes("Main/Prefab/winTips", function(t, n) {
cc.instantiate(n).getComponent("ModuleWinTips").tipsRightBottom(e);
});
},
hideTipRightBottom: function(e) {
var t = cc.find("Canvas/tipsRightBottom");
t && t.getComponent("ModuleWinTips").hideTipsRightBottom(e);
},
alertTipPop: function(e) {
cc.loader.loadRes("Main/Prefab/TipsPop", function(t, n) {
var i = cc.instantiate(n);
i.parent = cc.find("Canvas");
i.getComponent("ModuleTipsPop").showTips(e);
});
},
showConfirm: function(e, t, n, i) {
void 0 === i && (i = "");
cc.loader.loadRes("Main/Prefab/winConfirm", function(a, r) {
a || cc.instantiate(r).getComponent("ModuleWinConfirm").show("showConfirm", e, t, n, i);
});
},
showNumer: function(e, t, n) {
void 0 === e && (e = "");
cc.find("Canvas/Number") ? cc.find("Canvas/Number").getComponent("Number").initCallback(e, t, n) : cc.loader.loadRes("prefab/Number", function(i, a) {
if (cc.find("Canvas/Number")) cc.find("Canvas/Number").getComponent("Number").initCallback(e, t, n); else if (!i) {
var r = cc.instantiate(a);
r.getComponent("Number").initCallback(e, t, n);
cc.find("Canvas").addChild(r);
}
});
},
playSfx: function() {
var e = cc.url.raw("resources/Audio/Common/click.mp3");
n.getInstance().playSFX(e);
},
playAnimSound: function(e) {
var t = cc.url.raw("resources/Audio/Common/anim" + e + ".mp3");
n.getInstance().playSFX(t);
},
playSound: function(e) {
var t = cc.url.raw("resources/Audio/Common/" + e + ".mp3");
n.getInstance().playSFX(t);
},
showTipsMsg: function(e, t, n) {
void 0 === n && (n = "");
cc.loader.loadRes("Main/Prefab/winConfirm", function(i, a) {
cc.instantiate(a).getComponent("ModuleWinConfirm").show("showTipsMsg", e, t, null, n);
});
},
inputInviterPop: function(e, t) {
cc.loader.loadRes("Main/Prefab/InviterPop", function(n, i) {
var a = cc.instantiate(i);
a.getComponent("ModuleInviterPop").show(e, t);
cc.find("Canvas").addChild(a);
});
}
};
cc._RF.pop();
}, {
DataBase: "DataBase",
"audio-ctrl": "audio-ctrl"
} ],
ChangeIDPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "0c42eAxO8ZMfofOZkuT+4iR", "ChangeIDPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f = e("../../../GameBase/GameConfig"), p = g(e("../../../Main/NetWork/Connector")), m = g(e("../../../Main/Script/Cache"));
e("../../ui/hall/data/App"), g(e("../../common/GameUtils")), g(e("../common/Avatar"));
function g(e) {
return e && e.__esModule ? e : {
default: e
};
}
function v(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function C(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function b(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
y(e, t);
}
function y(e, t) {
return (y = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function S(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var _ = cc._decorator, T = _.ccclass, E = _.property, A = (i = E(cc.Node), a = E(cc.Label), 
r = E(cc.Label), o = E(cc.Label), T(s = (c = function(e) {
b(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
v(t = e.call.apply(e, [ this ].concat(i)) || this, "inputNode", l, C(t));
v(t, "idInput", u, C(t));
v(t, "newIdInput", d, C(t));
v(t, "lblTitle", h, C(t));
t.popType = "user";
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.initUI();
};
n.onConfirm = function() {
var e = this;
m.default.playSfx();
"" != this.idInput.string ? "" != this.newIdInput.string ? p.default.request(f.GameConfig.ServerEventName.ChangeUserID, {
id0: parseInt(this.idInput.string),
id1: parseInt(this.newIdInput.string)
}, function() {
m.default.alertTip("操作成功");
e.initUI();
}) : m.default.alertTip("请输入更换的玩家id") : m.default.alertTip("请输入当前的玩家id");
};
n.initUI = function() {
this.idInput.string = "";
this.newIdInput.string = "";
this.inputNode.active = !0;
};
n.onClickInput = function() {
var e = this;
m.default.playSfx();
m.default.showNumer("请输入当前的玩家ID", f.GameConfig.NumberType.INT, function(t) {
e.idInput.string = "" + t;
});
};
n.onClickNEWInput = function() {
var e = this;
m.default.playSfx();
m.default.showNumer("请输入更换的玩家ID", f.GameConfig.NumberType.INT, function(t) {
e.newIdInput.string = "" + t;
});
};
n.onClickClose = function() {
m.default.playSfx();
this.node.destroy();
};
return t;
}(cc.Component), l = S(c.prototype, "inputNode", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = S(c.prototype, "idInput", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = S(c.prototype, "newIdInput", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = S(c.prototype, "lblTitle", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c)) || s);
n.default = A;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ChangeProxyPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "ef354egphFG/ZIAL26oi2bi", "ChangeProxyPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = f(e("../../../Main/NetWork/Connector")), d = f(e("../../../Main/Script/Cache")), h = e("../../ui/hall/data/App");
f(e("../../common/GameUtils")), f(e("../common/Avatar"));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
function p(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function m(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function g(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
v(e, t);
}
function v(e, t) {
return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function C(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var b = cc._decorator, y = b.ccclass, S = b.property, _ = (i = S(cc.Label), a = S(cc.Label), 
y(r = (o = function(e) {
g(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
p(t = e.call.apply(e, [ this ].concat(i)) || this, "idInput", s, m(t));
p(t, "proxyInput", c, m(t));
return t;
}
var n = t.prototype;
n.onConfirm = function() {
d.default.playSfx();
"" != this.idInput.string ? "" != this.proxyInput.string ? u.default.request(l.GameConfig.ServerEventName.ChangeProxyParent, {
userID: parseInt(this.idInput.string),
parentID: parseInt(this.proxyInput.string),
clubID: h.App.Club.CurrentClubID
}, function() {
d.default.alertTip("调配成功");
}, !0, function(e) {
d.default.alertTip(e.message || "调配失败");
}) : d.default.alertTip("请输入目标上级ID") : d.default.alertTip("请输入调配合伙人ID");
};
n.onInputUser = function() {
var e = this;
d.default.playSfx();
d.default.showNumer("请输入调配合伙人ID", l.GameConfig.NumberType.INT, function(t) {
e.idInput.string = "" + t;
});
};
n.onInputProxy = function() {
var e = this;
d.default.playSfx();
d.default.showNumer("请输入目标上级ID", l.GameConfig.NumberType.INT, function(t) {
e.proxyInput.string = "" + t;
});
};
n.onClickClose = function() {
d.default.playSfx();
this.node.destroy();
};
return t;
}(cc.Component), s = C(o.prototype, "idInput", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c = C(o.prototype, "proxyInput", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), o)) || r);
n.default = _;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ChangeUserPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "05628pvS1dGKrNSOWecFB2t", "ChangeUserPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = f(e("../../../Main/NetWork/Connector")), d = f(e("../../../Main/Script/Cache")), h = e("../../ui/hall/data/App");
f(e("../../common/GameUtils")), f(e("../common/Avatar"));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
function p(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function m(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function g(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
v(e, t);
}
function v(e, t) {
return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function C(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var b = cc._decorator, y = b.ccclass, S = b.property, _ = (i = S(cc.Label), a = S(cc.Label), 
y(r = (o = function(e) {
g(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
p(t = e.call.apply(e, [ this ].concat(i)) || this, "idInput", s, m(t));
p(t, "proxyInput", c, m(t));
return t;
}
var n = t.prototype;
n.onConfirm = function() {
d.default.playSfx();
"" != this.idInput.string ? "" != this.proxyInput.string ? u.default.request(l.GameConfig.ServerEventName.ChangeProxy, {
userID: parseInt(this.idInput.string),
proxyID: parseInt(this.proxyInput.string),
clubID: h.App.Club.CurrentClubID
}, function() {
d.default.alertTip("调配成功");
}, !0, function(e) {
d.default.alertTip(e.message || "调配失败");
}) : d.default.alertTip("请输入目标上级ID") : d.default.alertTip("请输入调配玩家ID");
};
n.onInputUser = function() {
var e = this;
d.default.playSfx();
d.default.showNumer("请输入调配玩家ID", l.GameConfig.NumberType.INT, function(t) {
e.idInput.string = "" + t;
});
};
n.onInputProxy = function() {
var e = this;
d.default.playSfx();
d.default.showNumer("请输入目标上级ID", l.GameConfig.NumberType.INT, function(t) {
e.proxyInput.string = "" + t;
});
};
n.onClickClose = function() {
d.default.playSfx();
this.node.destroy();
};
return t;
}(cc.Component), s = C(o.prototype, "idInput", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c = C(o.prototype, "proxyInput", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), o)) || r);
n.default = _;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ChatItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "f7b4f+1FLpFao1Tp1wD4X+h", "ChatItem");
var n = e("../Script/DataBase"), i = e("../Script/utils"), a = e("./GoEasyConfig").GoEasyConfig;
cc.Class({
extends: cc.Component,
properties: {
otherNode: cc.Node,
otherMsg: cc.Label,
otherImg: cc.Sprite,
selfNode: cc.Node,
selfMsg: cc.Label,
selfImg: cc.Sprite
},
initData: function(e) {
var t = this, r = JSON.parse(e.payload.text);
if (e.senderId == n.player.id) switch (r.contentType) {
case a.ContentType.TEXT:
this.selfNode.active = !0;
this.selfMsg.string = "" + r.content;
setTimeout(function() {
t.selfMsg.horizontalAlign = t.selfMsg.node.height > 40 ? cc.Label.HorizontalAlign.LEFT : cc.Label.HorizontalAlign.RIGHT;
}, 100);
break;

case a.ContentType.IMAGE:
this.selfImg.node.active = !0;
i.setHead(this.selfImg, r.content);
break;

default:
this.selfNode.active = !0;
this.selfMsg.string = "" + r.content;
setTimeout(function() {
t.selfMsg.horizontalAlign = t.selfMsg.node.height > 40 ? cc.Label.HorizontalAlign.LEFT : cc.Label.HorizontalAlign.RIGHT;
}, 100);
} else switch (r.contentType) {
case a.ContentType.TEXT:
this.otherNode.active = !0;
this.otherMsg.string = "" + r.content;
break;

case a.ContentType.IMAGE:
this.otherImg.node.active = !0;
i.setHead(this.otherImg, r.content);
break;

default:
this.otherNode.active = !0;
this.otherMsg.string = "" + r.content;
}
}
});
cc._RF.pop();
}, {
"../Script/DataBase": "DataBase",
"../Script/utils": "utils",
"./GoEasyConfig": "GoEasyConfig"
} ],
ChildScoreItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "a4350G9z+1BDalCwsCmkonV", "ChildScoreItem");
n.__esModule = !0;
n.default = void 0;
e("../../../GameBase/GameConfig"), E(e("../../../Main/NetWork/Connector")), E(e("../../../Main/Script/Cache"));
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S = E(e("../../../Main/Script/DataBase")), _ = (e("../../ui/hall/data/App"), 
E(e("../../common/GameUtils"))), T = E(e("../common/Avatar"));
function E(e) {
return e && e.__esModule ? e : {
default: e
};
}
function A(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function I(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function N(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
w(e, t);
}
function w(e, t) {
return (w = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function D(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var P = cc._decorator, M = P.ccclass, x = P.property, O = (i = x(T.default), a = x(cc.Label), 
r = x(cc.Label), o = x(cc.Label), s = x(cc.Label), c = x(cc.Label), l = x(cc.Sprite), 
u = x([ cc.SpriteFrame ]), M(d = (h = function(e) {
N(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
A(t = e.call.apply(e, [ this ].concat(i)) || this, "avatar", f, I(t));
A(t, "lblStatus", p, I(t));
A(t, "lblName", m, I(t));
A(t, "lblId", g, I(t));
A(t, "lblTurn", v, I(t));
A(t, "lblScore", C, I(t));
A(t, "roleSpr", b, I(t));
A(t, "roleIconArr", y, I(t));
return t;
}
t.prototype.initData = function(e) {
this.avatar.avatarUrl = e.user.head;
if (e.userID == S.default.player.id) {
this.lblStatus.string = "自己";
this.lblStatus.node.color = new cc.color(255, 0, 0);
} else {
this.lblStatus.string = "";
this.lblStatus.node.color = 0 == e.isInGame ? new cc.color(255, 255, 255) : new cc.color(0, 255, 0);
}
this.lblName.string = "" + _.default.getStringByLength(e.user.name, 6);
this.lblId.string = "" + e.userID;
this.lblTurn.string = "" + (e.turn || 0);
this.lblScore.string = "" + (_.default.formatGold(e.score) || 0);
};
return t;
}(cc.Component), f = D(h.prototype, "avatar", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = D(h.prototype, "lblStatus", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = D(h.prototype, "lblName", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = D(h.prototype, "lblId", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = D(h.prototype, "lblTurn", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = D(h.prototype, "lblScore", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = D(h.prototype, "roleSpr", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = D(h.prototype, "roleIconArr", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), h)) || d);
n.default = O;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ChildScoreListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "eb48bgWXqJL0bj/Ho7ORlQJ", "ChildScoreListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N = e("../../../GameBase/GameConfig"), w = O(e("../../../Main/NetWork/Connector")), D = O(e("../../../Main/Script/Cache")), P = O(e("../../../Main/Script/DataBase")), M = e("../../ui/hall/data/App"), x = O(e("../../common/GameUtils"));
function O(e) {
return e && e.__esModule ? e : {
default: e
};
}
function G(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function R(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function k(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
L(e, t);
}
function L(e, t) {
return (L = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function B(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var F = cc._decorator, U = F.ccclass, H = F.property, z = (i = H(cc.Label), a = H(cc.Label), 
r = H(cc.Label), o = H(cc.Label), s = H(cc.Label), c = H(cc.EditBox), l = H(cc.Label), 
u = H(cc.Label), d = H(cc.Node), h = H(cc.Node), f = H(cc.Prefab), U(p = (m = function(e) {
k(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
G(t = e.call.apply(e, [ this ].concat(i)) || this, "lblTotalCount", g, R(t));
G(t, "lblPage", v, R(t));
G(t, "lblTotalTurn", C, R(t));
G(t, "lblTotalFee", b, R(t));
G(t, "lblTotalPage", y, R(t));
G(t, "lblGoPage", S, R(t));
G(t, "turnTips", _, R(t));
G(t, "scoreTips", T, R(t));
G(t, "pageContainer", E, R(t));
G(t, "itemContent", A, R(t));
G(t, "userItem", I, R(t));
t.page = 1;
t.totalPage = 0;
t.selfUserID = 0;
t.pageSize = 4;
t.searchUser = "";
t.isYesToday = 0;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.renderUI(1);
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.onSearchToday = function() {
this.isYesToday = 0;
this.renderUI(1);
};
n.onSearchYestoday = function() {
this.isYesToday = 1;
this.renderUI(1);
};
n.renderUI = function(e) {
this.itemContent.removeAllChildren();
this.downloadList(e);
};
n.downloadList = function(e, t) {
var n = this;
void 0 === t && (t = "");
"" == t && (t = this.searchUser);
this.itemContent.removeAllChildren();
this.searchUser = t;
this.turnTips.string = 0 == this.isYesToday ? "今日局数" : "昨日局数";
this.scoreTips.string = 0 == this.isYesToday ? "今日输赢" : "昨日输赢";
w.default.request(N.GameConfig.ServerEventName.UserScore, {
clubID: M.App.Club.CurrentClubID,
isYesToday: this.isYesToday,
page: e,
pageSize: this.pageSize,
keywords: t
}, function(t) {
if (t.users && !x.default.isNullOrEmpty(t.users.rows)) {
var i, a;
n.pageContainer.active = !0;
n.page = e;
n.totalPage = Math.ceil(t.users.count / n.pageSize);
n.lblPage.string = e + "/" + Math.ceil(t.users.count / n.pageSize);
n.lblTotalCount.string = "总人数: " + t.users.count;
n.lblTotalTurn.string = "" + ((null == (i = t.users.sumData) ? void 0 : i.turn) || 0);
n.lblTotalFee.string = "" + (x.default.formatGold(null == (a = t.users.sumData) ? void 0 : a.score) || 0);
n.lblTotalPage.string = "共 " + n.totalPage + " 页";
n.lblGoPage.string = e;
t.users.rows.forEach(function(e) {
var t = cc.instantiate(n.userItem);
t.getComponent("ChildScoreItem").initData(e, n.selfUserID == P.default.player.id);
n.itemContent.addChild(t);
});
}
});
};
n.addPage = function() {
D.default.playSfx();
if (this.page >= this.totalPage) D.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.renderUI(e);
}
};
n.goPage = function() {
var e = this.lblGoPage.string;
e > this.totalPage || e < 1 ? D.default.alertTip("输入有误") : this.renderUI(e);
};
n.reducePage = function() {
D.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.renderUI(e);
} else D.default.alertTip("已经是第一页");
};
n.onSearch = function() {
var e = this;
D.default.playSfx();
D.default.showNumer("输入玩家ID", N.GameConfig.NumberType.INT, function(t) {
e.downloadList(1, t);
});
};
n.onSearchRes = function(e) {
var t = this;
this.itemContent.removeAllChildren();
this.pageContainer.active = !1;
w.default.request(N.GameConfig.ServerEventName.UserList, {
clubID: M.App.Club.CurrentClubID,
userID: this.selfUserID,
keywords: e
}, function(e) {
if (e.users && !x.default.isNullOrEmpty(e.users.rows)) {
t.lblTotalCount.string = "总人数: " + e.users.count;
e.users.rows.forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ChildUserItem").initData(e, t.selfUserID == P.default.player.id);
t.itemContent.addChild(n);
});
}
});
};
n.selectUsersTotal = function() {
var e = this;
D.default.playSfx();
D.default.showNumer("输入玩家ID", N.GameConfig.NumberType.INT, function(t) {
e.openDetail(t);
});
};
n.onClickClose = function() {
D.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), g = B(m.prototype, "lblTotalCount", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = B(m.prototype, "lblPage", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = B(m.prototype, "lblTotalTurn", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = B(m.prototype, "lblTotalFee", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = B(m.prototype, "lblTotalPage", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = B(m.prototype, "lblGoPage", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = B(m.prototype, "turnTips", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = B(m.prototype, "scoreTips", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = B(m.prototype, "pageContainer", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = B(m.prototype, "itemContent", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = B(m.prototype, "userItem", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m)) || p);
n.default = z;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ChildUserItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "80072yNhe9Olryny6r+HGl3", "ChildUserItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M = e("../../../GameBase/GameConfig"), x = B(e("../../../Main/NetWork/Connector")), O = B(e("../../../Main/Script/Cache")), G = B(e("../../../Main/Script/DataBase")), R = e("../../ui/hall/data/App"), k = B(e("../../common/GameUtils")), L = B(e("../common/Avatar"));
function B(e) {
return e && e.__esModule ? e : {
default: e
};
}
function F(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function U(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function H(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
z(e, t);
}
function z(e, t) {
return (z = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function j(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var W = [ "离线", "在线" ], q = cc._decorator, Y = q.ccclass, J = q.property, V = (i = J(L.default), 
a = J(cc.Label), r = J(cc.Label), o = J(cc.Label), s = J(cc.Label), c = J(cc.Label), 
l = J(cc.Label), u = J(cc.Label), d = J(cc.Label), h = J(cc.Node), f = J(cc.Node), 
p = J(cc.Sprite), m = J([ cc.SpriteFrame ]), Y(g = (v = function(e) {
H(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
F(t = e.call.apply(e, [ this ].concat(i)) || this, "avatar", C, U(t));
F(t, "lblStatus", b, U(t));
F(t, "lblName", y, U(t));
F(t, "lblId", S, U(t));
F(t, "lblYdTurn", _, U(t));
F(t, "lblTdTurn", T, U(t));
F(t, "lblYdFee", E, U(t));
F(t, "lblTdFee", A, U(t));
F(t, "lblScore", I, U(t));
F(t, "addBtn", N, U(t));
F(t, "reduceBtn", w, U(t));
F(t, "roleSpr", D, U(t));
F(t, "roleIconArr", P, U(t));
t.userData = null;
t.showReduce = !1;
return t;
}
var n = t.prototype;
n.addEvents = function() {
R.App.EventManager.addEventListener(M.GameConfig.GameEventNames.CLUB_DATA_CHANGE, this.updateScore, this);
};
n.removeEvents = function() {
R.App.EventManager.removeEventListener(M.GameConfig.GameEventNames.CLUB_DATA_CHANGE, this.updateScore, this);
};
n.updateScore = function() {
this.lblScore.string = "" + k.default.formatGold(R.App.Club.ClubScore);
};
n.initData = function(e, t) {
void 0 === t && (t = !1);
this.showReduce = t;
this.userData = e;
this.avatar.avatarUrl = e.user.head;
if (e.parent != G.default.player.id) {
this.reduceBtn.active = !1;
this.addBtn.x += this.addBtn.width / 2;
}
if (e.userID == G.default.player.id) {
this.lblStatus.string = "自己";
this.lblStatus.node.color = new cc.color(255, 0, 0);
this.addEvents();
} else {
this.lblStatus.string = "" + W[e.isInGame];
this.lblStatus.node.color = 0 == e.isInGame ? new cc.color(255, 255, 255) : new cc.color(0, 255, 0);
}
e.status && (this.lblStatus.string = this.lblStatus.string + {
normal: "",
frozen: "(冻结)",
blacklist: "(拉黑)",
limit: "(限制)"
}[e.status]);
this.lblName.string = "" + k.default.getStringByLength(e.user.name, 6);
this.lblId.string = "" + e.userID;
switch (e.role) {
case "user":
this.roleSpr.node.active = !1;
break;

case "proxy":
this.roleSpr.node.active = !0;
this.roleSpr.spriteFrame = this.roleIconArr[1];
break;

case "owner":
this.roleSpr.node.active = !0;
this.roleSpr.spriteFrame = this.roleIconArr[0];
break;

case "manager":
this.roleSpr.node.active = !0;
this.roleSpr.spriteFrame = this.roleIconArr[2];
}
this.lblYdTurn.string = "" + (e.ydTurn || 0);
this.lblTdTurn.string = "" + (e.tdTurn || 0);
this.lblYdFee.string = "" + (k.default.formatGold(e.ydFee) || 0);
this.lblTdFee.string = "" + (k.default.formatGold(e.tdFee) || 0);
this.lblScore.string = "" + (k.default.formatGold(e.score) || 0);
};
n.onClickDetail = function() {
var e = this;
O.default.playSfx();
k.default.pop(M.GameConfig.pop.UserInfoPop, function(t) {
t.getComponent("UserInfoPop").initUserID(e.userData.userID);
});
};
n.onAddScore = function() {
var e = this;
O.default.playSfx();
O.default.showNumer("增加体力", M.GameConfig.NumberType.FLOAT, function(t) {
e.changeScore(t);
});
};
n.onReduceScore = function() {
var e = this;
O.default.playSfx();
O.default.showNumer("减少体力", M.GameConfig.NumberType.FLOAT, function(t) {
e.changeScore(parseFloat("-" + t));
});
};
n.changeScore = function(e) {
var t = this;
x.default.request(M.GameConfig.ServerEventName.UpdateScore, {
score: parseInt(100 * e),
userID: this.userData.userID,
clubID: R.App.Club.CurrentClubID
}, function(n) {
O.default.alertTip("操作成功");
t.userData.score = t.userData.score + parseInt(100 * e);
t.initData(t.userData, t.showReduce);
R.App.Club.ClubScore = n.score;
});
};
n.onDestroy = function() {
this.removeEvents();
};
return t;
}(cc.Component), C = j(v.prototype, "avatar", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = j(v.prototype, "lblStatus", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = j(v.prototype, "lblName", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = j(v.prototype, "lblId", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = j(v.prototype, "lblYdTurn", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = j(v.prototype, "lblTdTurn", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = j(v.prototype, "lblYdFee", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = j(v.prototype, "lblTdFee", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = j(v.prototype, "lblScore", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), N = j(v.prototype, "addBtn", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), w = j(v.prototype, "reduceBtn", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), D = j(v.prototype, "roleSpr", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), P = j(v.prototype, "roleIconArr", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), v)) || g);
n.default = V;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ChildUserListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "17f92gCkjBH6ruloYXRqEUc", "ChildUserListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b = e("../../../GameBase/GameConfig"), y = A(e("../../../Main/NetWork/Connector")), S = A(e("../../../Main/Script/Cache")), _ = A(e("../../../Main/Script/DataBase")), T = e("../../ui/hall/data/App"), E = A(e("../../common/GameUtils"));
function A(e) {
return e && e.__esModule ? e : {
default: e
};
}
function I(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function N(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function w(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
D(e, t);
}
function D(e, t) {
return (D = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function P(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var M = cc._decorator, x = M.ccclass, O = M.property, G = (i = O(cc.Label), a = O(cc.Label), 
r = O(cc.Node), o = O(cc.Node), s = O(cc.Node), c = O(cc.Prefab), l = O(cc.Node), 
x(u = (d = function(e) {
w(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
I(t = e.call.apply(e, [ this ].concat(i)) || this, "lblTotalCount", h, N(t));
I(t, "lblPage", f, N(t));
I(t, "inviteBtn", p, N(t));
I(t, "pageContainer", m, N(t));
I(t, "itemContent", g, N(t));
I(t, "userItem", v, N(t));
I(t, "searchOtherBtn", C, N(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.selfUserID = 0;
t.pageSize = 30;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.renderData = {
page: [],
rows: {}
};
this.addEvents();
this.searchOtherBtn.active = _.default.player.isSuperUser;
};
n.addEvents = function() {
T.App.EventManager.addEventListener(b.GameConfig.GameEventNames.ADD_USER, this.updateList, this);
};
n.removeEvents = function() {
T.App.EventManager.removeEventListener(b.GameConfig.GameEventNames.ADD_USER, this.updateList, this);
};
n.updateList = function() {
this.downloadList(this.page);
};
n.initUserID = function(e) {
this.selfUserID = e;
e == _.default.player.id && "manager" != T.App.Club.CurrentClubRole || (this.inviteBtn.active = !1);
this.renderUI(1);
};
n.renderUI = function(e) {
var t = this;
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) this.downloadList(e); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ChildUserItem").initData(e, t.selfUserID == _.default.player.id);
t.itemContent.addChild(n);
});
}
};
n.downloadList = function(e) {
var t = this;
this.itemContent.removeAllChildren();
y.default.request(b.GameConfig.ServerEventName.UserList, {
clubID: T.App.Club.CurrentClubID,
userID: this.selfUserID,
page: e,
pageSize: this.pageSize,
type: S.default.openType
}, function(n) {
if (n.users && !E.default.isNullOrEmpty(n.users.rows)) {
-1 == t.renderData.page.indexOf(e) && t.renderData.page.push(e);
t.renderData.rows["" + e] = [];
t.renderData.rows["" + e] = n.users.rows;
t.pageContainer.active = !0;
t.page = e;
t.totalPage = Math.ceil(n.users.count / t.pageSize);
t.lblPage.string = e + "/" + Math.ceil(n.users.count / t.pageSize);
t.lblTotalCount.string = "总人数: " + n.users.count;
n.users.rows.forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ChildUserItem").initData(e, t.selfUserID == _.default.player.id);
t.itemContent.addChild(n);
});
}
});
};
n.addPage = function() {
S.default.playSfx();
if (this.page >= this.totalPage) S.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.renderUI(e);
}
};
n.reducePage = function() {
S.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.renderUI(e);
} else S.default.alertTip("已经是第一页");
};
n.onInviteUser = function() {
S.default.playSfx();
E.default.pop(b.GameConfig.pop.ProxyInviteUser);
};
n.onTotalScore = function() {
S.default.playSfx();
E.default.pop(b.GameConfig.pop.ClubScoreListPop);
};
n.onSearch = function() {
var e = this;
S.default.playSfx();
S.default.showNumer("输入玩家ID", b.GameConfig.NumberType.INT, function(t) {
e.onSearchRes(t);
});
};
n.onSearchRes = function(e) {
var t = this;
this.itemContent.removeAllChildren();
this.pageContainer.active = !1;
y.default.request(b.GameConfig.ServerEventName.UserList, {
clubID: T.App.Club.CurrentClubID,
userID: this.selfUserID,
keywords: e
}, function(e) {
if (e.users && !E.default.isNullOrEmpty(e.users.rows)) {
t.lblTotalCount.string = "总人数: " + e.users.count;
e.users.rows.forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ChildUserItem").initData(e, t.selfUserID == _.default.player.id);
t.itemContent.addChild(n);
});
}
});
};
n.selectUsersTotal = function() {
var e = this;
S.default.playSfx();
S.default.showNumer("输入玩家ID", b.GameConfig.NumberType.INT, function(t) {
e.openDetail(t);
});
};
n.openDetail = function(e) {
E.default.pop(b.GameConfig.pop.UserInfoPop, function(t) {
t.getComponent("UserInfoPop").initUserID(e);
});
};
n.onClickClose = function() {
S.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), h = P(d.prototype, "lblTotalCount", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = P(d.prototype, "lblPage", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = P(d.prototype, "inviteBtn", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = P(d.prototype, "pageContainer", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = P(d.prototype, "itemContent", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = P(d.prototype, "userItem", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = P(d.prototype, "searchOtherBtn", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d)) || u);
n.default = G;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ClipsPre: [ function(e, t) {
"use strict";
cc._RF.push(t, "0f750AnFjJOvYhKQlUT15GY", "ClipsPre");
e("TableInfo"), cc.v2(-506, -229), cc.v2(513, 200), cc.v2(-506, 200);
cc.Class({
extends: cc.Component,
properties: {
SpriteNode: cc.Sprite,
clipsSpriteFrame: [ cc.SpriteFrame ],
spineAnimArr: [ sp.SkeletonData ]
},
start: function() {},
initData: function() {}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ClubActivePop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "797beCVtrlF8Z7ZDKjcygA4", "ClubActivePop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D = e("../../../GameBase/GameConfig"), P = O(e("../../../Main/NetWork/Connector")), M = O(e("../../../Main/Script/Cache")), x = (O(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App"));
O(e("../../common/GameUtils"));
function O(e) {
return e && e.__esModule ? e : {
default: e
};
}
function G(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function R(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function k(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
L(e, t);
}
function L(e, t) {
return (L = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function B(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var F = cc._decorator, U = F.ccclass, H = F.property, z = (i = H(cc.Label), a = H(cc.Label), 
r = H(cc.Label), o = H(cc.Label), s = H(cc.Label), c = H(cc.Label), l = H(cc.Label), 
u = H(cc.Label), d = H(cc.Label), h = H(cc.Label), f = H(cc.Label), p = H(cc.Node), 
U(m = (g = function(e) {
k(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
G(t = e.call.apply(e, [ this ].concat(i)) || this, "lblTodayTurns", v, R(t));
G(t, "lblYesTurns", C, R(t));
G(t, "lblunTodayTurns", b, R(t));
G(t, "lblunYesTurns", y, R(t));
G(t, "lblRewards", S, R(t));
G(t, "lblTips1", _, R(t));
G(t, "lblTips2", T, R(t));
G(t, "lblTips3", E, R(t));
G(t, "lblTips4", A, R(t));
G(t, "lblTips5", I, R(t));
G(t, "time", N, R(t));
G(t, "rewardBtn", w, R(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.renderUI();
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.renderUI = function() {
var e = this;
P.default.request(D.GameConfig.ServerEventName.ClubActive, {
clubID: x.App.Club.CurrentClubID
}, function(t) {
var n = t.data;
e.rewardBtn.active = n.rewardStatus.canReceive;
e.lblYesTurns.string = n.yesterdayData.validSumTurn;
e.lblTodayTurns.string = n.todayData.validSumTurn;
e.lblunYesTurns.string = n.yesterdayData.invalidSumTurn;
e.lblunTodayTurns.string = n.todayData.invalidSumTurn;
e.lblRewards.string = n.rewardStatus.reward || 0;
e.lblTips1.string = "参与" + n.tasks[0].turn + "局 奖" + n.tasks[0].reward;
e.lblTips2.string = "参与" + n.tasks[1].turn + "局 奖" + n.tasks[1].reward;
e.lblTips3.string = "参与" + n.tasks[2].turn + "局 奖" + n.tasks[2].reward;
e.lblTips4.string = "参与" + n.tasks[3].turn + "局 奖" + n.tasks[3].reward;
e.lblTips5.string = "参与" + n.tasks[4].turn + "局 奖" + n.tasks[4].reward;
e.time.string = new Date(n.dates[0]).format("MM-dd hh:mm") + " 至 " + new Date(n.dates[1]).format("MM-dd hh:mm");
}, !0, function() {});
};
n.getReward = function() {
var e = this;
P.default.request(D.GameConfig.ServerEventName.GetTaskReward, {
clubID: x.App.Club.CurrentClubID
}, function(t) {
console.log(t);
x.App.Club.ClubScore = t.score;
M.default.alertTip("领取成功");
x.App.EventManager.dispatchEventWith(D.GameConfig.GameEventNames.CLUB_DATA_CHANGE);
e.renderUI();
});
};
n.onClickClose = function() {
M.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), v = B(g.prototype, "lblTodayTurns", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = B(g.prototype, "lblYesTurns", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = B(g.prototype, "lblunTodayTurns", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = B(g.prototype, "lblunYesTurns", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = B(g.prototype, "lblRewards", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = B(g.prototype, "lblTips1", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = B(g.prototype, "lblTips2", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = B(g.prototype, "lblTips3", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = B(g.prototype, "lblTips4", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = B(g.prototype, "lblTips5", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), N = B(g.prototype, "time", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), w = B(g.prototype, "rewardBtn", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g)) || m);
n.default = z;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ClubBankPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "4848dDg3CBMaZ69nKbUmgzm", "ClubBankPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N = e("../../../GameBase/GameConfig"), w = G(e("../../../Main/Script/Cache")), D = e("../../ui/hall/data/App"), P = G(e("../../common/GameUtils")), M = G(e("../../../Main/Script/DataBase")), x = G(e("../../../Main/NetWork/Connector")), O = e("../../../Main/Script/native-extend");
function G(e) {
return e && e.__esModule ? e : {
default: e
};
}
function R(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function k(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function L(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
B(e, t);
}
function B(e, t) {
return (B = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function F(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var U = cc._decorator, H = U.ccclass, z = U.property, j = (i = z(cc.Label), a = z(cc.Label), 
r = z(cc.Label), o = z(cc.Label), s = z(cc.Label), c = z(cc.Node), l = z(cc.Node), 
u = z(cc.Node), d = z(cc.Prefab), h = z(cc.Label), f = z(cc.Node), H(p = (m = function(e) {
L(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
R(t = e.call.apply(e, [ this ].concat(i)) || this, "tips1", g, k(t));
R(t, "tips2", v, k(t));
R(t, "tips3", C, k(t));
R(t, "scoreInput", b, k(t));
R(t, "bankInput", y, k(t));
R(t, "bankNode", S, k(t));
R(t, "listNode", _, k(t));
R(t, "itemContent", T, k(t));
R(t, "listItem", E, k(t));
R(t, "lblPage", A, k(t));
R(t, "pageContainer", I, k(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.currentFun = null;
t.listShow = !1;
t.totalShow = !1;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.renderBank();
};
n.addEvents = function() {
D.App.EventManager.addEventListener(N.GameConfig.GameEventNames.CLUB_DATA_CHANGE, this.renderBank, this);
};
n.removeEvents = function() {
D.App.EventManager.removeEventListener(N.GameConfig.GameEventNames.CLUB_DATA_CHANGE, this.renderBank, this);
};
n.showBankNode = function(e) {
this.bankNode.active = e;
this.listNode.active = !e;
};
n.showB = function() {
this.bankNode.active = !0;
this.listNode.active = !1;
};
n.renderBank = function() {
this.scoreInput.string = P.default.formatGold(D.App.Club.ClubScore);
this.bankInput.string = P.default.formatGold(D.App.Club.ClubBank);
if (!this.totalShow && !this.listShow) {
this.totalShow = !1;
this.listShow = !1;
this.showBankNode(!0);
}
};
n.showList = function() {
w.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.page = 1;
this.pageContainer.active = !1;
this.currentFun = this.renderList;
this.showBankNode(!1);
this.totalShow = !1;
this.listShow = !0;
this.renderList(1);
};
n.renderList = function(e) {
var t = this;
this.tips1.string = "时间";
this.tips2.string = "事件";
this.tips3.string = "剩余";
this.itemContent.removeAllChildren();
var n = this;
if (-1 == this.renderData.page.indexOf(e)) x.default.request(N.GameConfig.ServerEventName.UserScoreLog, {
clubID: D.App.Club.CurrentClubID,
userID: M.default.player.id,
page: e,
pageSize: 10
}, function(i) {
if (i.log && !P.default.isNullOrEmpty(i.log.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = i.log.rows;
t.pageContainer.active = !0;
t.page = e;
t.totalPage = Math.ceil(i.log.count / 10);
t.lblPage.string = e + "/" + Math.ceil(i.log.count / 10);
i.log.rows.forEach(function(e) {
var i = cc.instantiate(t.listItem);
i.getChildByName("time").getComponent(cc.Label).string = new Date(e.createdAt).format("yyyy-MM-dd hh:mm:ss");
i.getChildByName("event").getComponent(cc.Label).string = e.event;
i.on(cc.Node.EventType.TOUCH_END, function() {
w.default.showTipsMsg(e.remarks || "暂无详细信息");
O.Social.setCopy(e.remarks || "暂无详细信息");
w.default.alertTip("已复制到粘贴板");
}, n);
i.getChildByName("score").getComponent(cc.Label).string = P.default.formatGold(e.remainScore) + (0 == e.remainBank ? "" : "(" + P.default.formatGold(e.remainBank) + ")");
t.itemContent.addChild(i);
});
}
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.listItem);
n.getChildByName("time").getComponent(cc.Label).string = new Date(e.createdAt).format("yyyy-MM-dd hh:mm:ss");
n.getChildByName("event").getComponent(cc.Label).string = e.event;
n.getChildByName("score").getComponent(cc.Label).string = P.default.formatGold(e.remainScore) + (0 == e.remainBank ? "" : "(" + P.default.formatGold(e.remainBank) + ")");
t.itemContent.addChild(n);
});
}
};
n.showTotal = function() {
w.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.page = 1;
this.pageContainer.active = !1;
this.currentFun = this.renderTotal;
this.showBankNode(!1);
this.renderTotal(1);
this.totalShow = !0;
this.listShow = !1;
};
n.renderTotal = function(e) {
var t = this;
this.tips1.string = "时间";
this.tips2.string = "总增加";
this.tips3.string = "总减少";
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) x.default.request(N.GameConfig.ServerEventName.ScoreSummary, {
clubID: D.App.Club.CurrentClubID,
userID: M.default.player.id,
page: e,
pageSize: 8
}, function(n) {
if (n.logs && !P.default.isNullOrEmpty(n.logs.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.logs.rows;
t.pageContainer.active = !0;
t.page = e;
var i = "number" == typeof n.logs.count ? n.logs.count : n.logs.count.length;
t.totalPage = Math.ceil(i / 10);
t.lblPage.string = e + "/" + Math.ceil(i / 10);
n.logs.rows.forEach(function(e) {
var n = cc.instantiate(t.listItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("event").getComponent(cc.Label).string = "" + P.default.formatGold(e.inc);
n.getChildByName("score").getComponent(cc.Label).string = "" + P.default.formatGold(e.dec);
t.itemContent.addChild(n);
});
}
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.listItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("event").getComponent(cc.Label).string = "" + P.default.formatGold(e.inc);
n.getChildByName("score").getComponent(cc.Label).string = "" + P.default.formatGold(e.dec);
t.itemContent.addChild(n);
});
}
};
n.addPage = function() {
w.default.playSfx();
if (this.page >= this.totalPage) w.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.currentFun(e);
}
};
n.reducePage = function() {
w.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.currentFun(e);
} else w.default.alertTip("已经是第一页");
};
n.onClickSave = function() {
var e = this;
w.default.playSfx();
w.default.showNumer("存储体力", N.GameConfig.NumberType.FLOAT, function(t) {
e.onUpdateBank(parseFloat("-" + t).toFixed(2));
});
};
n.onClickAllSave = function() {
w.default.playSfx();
this.onUpdateBank(P.default.formatGold("-" + D.App.Club.ClubScore));
};
n.onClickGet = function() {
var e = this;
w.default.playSfx();
w.default.showNumer("提取体力", N.GameConfig.NumberType.FLOAT, function(t) {
e.onUpdateBank(t);
});
};
n.onClickAllGet = function() {
w.default.playSfx();
this.onUpdateBank(P.default.formatGold(D.App.Club.ClubBank));
};
n.onUpdateBank = function(e) {
0 != e ? x.default.request(N.GameConfig.ServerEventName.UpdateClubBank, {
score: parseInt(100 * e),
userID: M.default.player.id,
clubID: D.App.Club.CurrentClubID
}, function(e) {
w.default.alertTip("修改成功");
D.App.Club.ClubBank = e.bank;
D.App.Club.ClubScore = e.score;
}) : w.default.alertTip("请输入正确数据");
};
n.onClickClose = function() {
w.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), g = F(m.prototype, "tips1", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = F(m.prototype, "tips2", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = F(m.prototype, "tips3", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = F(m.prototype, "scoreInput", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = F(m.prototype, "bankInput", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = F(m.prototype, "bankNode", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = F(m.prototype, "listNode", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = F(m.prototype, "itemContent", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = F(m.prototype, "listItem", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = F(m.prototype, "lblPage", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = F(m.prototype, "pageContainer", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m)) || p);
n.default = j;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/native-extend": "native-extend",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ClubHistoryDetailItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "d52dfXSeU1HrpOeYBU3FoKg", "ClubHistoryDetailItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = m(e("../../../Main/NetWork/Connector")), d = m(e("../../../Main/Script/Cache")), h = m(e("../../../Main/Script/DataBase")), f = e("../../../Main/Script/native-extend"), p = m(e("../../common/GameUtils"));
function m(e) {
return e && e.__esModule ? e : {
default: e
};
}
function g(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function v(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function C(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
b(e, t);
}
function b(e, t) {
return (b = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function y(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var S = cc._decorator, _ = S.ccclass, T = S.property, E = (i = T([ cc.Label ]), 
a = T(cc.Label), _(r = (o = function(e) {
C(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
g(t = e.call.apply(e, [ this ].concat(i)) || this, "tipsArr", s, v(t));
g(t, "lblTurn", c, v(t));
t.replayID = null;
t.gameType = null;
t.fileID = null;
t.linkCount = 0;
return t;
}
var n = t.prototype;
n.initData = function(e, t) {
var n = this;
this.lblTurn.string = "" + e.turn;
this.fileID = e.fileID;
this.replayID = e.strDate + "/" + e.fileID + "_" + e.turn;
e.score.scores.forEach(function(e, i) {
n.tipsArr[i].node.active = !0;
n.tipsArr[i].string = "LDZP" == t ? e : "" + p.default.formatGold(e);
});
};
n.onClickCopy = function() {
d.default.playSfx();
d.default.alertTip("复制 分享码 成功,可发送给他人");
var e = this.replayID.indexOf("/"), t = this.replayID.indexOf("_");
this.replayID.slice(e + 1, t);
f.Social.setCopy(this.replayID);
console.log("123123", this.replayID);
};
n.onClickHistory = function() {
var e = this;
d.default.playSfx();
var t = this.replayID.indexOf("/"), n = this.replayID.indexOf("_"), i = this.replayID.slice(t + 1, n), a = h.default.GAME_TYPE[i] < 10 ? "0" + h.default.GAME_TYPE[i] : h.default.GAME_TYPE[i];
u.default.get(l.GameConfig.RecordUrl + "records/" + this.replayID + ".json", "getJson", function(t) {
d.default.replayData = t;
l.GameConfig.CurrentReplayData = e.replayID;
e.linkCount = 0;
null != t ? "" != a ? cc.loader.loadRes("Main/Prefab/replay" + a, function(e, t) {
e ? cc.log("error to load replay") : cc.instantiate(t).parent = cc.find("Canvas");
}) : d.default.alertTip("暂时无法播放") : d.default.alertTip("暂无回放");
}, !0, function() {
if (0 == e.linkCount) {
var t = e.replayID.split("/")[0], n = t.substring(0, 4), i = t.substring(4, 6) - 1, a = t.substring(6, 8), r = new Date(n, i, a);
r.setDate(r.getDate() - 1);
e.linkCount++;
var o = r.getFullYear() + ("0" + (r.getMonth() + 1)).slice(-2) + ("0" + r.getDate()).slice(-2), s = o + "/" + e.replayID.split("/")[1];
console.log(o, s);
e.replayID = s;
e.onClickHistory();
}
});
};
return t;
}(cc.Component), s = y(o.prototype, "tipsArr", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), c = y(o.prototype, "lblTurn", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), o)) || r);
n.default = E;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/native-extend": "native-extend",
"../../common/GameUtils": "GameUtils"
} ],
ClubHistoryDetailPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "9f29fPlVLFICq6Y7ST+5sL1", "ClubHistoryDetailPop");
n.__esModule = !0;
n.default = void 0;
e("../../../GameBase/GameConfig"), f(e("../../../Main/NetWork/Connector"));
var i, a, r, o, s, c, l, u, d = f(e("../../../Main/Script/Cache")), h = (f(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App"), f(e("../../common/GameUtils")));
f(e("../common/Avatar"));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
function p(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function m(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function g(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
v(e, t);
}
function v(e, t) {
return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function C(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var b = cc._decorator, y = b.ccclass, S = b.property, _ = (i = S([ cc.Label ]), 
a = S(cc.Node), r = S(cc.Prefab), y(o = (s = function(e) {
g(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
p(t = e.call.apply(e, [ this ].concat(i)) || this, "tipsArr", c, m(t));
p(t, "itemContent", l, m(t));
p(t, "detailItem", u, m(t));
t.historyData = null;
return t;
}
var n = t.prototype;
n.initData = function(e) {
var t = this;
console.log("2123123", e);
e.data.players.forEach(function(e, n) {
t.tipsArr[n].node.active = !0;
t.tipsArr[n].string = h.default.getStringByLength(e.prop.name, 5);
});
this.itemContent.removeAllChildren();
e.data.details.forEach(function(n, i) {
var a = cc.instantiate(t.detailItem), r = {
fileID: e.fileID,
score: n,
turn: i + 1,
strDate: e.strDate
};
a.getComponent("ClubHistoryDetailItem").initData(r, e.gameType);
t.itemContent.addChild(a);
});
};
n.onClickClose = function() {
d.default.playSfx();
this.node.destroy();
};
return t;
}(cc.Component), c = C(s.prototype, "tipsArr", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), l = C(s.prototype, "itemContent", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = C(s.prototype, "detailItem", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = _;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ClubHistoryListItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "dee70OdRw1BPYozUchUeuHI", "ClubHistoryListItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S = e("../../../GameBase/GameConfig"), _ = (I(e("../../../Main/NetWork/Connector")), 
I(e("../../../Main/Script/Cache"))), T = I(e("../../../Main/Script/DataBase")), E = (e("../../ui/hall/data/App"), 
I(e("../../common/GameUtils"))), A = I(e("../common/Avatar"));
function I(e) {
return e && e.__esModule ? e : {
default: e
};
}
function N(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function w(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function D(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
P(e, t);
}
function P(e, t) {
return (P = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function M(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var x = cc._decorator, O = x.ccclass, G = x.property, R = (i = G([ cc.Node ]), a = G(cc.Label), 
r = G(cc.Label), o = G(cc.Label), s = G(cc.Sprite), c = G([ cc.SpriteFrame ]), l = G(cc.Font), 
u = G(cc.Font), O(d = (h = function(e) {
D(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
N(t = e.call.apply(e, [ this ].concat(i)) || this, "players", f, w(t));
N(t, "lblGameName", p, w(t));
N(t, "lblDesc", m, w(t));
N(t, "lblRule", g, w(t));
N(t, "iconSpr", v, w(t));
N(t, "iconSprArr", C, w(t));
N(t, "winFont", b, w(t));
N(t, "loseFont", y, w(t));
t.historyData = null;
return t;
}
var n = t.prototype;
n.initData = function(e) {
var t = this;
this.historyData = e;
e.data.players.forEach(function(e, n) {
if (!E.default.isNullOrEmpty(e)) {
t.players[n].active = !0;
var i = t.players[n];
i.getChildByName("avatar").getComponent(A.default).avatarUrl = e.prop.head;
i.getChildByName("name").getComponent(cc.Label).string = E.default.getStringByLength(e.prop.name, 7);
i.getChildByName("id").getComponent(cc.Label).string = "" + e.prop.id;
e.total >= 0 ? i.getChildByName("score").getComponent(cc.Label).font = t.winFont : i.getChildByName("score").getComponent(cc.Label).font = t.loseFont;
i.getChildByName("score").getComponent(cc.Label).string = E.default.formatGold(e.total);
if (e.total > 0 && e.prop.id == T.default.player.id) {
t.iconSpr.node.active = !0;
t.iconSpr.spriteFrame = t.iconSprArr[0];
} else if (e.total < 0 && e.prop.id == T.default.player.id) {
t.iconSpr.node.active = !0;
t.iconSpr.spriteFrame = t.iconSprArr[1];
} else 0 == e.total && e.prop.id == T.default.player.id && (t.iconSpr.node.active = !1);
}
});
this.lblGameName.string = e.rule ? e.rule.name : S.GameConfig.GameName[e.gameType];
this.lblRule.string = e.rule ? "底分:" + E.default.formatGold(e.rule.base) + " 打鸟: " + E.default.formatGold(e.rule.bird) : "";
this.lblDesc.string = "房号: " + e.tableID + " " + new Date(e.createdAt).format("yyyy-MM-dd hh:mm:ss");
};
n.onClickDetail = function() {
var e = this;
_.default.playSfx();
E.default.pop(S.GameConfig.pop.ClubHistoryDetailPop, function(t) {
t.getComponent("ClubHistoryDetailPop").initData(e.historyData);
});
};
return t;
}(cc.Component), f = M(h.prototype, "players", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), p = M(h.prototype, "lblGameName", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = M(h.prototype, "lblDesc", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = M(h.prototype, "lblRule", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = M(h.prototype, "iconSpr", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = M(h.prototype, "iconSprArr", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), b = M(h.prototype, "winFont", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = M(h.prototype, "loseFont", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h)) || d);
n.default = R;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ClubHistoryListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "f68cbV5vB5Bq6KXDqmcu/tW", "ClubHistoryListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v = e("../../../GameBase/GameConfig"), C = T(e("../../../Main/NetWork/Connector")), b = T(e("../../../Main/Script/Cache")), y = T(e("../../../Main/Script/DataBase")), S = e("../../ui/hall/data/App"), _ = T(e("../../common/GameUtils"));
function T(e) {
return e && e.__esModule ? e : {
default: e
};
}
function E(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function A(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function I(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
N(e, t);
}
function N(e, t) {
return (N = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function w(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var D = cc._decorator, P = D.ccclass, M = D.property, x = (i = M(cc.EditBox), a = M(cc.Label), 
r = M(cc.Node), o = M(cc.Node), s = M(cc.Prefab), c = M(cc.Node), P(l = (u = function(e) {
I(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
E(t = e.call.apply(e, [ this ].concat(i)) || this, "replayInput", d, A(t));
E(t, "lblPage", h, A(t));
E(t, "pageContainer", f, A(t));
E(t, "itemContent", p, A(t));
E(t, "userItem", m, A(t));
E(t, "searchUser", g, A(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.selfUserID = 0;
t.pageSize = 30;
t.linkCount = 0;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.renderData = {
page: [],
rows: {}
};
this.addEvents();
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.initUserID = function(e) {
console.log(S.App.Club.CurrentClubRole);
this.searchUser.active = "user" != S.App.Club.CurrentClubRole;
this.selfUserID = e;
this.renderUI(1);
};
n.renderUI = function(e) {
var t = this;
this.itemContent.removeAllChildren();
C.default.request(v.GameConfig.ServerEventName.ClubLogs, {
clubID: S.App.Club.CurrentClubID,
userID: this.selfUserID,
page: e,
pageSize: this.pageSize
}, function(n) {
if (n.logs && !_.default.isNullOrEmpty(n.logs.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.logs.rows;
t.pageContainer.active = !0;
t.page = e;
t.totalPage = Math.ceil(n.logs.count / t.pageSize);
t.lblPage.string = e + "/" + Math.ceil(n.logs.count / t.pageSize);
n.logs.rows.forEach(function(e, n) {
var i = cc.instantiate(t.userItem);
i.getComponent("ClubHistoryListItem").initData(e, n);
t.itemContent.addChild(i);
});
} else t.pageContainer.active = !1;
});
};
n.addPage = function() {
b.default.playSfx();
if (this.page >= this.totalPage) b.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.renderUI(e);
}
};
n.reducePage = function() {
b.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.renderUI(e);
} else b.default.alertTip("已经是第一页");
};
n.onClickSearch = function() {
var e = this;
if (_.default.isNullOrEmpty(this.replayInput.string)) b.default.alertTip("请输入回放码"); else {
var t = this.replayInput.string.indexOf("/"), n = this.replayInput.string.indexOf("_");
if (-1 != t && -1 != n) {
var i = this.replayInput.string.slice(t + 1, n), a = y.default.GAME_TYPE[i] < 10 ? "0" + y.default.GAME_TYPE[i] : y.default.GAME_TYPE[i];
_.default.isNullOrEmpty(a) ? b.default.alertTip("回放码错误") : C.default.get(v.GameConfig.RecordUrl + "records/" + this.replayInput.string + ".json", "getJson", function(t) {
e.linkCount = 0;
b.default.replayData = t;
if (null != t) if ("" != a) {
v.GameConfig.CurrentReplayData = e.replayInput.string;
cc.loader.loadRes("Main/Prefab/replay" + a, function(e, t) {
e ? cc.log("error to load replay") : cc.instantiate(t).parent = cc.find("Canvas");
});
} else b.default.alertTip("暂时无法播放"); else b.default.alertTip("暂无回放");
}, !0, function() {
if (0 == e.linkCount) {
var t = e.replayInput.string.split("/")[0], n = t.substring(0, 4), i = t.substring(4, 6) - 1, a = t.substring(6, 8), r = new Date(n, i, a);
r.setDate(r.getDate() - 1);
e.linkCount++;
var o = r.getFullYear() + ("0" + (r.getMonth() + 1)).slice(-2) + ("0" + r.getDate()).slice(-2), s = o + "/" + e.replayInput.string.split("/")[1];
console.log(o, s);
e.replayInput.string = s;
e.onClickSearch();
}
});
} else b.default.alertTip("回放码错误");
}
};
n.onSearch = function() {
var e = this;
b.default.playSfx();
b.default.showNumer("输入玩家ID", v.GameConfig.NumberType.INT, function(t) {
e.initUserID(t);
});
};
n.onClickClose = function() {
b.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), d = w(u.prototype, "replayInput", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = w(u.prototype, "lblPage", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = w(u.prototype, "pageContainer", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = w(u.prototype, "itemContent", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = w(u.prototype, "userItem", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = w(u.prototype, "searchUser", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u)) || l);
n.default = x;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ClubListItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "920e7GHOSdPAZse7wdVbSKi", "ClubListItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T = e("../../../GameBase/GameConfig"), E = (N(e("../../../Main/Script/Cache")), 
N(e("../../common/GameUtils"))), A = e("../../ui/hall/data/App"), I = N(e("../common/Avatar"));
function N(e) {
return e && e.__esModule ? e : {
default: e
};
}
function w(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function D(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function P(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
M(e, t);
}
function M(e, t) {
return (M = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function x(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var O = cc._decorator, G = O.ccclass, R = O.property, k = (i = R(cc.SpriteFrame), 
a = R(cc.SpriteFrame), r = R(I.default), o = R(cc.Label), s = R(cc.Label), c = R(cc.Label), 
l = R(cc.Label), u = R(cc.Label), d = R(cc.Label), G(h = (f = function(e) {
P(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
w(t = e.call.apply(e, [ this ].concat(i)) || this, "clubBg", p, D(t));
w(t, "leagueBg", m, D(t));
w(t, "avatar", g, D(t));
w(t, "lblCuster", v, D(t));
w(t, "lblInvite", C, D(t));
w(t, "lblUserCount", b, D(t));
w(t, "lblClubName", y, D(t));
w(t, "lblClubID", S, D(t));
w(t, "lblRole", _, D(t));
return t;
}
var n = t.prototype;
n.renderClub = function(e) {
this.node.getComponent(cc.Sprite).spriteFrame = this.clubBg;
this.avatar.avatarUrl = e.owner.head;
this.lblCuster.string = "会长: " + e.owner.name;
this.lblInvite.string = "邀请码: " + e.inviter;
this.lblUserCount.string = "总人数: " + e.peoples;
this.lblClubName.string = e.club.name;
this.lblClubID.string = "公会ID: " + e.clubID;
this.lblRole.string = "角色: " + T.GameConfig.ROLE_DESC[e.role];
this.node.on(cc.Node.EventType.TOUCH_END, function() {
A.App.Club.CurrentClubID = e.clubID;
A.App.Club.IsLeague = !1;
E.default.pop(T.GameConfig.pop.TablePop);
A.App.EventManager.dispatchEventWith(T.GameConfig.GameEventNames.CHOOSE_CLUB);
}, this);
};
n.renderLeague = function(e) {
this.node.getComponent(cc.Sprite).spriteFrame = this.leagueBg;
this.avatar.avatarUrl = e.owner.head;
this.lblCuster.string = "会长: " + e.owner.name;
this.lblInvite.string = "邀请码: " + e.inviter;
this.lblUserCount.string = "总人数: " + e.peoples;
this.lblClubName.string = e.club.name;
this.lblClubID.string = "联盟ID: " + e.clubID;
this.lblRole.string = "角色: " + T.GameConfig.ROLE_DESC[e.role];
this.node.on(cc.Node.EventType.TOUCH_END, function() {
A.App.Club.CurrentClubID = e.clubID;
A.App.Club.IsLeague = !0;
E.default.pop(T.GameConfig.pop.TablePop);
A.App.EventManager.dispatchEventWith(T.GameConfig.GameEventNames.CHOOSE_CLUB);
}, this);
};
return t;
}(cc.Component), p = x(f.prototype, "clubBg", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = x(f.prototype, "leagueBg", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = x(f.prototype, "avatar", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = x(f.prototype, "lblCuster", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = x(f.prototype, "lblInvite", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = x(f.prototype, "lblUserCount", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = x(f.prototype, "lblClubName", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = x(f.prototype, "lblClubID", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = x(f.prototype, "lblRole", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f)) || h);
n.default = k;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ClubListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "2cea5zi6elHyLRcl5ZMm9Fu", "ClubListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m = e("../../../GameBase/GameConfig"), g = y(e("../../../Main/NetWork/Connector")), v = y(e("../../../Main/Script/Cache")), C = e("../../ui/hall/data/App"), b = y(e("../../common/GameUtils"));
function y(e) {
return e && e.__esModule ? e : {
default: e
};
}
function S(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function _(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function T(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
E(e, t);
}
function E(e, t) {
return (E = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function A(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var I = cc._decorator, N = I.ccclass, w = I.property, D = (i = w(cc.Sprite), a = w(cc.SpriteFrame), 
r = w(cc.SpriteFrame), o = w(cc.Node), s = w(cc.Prefab), N(c = (l = function(e) {
T(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
S(t = e.call.apply(e, [ this ].concat(i)) || this, "titleSpr", u, _(t));
S(t, "clubSpr", d, _(t));
S(t, "leagueSpr", h, _(t));
S(t, "itemContent", f, _(t));
S(t, "clubItem", p, _(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
};
n.addEvents = function() {
C.App.EventManager.addEventListener(m.GameConfig.GameEventNames.CHOOSE_CLUB, this.onClickClose, this);
};
n.removeEvents = function() {
C.App.EventManager.removeEventListener(m.GameConfig.GameEventNames.CHOOSE_CLUB, this.onClickClose, this);
};
n.renderLeague = function() {
var e = this;
this.titleSpr.spriteFrame = this.leagueSpr;
this.itemContent.removeAllChildren();
g.default.request(m.GameConfig.ServerEventName.ClubList, {
isLeague: !0
}, function(t) {
if (!b.default.isNullOrEmpty(t.clubs)) {
C.App.Club.initClubData(t.clubs);
t.clubs.forEach(function(t) {
var n = cc.instantiate(e.clubItem);
n.getComponent("ClubListItem").renderLeague(t);
e.itemContent.addChild(n);
});
}
});
};
n.renderClub = function() {
var e = this;
this.titleSpr.spriteFrame = this.clubSpr;
this.itemContent.removeAllChildren();
g.default.request(m.GameConfig.ServerEventName.ClubList, {
isLeague: !1
}, function(t) {
if (!b.default.isNullOrEmpty(t.clubs)) {
C.App.Club.initClubData(t.clubs);
t.clubs.forEach(function(t) {
var n = cc.instantiate(e.clubItem);
n.getComponent("ClubListItem").renderClub(t);
e.itemContent.addChild(n);
});
}
});
};
n.onClickClose = function() {
v.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), u = A(l.prototype, "titleSpr", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = A(l.prototype, "clubSpr", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = A(l.prototype, "leagueSpr", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = A(l.prototype, "itemContent", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = A(l.prototype, "clubItem", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l)) || c);
n.default = D;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ClubManager: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "1dbff4UWehFSbE70Q/9t9TL", "ClubManager");
n.__esModule = !0;
n.ClubManager = void 0;
var i, a = e("../../../GameBase/GameConfig"), r = (i = e("../../common/GameUtils")) && i.__esModule ? i : {
default: i
}, o = e("./data/App");
function s(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function c(e, t, n) {
t && s(e.prototype, t);
n && s(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var l = function() {
e.getInstance = function() {
this._instance || (this._instance = new e());
return this._instance;
};
function e() {
this._allClub = [];
this._clubIDList = [];
this._clubList = {};
this._currentClub = {};
this._currentClubId = -1;
this._currentClubRole = "user";
this._clubName = "";
this._clubNotice = "";
this._clubScore = 0;
this._clubBank = 0;
this._clubLevel = 0;
this._clubReward = 0;
this._isLeague = !0;
this._shuffleLevel = 0;
}
var t = e.prototype;
t.initClubData = function(e) {
var t = this;
console.log("初始化公会", e);
this.clear();
this._allClub = e;
e.forEach(function(e) {
var n = e.clubID;
t._clubIDList.push(n);
t._clubList[n] = e;
});
};
t.clear = function() {
this._allClub = [];
this._clubIDList = [];
this._clubList = {};
this._currentClubRole = "user";
};
c(e, [ {
key: "CurrentClubRole",
get: function() {
return this._currentClubRole;
},
set: function(e) {
this._currentClubRole = e;
}
}, {
key: "CurrentClubID",
get: function() {
if (0 == this._allClub.length) return -1;
if (-1 == this._currentClubId) {
var e = r.default.getValue(a.GameConfig.StorageKey.LastClubID);
this._currentClubId = -1 == this._clubIDList.indexOf(e) ? this._allClub[0].clubID : e;
}
return this._currentClubId;
},
set: function(e) {
r.default.saveValue(a.GameConfig.StorageKey.LastClubID, e);
this._currentClubId = e;
o.App.EventManager.dispatchEventWith(a.GameConfig.GameEventNames.CLUB_CHANGE);
}
}, {
key: "CurrentClubData",
get: function() {
if (0 == this._allClub.length) return {};
var e = {};
if (r.default.isNullOrEmpty(this._clubList[this._currentClubId])) {
e = this._allClub[0];
this._currentClubId = e.clubID;
} else e = this._clubList[this._currentClubId];
return e;
}
}, {
key: "AllClubData",
get: function() {
return this._allClub;
}
}, {
key: "ClubNotice",
get: function() {
return this._clubNotice;
},
set: function(e) {
this._clubNotice = e;
o.App.EventManager.dispatchEventWith(a.GameConfig.GameEventNames.CLUB_DATA_CHANGE);
}
}, {
key: "ClubScore",
get: function() {
return this._clubScore;
},
set: function(e) {
if (this._clubScore != e) {
this._clubScore = e;
o.App.EventManager.dispatchEventWith(a.GameConfig.GameEventNames.CLUB_DATA_CHANGE);
}
}
}, {
key: "ClubBank",
get: function() {
return this._clubBank;
},
set: function(e) {
if (this._clubBank != e) {
this._clubBank = e;
o.App.EventManager.dispatchEventWith(a.GameConfig.GameEventNames.CLUB_DATA_CHANGE);
}
}
}, {
key: "ClubLevel",
get: function() {
return this._clubLevel;
},
set: function(e) {
if (this._clubLevel != e) {
this._clubLevel = e;
o.App.EventManager.dispatchEventWith(a.GameConfig.GameEventNames.CLUB_DATA_CHANGE);
}
}
}, {
key: "ShuffleLevel",
get: function() {
return this._shuffleLevel;
},
set: function(e) {
if (this._shuffleLevel != e) {
this._shuffleLevel = e;
o.App.EventManager.dispatchEventWith(a.GameConfig.GameEventNames.CLUB_DATA_CHANGE);
}
}
}, {
key: "ClubReward",
get: function() {
return this._clubReward;
},
set: function(e) {
if (this._clubReward != e) {
this._clubReward = e;
o.App.EventManager.dispatchEventWith(a.GameConfig.GameEventNames.CLUB_DATA_CHANGE);
}
}
}, {
key: "ClubName",
get: function() {
return this._clubName;
},
set: function(e) {
this._clubName = e;
o.App.EventManager.dispatchEventWith(a.GameConfig.GameEventNames.CLUB_DATA_CHANGE);
}
}, {
key: "IsLeague",
get: function() {
return this._isLeague;
},
set: function(e) {
this._isLeague = e;
}
} ]);
return e;
}();
n.ClubManager = l;
l._instance = null;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../common/GameUtils": "GameUtils",
"./data/App": "App"
} ],
ClubNoticePop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "8c209V96tVCYawIT83YXlKG", "ClubNoticePop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A = e("../../../GameBase/GameConfig"), I = P(e("../../../Main/NetWork/Connector")), N = P(e("../../../Main/Script/Cache")), w = e("../../ui/hall/data/App"), D = P(e("../../common/GameUtils"));
P(e("../common/CompList"));
function P(e) {
return e && e.__esModule ? e : {
default: e
};
}
function M(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function x(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function O(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
G(e, t);
}
function G(e, t) {
return (G = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function R(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var k = cc._decorator, L = k.ccclass, B = k.property, F = (i = B(cc.Label), a = B(cc.Label), 
r = B(cc.Label), o = B(cc.EditBox), s = B(cc.EditBox), c = B(cc.Node), l = B(cc.Node), 
u = B(cc.Node), d = B(cc.Prefab), h = B(cc.Prefab), L(f = (p = function(e) {
O(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
M(t = e.call.apply(e, [ this ].concat(i)) || this, "lblTitle", m, x(t));
M(t, "lblDescName", g, x(t));
M(t, "lblDescNotice", v, x(t));
M(t, "roomNameInput", C, x(t));
M(t, "noticeInput", b, x(t));
M(t, "noticeNode", y, x(t));
M(t, "tagNode", S, x(t));
M(t, "tagContent", _, x(t));
M(t, "tagItem", T, x(t));
M(t, "listItem", E, x(t));
t.chooseRoom = [];
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.renderNotice(!0);
};
n.addEvents = function() {
w.App.EventManager.addEventListener(A.GameConfig.GameEventNames.SELECT_TAG_HISTORY, this.addTag, this);
w.App.EventManager.addEventListener(A.GameConfig.GameEventNames.CANCEL_TAG_HISTORY, this.removeTag, this);
w.App.EventManager.addEventListener(A.GameConfig.GameEventNames.CLUB_ROOM_CHANGE, this.downloadAllRooms, this);
};
n.removeEvents = function() {
w.App.EventManager.removeEventListener(A.GameConfig.GameEventNames.SELECT_TAG_HISTORY, this.addTag, this);
w.App.EventManager.removeEventListener(A.GameConfig.GameEventNames.CANCEL_TAG_HISTORY, this.removeTag, this);
w.App.EventManager.removeEventListener(A.GameConfig.GameEventNames.CLUB_ROOM_CHANGE, this.downloadAllRooms, this);
};
n.renderNotice = function() {
this.lblTitle.string = "公告";
this.lblDescName.string = w.App.Club.IsLeague ? "联盟名:" : "公会名:";
this.lblDescNotice.string = w.App.Club.IsLeague ? "联盟公告:" : "公会公告:";
this.changeUIActive(!0);
this.roomNameInput.string = w.App.Club.ClubName;
D.default.isNullOrEmpty(w.App.Club.ClubNotice) || (this.noticeInput.string = w.App.Club.ClubNotice);
};
n.changeUIActive = function(e) {
this.noticeNode.active = e;
this.tagNode.active = !1;
};
n.onUpdateNotice = function() {
var e = this;
N.default.playSfx();
D.default.isNullOrEmpty(this.noticeInput.string) ? N.default.alertTip("请输入公会公告") : D.default.isNullOrEmpty(this.roomNameInput.string) ? N.default.alertTip("请输入公会名") : I.default.request(A.GameConfig.ServerEventName.UpdateClubNotice, {
clubID: w.App.Club.CurrentClubID,
name: this.roomNameInput.string,
notice: this.noticeInput.string
}, function() {
N.default.alertTip("修改成功");
w.App.Club.ClubNotice = e.noticeInput.string;
w.App.Club.ClubName = e.roomNameInput.string;
});
};
n.openCreatePop = function() {
N.default.playSfx();
D.default.pop(A.GameConfig.pop.CreateRoomPop);
};
n.downloadAllRooms = function() {
var e = this;
this.lblTitle.string = "房型管理";
this.noticeNode.active = !1;
this.tagNode.active = !0;
this.tagContent.removeAllChildren();
this.chooseRoom = [];
I.default.request(A.GameConfig.ServerEventName.AllRooms, {
clubID: w.App.Club.CurrentClubID
}, function(t) {
D.default.isNullOrEmpty(t.rooms) || t.rooms.forEach(function(t, n) {
var i = cc.instantiate(e.listItem);
t.index = n + 1;
i.getComponent("RoomListItem").initData(t);
e.tagContent.addChild(i);
});
});
};
n.onConfrimRooms = function() {
console.log("提交----", this.chooseRoom);
I.default.request(A.GameConfig.ServerEventName.UpdateClubNotice, {
clubID: w.App.Club.CurrentClubID,
rooms: this.chooseRoom
}, function() {
N.default.alertTip("修改成功");
w.App.EventManager.dispatchEventWith(A.GameConfig.GameEventNames.CLUB_ROOM_CHANGE);
});
};
n.addTag = function(e) {
-1 == this.chooseRoom.findIndex(function(t) {
return t.roomID == e.data.roomID;
}) && this.chooseRoom.push(e.data);
};
n.removeTag = function(e) {
var t = this.chooseRoom.findIndex(function(t) {
return t.roomID == e.data.roomID;
});
-1 != t && this.chooseRoom.splice(t, 1);
};
n.onClickClose = function() {
N.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), m = R(p.prototype, "lblTitle", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = R(p.prototype, "lblDescName", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = R(p.prototype, "lblDescNotice", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = R(p.prototype, "roomNameInput", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = R(p.prototype, "noticeInput", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = R(p.prototype, "noticeNode", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = R(p.prototype, "tagNode", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = R(p.prototype, "tagContent", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = R(p.prototype, "tagItem", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = R(p.prototype, "listItem", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p)) || f);
n.default = F;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/CompList": "CompList"
} ],
ClubProxyItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "c1d23oLcrtPFJTuSAcNfL9y", "ClubProxyItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N = e("../../../GameBase/GameConfig"), w = G(e("../../../Main/NetWork/Connector")), D = G(e("../../../Main/Script/Cache")), P = G(e("../../../Main/Script/DataBase")), M = e("../../ui/hall/data/App"), x = G(e("../../common/GameUtils")), O = G(e("../common/Avatar"));
function G(e) {
return e && e.__esModule ? e : {
default: e
};
}
function R(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function k(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function L(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
B(e, t);
}
function B(e, t) {
return (B = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function F(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var U = cc._decorator, H = U.ccclass, z = U.property, j = (i = z(O.default), a = z(cc.Label), 
r = z(cc.Label), o = z(cc.Label), s = z(cc.Label), c = z(cc.Label), l = z(cc.Label), 
u = z(cc.Label), d = z(cc.Label), h = z(cc.Node), f = z(cc.Node), H(p = (m = function(e) {
L(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
R(t = e.call.apply(e, [ this ].concat(i)) || this, "avatar", g, k(t));
R(t, "lblLevel", v, k(t));
R(t, "lblShuffle", C, k(t));
R(t, "lblName", b, k(t));
R(t, "lblId", y, k(t));
R(t, "lblYdTurn", S, k(t));
R(t, "lblTdTurn", _, k(t));
R(t, "lblYdFee", T, k(t));
R(t, "lblTdFee", E, k(t));
R(t, "levelBtn", A, k(t));
R(t, "proxyBtn", I, k(t));
t.userData = null;
return t;
}
var n = t.prototype;
n.initData = function(e) {
this.userData = e;
this.avatar.avatarUrl = e.user.head;
this.lblName.string = "" + x.default.getStringByLength(e.user.name, 6);
this.lblId.string = "" + e.userID;
this.lblLevel.string = "" + e.level;
this.lblShuffle.node.active = 0 != M.App.Club.ShuffleLevel;
this.lblShuffle.string = "" + e.shuffleLevel;
if (e.userID == P.default.player.id) {
this.levelBtn.active = !1;
this.proxyBtn.active = !1;
}
this.lblYdTurn.string = "" + (e.ydTurn || 0);
this.lblTdTurn.string = "" + (e.tdTurn || 0);
this.lblYdFee.string = "" + (x.default.formatGold(e.ydFee) || 0);
this.lblTdFee.string = "" + (x.default.formatGold(e.tdFee) || 0);
};
n.onClickDetail = function() {
var e = this;
D.default.playSfx();
x.default.pop(N.GameConfig.pop.UserInfoPop, function(t) {
t.getComponent("UserInfoPop").initUserID(e.userData.userID);
});
};
n.openChildUser = function() {
var e = this;
D.default.openType = 0;
D.default.playSfx();
x.default.pop(N.GameConfig.pop.ChildUserListPop, function(t) {
t.getComponent("ChildUserListPop").initUserID(e.userData.userID);
});
};
n.openChildProxy = function() {
D.default.playSfx();
M.App.EventManager.dispatchEventWith(N.GameConfig.GameEventNames.PROXY_LIST_UPDATE, this.userData.userID);
};
n.onChangeLevel = function() {
var e = this;
D.default.playSfx();
x.default.pop(N.GameConfig.pop.ProxyLevelPop, function(t) {
t.getComponent("ProxyLevelPop").initData(e.userData);
});
};
n.changeLevel = function(e) {
var t = this;
w.default.request(N.GameConfig.ServerEventName.UpdateLevel, {
level: e,
userID: this.userData.userID,
clubID: M.App.Club.CurrentClubID,
whole: !1
}, function() {
D.default.alertTip("操作成功");
t.userData.level = "" + parseInt(e);
t.initData(t.userData);
});
};
return t;
}(cc.Component), g = F(m.prototype, "avatar", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = F(m.prototype, "lblLevel", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = F(m.prototype, "lblShuffle", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = F(m.prototype, "lblName", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = F(m.prototype, "lblId", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = F(m.prototype, "lblYdTurn", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = F(m.prototype, "lblTdTurn", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = F(m.prototype, "lblYdFee", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = F(m.prototype, "lblTdFee", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = F(m.prototype, "levelBtn", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = F(m.prototype, "proxyBtn", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m)) || p);
n.default = j;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ClubProxyListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "c5c9ax3rJFLFKsvlinYzkhu", "ClubProxyListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T = e("../../../GameBase/GameConfig"), E = D(e("../../../Main/NetWork/Connector")), A = D(e("../../../Main/Script/Cache")), I = D(e("../../../Main/Script/DataBase")), N = e("../../ui/hall/data/App"), w = D(e("../../common/GameUtils"));
function D(e) {
return e && e.__esModule ? e : {
default: e
};
}
function P(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function M(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function x(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
O(e, t);
}
function O(e, t) {
return (O = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function G(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var R = cc._decorator, k = R.ccclass, L = R.property, B = (i = L(cc.Label), a = L(cc.Label), 
r = L(cc.Node), o = L(cc.Node), s = L(cc.Node), c = L(cc.Node), l = L(cc.Node), 
u = L(cc.Prefab), d = L(cc.Node), k(h = (f = function(e) {
x(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
P(t = e.call.apply(e, [ this ].concat(i)) || this, "lblTotalCount", p, M(t));
P(t, "lblPage", m, M(t));
P(t, "changeBtn", g, M(t));
P(t, "proxyBtn", v, M(t));
P(t, "inviteBtn", C, M(t));
P(t, "pageContainer", b, M(t));
P(t, "itemContent", y, M(t));
P(t, "userItem", S, M(t));
P(t, "xipaiTips", _, M(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.selfUserID = 0;
t.pageSize = 30;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.renderData = {
page: [],
rows: {}
};
this.addEvents();
this.xipaiTips.active = 0 != N.App.Club.ShuffleLevel;
this.changeBtn.active = "owner" == N.App.Club.CurrentClubRole;
this.proxyBtn.active = "owner" == N.App.Club.CurrentClubRole;
};
n.addEvents = function() {
N.App.EventManager.addEventListener(T.GameConfig.GameEventNames.PROXY_LIST_UPDATE, this.handleUpdate, this);
N.App.EventManager.addEventListener(T.GameConfig.GameEventNames.ADD_PROXY, this.updateList, this);
N.App.EventManager.addEventListener(T.GameConfig.GameEventNames.PROXY_LEVEL_UPDATE, this.updateList, this);
};
n.removeEvents = function() {
N.App.EventManager.removeEventListener(T.GameConfig.GameEventNames.PROXY_LIST_UPDATE, this.handleUpdate, this);
N.App.EventManager.removeEventListener(T.GameConfig.GameEventNames.ADD_PROXY, this.updateList, this);
N.App.EventManager.removeEventListener(T.GameConfig.GameEventNames.PROXY_LEVEL_UPDATE, this.updateList, this);
};
n.updateList = function() {
this.downloadList(this.page);
};
n.handleUpdate = function(e) {
this.initUserID(e.data);
};
n.initUserID = function(e) {
console.log("---", e);
this.selfUserID = e;
e == I.default.player.id && "manager" != N.App.Club.CurrentClubRole || (this.inviteBtn.active = !1);
this.renderData = {
page: [],
rows: {}
};
this.renderUI(1);
};
n.renderUI = function(e) {
var t = this;
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) this.downloadList(e); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ClubProxyItem").initData(e);
t.itemContent.addChild(n);
});
}
};
n.downloadList = function(e) {
var t = this;
this.itemContent.removeAllChildren();
E.default.request(T.GameConfig.ServerEventName.ProxiesList, {
clubID: N.App.Club.CurrentClubID,
userID: this.selfUserID,
page: e,
pageSize: this.pageSize
}, function(n) {
if (n.proxies && !w.default.isNullOrEmpty(n.proxies.rows)) {
-1 == t.renderData.page.indexOf(e) && t.renderData.page.push(e);
t.renderData.rows["" + e] = [];
t.renderData.rows["" + e] = n.proxies.rows;
t.pageContainer.active = !0;
t.page = e;
t.totalPage = Math.ceil(n.proxies.count / t.pageSize);
t.lblPage.string = e + "/" + Math.ceil(n.proxies.count / t.pageSize);
t.lblTotalCount.string = "总人数: " + n.proxies.count;
n.proxies.rows.forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ClubProxyItem").initData(e);
t.itemContent.addChild(n);
});
}
});
};
n.addPage = function() {
A.default.playSfx();
if (this.page >= this.totalPage) A.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.renderUI(e);
}
};
n.reducePage = function() {
A.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.renderUI(e);
} else A.default.alertTip("已经是第一页");
};
n.onInviteProxy = function() {
A.default.playSfx();
w.default.pop(T.GameConfig.pop.ProxyInviteUser, function(e) {
e.getComponent("ProxyInviteUser").initType("proxy");
});
};
n.onChangeUser = function() {
A.default.playSfx();
w.default.pop(T.GameConfig.pop.ChangeUserPop);
};
n.onChangeProxy = function() {
A.default.playSfx();
w.default.pop(T.GameConfig.pop.ChangeProxyPop);
};
n.onSearch = function() {
var e = this;
A.default.playSfx();
A.default.showNumer("输入玩家ID", T.GameConfig.NumberType.INT, function(t) {
e.onSearchRes(t);
});
};
n.onSearchRes = function(e) {
var t = this;
this.itemContent.removeAllChildren();
this.pageContainer.active = !1;
E.default.request(T.GameConfig.ServerEventName.ProxiesList, {
clubID: N.App.Club.CurrentClubID,
userID: this.selfUserID,
keywords: e
}, function(e) {
if (e.proxies && !w.default.isNullOrEmpty(e.proxies.rows)) {
t.lblTotalCount.string = "总人数: " + e.proxies.count;
e.proxies.rows.forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ClubProxyItem").initData(e);
t.itemContent.addChild(n);
});
}
});
};
n.onRemoveProxy = function() {
var e = this;
A.default.playSfx();
A.default.showNumer("输入代理ID", T.GameConfig.NumberType.INT, function(t) {
e.removeProxy(t);
});
};
n.removeProxy = function(e) {
var t = this;
E.default.request(T.GameConfig.ServerEventName.CancelProxy, {
clubID: N.App.Club.CurrentClubID,
userID: e
}, function() {
A.default.alertTip("删除成功");
t.renderUI(1);
});
};
n.onClickClose = function() {
A.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), p = G(f.prototype, "lblTotalCount", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = G(f.prototype, "lblPage", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = G(f.prototype, "changeBtn", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = G(f.prototype, "proxyBtn", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = G(f.prototype, "inviteBtn", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = G(f.prototype, "pageContainer", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = G(f.prototype, "itemContent", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = G(f.prototype, "userItem", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = G(f.prototype, "xipaiTips", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f)) || h);
n.default = B;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ClubRankPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "75acaI661dJsqkC5JFr46Sh", "ClubRankPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b = e("../../../GameBase/GameConfig"), y = A(e("../../../Main/NetWork/Connector")), S = A(e("../../../Main/Script/Cache")), _ = (A(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App")), T = A(e("../../common/GameUtils")), E = A(e("../common/Avatar"));
function A(e) {
return e && e.__esModule ? e : {
default: e
};
}
function I(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function N(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function w(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
D(e, t);
}
function D(e, t) {
return (D = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function P(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var M = cc._decorator, x = M.ccclass, O = M.property, G = (i = O(cc.Node), a = O(cc.Prefab), 
r = O(cc.Label), o = O(cc.Prefab), s = O(cc.Label), c = O(cc.Label), l = O(cc.Node), 
x(u = (d = function(e) {
w(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
I(t = e.call.apply(e, [ this ].concat(i)) || this, "itemContent", h, N(t));
I(t, "userItem", f, N(t));
I(t, "lblStartDate", p, N(t));
I(t, "selectDate", m, N(t));
I(t, "lblTotalCount", g, N(t));
I(t, "lblPage", v, N(t));
I(t, "pageContainer", C, N(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.selfUserID = 0;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.initRank();
};
n.initRank = function() {
this.renderData = {
page: [],
rows: {}
};
var e = new Date(), t = e.getFullYear(), n = e.getMonth() + 1 >= 10 ? e.getMonth() + 1 : "0" + (e.getMonth() + 1), i = e.getDate() >= 10 ? e.getDate() : "0" + e.getDate();
this.startDate = "" + t + n + i;
this.lblStartDate.string = "日期: " + t + "年" + n + "月" + i + "日";
this.renderUI(1);
};
n.renderUI = function(e) {
var t = this;
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) this.downloadList(e); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e, n) {
var i = cc.instantiate(t.userItem);
i.getChildByName("rank").getComponent(cc.Label).string = n + 1 + 10 * (t.page - 1);
i.getChildByName("avatar").getComponent(E.default).avatarUrl = e.user.head;
i.getChildByName("name").getComponent(cc.Label).string = e.user.name;
i.getChildByName("ID").getComponent(cc.Label).string = e.userID;
i.getChildByName("turn").getComponent(cc.Label).string = e.turn;
i.getChildByName("win").getComponent(cc.Label).string = e.win;
t.itemContent.addChild(i);
});
}
};
n.downloadList = function(e) {
var t = this;
this.itemContent.removeAllChildren();
y.default.request(b.GameConfig.ServerEventName.DailyRank, {
clubID: _.App.Club.CurrentClubID,
strDate: this.startDate,
page: e,
pageSize: 10
}, function(n) {
if (n.log && !T.default.isNullOrEmpty(n.log.rows)) {
-1 == t.renderData.page.indexOf(e) && t.renderData.page.push(e);
t.renderData.rows["" + e] = [];
t.renderData.rows["" + e] = n.log.rows;
t.pageContainer.active = !0;
t.page = e;
t.totalPage = Math.ceil(n.log.count / 10);
t.lblPage.string = e + "/" + Math.ceil(n.log.count / 10);
t.lblTotalCount.string = "总人数: " + n.log.count;
n.log.rows.forEach(function(e, n) {
var i = cc.instantiate(t.userItem);
i.getChildByName("rank").getComponent(cc.Label).string = n + 1 + 10 * (t.page - 1);
i.getChildByName("avatar").getComponent(E.default).avatarUrl = e.user.head;
i.getChildByName("name").getComponent(cc.Label).string = e.user.name;
i.getChildByName("ID").getComponent(cc.Label).string = e.userID;
i.getChildByName("turn").getComponent(cc.Label).string = e.turn;
i.getChildByName("win").getComponent(cc.Label).string = e.win;
t.itemContent.addChild(i);
});
}
});
};
n.addPage = function() {
S.default.playSfx();
if (this.page >= this.totalPage) S.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.renderUI(e);
}
};
n.reducePage = function() {
S.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.renderUI(e);
} else S.default.alertTip("已经是第一页");
};
n.openSelectDate = function() {
var e = this, t = cc.instantiate(this.selectDate);
this.node.addChild(t);
var n = t.getComponent("UIDatePicker");
n.setDate(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
n.setPickDateCallback(function(t, n, i) {
n = n + 1 > 9 ? n + 1 : "0" + (n + 1);
i = i > 9 ? i : "0" + i;
e.startDate = "" + t + n + i;
e.lblStartDate.string = "日期: " + t + "年" + n + "月" + i + "日";
console.log("" + t + n + i);
});
};
n.selectByDate = function() {
var e = parseInt(this.startDate), t = new Date();
if (e > "" + t.getFullYear() + (t.getMonth() + 1 >= 10 ? t.getMonth() + 1 : "0" + (t.getMonth() + 1)) + (t.getDate() >= 10 ? t.getDate() : "0" + t.getDate())) S.default.alertTip("日期不能早于今天"); else {
this.renderData = {
page: [],
rows: {}
};
this.renderUI(1);
}
};
n.onClickClose = function() {
S.default.playSfx();
this.node.destroy();
};
return t;
}(cc.Component), h = P(d.prototype, "itemContent", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = P(d.prototype, "userItem", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = P(d.prototype, "lblStartDate", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = P(d.prototype, "selectDate", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = P(d.prototype, "lblTotalCount", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = P(d.prototype, "lblPage", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = P(d.prototype, "pageContainer", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d)) || u);
n.default = G;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ClubRewardPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "e29cajB1yRER5UTUIUgdIaV", "ClubRewardPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A = e("../../../GameBase/GameConfig"), I = M(e("../../../Main/Script/Cache")), N = e("../../ui/hall/data/App"), w = M(e("../../common/GameUtils")), D = M(e("../../../Main/Script/DataBase")), P = M(e("../../../Main/NetWork/Connector"));
function M(e) {
return e && e.__esModule ? e : {
default: e
};
}
function x(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function O(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function G(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
R(e, t);
}
function R(e, t) {
return (R = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function k(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var L = cc._decorator, B = L.ccclass, F = L.property, U = (i = F(cc.Label), a = F(cc.Label), 
r = F(cc.Label), o = F(cc.Label), s = F(cc.Label), c = F(cc.Label), l = F(cc.Node), 
u = F(cc.Prefab), d = F(cc.Label), h = F(cc.Node), B(f = (p = function(e) {
G(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
x(t = e.call.apply(e, [ this ].concat(i)) || this, "lblReward", m, O(t));
x(t, "lblLevel", g, O(t));
x(t, "tips1", v, O(t));
x(t, "tips2", C, O(t));
x(t, "tips3", b, O(t));
x(t, "tips4", y, O(t));
x(t, "itemContent", S, O(t));
x(t, "baseInfoItem", _, O(t));
x(t, "lblPage", T, O(t));
x(t, "pageContainer", E, O(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.currentFun = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.showList();
this.renderReward();
};
n.addEvents = function() {
N.App.EventManager.addEventListener(A.GameConfig.GameEventNames.CLUB_DATA_CHANGE, this.renderReward, this);
};
n.removeEvents = function() {
N.App.EventManager.removeEventListener(A.GameConfig.GameEventNames.CLUB_DATA_CHANGE, this.renderReward, this);
};
n.renderReward = function() {
console.log("App.", N.App.Club.ClubReward);
this.lblLevel.string = "当前等级: " + N.App.Club.ClubLevel;
this.lblReward.string = "当前奖励: " + w.default.formatGold(N.App.Club.ClubReward);
};
n.getReward = function() {
var e = this;
I.default.playSfx();
0 != N.App.Club.ClubReward && I.default.showNumer("请输入提取奖励", A.GameConfig.NumberType.FLOAT, function(t) {
parseInt(100 * t) > parseInt(N.App.Club.ClubReward) ? I.default.alertTip("无效数值") : P.default.request(A.GameConfig.ServerEventName.DrawReward, {
clubID: N.App.Club.CurrentClubID,
userID: D.default.player.id,
reward: parseInt(100 * t)
}, function(t) {
I.default.alertTip("提取成功");
N.App.Club.ClubReward = t.reward;
N.App.Club.ClubScore = t.score;
e.currentFun(1);
});
});
};
n.showList = function() {
I.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.page = 1;
this.pageContainer.active = !1;
this.currentFun = this.renderList;
this.renderList(1);
};
n.renderList = function(e) {
var t = this;
this.tips1.string = "时间";
this.tips2.string = "";
this.tips3.string = "事件";
this.tips4.string = "";
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) P.default.request(A.GameConfig.ServerEventName.RewardLog, {
clubID: N.App.Club.CurrentClubID,
userID: D.default.player.id,
page: e,
pageSize: 10
}, function(n) {
if (n.logs && !w.default.isNullOrEmpty(n.logs.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.logs.rows;
t.pageContainer.active = !0;
t.page = e;
var i = "number" == typeof n.logs.count ? n.logs.count : n.logs.count.length;
t.totalPage = Math.ceil(i / 10);
t.lblPage.string = e + "/" + Math.ceil(i / 10);
n.logs.rows.forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("score").getComponent(cc.Label).string = (e.reward < 0 ? "领取" : "获得") + w.default.formatGold(Math.abs(e.reward)) + "体力";
n.getChildByName("event").getComponent(cc.Label).string = "";
n.getChildByName("total").getComponent(cc.Label).string = "";
t.itemContent.addChild(n);
});
} else t.pageContainer.active = !1;
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("score").getComponent(cc.Label).string = (e.reward < 0 ? "领取" : "获得") + w.default.formatGold(Math.abs(e.reward)) + "体力";
n.getChildByName("total").getComponent(cc.Label).string = "";
n.getChildByName("event").getComponent(cc.Label).string = "";
t.itemContent.addChild(n);
});
}
};
n.showShuffle = function() {
I.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.page = 1;
this.pageContainer.active = !1;
this.currentFun = this.renderShuffle;
this.renderShuffle(1);
};
n.renderShuffle = function(e) {
var t = this;
this.tips1.string = "时间";
this.tips2.string = "";
this.tips3.string = "事件";
this.tips4.string = "";
console.log("00000", e);
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) {
console.log("11111", e);
P.default.request(A.GameConfig.ServerEventName.ShuffleLog, {
clubID: N.App.Club.CurrentClubID,
userID: D.default.player.id,
page: e,
pageSize: 10
}, function(n) {
if (n.log && !w.default.isNullOrEmpty(n.log.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.log.rows;
t.pageContainer.active = !0;
t.page = e;
var i = "number" == typeof n.log.count ? n.log.count : n.log.count.length;
t.totalPage = Math.ceil(i / 10);
t.lblPage.string = e + "/" + Math.ceil(i / 10);
n.log.rows.forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("score").getComponent(cc.Label).string = "获得洗牌 " + w.default.formatGold(Math.abs(e.reward)) + "体力";
n.getChildByName("event").getComponent(cc.Label).string = "";
n.getChildByName("total").getComponent(cc.Label).string = "";
t.itemContent.addChild(n);
});
} else t.pageContainer.active = !1;
});
} else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("score").getComponent(cc.Label).string = "获得洗牌 " + w.default.formatGold(Math.abs(e.reward)) + "体力";
n.getChildByName("total").getComponent(cc.Label).string = "";
n.getChildByName("event").getComponent(cc.Label).string = "";
t.itemContent.addChild(n);
});
}
};
n.showDetail = function() {
I.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.page = 1;
this.pageContainer.active = !1;
this.currentFun = this.renderDetail;
this.renderDetail(1);
};
n.renderDetail = function(e) {
var t = this;
this.tips1.string = "时间";
this.tips2.string = "游戏";
this.tips3.string = "来源玩家";
this.tips4.string = "奖励";
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) P.default.request(A.GameConfig.ServerEventName.RewardDetail, {
clubID: N.App.Club.CurrentClubID,
userID: D.default.player.id,
page: e,
pageSize: 10
}, function(n) {
if (n.log && !w.default.isNullOrEmpty(n.log.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.log.rows;
t.pageContainer.active = !0;
t.page = e;
var i = "number" == typeof n.log.count ? n.log.count : n.log.count.length;
t.totalPage = Math.ceil(i / 10);
t.lblPage.string = e + "/" + Math.ceil(i / 10);
n.log.rows.forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = new Date(e.createdAt).format("yyyy-MM-dd hh:mm");
n.getChildByName("event").getComponent(cc.Label).string = e.remarks;
n.getChildByName("score").getComponent(cc.Label).string = e.source;
n.getChildByName("total").getComponent(cc.Label).string = w.default.formatGold(e.reward);
t.itemContent.addChild(n);
});
} else t.pageContainer.active = !1;
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = new Date(e.createdAt).format("yyyy-MM-dd hh:mm");
n.getChildByName("event").getComponent(cc.Label).string = e.remarks;
n.getChildByName("score").getComponent(cc.Label).string = e.source;
n.getChildByName("total").getComponent(cc.Label).string = w.default.formatGold(e.reward);
t.itemContent.addChild(n);
});
}
};
n.showTotal = function() {
I.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.page = 1;
this.pageContainer.active = !1;
this.currentFun = this.renderTotal;
this.renderTotal(1);
};
n.renderTotal = function(e) {
var t = this;
this.tips1.string = "时间";
this.tips2.string = "总奖励";
this.tips3.string = "总活跃";
this.tips4.string = "总体力";
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) P.default.request(A.GameConfig.ServerEventName.RewardSummary, {
clubID: N.App.Club.CurrentClubID,
page: e,
pageSize: 8
}, function(n) {
if (!w.default.isNullOrEmpty(n.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.rows;
t.pageContainer.active = !0;
t.page = e;
var i = "number" == typeof n.count ? n.count : n.count.length;
t.totalPage = Math.ceil(i / 10);
t.lblPage.string = e + "/" + Math.ceil(i / 10);
n.rows.forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("event").getComponent(cc.Label).string = "" + w.default.formatGold(e.reward);
n.getChildByName("score").getComponent(cc.Label).string = "" + e.activity;
n.getChildByName("total").getComponent(cc.Label).string = "" + w.default.formatGold(e.sumScore);
t.itemContent.addChild(n);
});
}
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("event").getComponent(cc.Label).string = "" + w.default.formatGold(e.reward);
n.getChildByName("score").getComponent(cc.Label).string = "" + e.activity;
n.getChildByName("total").getComponent(cc.Label).string = "" + w.default.formatGold(e.sumScore);
t.itemContent.addChild(n);
});
}
};
n.addPage = function() {
I.default.playSfx();
if (this.page >= this.totalPage) I.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.currentFun(e);
}
};
n.reducePage = function() {
I.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.currentFun(e);
} else I.default.alertTip("已经是第一页");
};
n.onClickClose = function() {
I.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), m = k(p.prototype, "lblReward", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = k(p.prototype, "lblLevel", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = k(p.prototype, "tips1", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = k(p.prototype, "tips2", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = k(p.prototype, "tips3", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = k(p.prototype, "tips4", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = k(p.prototype, "itemContent", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = k(p.prototype, "baseInfoItem", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = k(p.prototype, "lblPage", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = k(p.prototype, "pageContainer", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p)) || f);
n.default = U;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ClubScoreListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "ec6ccNCtr1Fv7D/zeCy+YVi", "ClubScoreListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b = e("../../../GameBase/GameConfig"), y = A(e("../../../Main/Script/Cache")), S = e("../../ui/hall/data/App"), _ = A(e("../../common/GameUtils")), T = A(e("../../../Main/Script/DataBase")), E = A(e("../../../Main/NetWork/Connector"));
function A(e) {
return e && e.__esModule ? e : {
default: e
};
}
function I(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function N(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function w(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
D(e, t);
}
function D(e, t) {
return (D = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function P(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var M = cc._decorator, x = M.ccclass, O = M.property, G = (i = O(cc.Label), a = O(cc.Label), 
r = O(cc.Label), o = O(cc.Node), s = O(cc.Prefab), c = O(cc.Label), l = O(cc.Node), 
x(u = (d = function(e) {
w(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
I(t = e.call.apply(e, [ this ].concat(i)) || this, "tips1", h, N(t));
I(t, "tips2", f, N(t));
I(t, "tips3", p, N(t));
I(t, "itemContent", m, N(t));
I(t, "baseInfoItem", g, N(t));
I(t, "lblPage", v, N(t));
I(t, "pageContainer", C, N(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.currentFun = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.showList();
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.showList = function() {
y.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.page = 1;
this.pageContainer.active = !1;
this.currentFun = this.renderList;
this.renderList(1);
};
n.renderList = function(e) {
var t = this;
this.tips1.string = "时间";
this.tips2.string = "事件";
this.tips3.string = "剩余";
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) E.default.request(b.GameConfig.ServerEventName.UserScoreLog, {
clubID: S.App.Club.CurrentClubID,
userID: T.default.player.id,
page: e,
pageSize: 10
}, function(n) {
if (n.log && !_.default.isNullOrEmpty(n.log.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.log.rows;
t.pageContainer.active = !0;
t.page = e;
t.totalPage = Math.ceil(n.log.count / 10);
t.lblPage.string = e + "/" + Math.ceil(n.log.count / 10);
n.log.rows.forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = new Date(e.createdAt).format("yyyy-MM-dd hh:mm:ss");
n.getChildByName("event").getComponent(cc.Label).string = e.event;
n.getChildByName("score").getComponent(cc.Label).string = _.default.formatGold(e.remainScore) + (0 == e.remainBank ? "" : "(" + _.default.formatGold(e.remainBank) + ")");
t.itemContent.addChild(n);
});
}
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = new Date(e.createdAt).format("yyyy-MM-dd hh:mm:ss");
n.getChildByName("event").getComponent(cc.Label).string = e.event;
n.getChildByName("score").getComponent(cc.Label).string = _.default.formatGold(e.remainScore) + (0 == e.remainBank ? "" : "(" + _.default.formatGold(e.remainBank) + ")");
t.itemContent.addChild(n);
});
}
};
n.showTotal = function() {
y.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.page = 1;
this.pageContainer.active = !1;
this.currentFun = this.renderTotal;
this.renderTotal(1);
};
n.renderTotal = function(e) {
var t = this;
this.tips1.string = "时间";
this.tips2.string = "总增加";
this.tips3.string = "总减少";
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) E.default.request(b.GameConfig.ServerEventName.ScoreSummary, {
clubID: S.App.Club.CurrentClubID,
userID: T.default.player.id,
page: e,
pageSize: 8
}, function(n) {
if (n.logs && !_.default.isNullOrEmpty(n.logs.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.logs.rows;
t.pageContainer.active = !0;
t.page = e;
var i = "number" == typeof n.logs.count ? n.logs.count : n.logs.count.length;
t.totalPage = Math.ceil(i / 10);
t.lblPage.string = e + "/" + Math.ceil(i / 10);
n.logs.rows.forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("event").getComponent(cc.Label).string = "" + e.inc;
n.getChildByName("score").getComponent(cc.Label).string = "" + e.dec;
t.itemContent.addChild(n);
});
}
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("event").getComponent(cc.Label).string = "" + e.inc;
n.getChildByName("score").getComponent(cc.Label).string = "" + e.dec;
t.itemContent.addChild(n);
});
}
};
n.addPage = function() {
y.default.playSfx();
if (this.page >= this.totalPage) y.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.currentFun(e);
}
};
n.reducePage = function() {
y.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.currentFun(e);
} else y.default.alertTip("已经是第一页");
};
n.onClickClose = function() {
y.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), h = P(d.prototype, "tips1", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = P(d.prototype, "tips2", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = P(d.prototype, "tips3", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = P(d.prototype, "itemContent", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = P(d.prototype, "baseInfoItem", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = P(d.prototype, "lblPage", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = P(d.prototype, "pageContainer", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d)) || u);
n.default = G;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ClubUserItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "3498fU1LPhCJataFHDlKqmb", "ClubUserItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v = e("../../../GameBase/GameConfig"), C = E(e("../../../Main/NetWork/Connector")), b = E(e("../../../Main/Script/Cache")), y = E(e("../../../Main/Script/DataBase")), S = e("../../ui/hall/data/App"), _ = E(e("../../common/GameUtils")), T = E(e("../common/Avatar"));
function E(e) {
return e && e.__esModule ? e : {
default: e
};
}
function A(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function I(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function N(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
w(e, t);
}
function w(e, t) {
return (w = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function D(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var P = [ "离线", "在线" ], M = cc._decorator, x = M.ccclass, O = M.property, G = (i = O(T.default), 
a = O(cc.Label), r = O(cc.Label), o = O(cc.Label), s = O(cc.Sprite), c = O([ cc.SpriteFrame ]), 
x(l = (u = function(e) {
N(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
A(t = e.call.apply(e, [ this ].concat(i)) || this, "avatar", d, I(t));
A(t, "lblStatus", h, I(t));
A(t, "lblName", f, I(t));
A(t, "lblId", p, I(t));
A(t, "roleSpr", m, I(t));
A(t, "roleIconArr", g, I(t));
t.userData = null;
return t;
}
var n = t.prototype;
n.initData = function(e) {
this.userData = e;
this.avatar.avatarUrl = e.user.head;
if (e.userID == y.default.player.id) {
this.lblStatus.string = "自己";
this.lblStatus.node.color = new cc.color(255, 0, 0);
} else {
this.lblStatus.string = "" + P[e.isInGame];
this.lblStatus.node.color = 0 == e.isInGame ? new cc.color(255, 255, 255) : new cc.color(0, 255, 0);
}
this.lblName.string = "" + _.default.getStringByLength(e.user.name, 6);
this.lblId.string = "" + e.userID;
switch (e.role) {
case "user":
this.roleSpr.node.active = !1;
break;

case "proxy":
this.roleSpr.node.active = !0;
this.roleSpr.spriteFrame = this.roleIconArr[1];
break;

case "owner":
this.roleSpr.node.active = !0;
this.roleSpr.spriteFrame = this.roleIconArr[0];
break;

case "manager":
this.roleSpr.node.active = !0;
this.roleSpr.spriteFrame = this.roleIconArr[2];
}
};
n.onClickDetail = function() {
var e = this;
b.default.playSfx();
_.default.pop(v.GameConfig.pop.UserInfoPop, function(t) {
t.getComponent("UserInfoPop").initUserID(e.userData.userID);
});
};
n.changeScore = function(e, t) {
var n = this;
if (/^[0-9]*[1-9][0-9]*$/.test(this.scoreInput.string)) {
var i = "add" == t ? this.scoreInput.string : "-" + this.scoreInput.string;
C.default.request(v.GameConfig.ServerEventName.UpdateScore, {
score: parseInt(i),
userID: this.userData.userID,
clubID: S.App.Club.CurrentClubID
}, function(e) {
b.default.alertTip("add" == t ? "上分成功" : "下分成功");
n.userData.score = n.userData.score + parseInt(i);
n.initData(n.userData);
S.App.Club.ClubScore = e.score;
});
} else b.default.alertTip("请输入整数金额");
};
return t;
}(cc.Component), d = D(u.prototype, "avatar", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = D(u.prototype, "lblStatus", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = D(u.prototype, "lblName", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = D(u.prototype, "lblId", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = D(u.prototype, "roleSpr", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = D(u.prototype, "roleIconArr", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), u)) || l);
n.default = G;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ClubUserListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "2993dexkqtD2oJ9wBjhYhjx", "ClubUserListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v = e("../../../GameBase/GameConfig"), C = T(e("../../../Main/NetWork/Connector")), b = T(e("../../../Main/Script/Cache")), y = T(e("../../../Main/Script/DataBase")), S = e("../../ui/hall/data/App"), _ = T(e("../../common/GameUtils"));
function T(e) {
return e && e.__esModule ? e : {
default: e
};
}
function E(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function A(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function I(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
N(e, t);
}
function N(e, t) {
return (N = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function w(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var D = cc._decorator, P = D.ccclass, M = D.property, x = (i = M(cc.Label), a = M(cc.Label), 
r = M(cc.Node), o = M(cc.Node), s = M(cc.Node), c = M(cc.Prefab), P(l = (u = function(e) {
I(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
E(t = e.call.apply(e, [ this ].concat(i)) || this, "lblTotalCount", d, A(t));
E(t, "lblPage", h, A(t));
E(t, "pageContainer", f, A(t));
E(t, "inviteBtn", p, A(t));
E(t, "itemContent", m, A(t));
E(t, "userItem", g, A(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.renderData = {
page: [],
rows: {}
};
this.addEvents();
"manager" == S.App.Club.CurrentClubRole && (this.inviteBtn.active = !1);
this.renderUI(1);
};
n.addEvents = function() {
S.App.EventManager.addEventListener(v.GameConfig.GameEventNames.ADD_USER, this.updateList, this);
};
n.removeEvents = function() {
S.App.EventManager.removeEventListener(v.GameConfig.GameEventNames.ADD_USER, this.updateList, this);
};
n.updateList = function() {
this.downloadList(this.page);
};
n.renderUI = function(e) {
var t = this;
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) this.downloadList(e); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ClubUserItem").initData(e);
t.itemContent.addChild(n);
});
}
};
n.downloadList = function(e) {
var t = this;
this.itemContent.removeAllChildren();
C.default.request(v.GameConfig.ServerEventName.UserList, {
clubID: S.App.Club.CurrentClubID,
userID: y.default.player.id,
page: e,
pageSize: 12,
whole: !0
}, function(n) {
if (n.users && !_.default.isNullOrEmpty(n.users.rows)) {
-1 == t.renderData.page.indexOf(e) && t.renderData.page.push(e);
t.renderData.rows["" + e] = [];
t.renderData.rows["" + e] = n.users.rows;
t.pageContainer.active = !0;
t.page = e;
t.totalPage = Math.ceil(n.users.count / 12);
t.lblPage.string = e + "/" + Math.ceil(n.users.count / 12);
t.lblTotalCount.string = "总人数: " + n.users.count;
n.users.rows.forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ClubUserItem").initData(e);
t.itemContent.addChild(n);
});
}
});
};
n.addPage = function() {
b.default.playSfx();
if (this.page >= this.totalPage) b.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.renderUI(e);
}
};
n.reducePage = function() {
b.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.renderUI(e);
} else b.default.alertTip("已经是第一页");
};
n.onSearch = function() {
var e = this;
b.default.playSfx();
b.default.showNumer("输入玩家ID", v.GameConfig.NumberType.INT, function(t) {
e.onSearchRes(t);
});
};
n.onSearchRes = function(e) {
var t = this;
this.itemContent.removeAllChildren();
this.pageContainer.active = !1;
C.default.request(v.GameConfig.ServerEventName.UserList, {
clubID: S.App.Club.CurrentClubID,
userID: y.default.player.id,
keywords: e
}, function(e) {
if (e.users && !_.default.isNullOrEmpty(e.users.rows)) {
t.lblTotalCount.string = "总人数: " + e.users.count;
e.users.rows.forEach(function(e) {
var n = cc.instantiate(t.userItem);
n.getComponent("ClubUserItem").initData(e);
t.itemContent.addChild(n);
});
}
});
};
n.onInviteUser = function() {
b.default.playSfx();
_.default.pop(v.GameConfig.pop.ProxyInviteUser);
};
n.onClickClose = function() {
b.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), d = w(u.prototype, "lblTotalCount", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = w(u.prototype, "lblPage", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = w(u.prototype, "pageContainer", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = w(u.prototype, "inviteBtn", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = w(u.prototype, "itemContent", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = w(u.prototype, "userItem", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u)) || l);
n.default = x;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ClubWalletListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "9b88b56ZFBFFLNMkdWWOLpO", "ClubWalletListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f = e("../../../GameBase/GameConfig"), p = b(e("../../../Main/Script/Cache")), m = e("../../ui/hall/data/App"), g = b(e("../../common/GameUtils")), v = b(e("../../../Main/Script/DataBase")), C = b(e("../../../Main/NetWork/Connector"));
function b(e) {
return e && e.__esModule ? e : {
default: e
};
}
function y(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function S(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function _(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
T(e, t);
}
function T(e, t) {
return (T = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function E(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var A = cc._decorator, I = A.ccclass, N = A.property, w = (i = N(cc.Node), a = N(cc.Prefab), 
r = N(cc.Label), o = N(cc.Node), I(s = (c = function(e) {
_(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
y(t = e.call.apply(e, [ this ].concat(i)) || this, "itemContent", l, S(t));
y(t, "baseInfoItem", u, S(t));
y(t, "lblPage", d, S(t));
y(t, "pageContainer", h, S(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.showList();
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.showList = function() {
p.default.playSfx();
this.renderData = {
page: [],
rows: {}
};
this.page = 1;
this.pageContainer.active = !1;
this.renderList(1);
};
n.renderList = function(e) {
var t = this;
this.itemContent.removeAllChildren();
if (-1 == this.renderData.page.indexOf(e)) C.default.request(f.GameConfig.ServerEventName.CardSummary, {
clubID: m.App.Club.CurrentClubID,
userID: v.default.player.id,
page: 1,
pageSize: 10
}, function(n) {
if (n.data && !g.default.isNullOrEmpty(n.data.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.data.rows;
t.pageContainer.active = !0;
t.page = e;
var i = "number" == typeof n.data.count ? n.data.count : n.data.count.length;
t.totalPage = Math.ceil(i / 10);
t.lblPage.string = e + "/" + Math.ceil(i / 10);
n.data.rows.forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("event").getComponent(cc.Label).string = m.App.Club.IsLeague ? e.card + "房卡" : e.diamond + "钻石";
n.getChildByName("score").active = !1;
t.itemContent.addChild(n);
});
} else t.pageContainer.active = !1;
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("event").getComponent(cc.Label).string = m.App.Club.IsLeague ? e.card + "房卡" : e.diamond + "钻石";
n.getChildByName("score").active = !1;
t.itemContent.addChild(n);
});
}
};
n.addPage = function() {
p.default.playSfx();
if (this.page >= this.totalPage) p.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.renderList(e);
}
};
n.reducePage = function() {
p.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.renderList(e);
} else p.default.alertTip("已经是第一页");
};
n.onClickClose = function() {
p.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), l = E(c.prototype, "itemContent", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = E(c.prototype, "baseInfoItem", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = E(c.prototype, "lblPage", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = E(c.prototype, "pageContainer", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c)) || s);
n.default = w;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
CompListRenderer: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "a524608lnpMPoa7bYWojHa5", "CompListRenderer");
function i(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function a(e, t, n) {
t && i(e.prototype, t);
n && i(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
function r(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
o(e, t);
}
function o(e, t) {
return (o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
Object.defineProperty(n, "__esModule", {
value: !0
});
var s = cc._decorator, c = s.ccclass, l = (s.property, function(e) {
r(t, e);
function t() {
var t;
(t = e.apply(this, arguments) || this).index = -1;
return t;
}
var n = t.prototype;
n.start = function() {};
n.refreshUI = function() {};
a(t, [ {
key: "data",
get: function() {
return this._data;
},
set: function(e) {
if (this._data != e) {
this._data = e;
this.refreshUI();
}
}
} ]);
return t;
}(cc.Component));
l = function(e, t, n, i) {
var a, r = arguments.length, o = r < 3 ? t : null === i ? i = Object.getOwnPropertyDescriptor(t, n) : i;
if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, n, i); else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (r < 3 ? a(o) : r > 3 ? a(t, n, o) : a(t, n)) || o);
return r > 3 && o && Object.defineProperty(t, n, o), o;
}([ c ], l);
n.default = l;
cc._RF.pop();
}, {} ],
CompList: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "1f09dRtimZIsLgjmnOVkYPN", "CompList");
function i(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function a(e, t, n) {
t && i(e.prototype, t);
n && i(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
function r(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
o(e, t);
}
function o(e, t) {
return (o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
var s = function(e, t, n, i) {
var a, r = arguments.length, o = r < 3 ? t : null === i ? i = Object.getOwnPropertyDescriptor(t, n) : i;
if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) o = Reflect.decorate(e, t, n, i); else for (var s = e.length - 1; s >= 0; s--) (a = e[s]) && (o = (r < 3 ? a(o) : r > 3 ? a(t, n, o) : a(t, n)) || o);
return r > 3 && o && Object.defineProperty(t, n, o), o;
};
Object.defineProperty(n, "__esModule", {
value: !0
});
var c = e("./CompListRenderer"), l = cc._decorator, u = l.ccclass, d = l.property, h = function(e) {
r(t, e);
function t() {
var t;
(t = e.apply(this, arguments) || this).rendererPrefab = null;
t._rendererWidth = 0;
t._rendererHeight = 0;
t.gapV = 10;
t.gapH = 10;
t.columnCount = 1;
t.topPadding = 0;
t.bottomPadding = 0;
t.leftPadding = 0;
t.rightPadding = 0;
t.bufferSize = 3;
t._itemPool = new cc.NodePool(c.default);
t._virtualNodes = [];
t._lastY = 0;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.columnCount < 1 && (this.columnCount = 1);
};
n.start = function() {
this.refreshUI();
};
n.update = function() {
if (cc.director.getTotalFrames() % 10 == 0 && Math.abs(this.node.y - this._lastY) > this._rendererHeight / 2) {
this._lastY = this.node.y;
this.refreshUI();
}
};
n.refreshVirtualNodes = function() {
0 == this._rendererHeight && this.moreItems();
for (;this.node.children.length > 0; ) {
var e = this.node.children[0];
this._itemPool.put(e);
e.removeFromParent(!1);
}
this._virtualNodes = [];
if (this._data) {
var t = Math.ceil(this._data.length / this.columnCount);
this.node.height = (this._rendererHeight + this.gapV) * t - this.gapV + this.topPadding + this.bottomPadding;
for (var n = 0; n < this._data.length; n++) {
var i = new f();
i.index = n;
i.data = this._data[n];
i.width = this._rendererWidth;
i.height = this._rendererHeight;
var a = Math.ceil((n + 1) / this.columnCount), r = n % this.columnCount + 1;
i.y = -(a - 1) * (this._rendererHeight + this.gapV) - this._rendererHeight / 2 - this.topPadding;
i.x = (r - 1) * (this._rendererWidth + this.gapH) + this._rendererWidth / 2 + this.leftPadding - this.node.width * this.node.anchorX;
i.activeChangeCallback = this.virtualNodeActiveChangeCallback.bind(this);
this._virtualNodes.push(i);
}
}
};
n.refreshUI = function() {
var e = this;
if (this.node && this.node.getParent()) {
var t = this.node.getParent();
this._viewRect = new cc.Rect(-t.width * t.anchorX - this._rendererWidth, -t.height * t.anchorY - this._rendererHeight * this.bufferSize, t.width + 2 * this._rendererWidth, t.height + 2 * this._rendererHeight * this.bufferSize);
}
var n = 0;
this._firstActiveItemData = null;
this._virtualNodes.forEach(function(t) {
var i = t.y + e.node.y + e._rendererHeight / 2 + e.gapV;
if (t.y + e.node.y - e._rendererHeight / 2 - e.gapV > e._viewRect.yMax || i < e._viewRect.yMin) t.unactive(); else {
null == e._firstActiveItemData && 1 == n && (e._firstActiveItemData = t.data);
t.active();
var a = t.ui.getComponent(c.default);
if (a) {
a.index = t.index;
a.data = t.data;
} else console.log("渲染item请绑定Comp_ListRenderer组件（或子组件）");
n++;
}
});
};
n.virtualNodeActiveChangeCallback = function(e) {
if (e.isActived) {
if (!e.ui) {
this._itemPool.size() <= 0 && this.moreItems();
e.ui = this._itemPool.get();
this.node.addChild(e.ui);
}
e.ui.x = e.x;
e.ui.y = e.y;
} else if (e.ui) {
e.ui.removeFromParent(!1);
console.log("【comp_list】回收 " + e.ui.uuid);
this._itemPool.put(e.ui);
e.ui = null;
}
};
n.moreItems = function() {
var e = (this.node.width - this.gapH * (this.columnCount - 1) - this.leftPadding - this.rightPadding) / this.columnCount;
e < 1 && (e = 1);
for (var t = 0; t < 5; ++t) {
var n = cc.instantiate(this.rendererPrefab);
this._itemPool.put(n);
n.scale = e / n.width;
if (0 == this._rendererWidth) {
this._rendererWidth = e;
this._rendererHeight = n.height * n.scale;
}
}
};
n.onDestroy = function() {
if (this._itemPool) {
this._itemPool.clear();
this._itemPool = null;
}
};
a(t, [ {
key: "data",
get: function() {
return this._data;
},
set: function(e) {
if (this._data != e) {
this._data = e;
this.refreshVirtualNodes();
this.refreshUI();
}
}
}, {
key: "firstActiveItemData",
get: function() {
return this._firstActiveItemData;
},
set: function(e) {
if (this._virtualNodes) for (var t = 0, n = this._virtualNodes.length; t < n; t++) {
var i = this._virtualNodes[t];
if (i.data == e) {
this._firstActiveItemData = e;
try {
this.node.getParent().getParent().getComponent(cc.ScrollView).scrollToOffset(new cc.Vec2(0, -i.y - this._rendererHeight / 2 - this.gapV), 1);
} catch (e) {}
break;
}
}
}
} ]);
return t;
}(cc.Component);
s([ d({
type: cc.Prefab,
displayName: "Renderer Prefab"
}) ], h.prototype, "rendererPrefab", void 0);
s([ d({
displayName: "垂直间距"
}) ], h.prototype, "gapV", void 0);
s([ d({
displayName: "水平间距"
}) ], h.prototype, "gapH", void 0);
s([ d({
displayName: "列数"
}) ], h.prototype, "columnCount", void 0);
s([ d({
displayName: "顶部间隔"
}) ], h.prototype, "topPadding", void 0);
s([ d({
displayName: "底部间隔"
}) ], h.prototype, "bottomPadding", void 0);
s([ d({
displayName: "左边间隔"
}) ], h.prototype, "leftPadding", void 0);
s([ d({
displayName: "右边间隔"
}) ], h.prototype, "rightPadding", void 0);
s([ d({
displayName: "缓冲大小",
tooltip: "不在可视区域中item个数"
}) ], h.prototype, "bufferSize", void 0);
h = s([ u ], h);
n.default = h;
var f = function() {
function e() {
this.index = 0;
this.x = 0;
this.y = 0;
this.width = 0;
this.height = 0;
this._isActived = !1;
}
var t = e.prototype;
t.active = function() {
if (!0 !== this._isActived) {
this._isActived = !0;
this.activeChangeCallback.call(null, this);
}
};
t.unactive = function() {
if (!1 !== this._isActived) {
this._isActived = !1;
this.activeChangeCallback && this.activeChangeCallback(this);
}
};
a(e, [ {
key: "isActived",
get: function() {
return this._isActived;
}
} ]);
return e;
}();
cc._RF.pop();
}, {
"./CompListRenderer": "CompListRenderer"
} ],
Connector: [ function(e, t) {
"use strict";
cc._RF.push(t, "aecf3nnZrZJULFO45mcYbul", "Connector");
var n = e("../Script/DataBase"), i = e("../Script/ROUTE"), a = e("../Script/PACK"), r = e("../Script/Cache"), o = e("../../GameBase/GameConfig").GameConfig, s = e("../Script/utils"), c = [ 0, 1, 3, 4, 5, 7, 7 ], l = e("../Script/audio-ctrl"), u = e("../../script/ui/hall/data/App").App;
t.exports = {
logicUrl: o.ServerUrl,
connect_status: {
closed: 0,
connecting: 1,
connected: 2,
closing: 3
},
receiveTime: null,
offline: !0,
status: null,
_socket: null,
disconnectStatus: !1,
gameStart: !1,
_queueGameMsg: [],
_queueChatMsg: [],
_pingArr: [],
pingSchedule: null,
_retryTime: 0,
_retryTTL: 0,
ts: 0,
_status: o.ConnectState.CLOSED,
emit: function(e, t) {
if (null != this._socket) {
var n = {
pack: e,
data: t
};
"CS_PING" != e && console.log(e, t);
this._socket.send(JSON.stringify(n));
}
},
gameMessage: function(e, t) {
this.emit(a.CS_GAME_MESSAGE, {
route: e,
data: t
});
},
request: function(e, t, n, i, a, c) {
void 0 === i && (i = 1);
void 0 === c && (c = !1);
var d = "getJson" == t ? "GET" : "POST", h = "getJson" == t ? e : this.logicUrl + e;
console.log("url:  ", h);
cc.sys.isBrowser ? console.log("data:   ", t) : console.log("data:   ", JSON.stringify(t));
i && r.showMask("正在加载...请稍后");
try {
var f = cc.loader.getXMLHttpRequest();
f.open(d, h, !0);
f.setRequestHeader("cache-control", "no-cache");
f.setRequestHeader("contentType", "text/html;charset=uft-8");
f.setRequestHeader("Content-Type", "application/json");
var p = s.getValue(o.StorageKey.UserToken, "");
t.version = cc.gameVersion || o.DefaultVersion;
t.ts = new Date().getTime() + o.ServerTimeDiff;
if (!s.isNullOrEmpty(p) && e != o.ServerEventName.UserLogin && e != o.ServerEventName.ProxyLogin) {
var m = s.encryptToken(p);
f.setRequestHeader("xxx-token", m);
t.sign = s.encryptData(t, p);
}
f.onreadystatechange = function() {
if (404 == f.status) {
r.hideMask();
r.showTipsMsg("加载失败");
}
if (4 == f.readyState && f.status >= 200 && f.status <= 207) {
var t, i = f.responseText;
r.hideMask();
try {
t = JSON.parse(i);
cc.sys.isBrowser ? console.log(e + ": ", t) : console.log(e + ": ", i);
if (!s.isNullOrEmpty(t.token)) {
var c = o.Encrtyptor.decrypt(t.token);
s.saveValue(o.StorageKey.UserToken, c);
}
if (t.success && n) {
!s.isNullOrEmpty(t.version) && s.versionCompareHandle(t.version, "1.0.0") > 0 && (o.isNewMatch = !0);
n(t);
} else {
if (t.status && (702 == t.status.code || 701 == t.status.code)) {
u.unlockScene();
r.showTipsMsg(t.message || "登录失效,请重新登录", function() {
s.saveValue(o.StorageKey.UserToken, "");
cc.director.loadScene("Login");
});
return;
}
a ? a(t) : r.showTipsMsg(t.message || "服务器出错", function() {
if (t.restart) {
l.getInstance().stopAll();
cc.game.restart();
}
});
}
} catch (t) {
console.log("返回处理" + e + ": ", t);
a ? a({
message: t
}) : r.alertTip("错误码: " + (o.ErrorCode[e] || "1000"));
r.hideMask();
}
} else if (4 == f.readyState) {
r.hideMask();
console.log("err", f.responseText);
try {
r.showTipsMsg("当前网络较差,重新选择链路", function() {
cc.director.loadScene("Update");
});
} catch (e) {}
}
};
f.timeout = 2e4;
f.onerror = function() {
console.log("request onerror");
r.hideMask();
r.showTipsMsg("当前网络较差,重新选择链路", function() {
cc.director.loadScene("Update");
});
};
f.ontimeout = function() {
console.log("request ontimeout" + e);
r.hideMask();
r.showTipsMsg("当前网络较差,重新选择链路", function() {
cc.director.loadScene("Update");
});
};
f.send(JSON.stringify(t));
} catch (e) {
console.log("请求出错: ", JSON.stringify(e));
r.hideMask();
r.showTipsMsg(e.message);
}
},
get: function(e, t, i, a, o) {
a || r.showMask("正在加载...请稍后");
try {
var s = cc.loader.getXMLHttpRequest();
s.open("GET", e, !0);
s.setRequestHeader("cache-control", "no-cache");
s.setRequestHeader("contentType", "text/html;charset=uft-8");
s.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;");
s.onreadystatechange = function() {
if (404 == s.status) {
r.hideMask();
o && o();
}
if (4 == s.readyState && s.status >= 200 && s.status <= 207) {
var t, n = s.responseText;
r.hideMask();
try {
console.log(e + "=>", n);
(t = JSON.parse(n)) && i ? i(t) : r.showTipsMsg(t.message, function() {
if (t.restart) {
l.getInstance().stopAll();
cc.game.restart();
}
});
} catch (e) {
o ? o({
message: e.message
}) : r.showTipsMsg(e.message);
r.hideMask();
}
}
};
s.timeout = 2e4;
s.onerror = function() {
console.log("request onerror");
r.hideMask();
o ? o({
message: "网络连接失败"
}) : cc.director.getScene().name == n.getTableScene() && r.showTipsMsg("网络连接失败", function() {
cc.director.loadScene("Login");
});
};
s.ontimeout = function() {
console.log("request ontimeout get " + e);
r.hideMask();
o ? o({
message: "当前网络较差"
}) : r.alertTip("当前网络较差");
};
s.send(JSON.stringify(t));
} catch (e) {
r.hideMask();
o ? o({
message: e.message
}) : r.showTipsMsg(e.message);
}
},
commitError: function(e, t) {
try {
var i = cc.loader.getXMLHttpRequest();
i.open("POST", this.logicUrl + t, !0);
i.setRequestHeader("cache-control", "no-cache");
i.setRequestHeader("contentType", "text/html;charset=uft-8");
i.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;");
i.timeout = 1e4;
e.version = cc.gameVersion || o.DefaultVersion;
e.gameType = n.gameType;
i.send(JSON.stringify(e).replace("\n", "\t"));
} catch (e) {
console.log(e);
}
},
connect: function(e, t) {
var c = this;
console.log("socket: ", this._socket, e);
r.showMask("正在连接..请稍后...");
s.isNullOrEmpty(e) || s.isNullOrEmpty(e.data) || (e.data.location = r.location);
var l = s.getValue(o.StorageKey.UserToken, "");
if (!s.isNullOrEmpty(l)) {
var d = s.encryptToken(l);
e.data.token = d;
}
e.data.version = cc.gameVersion || o.DefaultVersion;
e.data.clubID = u.Club.CurrentClubID;
this.gameStart = !1;
this._status = o.ConnectState.CONNECTING;
this.offline = !1;
o.GameConnectData = e;
try {
if (null != this._socket) {
console.log("_socket存在，断开前面的连接");
this.disconnectStatus = !0;
this.clearSchedule();
this._socket.close();
this._socket = null;
}
} catch (e) {
r.hideMask();
}
try {
var h = s.getValue(o.StorageKey.UserToken, "");
s.encryptToken(h);
this.ts = s.getTimeStamp();
this._socket = new WebSocket(e.url);
} catch (e) {
r.hideMask();
console.log("_socket new WebSocket error ", e);
}
if (this._socket) {
this._socket.onopen = function() {
console.log("_socket connect success");
n.connectInfo = e.data;
if (null != c._socket) {
console.log("_socket CS_CONNECT_INIT", e.data);
c.emit(a.CS_CONNECT_INIT, e.data);
}
var t = ((s.getTimeStamp() - c.ts) / 1e3).toFixed(2);
c.LogsClient(o.LogsEvents.SOCKET_LINK, {
action: o.LogsActions.SOCKET_LINK_SUCCESS,
times: t
});
c._status = o.ConnectState.CONNECTED;
null == c.pingSchedule && c.createSchedule();
};
var f = function(e) {
var t;
t = "string" == typeof e ? JSON.parse(e) : e;
c._pong(t);
}, p = function() {
console.log("服务器返回进入房间");
r.hideMask();
c._queueChatMsg = [];
c._queueGameMsg = [];
var e = ((s.getTimeStamp() - c.ts) / 1e3).toFixed(2);
c.LogsClient(o.LogsEvents.SOCKET_LINK, {
action: o.LogsActions.SOCKET_LINK_ENTER,
times: e
});
c._retryTime = 0;
t && t();
}, m = function() {
console.log("SC_GAME_DESTORY----", e);
c._queueChatMsg = [];
c._queueGameMsg = [];
c.disconnect();
}, g = function(e) {
console.log("SC_SERVER_NOTICE----", e);
c._queueGameMsg.push({
route: i.SC_SYSTEM_NOTICE,
data: e
});
}, v = function(e) {
var t;
t = "string" == typeof e ? JSON.parse(e) : e;
e && e.route == i.SC_RECONNECT && e.data.isDone && r.showTipsMsg("房间已被解散", function() {
cc.director.loadScene("Lobby");
});
if (c.gameStart || t.route == i.SC_GAME_DATA || t.route == i.SC_JOIN_TABLE || t.route == i.SC_RECONNECT) {
c.gameStart = !0;
c._queueGameMsg.push(t);
}
}, C = function(e) {
var t;
t = "string" == typeof e ? JSON.parse(e) : e;
c._queueChatMsg.push(t);
}, b = function(e) {
r.hideMask();
o.IsConnecting = !1;
c._queueChatMsg = [];
c._queueGameMsg = [];
var t;
t = "string" == typeof e ? JSON.parse(e) : e;
console.log("长链接报错----", t);
var n = ((s.getTimeStamp() - c.ts) / 1e3).toFixed(2);
c.LogsClient(o.LogsEvents.SOCKET_LINK, {
action: o.LogsActions.SOCKET_LINK_FAIL,
reson: t.msg,
times: n
});
r.showTipsMsg(t.msg, function() {
c.disconnect();
});
};
this._socket.onmessage = function(e) {
var t = JSON.parse(e.data).pack, n = JSON.parse(e.data).data;
switch (t) {
case a.SC_PONG:
f(n);
break;

case a.SC_ENTER_ROOM:
p();
break;

case a.SC_GAME_DESTORY:
m();
break;

case a.SC_SERVER_NOTICE:
g(n);
break;

case a.SC_GAME_MESSAGE:
v(n);
break;

case a.SC_GAME_VOICE:
C(n);
break;

case a.SC_JOIN_ERROR:
b(n);
break;

default:
console.log("未知信息---" + t + "   " + n);
}
};
this._socket.onerror = function() {
r.hideMask();
};
this._socket.onclose = function(e) {
r.hideMask();
console.log("WebSocket instance closed", JSON.stringify(e));
c._status = o.ConnectState.CLOSED;
o.IsConnecting = !1;
console.log("111", cc.director.getScene().name);
-1 == [ "Lobby", "Update", "Login" ].indexOf(cc.director.getScene().name) && cc.director.loadScene("Lobby");
c.disconnectStatus = !1;
};
} else r.showTipsMsg("连接异常，请重新登录", function() {
cc.director.loadScene("Login");
});
},
disconnect: function(e) {
void 0 === e && (e = !0);
console.log("--checkOnline-------手动断开连接,disconnect");
e && cc.director.loadScene("Lobby");
this.disconnectStatus = !0;
n.data = null;
if (null != this._socket) {
this._socket.close();
this._socket = null;
}
this._status = o.ConnectState.CLOSED;
},
createSchedule: function() {
var e = this;
console.log("--checkOnline-------createSchedule", this._status);
this.pingSchedule && clearInterval(this.pingSchedule);
this.times = 0;
this.pingSchedule = setInterval(function() {
switch (e._status) {
case o.ConnectState.CLOSED:
e.clearSchedule();
break;

case o.ConnectState.CONNECTING:
break;

case o.ConnectState.CONNECTED:
e._ping();
e.times++;
break;

case o.ConnectState.DISCONNECTED:
e._reconnect();
}
}, 2e3);
},
clearSchedule: function() {
console.log("--checkOnline-------clearSchedule");
this.pingSchedule && clearInterval(this.pingSchedule);
this.pingSchedule = null;
this.times = 0;
},
_ping: function() {
if (this.times > 5) this._reconnect(); else {
var e = new Date().getTime();
this.emit(a.CS_PING, {
time: e
});
setTimeout(function() {}, 4e3);
}
},
connectError: function() {
console.log("--checkOnline-------conectError");
r.hideMask();
this.LogsClient(o.LogsEvents.SOCKET_LINK, {
action: o.LogsActions.SOCKET_LINK_ERROR
});
this._status = o.ConnectState.CLOSED;
this._retryTime = 0;
this.disconnectStatus = !0;
this._socket && this._socket.close();
var e = {
time: new Date().getTime()
};
this._pong(e);
u.unlockScene();
r.showTipsMsg("连接出错", function() {
cc.director.loadScene("Update");
});
},
_pong: function(e) {
this.times = 0;
var t = 0;
e.time && (t = new Date().getTime() - e.time);
this._pingArr.unshift(t);
this._pingArr.splice(10);
var n = cc.find("Canvas/nodeSignal"), i = Math.floor(this._pingArr.reduce(function(e, t) {
return e + t;
}) / this._pingArr.length);
if (n) {
if (i >= 0) {
n.getChildByName("signal").getComponent(cc.Sprite).spriteFrame = o.WiFiSprite[3];
n.getChildByName("ping").color = new cc.color(130, 255, 0, 255);
}
if (i >= 100) {
n.getChildByName("signal").getComponent(cc.Sprite).spriteFrame = o.WiFiSprite[2];
n.getChildByName("ping").color = new cc.color(255, 174, 0, 255);
}
if (i >= 300) {
n.getChildByName("signal").getComponent(cc.Sprite).spriteFrame = o.WiFiSprite[1];
n.getChildByName("ping").color = new cc.color(255, 0, 0, 255);
}
n.getChildByName("ping").getComponent(cc.Label).string = i + "ms";
}
},
_reconnect: function() {
var e = this;
console.log("socket reconnect");
if (this._retryTime >= c.length) this.connectError(); else {
this._status = o.ConnectState.CONNECTING;
this._retryTime++;
this.LogsClient(o.LogsEvents.SOCKET_LINK, {
action: o.LogsActions.SOCKET_LINK_RECONNECT,
retryTime: this._retryTime
});
this.connect(o.GameConnectData, function() {
o.CurrentGameType = o.GameConnectData.data.gameType;
n.setGameType(n.GAME_TYPE[o.GameConnectData.data.gameType]);
var t = ((s.getTimeStamp() - e.ts) / 1e3).toFixed(2);
e.LogsClient(o.LogsEvents.SOCKET_LINK, {
action: o.LogsActions.START_ENTER_SCENE,
gametype: o.GameConnectData.data.gameType,
times: t
});
cc.director.loadScene(n.TABLE_TYPE[o.GameConnectData.data.gameType]);
});
}
},
LogsClient: function(e, t) {
if (!cc.sys.isBrowser) {
var i = s.getValue(o.StorageKey.LogsClientFail, []), a = i.length > 0 ? {
deviceID: o.DeviceID,
id: n.player.id,
event: e,
data: t,
failCount: i.length,
failLogs: i
} : {
deviceID: o.DeviceID,
id: n.player.id,
event: e,
data: t
};
this.request(o.ServerEventName.LogsClient, a, function() {
s.saveValue(o.StorageKey.LogsClientFail, []);
}, null, function() {
var n = {
event: e,
data: t
};
i.push(n);
s.saveValue(o.StorageKey.LogsClientFail, i);
});
}
}
};
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/PACK": "PACK",
"../Script/ROUTE": "ROUTE",
"../Script/audio-ctrl": "audio-ctrl",
"../Script/utils": "utils"
} ],
CreateClubPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "e76a1jqrblImajCp/fWv0vc", "CreateClubPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m = e("../../../GameBase/GameConfig"), g = y(e("../../../Main/NetWork/Connector")), v = y(e("../../../Main/Script/Cache")), C = y(e("../../common/GameUtils")), b = e("./data/App");
function y(e) {
return e && e.__esModule ? e : {
default: e
};
}
function S(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function _(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function T(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
E(e, t);
}
function E(e, t) {
return (E = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function A(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var I = cc._decorator, N = I.ccclass, w = I.property, D = (i = w(cc.EditBox), a = w(cc.Label), 
r = w(cc.Node), o = w(cc.Label), s = w(cc.Label), N(c = (l = function(e) {
T(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
S(t = e.call.apply(e, [ this ].concat(i)) || this, "nameInput", u, _(t));
S(t, "lblDesc", d, _(t));
S(t, "nodeID", h, _(t));
S(t, "lblID", f, _(t));
S(t, "lblTitle", p, _(t));
t.isLeague = !1;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.renderLeague = function() {
this.nameInput.node.position = cc.v2(-54, 77);
this.isLeague = !0;
this.lblDesc.string = "请输入联盟名称:";
this.nodeID.active = !0;
this.lblTitle.string = "创建联盟";
};
n.inputCreatorID = function() {
var e = this;
v.default.playSfx();
v.default.showNumer("请输入盟主ID", m.GameConfig.NumberType.INT, function(t) {
e.lblID.string = "" + t;
});
};
n.onCreateClub = function() {
var e = this;
v.default.playSfx();
if (C.default.isNullOrEmpty(this.nameInput.string)) v.default.alertTip("请输入公会名称"); else if (this.isLeague && C.default.isNullOrEmpty(this.lblID.string)) v.default.alertTip("请输入盟主ID"); else {
var t = this.nameInput.string;
this.isLeague ? g.default.request(m.GameConfig.ServerEventName.CreateLeague, {
clubName: t,
userID: this.lblID.string
}, function() {
v.default.alertTip("创建成功");
b.App.EventManager.dispatchEventWith(m.GameConfig.GameEventNames.UPDATE_HALL_CLUB);
e.removeEvents();
e.node.destroy();
}) : g.default.request(m.GameConfig.ServerEventName.CreateClub, {
clubName: t
}, function() {
v.default.alertTip("创建成功");
b.App.EventManager.dispatchEventWith(m.GameConfig.GameEventNames.UPDATE_HALL_CLUB);
e.removeEvents();
e.node.destroy();
});
}
};
n.onClickClose = function() {
v.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), u = A(l.prototype, "nameInput", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = A(l.prototype, "lblDesc", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = A(l.prototype, "nodeID", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = A(l.prototype, "lblID", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = A(l.prototype, "lblTitle", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l)) || c);
n.default = D;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"./data/App": "App"
} ],
CreateRoomItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "66faamcoI5MB6cc9fLWMwzW", "CreateRoomItem");
n.__esModule = !0;
n.default = void 0;
e("../../../GameBase/GameConfig"), l(e("../../../Main/NetWork/Connector"));
var i, a, r, o, s = l(e("../../../Main/Script/Cache")), c = (l(e("../../common/GameUtils")), 
e("./data/App"));
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
function u(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function d(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function h(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
f(e, t);
}
function f(e, t) {
return (f = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
var p = cc._decorator, m = p.ccclass, g = (i = (0, p.property)(cc.Label), m(a = (r = function(e) {
h(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
u(t = e.call.apply(e, [ this ].concat(i)) || this, "lblDesc", o, d(t));
t.eventKey = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {};
n.initGame = function(e, t, n) {
this.eventKey = n;
this.eventData = t;
this.lblDesc.string = e.name;
};
n.initPerson = function(e, t, n) {
this.lblDesc.string = e + "人场";
this.eventKey = n;
this.eventData = e;
};
n.initRule = function(e, t, n) {
this.lblDesc.string = t;
this.eventKey = n;
this.eventData = e;
};
n.onClickItem = function() {
s.default.playSfx();
c.App.EventManager.dispatchEventWith(this.eventKey, this.eventData);
};
return t;
}(cc.Component), o = function(e, t, n, i) {
var a = {};
Object.keys(i).forEach(function(e) {
a[e] = i[e];
});
a.enumerable = !!a.enumerable;
a.configurable = !!a.configurable;
("value" in a || a.initializer) && (a.writable = !0);
void 0;
if (void 0 === (a = n.slice().reverse().reduce(function(t, n) {
return n(e, "lblDesc", t) || t;
}, a)).initializer) {
Object.defineProperty(e, "lblDesc", a);
a = null;
}
return a;
}(r.prototype, 0, [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), r)) || a);
n.default = g;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"./data/App": "App"
} ],
CreateRoomPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "1fed0Tdsb5DGqqEnJ+Ym+F/", "CreateRoomPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N = e("../../../GameBase/GameConfig"), w = x(e("../../../Main/NetWork/Connector")), D = x(e("../../../Main/Script/Cache")), P = x(e("../../common/GameUtils")), M = e("./data/App");
function x(e) {
return e && e.__esModule ? e : {
default: e
};
}
function O(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function G(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function R(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
k(e, t);
}
function k(e, t) {
return (k = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function L(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var B = cc._decorator, F = B.ccclass, U = B.property, H = (i = U(cc.EditBox), a = U(cc.Label), 
r = U(cc.Label), o = U(cc.Label), s = U(cc.Label), c = U(cc.Label), l = U(cc.Label), 
u = U(cc.Node), d = U(cc.Node), h = U(cc.Prefab), f = U(cc.Prefab), F(p = (m = function(e) {
R(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
O(t = e.call.apply(e, [ this ].concat(i)) || this, "roomNameInput", g, G(t));
O(t, "lblBase", v, G(t));
O(t, "lblFee", C, G(t));
O(t, "lblLower", b, G(t));
O(t, "lblDesc", y, G(t));
O(t, "lblNiao", S, G(t));
O(t, "lblShuffle", _, G(t));
O(t, "gameContent", T, G(t));
O(t, "ruleContent", E, G(t));
O(t, "toggleItem", A, G(t));
O(t, "ruleItem", I, G(t));
t.newGame = null;
t.newPerson = null;
t.newRule = [];
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.renderUI();
};
n.addEvents = function() {
M.App.EventManager.addEventListener(N.GameConfig.GameEventNames.CREATE_ROOM_CHOOSE_GAME, this.selectGame, this);
M.App.EventManager.addEventListener(N.GameConfig.GameEventNames.CREATE_ROOM_CHOOSE_PERSON, this.selectRoom, this);
M.App.EventManager.addEventListener(N.GameConfig.GameEventNames.CREATE_ROOM_CHOOSE_RULE, this.selectRule, this);
};
n.removeEvents = function() {
M.App.EventManager.removeEventListener(N.GameConfig.GameEventNames.CREATE_ROOM_CHOOSE_GAME, this.selectGame, this);
M.App.EventManager.removeEventListener(N.GameConfig.GameEventNames.CREATE_ROOM_CHOOSE_PERSON, this.selectRoom, this);
M.App.EventManager.removeEventListener(N.GameConfig.GameEventNames.CREATE_ROOM_CHOOSE_RULE, this.selectRule, this);
};
n.renderUI = function() {
var e = this;
this.gameContent.removeAllChildren();
if (!P.default.isNullOrEmpty(N.GameConfig.RoomConfig)) {
this.newGame = N.GameConfig.RoomConfig[0].gameType;
this.lblDesc.string = N.GameConfig.RoomConfig[0].desc;
this.selectGame({
data: 0
});
N.GameConfig.RoomConfig.forEach(function(t, n) {
var i = cc.instantiate(e.toggleItem);
i.getComponent("CreateRoomItem").initGame(t, n, N.GameConfig.GameEventNames.CREATE_ROOM_CHOOSE_GAME);
e.gameContent.addChild(i);
});
}
};
n.selectGame = function(e) {
var t = this;
this.newGame = N.GameConfig.RoomConfig[e.data].gameType;
this.newPerson = N.GameConfig.RoomConfig[e.data].person[0];
this.newRule = [];
this.lblDesc.string = N.GameConfig.RoomConfig[e.data].desc;
this.ruleContent.removeAllChildren();
if (!P.default.isNullOrEmpty(N.GameConfig.RoomConfig[e.data].rules)) {
console.log("1123", N.GameConfig.RoomConfig[e.data].rules, e.data);
N.GameConfig.RoomConfig[e.data].rules.forEach(function(e) {
var n = cc.instantiate(t.ruleItem);
n.getComponent("CreateRoomRule").renderUI(e);
t.ruleContent.addChild(n);
});
}
};
n.selectRoom = function(e) {
this.newPerson = e.data;
};
n.selectRule = function(e) {
var t = this.newRule.findIndex(function(t) {
return t.key == e.data.key;
});
-1 == t ? this.newRule.push(e.data) : this.newRule[t] = e.data;
};
n.onInputBase = function() {
var e = this;
D.default.playSfx();
D.default.showNumer("请输入底分", N.GameConfig.NumberType.FLOAT, function(t) {
e.lblBase.string = "" + t;
});
};
n.onInputFee = function() {
var e = this;
D.default.playSfx();
D.default.showNumer("请输入抽水金额", N.GameConfig.NumberType.FLOAT, function(t) {
e.lblFee.string = "" + t;
});
};
n.onInputLower = function() {
var e = this;
D.default.playSfx();
D.default.showNumer("请输入限入金额", N.GameConfig.NumberType.FLOAT, function(t) {
e.lblLower.string = "" + t;
});
};
n.onInputNiao = function() {
var e = this;
D.default.playSfx();
D.default.showNumer("请输入打鸟金额", N.GameConfig.NumberType.FLOAT, function(t) {
e.lblNiao.string = "" + t;
});
};
n.onInputShuffle = function() {
var e = this;
D.default.playSfx();
D.default.showNumer("请输入洗牌金额", N.GameConfig.NumberType.FLOAT, function(t) {
e.lblShuffle.string = "" + t;
});
};
n.onConfirmRoom = function() {
var e = this;
D.default.playSfx();
console.log("dtaa", this.newRule);
if (P.default.isNullOrEmpty(this.newPerson)) D.default.alertTip("请选择人数"); else if ("" != this.roomNameInput.string) if ("" != this.lblBase.string) if ("" != this.lblFee.string) if ("" != this.lblLower.string) if ("" != this.lblNiao.string) if ("" != this.lblShuffle.string) {
var t = {
clubID: M.App.Club.CurrentClubID,
name: this.roomNameInput.string,
gameType: this.newGame,
base: parseInt(100 * parseFloat(this.lblBase.string)),
fee: parseInt(100 * parseFloat(this.lblFee.string)),
lower: parseInt(100 * parseFloat(this.lblLower.string)),
bird: parseInt(100 * parseFloat(this.lblNiao.string)),
shuffle: parseInt(100 * parseFloat(this.lblShuffle.string)),
person: this.newPerson
};
if (!P.default.isNullOrEmpty(this.newRule)) {
t.rules = {};
this.newRule.forEach(function(e) {
t.rules[e.key] = e.value;
});
}
w.default.request(N.GameConfig.ServerEventName.CreateRoom, t, function() {
D.default.alertTip("创建成功");
M.App.EventManager.dispatchEventWith(N.GameConfig.GameEventNames.CLUB_ROOM_CHANGE);
e.removeEvents();
e.node.destroy();
}, !0, function(e) {
D.default.alertTip(e.message || "创建失败");
});
} else D.default.alertTip("请设置洗牌"); else D.default.alertTip("请设置打鸟"); else D.default.alertTip("请设置限入"); else D.default.alertTip("请设置抽水"); else D.default.alertTip("请设置底分"); else D.default.alertTip("请设置房型名称");
};
n.onClickClose = function() {
D.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), g = L(m.prototype, "roomNameInput", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = L(m.prototype, "lblBase", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = L(m.prototype, "lblFee", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = L(m.prototype, "lblLower", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = L(m.prototype, "lblDesc", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = L(m.prototype, "lblNiao", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = L(m.prototype, "lblShuffle", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = L(m.prototype, "gameContent", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = L(m.prototype, "ruleContent", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = L(m.prototype, "toggleItem", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = L(m.prototype, "ruleItem", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m)) || p);
n.default = H;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"./data/App": "App"
} ],
CreateRoomRule: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "c1cd9PsjN1MupthcWeVc7So", "CreateRoomRule");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = (h(e("../../../Main/NetWork/Connector")), 
h(e("../../../Main/Script/Cache"))), d = (h(e("../../common/GameUtils")), e("./data/App"));
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
function f(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function p(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function m(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
g(e, t);
}
function g(e, t) {
return (g = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function v(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var C = cc._decorator, b = C.ccclass, y = C.property, S = (i = y(cc.Node), a = y(cc.Prefab), 
b(r = (o = function(e) {
m(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
f(t = e.call.apply(e, [ this ].concat(i)) || this, "ruleContent", s, p(t));
f(t, "toggleItem", c, p(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.renderUI = function(e) {
var t = this;
this.ruleContent.removeAllChildren();
e && e.selection.forEach(function(n, i) {
var a = cc.instantiate(t.toggleItem), r = {
key: e.name,
value: n
};
0 == i && d.App.EventManager.dispatchEventWith(l.GameConfig.GameEventNames.CREATE_ROOM_CHOOSE_RULE, r);
var o = e.desc.replace("%s", n);
a.getComponent("CreateRoomItem").initRule(r, o, l.GameConfig.GameEventNames.CREATE_ROOM_CHOOSE_RULE);
t.ruleContent.addChild(a);
});
};
n.onClickClose = function() {
u.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), s = v(o.prototype, "ruleContent", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c = v(o.prototype, "toggleItem", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), o)) || r);
n.default = S;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"./data/App": "App"
} ],
DataBase: [ function(e, t) {
"use strict";
cc._RF.push(t, "29228gAGQ9OUrVfALn50DhU", "DataBase");
var n = e("./utils"), i = {
player: null,
connectInfo: null,
systemNotice: null,
gameType: 11,
gameDate: null,
noticeContent: null,
tableBgIndex: 0,
tableBgSf: null,
systemConfig: null,
card: 0,
postfix: [ "00", "01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29" ],
gameName: [ "沅江千分", "", "沅江麻将", "", "隆回罢炸弹", "邵阳剥皮", "沅江鬼胡子", "跑得快", "新化字牌", "新化炸弹", "郴州字牌", "株洲碰胡", "衡阳同花", "衡阳六胡抢", "打码子", "", "红中麻将", "南县歪胡子", "", "安乡偎麻雀", "红A", "娄底炸弹", "娄底放炮罚", "涟源K五十", "转转麻将", "岳阳字牌", "隆回炸弹", "长沙麻将", "沅江二人千分", "福禄寿" ],
TABLE_TYPE: {
PDK: "Game07",
PDK_CLAN: "Game07",
PDK_SOLO: "Game07",
PDK_SOLO_CLAN: "Game07",
XHZP: "Game08",
XHZP_CLAN: "Game08",
XHZP_SOLO: "Game08",
XHZP_SOLO_CLAN: "Game08",
XHZD: "Game09",
XHZD_CLAN: "Game09",
LDZP: "Game08",
LDZP_CLAN: "Game08",
LDZP_SOLO: "Game08",
LDZP_SOLO_CLAN: "Game08",
HZMJ_SOLO: "Game16",
HZMJ: "Game16",
HNMJ: "Game19",
LGMJ: "Game19"
},
GAME_TYPE: {
PDK: 7,
PDK_CLAN: 7,
PDK_SOLO: 7,
PDK_SOLO_CLAN: 7,
XHZP: 8,
XHZP_CLAN: 8,
XHZP_SOLO: 8,
XHZP_SOLO_CLAN: 8,
XHZD: 9,
XHZD_CLAN: 9,
LDZP: 8,
LDZP_CLAN: 8,
LDZP_SOLO: 8,
LDZP_SOLO_CLAN: 8,
HZMJ_SOLO: 16,
HZMJ: 16,
HNMJ: 19,
LGMJ: 19
},
GAME_NAME: {
PDK: "跑得快",
PDK_SOLO: "双人跑得快",
XHZP: "硬胡子",
XHZP_SOLO: "双人硬胡子",
XHZD: "新化炸弹",
LDZP: "放炮罚",
LDZP_SOLO: "双人放炮罚",
HZMJ_SOLO: "双人红中麻将",
HZMJ: "红中麻将",
HNMJ_SOLO: "双人海南麻将",
HNMJ: "海南麻将",
LGMJ_SOLO: "双人新海南麻将",
LGMJ: "新海南麻将"
},
CLAN_NAME: [ "yjqf_clan_name", null, "yjmj_clan_name", "lyzp_clan_name", "lhbzd_clan_name", "sybp_clan_name", "yjghz_clan_name", "yjpdk_clan_name", "xhzp_clan_name", "xhzd_clan_name", "czzp_clan_name", "zzph_clan_name", "hyth_clan_name", "hdlhq_clan_name", "dmz_clan_name", null, "hzmj_clan_name", "nxwhz_clan_name", null, "axwmq_clan_name", "ha_clan_name", "ldzd_clan_name", "ldzp_clan_name", "lyzd_clan_name", "zzmj_clan_name", "yyzp_clan_name", "lhzd_clan_name", "csmj_clan_name", "yjqf_clan_name", "fls_clan_name" ],
CLAN_ID: [ "yjqf_clan_id", null, "yjmj_clan_id", "lyzp_clan_id", "lhbzd_clan_id", "sybp_clan_id", "yjghz_clan_id", "yjpdk_clan_id", "xhzp_clan_id", "xhzd_clan_id", "czzp_clan_id", "zzph_clan_id", "hyth_clan_id", "hdlhq_clan_id", "dmz_clan_id", null, "hzmj_clan_id", "nxwhz_clan_id", null, "axwmq_clan_id", "ha_clan_id", "ldzd_clan_id", "ldzp_clan_id", "lyzd_clan_id", "zzmh_clan_id", "yyzp_clan_id", "lhzd_clan_id", "csmj_clan_id", "yjqf_clan_id", "fls_clan_id" ],
STORAGE_KEY: {
USER_ID: "USER_ID",
LAST_LOGIN: "LAST_LOGIN",
LOGIN_PASSWD: "LOGIN_PASSWD",
LOGIN_PHONE: "LOGIN_PHONE",
NEW_PLAYER: "NEW_PLAYER",
TABLE_CUT_TYPE: "TABLE_CUT_TYPE",
SET_MUSIC: "SET_MUSIC",
SET_SOUND: "SET_SOUND",
SET_TABLE: "SET_TABLE",
GAME_TYPE: "GAME_TYPE",
GAME_DATE: "GAME_DATE",
CLAN_NAME: "CLAN_NAME",
QUICK_JOIN_CLUB: "QUICK_JOIN_CLUB",
QUICK_JOIN_GAME: "QUICK_JOIN_GAME",
QUICK_JOIN_ROOM: "QUICK_JOIN_ROOM",
AUDIO: [ "AUDIO_0", "AUDIO_1", "AUDIO_2", "AUDIO_3", "AUDIO_4", "AUDIO_5", "AUDIO_6", "AUDIO_7", "AUDIO_8", "AUDIO_9", "AUDIO_10", "AUDIO_11", "AUDIO_12", "AUDIO_13", "AUDIO_14", "AUDIO_15", "AUDIO_16", "AUDIO_17", "AUDIO_18", "AUDIO_19", "AUDIO_20", "AUDIO_21", "AUDIO_22", "AUDIO_23", "AUDIO_24", "AUDIO_25", "AUDIO_26", "AUDIO_27", "AUDIO_28" ],
AUDIO_VERSION: [ "AUDIO_VERSION_0", "AUDIO_VERSION_1", "AUDIO_VERSION_2", "AUDIO_VERSION_3", "AUDIO_VERSION_4", "AUDIO_VERSION_5", "AUDIO_VERSION_6", "AUDIO_VERSION_7", "AUDIO_VERSION_8", "AUDIO_VERSION_9", "AUDIO_VERSION_10", "AUDIO_VERSION_11", "AUDIO_VERSION_12", "AUDIO_VERSION_13", "AUDIO_VERSION_14", "AUDIO_VERSION_15", "AUDIO_VERSION_16", "AUDIO_VERSION_17", "AUDIO_VERSION_18", "AUDIO_VERSION_19", "AUDIO_VERSION_20", "AUDIO_VERSION_21", "AUDIO_VERSION_22", "AUDIO_VERSION_23", "AUDIO_VERSION_24", "AUDIO_VERSION_25", "AUDIO_VERSION_26", "AUDIO_VERSION_27", "AUDIO_VERSION_28" ]
},
getFloat: function(e, t) {
var i = n.getValue(e);
return null == i ? null == t ? 0 : t : parseFloat(i);
},
setFloat: function(e, t) {
n.saveValue(e, t);
},
getInt: function(e, t) {
var i = n.getValue(e);
return null == i ? t || 1 : parseInt(i);
},
getIntTable: function(e) {
var t = n.getValue(e);
return n.isNullOrEmpty(t) ? 1 : parseInt(t);
},
setInt: function(e, t) {
n.isNullOrEmpty(t) && (t = 1);
var i = parseInt(t);
n.saveValue(e, i);
},
getString: function(e) {
var t = n.getValue(e);
return n.isNullOrEmpty(t) ? "" : t;
},
setString: function(e, t) {
n.isNullOrEmpty(t) && (t = "");
n.saveValue(e, t);
},
setGameType: function(e) {
n.saveValue(i.STORAGE_KEY.GAME_TYPE, e);
i.gameType = e;
},
getTableScene: function() {
return i.TABLE_TYPE[i.gameType];
},
loadGameType: function() {
var e = n.getValue(i.STORAGE_KEY.GAME_TYPE);
e = null == e ? 7 : parseInt(e);
i.gameType = e;
}
};
t.exports = i;
cc._RF.pop();
}, {
"./utils": "utils"
} ],
Dict: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "86467/Jfw9PMpeOfa78UYzQ", "Dict");
n.__esModule = !0;
n.Dict = void 0;
function i(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function a(e, t, n) {
t && i(e.prototype, t);
n && i(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var r = function() {
function e() {
this.m_keys = [];
this.m_values = [];
}
var t = e.prototype;
t.indexOf = function(e) {
return this.m_keys.indexOf(e);
};
t.add = function(e, t) {
var n = this.indexOf(e);
if (n >= 0) this.m_values[n] = t; else {
this.m_keys.push(e);
this.m_values.push(t);
}
};
t.get = function(e) {
var t = this.indexOf(e);
return t >= 0 ? this.m_values[t] : null;
};
t.remove = function(e) {
var t = this.indexOf(e);
if (t >= 0) {
this.m_keys.splice(t, 1);
return this.m_values.splice(t, 1)[0];
}
return null;
};
t.clear = function() {
this.m_keys.length = 0;
this.m_keys = [];
this.m_values.length = 0;
this.m_values = [];
};
t.getRandomData = function() {
var e = Math.random() * this.keys.length << 0;
return this.m_values[e];
};
t.getRandomKey = function() {
var e = Math.random() * this.keys.length << 0;
return this.m_keys[e];
};
a(e, [ {
key: "length",
get: function() {
return this.m_keys.length;
}
}, {
key: "values",
get: function() {
return this.m_values.concat();
}
}, {
key: "keys",
get: function() {
return this.m_keys.concat();
}
} ]);
return e;
}();
n.Dict = r;
cc._RF.pop();
}, {} ],
Effect_Drag: [ function(e, t) {
"use strict";
cc._RF.push(t, "e6204lHyiFMC7mNrqRD848G", "Effect_Drag");
var n = e("../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {},
start: function() {
this.node.on(cc.Node.EventType.TOUCH_START, this.onTouchStart, this);
this.node.on(cc.Node.EventType.TOUCH_MOVE, this.onTouchMove, this);
this.node.on(cc.Node.EventType.TOUCH_END, this.onTouchEnd, this);
this.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onTouchEnd, this);
},
onTouchStart: function(e) {
this.touchPos = e.getLocation();
},
onTouchMove: function(e) {
var t = e.getLocation(), i = cc.find("Canvas").convertToNodeSpaceAR(t);
n.BtnIsMoving = !0;
this.node.x = parseInt(i.x);
this.node.y = parseInt(i.y);
},
onTouchEnd: function() {
this.node.x >= 460 && (this.node.x = 460);
this.node.x <= -460 && (this.node.x = -460);
this.node.y <= -140 && (this.node.y = -140);
this.node.y >= 140 && (this.node.y = 140);
n.BtnIsMoving = !1;
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig"
} ],
Effect_Scale: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "5b5e42VEDdLW53az4DVdBne", "Effect_Scale");
n.__esModule = !0;
n.default = void 0;
var i;
function a(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
r(e, t);
}
function r(e, t) {
return (r = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
var o = cc._decorator, s = o.ccclass, c = (o.property, s(i = function(e) {
a(t, e);
function t() {
return e.apply(this, arguments) || this;
}
t.prototype.onLoad = function() {
this.node.stopAllActions();
var e = cc.scaleTo(.3, .9), t = cc.scaleTo(.5, 1).easing(cc.easeBackInOut()), n = cc.sequence(e, t, cc.delayTime(4)), i = cc.repeatForever(n);
this.node.runAction(i);
};
return t;
}(cc.Component)) || i);
n.default = c;
t.exports = n.default;
cc._RF.pop();
}, {} ],
Effect_Shake: [ function(e, t) {
"use strict";
cc._RF.push(t, "9abc7MgekBEAL0tvwWE/Cg8", "Effect_Shake");
cc.Class({
extends: cc.Component,
properties: {
angle: 15
},
start: function() {
var e = this, t = cc.rotateBy(.05, 5), n = cc.rotateBy(.1, -10), i = cc.rotateBy(.1, 10), a = cc.rotateBy(.05, -5), r = cc.sequence(n, i).repeat(3), o = cc.sequence(t, r, a, cc.callFunc(function() {
e.node.angle = 0;
}), cc.delayTime(5)).repeatForever();
this.node.runAction(o);
}
});
cc._RF.pop();
}, {} ],
EventCall: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "b6729Y46MZD1pOO80hq+rvT", "EventCall");
n.__esModule = !0;
n.EventCall = void 0;
var i = function() {
function e(e, t) {
this.callback = e;
this.thisObj = t;
this.once = !1;
}
e.prototype.clone = function() {
var t = new e(this.callback, this.thisObj);
t.index = this.index;
t.type = this.type;
return t;
};
return e;
}();
n.EventCall = i;
cc._RF.pop();
}, {} ],
EventDatas: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "58885accqxL85MXZJW8KlYp", "EventDatas");
n.__esModule = !0;
n.EventDatas = void 0;
function i(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function a(e, t, n) {
t && i(e.prototype, t);
n && i(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var r = function() {
function e(e, t) {
this._isStopedPropagation = !1;
this.type = e;
this.data = t;
}
e.prototype.stopPropagation = function() {
this._isStopedPropagation = !0;
};
a(e, [ {
key: "isStopedPropagation",
get: function() {
return this._isStopedPropagation;
}
} ]);
return e;
}();
n.EventDatas = r;
cc._RF.pop();
}, {} ],
EventManager: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "78d12thz5ZB2KJu3Rlvjc1+", "EventManager");
n.__esModule = !0;
n.EventManager = void 0;
var i = e("./Dict"), a = e("./EventCall"), r = e("./EventDatas"), o = function() {
e.getInstance = function() {
this._instance || (this._instance = new e());
return this._instance;
};
function e() {
this._callbackMaps = new i.Dict();
this._sendBuffer = [];
}
var t = e.prototype;
t.addEventListener = function(e, t, n, i, r) {
void 0 === i && (i = 0);
void 0 === r && (r = !1);
if (t && n) {
var o = new a.EventCall(t, n);
o.type = e;
o.index = i;
o.once = r;
var s = this._callbackMaps.get(e);
if (s) {
for (var c = !1, l = s.length - 1; l >= 0; l--) {
var u = s[l];
if (u.thisObj === n && u.callback === t) {
u.once = r;
u.index = i;
c = !0;
break;
}
}
if (!c) {
s.push(o);
s.sort(this.sortPriority);
}
} else this._callbackMaps.add(e, [ o ]);
}
};
t.sortPriority = function(e, t) {
return t.index - e.index;
};
t.hasEventListener = function(e, t, n) {
void 0 === t && (t = null);
void 0 === n && (n = null);
var i = this._callbackMaps.get(e);
if (i) {
if (!t || !n) return !0;
for (var a = 0, r = i.length; a < r; a++) {
var o = i[a];
if (o.callback === t && o.thisObj === n) return !0;
}
}
return !1;
};
t.removeEventListener = function(e, t, n) {
var i = this._callbackMaps.get(e);
if (i) for (var a = 0, r = i.length; a < r; a++) {
var o = i[a];
if (o.callback === t && o.thisObj === n) {
i.splice(a, 1);
r--;
a--;
}
}
};
t.dispatchEvent = function(e) {
e.target = this;
this._sendBuffer.push(e);
for (;this._sendBuffer.length > 0; ) {
e = this._sendBuffer.shift();
var t = this._callbackMaps.get(e.type);
if (t) for (var n = t.concat(), i = 0, a = n.length; i < a; i++) {
var r = n[i];
if (-1 != t.indexOf(r)) {
r.callback.call(r.thisObj, e);
r.once && this.removeEventListener(e.type, r.callback, r.thisObj);
if (e.isStopedPropagation) break;
}
} else console.log("事件ID:" + e.type + "无监听回调");
}
};
t.dispatchEventWith = function(e, t) {
void 0 === t && (t = null);
var n = new r.EventDatas(e, t);
this.dispatchEvent(n);
};
t.destroy = function() {
this._callbackMaps = new i.Dict();
this._sendBuffer = [];
};
return e;
}();
n.EventManager = o;
o._instance = null;
cc._RF.pop();
}, {
"./Dict": "Dict",
"./EventCall": "EventCall",
"./EventDatas": "EventDatas"
} ],
FreezeListItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "51096izKmZMKLernC6Ijp3I", "FreezeListItem");
n.__esModule = !0;
n.default = void 0;
e("../../../GameBase/GameConfig");
var i, a, r, o, s, c, l, u, d, h, f = g(e("../../../Main/Script/Cache")), p = e("../../../Main/Script/native-extend"), m = g(e("../../common/GameUtils"));
function g(e) {
return e && e.__esModule ? e : {
default: e
};
}
function v(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function C(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function b(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
y(e, t);
}
function y(e, t) {
return (y = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function S(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var _ = cc._decorator, T = _.ccclass, E = _.property, A = (i = E(cc.Label), a = E(cc.Label), 
r = E(cc.Label), o = E(cc.Label), T(s = (c = function(e) {
b(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
v(t = e.call.apply(e, [ this ].concat(i)) || this, "lblTime", l, C(t));
v(t, "lblStatus", u, C(t));
v(t, "lblAmount", d, C(t));
v(t, "lblReason", h, C(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {};
n.renderUI = function(e) {
this.lblAmount.string = "" + m.default.formatGold(e.amount);
this.lblStatus.string = "freeze" == e.status ? "冻结" : "已解冻";
this.lblTime.string = new Date(e.unfreezeDate).format("yyyy-MM-dd hh:mm:ss");
this.lblReason.string = "" + e.reason;
"REPORT" != e.type && "REPORTED" != e.type || this.node.on(cc.Node.EventType.TOUCH_END, function() {
p.Social.setCopy(e.replayID);
f.default.alertTip("回放码已复制");
}, this);
};
n.onClickClose = function() {
f.default.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
return t;
}(cc.Component), l = S(c.prototype, "lblTime", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = S(c.prototype, "lblStatus", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = S(c.prototype, "lblAmount", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = S(c.prototype, "lblReason", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c)) || s);
n.default = A;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/native-extend": "native-extend",
"../../common/GameUtils": "GameUtils"
} ],
FreezeListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "57a5elyiZNBxIOZmIjmGUzq", "FreezeListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = f(e("../../../Main/NetWork/Connector")), d = f(e("../../../Main/Script/Cache")), h = f(e("../../common/GameUtils"));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
function p(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function m(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function g(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
v(e, t);
}
function v(e, t) {
return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function C(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var b = cc._decorator, y = b.ccclass, S = b.property, _ = (i = S(cc.Node), a = S(cc.Prefab), 
y(r = (o = function(e) {
g(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
p(t = e.call.apply(e, [ this ].concat(i)) || this, "listContent", s, m(t));
p(t, "listItem", c, m(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.renderUI();
};
n.renderUI = function() {
var e = this;
this.listContent.removeAllChildren();
u.default.request(l.GameConfig.ServerEventName.UserFreezeList, {}, function(t) {
h.default.isNullOrEmpty(t.logs) || t.logs.forEach(function(t) {
var n = cc.instantiate(e.listItem);
n.getComponent("FreezeListItem").renderUI(t);
e.listContent.addChild(n);
});
});
};
n.onClickClose = function() {
d.default.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
return t;
}(cc.Component), s = C(o.prototype, "listContent", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c = C(o.prototype, "listItem", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), o)) || r);
n.default = _;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils"
} ],
GameBase: [ function(e, t) {
"use strict";
cc._RF.push(t, "44b6fDkWYFBj70zYBjBaLB8", "GameBase");
var n = e("DataBase"), i = e("audio-ctrl"), a = e("../Main/Script/utils"), r = e("./GameConfig").GameConfig, o = e("../Main/Script/Cache"), s = e("../script/ui/hall/data/App").App;
cc.Class({
extends: cc.Component,
properties: {
lblPhoneTime: cc.Label,
dtCount: 0
},
playManageAudio: function(t) {
var i = n.gameType < 10 ? "Game0" + n.gameType : "Game" + n.gameType;
if (cc.sys.isNative) {
var a = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + i + "/" + t;
cc.loader.load(a, function(t, n) {
t || e("audio-ctrl").getInstance().playSFX(n);
});
}
},
reconnectGame: function() {
i.getInstance().stopAll();
cc.game.restart();
},
initGameBase: function(e) {
void 0 === e && (e = !1);
a.fitScreen();
s.unlockScene();
this.tableBgmInit(e);
this.voteStatus = !1;
this.chat = null;
this.vote = null;
this.set = null;
this.playerInfo = null;
this.lastClickChat = new Date().getTime();
this.initChat();
},
removeGoEasyEvents: function() {},
tableBgmInit: function(e) {
void 0 === e && (e = !1);
var t = cc.url.raw("resources/Audio/Common/TableMusic.mp3");
e && (t = cc.url.raw("resources/Audio/Common/hnbg.mp3"));
i.getInstance().playBGM(t);
},
removeDir: function() {
n.gameType, n.gameType;
if (jsb.fileUtils.isDirectoryExist(jsb.fileUtils.getWritablePath() + "remote-asset")) {
jsb.fileUtils.removeDirectory(jsb.fileUtils.getWritablePath() + "remote-asset");
n.setString(n.STORAGE_KEY.AUDIO[n.gameType], "");
}
},
showGps: function() {},
showSet: function() {
o.playSfx();
a.pop(r.pop.GameSetting);
},
initChat: function() {
var e = this;
cc.loader.loadRes("GameBase/preChat", function(t, n) {
if (t) e.initChat(); else {
e.chat = cc.instantiate(n).getComponent("ModuleChat");
var i = new cc.Event.EventCustom("chatAlready", !0);
e.node && e.node.dispatchEvent(i);
}
});
},
showChat: function() {
if (null != this.chat) {
o.playSfx();
var e = new Date().getTime();
if (!(e - this.lastClickChat < 1e3)) {
this.lastClickChat = e;
this.chat.showChat();
}
}
},
restartGame: function() {
i.getInstance().stopAll();
cc.game.restart();
},
addEvents: function() {},
removeEvents: function() {},
update: function() {
this.dtCount++;
if (this.dtCount % 60) {
this.dtCount = 0;
var e = new Date(), t = (e.getHours() < 10 ? "0" + e.getHours() : e.getHours()) + ":", n = e.getMinutes() < 10 ? "0" + e.getMinutes() : e.getMinutes();
this.lblPhoneTime && (this.lblPhoneTime.string = t + n);
}
},
onDestroy: function() {
this.removeEvents();
this.removeGoEasyEvents();
}
});
cc._RF.pop();
}, {
"../Main/Script/Cache": "Cache",
"../Main/Script/utils": "utils",
"../script/ui/hall/data/App": "App",
"./GameConfig": "GameConfig",
DataBase: "DataBase",
"audio-ctrl": "audio-ctrl"
} ],
GameConfig: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "2cbaa0HN6BEz4A5+jHgbl5y", "GameConfig");
n.__esModule = !0;
n.GameConfig = void 0;
var i, a;
function r(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function o(e, t, n) {
t && r(e.prototype, t);
n && r(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var s = function() {
function e() {}
o(e, null, [ {
key: "enableLog",
get: function() {
return e._enableLog;
},
set: function(t) {
if (e._enableLog != t) {
e._enableLog = t;
if (null == e.originalLogFun) {
e.originalLogFun = console.log;
console.log = function() {
if (e._enableLog) {
for (var t = arguments.length, n = new Array(t), i = 0; i < t; i++) n[i] = arguments[i];
e.originalLogFun.apply(null, n);
}
};
}
}
}
} ]);
return e;
}();
n.GameConfig = s;
s.GameType = {
PDK_SOLO: "PDK_SOLO",
PDK: "PDK",
XHZP: "XHZP",
XHZP_SOLO: "XHZP_SOLO",
LDZP: "LDZP",
LDZP_SOLO: "LDZP_SOLO",
XHZD: "XHZD",
HZMJ_SOLO: "HZMJ_SOLO",
HZMJ: "HZMJ",
HNMJ_SOLO: "HNMJ_SOLO",
HNMJ: "HNMJ",
LGMJ: "LGMJ"
};
s.GameName = {
HALL: "集合大厅",
PDK_SOLO: "跑得快",
PDK_SOLO_CLAN: "跑得快",
PDK: "跑得快",
PDK_CLAN: "跑得快",
XHZP: "放炮罚",
XHZP_CLAN: "放炮罚",
XHZP_SOLO: "放炮罚",
XHZP_SOLO_CLAN: "放炮罚",
XHZD: "新化炸弹",
XHZD_CLAN: "新化炸弹",
LDZP: "放炮罚",
LDZP_CLAN: "放炮罚",
LDZP_SOLO: "放炮罚",
LDZP_SOLO_CLAN: "放炮罚",
HZMJ_SOLO: "红中麻将",
HZMJ: "红中麻将",
HNMJ_SOLO: "双人海南麻将",
HNMJ: "海南麻将",
LGMJ_SOLO: "双人新海南麻将",
LGMJ: "新海南麻将"
};
s.GameAutoTips = {
PDK_SOLO: "60秒内不出牌，系统将自动进入托管状态。\n规则: 默认跟打，如出头，则由大到小，单张依次出牌。",
PDK: "60秒内不出牌，系统将自动进入托管状态。\n规则: 默认跟打，如出头，则由大到小，单张依次出牌。",
XHZP: "60秒内不出牌，系统将自动进入托管状态。\n规则: 不会进行吃、碰、胡，如必须出牌，则由小到大开始出牌。",
XHZP_SOLO: "60秒内不出牌，系统将自动进入托管状态。\n规则: 不会进行吃、碰、胡，如必须出牌，则由小到大开始出牌。",
XHZD: "90秒内不出牌，系统将自动进入托管状态。\n规则: 由小到大，单张依次出牌，其他玩家出牌时自动选择要不起。",
LDZP: "60秒内不出牌，系统将自动进入托管状态。\n规则: 不会进行吃、碰、胡，如必须出牌，则由小到大开始出牌。",
LDZP_SOLO: "60秒内不出牌，系统将自动进入托管状态。\n规则: 不会进行吃、碰、胡，如必须出牌，则由小到大开始出牌。"
};
s.GameRoomLevel = [ "初级场", "中级场", "高级场", "大师场" ];
s.GameEventNames = ((i = {
GAME_TYPE_CHANGE: "GAME_TYPE_CHANGE",
ROOM_TYPE_CHANGE: "ROOM_TYPE_CHANGE",
ROOM_TYPE_BTN_CHANGE: "ROOM_TYPE_BTN_CHANGE",
UPDATE_CLUB_NOTICE: "UPDATE_CLUB_NOTICE",
ROBOT_SELECT_ROOM: "ROBOT_SELECT_ROOM",
UPDATE_REPORT_LIST: "UPDATE_REPORT_LIST",
UPDATE_HALL_CLUB: "UPDATE_HALL_CLUB",
CLUB_CHANGE: "CLUB_CHANGE",
CHOOSE_CLUB: "CHOOSE_CLUB",
CLUB_ROOM_CHANGE: "CLUB_ROOM_CHANGE",
CLUB_ROOM_DESTROY: "CLUB_ROOM_DESTROY",
CLUB_DATA_CHANGE: "CLUB_DATA_CHANGE",
PROXY_LIST_UPDATE: "PROXY_LIST_UPDATE",
PROXY_LEVEL_UPDATE: "PROXY_LEVEL_UPDATE",
ADD_PROXY: "ADD_PROXY",
ADD_USER: "ADD_USER",
CREATE_ROOM_CHOOSE_GAME: "CREATE_ROOM_CHOOSE_GAME",
CREATE_ROOM_CHOOSE_PERSON: "CREATE_ROOM_CHOOSE_PERSON",
CREATE_ROOM_CHOOSE_RULE: "CREATE_ROOM_CHOOSE_RULE",
PLAYER_DATA_UPDATE: "PLAYER_DATA_UPDATE",
ZP_CHANGE_TABLE: "ZP_CHANGE_TABLE",
GAME_RECONNECT: "GAME_RECONNECT",
REPLAY_BACK_HALL: "REPLAY_BACK_HALL",
REPLAY_CONTINUE: "REPLAY_CONTINUE",
REPLAY_SHOW_GAME_SUMMARY: "REPLAY_SHOW_GAME_SUMMARY",
UPDATE_TABLE_BG: "UPDATE_TABLE_BG",
UPDATE_WALLET: "UPDATE_WALLET",
UPDATE_WALLET_DATA: "UPDATE_WALLET_DATA",
UPDATE_FINANCE_LIST: "UPDATE_FINANCE_LIST",
SELECT_TAG_HISTORY: "SELECT_TAG_HISTORY",
CANCEL_TAG_HISTORY: "CANCEL_TAG_HISTORY",
UPDATE_INVITE_LIST: "UPDATE_INVITE_LIST",
UPDATE_TICKET_UI: "UPDATE_TICKET_UI",
JUDGE_TIPS: "JUDGE_TIPS",
ZD_BACK_HALL: "ZD_BACK_HALL",
ZD_CONTINUE_GAME: "ZD_CONTINUE_GAME",
ZD_CHANGE_TABLE: "ZD_CHANGE_TABLE",
PDK_CHANGE_TABLE: "PDK_CHANGE_TABLE",
PDK_BACK_HALL: "PDK_BACK_HALL",
PDK_CONTINUE_GAME: "PDK_CONTINUE_GAME",
PDK_SHUFFLE_CARD: "PDK_SHUFFLE_CARD",
LDZP_SHUFFLE_CARD: "LDZP_SHUFFLE_CARD",
HZMJ_CHANGE_TABLE: "HZMJ_CHANGE_TABLE",
HZMJ_BACK_HALL: "HZMJ_BACK_HALL",
HZMJ_CONTINUE_GAME: "HZMJ_CONTINUE_GAME",
HNMJ_SHOW_SAME_CARD: "HNMJ_SHOW_SAME_CARD",
HNMJ_RESET_SAME_CARD: "HNMJ_RESET_SAME_CARD",
HNMJ_CHECK_HU: "HNMJ_CHECK_HU",
HNMJ_HIDE_TING: "HNMJ_HIDE_TING",
HNMJ_QUEST_CALL: "HNMJ_QUEST_CALL",
HNMJ_GAME_SUMMARY: "HNMJ_GAME_SUMMARY"
}).REPLAY_BACK_HALL = "REPLAY_BACK_HALL", i.MARKETS_SELECT = "MARKETS_SELECT", i.TRADES_SELECT = "TRADES_SELECT", 
i.SHOW_TRADE_TIPS = "SHOW_TRADE_TIPS", i.HIDE_TRADE_TIPS = "HIDE_TRADE_TIPS", i.REFRESH_SELL_INFO = "REFRESH_SELL_INFO", 
i.PROXY_SELECT_USER = "PROXY_SELECT_USER", i.PROXY_PROFIT_DATA = "PROXY_PROFIT_DATA", 
i.PROXY_CHANGE_PROFIT = "PROXY_CHANGE_PROFIT", i.PROXY_UPDATE_CHILD = "PROXY_UPDATE_CHILD", 
i.PROXY_UPDATE_USER = "PROXY_UPDATE_USER", i.PROXY_UPDATE_ALL_USER = "PROXY_UPDATE_ALL_USER", 
i.PROXY_UPDATE_ALL_CHILD = "PROXY_UPDATE_ALL_CHILD", i.PROXY_UPDATE_DATA = "PROXY_UPDATE_DATA", 
i.PROXY_CHANGE_ROBOT = "PROXY_CHANGE_ROBOT", i.ADMIN_SELECT_USER = "ADMIN_SELECT_USER", 
i.EXCHANGE_LEAGUE_UPDATEDATA = "EXCHANGE_LEAGUE_UPDATEDATA", i.PROXY_SHOW_NOTICE = "PROXY_SHOW_NOTICE", 
i.PUNISH_CHANGE_STATUS = "PUNISH_CHANGE_STATUS", i.GOEASY_UPDATE_GOLD = "GOEASY_UPDATE_GOLD", 
i.GOEASY_UPDATE_MAIL = "GOEASY_UPDATE_MAIL", i.GOEASY_UPDATE_TRADE = "GOEASY_UPDATE_TRADE", 
i.GOEASY_UPDATE_PRIVATE = "GOEASY_UPDATE_PRIVATE", i.GOEASY_UPDATE_SERVICE = "GOEASY_UPDATE_SERVICE", 
i.UPDATE_ACTIVE_PROCESS = "UPDATE_ACTIVE_PROCESS", i.QUESTION_SELECT_ANSWER = "QUESTION_SELECT_ANSWER", 
i);
s.ServerUrl = "";
s.DefaultUrl = "http://pku.qzhagy.com/config/release_first.json";
s.TestServerUrl = "http://161.117.57.34:8000/";
s.ProxyServer = "admin";
s.ServerEventName = ((a = {
GetPublicKey: "global/key",
GetPlayerInfo: "game/info",
UpdatePlayerById: "game/update",
GetGameType: "game/clubs",
JoinClubGame: "game/joinGame",
GetGameInfo: "game/global",
GetCash: "clientWithdraw/gameWithdraw",
Register: "game/register",
UserLogin: "game/login",
UserCodeLogin: "game/login",
SendSmsCode: "game/sms",
LoginUserCode: "global/sms/login/user",
LoginProxyCode: "global/sms/login/proxy",
BindUserCode: "global/sms/bind/user",
OTCUserCode: "global/sms/update/otc",
OTCUserPwdCode: "global/sms/security/user",
CashSmsCode: "game/clientWithdraw/sendSms",
BindPhone: "game/bind",
ChangePassword: "game/password",
GetHistory: "game/history",
Exchange: "game/exchange",
Tables: "game/tables",
AllTables: "game/hall",
Upload: "game/upload",
WxLogin: "game/oauth",
MatchInfo: "game/pollingMatch",
JoinMatch: "game/joinMatch",
CancelMatch: "game/cancelMatch",
AcceptMatch: "game/acceptMatch",
PreReportUser: "game/prereport",
OTP: "game/otp",
UpdateWallet: "game/wallet",
Lottery: "game/raffle",
LotteryList: "game/getRaffleLog",
LotteryData: "game/getRaffle",
TaskProgress: "game/task/progress",
TaskInfo: "game/task/info",
TaskReceive: "game/task/receive",
GiveAwayScore: "game/wallet/giveAway",
ProxyLogin: s.ProxyServer + "/login",
ProxyInfo: s.ProxyServer + "/info",
ProxyUsers: s.ProxyServer + "/users",
ProxyChildren: s.ProxyServer + "/proxies",
ProxyProfit: s.ProxyServer + "/profits",
ProxyChangeProfit: s.ProxyServer + "/profit",
ProxyAdd: s.ProxyServer + "/add",
ProxyChangeWallet: s.ProxyServer + "/proxy",
ProxyOpenClub: s.ProxyServer + "/clan/open",
ProxyUserWallet: s.ProxyServer + "/user",
ProxyHistory: s.ProxyServer + "/logs",
ProxyUpdate: s.ProxyServer + "/update",
ProxyTotalUser: s.ProxyServer + "/stat/users",
ProxyTotalGame: s.ProxyServer + "/stat/games",
ProxyTotalRecharge: s.ProxyServer + "/stat/recharge",
ProxyTotalEarn: s.ProxyServer + "/stat/summary",
ProxyRobot: s.ProxyServer + "/robot",
ProxyDetail: s.ProxyServer + "/detail",
ProxyChange: s.ProxyServer + "/change",
ProxyList: s.ProxyServer + "/report/list",
ProxyListUpdate: s.ProxyServer + "/report/update",
ProxyPunishDetail: s.ProxyServer + "/report/detail",
ProxyPunish: s.ProxyServer + "/report/punish",
ProxyAdminChange: s.ProxyServer + "/report/process",
ProxyMail: s.ProxyServer + "/mail",
ProxyBan: s.ProxyServer + "/ban",
ProxyBanProxy: s.ProxyServer + "/ban/proxy",
ProxyHouseSet: s.ProxyServer + "/blackHouse/set",
ProxyHouseDel: s.ProxyServer + "/blackHouse/del",
ProxyApi: s.ProxyServer + "/api",
ProxyBlackList: s.ProxyServer + "/blackList",
ProxyResetPwd: s.ProxyServer + "/resetPwd",
ProxyPhoneChanhe: s.ProxyServer + "/phone/change",
ProxyChangeShuffle: s.ProxyServer + "/proxy/shuffle",
ProxyActive: "global/proxy/profitRank",
ProxyActiveRank: "global/proxy/profitRank/reward/lastWeek",
ProxyAdminReward: s.ProxyServer + "/reward",
OTCInfo: "otc/info",
OTCMarket: "otc/market",
OTCMarkets: "otc/markets",
OTCCancelMarket: "otc/cancelMarket",
OTCProcessTrade: "otc/finishTrade",
OTCCreateTrade: "otc/createTrade",
OTCCancelTrade: "otc/cancelTrade",
OTCConfirmTrade: "otc/processTrade",
OTCReportTrade: "otc/reportTrade",
OTCPleaseCancel: "otc/releaseTrade",
OTCPleaseProcess: "otc/confirmTrade",
OTCPayInfo: "otc/payInfo",
OTCQrCode: "otc/uploadQRCode",
OTCReceipt: "otc/uploadReceipt",
OTCTrades: "otc/trades",
OTCTrade: "otc/trade",
OTCUpdate: "otc/update",
OTCSecurity: "otc/security",
ProxyUserHistory: s.ProxyServer + "/user/gameLogs",
ProxySearchUser: s.ProxyServer + "/proxy/listUser",
ProxySearchProxy: s.ProxyServer + "/proxy/listProxy",
ProxyWalletHistory: s.ProxyServer + "/wallet/history",
ActiveFlowRank: "game/flow/rank",
SearchUserInfo: "game/getUser",
ChangeUserID: "game/swapWechatId",
OTCServiceTrade: "otc/serviceTrade",
OTCAdminTradeList: s.ProxyServer + "/trade/list",
OTCAdminTradeDetail: s.ProxyServer + "/trade/detail",
OTCAdminTradeJudge: s.ProxyServer + "/trade/judge",
AdminBanMarket: s.ProxyServer + "/ban/market",
AdminBanBuy: s.ProxyServer + "/ban/buy",
MatchOperate: "game/match/operate",
AdminSetCredit: s.ProxyServer + "/setCredit",
AdminGetCredit: s.ProxyServer + "/getCredit",
LogsClient: "game/logs/client",
UserHistoryLogs: "game/wallet/logs",
AdminHistoryLogs: s.ProxyServer + "/user/wallet",
POTCCreateTrade: "proxyOtc/createTrade",
POTCTrade: "proxyOtc/trade",
POTCInfo: "proxyOtc/info",
OTCProxyCode: "global/sms/update/proxyotc",
OTCProxyFinishtrade: "global/sms/proxy/finishtrade",
OTCProxyMarket: "global/sms/proxy/market",
POTCUpdate: "proxyOtc/update",
POTCMarket: "proxyOtc/market",
POTCTrades: "proxyOtc/trades",
POTCReportTrade: "proxyOtc/reportTrade",
POTCPleaseCancel: "proxyOtc/releaseTrade",
POTCPleaseProcess: "proxyOtc/confirmTrade",
POTCCancelMarket: "proxyOtc/cancelMarket",
POTCProcessTrade: "proxyOtc/finishTrade",
POTCCancelTrade: "proxyOtc/cancelTrade",
POTCConfirmTrade: "proxyOtc/processTrade",
POTCServiceTrade: "proxyOtc/serviceTrade",
SearchFinanceRecord: "game/fund/list",
BuyFinance: "game/fund/buy",
SellFinance: "game/fund/sell",
BettingInfo: "game/lottery/info"
}).BettingInfo = "game/lottery/info", a.BettingBuy = "game/lottery/buy", a.BettingList = "game/lottery/list", 
a.Bettinghistory = "game/lottery/history", a.BetConfig = "game/lottery/config", 
a.BetSubDetail = "game/lottery/subDetail", a.ProxyActivity = s.ProxyServer + "/activity", 
a.ProxyActivityReward = s.ProxyServer + "/activity/reward", a.ProxyZPRank = s.ProxyServer + "/rank", 
a.ProxyCreditUpdate = s.ProxyServer + "/credit/update", a.ProxyCredit = s.ProxyServer + "/credit", 
a.ProxyProfitDetail = s.ProxyServer + "/profit/detail", a.UserFreezeList = "game/freeze/logs", 
a.Questionnaire = "game/questionnaire", a.ProxyInviteUser = s.ProxyServer + "/inviteUser", 
a.ResponseInvite = "game/responseInvite", a.ExitClub = "game/exitClub", a.InviteRecord = s.ProxyServer + "/inviteRecord", 
a.UserInfo = "game/userInfo", a.UserBaseInfo = "game/baseInfo", a.UserPerformLog = "game/performLog", 
a.UserScoreLog = "game/scoreLog", a.ClubList = "game/clubs", a.ClubInfo = "game/clubInfo", 
a.CreateClub = "game/createClub", a.CreateLeague = "game/createLeague", a.Invite = "game/invite", 
a.UserList = "game/subUsers", a.UpdateScore = "game/updateScore", a.ProcessInvite = "game/processInvite", 
a.UpdateClubNotice = "game/updateClub", a.UpdateClubBank = "game/updateBank", a.ProxiesList = "game/proxies", 
a.AddProxy = "game/addProxy", a.UpdateLevel = "game/updateLevel", a.ClubLogs = "game/logs", 
a.SendCode = "global/sms/login", a.DrawReward = "game/drawReward", a.RewardDetail = "game/rewardDetail", 
a.UpdateStatus = "game/updateStatus", a.AllRooms = "game/rooms", a.ScoreSummary = "game/scoreSummary", 
a.CardSummary = "game/cardSummary", a.Promote = "game/promote", a.GroupInfo = "game/groupInfo", 
a.BankLog = "game/bankLog", a.RewardLog = "game/rewardLog", a.ShuffleLog = "game/shuffleLog", 
a.RewardSummary = "game/rewardSummary", a.ChangeProxyParent = "club/updateProxyParent", 
a.ChangeProxy = "game/changeProxy", a.AdminWallet = "game/admin/recharge", a.QuitClub = "game/quitClub", 
a.DestroyTable = "game/destroyTable", a.AdminClubList = "game/admin/clubs", a.AdminClubInfo = "game/admin/clubInfo", 
a.AdminUserList = "game/admin/users", a.AdminUserInfo = "game/admin/userInfo", a.CreateRoom = "game/createRoom", 
a.DeleteRoom = "game/deleteRoom", a.DailyRank = "game/dailyRank", a.UpdateLimit = "game/updateLimit", 
a.LiftLimit = "game/liftLimit", a.Robot = "game/robot", a.ReportLogs = "game/reportLogs", 
a.ReportDetail = "game/reportDetail", a.HandleReport = "game/handleReport", a.FinishReport = "game/finishReport", 
a.ReportUser = "game/report", a.CancelProxy = "game/cancelProxy", a.ReportHandleLogs = "game/reportHandleLogs", 
a.SetMalicious = "game/setMalicious", a.UserScore = "club/gameResults", a.ClubActive = "game/task", 
a.GetTaskReward = "game/getTaskReward", a);
s.ErrorCode = {};
s.GameInfo = {};
s.TableType = {
CUSTOM: "普通桌",
MATCH: "匹配桌",
PRIVATE: "私密桌"
};
s.GameStatus = {
WAIT: "WAIT",
PREPARE: "PREPARE",
CUTE: "CUTE",
START: "START",
PLAY: "PLAY",
QUEST: "QUEST",
FINISH: "FINISH",
SUMMARY: "SUMMARY",
CHAPTER: "CHAPTER",
DESTORY: "DESTORY",
BAO: "BAO",
PIAO: "PIAO",
CALL: "CALL"
};
s.GameAction = {
GUO: "GUO",
PONG: "PONG",
CHOW: "CHOW",
KONG: "KONG",
ZHI: "ZHI",
BU: "BU",
SHOW: "SHOW",
FLOWER: "FLOWER",
FLOWER_MULTI: "FLOWER_MULTI",
WIN: "WIN",
DRAW: "DRAW",
DRAW_MULTI: "DRAW_MULTI",
PLAY: "PLAY",
CALL: "CALL",
PASS: "PASS",
DONE: "DONE",
CREDIT: "CREDIT",
PLUS: "PLUS",
ALERT: "ALERT"
};
s.MatchStatus = {
MATCHING: "MATCHING",
SUCCESS: "SUCCESS"
};
s.pop = {
CashPop: "Main/Prefab/CashPop",
LoginPop: "Main/Prefab/LoginPop",
SettingPop: "Main/Prefab/SettingPop",
ActivePop: "Main/Prefab/ActivePop",
ProblemPop: "Main/Prefab/ProblemPop",
RulePop: "Main/Prefab/RulePop",
ServicePop: "Main/Prefab/ServicePop",
InfoPop: "Main/Prefab/InfoPop",
SharePop: "prefab/SharePop",
ClubPop: "Main/Prefab/ClubPop",
ChangeDataPop: "Main/Prefab/ChangeDataPop",
AutoTipsPop: "Main/Prefab/AutoTipsPop",
MessagePop: "Main/Prefab/MessagePop",
TablePop: "Main/Prefab/TablePop",
DistanceZDPop: "Main/Prefab/DistanceZDPop",
MarketPop: "Main/Prefab/MarketPop",
ProxyManagePop: "Main/Prefab/ProxyManagePop",
ProxyLoginPop: "Main/Prefab/ProxyLoginPop",
ProxyDataPop: "Main/Prefab/ProxyDataPop",
AdminSettingPop: "Main/Prefab/AdminSettingPop",
MatchPop: "Main/Prefab/MatchPop",
ReportPop: "Main/Prefab/ReportPop",
MarketRulePop: "Main/Prefab/MarketRulePop",
ConfirmReceiptPop: "Main/Prefab/ConfirmReceiptPop",
UpdateTradePwd: "Main/Prefab/UpdateTradePwd",
CheckTradePwd: "Main/Prefab/CheckTradePwd",
CashActivePop: "Main/Prefab/CashActivePop",
ActiveSharePop: "Main/Prefab/ActiveSharePop",
FlowActivePop: "Main/Prefab/FlowActivePop",
GiveScorePop: "Main/Prefab/GiveScorePop",
LuckyActivePop: "Main/Prefab/LuckyActivePop",
ProxyActivityPop: "Main/Prefab/ProxyActivityPop",
AdminHistoryPop: "Main/Prefab/AdminHistoryPop",
ProxyRankPop: "Main/Prefab/ProxyRankPop",
NoticePop: "Main/Prefab/Notice",
TipsCard: "GameBase/TipsCard",
PlayerInfo: "GameBase/PlayerInfo",
GameSetting: "GameBase/preSet",
TestPop: "Main/Prefab/TestPop",
CommonActivePop: "prefab/CommonActivePop",
SettingHistoryPop: "prefab/HistoryPop",
ProxyMarketPop: "prefab/ProxyMarketPop",
HistoryPop: "Main/Prefab/winHistory",
ActiveCenterPop: "prefab/ActiveCenterPop",
BettingPop: "prefab/BettingPop",
ProxyActivePop: "prefab/ProxyActivePop",
BettingList: "prefab/BettingList",
ProxyZPRankPop: "prefab/ProxyZPRankPop",
BetTipsPop: "prefab/BetTipsPop",
ProxyProfitDetail: "prefab/ProxyProfitDetail",
RewardGameTable: "prefab/RewardGameTable",
QuestionPop: "prefab/QuestionPop",
AdminPunishPage: "prefab/AdminPunishPage",
FreezeListPop: "prefab/FreezeListPop",
DistanceMJPop: "prefab/DistanceMJPop",
MJRulePop: "prefab/MJRulePop",
VIPAdPop: "prefab/VIPAdPop",
ProxyInviteUser: "prefab/ProxyInviteUser",
InviteListPop: "prefab/InviteListPop",
MJGameSummary: "prefab/game/MJGameSummary",
CreateClubPop: "prefab/CreateClubPop",
ClubListPop: "prefab/ClubListPop",
ClubUserListPop: "prefab/ClubUserListPop",
ChangeIDPop: "prefab/ChangeIDPop",
ChildScoreListPop: "prefab/ChildScoreListPop",
ClubNoticePop: "prefab/ClubNoticePop",
ClubBankPop: "prefab/ClubBankPop",
Number: "prefab/Number",
ChildUserListPop: "prefab/ChildUserListPop",
ClubProxyListPop: "prefab/ClubProxyListPop",
UserInfoPop: "prefab/UserInfoPop",
ClubHistoryListPop: "prefab/ClubHistoryListPop",
ClubHistoryDetailPop: "prefab/ClubHistoryDetailPop",
ClubScoreListPop: "prefab/ClubScoreListPop",
ClubWalletListPop: "prefab/ClubWalletListPop",
ClubActivePop: "prefab/ClubActivePop",
ClubRewardPop: "prefab/ClubRewardPop",
ChangeProxyPop: "prefab/ChangeProxyPop",
ChangeUserPop: "prefab/ChangeUserPop",
AdminManagerPop: "prefab/AdminManagerPop",
AdminDetailPop: "prefab/AdminDetailPop",
CreateRoomPop: "prefab/CreateRoomPop",
ProxyLevelPop: "prefab/ProxyLevelPop",
ClubRankPop: "prefab/ClubRankPop",
TableRoomPop: "prefab/TableRoomPop",
RobotPop: "prefab/RobotPop",
BlackListPop: "prefab/BlackListPop",
AdminPunishPop: "prefab/AdminPunishPop"
};
s.StorageKey = {
LinkJson: "LinkJson",
ServerUrlObj: "ServerUrlObj",
TokenPKey: "TokenPKey",
HallBg: "HallBg",
UserAccount: "UserAccount",
UserPwd: "UserPwd",
ProxyAccount: "ProxyAccount",
ProxyPwd: "ProxyPwd",
UserToken: "UserToken",
UserLoginTime: "UserLoginTime",
LastRoomData: "LastRoomData",
LastRoomId: "LastRoomId",
LastRoomType: "LastRoomType",
LastRoomBase: "LastRoomBase",
LastGameType: "LastGameType",
LastLeague: "LastLeague",
LastTipsBindTime: "LastTipsBindTime",
LastTipsActiveTime: "LastTipsActiveTime",
LastTipsBetTime: "LastTipsBetTime",
LastTipsSumBetTime: "LastTipsSumBetTime",
LastProxyZPTime: "LastProxyZPTime",
LastTipsLuckyTime: "LastTipsLuckyTime",
LastTipsPActiveTime: "LastTipsPActiveTime",
LastShowTipsActiveTime: "LastShowTipsActiveTime",
ShowAutoTips: "ShowAutoTips",
EmaliMsg: "EmaliMsg",
tableBgSf: "tableBgSf",
tableBgIndex: "tableBgIndex",
SoundVolume: "SoundVolume",
MusicVolume: "MusicVolume",
TableInitData: "TableInitData",
Location: "Location1",
WxLoginData: "WxLoginData",
AccessTokenTime: "AccessTokenTime",
RefreshTokenTime: "RefreshTokenTime",
ProxyToken: "ProxyToken",
ProxyData: "ProxyData",
TradeWaitting: "TradeWaitting4",
FirstOpenSlow: "FirstOpenSlow1",
FirstOpenFast: "FirstOpenFast",
FirstOpenMarket: "FirstOpenMarket",
ShowUpdateTIps: "ShowUpdateTIps",
ShowProxyActivity: "ShowProxyActivity",
ShowQYQTips: "ShowQYQTips",
CreateTrade: "CreateTrade",
ActiveDayTips: "ActiveDayTips",
BettingPopTips: "BettingPopTips",
SummaryBetTips: "SummaryBetTips",
ProxyZPTips: "ProxyZPTips",
ShowActiveDayTips: "ShowActiveDayTips",
ProxyNoticeVersion: "ProxyNoticeVersion",
ImgCache: "ImgCache4",
LogsClientFail: "LogsClientFail",
LastClubID: "LastClubID"
};
s.LogsEvents = {
SELECT_LINK: "SELECT_LINK",
SOCKET_LINK: "SOCKET_LINK",
PLAY_BEHAVIOR: "PLAY_BEHAVIOR",
AD_BEHAVIOR: "AD_BEHAVIOR",
BUG: "BUG"
};
s.LogsActions = {
SELECT_LINK_TIME: "SELECT_LINK_TIME",
SELECT_SPARE_LINK: "SELECT_SPARE_LINK",
SELECT_LINK_FAIL: "SELECT_LINK_FAIL",
SOCKET_LINK_SUCCESS: "SOCKET_LINK_SUCCESS",
SOCKET_LINK_ENTER: "SOCKET_LINK_ENTER",
SOCKET_LINK_RECONNECT: "SOCKET_LINK_RECONNECT",
SOCKET_LINK_FAIL: "SOCKET_LINK_FAIL",
SOCKET_LINK_ERROR: "SOCKET_LINK_ERROR",
ENTER_SCENE: "ENTER_SCENE",
START_ENTER_SCENE: "START_ENTER_SCENE",
WATCH_REPLAY: "WATCH_REPLAY",
CLICK_AD: "CLICK_AD",
AD_DURTIME: "AD_DURTIME"
};
s.ErrorType = {
Timeout: "Timeout",
Questerror: "Questerror"
};
s.NumberType = {
INT: "INT",
FLOAT: "FLOAT"
};
s.ConnectState = {
CLOSED: "CLOSED",
CONNECTING: "CONNECTING",
CONNECTED: "CONNECTED",
DISCONNECTED: "DISCONNECTED"
};
s.ChannelName = {
alipay: "支付宝",
wechat: "微信",
bank: "银行卡"
};
s.HallBgSprite = {
toggle1: null,
toggle2: null,
toggle3: null,
toggle4: null
};
s.ROLE_DESC = {
owner: "会长",
user: "成员",
proxy: "合伙人",
manager: "管理员"
};
s.tableBgSprite = [];
s.AvatartAtlas = null;
s.DefaultAvavtar = null;
s.PorketAtlas = null;
s.WiFiSprite = [];
s.ConfigUrl = "https://pku.qzhagy.com/";
s.NoticeUrl = "";
s.HeadUrl = "";
s.WebUrl = "";
s.VoiceUrl = "";
s.RecordUrl = "";
s.DownloadUrl = "";
s.RoomConfig = [];
s.ShareUrl = "";
s.FitScreen = 0;
s.DeviceID = "defaultDeviceId";
s.DeviceIDFA = "defaultDeviceId";
s.InviteCode = "888888";
s.InviteCodeCount = 0;
s.CurrentAvatar = 0;
s.IsLeague = -1;
s.CurrentGameType = "";
s.LastSocketTime = 0;
s.IsConnecting = !1;
s.ZDCurrentGroup = -1;
s.GameConnectData = null;
s.GameCurrentScore = 0;
s.LDZPSummaryData = null;
s.LDZPShowGameSummary = !1;
s.ShowTablePop = !0;
s.IsQuickStart = !1;
s.ProxyData = {};
s.ProxyProfitData = [];
s.ProxyClubProfitData = [];
s.ProxyIsLeague = !0;
s.CurrentReplayData = "";
s.ServerTimeDiff = 0;
s.isUpdateReceipt = !1;
s.isShowLottery = !0;
s.DefaultVersion = "4.0.0";
s.ApkName = "ldqp";
s.Encrtyptor = null;
s.PublicKey = "";
s.PrivateKey = "";
s.TaskRewardList = [];
s.TaskList = [];
s.TaskData = {};
s.LuckyUserData = {};
s.ActiveIconData = [];
s.ActiveContentData = [];
s.xhzdConfig = {};
s.QuestData = {};
s.AdData = {};
s.RewardConfig = [];
s.ProxyMarketConfig = [];
s.BtnIsMoving = !1;
s.SendCodeTime = 0;
s.TaskDesc = {
INVITE: "邀请$个新玩家",
TRADE: "交易所完成$笔交易",
TURN: "完成$局游戏",
PLAYERS: "与$个玩家完成对局",
FLOW: "当日流水$元",
CHILD_CONTRIBUTE: "邀请的新玩家领取$次活跃奖励"
};
s.TaskStartTime = "2021-06-20 22:15:00";
s.TaskEndTime = "2021-06-20 22:17:00";
s.IsDebug = !1;
s.isTest = !1;
s.BetRate = null;
s.BetConfig = null;
s.BetResult = null;
s.InviteList = null;
s.TableRoom = null;
s.TableAllRooms = null;
s.isNewMatch = !1;
s.originalLogFun = null;
s._enableLog = !0;
cc._RF.pop();
}, {} ],
GameEventNames: [ function(e, t) {
"use strict";
cc._RF.push(t, "b2debmZS3FGfLrPYJ7JRGIM", "GameEventNames");
cc.Class({
extends: cc.Component,
properties: {},
start: function() {}
});
cc._RF.pop();
}, {} ],
GameMenu: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "e96726tw2dNn5qWVVYzlN5l", "GameMenu");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c;
function l(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function u(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function d(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
h(e, t);
}
function h(e, t) {
return (h = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function f(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var p = cc._decorator, m = p.ccclass, g = p.property, v = (i = g(cc.Node), a = g(cc.Node), 
m(r = (o = function(e) {
d(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
l(t = e.call.apply(e, [ this ].concat(i)) || this, "btnClose", s, u(t));
l(t, "btnOpen", c, u(t));
t.isMoving = !1;
t.updateCount = -1;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.node.position = cc.v2(cc.winSize.width / 2 + this.node.width / 2, cc.winSize.height / 2 - this.node.height / 2);
this.btnClose.active = !1;
this.btnOpen.active = !0;
};
n.onHideMenu = function() {
var e = this;
if (!this.isMoving) {
this.isMoving = !0;
var t = cc.v2(cc.winSize.width / 2 - this.node.width / 2, cc.winSize.height / 2 - this.node.height / 2), n = cc.v2(cc.winSize.width / 2 + this.node.width / 2, cc.winSize.height / 2 - this.node.height / 2), i = cc.moveTo(.3, n), a = cc.place(t), r = cc.sequence(a, i, cc.callFunc(function() {
e.isMoving = !1;
e.btnClose.active = !1;
e.btnOpen.active = !0;
e.updateCount = -1;
}));
this.node.runAction(r);
}
};
n.onshowMenu = function() {
var e = this;
if (!this.isMoving) {
this.isMoving = !0;
var t = cc.v2(cc.winSize.width / 2 - this.node.width / 2, cc.winSize.height / 2 - this.node.height / 2), n = cc.v2(cc.winSize.width / 2 + this.node.width / 2, cc.winSize.height / 2 - this.node.height / 2), i = cc.moveTo(.3, t), a = cc.place(n), r = cc.sequence(a, i, cc.callFunc(function() {
e.isMoving = !1;
e.btnClose.active = !0;
e.btnOpen.active = !1;
e.updateCount = 0;
}));
this.node.runAction(r);
}
};
n.update = function() {
if (!(this.updateCount < 0)) {
this.updateCount++;
if (this.updateCount % 300 == 0) {
this.updateCount = 0;
this.onHideMenu();
}
}
};
return t;
}(cc.Component), s = f(o.prototype, "btnClose", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c = f(o.prototype, "btnOpen", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), o)) || r);
n.default = v;
t.exports = n.default;
cc._RF.pop();
}, {} ],
GameUtils: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "43f34rqTx9B4bfHx6FwjxDp", "GameUtils");
n.__esModule = !0;
n.default = void 0;
var i, a = e("../../GameBase/GameConfig"), r = (i = e("./network/Http")) && i.__esModule ? i : {
default: i
};
function o(e, t) {
var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
if (n) return (n = n.call(e)).next.bind(n);
if (Array.isArray(e) || (n = s(e)) || t && e && "number" == typeof e.length) {
n && (e = n);
var i = 0;
return function() {
return i >= e.length ? {
done: !0
} : {
done: !1,
value: e[i++]
};
};
}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function s(e, t) {
if (e) {
if ("string" == typeof e) return c(e, t);
var n = Object.prototype.toString.call(e).slice(8, -1);
"Object" === n && e.constructor && (n = e.constructor.name);
return "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? c(e, t) : void 0;
}
}
function c(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
return i;
}
var l = e("../../Main/Script/jsencrypt"), u = function() {
function e() {}
e.isNullOrEmpty = function(e) {
if ("undefined" == typeof e || null === e || "number" == typeof e && isNaN(e)) return !0;
if ("number" == typeof e || "boolean" == typeof e || "function" == typeof e || 1 === e.nodeType) return !1;
if (e.constructor === Array && e.length < 1) return !0;
if ("string" == typeof e) return "" === e.replace(/\s+/g, "");
if ("Object" === Object.prototype.toString.call(e).slice(8, -1)) {
var t = 0;
for (var n in e) e.hasOwnProperty(n) && t++;
if (t < 1) return !0;
}
return !1;
};
e.deepcopyArr = function(e) {
var t = [];
e.forEach(function(e, n) {
var i = JSON.stringify(e);
t[n] = JSON.parse(i);
});
return t;
};
e.sortByProps = function(e, t) {
for (var n = [], i = 2; i < arguments.length; i++) n[i - 2] = arguments[i];
var a = [], r = !0;
if (n.length < 1) for (var o in e) {
if (e[o] > t[o]) {
a.push(1);
break;
}
if (e[o] !== t[o]) {
a.push(-1);
break;
}
a.push(0);
} else for (var s = 0; s < n.length; s++) {
var c = n[s];
for (var l in c) {
r = "asc" === c[l];
if (e[l] > t[l]) {
a.push(r ? 1 : -1);
break;
}
if (e[l] !== t[l]) {
a.push(r ? -1 : 1);
break;
}
a.push(0);
}
}
for (var u = 0; u < a.length; u++) if (1 === a[u] || -1 === a[u]) return a[u];
return 0;
};
e.encryptData = function(e, t) {
var n = e.ts, i = [ "ts", "sign" ], a = [];
for (var r in e) a.push(r);
for (var s, c = "", l = o(a = a.sort()); !(s = l()).done; ) {
var u = s.value;
i.includes(u) || (c += u + "=" + JSON.stringify(e[u]) + "&");
}
var d = md5(c + "key=" + t);
d = d.toUpperCase();
var h = md5("" + d + n);
return h.toUpperCase();
};
e.encryptToken = function(t) {
var n = new l.JSEncrypt(), i = e.getValue(a.GameConfig.StorageKey.TokenPKey);
n.setPublicKey(i);
return n.encrypt(t);
};
e.saveValue = function(e, t) {
void 0 === t && (t = "");
var n = new Object();
switch (typeof t) {
case "object":
n.type = Array.isArray(t) ? "array" : typeof t;
n.value = t;
break;

default:
n.type = typeof t;
n.value = t;
}
var i = JSON.stringify(n);
console.log("saveValue", i);
cc.sys.localStorage.setItem(a.GameConfig.ApkName + e, i);
};
e.getValue = function(t, n) {
void 0 === n && (n = "");
var i = cc.sys.localStorage.getItem(a.GameConfig.ApkName + t);
return e.isNullOrEmpty(i) ? n : JSON.parse(i).value;
};
e.getTimeStamp = function(e) {
void 0 === e && (e = "");
return "" == e ? new Date().getTime() + a.GameConfig.ServerTimeDiff : new Date(e).getTime() + a.GameConfig.ServerTimeDiff || 0;
};
e.formatGold = function(e) {
void 0 === e && (e = 0);
return (parseFloat(e) / 100).toFixed(2) || 0;
};
e.timestampToTime = function(e) {
var t = new Date(e);
return t.getFullYear() + "-" + (t.getMonth() + 1 < 10 ? "0" + (t.getMonth() + 1) : t.getMonth() + 1) + "-" + (t.getDate() < 10 ? "0" + t.getDate() : t.getDate()) + " " + (t.getHours() < 10 ? "0" + t.getHours() : t.getHours()) + ":" + (t.getMinutes() < 10 ? "0" + t.getMinutes() : t.getMinutes()) + ":" + (t.getSeconds() < 10 ? "0" + t.getSeconds() : t.getSeconds());
};
e.getStringByLength = function(e, t) {
e && e.replace(/[\u4e00-\u9fa5]/g, "aa").replace(/[A-Z]/g, "aa").length > 2 * t && (e = e.substr(0, t) + "...");
return e;
};
e.timeToString = function(e) {
if (0 == e) return "";
var t, n = Math.floor(e / 86400), i = Math.floor(e % 86400 / 3600), a = Math.floor(e % 86400 % 3600 / 60), r = Math.floor(e % 86400 % 3600 % 60), o = i > 9 ? i : "0" + i, s = a > 9 ? a : "0" + a, c = r > 9 ? r : "0" + r;
n > 0 ? t = (n > 9 ? n : "0" + n) + "天" + o + "小时" + s + "分" : i > 0 ? t = o + "小时" + s + "分" + c + "秒" : a > 0 ? t = s + "分" + c + "秒" : r > 0 && (t = c + "秒");
return t;
};
e.getTimeStamp = function(e) {
void 0 === e && (e = "");
return "" == e ? new Date().getTime() + a.GameConfig.ServerTimeDiff : new Date(e).getTime() + a.GameConfig.ServerTimeDiff || 0;
};
e.SaveToLocal = function(e, t) {
var n = null, i = new XMLHttpRequest();
i.onreadystatechange = function() {
if (4 === i.readyState && 200 === i.status && i.response && cc.sys.isNative) try {
var e = jsb.fileUtils.getWritablePath();
n = e + "textureName.png";
var a = new Uint8Array(i.response);
jsb.fileUtils.writeDataToFile(a, n);
t && t(n);
} catch (e) {
t && t("error");
}
};
i.responseType = "arraybuffer";
i.open("GET", e, !0);
i.send();
};
e.pop = function(e, t) {
if (!this.isNullOrEmpty(e)) {
var n = e.replace(/[/]/g, "");
cc.find("Canvas").getChildByName(n) ? t && t(cc.find("Canvas").getChildByName(n)) : cc.loader.loadRes(e, function(e, i) {
if (!e) {
var a = cc.instantiate(i);
cc.find("Canvas").addChild(a, 0, n);
t && t(a);
}
});
}
};
e.loadImg = function(e) {
return new Promise(function(t, n) {
var i = e.split("://")[0], r = e.split("://")[1], o = e;
switch (i) {
case "remote":
o = a.GameConfig.ConfigUrl + r;
break;

case "https":
case "http":
o = e;
}
"file" != i ? cc.loader.load(o + "?file=a.png", function(e, i) {
e ? n(e) : t(new cc.SpriteFrame(i));
}) : t(a.GameConfig.AvatartAtlas.getSpriteFrame("mj_face" + r));
});
};
e.LogsClient = function(e, t) {
var n = this;
if (!cc.sys.isBrowser) {
console.log("打点----", e);
var i = this.getValue(a.GameConfig.StorageKey.LogsClientFail, []), o = i.length > 0 ? {
url: a.GameConfig.ServerEventName.LogsClient,
data: {
deviceID: a.GameConfig.DeviceID,
event: e,
data: t,
failCount: i.length,
failLogs: i
}
} : {
url: a.GameConfig.ServerEventName.LogsClient,
data: {
deviceID: a.GameConfig.DeviceID,
event: e,
data: t
}
};
r.default.post(o).then(function(e) {
n.saveValue(a.GameConfig.StorageKey.LogsClientFail, []);
console.log(e.action, "-打点成功-", JSON.stringify(o));
}).catch(function(r) {
var o = {
event: e,
data: t
};
i.push(o);
n.saveValue(a.GameConfig.StorageKey.LogsClientFail, i);
console.log(t.action, "-打点失败-", r.strack);
});
}
};
return e;
}();
n.default = u;
t.exports = n.default;
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../Main/Script/jsencrypt": 10,
"./network/Http": "Http"
} ],
GoEasyChat: [ function(e, t) {
"use strict";
cc._RF.push(t, "2e797oGbAVGHLpRA3+G9f7j", "GoEasyChat");
var n = e("../Script/DataBase"), i = e("../Script/Cache"), a = e("../Script/utils"), r = e("./GoEasy").GoEasy, o = e("../../GameBase/GameConfig").GameConfig, s = e("../../script/ui/hall/data/App").App;
cc.Class({
extends: cc.Component,
properties: {
msgInput: cc.EditBox,
sendBtn: cc.Node,
msgScrollView: cc.ScrollView,
msgContent: cc.Node,
msgItem: cc.Prefab,
systemItem: cc.Prefab
},
initData: function(e, t, n) {
var i = this;
this.sendId = e;
this.tradeData = t;
this.chatType = n;
r.privateHistory(e).then(function(e) {
e.content.forEach(function(e) {
i.addChatItem(e);
});
i.addEvents();
}).catch(function() {});
},
addEvents: function() {
s.EventManager.addEventListener(o.GameEventNames.GOEASY_UPDATE_PRIVATE, this.handleChat, this);
},
removeEvents: function() {
s.EventManager.removeEventListener(o.GameEventNames.GOEASY_UPDATE_PRIVATE, this.handleChat, this);
},
handleChat: function(e) {
this.addChatItem(e.data);
},
onClickSend: function() {
if (a.isNullOrEmpty(this.msgInput.string)) i.alertTip("消息不能为空"); else {
var e = {
title: "私聊",
content: this.msgInput.string,
type: "PRIVATE",
tradeID: this.tradeData.id,
timestamp: new Date().getTime()
}, t = {
payload: {
text: JSON.stringify(e)
},
receiverId: this.sendId,
senderId: n.player.id
};
this.addChatItem(t);
r.sendMessage(e, this.chatType, this.sendId, n.player);
this.msgInput.string = "";
}
},
addChatItem: function(e) {
var t = this;
if ((e.senderId == this.sendId || e.senderId == n.player.id) && JSON.parse(e.payload.text).tradeID == this.tradeData.id) {
r.markPrivateAsRead(this.sendId);
if ("PRIVATE" == JSON.parse(e.payload.text).type) {
var i = cc.instantiate(this.msgItem);
i.getComponent("ChatItem").initData(e);
this.msgContent.addChild(i);
} else {
var a = cc.instantiate(this.systemItem);
a.getChildByName("word").getComponent(cc.Label).string = "" + JSON.parse(e.payload.text).content;
this.msgContent.addChild(a);
}
setTimeout(function() {
t.msgScrollView.scrollToBottom();
}, 100);
}
},
onClickClose: function() {
var e = this;
i.playSfx();
this.node.stopAllActions();
var t = cc.moveTo(.3, cc.v2(this.node.parent.width / 2 + this.node.width / 2, 0)), n = cc.sequence(t, cc.callFunc(function() {
e.removeEvents();
if (e.node) {
e.node.removeFromParent();
e.node.destroy();
}
}));
this.node.runAction(n);
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/utils": "utils",
"./GoEasy": "GoEasy"
} ],
GoEasyConfig: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "5eaafu9tmtNK4HSprkpRi05", "GoEasyConfig");
n.__esModule = !0;
n.GoEasyConfig = void 0;
var i = function() {};
n.GoEasyConfig = i;
i.ChatType = {
PRIVATE: "private",
GROUP: "group"
};
i.ContentType = {
TEXT: "text",
IMAGE: "img"
};
i.MessageType = {
EMAIL: "EMAIL",
RECHARGE: "RECHARGE",
TRADE: "TRADE",
PRIVATE: "PRIVATE",
SERVICE: "SERVICE"
};
i.Group = [ "EMAIL" ];
i.ServiceID = "service001";
i.ServerID = "1000";
cc._RF.pop();
}, {} ],
GoEasy: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "754e5fspvVDwqtGCZw3+3np", "GoEasy");
n.__esModule = !0;
n.GoEasy = void 0;
var i = e("../../GameBase/GameConfig.js"), a = e("../../script/ui/hall/data/App.js"), r = c(e("../Script/Cache.js")), o = c(e("../Script/utils.js")), s = e("./GoEasyConfig.js");
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
function l(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function u(e, t, n) {
t && l(e.prototype, t);
n && l(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var d = e("./goeasy-im-1.5.0.js"), h = {
host: "hangzhou.goeasy.io",
appkey: "BC-4f1c9643b2024be784f7a32891755ed3"
}, f = {
CONNECTING: "CONNECTING",
CONNECTED: "CONNECTED",
CONNECTING_ERROR: "CONNECTING_ERROR",
DISCONNECTED: "DISCONNECTED",
PRIVATE_MESSAGE: "PRIVATE_MESSAGE",
PUBLIC_MESSAGE: "PUBLIC_MESSAGE",
GROUP_MESSAGE: "GROUP_MESSAGE",
PRIVATE_IS_READED: "PRIVATE_IS_READED",
GROUP_IS_READED: "GROUP_IS_READED"
}, p = function() {
function e() {}
e.getInstance = function() {
null == this._instance && (this._instance = new e());
return this._instance;
};
e.establish = function(e, t) {
var n = this;
this.user = e;
this.callBack = t;
if (!this.im) {
this.im = d.getInstance(h);
var i = {
id: this.user.id + "",
otp: this._OTPKey,
data: JSON.stringify({
id: this.user.id,
name: this.user.name,
phone: this.user.phone || "未绑定手机"
}),
forceTLS: cc.sys.os != cc.sys.OS_ANDROID
};
this.listener();
this.im.connect(i).then(function() {}).catch(function(e) {
console.log("err", e);
n.callBack(f.CONNECTING_ERROR, e);
});
}
};
e.listener = function() {
var e = this;
this.im.on(d.EVENT.GROUP_MESSAGE_RECEIVED, function(t) {
console.log("onGroupMessageReceived: ", t);
var n = JSON.parse(t.payload.text);
n.type == s.GoEasyConfig.MessageType.RECHARGE && a.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.GOEASY_UPDATE_GOLD);
if (-1 == o.default.getValue(i.GameConfig.StorageKey.EmaliMsg, []).findIndex(function(e) {
return e.messageId == t.messageId;
})) {
n.messageId = t.messageId;
e._queueMailMsg.unshift(n);
e.playMailTips();
a.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.GOEASY_UPDATE_MAIL);
}
});
this.im.on(d.EVENT.CONNECTED, function() {
r.default.hideTipRightBottom("连接成功");
e.callBack(f.CONNECTED, {});
e._queueMailMsg = [];
e._serviceUnreadCount = 0;
s.GoEasyConfig.Group.forEach(function(t) {
e.unsubscribe(t);
});
e.subscribeGroup(s.GoEasyConfig.Group);
});
this.im.on(d.EVENT.CONNECTING, function(t) {
e.callBack(f.CONNECTING, {
count: t
});
r.default.alertTipRightBottom("推送服务连接中");
});
this.im.on(d.EVENT.DISCONNECTED, function() {
r.default.hideTipRightBottom("断开推送服务");
e.alertTips = !1;
e.callBack(f.DISCONNECTED, {});
});
this.im.on(d.EVENT.PRIVATE_MESSAGE_RECEIVED, function(t) {
console.log("onPrivateMessageReceived: ", t);
if (t.senderId != e.user.id + "") {
var n = JSON.parse(t.payload.text);
if (t.senderId != s.GoEasyConfig.ServiceID) if (t.senderId == s.GoEasyConfig.ServerID) {
n.type == s.GoEasyConfig.MessageType.RECHARGE && a.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.GOEASY_UPDATE_GOLD);
if (-1 == o.default.getValue(i.GameConfig.StorageKey.EmaliMsg, []).findIndex(function(e) {
return e.messageId == t.messageId;
})) {
n.messageId = t.messageId;
e._queueMailMsg.unshift(n);
e.playMailTips();
a.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.GOEASY_UPDATE_MAIL);
}
} else switch (n.type) {
case s.GoEasyConfig.MessageType.TRADE:
e.markPrivateAsRead(t.senderId);
a.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.GOEASY_UPDATE_TRADE, t);
break;

case s.GoEasyConfig.MessageType.PRIVATE:
a.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.GOEASY_UPDATE_TRADE, t);
a.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.GOEASY_UPDATE_PRIVATE, t);
break;

case s.GoEasyConfig.MessageType.SERVICE:
a.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.GOEASY_UPDATE_SERVICE, t);
} else {
e._serviceUnreadCount++;
a.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.GOEASY_UPDATE_SERVICE, t);
}
}
});
};
e.disconnect = function() {
var e = this;
"undefined" != typeof this.im && "connected" == this.im.getStatus() && this.im.disconnect().then(function() {
e.im = null;
console.log("Disconnection successful.");
}).catch(function(e) {
console.log("Failed to disconnect GoEasy, code:" + e.code + ",error:" + e.content);
});
};
e.sendMessage = function(e, t, n, i) {
if ("undefined" != typeof this.im && "connected" == this.im.getStatus()) {
var a = this.im.createTextMessage({
text: JSON.stringify(e),
to: {
type: t == s.GoEasyConfig.ChatType.GROUP ? d.SCENE.GROUP : d.SCENE.PRIVATE,
id: n,
data: JSON.stringify({
id: i.id,
name: i.name,
phone: i.phone || "未绑定手机"
})
}
});
this.im.sendMessage(a).then(function(e) {
console.log("Send " + t + " message successfully.", e);
console.log("Send textMessage message successfully.", a);
}).catch(function(e) {
console.log("Failed to send Message, code:" + e.code + " content:" + e.content);
});
}
};
e.subscribeGroup = function(e) {
"undefined" != typeof this.im && "connected" == this.im.getStatus() && this.im.subscribeGroup(e).then(function() {}).catch(function(e) {
console.log("Failed to subscribe group message, code:" + e.code + " content:" + e.content);
});
};
e.unsubscribe = function(e) {
"undefined" != typeof this.im && "connected" == this.im.getStatus() && this.im.unsubscribeGroup(e).then(function() {}).catch(function(e) {
console.log("Failed to unsubscribe group message, code:" + e.code + " content:" + e.content);
});
};
e.history = function() {};
e.markGroupAsRead = function(e) {
var t = this;
"undefined" != typeof this.im && "connected" == this.im.getStatus() && this.im.markGroupMessageAsRead(e).then(function(e) {
t._queueMailMsg = [];
console.log(" markGroupAsRead ", e);
}).catch(function(e) {
console.log("Failed to mark as read, code:" + e.code + " content:" + e.content);
});
};
e.markPrivateAsRead = function(e) {
"undefined" != typeof this.im && "connected" == this.im.getStatus() && this.im.markPrivateMessageAsRead("" + e).then(function() {}).catch(function(e) {
console.log("Failed to mark as read, code:" + e.code + " content:" + e.content);
});
};
e.markServiceAsRead = function() {
if ("undefined" != typeof this.im && "connected" == this.im.getStatus()) {
this._serviceUnreadCount = 0;
this.markPrivateAsRead(s.GoEasyConfig.ServiceID);
}
};
e.latestConversations = function() {
"undefined" != typeof this.im && "connected" == this.im.getStatus() && this.im.latestConversations().then(function(e) {
console.log("latestConversations-----------", e);
}).catch(function(e) {
console.log("Failed to get the latest conversations, code:" + e.code + " content:" + e.content);
});
};
e.privateHistory = function(e) {
var t = this;
return new Promise(function(n, i) {
if ("connected" != t.im.getStatus()) i("disconnect" + t.im.getStatus()); else {
var a = {
friendId: e,
lastTimestamp: Date.now(),
limit: 30
};
t.im.history(a).then(function(e) {
n(e);
}).catch(function(e) {
i(e);
});
}
});
};
e.playMailTips = function() {
var e = new Date().getTime();
if (!(e - this.lastPlayTime < 3e3)) {
this.lastPlayTime = e;
r.default.playSound("mailTips");
}
};
u(e, null, [ {
key: "eventEnum",
get: function() {
return f;
}
}, {
key: "serviceUnreadCount",
get: function() {
return this._serviceUnreadCount;
}
} ]);
return e;
}();
n.GoEasy = p;
p._instance = null;
p.user = null;
p.callBack = null;
p._queueMailMsg = [];
p._serviceUnreadCount = 0;
p._OTPKey = null;
p.lastPlayTime = 0;
cc._RF.pop();
}, {
"../../GameBase/GameConfig.js": "GameConfig",
"../../script/ui/hall/data/App.js": "App",
"../Script/Cache.js": "Cache",
"../Script/utils.js": "utils",
"./GoEasyConfig.js": "GoEasyConfig",
"./goeasy-im-1.5.0.js": "goeasy-im-1.5.0"
} ],
HallBase: [ function(e, t) {
"use strict";
cc._RF.push(t, "2600583P75BNpuLVRnbRl6G", "HallBase");
e("DataBase"), e("Connector");
cc.Class({
extends: cc.Component,
properties: {},
initHallBase: function() {
this.clan = null;
this.create = [ null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null ];
this.join = null;
this.history = null;
this.rule = null;
}
});
cc._RF.pop();
}, {
Connector: "Connector",
DataBase: "DataBase"
} ],
HistoryPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "1ac25cCuXRBbrJiBaPMHYSl", "HistoryPop");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("../../../Main/NetWork/Connector"), a = e("../../../Main/Script/Cache"), r = e("./data/App").App;
cc.Class({
extends: cc.Component,
properties: {
pageContainer: cc.Node,
tagContainer: cc.Node,
tagContent: cc.Node,
tagPrefab: cc.Prefab,
recordContent: cc.Node,
recordItem: cc.Prefab,
noData: cc.Node,
lblPage: cc.Label,
lblUserid: cc.EditBox,
typeArr: [],
page: 1,
totalPage: 0,
renderData: null
},
addEvents: function() {
r.EventManager.addEventListener(n.GameEventNames.SELECT_TAG_HISTORY, this.addTag, this);
r.EventManager.addEventListener(n.GameEventNames.CANCEL_TAG_HISTORY, this.removeTag, this);
},
removeEvents: function() {
r.EventManager.removeEventListener(n.GameEventNames.SELECT_TAG_HISTORY, this.addTag, this);
r.EventManager.removeEventListener(n.GameEventNames.CANCEL_TAG_HISTORY, this.removeTag, this);
},
start: function() {
this.typeArr = [];
this.renderData = {
page: [],
data: []
};
this.addEvents();
this.tagContent.removeAllChildren();
var e = n.GameInfo.logsConfig;
for (var t in e) {
var i = cc.instantiate(this.tagPrefab);
i.getComponent("HistoryTagItem").renderUI(t, e[t]);
this.tagContent.addChild(i);
}
},
downloadData: function(e) {
var t = this;
if ("" != this.lblUserid.string) {
this.recordContent.removeAllChildren();
this.noData.active = !1;
i.request(n.ServerEventName.AdminHistoryLogs, {
id: this.lblUserid.string,
type: this.typeArr,
days: 7,
page: e,
pageSize: 10
}, function(e) {
if (e.logs && e.logs.rows && e.logs.rows.length > 0) {
t.pageContainer.active = !0;
t.totalPage = Math.ceil(e.logs.count / 10);
t.page = e.logs.page;
t.lblPage.string = e.logs.page + "/" + Math.ceil(e.logs.count / 10);
e.logs.rows.forEach(function(e) {
var n = cc.instantiate(t.recordItem);
n.getComponent("HistoryRecordItem").renderUI(e);
t.recordContent.addChild(n);
});
} else {
t.noData.active = !0;
t.pageContainer.active = !1;
}
});
} else a.alertTip("请输入玩家id");
},
showTagContainer: function() {
a.playSfx();
this.tagContainer.active = !0;
},
onClickSearch: function() {
a.playSfx();
this.tagContainer.active = !1;
this.downloadData(1);
},
addTag: function(e) {
var t = this;
e.data.forEach(function(e) {
-1 == t.typeArr.findIndex(function(t) {
return t == e;
}) && t.typeArr.push(e);
});
},
removeTag: function(e) {
var t = this;
e.data.forEach(function(e) {
var n = t.typeArr.findIndex(function(t) {
return t == e;
});
-1 != n && t.typeArr.splice(n, 1);
});
},
addPage: function() {
a.playSfx();
if (this.page >= this.totalPage) a.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.downloadData(e);
}
},
reducePage: function() {
a.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.downloadData(e);
} else a.alertTip("已经是第一页");
},
onClickClose: function() {
a.playSfx();
this.removeEvents();
this.node.destroy();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"./data/App": "App"
} ],
HistoryRecordItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "9f929Uq06dMrIXeCdUCg2ab", "HistoryRecordItem");
cc.Class({
extends: cc.Component,
properties: {
lblType: cc.Label,
lblTime: cc.Label,
lblScore: cc.Label,
lblRemarks: cc.Label
},
renderUI: function(e) {
this.lblType.string = e.name;
this.lblScore.string = e.userScore >= 0 ? "+" + (parseInt(e.userScore) / 100).toFixed(2) : (parseInt(e.userScore) / 100).toFixed(2);
this.lblRemarks.string = e.remarks;
this.lblTime.string = new Date(e.createdAt).format("yyyy-MM-dd hh:mm:ss");
}
});
cc._RF.pop();
}, {} ],
HistoryTagItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "8aebehtb6dAk5HDGzcTQhbu", "HistoryTagItem");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("./data/App").App;
cc.Class({
extends: cc.Component,
properties: {
desc: cc.Label,
tagItem: cc.Prefab,
tagContent: cc.Node
},
renderUI: function(e, t) {
var a = this;
this.desc.string = e + ":";
this.tagContent.removeAllChildren();
var r = function(e) {
var r = cc.instantiate(a.tagItem);
r.getChildByName("desc").getComponent(cc.Label).string = "" + e;
r.on(cc.Node.EventType.TOUCH_END, function() {
var a = r.getComponent(cc.Toggle);
setTimeout(function() {
a.isChecked ? i.EventManager.dispatchEventWith(n.GameEventNames.SELECT_TAG_HISTORY, t[e]) : i.EventManager.dispatchEventWith(n.GameEventNames.CANCEL_TAG_HISTORY, t[e]);
}, 300);
}, a);
a.tagContent.addChild(r);
};
for (var o in t) r(o);
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"./data/App": "App"
} ],
Http: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "46df8fGFKdFtY6KYqCLHl+5", "Http");
n.__esModule = !0;
n.default = void 0;
var i, a = e("../../../GameBase/GameConfig"), r = (i = e("../GameUtils")) && i.__esModule ? i : {
default: i
}, o = function() {
function e() {}
e.post = function(e) {
var t = this;
return new Promise(function(n, i) {
var o = e.url, s = e.data, c = e.headers, l = void 0 === c ? {} : c, u = e.timeout, d = void 0 === u ? 1e4 : u, h = e.sign, f = void 0 === h || h, p = e.token, m = void 0 === p ? "" : p;
if (null != o) if (null != s) {
var g = cc.loader.getXMLHttpRequest();
g.open("POST", t.API_URL + o, !0);
g.setRequestHeader("cache-control", "no-cache");
g.setRequestHeader("contentType", "text/html;charset=uft-8");
g.setRequestHeader("Content-Type", "application/json");
for (var v in l) g.setRequestHeader(v, l[v]);
console.log("url: ", o);
console.log("data: ", s);
s.version = cc.gameVersion || a.GameConfig.DefaultVersion;
s.ts = r.default.getTimeStamp();
f && (s.sign = r.default.encryptData(s, m));
g.timeout = d;
g.onreadystatechange = function() {
if (4 == g.readyState) {
if (g.status < 200 || g.status > 207) {
i(new Error("request fail " + g.status));
return;
}
var e = g.responseText, t = JSON.parse(e);
console.log(o + ": ", t);
n(t);
}
};
g.onerror = function(e) {
i(e);
};
g.ontimeout = function() {
i(new Error("timeout"));
};
g.send(JSON.stringify(s));
} else i(new Error("empty data")); else i(new Error("empty url"));
});
};
return e;
}();
n.default = o;
o.API_URL = a.GameConfig.TestServerUrl;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../GameUtils": "GameUtils"
} ],
InviteListItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "64d20dYzStBQK4T+D/gZmoC", "InviteListItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f = e("../../../GameBase/GameConfig"), p = v(e("../../../Main/NetWork/Connector")), m = v(e("../../../Main/Script/Cache")), g = e("./data/App");
function v(e) {
return e && e.__esModule ? e : {
default: e
};
}
function C(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function b(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function y(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
S(e, t);
}
function S(e, t) {
return (S = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function _(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var T = cc._decorator, E = T.ccclass, A = T.property, I = (i = A(cc.Label), a = A(cc.Label), 
r = A(cc.Node), o = A(cc.Node), E(s = (c = function(e) {
y(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
C(t = e.call.apply(e, [ this ].concat(i)) || this, "lblDesc", l, b(t));
C(t, "lblInfo", u, b(t));
C(t, "btnConfirm", d, b(t));
C(t, "btnCancel", h, b(t));
t.itemData = null;
t.itemIndex = 0;
return t;
}
var n = t.prototype;
n.onLoad = function() {};
n.renderUI = function(e, t) {
this.itemData = e;
this.itemIndex = t;
if ("wait" == this.itemData.status) {
this.btnConfirm.active = !0;
this.btnCancel.active = !0;
}
this.lblInfo.string = "合伙人ID: " + this.itemData.inviter.id + " 昵称: " + this.itemData.inviter.name;
this.lblDesc.string = "邀请您加入公会: " + this.itemData.club.name;
};
n.onResponse = function(e, t) {
var n = this;
m.default.playSfx();
p.default.request(f.GameConfig.ServerEventName.ProcessInvite, {
clubID: this.itemData.club.id,
userID: this.itemData.inviter.id,
status: t
}, function() {
g.App.EventManager.dispatchEventWith(f.GameConfig.GameEventNames.UPDATE_INVITE_LIST, {
status: t,
index: n.itemIndex
});
});
};
return t;
}(cc.Component), l = _(c.prototype, "lblDesc", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = _(c.prototype, "lblInfo", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = _(c.prototype, "btnConfirm", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = _(c.prototype, "btnCancel", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c)) || s);
n.default = I;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"./data/App": "App"
} ],
InviteListPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "c2104vPsaJFW4cGGF/V6Pz3", "InviteListPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u = e("../../../GameBase/GameConfig"), d = (i = e("../../../Main/Script/Cache")) && i.__esModule ? i : {
default: i
}, h = e("./data/App");
function f(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function p(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function m(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
g(e, t);
}
function g(e, t) {
return (g = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function v(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var C = cc._decorator, b = C.ccclass, y = C.property, S = (a = y(cc.Node), r = y(cc.Prefab), 
b(o = (s = function(e) {
m(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
f(t = e.call.apply(e, [ this ].concat(i)) || this, "inviteContent", c, p(t));
f(t, "inviteItem", l, p(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.renderUI();
};
n.addEvents = function() {
h.App.EventManager.addEventListener(u.GameConfig.GameEventNames.UPDATE_INVITE_LIST, this.handleList, this);
};
n.removeEvents = function() {
h.App.EventManager.removeEventListener(u.GameConfig.GameEventNames.UPDATE_INVITE_LIST, this.handleList, this);
};
n.renderUI = function() {
var e = this;
this.inviteContent.removeAllChildren();
u.GameConfig.InviteList.forEach(function(t, n) {
var i = cc.instantiate(e.inviteItem);
i.getComponent("InviteListItem").renderUI(t, n);
e.inviteContent.addChild(i);
});
};
n.handleList = function(e) {
console.log("--回答-", e);
if (1 != u.GameConfig.InviteList.length) if ("confirm" == e.status) this.onClickClose(); else {
u.GameConfig.InviteList.splice(e.index, 1);
this.renderUI();
} else this.onClickClose();
};
n.onClickClose = function() {
d.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), c = v(s.prototype, "inviteContent", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = v(s.prototype, "inviteItem", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = S;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"./data/App": "App"
} ],
LayerHandsCards07: [ function(e, t) {
"use strict";
cc._RF.push(t, "1e1e6sPIKRIMqgiRPQJr8EY", "LayerHandsCards07");
var n = e("Logic07"), i = e("TableInfo"), a = e("audio-ctrl"), r = e("../../../Main/Script/Cache"), o = e("../../../Main/Script/utils"), s = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
preCard: cc.Prefab,
nodeCards: [],
nodeLbl: [],
btnPlayCard: cc.Node
},
onLoad: function() {
s.isTest && this.touchEvent();
},
refreshHandCards: function(e, t) {
var n = this;
this.node.destroyAllChildren();
this.nodeCards = [];
this.nodeLbl = [];
Math.ceil(e.length / 2);
e.forEach(function(i, a) {
var r = cc.instantiate(n.preCard);
r.getComponent("ModuleCards07").init(i);
r.width = 1.3 * r.width;
r.height = 1.3 * r.height;
r.parent = n.node;
r.name = i + "";
r._prior = !1;
r._before = !1;
r._value = i;
r.active = t;
r.isZhankai = !1;
r.setPosition(-e.length / 2 * 77 - 30 + 77 * (a + 1), -n.node.height / 2 + r.height / 2);
r.pos0 = cc.v2(r.x, r.y);
r.pos1 = cc.v2(r.x, r.y + 15);
r.zIndex = a;
n.nodeCards.push(r);
});
},
removeHandsCard: function(e) {
e.forEach(function() {});
},
touchEvent: function() {
var e = this;
this.node.on("touchstart", function(t) {
e.onTouchBegan(t, "touchstart");
});
this.node.on("touchmove", function(t) {
e.onTouchBegan(t, "touchmove");
});
this.node.on("touchend", function() {
e.nodeCards.forEach(function(e) {
e.getChildByName("bgCardMask").active = !1;
});
e.checkCurrent();
});
this.node.on("touchcancel", function() {
e.checkCurrent();
});
},
onTouchBegan: function(e, t) {
i.isWai = !0;
var n = e.target.convertToNodeSpaceAR(e.getLocation());
if (0 != this.nodeCards.length) for (var a = 0; a < this.nodeCards.length; a++) {
var r = this.nodeCards[a], o = this.nodeCards[a].getBoundingBox();
a != this.nodeCards.length - 1 && (o.width = this.nodeCards[a + 1].x - this.nodeCards[a].x);
if (o.contains(n)) {
i.isWai = !1;
this.checkStatus(r, t);
}
}
},
checkStatus: function(e, t) {
var n = e.getChildByName("bgCardMask"), i = cc.url.raw("resources/Audio/Common/cardEffect.mp3");
if ("touchmove" != t || e._prior != this.firstCheck) {
if ("touchstart" == t) {
this.firstCheck = !e._prior;
n.active = !0;
}
e._prior = !e._prior;
e.position = e._prior ? e.pos1 : e.pos0;
a.getInstance().playSFX(i);
} else n.active = !0;
},
checkCurrent: function() {
i.select = null;
var e = [], t = [];
this.nodeCards.forEach(function(n) {
if (n._prior) {
e.push(n._value);
t.push(n);
}
});
var a = this.btnPlayCard.getComponent(cc.Button), s = n.checkCard(e, this.nodeCards.length, i.config, i.current), c = null;
o.isNullOrEmpty(s.cardList) || (c = s.cardList);
o.isNullOrEmpty(s.otherCard) || t.forEach(function(e) {
if (-1 != s.otherCard.indexOf(e._value)) {
e.position = e.pos0;
e._prior = !1;
}
});
if (null != c) {
a.interactable = n.compare(i.current, c);
var l, u = this.nodeCards.findIndex(function(e) {
return 103 == e._value;
});
if (i.currentPlayer == i.idx && this.nodeCards.length == (i.config.ext ? 16 : 15) && u > 0 && i.config.black && 1 == i.turn && c.cards.findIndex(function(e) {
return 103 == e;
}) < 0) {
a.interactable = !1;
r.alertTip("必须带黑桃三");
}
i.select = c;
l = 2 == i.options.person ? (i.currentPlayer + 1) % 2 : (i.currentPlayer + 1) % 3;
if (i.currentPlayer == i.idx && 1 == a.interactable && "DAN" == c.type && 1 == i.baodan[l]) {
var d = [], h = [], f = 0;
this.nodeCards.forEach(function(e) {
return d.push(e._value);
});
var p = [ [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [] ];
d.forEach(function(e) {
p[e % 100].push(e);
});
p.forEach(function(e) {
e.length > 0 && h.push(e[0] % 100);
});
h.forEach(function(e) {
f = Math.max(e, f);
});
if (c.card != f) {
a.interactable = !1;
r.alertTip("下家已报单,出单牌必须出手中最大的");
}
}
} else a.interactable = !1;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/utils": "utils",
Logic07: "Logic07",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
LayoutShowCards07: [ function(e, t) {
"use strict";
cc._RF.push(t, "5eeecI9g4FMZZlnvdefotEe", "LayoutShowCards07");
var n = e("Logic07");
e("../../../Main/Script/TableInfo");
cc.Class({
extends: cc.Component,
properties: {
preCards: cc.Prefab,
nodeFirst: cc.Node,
nodeDan: cc.Node
},
action: function(e) {
e && (e.opacity = 0);
e.scale = 1.4;
e.runAction(cc.spawn(cc.scaleTo(.02, 1), cc.fadeIn(.02)));
},
init: function(e) {
var t = this, i = n.sortPlayedCard(e), a = e.card, r = (e.count, e.cards.length, 
e.count), o = [], s = [];
if ("SAN" == e.type || "FEIJI" == e.type) {
for (var c = function(t) {
e.cards[t] % 100 >= a && e.cards[t] % 100 < a + r && o.filter(function(n) {
return n % 100 == e.cards[t] % 100;
}).length < 3 ? o.push(e.cards[t]) : s.push(e.cards[t]);
}, l = 0; l < e.cards.length; l++) c(l);
o.sort(n.sortCard);
s.sort(n.sortCard);
for (var u = 0; u < o.length; u++) {
var d = cc.instantiate(this.preCards);
d.parent = this.nodeFirst;
this.action(d, u);
d.getComponent("ModuleCards07").init(o[u]);
}
for (var h = 0; h < s.length; h++) {
var f = cc.instantiate(this.preCards);
this.nodeDan.active = !0;
f.parent = this.nodeDan;
this.action(f, h);
f.getComponent("ModuleCards07").init(s[h]);
}
} else if ("DUI" == e.type || "DAN" == e.type) for (var p = 0; p < i.length; p++) {
var m = cc.instantiate(this.preCards);
m.parent = this.nodeFirst;
this.action(m, p);
m.getComponent("ModuleCards07").init(i[p]);
} else i.forEach(function(e, n) {
var i = cc.instantiate(t.preCards);
i.y += 30;
i && (i.opacity = 0);
i.parent = t.nodeFirst;
var a = cc.moveBy(.02, cc.v2(0, -30)), r = cc.fadeIn(.02), o = cc.spawn(a, r), s = cc.delayTime(.02 * (n + 1));
i.runAction(cc.sequence(s, o));
i.getComponent("ModuleCards07").init(e);
});
},
initRemainCard: function(e) {
var t = this;
e.forEach(function(e) {
var n = cc.instantiate(t.preCards);
n.parent = t.nodeFirst;
n.getComponent("ModuleCards07").init(e);
});
},
showCardAnim: function() {}
});
cc._RF.pop();
}, {
"../../../Main/Script/TableInfo": "TableInfo",
Logic07: "Logic07"
} ],
Logic07: [ function(e, t) {
"use strict";
cc._RF.push(t, "88b2eAkw8hFjpKw5jsL1bgz", "Logic07");
var n = t.exports;
n.CARD_TYPE = {
DAN: "DAN",
DUI: "DUI",
SAN: "SAN",
SHUN: "SHUN",
LIANDUI: "LIANDUI",
FEIJI: "FEIJI",
BOMB: "BOMB",
SI: "SI"
};
n.decode = function(e, t, i, a) {
var r = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
e.forEach(function(e) {
r[e % 100]++;
});
var o = r.findIndex(function(e) {
return e >= 4;
});
if (o >= 0 && r[o] == e.length) return {
type: n.CARD_TYPE.BOMB,
count: e.length,
card: o % 100,
cards: e
};
if (1 == e.length) return {
type: n.CARD_TYPE.DAN,
card: e[0] % 100,
cards: e
};
if (2 == e.length && e[0] % 100 == e[1] % 100) return {
type: n.CARD_TYPE.DUI,
card: e[0] % 100,
cards: e
};
var s = [ [], [], [], [], [] ];
r.forEach(function(e, t) {
s[e].push(t % 100);
4 == e && s[3].push(t % 100);
});
if ((null == a || a.type == n.CARD_TYPE.SI) && 1 == s[4].length && e.length <= 7 && e.length > 4) {
var c = r.findIndex(function(e) {
return 4 == e;
});
return {
type: n.CARD_TYPE.SI,
count: 1,
card: c,
cards: e
};
}
if ((null == a || a.type == n.CARD_TYPE.SAN) && 1 == s[3].length && (5 == e.length || t <= 5 && t == e.length)) {
var l = r.findIndex(function(e) {
return 3 == e;
});
return {
type: n.CARD_TYPE.SAN,
count: 1,
card: l,
cards: e
};
}
if ((null == a || a.type == n.CARD_TYPE.FEIJI) && s[3].length >= 2) {
if (e.length % 5 == 0 || t <= 5 * s[3].length && e.length == t) {
for (var u = Math.ceil(e.length / 5), d = s[3][s[3].length - 1], h = 1, f = s[3].length - 1; f > 0 && h < u; f--) {
if (s[3][f] - s[3][f - 1] != 1) {
d = -1;
h = 1;
} else {
h++;
d = s[3][f - 1];
}
if (h >= u) break;
}
return d > 0 && u == h ? {
type: n.CARD_TYPE.FEIJI,
count: u,
card: d,
cards: e
} : null;
}
return null;
}
if (s[2].length >= 2) {
if (e.length % 2 != 0) return null;
for (var p = Math.floor(e.length / 2), m = s[2][s[2].length - 1], g = 1, v = s[2].length - 1; v > 0 && g < p; v--) {
if (s[2][v] - s[2][v - 1] != 1) {
m = -1;
g = 1;
} else {
g++;
m = s[2][v - 1];
}
if (g >= p) break;
}
return m > 0 && p == g ? {
type: n.CARD_TYPE.LIANDUI,
count: p,
card: m,
cards: e
} : null;
}
if (s[1].length >= 5) {
for (var C = e.length, b = s[1][s[1].length - 1], y = 1, S = s[1].length - 1; S > 0 && y < C; S--) if (s[1][S] - s[1][S - 1] != 1) {
b = -1;
y = 1;
} else {
y++;
b = s[1][S - 1];
}
return b > 0 && C == y ? {
type: n.CARD_TYPE.SHUN,
count: C,
card: b,
cards: e
} : null;
}
return null;
};
n.compare = function(e, t) {
if (null == e) return !0;
if (e.type == t.type) switch (e.type) {
case n.CARD_TYPE.DAN:
case n.CARD_TYPE.DUI:
case n.CARD_TYPE.SAN:
case n.CARD_TYPE.SI:
return t.card > e.card;

case n.CARD_TYPE.SHUN:
case n.CARD_TYPE.LIANDUI:
case n.CARD_TYPE.FEIJI:
return t.card > e.card && t.count == e.count;

case n.CARD_TYPE.BOMB:
return t.card > e.card;
}
return e.type != n.CARD_TYPE.BOMB && t.type == n.CARD_TYPE.BOMB;
};
n.sumHands = function(e) {
var t = 0;
e.forEach(function(e) {
return t += e.length;
});
return t;
};
n.sortCard = function(e, t) {
return e % 100 == t % 100 ? e - t : e % 100 - t % 100;
};
n.sortPlayedCard = function(e) {
var t;
switch (e.type) {
case n.CARD_TYPE.DAN:
case n.CARD_TYPE.DUI:
case n.CARD_TYPE.SHUN:
case n.CARD_TYPE.LIANDUI:
case n.CARD_TYPE.BOMB:
t = e.cards.sort(n.sortCard);
break;

case n.CARD_TYPE.SAN:
case n.CARD_TYPE.SI:
case n.CARD_TYPE.FEIJI:
var i = e.card, a = e.count, r = [], o = [];
e.cards.forEach(function(e) {
return e % 100 >= i && e % 100 < i + a ? r.push(e) : o.push(e);
});
r.sort(n.sortCard);
o.sort(n.sortCard);
t = r.concat(o);
}
return t;
};
n.autoplay = function(e, t, i, a) {
if (null == t) return null;
var r = [ [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [] ];
e.forEach(function(e) {
r[e % 100].push(e);
});
var o, s, c = [], l = [], u = [];
r.forEach(function(e, t) {
if (e.length >= 4 || a.aaa && 3 == e.length && 14 == t) {
l.push({
type: n.CARD_TYPE.BOMB,
card: t,
count: e.length,
cards: r[t].slice()
});
r[t] = [];
}
});
switch (t.type) {
case n.CARD_TYPE.DAN:
r.forEach(function(e, n) {
e.length > 0 && n > t.card % 100 && c.push([ e[0] ]);
});
break;

case n.CARD_TYPE.DUI:
r.forEach(function(e, n) {
e.length > 1 && n > t.card % 100 && c.push(e.slice(0, 2));
});
break;

case n.CARD_TYPE.SAN:
if ((o = r.findIndex(function(e, n) {
return e.length > 2 && n > t.card % 100;
})) >= 0 && (n.sumHands(r) >= 5 || n.sumHands(r) < 5 && a.limit)) {
u = r[o].slice(0, 3);
r.forEach(function(e, t) {
t != o && e.forEach(function(e) {
u.length < 5 && u.push(e);
});
});
c.push(u);
}
break;

case n.CARD_TYPE.SI:
if ((o = r.findIndex(function(e, n) {
return (e.length > 3 || 3 == e.length && 14 == n && a.aaa) && n > t.card % 100;
})) >= 0) {
u = r[o].slice(0, 4);
c.push(u);
}
break;

case n.CARD_TYPE.SHUN:
s = t.count;
for (var d = t.card + 1; d < r.length - s; d++) {
var h = 0, f = void 0;
u = [];
for (f = d; f < d + s; f++) if (r[f].length > 0) {
h++;
u.push(r[f][0]);
}
h == s && c.push(u);
}
break;

case n.CARD_TYPE.LIANDUI:
s = t.count;
for (var p = t.card + 1; p < r.length - s; p++) {
var m = 0, g = void 0;
u = [];
for (g = p; g < p + s; g++) if (r[g].length > 1) {
m++;
u.push(r[g][0]);
u.push(r[g][1]);
}
m == s && c.push(u);
}
break;

case n.CARD_TYPE.FEIJI:
s = t.count;
for (var v = t.card + 1; v < r.length - s; v++) {
var C = 0, b = void 0;
u = [];
for (b = v; b < v + s; b++) if (r[b].length > 2) {
C++;
u.push(r[b][0]);
u.push(r[b][1]);
u.push(r[b][2]);
}
if (C == s && n.sumHands(r) >= 5 * s) {
r.forEach(function(e) {
e.forEach(function(e) {
u.indexOf(e) < 0 && u.length < 5 * s && u.push(e);
});
});
c.push(u);
}
}
}
for (var y = 0; y < l.length; y++) n.compare(t, l[y]) && c.push(l[y].cards);
return 0 == c.length ? [] : c;
};
n.checkCard = function(e, t, i, a) {
var r = {
cardList: {},
otherCard: []
}, o = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
e.forEach(function(e) {
o[e % 100]++;
});
var s = [ [], [], [], [], [] ];
o.forEach(function(e, t) {
s[e].push(t % 100);
});
var c = [ [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [] ];
e.forEach(function(e) {
c[e % 100].push(e);
});
if (a) {
var l = n.autoplay(e, a, 0, i);
if (l.length > 0) {
r.cardList = n.decode(l[0], t, i, a);
e.forEach(function(e) {
-1 == l[0].indexOf(e) && r.otherCard.push(e);
});
}
return r;
}
var u = [], d = [], h = 0, f = [], p = [], m = [], g = [], v = [], C = [], b = 0, y = [], S = [], _ = [], T = [], E = 0, A = [], I = [], N = [], w = [];
c.forEach(function(e, t) {
1 == e.length && T.push(t);
4 == e.length && w.push(t);
if (e.length >= 1) {
E++;
A.push(e[0]);
E >= 5 && (I = A.concat());
} else {
E = 0;
A = [];
}
if (e.length >= 2) {
b++;
v.push(t);
y.push(t);
b >= 2 && (S = y.concat());
} else {
b = 0;
y = [];
}
if (e.length >= 3) {
d.push(t);
h++;
f.push(t);
h >= 2 && (p = f.concat());
} else {
f = [];
h = 0;
}
});
if (p.length > 0) {
p.forEach(function(e) {
m = m.concat(c[e]);
});
var D = 0, P = 2 * p.length;
T.forEach(function(e) {
if (D != P) {
m.push(c[e][0]);
D++;
}
});
v.forEach(function(e) {
if (D != P && -1 == p.indexOf(e)) if (P - D >= c[e].length) {
m = m.concat(c[e]);
D += c[e].length;
} else {
m = m.concat(c[e].slice(0, P - D));
D = P;
}
});
}
if (d.length > 0) {
u = u.concat(c[d[0]].slice(0, 3));
var M = 0;
T.forEach(function(e) {
if (2 != M) {
u.push(c[e][0]);
M++;
}
});
v.forEach(function(e) {
if (2 != M && -1 == d.indexOf(e)) if (2 - M >= 2) {
u.push(c[e][0]);
u.push(c[e][1]);
M += 2;
} else {
u.push(c[e][0]);
M++;
}
});
}
S.forEach(function(e) {
C.push(c[e][0]);
C.push(c[e][1]);
});
if (v.length > 0) {
g.push(c[v[0]][0]);
g.push(c[v[0]][1]);
}
T.length > 0 && _.push(c[T[0]][0]);
if (w.length > 0) {
N = c[w[0]];
var x = 0;
T.forEach(function(e) {
if (3 != x) {
N.push(c[e][0]);
x++;
}
});
v.forEach(function(e) {
if (3 != x && -1 == w.indexOf(e)) if (3 - x >= c[e].length) {
N = N.concat(c[e]);
x += c[e].length;
} else {
m = N.concat(c[e].slice(0, 3 - x));
x = 3;
}
});
}
if (0 == v.length && 0 == d.length && 0 == S.length && 0 == p.length) {
if (I.length > 0) {
r.cardList = {
type: n.CARD_TYPE.SHUN,
count: I.length,
card: I[0] % 100,
cards: I
};
e.forEach(function(e) {
-1 == I.indexOf(e) && r.otherCard.push(e);
});
}
0 == I.length && 1 == T.length && (r.cardList = {
type: n.CARD_TYPE.DAN,
card: _[0] % 100,
cards: _
});
return r;
}
for (var O = [ _, g, u, m, C, I, N ], G = O[0].length, R = 0, k = 1; k < O.length; k++) if (G < O[k].length) {
G = O[k].length;
R = k;
}
var L = O[R].concat();
switch (R) {
case 0:
r.cardList = {
type: n.CARD_TYPE.DAN,
card: L[0] % 100,
cards: L
};
break;

case 1:
r.cardList = {
type: n.CARD_TYPE.DUI,
card: L[0] % 100,
cards: L
};
break;

case 2:
r.cardList = {
type: n.CARD_TYPE.SAN,
count: 1,
card: L[0] % 100,
cards: L
};
break;

case 3:
r.cardList = {
type: n.CARD_TYPE.FEIJI,
count: p.length,
card: L[0] % 100,
cards: L
};
break;

case 4:
r.cardList = {
type: n.CARD_TYPE.LIANDUI,
count: S.length,
card: L[0] % 100,
cards: L
};
break;

case 5:
r.cardList = {
type: n.CARD_TYPE.SHUN,
count: I.length,
card: L[0] % 100,
cards: L
};
break;

case 6:
r.cardList = 4 == L.length ? {
type: n.CARD_TYPE.BOMB,
count: L.length,
card: L[0] % 100,
cards: L
} : {
type: n.CARD_TYPE.SI,
count: 1,
card: L[0] % 100,
cards: L
};
}
e.forEach(function(e) {
-1 == L.indexOf(e) && r.otherCard.push(e);
});
return r;
};
Date.prototype.format = function(e) {
var t = {
"M+": this.getMonth() + 1,
"d+": this.getDate(),
"h+": this.getHours(),
"m+": this.getMinutes(),
"s+": this.getSeconds(),
"q+": Math.floor((this.getMonth() + 3) / 3),
S: this.getMilliseconds()
};
/(y+)/.test(e) && (e = e.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length)));
for (var n in t) new RegExp("(" + n + ")").test(e) && (e = e.replace(RegExp.$1, 1 == RegExp.$1.length ? t[n] : ("00" + t[n]).substr(("" + t[n]).length)));
return e;
};
cc._RF.pop();
}, {} ],
Logic_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "c6315439XZKobDmfMrQaZ5n", "Logic_09");
var n = t.exports;
n.CARD_TYPE = {
DAN: "DAN",
DUI: "DUI",
SAN: "SAN",
SHUN: "SHUN",
LIANDUI: "LIANDUI",
FEIJI: "FEIJI",
BOMB: "BOMB"
};
n.series = function(e, t) {
for (var n = [], i = e.length; i >= t; i--) for (var a = 0; a <= e.length - i; a++) {
for (var r = [], o = !0, s = a; s < a + i; s++) {
s + 1 < a + i && e[s] + 1 != e[s + 1] && (o = !1);
r.push(e[s]);
}
r.length >= t && o && n.push(r);
}
return n;
};
n.maxSeries = function(e) {
for (var t = 0; t < e.length - 1; t++) if (e[t] + 1 != e[t + 1]) return !1;
return !0;
};
n.decode = function(e, t) {
if (null == e) return null;
e.sort(n.sortCard);
var i = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
e.forEach(function(e) {
i[e % 100]++;
});
var a = [], r = i.findIndex(function(e) {
return e >= 4;
});
r >= 0 && i[r] == e.length && a.push({
type: n.CARD_TYPE.BOMB,
count: e.length,
card: r % 100,
cards: e
});
1 == e.length && a.push({
type: n.CARD_TYPE.DAN,
card: e[0] % 100,
cards: e
});
2 == e.length && e[0] % 100 == e[1] % 100 && a.push({
type: n.CARD_TYPE.DUI,
card: e[0] % 100,
cards: e
});
var o = [ [], [], [], [], [], [], [], [], [] ];
i.forEach(function(e, t) {
e >= 3 ? o[3].push(t % 100) : e < 3 && e > 0 && o[e].push(t % 100);
});
for (var s = 3; s < 6; s++) 1 == o[s].length && e.length <= 5 && a.push({
type: n.CARD_TYPE.SAN,
count: 1,
card: o[s][0] % 100,
cards: e
});
if (o[1].length >= 5 && o[1].length == e.length && 1 == t) {
var c = o[1].slice();
n.series(c, e.length).filter(function(t) {
return t.length == e.length;
}).forEach(function(t) {
return a.push({
type: n.CARD_TYPE.SHUN,
count: t.length,
card: t[0],
cards: e
});
});
} else if (o[3].length >= 2) {
var l = o[3].slice();
n.series(l, 2).filter(function(t) {
return e.length <= 5 * t.length;
}).forEach(function(t) {
return a.push({
type: n.CARD_TYPE.FEIJI,
count: t.length,
card: t[0],
cards: e
});
});
} else if (o[2].length >= 2 && e.length == 2 * o[2].length) {
var u = o[2].slice();
n.series(u, u.length).forEach(function(t) {
return a.push({
type: n.CARD_TYPE.LIANDUI,
count: t.length,
card: t[0],
cards: e
});
});
}
return a;
};
n.compare = function(e, t) {
if (null == e) return !0;
if (e.type == t.type) switch (e.type) {
case n.CARD_TYPE.DAN:
case n.CARD_TYPE.DUI:
case n.CARD_TYPE.SAN:
return t.card > e.card;

case n.CARD_TYPE.SHUN:
case n.CARD_TYPE.LIANDUI:
case n.CARD_TYPE.FEIJI:
return t.card > e.card && t.count == e.count;

case n.CARD_TYPE.BOMB:
return t.card > e.card && t.count == e.count || t.count > e.count;
}
return e.type != n.CARD_TYPE.BOMB && t.type == n.CARD_TYPE.BOMB;
};
n.sumHands = function(e) {
var t = 0;
e.forEach(function(e) {
return t += e.length;
});
return t;
};
n.sortCard = function(e, t) {
return e % 100 == t % 100 ? e - t : e % 100 - t % 100;
};
n.sortPlayedCard = function(e) {
var t;
switch (e.type) {
case n.CARD_TYPE.DAN:
case n.CARD_TYPE.DUI:
case n.CARD_TYPE.SHUN:
case n.CARD_TYPE.LIANDUI:
case n.CARD_TYPE.BOMB:
t = e.cards.sort(n.sortCard);
break;

case n.CARD_TYPE.SAN:
case n.CARD_TYPE.FEIJI:
var i = e.card, a = e.count, r = [], o = [];
e.cards.forEach(function(e) {
return e % 100 >= i && e % 100 < i + a ? r.push(e) : o.push(e);
});
r.sort(n.sortCard);
o.sort(n.sortCard);
t = r.concat(o);
}
return t;
};
n.max = function(e) {
for (var t = e[0][3], n = 1; n < e.length; n++) t < e[n][3] && (t = e[n][3]);
return t;
};
n.autoplay = function(e, t, i, a) {
if (null == t) return null;
var r = [ [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [] ];
e.forEach(function(e) {
r[e % 100].push(e);
});
var o, s = [], c = [];
switch (t.type) {
case n.CARD_TYPE.DAN:
r.forEach(function(e, i) {
if (e.length > 0 && i > t.card % 100) {
var r = n.decode([ e[0] ], a);
r.length > 0 && s.push(r[0]);
}
});
break;

case n.CARD_TYPE.DUI:
r.forEach(function(e, i) {
if (e.length > 1 && i > t.card % 100) {
var r = n.decode(e.slice(0, 2), a);
r.length > 0 && s.push(r[0]);
}
});
break;

case n.CARD_TYPE.SAN:
r.forEach(function(e, i) {
if (e.length > 2 && i > t.card % 100) {
var r = n.decode(e.slice(0, 3), a);
r.length > 0 && s.push(r[0]);
}
});
break;

case n.CARD_TYPE.SHUN:
o = t.count;
for (var l = t.card % 100 + 1; l < r.length - o; l++) {
var u = 0, d = void 0;
c = [];
for (d = l; d < l + o; d++) if (r[d].length > 0) {
u++;
c.push(r[d][0]);
}
if (u == o) {
var h = n.decode(c, a);
h.length > 0 && s.push(h[0]);
}
}
break;

case n.CARD_TYPE.LIANDUI:
o = t.count;
for (var f = t.card % 100 + 1; f < r.length - o; f++) {
var p = 0, m = void 0;
c = [];
for (m = f; m < f + o; m++) if (r[m].length > 1) {
p++;
c.push(r[m][0]);
c.push(r[m][1]);
}
if (p == o) {
var g = n.decode(c, a);
g.length > 0 && s.push(g[0]);
}
}
break;

case n.CARD_TYPE.FEIJI:
o = t.count;
for (var v = t.card % 100 + 1; v < r.length - o; v++) {
var C = 0, b = void 0;
c = [];
for (b = v; b < v + o; b++) if (r[b].length > 2) {
C++;
c.push(r[b][0]);
c.push(r[b][1]);
c.push(r[b][2]);
}
if (C == o) {
var y = n.decode(c, a);
y.length > 0 && s.push(y[0]);
}
}
}
for (var S = function(e) {
r.forEach(function(i, a) {
if (i.length >= e) {
var o = {
type: n.CARD_TYPE.BOMB,
card: a,
count: e,
cards: r[a].slice(0, e)
};
n.compare(t, o) && s.push(o);
}
});
}, _ = 4; _ <= 12; _++) S(_);
s.filter(function(e) {
return "BOMB" == e.type;
}).forEach(function(e) {
var t = s.findIndex(function(t) {
return "DUI" == t.type && t.card == e.card;
});
t >= 0 && s.splice(t, 1);
});
s.filter(function(e) {
return "BOMB" == e.type;
}).forEach(function(e) {
var t = s.findIndex(function(t) {
return "SAN" == t.type && t.card == e.card;
});
t >= 0 && s.splice(t, 1);
});
for (var T = function(e) {
s.filter(function(t) {
return "BOMB" == t.type && t.count > e;
}).forEach(function(t) {
var n = s.findIndex(function(n) {
return n.card == t.card && "BOMB" == n.type && n.count == e;
});
n >= 0 && s.splice(n, 1);
});
}, E = 4; E < 13; E++) T(E);
var A = s.findIndex(function(e) {
return "LIANDUI" == e.type;
});
if (A >= 0) for (var I = function(e) {
s.filter(function(e) {
return "BOMB" == e.type;
}).forEach(function(t) {
var n = s.findIndex(function(n) {
return "LIANDUI" == n.type && n.card + e == t.card;
});
n >= 0 && s.splice(n, 1);
});
}, N = 0; N < s[A].count; N++) I(N);
var w = s.findIndex(function(e) {
return "FEIJI" == e.type;
});
if (w >= 0) for (var D = function(e) {
s.filter(function(e) {
return "BOMB" == e.type;
}).forEach(function(t) {
var n = s.findIndex(function(n) {
return "FEIJI" == n.type && n.card + e == t.card;
});
n >= 0 && s.splice(n, 1);
});
}, P = 0; P < s[w].count; P++) D(P);
return 0 == s.length ? [] : s[i % s.length].cards;
};
Date.prototype.format = function(e) {
var t = {
"M+": this.getMonth() + 1,
"d+": this.getDate(),
"h+": this.getHours(),
"m+": this.getMinutes(),
"s+": this.getSeconds(),
"q+": Math.floor((this.getMonth() + 3) / 3),
S: this.getMilliseconds()
};
/(y+)/.test(e) && (e = e.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length)));
for (var n in t) new RegExp("(" + n + ")").test(e) && (e = e.replace(RegExp.$1, 1 == RegExp.$1.length ? t[n] : ("00" + t[n]).substr(("" + t[n]).length)));
return e;
};
cc._RF.pop();
}, {} ],
LotteryPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "f8c74S/7ExGVLXS6pi8ToWg", "LotteryPop");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("../../NetWork/Connector"), a = e("../../Script/Cache"), r = e("../../Script/utils"), o = e("../../Script/DataBase"), s = e("../../../script/ui/hall/data/App").App;
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
lotteryCount: cc.Label,
rewardIconArr: [ cc.SpriteFrame ],
turnTable: cc.Node,
listContainer: cc.Node,
listItem: cc.Prefab,
lotteryReward: cc.Prefab,
rewardContainer: cc.Node,
downTimeLbl: cc.Label,
endTips: cc.Label,
rewardPop: cc.Prefab,
rewardCount: 0,
rewardArr: [],
listData: [],
rewardData: null,
endDate: ""
},
onLoad: function() {
this.addEvents();
this.refreshUI();
},
addEvents: function() {},
removeEvents: function() {},
refreshUI: function() {
var e = this;
this.turnTable.rotation = 0;
i.request(n.ServerEventName.LotteryData, {}, function(t) {
e.lotteryCount.string = "" + (t.tickets || 0);
e.rewardCount = t.tickets || 0;
e.rewardArr = [];
e.rewardData = t.prize;
e.rewardContainer.removeAllChildren();
for (var n in t.prize) {
var i = t.prize[n], a = cc.instantiate(e.lotteryReward);
a.rotation = 15 + 30 * n;
a.getChildByName("word").getComponent(cc.Label).string = 0 == i.prize ? "" : i.prize / 100 + "元";
if (i.prize >= 3e4) {
a.getChildByName("icon").getComponent(cc.Sprite).spriteFrame = e.rewardIconArr[4];
a.getChildByName("star").active = !0;
} else i.prize >= 1e4 ? a.getChildByName("icon").getComponent(cc.Sprite).spriteFrame = e.rewardIconArr[3] : i.prize >= 4e3 ? a.getChildByName("icon").getComponent(cc.Sprite).spriteFrame = e.rewardIconArr[2] : i.prize > 0 ? a.getChildByName("icon").getComponent(cc.Sprite).spriteFrame = e.rewardIconArr[1] : a.getChildByName("icon").getComponent(cc.Sprite).spriteFrame = e.rewardIconArr[0];
e.rewardContainer.addChild(a);
e.rewardArr.push(a);
}
e.endDate = t.activityEndDate || "";
});
this.downloadListReward();
},
downloadListReward: function() {
var e = this;
i.request(n.ServerEventName.LotteryList, {}, function(t) {
e.listData = t.public || [];
e.initRewardList();
});
},
onClickLottery: function() {
var e = this;
if (this.rewardCount <= 0) a.alertTip("抽奖次数不足"); else {
var t = new Date(this.endDate).getTime(), r = new Date().getTime() + n.ServerTimeDiff;
if (Math.floor((t - r) / 1e3) <= 0) a.alertTip("活动已结束"); else {
s.lockScene();
this.rewardArr.forEach(function(e) {
e.getChildByName("select").active = !1;
});
i.request(n.ServerEventName.Lottery, {}, function(t) {
e.rewardCount--;
o.player.ticket = e.rewardCount;
s.EventManager.dispatchEventWith(n.GameEventNames.UPDATE_WALLET_DATA);
e.lotteryCount.string = "" + e.rewardCount;
e.startLotteryAnim(t.prize);
}, null, function(e) {
s.unlockScene();
a.showTipsMsg(e.message || "请求失败,稍后再试");
});
}
}
},
startLotteryAnim: function(e) {
var t = this, n = 30 * e + 30 * Math.random() + this.turnTable.rotation % 360, i = cc.rotateBy(5.5, -1440 + n).easing(cc.easeExponentialOut(2)), r = cc.blink(2, 5), o = cc.sequence(r, cc.callFunc(function() {
s.unlockScene();
if (0 != t.rewardData[e].prize) {
var n = cc.instantiate(t.rewardPop);
n.getComponent("RewardPop").initData(t.rewardData[e]);
t.node.addChild(n);
}
})), c = cc.sequence(i, cc.callFunc(function() {
t.rewardArr[e].getChildByName("select").active = !0;
t.rewardArr[e].getChildByName("select").runAction(o);
a.playSound("reward1");
t.downloadListReward();
}));
a.playSound("lottery2");
this.turnTable.runAction(c);
},
onShowTips: function() {
a.playSfx();
},
initRewardList: function() {
var e = this;
this.listContainer.removeAllChildren();
this.listData.forEach(function(t, n) {
var i = cc.instantiate(e.listItem);
i.getChildByName("name").getComponent(cc.Label).string = "恭喜" + r.getStringByLength(t.name, 6) + "获得";
i.getChildByName("reward").getComponent(cc.Label).string = t.prize / 100 + "元金币";
i.x = -e.listContainer.width / 2 + 10;
i.y = e.listContainer.height / 2 - i.height / 2 - (i.height + 10) * n;
e.listContainer.addChild(i);
});
},
update: function() {},
onClickClose: function() {
a.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../script/ui/hall/data/App": "App",
"../../NetWork/Connector": "Connector",
"../../Script/Cache": "Cache",
"../../Script/DataBase": "DataBase",
"../../Script/utils": "utils"
} ],
MJGameConfig: [ function(e, t) {
"use strict";
cc._RF.push(t, "8992alClf1DYKgwn0of1JXa", "MJGameConfig");
var n = {
COMMON: {
STATUS: {
WAIT: 0,
CUTE: 1,
START: 2,
SUMMARY: 3,
DESTORY: 4,
TIAN: 5,
XIAN_TING: 6,
ZHUANG_GANG: 7,
ZHUANG_TING: 8,
GANG: 9
}
},
GAME_HZMJ: {
PLAYER_POS_READY: [ cc.v2(-493, -143), cc.v2(504, 104), cc.v2(319, 234), cc.v2(-493, 104) ],
PLAYER_POS_START: [ cc.v2(-493, -143), cc.v2(504, 104), cc.v2(319, 234), cc.v2(-493, 104) ],
STATUS: {
WAIT: 0,
CUTE: 1,
START: 2,
SUMMARY: 3,
DESTORY: 4,
TIAN: 5,
XIAN_TING: 6,
ZHUANG_GANG: 7,
ZHUANG_TING: 8,
GANG: 9
},
FIRST_CARD_POS: {
x: -530,
y: -260
},
CARD_RECT: 70,
CARD_SCALE: 1,
QUEST_TYPE: {
GUO: "guo",
PENG: "peng",
SUO: "suo",
FANG: "fang",
AN: "an",
HU: "hu",
GANG: "gang"
},
GROUND_RECT: 150,
QUEST_IMG_POS: [ cc.v2(-18, -94), cc.v2(309, 37), cc.v2(-18, 177), cc.v2(-300, 37) ],
ELSE_HANDS_POS: [ cc.v2(547, 16), cc.v2(-51, 256), cc.v2(-287, 43) ],
SHOW_CARD_POS: [ cc.v2(-10, -117), cc.v2(335, 22), cc.v2(-17, 168), cc.v2(-320, 27) ],
RULE_MA: [ "不扎码", "一码全中", "扎2码", "", "扎4码", "胡几奖几", "扎6码" ]
},
GAME_YJQF: {
PLAYER_XI_POS: [ cc.v2(-489, -162), cc.v2(484, 127), cc.v2(-488, 126) ],
PLAYER_POS: [ cc.v2(-487, -195), cc.v2(487, 93), cc.v2(-487, 93) ],
FINAL_XI_POS: [ cc.v2(-393, -238), cc.v2(387, 50), cc.v2(-393, 50) ],
FINISH_POS: [ cc.v2(-417, -101), cc.v2(417, 171), cc.v2(-417, 171) ],
FINAL_SCORE_POS: [ cc.v2(-394, -212), cc.v2(408, 75), cc.v2(-391, 75) ]
},
GAME_YJSRQF: {
PLAYER_POS: [ cc.v2(-487, -84), cc.v2(487, -84), cc.v2(487, 197), cc.v2(-487, 197) ]
}
};
t.exports = n;
cc._RF.pop();
}, {} ],
MJGameSummayItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "b753andlExA8a7KKDwVQmfZ", "MJGameSummayItem");
n.__esModule = !0;
n.default = void 0;
e("../../../GameBase/GameConfig");
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A = w(e("../../../Main/Script/TableInfo")), I = w(e("../../common/GameUtils")), N = w(e("../common/Avatar"));
function w(e) {
return e && e.__esModule ? e : {
default: e
};
}
function D(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function P(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function M(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
x(e, t);
}
function x(e, t) {
return (x = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function O(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var G = cc._decorator, R = G.ccclass, k = G.property, L = (i = k(N.default), a = k(cc.Label), 
r = k(cc.Label), o = k(cc.Label), s = k(cc.Label), c = k(cc.Label), l = k(cc.Label), 
u = k(cc.Label), d = k(cc.Label), h = k(cc.Label), R(f = (p = function(e) {
M(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
D(t = e.call.apply(e, [ this ].concat(i)) || this, "avatarNode", m, P(t));
D(t, "lblName", g, P(t));
D(t, "lblDraw", v, P(t));
D(t, "lblKong", C, P(t));
D(t, "lblBu", b, P(t));
D(t, "lblZhi", y, P(t));
D(t, "lblRecv", S, P(t));
D(t, "lblSend", _, P(t));
D(t, "lblWinScore", T, P(t));
D(t, "lblLoseScore", E, P(t));
return t;
}
var n = t.prototype;
n.start = function() {};
n.renderUI = function(e, t) {
this.lblName.string = I.default.getStringByLength(A.default.players[t].prop.name, 5);
this.avatarNode.avatarUrl = A.default.players[t].prop.head;
A.default.players[t].total = e.total;
this.lblDraw.string = "" + e.draw;
this.lblKong.string = "" + e.kong;
this.lblBu.string = "" + e.bu;
this.lblZhi.string = "" + e.zhi;
this.lblRecv.string = "" + e.recv;
this.lblSend.string = "" + e.send;
if (e.score >= 0) {
this.lblWinScore.node.active = !0;
this.lblWinScore.string = "" + e.score;
} else {
this.lblLoseScore.node.active = !0;
this.lblLoseScore.string = "" + e.score;
}
};
return t;
}(cc.Component), m = O(p.prototype, "avatarNode", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = O(p.prototype, "lblName", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = O(p.prototype, "lblDraw", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = O(p.prototype, "lblKong", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = O(p.prototype, "lblBu", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = O(p.prototype, "lblZhi", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = O(p.prototype, "lblRecv", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = O(p.prototype, "lblSend", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = O(p.prototype, "lblWinScore", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = O(p.prototype, "lblLoseScore", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p)) || f);
n.default = L;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/TableInfo": "TableInfo",
"../../common/GameUtils": "GameUtils",
"../common/Avatar": "Avatar"
} ],
MJRulePop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "824adfTKHZG/4ImGbx7gvS5", "MJRulePop");
n.__esModule = !0;
n.default = void 0;
var i, a, r = (i = e("../../../Main/Script/Cache")) && i.__esModule ? i : {
default: i
};
function o(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
s(e, t);
}
function s(e, t) {
return (s = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
var c = cc._decorator, l = c.ccclass, u = (c.property, l(a = function(e) {
o(t, e);
function t() {
return e.apply(this, arguments) || this;
}
var n = t.prototype;
n.onLoad = function() {};
n.onClickClose = function() {
r.default.playSfx();
this.node && this.node.destroy();
};
return t;
}(cc.Component)) || a);
n.default = u;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../Main/Script/Cache": "Cache"
} ],
ModuleActivePop: [ function(e, t) {
"use strict";
cc._RF.push(t, "855e1Ie8dZPvY8kzf3B8jXN", "ModuleActivePop");
e("../NetWork/Connector");
var n = e("../Script/Cache"), i = (e("../Script/DataBase"), e("../Script/utils"), 
e("SceneLogin"), e("../../GameBase/GameConfig").GameConfig);
e("../Script/audio-ctrl");
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
tipsBtn: cc.Node,
activeBtn: cc.Node,
updateBtn: cc.Node,
updateInfo: cc.Node,
web: cc.WebView
},
onLoad: function() {
this.addEvents();
this.refreshUI();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.tipsBtn.on(cc.Node.EventType.TOUCH_END, this.onClickTips, this);
this.activeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickActive, this);
this.updateBtn.on(cc.Node.EventType.TOUCH_END, this.onClickUpdate, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.tipsBtn.off(cc.Node.EventType.TOUCH_END, this.onClickTips, this);
this.activeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickActive, this);
this.updateBtn.off(cc.Node.EventType.TOUCH_END, this.onClickUpdate, this);
},
refreshUI: function() {
this.web.url = i.ConfigUrl + "info/update.html";
console.log("h5地址--- ", this.web.url);
},
onClickTips: function() {
n.playSfx();
this.web.url = i.ConfigUrl + "info/gonggao.html";
},
onClickActive: function() {
n.playSfx();
this.web.url = i.ConfigUrl + "info/huodong.html";
},
onClickUpdate: function() {
n.playSfx();
this.web.url = i.ConfigUrl + "info/update.html";
},
onClickClose: function() {
n.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/audio-ctrl": "audio-ctrl",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleAudioCtr_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "56d817xRMhCepXpBxg3LLVA", "ModuleAudioCtr_09");
var n = cc.Class({
extends: e("AudioBase"),
properties: {},
PassVoice: function(e) {
this.playAudio(e + "_PASS.mp3");
},
playVoice: function(e, t) {
switch (e.type) {
case "DAN":
case "DUI":
this.play(e, t);
break;

case "LIANDUI":
case "FEIJI":
case "SHUN":
this.special(e, t);
break;

case "SP":
this.wushik(e, t);
break;

case "BOMB":
Math.random() > .2 ? this.play(e, t) : this.special(e, t);
break;

case "SAN":
var n;
n = e.card % 100;
this.playAudio(t + "_3_" + n + ".mp3");
}
},
wushik: function(e, t) {
this.playAudio(t + "_" + e.type + "_" + e.card + ".mp3");
},
special: function(e, t) {
this.playAudio(t + "_" + e.type + ".mp3");
},
play: function(e, t) {
var n = e.card % 100;
2 == e.cards.length && e.cards[0] % 100 != e.cards[1] % 100 ? this.playAudio(t + "_1_18.mp3") : this.playAudio(t + "_" + e.cards.length + "_" + n + ".mp3");
}
});
t.exports = n;
cc._RF.pop();
}, {
AudioBase: "AudioBase"
} ],
ModuleAudioDownload: [ function(e, t) {
"use strict";
cc._RF.push(t, "035e3tGbjBP/KyFDgqcRIU2", "ModuleAudioDownload");
var n = e("../../Main/Script/DataBase"), i = e("Connector"), a = e("../../Main/Script/Cache"), r = (e("audio-ctrl"), 
e("../GameConfig").GameConfig);
cc.Class({
extends: cc.Component,
properties: {
preAudioLoad: cc.Prefab,
downloadQueue: []
},
onLoad: function() {
cc.sys.isNative && this.checkDownLoad();
},
compareVersion: function(e, t) {
if ("" == e) return -1;
for (var n = e.split("."), i = t.split("."), a = 0; a < n.length; ++a) {
var r = parseInt(n[a]), o = parseInt(i[a] || 0);
if (r !== o) return r - o;
}
return i.length > n.length ? -1 : 0;
},
checkDownLoad: function() {
var e = this;
this.audioVersion = n.getString(n.STORAGE_KEY.AUDIO[n.gameType]);
var t = n.getString(n.STORAGE_KEY.AUDIO_VERSION[n.gameType]), o = this.compareVersion(this.audioVersion, t);
if (!(0 == o || o > 0)) {
var s = n.gameType < 10 ? "media0" + n.gameType : "media" + n.gameType, c = r.ConfigUrl + "update_media/" + s + ".json";
console.log("下载地址: ", c);
i.get(c, "getJson", function(t) {
console.log("下载数据:", JSON.stringify(t));
t.packageUrl = r.ConfigUrl + "update_media/";
t.remoteUrl = c;
e.resData = t;
e.arrAssets = Object.keys(e.resData.assets);
e.startDownLoad();
}, !1, function() {
a.alertTip("音效下载失败");
});
}
},
startDownLoad: function() {
this.bgAudioDownload = cc.instantiate(this.preAudioLoad);
this.bgAudioDownload.parent = cc.find("Canvas");
var e = this.bgAudioDownload.getChildByName("bgProgress");
this.imgProgressBar = e.getChildByName("imgProgress").getComponent(cc.Sprite);
this.imgProgressBar.fillRange = 0;
this.lblProgress = this.bgAudioDownload.getChildByName("lbl").getComponent(cc.Label);
this.lblProgress.string = "";
var t = n.gameType < 10 ? "Game0" + n.gameType : "Game" + n.gameType;
console.log("下载音效  游戏名:", t);
this.downloadQueue = [];
for (var i = 0; i < this.arrAssets.length; i++) {
this.arrAssets[i] = this.arrAssets[i].substring(7);
var a = {
url: r.ConfigUrl + "update_media/" + t + "/" + this.arrAssets[i],
path: this.arrAssets[i],
count: 0
};
this.downloadQueue.push(a);
}
this.downloadCounter = {
total: this.downloadQueue.length,
finish: 0
};
this.isStarted = !0;
try {
this.downloadSchedule = this.schedule(function() {
for (;this.downloadQueue.length > 0; ) this.downLoad(this.downloadQueue.pop());
if (this.downloadCounter.total == this.downloadCounter.finish) {
this.unscheduleAllCallbacks(this.downloadSchedule);
this.isStarted = null;
this.success();
}
this.imgProgressBar.fillRange = this.downloadCounter.finish / this.downloadCounter.total;
this.lblProgress.string = "正在下载语音包  " + this.downloadCounter.finish + "/" + this.downloadCounter.total;
}.bind(this), .1);
} catch (e) {
this.unscheduleAllCallbacks(this.downloadSchedule);
}
},
success: function() {
this.bgAudioDownload && this.bgAudioDownload.destroy();
a.alertTip("下载语音包完成");
n.setString(n.STORAGE_KEY.AUDIO[n.gameType], this.resData.version);
},
failed: function(e, t) {
if (null != this.isStarted && t.downloadQueue) if (e.count <= 4) {
e.count++;
t.downloadQueue.push(e);
} else {
e.count = 0;
t.downloadQueue.push(e);
t.downloadCounter = {
total: t.downloadQueue.length,
finish: 0
};
t.unscheduleAllCallbacks();
this.isStarted = null;
t.bgAudioDownload && t.bgAudioDownload.destroy();
a.showConfirm("部分音效文件下载失败，需重新下载", function() {
cc.log("重新下载");
t.reLoad(t.downloadQueue, t);
}, null);
}
},
reLoad: function(e, t) {
try {
this.schedule(function() {
for (;e.length > 0; ) t.downLoad(e.pop());
if (t.downloadCounter.total == t.downloadCounter.finish) {
this.unscheduleAllCallbacks(t.downloadSchedule);
t.isStarted = null;
t.success();
}
}.bind(this), .1);
} catch (e) {}
},
downLoad: function(e) {
var t = this, i = cc.loader.getXMLHttpRequest();
i.open("GET", e.url, !0);
i.responseType = "arraybuffer";
cc.log(e.path, e.url);
var a = n.gameType < 10 ? "Game0" + n.gameType : "Game" + n.gameType;
i.onreadystatechange = function() {
cc.log(i.status);
try {
if (4 == i.readyState && i.status >= 200 && i.status <= 207) {
i.statusText;
var n = i.response;
cc.log(new Uint8Array(n).length);
cc.log(JSON.stringify(jsb.fileUtils));
jsb.fileUtils.isDirectoryExist(jsb.fileUtils.getWritablePath() + "remote-asset") || jsb.fileUtils.createDirectory(jsb.fileUtils.getWritablePath() + "remote-asset");
jsb.fileUtils.isDirectoryExist(jsb.fileUtils.getWritablePath() + "remote-asset/Audio") || jsb.fileUtils.createDirectory(jsb.fileUtils.getWritablePath() + "remote-asset/Audio");
jsb.fileUtils.isDirectoryExist(jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + a) || jsb.fileUtils.createDirectory(jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + a);
jsb.fileUtils.writeDataToFile(new Uint8Array(n), jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + a + "/" + e.path);
cc.log(jsb.fileUtils.getWritablePath());
t.downloadCounter.finish++;
} else t.failed(e, t);
} catch (n) {
t.failed(e, t);
}
};
i.timeout = 1e4;
i.onerror = function() {
cc.log("request onerror");
t.failed(e, t);
};
i.ontimeout = function() {
cc.log("request ontimeout");
t.failed(e, t);
};
i.send(null);
}
});
cc._RF.pop();
}, {
"../../Main/Script/Cache": "Cache",
"../../Main/Script/DataBase": "DataBase",
"../GameConfig": "GameConfig",
Connector: "Connector",
"audio-ctrl": "audio-ctrl"
} ],
ModuleAutoTipsPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "b783baOSpNLYoFMcAbyMgDf", "ModuleAutoTipsPop");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("./Cache"), a = e("./utils");
cc.Class({
extends: cc.Component,
properties: {
ensureBtn: cc.Node,
contentWord: cc.Label,
selectSpr: cc.Node
},
onLoad: function() {},
show: function(e, t, n) {
this.callBack = n;
this.gameType = t;
this.contentWord.string = "" + e;
},
onSelectShow: function() {
i.playSfx();
this.selectSpr.active = !this.selectSpr.active;
},
onClickEnsure: function() {
i.playSfx();
var e = a.getValue(n.StorageKey.ShowAutoTips, {
PDK_SOLO: !0,
XHZP_SOLO: !0,
LDZP_SOLO: !0,
PDK: !0,
XHZP: !0,
XHZD: !0,
LDZP: !0
});
e[this.gameType] = !this.selectSpr.active;
a.saveValue(n.StorageKey.ShowAutoTips, e);
this.callBack && this.callBack();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"./Cache": "Cache",
"./utils": "utils"
} ],
ModuleBalance07: [ function(e, t) {
"use strict";
cc._RF.push(t, "210737RH+VBL5ThjuITA2uK", "ModuleBalance07");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
imgWinner: cc.Node,
lblName: cc.Label,
lblZongjifen: cc.Label,
lblZhadan: cc.Label,
lblTurnWin: cc.Label,
lblTurnLose: cc.Label,
lblMaxscore: cc.Label,
sprHead: cc.Sprite,
nodeHost: cc.Node,
lblId: cc.Label
},
init: function(e, t, i) {
this.imgWinner.active = i[t].winner;
this.lblName.string = n.players[t].prop.name;
if (this.lblName.node.width > 120) {
var a = this.lblName.node.width;
this.lblName.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1), cc.moveBy(4, (114 - a) / 2, 0), cc.delayTime(1), cc.moveBy(4, (a - 114) / 2, 0))));
}
this.lblZongjifen.string = e.score;
this.lblZhadan.string = e.ach[0];
this.lblTurnWin.string = e.ach[2];
this.lblTurnLose.string = e.ach[3];
this.lblMaxscore.string = e.ach[1];
this.nodeHost.active = 0 == t;
this.lblId.string = n.players[t].prop.pid;
this.sprHead.spriteFrame = n.playerHead[t];
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleBalance_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "10af0u9astIjZqY/k5wNBez", "ModuleBalance_09");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
imgWinner: cc.Node,
lblName: cc.Label,
lblZongjifenAdd: cc.Label,
lblXiAdd: cc.Label,
lblXitongAdd: cc.Label,
lblXitongJian: cc.Label,
sprHead: cc.Sprite,
nodeHost: cc.Node,
lblId: cc.Label
},
init: function(e, t, i) {
this.imgWinner.active = i[t].winner;
this.lblName.string = n.players[t].prop.name;
if (this.lblName.node.width > 120) {
var a = this.lblName.node.width;
this.lblName.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1), cc.moveBy(4, (114 - a) / 2, 0), cc.delayTime(1), cc.moveBy(4, (a - 114) / 2, 0))));
}
this.nodeHost.active = n.players[t].host;
this.lblId.string = n.players[t].prop.pid;
this.lblXitongAdd.node.active = e[3] + e[4] >= 0;
this.lblXitongJian.node.active = e[3] + e[4] < 0;
this.lblZongjifenAdd.string = "" + e[4];
this.lblXiAdd.string = "" + e[3];
this.lblXitongAdd.string = "" + (e[3] + e[4]);
this.lblXitongJian.string = "" + (e[3] + e[4]);
this.sprHead.spriteFrame = n.playerHead[t];
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleBill: [ function(e, t) {
"use strict";
cc._RF.push(t, "e80f5vq2fJOCJo2BTVGXAh6", "ModuleBill");
var n = e("Cache");
cc.Class({
extends: cc.Component,
properties: {
nodeScoreZD: cc.Node,
scoreContent: cc.Node,
recordContent: cc.Node,
nodeRecordZD: cc.Node
},
start: function() {
this.showRecordZD();
},
showBill: function() {
this.node.parent = cc.find("Canvas");
},
showScoreZD: function() {
this.nodeScoreZD.active = !0;
this.nodeRecordZD.active = !1;
},
showRecordZD: function() {
this.nodeRecordZD.active = !0;
this.nodeScoreZD.active = !1;
},
exitZD: function() {
n.playSfx();
this.node.removeFromParent(!1);
}
});
cc._RF.pop();
}, {
Cache: "Cache"
} ],
ModuleCalc16: [ function(e, t) {
"use strict";
cc._RF.push(t, "51f88PHCWBId6wE1ATLzrDz", "ModuleCalc16");
var n = [ 33, 0, 1, 2, 3, 4, 5, 6, 7, 8, 0, 9, 10, 11, 12, 13, 14, 15, 16, 17, 0, 18, 19, 20, 21, 22, 23, 24, 25, 26 ], i = cc.Class({
name: "calc",
properties: {},
statics: {
_instance: null,
getInstance: function() {
if (!this._instance) {
this._instance = new i();
this._instance.huLib = e("api");
this._instance.huLib.Init();
}
return this._instance;
}
},
checkHu: function(e) {
i._instance = this;
var t = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
e.forEach(function(e) {
return t[n[e]]++;
});
return this.huLib.getInfo(t);
}
});
t.exports = i;
cc._RF.pop();
}, {
api: "api"
} ],
ModuleCard08: [ function(e, t) {
"use strict";
cc._RF.push(t, "b4c14NHzjxNMILb7hJfuQ71", "ModuleCard08");
cc.Class({
extends: cc.Component,
properties: {
spriteFrame: [ cc.SpriteFrame ],
imgPao: cc.Node,
imgBlin: cc.Node
},
onLoad: function() {},
init: function(e, t, n, i) {
(t ? this.node.getChildByName("2").getComponent(cc.Sprite) : this.node.getComponent(cc.Sprite)).spriteFrame = this.spriteFrame[e];
this.node.value = e;
n && (this.imgPao.active = n);
i && (this.imgBlin.active = i);
}
});
cc._RF.pop();
}, {} ],
ModuleCards07: [ function(e, t) {
"use strict";
cc._RF.push(t, "f749fETKchHdovNJdgbO/Xf", "ModuleCards07");
e("TableInfo");
var n = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
bgCardMask: cc.Node
},
init: function(e) {
this.node.getComponent(cc.Sprite).spriteFrame = n.PorketAtlas.getSpriteFrame("" + e);
this.bgCardMask.active = !1;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
TableInfo: "TableInfo"
} ],
ModuleCards16: [ function(e, t) {
"use strict";
cc._RF.push(t, "63498JVw5NEnrNLpdERxpo+", "ModuleCards16");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
content: cc.Sprite
},
init: function(e, t, i) {
void 0 === t && (t = 1);
void 0 === i && (i = !1);
this.content.spriteFrame = n.cardsSpriteFrame[e];
this.node.height *= t;
this.node.width *= t;
this.content.node.height *= t;
this.content.node.width *= t;
if (this.node.getChildByName("ting")) {
this.node.getChildByName("ting").height *= t;
this.node.getChildByName("ting").width *= t;
}
this.node.getChildByName("lai") && i && (this.node.getChildByName("lai").active = 0 == e);
if (this.node.getChildByName("back")) {
this.node.getChildByName("back").height *= t;
this.node.getChildByName("back").width *= t;
}
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleCards19: [ function(e, t) {
"use strict";
cc._RF.push(t, "4c3c7lY59JG36aZlzBpZD1h", "ModuleCards19");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
content: cc.Sprite
},
init: function(e, t, i) {
void 0 === t && (t = 1);
void 0 === i && (i = !1);
this.content.spriteFrame = n.cardsSpriteFrame[e];
this.node.height *= t;
this.node.width *= t;
this.content.node.height *= t;
this.content.node.width *= t;
if (this.node.getChildByName("ting")) {
this.node.getChildByName("ting").height *= t;
this.node.getChildByName("ting").width *= t;
}
this.node.getChildByName("lai") && i && (this.node.getChildByName("lai").active = 0 == e);
if (this.node.getChildByName("back")) {
this.node.getChildByName("back").height *= t;
this.node.getChildByName("back").width *= t;
}
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleCardsInit_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "d83a5v7bgNLipuI9+AZ/tWp", "ModuleCardsInit_09");
e("TableInfo");
var n = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
bgCardMask: cc.Node
},
init: function(e) {
var t = e + "", i = parseInt(t.slice(1)), a = t.slice(0, 1);
15 == i && 6 != a && 5 != a && (e = parseInt(t.slice(0, 1) + "16"));
"515" == t && (e = 65);
"615" == t && (e = 66);
this.node.getComponent(cc.Sprite).spriteFrame = n.PorketAtlas.getSpriteFrame("" + e);
this.bgCardMask.active = !1;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
TableInfo: "TableInfo"
} ],
ModuleCardsMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "fe6e0w1tbJEUY8oBy0w/RSh", "ModuleCardsMJ");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
content: cc.Sprite
},
init: function(e, t, i) {
void 0 === t && (t = 1);
void 0 === i && (i = !1);
0 == e && (e = 35);
this.content.spriteFrame = n.cardsSpriteFrame[e];
this.node.height *= t;
this.node.width *= t;
this.content.node.height *= t;
this.content.node.width *= t;
if (this.node.getChildByName("ting")) {
this.node.getChildByName("ting").height *= t;
this.node.getChildByName("ting").width *= t;
}
this.node.getChildByName("lai") && i && (this.node.getChildByName("lai").active = 0 == e);
if (this.node.getChildByName("back")) {
this.node.getChildByName("back").height *= t;
this.node.getChildByName("back").width *= t;
}
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleCards_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "87b337JHEZK3oo3NL9GULNX", "ModuleCards_09");
var n = e("Logic_09"), i = e("TableInfo"), a = e("audio-ctrl");
cc.Class({
extends: cc.Component,
properties: {
preCard: cc.Prefab,
nodeCards: [],
PreLblNumbe: cc.Prefab,
nodeLbl: [],
nodeBtn: cc.Node,
btnTips: cc.Node
},
refreshHandCards: function(e) {
var t = this;
this.node.destroyAllChildren();
this.nodeCards = [];
this.nodeLbl = [];
Math.floor(e.length / 2);
e.forEach(function(n, i) {
var a = [];
n.forEach(function(r, o) {
var s = cc.instantiate(t.preCard);
s.getComponent("ModuleCardsInit_09").init(r);
s.parent = t.node;
s._prior = !1;
s._before = !1;
s._value = r;
s.isZhankai = !1;
a.push(s);
s.setPosition(-e.length / 2 * 88 - 44 + 88 * (i + 1), o * (n.length < 4 ? 50 : 12) - 228);
s.pos0 = cc.v2(s.x, s.y);
s.pos1 = cc.v2(s.x, s.y + 35 * o);
s.zIndex = 12 - o + 2 * i;
if (n.length > 3 && o == n.length - 1) {
var c = cc.instantiate(t.PreLblNumbe);
c.zIndex = 12 - o + 2 * i;
c.parent = t.node;
c.scale = .7;
c.setPosition(-e.length / 2 * 88 - 44 + 88 * (i + 1), 12 * o - 228 + 60);
c.getChildByName("lblCount").getComponent(cc.Label).string = e[i].length;
t.nodeLbl.push(c);
}
});
t.nodeCards.push(a);
});
},
touchEvent: function() {
var e = this;
this.node.on("touchstart", function(t) {
e.onTouchBegan(t, "touchstart");
});
this.node.on("touchmove", function(t) {
e.onTouchBegan(t, "touchmove");
});
this.node.on("touchend", function() {
e.nodeCards.forEach(function(e) {
e.forEach(function(e) {
if (null != e.parent) {
var t = e.getChildByName("bgCardMask");
e._prior = t.active;
}
});
});
e.checkCurrent();
});
this.node.on("touchcancel", function() {
e.checkCurrent();
});
},
onTouchBegan: function(e, t) {
i.isWai = !0;
var n = e.target.convertToNodeSpaceAR(e.getLocation());
if (0 != this.nodeCards.length) for (var a = 0; a < this.nodeCards.length; a++) for (var r = 0; r < this.nodeCards[a].length; r++) {
var o = this.nodeCards[a][r];
if (null != this.nodeCards[a][r].parent) {
var s = this.nodeCards[a][r].getBoundingBox();
if (this.nodeCards[a].length < 4 && 0 != r) {
s.y = s.y + 72;
s.height = 50;
}
if (this.nodeCards[a].length > 3 && 0 != r && o.isZhankai) {
s.y = s.y + 77;
s.height = 48;
}
if (s.contains(n)) {
i.isWai = !1;
this.checkStatus(o, a, r, t);
}
}
}
if (i.isWai) {
this.nodeCards.forEach(function(e) {
e.forEach(function(t) {
if (e.length > 3 && null != t.parent) {
t.isZhankai = !1;
t.position = t.pos0;
}
});
});
this.changeNodeOpacity(!0, 2);
}
},
checkStatus: function(e, t, n, r) {
var o = this, s = e.getChildByName("bgCardMask");
null != i.tipResult && i.tipResult.length > 0 && 3 != i.tipResult.length && i.tipResult.forEach(function(e) {
for (var t = 0; t < o.nodeCards.length; t++) for (var n = 0; n < o.nodeCards[t].length; n++) {
var a = o.nodeCards[t][n], r = a.getChildByName("bgCardMask");
if (a._value == e && r.active) {
r.active = !1;
a._prior = !1;
i.tipResult = [];
}
}
});
if (s.active == e._prior) {
var c = cc.url.raw("resources/Audio/Common/cardEffect.mp3"), l = !1;
if (this.nodeCards[t].length < 4) {
if ("touchmove" == r && s.active == this.firstCheck) return;
"touchstart" == r && (this.firstCheck = !s.active);
s.active = !s.active;
a.getInstance().playSFX(c);
this.nodeCards.forEach(function(e) {
e.forEach(function(t) {
if (e.length > 3) {
t.isZhankai = !1;
t.position = t.pos0;
}
});
});
} else this.nodeCards.forEach(function(e, i) {
e.forEach(function(e, u) {
if (i == t) {
l = !0;
if (e.isZhankai) {
if (u == n) {
if ("touchmove" == r && s.active == o.firstCheck) return;
"touchstart" == r && (o.firstCheck = !s.active);
s.active = !s.active;
a.getInstance().playSFX(c);
}
} else {
e.position = e.pos1;
e.isZhankai = !0;
}
} else {
e.position = e.pos0;
e.isZhankai = !1;
}
});
});
this.changeNodeOpacity(!l, 1);
}
},
changeNodeOpacity: function(e) {
this.btnTips.active = this.nodeBtn.active && !e;
this.nodeBtn.children.forEach(function(t) {
t.active = !0;
var n = cc.fadeOut(.1), i = cc.fadeIn(.1);
t.stopAllActions();
var a = cc.sequence(e ? i : n, cc.callFunc(function() {
t.active = e;
}));
t.runAction(a);
});
},
checkCurrent: function() {
i.select = null;
for (var e = [], t = 0; t < this.nodeCards.length; t++) this.nodeCards[t].forEach(function(t) {
null != t.parent && t.getChildByName("bgCardMask").active && e.push(t._value);
});
var a = this.nodeBtn.getChildByName("btnPlayCards").getComponent(cc.Button), r = n.decode(e, i.config.shun);
if (null != r) {
null != i.current && (r = r.filter(function(e) {
return n.compare(i.current, e);
}));
if (r.length > 0 && r.length < 4) {
var o = r[0];
14 != o.card || 2 != o.count || "FEIJI" != o.type && "LIANDUI" != o.type || (r = [ r[0] ]);
}
if (2 == r.length) {
var s = r[0];
13 == s.card && 3 == s.count && "FEIJI" == s.type && (r = [ r[0] ]);
}
a.interactable = r.length > 0;
i.select = r;
} else a.interactable = !1;
}
});
cc._RF.pop();
}, {
Logic_09: "Logic_09",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
ModuleCashPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "0c063SdDIBJEISN1MzNjjBH", "ModuleCashPop");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("../NetWork/Connector"), a = e("../Script/Cache"), r = e("../Script/DataBase"), o = e("../Script/utils");
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
bankBtn: cc.Node,
alipayBtn: cc.Node,
bankContent: cc.Node,
alipayContent: cc.Node,
goldCount: cc.Label,
sumbitType: 0,
cashCount: cc.EditBox,
bankName: cc.EditBox,
bankUser: cc.EditBox,
bankAccount: cc.EditBox,
alipayAccount: cc.EditBox,
alipayUser: cc.EditBox,
codeBtn: cc.Node,
codeMsg: cc.EditBox,
lastClickTime: 0,
codeDownTime: 60,
submitBtn: cc.Node
},
onLoad: function() {
this.addEvents();
this.refreshUI();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.bankBtn.on(cc.Node.EventType.TOUCH_END, this.onClickBank, this);
this.alipayBtn.on(cc.Node.EventType.TOUCH_END, this.onClickAlipay, this);
this.submitBtn.on(cc.Node.EventType.TOUCH_END, this.onClickSubmit, this);
this.codeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickCode, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.bankBtn.off(cc.Node.EventType.TOUCH_END, this.onClickBank, this);
this.alipayBtn.off(cc.Node.EventType.TOUCH_END, this.onClickAlipay, this);
this.submitBtn.off(cc.Node.EventType.TOUCH_END, this.onClickSubmit, this);
this.codeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickCode, this);
},
refreshUI: function() {
this.goldCount.string = "" + r.player.wallet;
},
onClickBank: function() {
this.bankContent.active = !0;
this.alipayContent.active = !1;
},
onClickAlipay: function() {
this.bankContent.active = !1;
this.alipayContent.active = !0;
},
onClickCode: function() {
var e = this;
if (60 == this.codeDownTime) if (o.isNullOrEmpty(r.player.phone)) a.showTipsMsg("未绑定手机号"); else {
this.schedule(function() {
e.codeDownTime--;
if (e.codeDownTime <= 0) {
e.unscheduleAllCallbacks();
e.codeDownTime = 60;
e.codeBtn.getComponent(cc.Button).interactable = !0;
e.codeBtn.getChildByName("downTime").getComponent(cc.Label).string = "重新发送";
} else e.codeBtn.getChildByName("downTime").getComponent(cc.Label).string = e.codeDownTime + "s";
}, 1, 60);
i.request(n.ServerEventName.CashSmsCode, {
phone: r.player.phone
}, function(e) {
e.success && a.showTipsMsg("已发送验证码");
});
}
},
onClickSubmit: function() {
var e = this;
i.cashRequest(n.ServerEventName.GetCash, {
id: r.player.id,
money: "5000",
cash: "50",
sms: "123456",
remarks: "哈哈",
withdrawInfo: {
card: "1234567890",
name: "旺仔",
bank: "支付宝"
}
}, function(t) {
a.showTipsMsg(t.data, function() {
e.onClickClose();
});
});
},
checkMsg: function() {
if (o.isNullOrEmpty(this.cashCount.string)) {
a.showTipsMsg("提现金额不能为空");
return !1;
}
if (!/^[0-9]*$/.test(this.cashCount.string)) {
a.showTipsMsg("提现金额必须为数字！");
return !1;
}
if (parseInt(this.cashCount.string) > parseInt(r.player.wallet)) {
a.showTipsMsg("提现金额不能大于账户余额！");
return !1;
}
if (o.isNullOrEmpty(this.codeMsg.string)) {
a.showTipsMsg("短信验证码不能为空");
return !1;
}
if (!/^[0-9]*$/.test(this.codeMsg.string)) {
a.showTipsMsg("短信验证码必须为数字！");
return !1;
}
return 0 == this.sumbitType ? this.checkBankMsg() : this.checkAlipayMsg();
},
checkBankMsg: function() {
if (o.isNullOrEmpty(this.bankName.string)) {
a.showTipsMsg("银行名字不能为空");
return !1;
}
if (!/^[\u4e00-\u9fa5]+$/.test(this.bankName.string)) {
a.showTipsMsg("银行名字必须为汉字！");
return !1;
}
if (o.isNullOrEmpty(this.bankAccount.string)) {
a.showTipsMsg("银行账户不能为空");
return !1;
}
if (!/^[0-9]*$/.test(this.bankAccount.string)) {
a.showTipsMsg("银行账户必须为数字！");
return !1;
}
if (o.isNullOrEmpty(this.bankUser.string)) {
a.showTipsMsg("银行账户姓名不能为空");
return !1;
}
if (!/^[\u4e00-\u9fa5]+$/.test(this.bankName.string)) {
a.showTipsMsg("银行账户姓名必须为汉字！");
return !1;
}
return !0;
},
checkAlipayMsg: function() {
if (o.isNullOrEmpty(this.alipayAccount.string)) {
a.showTipsMsg("支付宝账户不能为空");
return !1;
}
if (!/^(?:1[3-9]\d{9}|[a-zA-Z\d._-]*\@[a-zA-Z\d.-]{1,10}\.[a-zA-Z\d]{1,20})$/.test(this.alipayAccount.string)) {
a.showTipsMsg("支付宝账号格式不对");
return !1;
}
if (o.isNullOrEmpty(this.alipayUser.string)) {
a.showTipsMsg("支付宝账号姓名不能为空");
return !1;
}
if (!/^[\u4e00-\u9fa5]+$/.test(this.alipayUser.string)) {
a.showTipsMsg("支付宝账户姓名必须为汉字！");
return !1;
}
return !0;
},
onClickClose: function() {
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/utils": "utils"
} ],
ModuleChangePop: [ function(e, t) {
"use strict";
cc._RF.push(t, "81b035hKBVG+6QYCbOmmQQt", "ModuleChangePop");
var n = e("../NetWork/Connector"), i = e("../Script/Cache"), a = e("../Script/DataBase"), r = e("../Script/utils"), o = e("../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
codeBtn: cc.Node,
ensureBtn: cc.Node,
newPwdInput: cc.EditBox,
ensurePwdInput: cc.EditBox,
oldPhone: cc.Label,
newPhone: cc.EditBox,
codeInput: cc.EditBox,
changeType: "",
codeDownTime: 60,
callBack: null
},
onLoad: function() {
this.addEvents();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.codeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickCode, this);
this.ensureBtn.on(cc.Node.EventType.TOUCH_END, this.onClickEnsure, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.codeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickCode, this);
this.ensureBtn.off(cc.Node.EventType.TOUCH_END, this.onClickEnsure, this);
},
refreshUIData: function(e, t) {
this.callBack = t;
this.changeType = e;
switch (e) {
case "pwd":
this.newPwdInput.node.active = !0;
this.ensurePwdInput.node.active = !0;
this.oldPhone.node.active = !1;
this.newPhone.node.active = !1;
this.codeInput.node.active = !1;
break;

case "phone":
this.newPwdInput.node.active = !1;
this.ensurePwdInput.node.active = !1;
this.oldPhone.node.active = !0;
this.newPhone.node.active = !0;
this.codeInput.node.active = !0;
this.oldPhone.string = a.player.hasBind ? "旧手机号:  " + a.player.phone : "旧手机号:  未绑定手机";
}
},
onClickCode: function() {
var e = this;
i.playSfx();
if (60 == this.codeDownTime) {
var t = "";
switch (this.changeType) {
case "pwd":
if (!a.player.hasBind) {
i.alertTip("请先绑定手机号");
return;
}
if (r.isNullOrEmpty(this.newPwdInput.string)) {
i.alertTip("请输入新密码");
return;
}
if (r.isNullOrEmpty(this.ensurePwdInput.string)) {
i.alertTip("请重复密码");
return;
}
if (this.ensurePwdInput.string != this.newPwdInput.string) {
i.alertTip("密码不一致");
return;
}
t = a.player.phone;
break;

case "phone":
if (!r.checkPhone(this.newPhone.string)) {
i.alertTip("手机号码格式有误");
return;
}
t = this.newPhone.string;
}
this.schedule(function() {
e.codeDownTime--;
if (e.codeDownTime <= 0) {
e.unscheduleAllCallbacks();
e.codeDownTime = 60;
e.codeBtn.getComponent(cc.Button).interactable = !0;
e.codeBtn.getChildByName("word").getComponent(cc.Label).string = "重新发送";
} else e.codeBtn.getChildByName("word").getComponent(cc.Label).string = e.codeDownTime + "s";
}, 1, 60);
n.request(o.ServerEventName.SendCode, {
phone: t
}, function(e) {
e.success && i.alertTip("已发送验证码");
});
}
},
onClickEnsure: function() {
var e = this;
i.playSfx();
switch (this.changeType) {
case "pwd":
if (!a.player.hasBind) {
i.alertTip("请先绑定手机号");
return;
}
if (r.isNullOrEmpty(this.newPwdInput.string)) {
i.alertTip("请输入新密码");
return;
}
if (this.newPwdInput.string.length < 6 || this.newPwdInput.string.length > 16) {
i.alertTip("密码长度为6至16位");
return;
}
if (!/^[\u4e00-\u9fa5_a-zA-Z0-9]+$/.test(this.newPwdInput.string)) {
i.alertTip("密码不能含有特殊符号和空格");
return;
}
if (r.isNullOrEmpty(this.ensurePwdInput.string)) {
i.alertTip("请重复密码");
return;
}
if (this.ensurePwdInput.string != this.newPwdInput.string) {
i.alertTip("密码不一致");
return;
}
var t = r.encryptToken(this.newPwdInput.string);
n.request(o.ServerEventName.ChangePassword, {
password: t
}, function() {
i.alertTip("修改成功");
r.dispatchAllEvent(e.node, o.GameEventNames.PLAYER_DATA_UPDATE);
e.scheduleOnce(function() {
e.callBack && e.callBack();
e.onClickClose();
}, .8);
}, null, function(e) {
i.showTipsMsg(r.isNullOrEmpty(e.message) ? "修改失败" : e.message);
});
break;

case "phone":
if (r.isNullOrEmpty(this.codeInput.string)) {
i.alertTip("请输入验证码");
return;
}
n.request(o.ServerEventName.BindPhone, {
phone: this.newPhone.string,
code: this.codeInput.string
}, function() {
i.alertTip("修改成功");
r.dispatchAllEvent(e.node, o.GameEventNames.PLAYER_DATA_UPDATE);
e.scheduleOnce(function() {
e.callBack && e.callBack();
e.onClickClose();
}, .8);
}, null, function(e) {
i.showTipsMsg(r.isNullOrEmpty(e.message) ? "修改失败" : e.message);
});
}
},
onClickClose: function() {
i.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/utils": "utils"
} ],
ModuleChat: [ function(e, t) {
"use strict";
cc._RF.push(t, "df962Q9ZWFBDba38jdvJvAC", "ModuleChat");
var n = e("TableInfo"), i = e("../../Main/Script/Cache"), a = e("ROUTE"), r = e("Connector"), o = e("DataBase"), s = e("../GameConfig").GameConfig, c = [ cc.v2(-502, -200), cc.v2(502, 255), cc.v2(-502, 255) ];
cc.Class({
extends: cc.Component,
properties: {
preChatWordItem: cc.Prefab,
layoutWordContent: cc.Layout,
nodeFace: cc.Prefab,
nodeMsg: cc.Prefab,
preChatContent: cc.Prefab,
lastTime: 0,
audioClips: {
type: cc.AudioClip,
default: []
},
clipsPre: cc.Prefab,
spineAnimArr: [ sp.SkeletonData ],
wordContent: cc.Node,
faceContent: cc.Node,
bgNode: cc.Node,
clipSprArr: [ cc.SpriteFrame ]
},
onLoad: function() {},
showChat: function() {
if (this.checkDurationTime()) this.pleaseWaite(); else {
try {
cc.find("Canvas").addChild(this.node);
} catch (e) {}
this.showPopAnim();
}
},
playChatAudio: function(t) {
if (cc.sys.isNative) {
var n = o.gameType < 10 ? "Game0" + o.gameType : "Game" + o.gameType, i = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + n + "/" + t;
cc.loader.load(i, function(t, n) {
e("audio-ctrl").getInstance().playSFX(n);
});
}
},
init: function(e) {
var t = this;
this.str = e.str;
c = e.aniPos;
this.facePos = e.facePos;
this.msgPos = e.msgPos;
this.faceAnchor = e.faceAnchor;
this.layoutWordContent.node.destroyAllChildren();
this.str.forEach(function(e, n) {
var o = cc.instantiate(t.preChatWordItem);
o.parent = t.layoutWordContent.node;
o.getChildByName("word").x = 0;
o.getChildByName("word").getComponent(cc.Label).string = e;
o.on("touchend", function() {
var e = n < 10 ? "0" + n : n;
i.playSfx();
t.storageCurrentTime();
r.gameMessage(a.CS_GAME_CHAT, {
messageType: 1,
content: e
});
t.hide();
});
});
},
exitChat: function() {
i.playSfx();
this.node.removeFromParent(!1);
},
systemNotice: function(e) {
var t = cc.instantiate(this.preChatContent);
t.parent = cc.find("Canvas");
t.setPosition(900, 100);
var n = t.getChildByName("lblContent");
n.getComponent(cc.Label).string = "系统消息:" + e;
n.color = cc.color(255, 255, 0);
t.runAction(cc.sequence(cc.moveTo(4.5, -900, 100), cc.removeSelf()));
},
contentFly: function(e) {
var t = n.realIdx[e.idx], a = n.players[e.idx].prop.name, r = cc.instantiate(this.preChatContent);
r.parent = cc.find("Canvas");
var o = 400 * Math.random() - 200;
r.setPosition(900, o);
var l = r.getChildByName("lblContent").getComponent(cc.Label);
switch (e.messageType) {
case 0:
var u = cc.instantiate(this.nodeFace);
u.parent = cc.find("Canvas");
u.getComponent("ModuleNodeFace").init(t, e.content, this.facePos, this.faceAnchor);
break;

case 1:
this.playChatAudio("male_chat_" + e.content + ".mp3");
var d = cc.instantiate(this.nodeMsg);
d.parent = cc.find("Canvas");
if (1 == t && -1 == s.CurrentGameType.indexOf(s.GameType.LDZP)) {
d.scaleX = -1;
d.getChildByName("word").scaleX = -1;
d.getChildByName("word").anchorX = .5;
}
d.position = this.msgPos[t];
d.getChildByName("word").getComponent(cc.Label).string = " " + this.str[parseInt(e.content)] + " ";
d.runAction(cc.sequence(cc.delayTime(3), cc.fadeOut(1), cc.removeSelf()));
break;

case 2:
l.string = a + ":  " + e.content;
r.runAction(cc.sequence(cc.moveTo(4.5, -900, o), cc.removeSelf()));
break;

case 4:
var h = cc.instantiate(this.clipsPre), f = h.getComponent(cc.Animation);
f.on("finished", function() {
setTimeout(function() {
h.destroy();
r.destroy();
}, 500);
}, this);
f.playOnLoad = !0;
cc.find("Canvas").addChild(h);
var p = c[n.realIdx[e.idx]], m = c[n.realIdx[e.target]];
switch (e.content) {
case "1":
h.scale = 2;
break;

case "0":
h.scale = 3;
}
h.getComponent(cc.Sprite).spriteFrame = this.clipSprArr[parseInt(e.content)];
h.position = p;
h.runAction(cc.sequence(cc.moveTo(.8, m).easing(cc.easeSineInOut()), cc.callFunc(function() {
i.playAnimSound(e.content);
f.play(f.getClips()[parseInt(e.content)].name);
})));
}
},
hide: function() {
this.node.removeFromParent(!1);
},
sendChatContentFace: function(e, t) {
i.playSfx();
if (this.checkDurationTime()) this.pleaseWaite(); else {
r.gameMessage(a.CS_GAME_CHAT, {
messageType: 0,
content: parseInt(t)
});
this.hide();
this.storageCurrentTime();
}
},
sendChatContentWord: function(e, t) {
r.gameMessage(a.CS_GAME_CHAT, {
messageType: 1,
content: parseInt(t)
});
this.storageCurrentTime();
this.hide();
},
sendAnimation: function(e, t) {
cc.log("sendAnimation");
if (this.checkDurationTime()) this.pleaseWaite(); else {
r.gameMessage(a.CS_GAME_CHAT, {
messageType: 4,
content: e,
target: t
});
this.storageCurrentTime();
}
},
checkDurationTime: function() {
var e = new Date().getTime();
cc.log("currentTime", e);
cc.log("lastTime", this.lastTime);
return e - this.lastTime < 3e3;
},
storageCurrentTime: function() {
var e = new Date();
cc.log("storageCurrentTime", e.getTime());
this.lastTime = e.getTime();
},
pleaseWaite: function() {
i.alertTip("发言间隔需要3秒");
},
calcAngel: function(e, t) {
var n = 0, i = t.y - e.y, a = t.x - e.x;
if (a > .02 && a < .02) return n;
var r = Math.atan2(i, a);
return 180 / Math.PI * r;
},
showWordContent: function() {
this.wordContent.active = !0;
this.faceContent.active = !1;
},
showFaceContent: function() {
this.wordContent.active = !1;
this.faceContent.active = !0;
},
showPopAnim: function() {
this.bgNode.stopAllActions();
var e = cc.find("Canvas");
this.bgNode.x = e.width / 2 + this.bgNode.width / 2 + 200;
var t = cc.moveTo(.5, cc.v2(e.width / 2 - this.bgNode.width / 2, this.bgNode.y)).easing(cc.easeBackInOut());
this.bgNode.runAction(t);
}
});
cc._RF.pop();
}, {
"../../Main/Script/Cache": "Cache",
"../GameConfig": "GameConfig",
Connector: "Connector",
DataBase: "DataBase",
ROUTE: "ROUTE",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
ModuleChiBoxZp: [ function(e, t) {
"use strict";
cc._RF.push(t, "98c0cr1Ai9LvqquqYSc3EZ/", "ModuleChiBoxZp");
var n = e("../../Main/NetWork/Connector"), i = e("../../Main/Script/ROUTE"), a = e("../../Main/Script/TableInfo");
cc.Class({
extends: cc.Component,
properties: {
content: cc.Node,
group: cc.Prefab
},
init: function(e) {
var t = this;
e.options.forEach(function(n) {
var i = cc.instantiate(t.group);
i.parent = t.content;
var a = {
type: "chi",
cards: n.cards,
idx: e.idx,
xi: 0,
card: null
};
i.getComponent("BaseGroupZP").init(a, {
click: !1,
bg: !0
});
t.node.width += i.width;
});
this.node.on(cc.Node.EventType.TOUCH_END, function() {
n.gameMessage(i.CS_ANSWER, {
serialID: a.serialID,
answer: e.idx,
card: a.currentCard
});
t.node.parent.parent.active = !1;
}, this);
}
});
cc._RF.pop();
}, {
"../../Main/NetWork/Connector": "Connector",
"../../Main/Script/ROUTE": "ROUTE",
"../../Main/Script/TableInfo": "TableInfo"
} ],
ModuleClock: [ function(e, t) {
"use strict";
cc._RF.push(t, "a8dcf0TuzZB8IlSd5XW7DIl", "ModuleClock");
var n = e("../../Main/Script/TableInfo");
cc.Class({
extends: cc.Component,
properties: {
timeLabel: cc.Label
},
clockScheduler: function(e) {
var t = this;
this.timeLabel.unscheduleAllCallbacks();
var i = Math.max(n.options.clock - e, 0);
this.timeLabel.string = i;
this.timeLabel.schedule(function() {
i--;
t.timeLabel.string = Math.max(i, 0);
if (i <= 5) {
var e = cc.rotateTo(.1, 15), n = cc.rotateTo(.1, -15), a = cc.rotateTo(.1, 0), r = cc.scaleTo(.1, 1.2), o = cc.scaleTo(.1, 1), s = cc.sequence(r, o, r, o), c = cc.sequence(e, n, e, n, a);
t.node.runAction(cc.spawn(s, c));
}
}, 1, 19);
}
});
cc._RF.pop();
}, {
"../../Main/Script/TableInfo": "TableInfo"
} ],
ModuleClubItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "cd3035bUzhFVqnDwedEXn39", "ModuleClubItem");
var n = e("../Script/DataBase"), i = e("../NetWork/Connector"), a = e("../Script/utils"), r = e("../../GameBase/GameConfig").GameConfig, o = e("../Script/Cache");
cc.Class({
extends: cc.Component,
properties: {
bgSfArr: [ cc.SpriteFrame ],
levelSfArr: [ cc.SpriteFrame ],
playerNum: cc.Label,
bet: cc.Label,
ruleScore: cc.Label,
level: cc.Sprite,
itemData: null
},
onLoad: function() {
this.node.on(cc.Node.EventType.TOUCH_END, this.onClickItem, this);
},
onDestroy: function() {
this.node.off(cc.Node.EventType.TOUCH_END, this.onClickItem, this);
},
onClickItem: function() {
var e = this;
a.getValue(r.StorageKey.ShowAutoTips, {
PDK_SOLO: !0,
XHZP_SOLO: !0,
LDZP_SOLO: !0,
PDK: !0,
XHZP: !0,
XHZD: !0,
LDZP: !0
})[this.itemData.gameType] ? a.pop(r.pop.AutoTipsPop, function(t) {
t.getComponent("ModuleAutoTipsPop").show(r.GameAutoTips[e.itemData.gameType], e.itemData.gameType, function() {
e.enterRoom();
});
}) : this.enterRoom();
},
enterRoom: function() {
var e = this.itemData;
if (-1 != e.gameType.indexOf(r.GameType.XHZD)) {
var t = new Date().getTime();
if (!(t - r.LastSocketTime < 2e3)) {
r.LastSocketTime = t;
if (n.player.wallet < e.lower) o.alertTip("积分不足"); else if (r.IsConnecting) o.alertTip("正在进入房间"); else {
r.IsConnecting = !0;
i.request(r.ServerEventName.JoinClubGame, {
roomID: e.id,
gameType: e.gameType
}, function(t) {
a.saveValue(r.StorageKey.LastRoomId, e.id);
a.saveValue(r.StorageKey.LastGameType, e.gameType);
a.saveValue(r.StorageKey.LastRoomType, e.level);
a.saveValue(r.StorageKey.LastRoomBase, e.name);
i.connect(t, function() {
r.IsConnecting = !1;
r.CurrentGameType = t.connectInfo.gameType;
n.setGameType(n.GAME_TYPE[t.connectInfo.gameType]);
cc.director.loadScene(n.TABLE_TYPE[t.connectInfo.gameType]);
});
});
}
}
} else a.pop(r.pop.TablePop, function(t) {
t.getComponent("ModuleTablePop").initData(e);
});
},
initData: function(e) {
this.itemData = e;
this.node.getComponent(cc.Sprite).spriteFrame = this.bgSfArr[Math.min(e.level, 3)];
this.playerNum.string = e.players;
this.bet.string = "" + a.formatGold(e.base);
this.ruleScore.string = "最低: " + a.formatGold(e.lower);
this.level.spriteFrame = this.levelSfArr[e.level];
},
showPopAnim: function() {
this.node.x = 800;
var e = cc.moveTo(1, cc.v2(-800, this.node.y)).easing(cc.easeBackInOut());
this.node.runAction(e);
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/utils": "utils"
} ],
ModuleClubPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "af675Kz9thMZZzQm/v0Mn0I", "ModuleClubPop");
var n = e("../NetWork/Connector"), i = e("../Script/Cache"), a = e("../Script/DataBase"), r = e("../Script/utils"), o = (e("SceneLogin"), 
e("../../GameBase/GameConfig").GameConfig);
e("../Script/audio-ctrl");
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
roomItem: cc.Prefab,
itemContainer: cc.Node,
toggleContainer: cc.Node,
modelContainer: cc.Node,
normalModel: cc.Toggle,
title: cc.Sprite,
qinyou: cc.SpriteFrame,
dlm: cc.SpriteFrame,
currentModel: "_SOLO"
},
onLoad: function() {
this.roomData = new Object();
this.addEvents();
this.refreshUI();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
},
refreshUI: function() {
var e = r.getValue(o.StorageKey.LastGameType, "PDK").split("_");
this.currentModel = e.length > 1 ? "_SOLO" : "";
o.CurrentGameType = e[0];
this.toggleContainer.getChildByName("" + o.CurrentGameType).getComponent(cc.Toggle).check();
this.title.spriteFrame = o.IsLeague ? this.dlm : this.qinyou;
this.toggleContainer.width = 193.3 + 2 * o.FitScreen;
e.length < 2 && this.normalModel.check();
o.CurrentGameType == o.GameType.XHZD ? this.modelContainer.active = !1 : this.modelContainer.active = !0;
this.loadRoomData();
},
onSelectGame: function(e, t) {
if (o.CurrentGameType != t) {
o.CurrentGameType = t;
t == o.GameType.XHZD ? this.modelContainer.active = !1 : this.modelContainer.active = !0;
r.isNullOrEmpty(this.roomData[o.CurrentGameType + this.currentModel]) ? this.loadRoomData() : this.addRooms(this.roomData[o.CurrentGameType + this.currentModel]);
}
},
loadRoomData: function() {
var e = this, t = o.CurrentGameType == o.GameType.XHZD ? o.CurrentGameType : o.CurrentGameType + this.currentModel;
n.request(o.ServerEventName.GetGameType, {
proxyID: a.player.proxyID,
isLeague: o.IsLeague,
gameType: t
}, function(t) {
e.addRooms(t.rooms);
e.roomData[o.CurrentGameType + e.currentModel] = t.rooms;
});
},
addRooms: function(e) {
var t = this;
this.itemContainer.children.forEach(function(e) {
var t = cc.fadeOut(.2), n = cc.callFunc(function() {
e.removeFromParent();
});
e.runAction(cc.sequence(t, n));
});
e && 0 != e.length && e.forEach(function(e, n) {
var i = cc.instantiate(t.roomItem);
i.getComponent("ModuleClubItem").initData(e);
t.itemContainer.addChild(i);
i.scale = 0;
var a = cc.scaleTo(.3, 1).easing(cc.easeBackOut()), r = cc.sequence(cc.delayTime(.2 * n), a);
i.runAction(r);
});
},
showAutoTips: function() {
i.playSfx();
r.pop(o.pop.AutoTipsPop, function(e) {
e.getComponent("ModuleAutoTipsPop").show(o.GameAutoTips[o.CurrentGameType]);
});
},
selectModel: function(e, t) {
r.isNullOrEmpty(t) && (t = "");
if (this.currentModel != t) {
this.currentModel = t;
r.isNullOrEmpty(this.roomData[o.CurrentGameType + this.currentModel]) ? this.loadRoomData() : this.addRooms(this.roomData[o.CurrentGameType + this.currentModel]);
}
},
onClickClose: function() {
i.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/audio-ctrl": "audio-ctrl",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleDeal_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "ea903UKtx9FaqNbHJ8Q4NFi", "ModuleDeal_09");
var n = e("TableInfo"), i = e("ROUTE"), a = e("Connector"), r = e("audio-ctrl"), o = e("../../../GameBase/GameConfig").GameConfig, s = [ cc.v2(0, -298), cc.v2(430, 66), cc.v2(0, 209), cc.v2(-430, 66) ], c = (cc.v2(-522, -290), 
cc.v2(532, 106), cc.v2(-178, 244), cc.v2(-522, 107), cc.v2(0, 66)), l = [ cc.v2(-400, 66), cc.v2(408, 66) ];
cc.Class({
extends: cc.Component,
properties: {
prePlayerInfo: cc.Prefab,
preCards: cc.Prefab,
prefBack: cc.Prefab,
sliderDeal: cc.Slider,
imgBackground: cc.Sprite,
bgMask: cc.Layout,
btnCut: cc.Node,
canvas: cc.Node,
sliderHand: cc.Slider,
bgCutMask: cc.Layout,
bgWaitCut: cc.Layout,
nodeHand: cc.Node,
nodeCut: cc.Node,
btnTips: cc.Node,
btnPlay: cc.Node,
btnPass: cc.Node,
nodeBtn: cc.Node,
bgTable: cc.Layout,
nodeShowCard: []
},
onLoad: function() {
var e = this;
this.nodeCut.active = !0;
this.sliderDeal.node.on("touchend", function() {
cc.log(e.sliderDeal.progress);
a.gameMessage(i.CS_PROGRESS, {
percent: e.sliderDeal.progress
});
});
this.sliderHand.node.on("touchend", function() {
cc.log(e.sliderHand.progress);
a.gameMessage(i.CS_PROGRESS, {
percent: e.sliderHand.progress
});
});
this.nodeHand.on("touchend", function() {
cc.log(e.sliderHand.progress);
a.gameMessage(i.CS_PROGRESS, {
percent: e.sliderHand.progress
});
});
this.nodeHand.on("touchcancel", function() {
cc.log(e.sliderHand.progress);
a.gameMessage(i.CS_PROGRESS, {
percent: e.sliderHand.progress
});
});
this.sliderHand.node.on("touchcancel", function() {
cc.log(e.sliderHand.progress);
a.gameMessage(i.CS_PROGRESS, {
percent: e.sliderHand.progress
});
});
this.sliderDeal.node.on("touchcancel", function() {
cc.log(e.sliderDeal.progress);
a.gameMessage(i.CS_PROGRESS, {
percent: e.sliderDeal.progress
});
});
},
sendCut: function() {
a.gameMessage(i.CS_CUTE, {});
},
sliderCallBack: function() {
var e = this.sliderDeal.getComponent(cc.Slider), t = this.sliderHand.getComponent(cc.Slider);
this.imgBackground.fillRange = e.progress;
t.progress = e.progress;
this.progress = e.progress;
},
sliderHandCallBack: function() {
var e = this.sliderHand.getComponent(cc.Slider), t = this.sliderDeal.getComponent(cc.Slider);
t.progress = e.progress;
this.imgBackground.fillRange = t.progress;
this.progress = t.progress;
},
showDeal: function() {
this.nodeCut.active = !0;
this.btnCut.active = n.cuter == n.idx;
this.bgCutMask.node.zIndex = 1e3;
this.sliderHand.progress = .5;
this.imgBackground.fillRange = this.sliderHand.progress;
this.nodeShowCard = [];
this.sliderDeal.progress = .5;
this.sliderDeal.node.zIndex = 101;
for (var e = 0; e < 108; e++) {
var t = cc.instantiate(this.prefBack);
t.parent = this.node;
t.setPosition(8 * e - 400, 66);
this.imgBackground.node.active = !0;
this.sliderDeal.node.active = !0;
this.sliderHand.node.active = !0;
if (n.cuter != n.idx) {
this.bgCutMask.node.active = !0;
this.bgWaitCut.node.active = !0;
var i = this.bgWaitCut.node.getChildByName("lblWait").getComponent(cc.Label), a = n.players[n.cuter].prop.name;
i.string = "请等待 " + a + " 切牌";
}
this.nodeShowCard.push(t);
}
},
cutHandMove: function(e) {
if (n.cuter != n.idx) {
this.sliderDeal.progress = e;
this.imgBackground.fillRange = e;
this.sliderHand.progress = e;
}
},
cut: function(e) {
var t = [], i = [];
this.btnPlay.active = !1;
this.btnTips.active = !1;
this.bgCutMask.node.active = !1;
this.bgWaitCut.node.active = !1;
this.bgMask.node.active = !1;
this.sliderDeal.node.active = !1;
this.sliderHand.node.active = !1;
this.btnCut.active = !1;
var a, u = this.sliderDeal.getComponent(cc.Slider);
t.push(cc.delayTime(1));
var d, h = [], f = 8 * Math.floor(100 * u.progress) - 400;
(a = cc.instantiate(this.preCards)).parent = this.canvas;
a.getComponent("ModuleCardsInit_09").init(e.showCard);
a.setPosition(f, 66);
h.push(cc.targetedAction(a, cc.sequence(cc.place(c), cc.delayTime(1.2), cc.hide())));
d = Math.random();
var p = cc.url.raw("resources/Audio/Common/deal07.mp3");
this.nodeShowCard.forEach(function(e, t) {
h.push(cc.targetedAction(e, cc.sequence(cc.moveTo(.5, l[t < 50 ? 0 : 1]), cc.delayTime(.2), cc.moveTo(.4, c))));
});
t.push(cc.spawn(h));
var m = [];
this.nodeShowCard.forEach(function(e, t) {
m.push(cc.targetedAction(e, cc.sequence(cc.delayTime(.02 * t % 4), cc.spawn(cc.rotateBy(.3, 90), cc.scaleTo(.3, .6), cc.moveTo(.6, s[t % 4]), cc.callFunc(function() {
t % 9 == 0 && r.getInstance().playSFX(p);
}), cc.sequence(cc.delayTime(.4), cc.fadeOut(.2))), cc.callFunc(function() {
this.destroy();
}, e))));
});
var g = [ cc.v2(-cc.winSize.width / 2 + 69.5 + o.FitScreen, -210), cc.v2(cc.winSize.width / 2 - 69.5 - o.FitScreen, 65), cc.v2(-168, 250), cc.v2(-cc.winSize.width / 2 + 69.5 + o.FitScreen, 65) ];
m.push(cc.targetedAction(a, cc.sequence(cc.delayTime(2 * d), cc.show(), cc.moveTo(.4, g[n.realIdx[e.currentIDX]]), cc.delayTime(1), cc.callFunc(function() {
this.destroy();
}, a))));
var v = cc.find("Canvas/nodeTable/nodehands/layerHandCards").getComponent("ModuleCards_09"), C = [ cc.delayTime(.05), cc.delayTime(.05) ];
v.nodeLbl.length > 0 && v.nodeLbl.forEach(function(e, t) {
e.active = !0;
e && (e.opacity = 0);
C.push(cc.targetedAction(e, cc.sequence(cc.delayTime(2 + .2 * t), cc.fadeIn(.4))));
});
var b = [ cc.delayTime(.2) ];
v.nodeCards.forEach(function(e) {
e.forEach(function(e, t) {
e.active = !0;
e && (e.opacity = 0);
b.push(cc.targetedAction(e, cc.sequence(cc.delayTime(t / 3), cc.fadeIn(.5))));
});
});
i.push(cc.spawn(m));
i.push(cc.spawn(C));
i.push(cc.spawn(b));
t.push(cc.spawn(i));
t.push(cc.delayTime(1));
this.node.runAction(cc.sequence(t));
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
Connector: "Connector",
ROUTE: "ROUTE",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
ModuleDistanceMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "0490fzpO4pDyanrEuyeUYoy", "ModuleDistanceMJ");
var n = e("../../../Main/Script/Cache"), i = e("../../../Main/Script/TableInfo"), a = e("../../../Main/Script/utils");
cc.Class({
extends: cc.Component,
properties: {
lblDistance: [ cc.Label ],
userName: [ cc.Label ],
avatar: [ e("../common/Avatar") ],
unknowPos: [ cc.Node ],
lblIp: [ cc.Label ]
},
onLoad: function() {
this.clearInfo();
this.updateInfo();
},
clearInfo: function() {
this.lblDistance.forEach(function(e) {
e.string = "";
});
this.lblIp.forEach(function(e) {
e.string = "";
});
},
updateInfo: function() {
var e = this, t = [ null, null, null, null ], n = [ null, null, null, null ];
if (!a.isNullOrEmpty(i.players)) {
i.players.forEach(function(e) {
if (!a.isNullOrEmpty(e)) {
t[i.realIdx[e.idx]] = e;
n[i.realIdx[e.idx]] = e.ip;
}
});
n[0] == n[1] && null != n[0] && null != n[1] ? this.lblIp[0].string = "ip相同" : this.lblIp[0].string = "";
n[0] == n[2] && null != n[0] && null != n[2] ? this.lblIp[1].string = "ip相同" : this.lblIp[1].string = "";
n[0] == n[3] && null != n[0] && null != n[3] ? this.lblIp[2].string = "ip相同" : this.lblIp[2].string = "";
n[1] == n[2] && null != n[1] && null != n[2] ? this.lblIp[3].string = "ip相同" : this.lblIp[3].string = "";
n[1] == n[3] && null != n[1] && null != n[3] ? this.lblIp[4].string = "ip相同" : this.lblIp[4].string = "";
n[2] == n[3] && null != n[2] && null != n[3] ? this.lblIp[5].string = "ip相同" : this.lblIp[5].string = "";
t.forEach(function(t, n) {
if (a.isNullOrEmpty(t)) e.userName[n].string = ""; else {
0 == t.location.lat && 0 == t.location.long && (e.unknowPos[n].active = !0);
e.userName[n].string = a.getStringByLength(t.prop.name, 6);
e.avatar[n].avatarUrl = t.prop.head;
}
});
if (this.checkPlayer(t[0]) && this.checkPlayer(t[1])) {
var r = a.judgeDistance(t[0].location, t[1].location, 500);
this.lblDistance[0].node.color = r ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[0].string = a.getDistance(t[0].location, t[1].location);
} else {
this.lblDistance[0].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[0].string = "";
}
if (this.checkPlayer(t[0]) && this.checkPlayer(t[2])) {
var o = a.judgeDistance(t[0].location, t[2].location, 500);
this.lblDistance[1].node.color = o ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[1].string = a.getDistance(t[0].location, t[2].location);
} else {
this.lblDistance[1].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[1].string = "";
}
if (this.checkPlayer(t[0]) && this.checkPlayer(t[3])) {
var s = a.judgeDistance(t[0].location, t[3].location, 500);
this.lblDistance[2].node.color = s ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[2].string = a.getDistance(t[0].location, t[3].location);
} else {
this.lblDistance[2].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[2].string = "";
}
if (this.checkPlayer(t[1]) && this.checkPlayer(t[2])) {
var c = a.judgeDistance(t[1].location, t[2].location, 500);
this.lblDistance[3].node.color = c ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[3].string = a.getDistance(t[1].location, t[2].location);
} else {
this.lblDistance[3].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[3].string = "";
}
if (this.checkPlayer(t[1]) && this.checkPlayer(t[3])) {
var l = a.judgeDistance(t[1].location, t[3].location, 500);
this.lblDistance[4].node.color = l ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[4].string = a.getDistance(t[1].location, t[3].location);
} else {
this.lblDistance[4].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[4].string = "";
}
if (this.checkPlayer(t[2]) && this.checkPlayer(t[3])) {
var u = a.judgeDistance(t[2].location, t[3].location, 500);
this.lblDistance[5].node.color = u ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[5].string = a.getDistance(t[2].location, t[3].location);
} else {
this.lblDistance[5].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[5].string = "";
}
}
},
checkPlayer: function(e) {
return null != e && null != e.prop && null != e.location && 0 != e.location.lat && 0 != e.location.long;
},
onClickClose: function() {
n.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../common/Avatar": "Avatar"
} ],
ModuleDistance: [ function(e, t) {
"use strict";
cc._RF.push(t, "194911+GqRPI7okrKS2hdL8", "ModuleDistance");
var n = e("./Cache"), i = e("./TableInfo"), a = e("./utils");
cc.Class({
extends: cc.Component,
properties: {
lblDistance: [ cc.Label ],
userName: [ cc.Label ],
avatar: [ cc.Sprite ],
unknowPos: [ cc.Node ],
lblIp: [ cc.Label ]
},
onLoad: function() {
this.clearInfo();
this.updateInfo();
},
clearInfo: function() {
this.lblDistance.forEach(function(e) {
e.string = "";
});
this.lblIp.forEach(function(e) {
e.string = "";
});
},
updateInfo: function() {
var e = this, t = [ null, null, null, null ], n = [ null, null, null, null ];
if (!a.isNullOrEmpty(i.players)) {
i.players.forEach(function(e) {
if (!a.isNullOrEmpty(e.prop)) {
t[i.realIdx[e.idx]] = e;
n[i.realIdx[e.idx]] = e.prop.ip;
}
});
n[0] == n[1] && null != n[0] && null != n[1] ? this.lblIp[0].string = "ip相同" : this.lblIp[0].string = "";
n[0] == n[2] && null != n[0] && null != n[2] ? this.lblIp[1].string = "ip相同" : this.lblIp[1].string = "";
n[0] == n[3] && null != n[0] && null != n[3] ? this.lblIp[2].string = "ip相同" : this.lblIp[2].string = "";
n[1] == n[2] && null != n[1] && null != n[2] ? this.lblIp[3].string = "ip相同" : this.lblIp[3].string = "";
n[1] == n[3] && null != n[1] && null != n[3] ? this.lblIp[4].string = "ip相同" : this.lblIp[4].string = "";
n[2] == n[3] && null != n[2] && null != n[3] ? this.lblIp[5].string = "ip相同" : this.lblIp[5].string = "";
console.log("GPS---", t);
t.forEach(function(t, n) {
if (a.isNullOrEmpty(t) || a.isNullOrEmpty(t.prop)) e.userName[n].string = ""; else if (0 != i.turn || t.idx == i.idx) {
console.log("GPS--1-", t);
0 == t.location.lat && 0 == t.location.long && (e.unknowPos[n].active = !0);
if ("CUSTOM" == i.options.mode) {
e.userName[n].string = a.getStringByLength(t.prop.name, 6);
var r = e.avatar[n];
a.setHead(r, t.prop.head);
} else {
e.userName[n].string = t.idx != i.idx ? "玩家" + (t.idx + 1) : a.getStringByLength(t.prop.name, 6);
if (t.idx == i.idx) {
var o = e.avatar[n];
a.setHead(o, t.prop.head);
}
}
} else e.userName[n].string = "未知";
});
if (this.checkPlayer(t[0]) && this.checkPlayer(t[1])) {
var r = a.judgeDistance(t[0].location, t[1].location, 500);
this.lblDistance[0].node.color = r ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[0].string = a.getDistance(t[0].location, t[1].location);
} else {
this.lblDistance[0].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[0].string = "";
}
if (this.checkPlayer(t[0]) && this.checkPlayer(t[2])) {
var o = a.judgeDistance(t[0].location, t[2].location, 500);
this.lblDistance[1].node.color = o ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[1].string = a.getDistance(t[0].location, t[2].location);
} else {
this.lblDistance[1].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[1].string = "";
}
if (this.checkPlayer(t[0]) && this.checkPlayer(t[3])) {
var s = a.judgeDistance(t[0].location, t[3].location, 500);
this.lblDistance[2].node.color = s ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[2].string = a.getDistance(t[0].location, t[3].location);
} else {
this.lblDistance[2].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[2].string = "";
}
if (this.checkPlayer(t[1]) && this.checkPlayer(t[2])) {
var c = a.judgeDistance(t[1].location, t[2].location, 500);
this.lblDistance[3].node.color = c ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[3].string = a.getDistance(t[1].location, t[2].location);
} else {
this.lblDistance[3].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[3].string = "";
}
if (this.checkPlayer(t[1]) && this.checkPlayer(t[3])) {
var l = a.judgeDistance(t[1].location, t[3].location, 500);
this.lblDistance[4].node.color = l ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[4].string = a.getDistance(t[1].location, t[3].location);
} else {
this.lblDistance[4].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[4].string = "";
}
if (this.checkPlayer(t[2]) && this.checkPlayer(t[3])) {
var u = a.judgeDistance(t[2].location, t[3].location, 500);
this.lblDistance[5].node.color = u ? new cc.color(255, 0, 0, 255) : new cc.color(13, 201, 13, 255);
this.lblDistance[5].string = a.getDistance(t[2].location, t[3].location);
} else {
this.lblDistance[5].node.color = new cc.color(0, 0, 0, 255);
this.lblDistance[5].string = "";
}
}
},
checkPlayer: function(e) {
return null != e && null != e.prop && null != e.location && 0 != e.location.lat && 0 != e.location.long;
},
onClickClose: function() {
n.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"./Cache": "Cache",
"./TableInfo": "TableInfo",
"./utils": "utils"
} ],
ModuleFinish_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "f342bXCwElDgooKwy1F6hg5", "ModuleFinish_09");
var n = e("TableInfo"), i = e("audio-ctrl"), a = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
bgTable: cc.Layout,
nodeYou: [ cc.Node ]
},
showRank: function(e) {
var t = [ cc.v2(-cc.winSize.width / 2 + 70 + a.FitScreen, -240), cc.v2(cc.winSize.width / 2 - 70 - a.FitScreen, 35), cc.v2(-168, 244), cc.v2(-cc.winSize.width / 2 + 70 + a.FitScreen, 35) ];
n.cuter = null;
n.cutCards = null;
var r = cc.url.raw("resources/Audio/Common/winerVoice.mp3");
i.getInstance().playSFX(r);
var o = this.nodeYou[e.finish];
n.players[e.idx].finish = e.finish;
o.active = !0;
o.setPosition(0, 0);
o.scale = 5;
o && (o.opacity = 0);
o.runAction(cc.sequence(cc.spawn(cc.fadeIn(.5), cc.scaleTo(.5, .9)), cc.scaleTo(.2, 1.1), cc.scaleTo(.2, 1), cc.moveTo(.2, t[n.realIdx[e.idx]])));
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
ModuleFlowerMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "5ac22Kr4OJOVIgxz47B/HkS", "ModuleFlowerMJ");
e("TableInfo"), e("../../GameBase/GameConfig").GameConfig;
var n = e("../../Main/Script/utils");
cc.Class({
extends: cc.Component,
properties: {
card: cc.Prefab,
content: []
},
onLoad: function() {},
initFlower: function(e, t) {
var i = this;
if (!n.isNullOrEmpty(e)) {
this.resetFlower();
e.forEach(function(e) {
i.addFlower(e, t);
});
}
},
resetFlower: function() {
this.content = [];
this.node.removeAllChildren();
},
addFlower: function(e, t) {
var n = cc.instantiate(this.card);
n.getComponent("ModuleGroundCardsMJ").init(e.card, t);
n._card = e.card;
n.active = !0;
this.node.addChild(n);
return n;
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../Main/Script/utils": "utils",
TableInfo: "TableInfo"
} ],
ModuleGPS07: [ function(e, t) {
"use strict";
cc._RF.push(t, "9b3243dKtpHZbUgmWkNqIiU", "ModuleGPS07");
var n = e("TableInfo"), i = e("Connector"), a = e("ROUTE"), r = (e("DataBase"), 
e("Cache"), function(e, t) {
return Math.round(e * Math.pow(10, t)) / Math.pow(10, t);
}), o = function(e, t) {
cc.log(JSON.stringify(e) + JSON.stringify(t));
var n = Math.PI / 180 * e.x, i = Math.PI / 180 * t.x, a = Math.PI / 180 * e.y, o = Math.PI / 180 * t.y, s = 6371 * Math.acos(Math.sin(n) * Math.sin(i) + Math.cos(n) * Math.cos(i) * Math.cos(a - o));
return r(s, 1) < 1 ? r(1e3 * s, 1) + "米" : r(s, 1) + "公里";
}, s = function(e) {
return null == e ? "未知" : e.substring(e.lastIndexOf(":") + 1);
};
cc.Class({
extends: cc.Component,
properties: {
sprHead: [ cc.Sprite ],
lblName: [ cc.Label ],
lblDistance: [ cc.Label ],
lblIp: [ cc.Label ],
imgWarning: cc.Node,
lblRegeo: [ cc.Label ]
},
clear: function() {
this.sprHead.forEach(function(e) {
e.spriteFrame = null;
});
this.lblName.forEach(function(e) {
e.string = "";
});
this.lblDistance.forEach(function(e) {
e.string = "";
});
this.lblIp.forEach(function(e) {
e.string = "";
});
this.lblRegeo.forEach(function(e) {
e.string = "";
});
},
checkIP: function() {
var e = this, t = [ null, null, null, null ];
cc.log(n.players.length);
for (var i = 0; i < n.players.length; i++) null != n.players[i] && (t[i] = s(n.players[i].prop.ip));
cc.log(t);
this.imgWarning.active = t[0] == t[1] && null != t[0] && null != t[1] || t[0] == t[2] && null != t[0] && null != t[2] || t[1] == t[2] && null != t[1] && null != t[2];
this.imgWarning.active && setTimeout(function() {
e.show();
}, 500);
},
reset: function() {
this.imgWarning.active = !1;
},
warning: function() {
this.imgWarning.runAction(cc.blink(5, 10));
},
dissolve: function() {
i.gameMessage(a.CS_GAME_VOTE, {
agree: !0
});
this.hide();
},
checkLoc: function(e) {
return null != e && null != e.prop && null != e.prop.loc && 0 != e.prop.loc.x && 0 != e.prop.loc.y;
},
show: function() {
var e = this;
this.clear();
var t = n.players;
t.forEach(function(i, a) {
if (null != i) {
e.sprHead[i.idx].node.active = !0;
e.sprHead[i.idx].spriteFrame = n.playerHead[i.idx];
e.lblName[i.idx].node.active = !0;
e.lblName[i.idx].string = i.prop.name;
if (e.lblName[i.idx].node.width > 86) {
var r = e.lblName[i.idx].node.width;
e.lblName[i.idx].node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1), cc.moveTo(4, (80 - r) / 2, -2), cc.delayTime(1), cc.moveTo(4, (r - 80) / 2, -2))));
}
e.lblIp[a].string = s(t[a].prop.ip);
}
});
this.checkLoc(t[0]) && null != t[0].prop.loc.regeo && (this.lblRegeo[0].string = t[0].prop.loc.regeo);
this.checkLoc(t[1]) && null != t[1].prop.loc.regeo && (this.lblRegeo[1].string = t[1].prop.loc.regeo);
this.checkLoc(t[2]) && null != t[2].prop.loc.regeo && (this.lblRegeo[2].string = t[2].prop.loc.regeo);
this.checkLoc(t[3]) && null != t[3].prop.loc.regeo && (this.lblRegeo[3].string = t[3].prop.loc.regeo);
this.lblRegeo.forEach(function(e) {
e.node.stopAllActions();
if (e.node.width > 140) {
var t = e.node.width;
e.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1), cc.moveTo(4, t / 2 - 70, .8), cc.delayTime(1), cc.moveTo(4, -(t / 2 - 70), .8))));
}
});
this.checkLoc(t[0]) && this.checkLoc(t[1]) ? this.lblDistance[0].string = o(t[0].prop.loc, t[1].prop.loc) : this.lblDistance[0].string = "距离未知";
this.checkLoc(t[0]) && this.checkLoc(t[2]) ? this.lblDistance[1].string = o(t[0].prop.loc, t[2].prop.loc) : this.lblDistance[1].string = "距离未知";
this.checkLoc(t[1]) && this.checkLoc(t[2]) ? this.lblDistance[2].string = o(t[1].prop.loc, t[2].prop.loc) : this.lblDistance[2] && (this.lblDistance[2].string = "距离未知");
var i = [ null, null, null ];
n.players.forEach(function(e, t) {
null != e && (i[t] = e.prop.ip);
});
i[0] == i[1] && null != i[0] && (this.lblDistance[0].string = "IP相同");
i[0] == i[2] && null != i[0] && (this.lblDistance[1].string = "IP相同");
i[1] == i[2] && null != i[1] && (this.lblDistance[2].string = "IP相同");
this.node.active = !0;
},
hide: function() {
this.node.active = !1;
}
});
cc._RF.pop();
}, {
Cache: "Cache",
Connector: "Connector",
DataBase: "DataBase",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleGPS11: [ function(e, t) {
"use strict";
cc._RF.push(t, "d26f8PC2iJK44WaQBesfU85", "ModuleGPS11");
var n = e("TableInfo"), i = e("Connector"), a = e("ROUTE"), r = e("Cache"), o = e("DataBase"), s = function(e, t) {
return Math.round(e * Math.pow(10, t)) / Math.pow(10, t);
}, c = function(e, t) {
cc.log(JSON.stringify(e) + JSON.stringify(t));
var n = Math.PI / 180 * e.x, i = Math.PI / 180 * t.x, a = Math.PI / 180 * e.y, r = Math.PI / 180 * t.y, o = 6371 * Math.acos(Math.sin(n) * Math.sin(i) + Math.cos(n) * Math.cos(i) * Math.cos(a - r));
return s(o, 1) < 1 ? s(1e3 * o, 1) + "米" : s(o, 1) + "公里";
}, l = function(e) {
return null == e ? "未知" : e.substring(e.lastIndexOf(":") + 1);
};
cc.Class({
extends: cc.Component,
properties: {
sprHead: [ cc.Sprite ],
lblName: [ cc.Label ],
lblDistance: [ cc.Label ],
lblIp: [ cc.Label ],
lblRegeo: [ cc.Label ],
nodeGPS: cc.Node,
imgWarning: cc.Node,
sprCheatName: [ cc.Node ],
sprCheatHead: [ cc.Node ]
},
clear: function() {
this.sprHead.forEach(function(e) {
e.spriteFrame = null;
});
this.lblName.forEach(function(e) {
e.string = "";
});
this.lblDistance.forEach(function(e) {
e.string = "";
});
this.lblIp.forEach(function(e) {
e.string = "";
});
this.lblRegeo.forEach(function(e) {
e.string = "";
});
},
checkIP: function() {
for (var e = [ null, null, null, null ], t = 0; t < n.players.length; t++) null != n.players[t] && (e[t] = n.players[t].prop.ip);
this.imgWarning.active = e[0] == e[1] && null != e[0] && null != e[1] || e[0] == e[2] && null != e[0] && null != e[2] || e[1] == e[2] && null != e[1] && null != e[2] || e[0] == e[3] && null != e[0] && null != e[3] || e[1] == e[3] && null != e[1] && null != e[3] || e[3] == e[2] && null != e[3] && null != e[2];
this.imgWarning.active && (3 != o.gameType && 4 != o.gameType && 26 != o.gameType || this.show());
},
reset: function() {
this.imgWarning.active = !1;
},
warning: function() {
this.imgWarning.runAction(cc.blink(5, 10));
},
dissolve: function() {
r.playSfx();
0 != n.status && i.gameMessage(a.CS_GAME_VOTE, {
agree: !0
});
this.hide();
},
checkLoc: function(e) {
return null != e && null != e.prop && null != e.prop.loc && 0 != e.prop.loc.x && 0 != e.prop.loc.y;
},
show: function() {
var e = this;
r.playSfx();
this.node.active = !0;
this.clear();
var t = n.players;
if (n.config.noCheat) {
this.sprCheatName.forEach(function(e) {
return e.active = !0;
});
this.sprCheatHead.forEach(function(e) {
return e.active = !0;
});
this.lblRegeo.forEach(function(e) {
return e.node.active = !1;
});
}
t.forEach(function(i, a) {
if (null != i) {
e.sprHead[i.idx].node.active = !0;
e.sprHead[i.idx].spriteFrame = n.playerHead[i.idx];
e.lblName[i.idx].string = i.prop.name;
if (e.lblName[i.idx].node.width > 86) {
e.lblName[i.idx].node.stopAllActions();
e.lblName[i.idx].node.width;
}
e.lblIp[a].string = l(t[a].prop.ip);
}
});
this.checkLoc(t[0]) && null != t[0].prop.loc.regeo && (this.lblRegeo[0].string = t[0].prop.loc.regeo);
this.checkLoc(t[1]) && null != t[1].prop.loc.regeo && (this.lblRegeo[1].string = t[1].prop.loc.regeo);
this.checkLoc(t[2]) && null != t[2].prop.loc.regeo && (this.lblRegeo[2].string = t[2].prop.loc.regeo);
this.checkLoc(t[3]) && null != t[3].prop.loc.regeo && (this.lblRegeo[3].string = t[3].prop.loc.regeo);
this.lblRegeo.forEach(function(e) {
if (e.node.width > 140) {
e.node.stopAllActions();
var t = e.node.width;
e.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1), cc.moveTo(4, t / 2 - 60, 0), cc.delayTime(1), cc.moveTo(4, -(t / 2 - 60), 0))));
}
});
this.checkLoc(t[0]) && this.checkLoc(t[1]) ? this.lblDistance[0].string = c(t[0].prop.loc, t[1].prop.loc) : this.lblDistance[0].string = "距离未知";
this.checkLoc(t[0]) && this.checkLoc(t[2]) ? this.lblDistance[1].string = c(t[0].prop.loc, t[2].prop.loc) : this.lblDistance[1].string = "距离未知";
this.checkLoc(t[0]) && this.checkLoc(t[3]) ? this.lblDistance[2].string = c(t[0].prop.loc, t[3].prop.loc) : this.lblDistance[2].string = "距离未知";
this.checkLoc(t[1]) && this.checkLoc(t[2]) ? this.lblDistance[3].string = c(t[1].prop.loc, t[2].prop.loc) : this.lblDistance[3].string = "距离未知";
this.checkLoc(t[1]) && this.checkLoc(t[3]) ? this.lblDistance[4].string = c(t[1].prop.loc, t[3].prop.loc) : this.lblDistance[4].string = "距离未知";
this.checkLoc(t[2]) && this.checkLoc(t[3]) ? this.lblDistance[5].string = c(t[2].prop.loc, t[3].prop.loc) : this.lblDistance[5].string = "距离未知";
var i = [ null, null, null, null ];
n.players.forEach(function(e, t) {
null != e && (i[t] = e.prop.ip);
});
i[0] == i[1] && null != i[0] && (this.lblDistance[0].string = "IP相同");
i[0] == i[2] && null != i[0] && (this.lblDistance[1].string = "IP相同");
i[0] == i[3] && null != i[0] && (this.lblDistance[2].string = "IP相同");
i[1] == i[2] && null != i[1] && (this.lblDistance[3].string = "IP相同");
i[1] == i[3] && null != i[1] && (this.lblDistance[4].string = "IP相同");
i[2] == i[3] && null != i[2] && (this.lblDistance[5].string = "IP相同");
},
hide: function() {
r.playSfx();
this.node.active = !1;
}
});
cc._RF.pop();
}, {
Cache: "Cache",
Connector: "Connector",
DataBase: "DataBase",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleGameSummary08: [ function(e, t) {
"use strict";
cc._RF.push(t, "2d278KbPydGIaAmnP4PrYBP", "ModuleGameSummary08");
var n = e("Cache"), i = (e("native-extend").Social, e("../../../Main/Script/utils"), 
e("../../../Main/Script/TableInfo")), a = e("../../../GameBase/GameConfig").GameConfig, r = e("../../../Main/NetWork/Connector"), o = e("../../../Main/Script/ROUTE");
cc.Class({
extends: cc.Component,
properties: {
winBg: cc.Prefab,
loseBg: cc.Prefab,
bgContainer: cc.Node,
playerContent: cc.Node,
playerItem: cc.Prefab,
birdContinueBtn: cc.Node,
continueBtn: cc.Node,
changeTableBtn: cc.Node
},
onLoad: function() {},
init: function(e, t) {
var n = this;
void 0 === t && (t = !1);
this.isReplay = t;
t && this.hideBtn();
e.forEach(function(e) {
e.idx == i.idx && ((e.scores.total > 0 ? cc.instantiate(n.winBg) : cc.instantiate(n.loseBg)).parent = n.bgContainer);
var t = cc.instantiate(n.playerItem);
t.getComponent("ModuleSummaryItem08").initData(e, 0);
t.parent = n.playerContent;
});
},
backHall: function() {
n.playSfx();
if (this.isReplay) {
var e = cc.find("Canvas/replay");
null != e && e.getComponent("ModuleReplay08").quit();
} else {
a.ShowTablePop = !0;
n.showMask("正在返回大厅...请稍后");
r.gameMessage(o.CS_PLAYER_LEAVE, {});
}
},
sendReady: function() {
if (this.isReplay) {
var e = cc.find("Canvas/replay");
null != e && e.getComponent("ModuleReplay08").quit();
} else {
a.ShowTablePop = !0;
a.IsQuickStart = !0;
n.showMask("正在返回大厅...请稍后");
r.gameMessage(o.CS_PLAYER_LEAVE, {});
}
},
remove: function() {
this.node && this.node.destroy();
},
hideBtn: function() {
this.birdContinueBtn.active = !1;
this.continueBtn.active = !1;
this.changeTableBtn.active = !1;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
Cache: "Cache",
"native-extend": "native-extend"
} ],
ModuleGameSummary16: [ function(e, t) {
"use strict";
cc._RF.push(t, "0e511Orb09N2Zz/uzwiPfwG", "ModuleGameSummary16");
var n = [ cc.v2(-86, -4), cc.v2(212, -4), cc.v2(488, -4), cc.v2(769, -4) ], i = e("TableInfo"), a = e("Cache"), r = (e("native-extend").Social, 
e("utils"), e("Connector"));
cc.Class({
extends: cc.Component,
properties: {
imgZhuang: [ cc.Node ],
lblTid: cc.Label,
lblDate: cc.Label,
part: cc.Prefab,
player: cc.Node,
sprHead: [ cc.Sprite ],
commonHead: cc.SpriteFrame
},
init: function(e) {
var t = this;
this.sprHead.forEach(function(e, n) {
e.spriteFrame = i.playerHead[n] || t.commonHead;
});
e.byVote && r.disconnect();
for (var a = 0, o = 0; o < i.config.person; o++) e.playerSummary[o].scores[2] - a >= 0 && (a = e.playerSummary[o].scores[2]);
this.lblTid.string = "房号: " + e.room;
for (var s = 0; s < i.config.person; s++) {
var c = cc.instantiate(this.part);
c.parent = this.player;
c.position = n[s];
c.getComponent("ModulePart16").init(e, e.playerSummary[s], s, a);
}
this.lblDate.string = new Date(e.time).format("yyyy-MM-dd hh:mm:ss");
this.imgZhuang.forEach(function(e, t) {
e.active = t == i.zhuang;
});
},
backHall: function() {
var e = this;
a.playSfx();
setTimeout(function() {
cc.game.removePersistRootNode(e.node);
e.node && e.node.destroy();
}, 500);
},
gameSummaryShare: function() {
a.playSfx();
a.showShare(this.node);
}
});
cc._RF.pop();
}, {
Cache: "Cache",
Connector: "Connector",
TableInfo: "TableInfo",
"native-extend": "native-extend",
utils: "utils"
} ],
ModuleGameSummaryMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "18ac4JBK1pGzphx6wHuNuZd", "ModuleGameSummaryMJ");
var n = e("../../../Main/Script/TableInfo"), i = e("../../../Main/NetWork/Connector"), a = e("../../../Main/Script/Cache"), r = e("../../../Main/Script/utils"), o = e("../../../GameBase/GameConfig").GameConfig, s = e("../../../Main/Script/ROUTE"), c = e("../hall/data/App").App;
cc.Class({
extends: cc.Component,
properties: {
summaryContent: cc.Node,
summaryItem: cc.Prefab,
continueBtn: cc.Node,
isReplay: !1
},
onLoad: function() {},
initData: function(e, t) {
var n = this;
void 0 === t && (t = !1);
t && (this.continueBtn.active = !1);
o.ShowTablePop = !0;
this.isReplay = t;
e.forEach(function(e, t) {
var i = cc.instantiate(n.summaryItem);
i.getComponent("MJGameSummayItem").renderUI(e, t);
n.summaryContent.addChild(i);
});
},
onContinueGame: function() {
a.playSfx();
"CUSTOM" == n.options.mode ? i.gameMessage(s.CS_GAME_READY, {}) : r.pop(o.pop.MatchPop, function(e) {
e.getComponent("ModuleMatchPop").startMatch(n.config.roomID);
});
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onBackHall: function() {
a.playSfx();
if (this.isReplay) {
c.EventManager.dispatchEventWith(o.GameEventNames.REPLAY_BACK_HALL);
this.node.destroy();
} else if ("CUSTOM" != n.options.mode) cc.director.loadScene("Lobby"); else {
o.ShowTablePop = !0;
i.gameMessage(s.CS_PLAYER_LEAVE, {});
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../hall/data/App": "App"
} ],
ModuleGround16: [ function(e, t) {
"use strict";
cc._RF.push(t, "96c29iri5NNsaEFBKCMdYk8", "ModuleGround16");
var n = e("TableInfo");
e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
card: cc.Prefab,
content: []
},
onLoad: function() {},
init: function(e, t) {
var n = this;
this.reset();
e.forEach(function(e) {
n.outCard(e, t, !1);
});
},
removeCard: function() {
cc.sprFlag.removeFromParent();
cc.sprFlag.active = !1;
var e = this.content.pop();
e && e.destroy();
},
outCard: function(e, t, i) {
var a = cc.instantiate(this.card);
a.getComponent("ModuleCards16").init(e, 1.2);
a._card = e;
a.zIndex = 500 - this.node.childrenCount;
n.outCards.push(e);
a.active = !0;
this.content.push(a);
0 == t && (a.position = cc.v2(-this.node.width / 2 + a.width * ((this.content.length - 1) % 18), 18 + (a.height - 18) * Math.ceil(this.content.length / 18)));
1 == t && (a.position = cc.v2(this.node.width / 2 - a.width * ((this.content.length - 1) % 18), 18 - (a.height - 18) * Math.ceil(this.content.length / 18)));
this.node.addChild(a);
a.zIndex = 0 == t ? 50 - this.content.length : this.content.length;
if (i) {
cc.sprFlag.parent = a;
cc.sprFlag.position = cc.v2(0, 60);
cc.sprFlag.active = !0;
cc.sprFlag.stopAllActions();
cc.sprFlag.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5, 0, 15), cc.moveBy(.5, 0, -15))));
}
return a;
},
showSameCard: function(e) {
this.resetSameCard();
this.node.children.forEach(function(t) {
t.active && t._card == e && (t.color = cc.color(150, 150, 150));
});
},
resetSameCard: function() {
this.node.children.forEach(function(e) {
e.color = cc.color(255, 255, 255);
});
},
reset: function() {
this.content = [];
this.node.removeAllChildren();
n.options.person;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
TableInfo: "TableInfo"
} ],
ModuleGroundCardsMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "63678+YMh5GjrzPuHdmaE09", "ModuleGroundCardsMJ");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {},
init: function(e, t, i, a) {
void 0 === i && (i = 1);
void 0 === a && (a = !1);
0 == e && (e = 35);
this.node.getComponent(cc.Sprite).spriteFrame = n.cardsSpriteFrame["p" + (t + 1) + "s" + e];
this.node.height *= i;
this.node.width *= i;
if (this.node.getChildByName("ting")) {
this.node.getChildByName("ting").height *= i;
this.node.getChildByName("ting").width *= i;
}
this.node.getChildByName("lai") && a && (this.node.getChildByName("lai").active = 0 == e);
if (this.node.getChildByName("back")) {
this.node.getChildByName("back").height *= i;
this.node.getChildByName("back").width *= i;
}
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleGroundDetail16: [ function(e, t) {
"use strict";
cc._RF.push(t, "31e92lT621BF77yBbD8+S3m", "ModuleGroundDetail16");
var n = e("TableInfo"), i = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {},
init: function(e) {
console.log("弃牌-----", e);
switch (e.event) {
case i.GameAction.PONG:
n.outCards.push(e.card);
n.outCards.push(e.card);
break;

case i.GameAction.CHOW:
n.outCards.push(e.card[0]);
n.outCards.push(e.card[1]);
n.outCards.push(e.card[2]);
break;

default:
n.outCards.push(e.card);
n.outCards.push(e.card);
n.outCards.push(e.card);
e.from == e.idx && n.outCards.push(e.card);
}
this.node.active = !0;
e.type != i.GameAction.KONG ? this.node.children.forEach(function(t, n) {
t.active = !0;
t.getComponent("ModuleCards16").init(e.type == i.GameAction.CHOW ? e.card[n] : e.card);
t.getChildByName("an").active = !1;
}) : this.node.children.forEach(function(t, n) {
t.getComponent("ModuleCards16").init(e.card);
t.active = !0;
t.getChildByName("an").active = 3 != n;
});
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
TableInfo: "TableInfo"
} ],
ModuleGroundDetailMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "01bd5OstipCWany+672sbvM", "ModuleGroundDetailMJ");
var n = e("TableInfo"), i = e("../../GameBase/GameConfig").GameConfig, a = e("../../script/ui/hall/data/App").App, r = {
ZHI: "点杠 x1",
KONG: "暗杠 x2",
BU: "明杠 x1",
PONG: "",
CHOW: ""
};
cc.Class({
extends: cc.Component,
properties: {
currentData: null
},
init: function(e, t, a) {
void 0 === t && (t = 0);
void 0 === a && (a = !1);
this.currentData = e;
if (a && (e.event == i.GameAction.ZHI || e.event == i.GameAction.KONG || e.event == i.GameAction.BU)) {
this.node.getChildByName("desc").active = !0;
this.node.getChildByName("desc").getComponent(cc.Label).string = e.card > 30 ? "字" + r[e.event] : "" + r[e.event];
}
var o = [];
if (e.event == i.GameAction.CHOW) {
var s = [ e.tile, e.tile + 1, e.tile + 2 ];
n.outCards.push(s[0]);
n.outCards.push(s[1]);
n.outCards.push(s[2]);
switch (s.indexOf(e.card)) {
case 0:
o = [ s[1], s[0], s[2] ];
break;

case 1:
o = [ s[0], s[1], s[2] ];
break;

case 2:
o = [ s[0], s[2], s[1] ];
}
}
if (e.event == i.GameAction.PONG) {
n.outCards.push(e.card);
n.outCards.push(e.card);
}
if (e.event == i.GameAction.KONG || e.event == i.GameAction.ZHI || e.event == i.GameAction.BU || e.event == i.GameAction.SHOW) {
n.outCards.push(e.card);
n.outCards.push(e.card);
n.outCards.push(e.card);
e.from == e.idx && n.outCards.push(e.card);
}
this.node.active = !0;
if (e.event != i.GameAction.KONG) {
var c = n.realIdx[e.from], l = "", u = "";
switch (c) {
case 1:
l = "3";
break;

case 2:
l = "2";
u = "gang";
break;

case 3:
l = "1";
}
this.node.children.forEach(function(a, r) {
if ("desc" != a._name) {
a.active = e.event == i.GameAction.ZHI || e.event == i.GameAction.BU || e.event == i.GameAction.SHOW || (e.event == i.GameAction.CHOW || e.event == i.GameAction.PONG) && "gang" != a._name;
e.idx != n.idx || a._name != l && a._name != u || (a.color = new cc.color(255, 255, 0));
a.getComponent("ModuleGroundCardsMJ").init(e.event == i.GameAction.CHOW ? o[r] : e.card, t);
a.getChildByName("an").active = !1;
}
});
} else this.node.children.forEach(function(n) {
if ("desc" != n._name) {
n.getComponent("ModuleGroundCardsMJ").init(e.card, t);
n.active = !0;
n.getChildByName("an").active = "gang" != n._name;
}
});
},
onClickQuest: function() {
a.EventManager.dispatchEventWith(i.GameEventNames.HNMJ_QUEST_CALL, this.currentData);
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
TableInfo: "TableInfo"
} ],
ModuleGroundMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "3764bXfkEBH9ZYMasw5rKu6", "ModuleGroundMJ");
var n = 0, i = e("TableInfo");
e("../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
card: cc.Prefab,
content: []
},
onLoad: function() {},
init: function(e, t) {
var n = this;
this.reset();
e.forEach(function(e) {
n.outCard(e, t, !1);
});
},
removeCard: function() {
cc.sprFlag.removeFromParent();
cc.sprFlag.active = !1;
var e = this.content.pop();
e && e.destroy();
},
outCard: function(e, t, a) {
var r = cc.instantiate(this.card);
r._card = e;
i.outCards.push(e);
r.active = !0;
this.content.push(r);
var o = this.content.length - 1;
r.getComponent("ModuleGroundCardsMJ").init(e, t, 1.2);
var s = 0, c = 0;
switch (t) {
case 0:
r.zIndex = Math.floor(o / n) % 2 == 0 ? 2 : 1;
s = -this.node.width / 2 + r.width / 2 + o % n * r.width;
c = Math.floor(o / n) % 2 == 0 ? r.height / 2 + Math.floor(o / n) / 2 * r.height * (12.5 / 60.5) : 3 * r.height / 2 + (Math.floor(Math.floor(o / n) / 2) - 1) * r.height * (12.5 / 60.5);
console.log("node----", s, c);
break;

case 1:
r.zIndex = n - o % n;
r.rotation = 90;
var l = .675 * r.height, u = .825 * r.width;
s = -this.node.width / 2 + l / 2 + o % n * l + 9 * r.height / 40 * Math.floor(Math.floor(o / n) / 2);
c = u / 2 + Math.floor(o / n) % 2 * u;
break;

case 2:
r.rotation = 180;
r.zIndex = Math.floor(o / n);
var d = .825 * r.width, h = .875 * r.height;
s = -this.node.width / 2 + d / 2 + o % n * d;
c = Math.floor(o / n) % 2 == 0 ? h / 2 - Math.floor(o / n) / 2 * h * (12.5 / 60.5) : 3 * h / 2 - (Math.floor(Math.floor(o / n) / 2) + 1) * h * (12.5 / 60.5);
break;

case 3:
r.zIndex = o % n;
r.rotation = -90;
var f = .675 * r.height, p = .825 * r.width;
s = -this.node.width / 2 + f / 2 + o % n * f - 9 * r.height / 40 * Math.floor(Math.floor(o / n) / 2);
c = p / 2 + Math.floor(o / n) % 2 * p;
}
r.position = cc.v2(s, c);
this.node.addChild(r);
if (a) {
cc.sprFlag.parent = r;
cc.sprFlag.position = cc.v2(0, 30);
cc.sprFlag.active = !0;
cc.sprFlag.stopAllActions();
cc.sprFlag.runAction(cc.repeatForever(cc.sequence(cc.moveBy(.5, 0, 15), cc.moveBy(.5, 0, -15))));
}
return r;
},
showSameCard: function(e) {
this.resetSameCard();
this.node.children.forEach(function(t) {
t.active && t._card == e && (t.color = cc.color(150, 150, 150));
});
},
resetSameCard: function() {
this.node.children.forEach(function(e) {
e.color = cc.color(255, 255, 255);
});
},
reset: function() {
this.content = [];
2 == i.config.person && (this.node.width = 750);
n = 2 == i.config.person ? 16 : 8;
this.node.removeAllChildren();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
TableInfo: "TableInfo"
} ],
ModuleGroup08: [ function(e, t) {
"use strict";
cc._RF.push(t, "1e95fN7JbhJnKFPFfA6QOkx", "ModuleGroup08");
var n = e("Connector"), i = (e("PACK"), e("ROUTE")), a = (e("Cache"), e("TableInfo"));
cc.Class({
extends: cc.Component,
properties: {
card: [ cc.Node ]
},
onLoad: function() {},
init: function(e, t, r) {
var o = this;
cc.log(e);
switch (e.type) {
case "dui":
case "men":
case "shun":
case "bi":
case "chi":
cc.log(e);
e.cards.forEach(function(e, t) {
o.card[t].active = !0;
o.card[t].getComponent("BaseCardZP").init(e);
});
break;

case "peng":
case "wei":
case "kan":
for (var s = 0; s < 3; s++) {
var c = this.card[s].getChildByName("back");
cc.log(c);
c.active = "wei" == e.type && 0 != s && !r;
this.card[s].active = !0;
this.card[s].getComponent("BaseCardZP").init(e.card);
}
break;

case "ti":
case "piao":
case "pao":
case "liu":
for (var l = 0; l < 4; l++) {
var u = this.card[l].getChildByName("back");
cc.log(u);
u.active = "ti" == e.type && 0 != l && !r;
this.card[l].active = !0;
this.card[l].getComponent("BaseCardZP").init(e.card);
}
break;

default:
cc.log(e.type);
}
cc.log("Group => init()", e.card);
this.type = e.type;
cc.log("GROUP+++++++++++++_______________", e);
this.cardValue = e.card;
this.xi = e.xi;
t && this.node.on("touchend", function() {
n.gameMessage(i.CS_ANSWER, {
serialID: a.serialID,
answer: e.idx,
card: a.currentCard
});
o.node.parent.parent.active = !1;
});
},
resetStatus: function() {
var e = this;
cc.log("resetStatus", this.type);
"pao" == this.type && "ti" == this.type && this.card.forEach(function(t, n) {
cc.log("resetStatus=========", e.type);
t.getChildByName("back").active = e.type != pao || "ti" == e.type && 0 == n;
});
},
remove: function() {
this.node && this.node.destroy();
}
});
cc._RF.pop();
}, {
Cache: "Cache",
Connector: "Connector",
PACK: "PACK",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleHandGround16: [ function(e, t) {
"use strict";
cc._RF.push(t, "4b749tr6kpGj5/IpUGmNOPS", "ModuleHandGround16");
cc.Class({
extends: cc.Component,
properties: {
groundItem: cc.Prefab
},
resetGround: function() {
this.node.removeAllChildren();
},
initGround: function(e) {
var t = this;
this.resetGround();
e.forEach(function(e) {
var n = cc.instantiate(t.groundItem);
n.msg = e;
n.getComponent("ModuleGroundDetail16").init(e);
t.node.addChild(n);
});
},
addGround: function(e) {
console.log("1", this.node.active);
var t = this.node.children.findIndex(function(t) {
return t.msg.card == e.card;
});
if (-1 == t) {
var n = cc.instantiate(this.groundItem);
n.msg = e;
n.getComponent("ModuleGroundDetail16").init(e);
this.node.addChild(n);
console.log("1");
} else {
this.node.children[t].msg = e;
this.node.children[t].getComponent("ModuleGroundDetail16").init(e);
}
}
});
cc._RF.pop();
}, {} ],
ModuleHandGroundMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "36f8aRgk69Ehpf6mIb88RAf", "ModuleHandGroundMJ");
var n = e("../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
groundItem: cc.Prefab
},
resetGround: function() {
this.node.removeAllChildren();
},
initGround: function(e, t) {
var n = this;
this.resetGround();
e.forEach(function(e) {
var i = cc.instantiate(n.groundItem);
i.msg = e;
0 == t && (i.scale = 1.1);
i.getComponent("ModuleGroundDetailMJ").init(e, t);
n.node.addChild(i);
});
},
addGround: function(e, t) {
var i = this.node.children.findIndex(function(t) {
return t.msg.card == e.card;
});
if (-1 == i || e.event == n.GameAction.CHOW) {
var a = cc.instantiate(this.groundItem);
a.msg = e;
0 == t && (a.scale = 1.1);
a.getComponent("ModuleGroundDetailMJ").init(e, t);
this.node.addChild(a);
console.log("1");
} else {
this.node.children[i].msg = e;
this.node.children[i].getComponent("ModuleGroundDetailMJ").init(e, t);
}
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig"
} ],
ModuleHands08: [ function(e, t) {
"use strict";
cc._RF.push(t, "28a71on0KlPx6hj/oAqiNW0", "ModuleHands08");
var n = e("TableInfo"), i = e("Connector"), a = (e("PACK"), e("ROUTE")), r = e("Cache");
cc.Class({
extends: cc.Component,
properties: {
nodeCard: cc.Prefab,
handsChild: cc.Node
},
onLoad: function() {
var e = this;
this.handsChild.zIndex = 25;
this.node.on("touchstart", function(t) {
e.touchstart(t);
});
this.node.on("touchmove", function(t) {
e.touchmove(t);
});
this.node.on("touchend", function(t) {
e.touchend(t);
});
this.node.on("touchcancel", function(t) {
e.touchcancel(t);
});
},
init: function(e, t) {
var n = this;
this.node.removeAllChildren();
var i = this.makeHands(e);
this._hands = [ [], [], [], [], [], [], [], [], [], [], [], [], [] ];
var a = 6 - Math.floor(i.length / 2);
a > 0 && a--;
i.forEach(function(e, r) {
e.forEach(function(o, s) {
var c = cc.instantiate(n.nodeCard);
c.scale = .8;
c.parent = n.node;
c._card = o;
var l = 3 == e.length && i[r][0] == i[r][1] && i[r][1] == i[r][2] ? 1 : 0;
c.pao = l;
c.getComponent("BaseCardZP").init(o, !1, l);
c._pos = {
x: a,
y: s
};
c.setPosition(77.6 * c._pos.x - 400, 80 * c._pos.y - 273);
c.opacity = t ? 255 : 0;
n._hands[a].push(c);
});
a++;
});
this.sortHands();
},
makeHands: function(e) {
var t = [], n = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
e.forEach(function(e, i) {
if (e > 1) {
for (var a = [], r = 0; r < e; r++) a.push(i);
t.push(a);
} else n[i] += e;
});
n.forEach(function(e, i) {
if (e > 0 && i % 10 < 8 && n[i] > 0 && n[i + 1] > 0 && n[i + 2] > 0) {
t.push([ i + 2, i + 1, i ]);
n[i + 2]--;
n[i + 1]--;
n[i]--;
}
});
if (n[9] > 0 && n[6] > 0 && n[1] > 0) {
t.push([ 9, 6, 1 ]);
n[9]--;
n[6]--;
n[1]--;
}
if (n[19] > 0 && n[16] > 0 && n[11] > 0) {
t.push([ 19, 16, 11 ]);
n[19]--;
n[16]--;
n[11]--;
}
n.forEach(function(e, i) {
var a = t.findIndex(function(e) {
return e[0] % 10 == i % 10 && 2 == e.length && e[0] == e[1];
});
if (a > -1 && e > 0) {
t[a].push(i);
n[i]--;
}
});
if (n[0] > 0 && n[1] > 0) {
t.push([ 0, 1 ]);
n[0]--;
n[1]--;
}
if (n[0] > 0 && n[2] > 0) {
t.push([ 0, 2 ]);
n[0]--;
n[2]--;
}
if (n[1] > 0 && n[2] > 0) {
t.push([ 1, 2 ]);
n[1]--;
n[2]--;
}
if (n[10] > 0 && n[11] > 0) {
t.push([ 10, 11 ]);
n[10]--;
n[11]--;
}
if (n[10] > 0 && n[12] > 0) {
t.push([ 10, 12 ]);
n[10]--;
n[12]--;
}
if (n[11] > 0 && n[12] > 0) {
t.push([ 12, 11 ]);
n[11]--;
n[12]--;
}
if (n[9] > 0 && n[6] > 0) {
t.push([ 9, 6 ]);
n[9]--;
n[6]--;
}
if (n[9] > 0 && n[1] > 0) {
t.push([ 9, 1 ]);
n[9]--;
n[1]--;
}
if (n[6] > 0 && n[1] > 0) {
t.push([ 6, 1 ]);
n[6]--;
n[1]--;
}
if (n[19] > 0 && n[16] > 0) {
t.push([ 19, 16 ]);
n[19]--;
n[16]--;
}
if (n[19] > 0 && n[11] > 0) {
t.push([ 19, 11 ]);
n[19]--;
n[11]--;
}
if (n[16] > 0 && n[11] > 0) {
t.push([ 16, 11 ]);
n[16]--;
n[11]--;
}
n.forEach(function(e, i) {
if (e > 0 && i % 10 < 9 && n[i] > 0 && n[i + 1] > 0) {
t.push([ i + 1, i ]);
n[i + 1]--;
n[i]--;
}
});
n.forEach(function(e, i) {
if (e > 0 && i % 10 < 8 && n[i] > 0 && n[i + 2] > 0) {
t.push([ i + 2, i ]);
n[i + 2]--;
n[i]--;
}
});
n.forEach(function(e, n) {
e > 0 && t.push([ n ]);
});
t.forEach(function(e) {
e.sort(function(e, t) {
return e - t;
});
});
t.sort(function(e, t) {
return e[0] % 10 - t[0] % 10;
});
t.forEach(function(e) {
e.dan = 1 == e.length;
});
for (;t.length > 12; ) {
var i = t.findIndex(function(e) {
return 1 == e.length;
}), a = t[i][0];
t.splice(i, 1);
var r = t.findIndex(function(e) {
return e.length < 3;
});
t[r].push(a);
}
return t;
},
joinHands: function() {
var e = this, t = 0;
this._hands.forEach(function(e) {
return t += e.length > 0 ? 1 : 0;
});
var n = 6 - Math.floor(t / 2);
n > 0 && n--;
var i = this._hands.slice();
this._hands = [ [], [], [], [], [], [], [], [], [], [], [], [], [] ];
i.forEach(function(t) {
if (t.length > 0) {
e._hands[n] = t;
n++;
}
});
},
touchstart: function(e) {
if (null == this.current && null != this._hands) for (var t = 0; t < this._hands.length; t++) for (var n = 0; n < this._hands[t].length; n++) {
var i = this._hands[t][n], a = this._hands[t][n].getBoundingBox();
if (0 != n) {
a.y = a.y + 8.8;
a.height = a.height - 8.8;
}
var r = e.target.convertToNodeSpaceAR(e.getLocation());
if (a.contains(r)) {
if (1 == i.pao) return;
var o = cc.instantiate(i);
o.parent = this.handsChild;
o.scale = 1.4;
o.position = i.position;
this.current = o;
this.sprCard = i;
this.current.zIndex = 200;
i && (i.opacity = 150);
}
}
},
sortHands: function() {
var e = this;
cc.log("soetHands");
this.handsChild.removeAllChildren();
this.current = null;
this.joinHands();
for (var t = function(t) {
if (3 == e._hands[t].length && 0 == e._hands[t][0].pao && e._hands[t][0].value % 10 == e._hands[t][1].value % 10 && e._hands[t][1].value % 10 == e._hands[t][2].value % 10) {
e._hands[t].forEach(function(n) {
var i = e._hands[t].findIndex(function(e) {
return n.value == e.value && n != e;
});
n.count = -1 != i ? 2 : 1;
});
e._hands[t].sort(function(e, t) {
return t.count - e.count;
});
}
for (var n = 0; n < e._hands[t].length; n++) {
var i = e._hands[t][n];
i._pos = {
x: t,
y: n
};
i.zIndex = 100 - i._pos.y;
i.setPosition(77.6 * i._pos.x - 400, 80 * i._pos.y - 273);
}
}, n = 0; n < this._hands.length; n++) t(n);
},
removeHands: function(e) {
for (var t = 0; t < this._hands.length; t++) for (var n = 0; n < this._hands[t].length; n++) if (e == this._hands[t][n]._card) {
this._hands[t][n].destroy();
this._hands[t].splice(n, 1);
return;
}
},
touchmove: function(e) {
if (null != this.current) {
var t = e.target.convertToNodeSpaceAR(e.getLocation());
this.current.position = t;
}
},
touchend: function() {
var e = this;
if (null != this.current) {
var t = cc.find("Canvas/nodeTable/bg2/imgOutCard");
if (1 == t.active && this.current.y > 45) {
if (-1 != n.zhao.findIndex(function(t) {
return t == e.sprCard.value;
})) {
r.showConfirm("是否放招？", function() {
e._hands[e.sprCard._pos.x].splice(e.sprCard._pos.y, 1);
e.sendPlay();
e.sprCard.destroy();
e.sprCard = null;
e.sortHands();
});
null != this.sprCard && (this.sprCard.opacity = 255);
this.current.destroy();
this.current = null;
return;
}
this._hands[this.sprCard._pos.x].splice(this.sprCard._pos.y, 1);
this.sendPlay();
this.current.destroy();
this.current = null;
this.sprCard.destroy();
this.sprCard = null;
t.active = !1;
this.sortHands();
} else {
var i = this.current.getPosition(), a = Math.floor((i.x - -400 + 38.8) / 77.6);
a = Math.max(a, 0);
a = Math.min(a, 12);
var o = 0;
this._hands.forEach(function(e) {
e.length > 0 && o++;
});
var s = 6 - Math.floor(o / 2), c = o + s - 1, l = i.x < this._hands[s][0] - 30 || i.x < this._hands[c][0] + 30, u = Math.round((i.y + 100) / 100);
u = Math.min(u, 4);
u = Math.max(u, 0);
(0 != a || 0 == a && this._hands[0].length > 0) && this.moveHands(this.current, a, u, l && u <= 2);
this.sortHands();
this.sprCard.opacity = 255;
this.sprCard = null;
null != this.current && this.current.destroy();
this.current = null;
}
}
},
moveHands: function(e, t, n, i) {
var a = this.sprCard._pos, r = 0;
this._hands.forEach(function(e) {
e.length > 0 && r++;
});
if (null == this._hands[t][0] || 1 != this._hands[t][0].pao) if (r < 13 && i) {
this._hands[a.x].splice(a.y, 1);
this._hands.splice(t, 0, [ this.sprCard ]);
} else if (this._hands[t].length < 4) {
this._hands[a.x].splice(a.y, 1);
this._hands[t].splice(this._hands[t].length, 0, this.sprCard);
}
},
touchcancel: function() {
if (null != this.current || null != this.sprCard) {
var e = cc.find("Canvas/nodeTable/bg2/imgOutCard");
cc.log(this.current.y);
this.current.y > 45 && 1 == e.active && this.touchend();
this.current.destroy();
this.current = null;
this.sprCard.opacity = 255;
this.sprCard = null;
this.handsChild.removeAllChildren();
this._hands.forEach(function(e) {
e.forEach(function(e) {
e.opacity = 255;
});
});
this.sortHands();
}
},
sendPlay: function() {
i.gameMessage(a.CS_PLAY_CARD, this.sprCard.value);
},
sendAction: function() {},
showLayoutAction: function() {},
showLayoutBi: function() {},
showLayoutChi: function() {}
});
cc._RF.pop();
}, {
Cache: "Cache",
Connector: "Connector",
PACK: "PACK",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleHands16: [ function(e, t) {
"use strict";
cc._RF.push(t, "f7e0fgO30ZK3ZUEVLjhYX8o", "ModuleHands16");
e("./MJGameConfig");
var n = e("TableInfo"), i = e("Connector"), a = e("ROUTE"), r = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
_hands: [],
selfCard: cc.Prefab,
checkedCard: null,
touchTime: 0,
lastCard: null
},
onLoad: function() {
var e = this;
this.checkTing = !1;
this.node.on("touchstart", function(t) {
e.touchstart(t);
});
this.node.on("touchmove", function(t) {
e.touchmove(t);
});
this.node.on("touchend", function(t) {
e.touchend(t);
});
this.node.on("touchcancel", function(t) {
e.touchend(t);
});
},
showTing: function() {
this._hands.forEach(function(e) {
e && (e.getChildByName("ting").active = e.ting);
});
},
reset: function() {
this._hands = [];
this.node.destroyAllChildren();
},
outCard: function(e) {
this.resetSameCard();
cc.playCard = !1;
i.gameMessage(a.CS_OUT_CARD, {
card: e,
serialID: n.serialID
});
this._hands[this.current._pos] = null;
this.current.destroy();
this.current = null;
this._hands.forEach(function(e) {
e && (e.getCard = !1);
});
this.checkedCard = null;
this.sortCards();
this._hands.forEach(function(e) {
return e.ting = !1;
});
this.showTing();
},
removeCard: function(e, t) {
void 0 === t && (t = 1);
for (var n = 0, i = 0; i < this._hands.length; i++) {
if (n >= t) return;
if (e == this._hands[i]._card) {
this._hands[i].destroy();
this._hands.splice(i, 1);
i--;
n++;
}
}
},
showSameCard: function() {
var e = this;
null != this.current && cc.find("Canvas/nodeTable").getComponent("SceneTable16").ground.forEach(function(t, i) {
i < n.options.person && t.showSameCard(e.current._card);
});
},
resetSameCard: function() {
var e = this;
cc.find("Canvas/nodeTable").getComponent("SceneTable16").ground.forEach(function(t, i) {
i < n.options.person && t.resetSameCard(e.current);
});
},
touchstart: function(e) {
var t = this;
this.moveTime = 0;
if (null == this.current && cc.playCard) {
this.checkTing = !0;
this._hands.forEach(function(n) {
var i = n, a = n.getBoundingBox(), r = e.target.convertToNodeSpaceAR(e.getLocation());
if (a.contains(r)) {
t.current = i;
if (new Date().getTime() - t.touchTime < 300 && t.lastCard == t.current) {
t.touchTime = 0;
t.outCard(t.current._card);
t.sortCards();
e.stopPropagation();
return;
}
t.lastCard = t.current;
t.touchTime = new Date().getTime();
t.checkedCard = t.current;
t.showSameCard();
}
});
}
},
touchmove: function(e) {
if (cc.playCard && null != this.current) {
var t = e.target.convertToNodeSpaceAR(e.getLocation());
e.target.convertToWorldSpaceAR(e.getLocation());
this.current.position = t;
this.current.zIndex = 100;
this.moveTime++;
if (this.checkTing) {
var n = null == this.current ? null : this.current._card;
cc.find("Canvas/nodeTable").getComponent("SceneTable16").checkHu(n, !0);
}
this.checkTing = !1;
}
},
touchend: function() {
if (cc.playCard) {
null == this.checkedCard && this.resetSameCard();
if (null != this.current) {
this.checkTing && this.calcTing();
if (this.current.y > 160) {
console.log("1111");
this.outCard(this.current._card);
this.sortCards();
} else {
this.sortCards();
this.moveTime = 0;
}
}
}
},
touchcancel: function() {
this.moveTime = 0;
this.resetSameCard();
this.sortCards();
this.checkTing && this.calcTing();
},
init: function(e) {
var t = this;
this._hands = [];
this.node.destroyAllChildren();
var n = null;
e.hands.length % 3 == 2 && (n = e.hands.pop());
e.hands.sort(function(e, t) {
return e - t;
});
null != n && e.hands.push(n);
var i = n ? e.hands.length - 1 : e.hands.length;
e.hands.forEach(function(a, r) {
var o = t.newCard(a, t.node);
o._pos = r;
o.getCard = null != n && r == e.hands.length - 1;
o.isChecked = !1;
o.getCard ? o.setPosition(cc.v2(cc.winSize.width / 2 - o.width / 2, o == t.checkedCard && t.moveTime < 5 ? -t.node.height / 2 + o.height / 2 + 20 : -t.node.height / 2 + o.height / 2)) : o.setPosition(cc.v2(cc.winSize.width / 2 - o.width - o.width * (i - r), o == t.checkedCard && t.moveTime < 5 ? -t.node.height / 2 + o.height / 2 + 20 : -t.node.height / 2 + o.height / 2));
t._hands.push(o);
});
},
newCard: function(e) {
var t = cc.instantiate(this.selfCard);
this.node.addChild(t);
t._card = e;
t.ting = !1;
t.getComponent("ModuleCards16").init(e, 0 == r.FitScreen ? .96 : 1.16, !0);
return t;
},
joinHands: function() {
var e = this;
this._hands.forEach(function() {});
var t = [];
this._hands.forEach(function(e) {
e && t.push(e);
});
t.sort(function(e, t) {
return e.getCard ? 1 : t.getCard ? -1 : e._card - t._card;
});
this._hands = [];
t.forEach(function(t) {
null != t && e._hands.push(t);
});
},
calcTing: function() {
var e = null == this.current ? null : this.current._card;
cc.find("Canvas/nodeTable").getComponent("SceneTable16").checkHu(e);
},
sortCards: function(e) {
var t = this;
if (this.moveTime > 5) {
this.checkedCard = null;
cc.find("Canvas/nodeTable").getComponent("SceneTable16").bgTing.active = !1;
this.resetSameCard();
}
this.current = null;
this.joinHands();
this._hands.forEach(function() {});
var n = this._hands[this._hands.length - 1].getCard ? this._hands.length - 1 : this._hands.length;
this._hands.forEach(function(i, a) {
i._pos = a;
i.zIndex = 1;
i.color = i == t.checkedCard && t.moveTime < 5 ? cc.color(227, 252, 126) : cc.color(255, 255, 255);
i.getCard ? i.setPosition(cc.v2(cc.winSize.width / 2 - i.width / 2, i == t.checkedCard && t.moveTime < 5 ? -t.node.height / 2 + i.height / 2 + 20 : -t.node.height / 2 + i.height / 2)) : i.setPosition(cc.v2(cc.winSize.width / 2 - i.width - i.width * (n - a), i == t.checkedCard && t.moveTime < 5 ? -t.node.height / 2 + i.height / 2 + 20 : -t.node.height / 2 + i.height / 2));
if (i.getCard && !i.allGet && e) {
i.allGet = !0;
i.runAction(cc.sequence(cc.callFunc(function() {
i.setPosition(i.x, i.y + 50);
}), cc.delayTime(.2), cc.moveBy(.2, 0, -50), cc.moveBy(.1, 0, 10), cc.moveBy(.1, 0, -10), cc.moveBy(.1, 0, 1.5), cc.moveBy(.1, 0, -1.5)));
}
});
},
getCard: function(e) {
this.checkedCard = null;
var t = this.newCard(e, this.node);
t.getCard = !0;
t.allGet = !1;
this._hands.push(t);
this.sortCards(!0);
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"./MJGameConfig": "MJGameConfig",
Connector: "Connector",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleHandsMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "2129fbzCFBPvqHw3WPmVaTg", "ModuleHandsMJ");
e("../Game16/Script/MJGameConfig");
var n = e("TableInfo"), i = e("Connector"), a = e("ROUTE"), r = e("../../GameBase/GameConfig").GameConfig, o = (e("../../Main/Script/DataBase").card, 
e("../../Main/Script/Cache")), s = e("../../script/ui/hall/data/App").App;
cc.Class({
extends: cc.Component,
properties: {
_hands: [],
selfCard: cc.Prefab,
checkedCard: null,
touchTime: 0,
lastCard: null
},
onLoad: function() {
var e = this;
this.checkTing = !1;
this.node.on("touchstart", function(t) {
e.touchstart(t);
});
this.node.on("touchmove", function(t) {
e.touchmove(t);
});
this.node.on("touchend", function(t) {
e.touchend(t);
});
this.node.on("touchcancel", function(t) {
e.touchend(t);
});
},
showTing: function() {
this._hands.forEach(function(e) {
e && (e.getChildByName("ting").active = e.ting);
});
},
hideTing: function() {
this._hands.forEach(function(e) {
if (e) {
e.ting = !1;
e.getChildByName("ting").active = e.ting;
}
});
},
reset: function() {
this._hands = [];
this.node.destroyAllChildren();
},
outCard: function(e) {
if (e > 40) {
o.alertTip("不能出花牌");
this.touchcancel();
} else {
this.resetSameCard();
cc.playCard = !1;
i.gameMessage(a.CS_OUT_CARD, {
card: e,
serialID: n.serialID
});
this._hands[this.current._pos] = null;
this.current.destroy();
this.current = null;
this._hands.forEach(function(e) {
e && (e.getCard = !1);
});
this.checkedCard = null;
this.sortCards();
this._hands.forEach(function(e) {
return e.ting = !1;
});
this.showTing();
}
},
autoSortCard: function(e) {
this.resetSameCard();
cc.playCard = !1;
console.log("当前打出牌---,", e, this.current);
if (this.current) {
this._hands[this.current._pos] = null;
this.current.destroy();
} else {
var t = this._hands.findIndex(function(t) {
return t._card == e;
});
if (-1 != t) {
this._hands[t].destroy();
this._hands[t] = null;
}
}
this.current = null;
this._hands.forEach(function(e) {
e && (e.getCard = !1);
});
this.checkedCard = null;
this.sortCards();
this._hands.forEach(function(e) {
return e.ting = !1;
});
this.showTing();
},
removeCard: function(e, t) {
void 0 === t && (t = 1);
for (var n = 0, i = 0; i < this._hands.length; i++) {
if (n >= t) return;
if (e == this._hands[i]._card) {
this._hands[i].destroy();
this._hands.splice(i, 1);
i--;
n++;
}
}
},
showSameCard: function() {
null != this.current && s.EventManager.dispatchEventWith(r.GameEventNames.HNMJ_SHOW_SAME_CARD, this.current._card);
},
resetSameCard: function() {
s.EventManager.dispatchEventWith(r.GameEventNames.HNMJ_RESET_SAME_CARD);
},
touchstart: function(e) {
var t = this;
this.moveTime = 0;
if (null == this.current && cc.playCard) {
this.checkTing = !0;
this._hands.forEach(function(n) {
var i = n, a = n.getBoundingBox(), r = e.target.convertToNodeSpaceAR(e.getLocation());
if (a.contains(r)) {
t.current = i;
if (new Date().getTime() - t.touchTime < 300 && t.lastCard == t.current) {
t.touchTime = 0;
t.outCard(t.current._card);
t.sortCards();
e.stopPropagation();
return;
}
t.lastCard = t.current;
t.touchTime = new Date().getTime();
t.checkedCard = t.current;
t.showSameCard();
}
});
}
},
touchmove: function(e) {
if (cc.playCard && null != this.current) {
var t = e.target.convertToNodeSpaceAR(e.getLocation());
e.target.convertToWorldSpaceAR(e.getLocation());
this.current.position = t;
this.current.zIndex = 100;
this.moveTime++;
if (this.checkTing) {
var n = null == this.current ? null : this.current._card;
s.EventManager.dispatchEventWith(r.GameEventNames.HNMJ_CHECK_HU, {
card: n,
showTing: !0
});
}
this.checkTing = !1;
}
},
touchend: function() {
if (cc.playCard) {
null == this.checkedCard && this.resetSameCard();
if (null != this.current) {
this.checkTing && this.calcTing();
if (this.current.y > 80) {
this.outCard(this.current._card);
this.sortCards();
} else {
this.sortCards();
this.moveTime = 0;
}
}
}
},
touchcancel: function() {
this.moveTime = 0;
this.resetSameCard();
this.sortCards();
this.checkTing && this.calcTing();
},
init: function(e) {
var t = this;
this._hands = [];
this.node.destroyAllChildren();
var n = null;
e.hands.length % 3 == 2 && (n = e.hands.pop());
e.hands.sort(function(e, t) {
return e - t;
});
null != n && e.hands.push(n);
var i = n ? e.hands.length - 1 : e.hands.length;
e.hands.forEach(function(a, r) {
var o = t.newCard(a, t.node);
o._pos = r;
o.getCard = null != n && r == e.hands.length - 1;
o.isChecked = !1;
var s = t.node.width;
o.getCard ? o.setPosition(cc.v2(s / 2 - o.width / 2, o == t.checkedCard && t.moveTime < 5 ? -t.node.height / 2 + o.height / 2 + 20 : -t.node.height / 2 + o.height / 2)) : o.setPosition(cc.v2(s / 2 - o.width - o.width * (i - r), o == t.checkedCard && t.moveTime < 5 ? -t.node.height / 2 + o.height / 2 + 20 : -t.node.height / 2 + o.height / 2));
t._hands.push(o);
});
},
newCard: function(e) {
var t = cc.instantiate(this.selfCard);
t._card = e;
t.ting = !1;
t.getComponent("ModuleSelfCardsMJ").init(e, (r.FitScreen, .9), !0);
this.node.addChild(t);
return t;
},
joinHands: function() {
var e = this;
this._hands.forEach(function() {});
var t = [];
this._hands.forEach(function(e) {
e && t.push(e);
});
t.sort(function(e, t) {
return e.getCard ? 1 : t.getCard ? -1 : e._card - t._card;
});
this._hands = [];
t.forEach(function(t) {
null != t && e._hands.push(t);
});
},
calcTing: function() {
var e = null == this.current ? null : this.current._card;
s.EventManager.dispatchEventWith(r.GameEventNames.HNMJ_CHECK_HU, {
card: e,
showTing: !1
});
},
sortCards: function(e) {
var t = this;
if (this.moveTime > 5) {
this.checkedCard = null;
s.EventManager.dispatchEventWith(r.GameEventNames.HNMJ_HIDE_TING);
this.resetSameCard();
}
this.current = null;
this.joinHands();
this._hands.forEach(function() {});
var n = this._hands[this._hands.length - 1].getCard ? this._hands.length - 1 : this._hands.length;
this._hands.forEach(function(i, a) {
i._pos = a;
i.zIndex = 1;
i.color = i == t.checkedCard && t.moveTime < 5 ? cc.color(227, 252, 126) : cc.color(255, 255, 255);
var r = t.node.width;
i.getCard ? i.setPosition(cc.v2(r / 2 - i.width / 2, i == t.checkedCard && t.moveTime < 5 ? -t.node.height / 2 + i.height / 2 + 20 : -t.node.height / 2 + i.height / 2)) : i.setPosition(cc.v2(r / 2 - i.width - i.width * (n - a), i == t.checkedCard && t.moveTime < 5 ? -t.node.height / 2 + i.height / 2 + 20 : -t.node.height / 2 + i.height / 2));
i.getCard && !i.allGet && e && (i.allGet = !0);
});
},
getCard: function(e) {
var t = this;
if ("number" == typeof e) {
this.checkedCard = null;
var n = this.newCard(e, this.node);
n.getCard = !0;
n.allGet = !1;
this._hands.push(n);
this.sortCards(!0);
} else {
e.forEach(function(n, i) {
t.checkedCard = null;
var a = t.newCard(n, t.node);
a.getCard = i == e.length - 1;
a.allGet = !1;
t._hands.push(a);
});
this.sortCards(!0);
}
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../Main/Script/Cache": "Cache",
"../../Main/Script/DataBase": "DataBase",
"../../script/ui/hall/data/App": "App",
"../Game16/Script/MJGameConfig": "MJGameConfig",
Connector: "Connector",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleHands_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "e4e29fCkCJLWIf+BMr4ikFx", "ModuleHands_09");
cc.Class({
extends: cc.Component,
properties: {
preCardsType: cc.Prefab,
nodeCards: []
},
refreshHandCards: function(e, t) {
var n = this;
this.node.destroyAllChildren();
this.nodeCards = [];
var i = Math.floor(e.length / 2);
e.forEach(function(a, r) {
var o = cc.instantiate(n.preCardsType);
o.getComponent("ModuleCardsInit_09").init(a);
o.parent = n.node;
o._prior = !1;
o._before = !1;
o._value = a;
o.active = t;
o.setPosition(10 * (e.length - 27) - 430 + (13 - i + r) * (62 - e.length), 7);
o.pos0 = cc.v2(o.x, o.y);
o.pos1 = cc.v2(o.x, o.y + 10);
n.nodeCards.push(o);
});
}
});
cc._RF.pop();
}, {} ],
ModuleHistoryItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "0ce64mdy4lKR7L8SYC0nNCC", "ModuleHistoryItem");
var n = e("DataBase"), i = e("Connector"), a = e("../Script/Cache");
cc.Class({
extends: cc.Component,
properties: {
nodePlayer: [ cc.Node ],
lblName: [],
lblScore: [],
lblId: [],
lblRoomNum: cc.Label,
lblTime: cc.Label,
btnDetail: cc.Node,
preContentChild: cc.Prefab
},
onLoad: function() {
var e = this;
this.nodePlayer.forEach(function(t) {
e.lblScore.push(t.getChildByName("lblScore").getComponent(cc.Label));
e.lblName.push(t.getChildByName("lblName").getComponent(cc.Label));
e.lblId.push(t.getChildByName("lblId").getComponent(cc.Label));
});
},
init: function(e) {
var t = this;
this.lblName[0].string = e.userName0;
this.lblName[1].string = e.userName1;
this.lblName[2].string = e.userName2;
this.lblName[3].string = e.userName3;
this.lblId[0].string = e.userId0;
this.lblId[1].string = e.userId1;
this.lblId[2].string = e.userId2;
this.lblId[3].string = e.userId3;
this.lblScore[0].string = e.userScore0;
this.lblScore[1].string = e.userScore1;
this.lblScore[2].node.active = !(0 == e.userScore2 && "" == e.userName2);
this.lblScore[2].string = e.userScore2;
this.lblScore[3].node.active = !(0 == e.userScore3 && "" == e.userName3);
this.lblScore[3].string = e.userScore3;
var r = 0;
this.lblScore.forEach(function(e) {
e.node.active && r++;
});
this.nodePlayer.forEach(function(e, t) {
e.active = t < r;
});
var o = e.id;
this.lblRoomNum.string = "房号:" + e.tableId;
var s = e.logFlag, c = e.tableId;
this.lblTime.string = "时间:" + new Date(e.gameDate).format("yyyy-MM-dd hh:mm:ss");
this.btnDetail.on("touchend", function() {
a.playSfx();
i.request("detailLog", {
id: n.player.id,
logId: o
}, function(e) {
for (var n = cc.find("Canvas/winHistory").getComponent("ModuleHistory").initHistoryDetail(t.lblName, r), i = 0; i < e.records.length; i++) {
var a = cc.instantiate(t.preContentChild);
a.parent = n;
a.getComponent("ModuleHistoryDetailItem").init(e.records[i], i, s, c, r);
}
});
});
}
});
cc._RF.pop();
}, {
"../Script/Cache": "Cache",
Connector: "Connector",
DataBase: "DataBase"
} ],
ModuleHistory: [ function(e, t) {
"use strict";
cc._RF.push(t, "5b434F9TIlLyZxLiVQ7mPHV", "ModuleHistory");
var n = e("DataBase"), i = e("Connector"), a = e("../Script/Cache"), r = e("../../GameBase/GameConfig").GameConfig, o = (e("../Script/utils"), 
e("../../script/ui/hall/data/App").App);
cc.Class({
extends: cc.Component,
properties: {
layerContent: cc.Node,
preHistoryItem: cc.Prefab,
noData: cc.Node,
toggleContainer: cc.Node,
DLMBtn: cc.Node,
clubBtn: cc.Node,
searchBox: cc.EditBox,
replayContainer: cc.Node,
replayTopContainer: cc.Node,
walletContainer: cc.Node,
walletTopContainer: cc.Node,
pageContainer: cc.Node,
tagContainer: cc.Node,
tagContent: cc.Node,
tagPrefab: cc.Prefab,
recordContent: cc.Node,
recordItem: cc.Prefab,
walletNoData: cc.Node,
lblPage: cc.Label,
typeArr: [],
page: 1,
totalPage: 0,
renderData: null
},
start: function() {
this.addEvents();
this.currentIdx = 1;
this.lastClickTime = 0;
this.isConnect = !1;
this.searchByDate();
this.typeArr = [];
this.renderData = {
page: [],
data: []
};
this.tagContent.removeAllChildren();
var e = r.GameInfo.logsConfig;
for (var t in e) {
var n = cc.instantiate(this.tagPrefab);
n.getComponent("HistoryTagItem").renderUI(t, e[t]);
this.tagContent.addChild(n);
}
},
addEvents: function() {
o.EventManager.addEventListener(r.GameEventNames.SELECT_TAG_HISTORY, this.addTag, this);
o.EventManager.addEventListener(r.GameEventNames.CANCEL_TAG_HISTORY, this.removeTag, this);
},
removeEvents: function() {
o.EventManager.removeEventListener(r.GameEventNames.SELECT_TAG_HISTORY, this.addTag, this);
o.EventManager.removeEventListener(r.GameEventNames.CANCEL_TAG_HISTORY, this.removeTag, this);
},
showWallet: function() {
a.playSfx();
this.replayContainer.active = !1;
this.replayTopContainer.active = !1;
this.walletTopContainer.active = !0;
this.walletContainer.active = !0;
},
showHistory: function() {
a.playSfx();
this.replayContainer.active = !0;
this.replayTopContainer.active = !0;
this.walletTopContainer.active = !1;
this.walletContainer.active = !1;
},
downloadData: function(e) {
var t = this;
this.recordContent.removeAllChildren();
this.walletNoData.active = !1;
i.request(r.ServerEventName.UserHistoryLogs, {
type: this.typeArr,
days: 7,
page: e,
pageSize: 10
}, function(e) {
if (e.logs && e.logs.rows && e.logs.rows.length > 0) {
t.pageContainer.active = !0;
t.totalPage = Math.ceil(e.logs.count / 10);
t.page = e.logs.page;
t.lblPage.string = e.logs.page + "/" + Math.ceil(e.logs.count / 10);
e.logs.rows.forEach(function(e) {
var n = cc.instantiate(t.recordItem);
n.getComponent("HistoryRecordItem").renderUI(e);
t.recordContent.addChild(n);
});
} else {
t.walletNoData.active = !0;
t.pageContainer.active = !1;
}
});
},
showTagContainer: function() {
a.playSfx();
this.tagContainer.active = !0;
},
onClickSearch: function() {
a.playSfx();
this.tagContainer.active = !1;
this.downloadData(1);
},
addTag: function(e) {
var t = this;
e.data.forEach(function(e) {
-1 == t.typeArr.findIndex(function(t) {
return t == e;
}) && t.typeArr.push(e);
});
},
removeTag: function(e) {
var t = this;
e.data.forEach(function(e) {
var n = t.typeArr.findIndex(function(t) {
return t == e;
});
-1 != n && t.typeArr.splice(n, 1);
});
},
addPage: function() {
a.playSfx();
if (this.page >= this.totalPage) a.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.downloadData(e);
}
},
reducePage: function() {
a.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.downloadData(e);
} else a.alertTip("已经是第一页");
},
searchByDate: function() {
this.noData.active = !1;
this.layerContent.destroyAllChildren();
i.request(r.ServerEventName.ClubLogs, {
clubID: o.Club.CurrentClubID,
userID: n.player.id
}, function() {});
},
exitHistory: function() {
a.playSfx();
this.removeEvents();
this.node.destroy();
},
judgeDate: function() {},
seachHistoryById: function() {
a.playSfx();
var e = this.searchBox.string.split("/");
if (e.length < 3) a.alertTip("信息格式不对"); else {
var t = "";
switch (e[1]) {
case "PDK":
case "PDK_SOLO":
case "PDK_SOLO_CLAN":
t = "07";
break;

case "XHZP":
case "XHZP_SOLO":
case "XHZP_SOLO_CLAN":
t = "08";
break;

case "LDZP":
case "LDZP_SOLO":
case "LDZP_SOLO_CLAN":
t = "08";
break;

case "XHZD":
case "XHZD_CLAN":
t = "09";
break;

default:
this.gameType.string = "";
t = "";
}
r.CurrentReplayData = this.searchBox.string;
i.get(r.GameInfo.replayURL + "/" + e[0] + "/" + e[1] + "_" + e[2] + ".json", "getJson", function(n) {
a.replayTime = "";
a.turn = "";
a.replayData = n;
null != n ? "" != t ? cc.loader.loadRes("Main/Prefab/replay" + t, function(n, i) {
if (n) cc.log("error to load replay"); else {
var a = cc.instantiate(i);
a.parent = cc.find("Canvas");
"08" == t && a.getComponent("ModuleReplay" + t).initData(e[1]);
}
}) : a.alertTip("信息错误，无法播放") : a.alertTip("暂无回放");
});
}
},
resetSearch: function() {
a.playSfx();
this.searchByDate();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../Script/Cache": "Cache",
"../Script/utils": "utils",
Connector: "Connector",
DataBase: "DataBase"
} ],
ModuleInfoPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "04dc1sBBbRCkZsCHz/jiyXh", "ModuleInfoPop");
var n = e("../NetWork/Connector"), i = e("../Script/Cache"), a = e("../Script/DataBase"), r = e("../Script/utils"), o = e("../../GameBase/GameConfig").GameConfig, s = (e("SceneLogin"), 
e("../Script/native-extend")), c = (e("../../script/ui/hall/data/App").App, s.Social);
cc.Class({
extends: cc.Component,
properties: {
headerBtn: cc.Node,
avatar: e("../../script/ui/common/Avatar"),
changeDataBtn: cc.Node,
userPhone: cc.Label,
changePhoneBtn: cc.Node,
userPwd: cc.Label,
changePwdBtn: cc.Node,
userNameInput: cc.EditBox,
userID: cc.Label,
userName: cc.Label,
dataEnsureBtn: cc.Node,
sexWord: cc.Label,
sexContainer: cc.Node,
currentHeader: "",
currentSex: ""
},
onLoad: function() {
var e = this;
this.addEvents();
c.avatarUrlCallBack = function(t) {
if (r.isNullOrEmpty(t)) i.alertTip("上传失败"); else {
e.currentHeader = t;
e.avatar.avatarUrl = e.currentHeader;
n.request(o.ServerEventName.UpdatePlayerById, {
head: e.currentHeader,
name: a.player.name,
sex: a.player.sex
}, function(t) {
a.player = t.player;
r.dispatchAllEvent(e.node, o.GameEventNames.PLAYER_DATA_UPDATE);
i.alertTip("修改成功");
});
}
};
this.currentHeader = r.isNullOrEmpty(a.player.head) ? "file://0" : a.player.head;
this.currentSex = a.player.sex;
this.changeUIShow(!1);
this.refreshUIData();
},
addEvents: function() {
this.headerBtn.on(cc.Node.EventType.TOUCH_END, this.onSelectAvatar, this);
this.dataEnsureBtn.on(cc.Node.EventType.TOUCH_END, this.onClickChangeData, this);
this.changeDataBtn.on(cc.Node.EventType.TOUCH_END, this.onClickChange, this);
this.changePhoneBtn.on(cc.Node.EventType.TOUCH_END, this.onChangePhone, this);
this.changePwdBtn.on(cc.Node.EventType.TOUCH_END, this.onChangePwd, this);
this.node.on(o.GameEventNames.PLAYER_DATA_UPDATE, this.refreshUIData, this);
this.userID.node.on(cc.Node.EventType.TOUCH_END, this.copyId, this);
},
removeEvents: function() {},
onClickChange: function() {
i.playSfx();
this.changeUIShow(!0);
},
changeUIShow: function(e) {
this.userName.node.active = !e;
this.changeDataBtn.active = !e;
this.sexWord.node.active = !e;
this.userNameInput.node.active = e;
this.dataEnsureBtn.active = e;
this.sexContainer.active = e;
},
refreshUIData: function() {
this.userNameInput.placeholder = "" + a.player.name;
this.userNameInput.string = "" + a.player.name;
this.userName.string = "" + a.player.name;
this.userPhone.string = a.player.hasBind ? "" + a.player.phone : "未绑定手机";
this.userPwd.string = "" + a.player.password;
this.sexWord.string = "male" == a.player.sex ? "男" : "女";
"file" == this.currentHeader.split("://")[0] && this.currentHeader.split("://")[1];
this.userID.string = "" + a.player.id;
this.avatar.avatarUrl = this.currentHeader;
},
onClickChangeData: function() {
var e = this;
i.playSfx();
n.request(o.ServerEventName.UpdatePlayerById, {
head: this.currentHeader,
name: this.userNameInput.string,
sex: this.currentSex
}, function(t) {
a.player = t.player;
r.dispatchAllEvent(e.node, o.GameEventNames.PLAYER_DATA_UPDATE);
e.changeUIShow(!1);
i.alertTip("修改成功！");
});
},
onClickToggle: function(e) {
i.playSfx();
this.currentHeader = o.ConfigUrl + "avatar/mj_face" + parseInt(e.currentTarget.name.replace("toggle", "")) + ".png";
},
onClickSex: function(e, t) {
i.playSfx();
this.currentSex = t;
},
onChangePhone: function() {
var e = this;
i.playSfx();
r.pop(o.pop.ChangeDataPop, function(t) {
t.getComponent("ModuleChangePop").refreshUIData("phone", e.refreshUIData.bind(e));
});
},
onChangePwd: function() {
var e = this;
i.playSfx();
r.pop(o.pop.ChangeDataPop, function(t) {
t.getComponent("ModuleChangePop").refreshUIData("pwd", e.refreshUIData.bind(e));
});
},
copyId: function() {
i.playSfx();
i.alertTip("id复制成功");
c.setCopy(this.serialID);
},
onSelectAvatar: function() {
i.playSfx();
c.selectPicture();
},
onSyncWxInfo: function() {
i.playSfx();
},
onClickClose: function() {
i.playSfx();
c.avatarUrlCallBack = null;
this.removeEvents();
this.node.removeFromParent();
this.node.onDestroy();
},
onDestroy: function() {
c.avatarUrlCallBack = null;
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/common/Avatar": "Avatar",
"../../script/ui/hall/data/App": "App",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/native-extend": "native-extend",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleInviterPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "b3358uqe7RK9YLTv5i1vi6s", "ModuleInviterPop");
var n = e("../Script/Cache");
cc.Class({
extends: cc.Component,
properties: {
inviterBox: cc.EditBox,
lblMsg: cc.Label
},
show: function(e, t) {
this.lblMsg.string = "" + e;
this.callback = t;
},
ensure: function() {
n.playSfx();
if (this.callback) {
this.callback(this.inviterBox.string.toUpperCase());
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
},
onClickClose: function() {
n.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../Script/Cache": "Cache"
} ],
ModuleLoginPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "0f7a84D9jhAfK5KUv7vZ2uW", "ModuleLoginPop");
var n = e("../NetWork/Connector"), i = e("../Script/Cache"), a = (e("../Script/DataBase"), 
e("../Script/utils")), r = (e("SceneLogin"), e("../../GameBase/GameConfig").GameConfig);
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
loginBtn: cc.Node,
pwdBtn: cc.Node,
codeBtn: cc.Node,
pwdContent: cc.Node,
codeContent: cc.Node,
loginType: 1,
phoneInput: cc.Label,
pwdInput: cc.EditBox,
codeInput: cc.EditBox,
errorTips: cc.Label,
getCodeBtn: cc.Node,
codeTime: cc.Label,
codeCoolDown: !0,
checkWeb: cc.WebView
},
onLoad: function() {
this.addEvents();
this.refreshUI();
this.checkWeb.url = cc.sys.isBrowser ? r.ConfigUrl + "info/checkCodeWeb1.html" : r.ConfigUrl + "info/checkCode.html";
if (!cc.sys.isBrowser) {
var e = this;
this.checkWeb.setJavascriptInterfaceScheme("testkey");
this.checkWeb.setOnJSCallback(function(t, n) {
var i = n.replace("testkey://", "");
console.log("jsCallback-------str-------", i);
console.log("jsCallback-------target-------", t);
console.log("jsCallback-------url-------", n);
var a = i.split("&"), r = {
ticket: a[0],
randstr: a[1]
};
e.closeWebView(r);
});
}
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.loginBtn.on(cc.Node.EventType.TOUCH_END, this.onClickLogin, this);
this.pwdBtn.on(cc.Node.EventType.TOUCH_END, this.onClickPwd, this);
this.codeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickCode, this);
this.getCodeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickGetCode, this);
cc.sys.isBrowser && window.addEventListener("message", this.handleCheckCode.bind(this));
},
removeEvents: function() {
console.log("ceshi -removeEventsremoveEvents--------------------");
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.loginBtn.off(cc.Node.EventType.TOUCH_END, this.onClickLogin, this);
this.pwdBtn.off(cc.Node.EventType.TOUCH_END, this.onClickPwd, this);
this.codeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickCode, this);
this.getCodeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickGetCode, this);
cc.sys.isBrowser && window.removeEventListener("message", this.handleCheckCode.bind(this));
},
handleCheckCode: function(e) {
console.log("webData: ", e.data);
var t = e.data.replace("testkey://", "");
console.log("jsCallback-------str-------", t);
var n = t.split("&"), i = {
ticket: n[0],
randstr: n[1]
};
this.startLogin(i);
},
refreshUI: function() {
var e = a.getValue(r.StorageKey.UserPwd);
if (!a.isNullOrEmpty(e)) {
this.pwdBtn.getComponent(cc.Toggle).check();
this.onClickPwd();
}
var t = a.getValue(r.StorageKey.UserAccount);
this.pwdInput.string = e;
this.phoneInput.string = t;
},
onClickPhone: function() {
var e = this;
i.showNumer("输入手机号", r.NumberType.INT, function(t) {
e.phoneInput.string = "" + t;
});
},
onClickPwd: function() {
this.pwdContent.active = !0;
this.codeContent.active = !1;
this.codeInput.string = "";
var e = a.getValue(r.StorageKey.UserPwd);
this.pwdInput.string = e;
this.loginType = 0;
},
onClickCode: function() {
this.codeContent.active = !0;
this.pwdContent.active = !1;
this.loginType = 1;
this.pwdInput.string = "";
},
onClickGetCode: function() {
var e = this;
if (a.checkPhone(this.phoneInput.string)) {
if (this.codeCoolDown) {
var t = a.getTimeStamp();
Math.floor((t - r.sendCodeTime) / 1e3) < 30 ? i.alertTip("请" + (30 - Math.floor((t - r.sendCodeTime) / 1e3)) + "秒后再试") : n.request(r.ServerEventName.SendCode, {
phone: this.phoneInput.string
}, function(t) {
if (t.success) {
r.sendCodeTime = a.getTimeStamp();
e.codeCoolDown = !1;
i.alertTip("已发送验证码");
e.getCodeBtn.getComponent(cc.Button).interactable = !1;
var n = 30;
e.codeTime.string = "(" + n + "s)";
e.codeTime.schedule(function() {
e.codeTime.string = "(" + --n + "s)";
if (0 == n) {
e.codeTime.string = "验证码";
e.codeCoolDown = !0;
e.codeTime.unscheduleAllCallbacks();
e.getCodeBtn.getComponent(cc.Button).interactable = !0;
}
}, 1);
}
});
}
} else this._showErrorHint("手机号码格式有误");
},
onClickLogin: function() {
if (a.checkPhone(this.phoneInput.string)) if (0 == this.loginType) {
if (!this.pwdInput.string || this.pwdInput.string.length < 1) {
this._showErrorHint("密码不能为空");
return;
}
this.startLogin();
} else {
if (!this.codeInput.string || this.codeInput.string.length < 1) {
this._showErrorHint("验证码不能为空");
return;
}
this.startLogin();
} else this._showErrorHint("手机号码格式有误");
},
startCheck: function() {
this.checkWeb.node.active = !0;
},
closeWebView: function(e) {
this.checkWeb.node.active = !1;
this.startLogin(e);
},
startLogin: function(e) {
var t = this;
if (this.checkWeb) {
this.checkWeb.node.active = !1;
var o = a.encryptToken(this.pwdInput.string), s = e ? {
ticket: e.ticket,
randstr: e.randstr,
phone: this.phoneInput.string,
password: o,
code: this.codeInput.string,
publicKey: r.Encrtyptor.getPublicKey()
} : {
phone: this.phoneInput.string,
password: o,
code: this.codeInput.string,
publicKey: r.Encrtyptor.getPublicKey()
};
n.request(r.ServerEventName.UserLogin, s, function(e) {
if (e.success && e.token) {
t.removeEvents();
a.saveValue(r.StorageKey.UserPwd, t.pwdInput.string);
a.saveValue(r.StorageKey.UserLoginTime, parseInt(new Date().getTime() / 1e3));
cc.director.loadScene("Lobby");
}
}, !0, function(e) {
i.showTipsMsg(e.message);
});
}
},
startCodeLogin: function() {
var e = this;
this.checkWeb && (this.checkWeb.node.active = !1);
var t = this, o = {
phone: this.phoneInput.string,
code: this.codeInput.string,
publicKey: r.Encrtyptor.getPublicKey()
};
n.request(r.ServerEventName.UserLogin, o, function(t) {
if (t.success && t.token) {
e.removeEvents();
a.saveValue(r.StorageKey.UserLoginTime, parseInt(new Date().getTime() / 1e3));
cc.director.loadScene("Lobby");
}
}, !0, function(e) {
try {
502 == e.status.code ? i.inputInviterPop("邀请码错误", function(e) {
r.InviteCode = {
inviter: "" + e
};
t.onClickLogin();
}) : i.showTipsMsg(e.message);
} catch (t) {
i.showTipsMsg(e.message);
}
});
},
_showErrorHint: function(e) {
var t = this;
this.errorTips.node.active = !0;
this.errorTips.string = e;
this.scheduleOnce(function() {
t.errorTips.node.active = !1;
}, 2);
},
onClickClose: function() {
this.removeEvents();
this.node.removeFromParent();
this.node.destroy();
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleMarketConfirm: [ function(e, t) {
"use strict";
cc._RF.push(t, "c21a83s5h9GhrD6AanOhHhY", "ModuleMarketConfirm");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("../NetWork/Connector"), a = e("../Script/Cache");
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
lblChannel: cc.Label,
lblBtnWord: cc.Label,
confirmBtn: cc.Node,
marketData: null
},
onLoad: function() {
this.addEvents();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
},
initData: function(e, t) {
this.marketData = e;
this.lblBtnWord.string = "buy" == this.marketData.operate ? "确认出售" : "已付款";
this.lblChannel.string = "buy" == this.marketData.operate ? "出售金额: " + this.marketData.amount : "支付信息：" + this.marketData.seller[t];
},
onClickConfirm: function() {
var e = this;
a.playSfx();
i.request(n.ServerEventName.OTCConfirm, {
marketID: this.marketData.id
}, function() {
e.onClickClose();
});
},
onClickClose: function() {
a.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache"
} ],
ModuleMarketPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "0a9dbSf8/hCBbHkIFdBmwXr", "ModuleMarketPop");
var n = e("../NetWork/Connector"), i = e("../Script/Cache"), a = e("../Script/DataBase"), r = e("../Script/utils"), o = e("../../GameBase/GameConfig").GameConfig, s = e("../Script/native-extend"), c = e("../../script/ui/hall/data/App").App, l = s.Social;
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
tradeBtn: cc.Node,
tradeRed: cc.Node,
pageContainer: cc.Node,
marketAccountInfo: cc.Prefab,
payTypePop: cc.Prefab,
sellSelectPop: cc.Prefab,
marketsPage: cc.Prefab,
tradesPage: cc.Prefab,
amountContainer: cc.Node,
bgMask: cc.Sprite,
lblReward: cc.Label,
lblFrozen: cc.Label,
lblRemain: cc.Label,
newGuide1: cc.Node,
newGuide2: cc.Node,
maskBtnArr: [ cc.Node ],
tradeAmount: 0,
payType: "",
tradeType: "fast"
},
onLoad: function() {
var e = r.getValue(o.StorageKey.FirstOpenSlow, !0);
e && (this.newGuide1.active = !0);
r.saveValue(o.StorageKey.FirstOpenSlow, !1);
(e = r.getValue(o.StorageKey.FirstOpenMarket, !1)) || i.showTipsMsg("迎新春特惠,选择加速购买免除手续费。欢迎大家体验", function() {}, o.StorageKey.FirstOpenMarket);
this.refreshUI();
this.addEvents();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
cc.find("Canvas").on(o.GameEventNames.SHOW_TRADE_TIPS, this.handleTrade, this);
this.node.on(o.GameEventNames.HIDE_TRADE_TIPS, this.hideTradeTips, this);
this.node.on(o.GameEventNames.REFRESH_SELL_INFO, this.refreshSellAmount, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
cc.find("Canvas").off(o.GameEventNames.SHOW_TRADE_TIPS, this.handleTrade, this);
this.node.off(o.GameEventNames.HIDE_TRADE_TIPS, this.hideTradeTips, this);
this.node.off(o.GameEventNames.REFRESH_SELL_INFO, this.refreshSellAmount, this);
},
newGuide1Click: function() {
i.playSfx();
this.newGuide1.active = !1;
this.newGuide2.active = !0;
},
newGuide2Click: function() {
i.playSfx();
this.newGuide1.active = !1;
this.newGuide2.active = !1;
},
refreshSellAmount: function() {
var e = this;
n.request(o.ServerEventName.OTCInfo, {}, function(t) {
if (t.market) {
e.marketData = t.market;
e.lblFrozen.string = "冻结金额 " + r.formatGold(t.market.frozen) + "元";
e.lblRemain.string = "在售金额 " + r.formatGold(t.market.remain) + "元";
} else {
e.lblFrozen.string = "冻结金额 0元";
e.lblRemain.string = "在售金额 0元";
}
var n = t.buyCount || 0;
e.maskBtnArr.forEach(function(e, t) {
e.active = t > n;
});
});
},
refreshUI: function() {
var e = this;
this.handleTrade();
this.refreshSellAmount();
try {
var t = a.player.dealInfo.rewards;
this.lblReward.string = null != t ? "今日已获奖励: " + Math.floor((o.GameInfo.otcConfig.REWARD_DAILY_TOTAL - t.daily.total) / 100) + "/" + Math.floor(o.GameInfo.otcConfig.REWARD_DAILY_TOTAL / 100) + " 元    本周已获奖励: " + Math.floor((o.GameInfo.otcConfig.REWARD_WEEKLY_TOTAL - t.weekly.total) / 100) + "/" + Math.floor(o.GameInfo.otcConfig.REWARD_WEEKLY_TOTAL / 100) + " 元" : "";
} catch (e) {
this.lblReward.string = "";
l.reportError(e);
}
o.GameInfo.priceTag.forEach(function(t, n) {
e.amountContainer.getChildByName("toggle" + n).getChildByName("desc").getComponent(cc.Label).string = "¥" + r.formatGold(t);
e.amountContainer.getChildByName("toggle" + n).getChildByName("reward").getComponent(cc.Label).string = "slow" == e.tradeType ? "额外赠送 " + r.formatGold(Math.min(t * o.GameInfo.otcConfig.SLOW_BUY_REWARD, o.GameInfo.otcConfig.REWARD_DAILY_TOTAL)) + " 元" : "额外赠送 " + r.formatGold(Math.min(.005 * t, o.GameInfo.otcConfig.REWARD_DAILY_TOTAL)) + " 元";
});
},
openAccountInfo: function() {
i.playSfx();
var e = cc.instantiate(this.marketAccountInfo);
this.pageContainer.addChild(e);
},
selectOrderAmount: function(e, t) {
var n = this;
i.playSfx();
this.tradeAmount = o.GameInfo.priceTag[parseInt(t)];
cc.instantiate(this.payTypePop).getComponent("PayTypePop").show(function(e) {
n.payType = e;
n.createTrade();
});
},
createTrade: function() {
var e = this;
n.request(o.ServerEventName.OTCCreateTrade, {
amount: this.tradeAmount,
payType: this.payType,
tradeType: "fast"
}, function() {
if (r.getValue(o.StorageKey.CreateTrade, !1)) {
var t = cc.instantiate(e.tradesPage);
e.pageContainer.addChild(t);
} else i.showTipsMsg("仔细核对对方收款账户信息,避免转错账户,（请保留付款凭证,作为申诉依据）", function() {
var t = cc.instantiate(e.tradesPage);
e.pageContainer.addChild(t);
}, o.StorageKey.CreateTrade);
});
},
onClickSell: function() {
var e = this;
i.playSfx();
r.isNullOrEmpty(a.player.alipay) && r.isNullOrEmpty(a.player.bank) && r.isNullOrEmpty(a.player.wechat) ? i.showConfirm("至少填写一种收款信息", function() {
var t = cc.instantiate(e.marketAccountInfo);
e.pageContainer.addChild(t);
}) : r.isNullOrEmpty(this.marketData) ? i.alertTip("加载数据失败,请重新进入交易所") : cc.instantiate(this.sellSelectPop).getComponent("SellSelectPop").show(this.marketData, function(t) {
n.request(o.ServerEventName.OTCMarket, {
total: 100 * t,
tradeType: "fast"
}, function(t) {
i.alertTip("寄售成功");
a.player.wallet = t.wallet;
e.refreshSellAmount();
c.EventManager.dispatchEventWith(o.GameEventNames.UPDATE_WALLET);
});
});
},
openSellHistory: function() {
i.playSfx();
var e = cc.instantiate(this.marketsPage);
this.pageContainer.addChild(e);
},
openTradesHistory: function() {
i.playSfx();
var e = cc.instantiate(this.tradesPage);
this.pageContainer.addChild(e);
},
handleTrade: function() {
if (0 != r.getValue("" + o.StorageKey.TradeWaitting + a.player.id, []).length) {
this.tradeRed.active = !0;
this.tradeBtn.stopAllActions();
var e = cc.scaleTo(.3, 1.2), t = cc.scaleTo(.3, 1), n = cc.sequence(e, t).repeatForever();
this.tradeBtn.runAction(n);
}
},
hideTradeTips: function() {
if (!(r.getValue("" + o.StorageKey.TradeWaitting + a.player.id, []).length > 0)) {
this.tradeRed.active = !1;
this.tradeBtn.stopAllActions();
this.tradeBtn.scale = 1;
this.tradeBtn.rotation = 0;
}
},
showRuleTips: function() {
i.showTipsMsg("加速购买到账时间约为2分钟，要支付" + r.toPercent(o.GameInfo.otcConfig.FAST_BUY_FEE) + "的手续费");
},
lockedTips: function(e, t) {
i.playSfx();
i.alertTip("成功完成" + t + "次交易后解锁");
},
onClickClose: function() {
i.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/native-extend": "native-extend",
"../Script/utils": "utils"
} ],
ModuleMatchPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "d46ffSiNO5CfqMvjT/L5JNL", "ModuleMatchPop");
var n = e("../../Main/NetWork/Connector"), i = e("../../Main/Script/Cache"), a = (e("../../Main/Script/ROUTE"), 
e("../../Main/Script/utils")), r = e("../../Main/Script/DataBase"), o = e("../GameConfig").GameConfig, s = e("../../script/ui/hall/data/App").App, c = {
wait: {
desc: "等待",
color: "#43AFFF"
},
agree: {
desc: "同意",
color: "#00d900"
},
refuse: {
desc: "拒绝",
color: "#ff2d2d"
}
};
cc.Class({
extends: cc.Component,
properties: {
joinTips: cc.Node,
closeBtn: cc.Node,
statusTips: cc.Label,
matchTime: cc.Label,
tipsNode: cc.Node,
warnning: cc.Label,
tips: cc.Label,
lblQueue: cc.Label,
rankNode: [ cc.Node ],
rankContainer: cc.Node,
rankAvatar: [ e("../../script/ui/common/Avatar") ],
progressBar: cc.ProgressBar,
matchInfoNode: cc.Node,
matchQueue: [ cc.Node ],
agreeBtn: cc.Node,
refuseBtn: cc.Node,
lblOperatime: cc.Label,
adComponent: e("../../script/ui/ad/AdComponent"),
matchDowntime: 0,
interval: 0,
_delayTime: 0,
_handleData: !1,
matchID: null
},
onLoad: function() {
var e = this;
if (a.isNullOrEmpty(o.AdData) || a.isNullOrEmpty(o.AdData.matchTopAd)) this.adComponent.hideAd(); else {
this.adComponent.showAd();
this.adComponent.initAd(o.AdData.matchTopAd);
}
this.warnning.string = "" + [ "公平游戏，你好我好大家好，作弊不可取，举报系统头上顶，杀完猪了就封你。", "游戏内设举报功能，经系统核实，被举报者会受到相应的处罚，例如罚款，严重者即封号。", "举报及拉黑，不用担心排一起，也不用担心被合伙。", "打牌不是英雄联盟，王者荣耀，请不要团队合作。", "合作作弊一时爽，钱号两空无处找。" ][Math.floor(5 * Math.random())];
if (!a.isNullOrEmpty(o.TaskData)) {
this.tips.string = o.TaskData.word;
if (!a.isNullOrEmpty(o.TaskData.rank)) {
this.rankContainer.active = !0;
o.TaskData.rank.forEach(function(t, n) {
t.user.head && (e.rankAvatar[n].avatarUrl = t.user.head);
e.rankNode[n].getChildByName("name").getComponent(cc.Label).string = "" + a.getStringByLength(t.user.name, 4);
e.rankNode[n].getChildByName("score").getComponent(cc.Label).string = t.reward / 100 + "元";
});
}
}
},
startMatch: function(e) {
var t = this;
a.getIP().then(function(n) {
a.isNullOrEmpty(n) && (n = "186.186.186." + Math.floor(256 * Math.random()));
t.JoinMatch(e, n);
}).catch(function() {
var n = "186.186.186." + Math.floor(256 * Math.random());
t.JoinMatch(e, n);
});
},
JoinMatch: function(e, t) {
var r = this;
n.request(o.ServerEventName.JoinMatch, {
roomID: e,
clubID: s.Club.CurrentClubID,
location: i.location,
ip: t
}, function(e) {
a.isNullOrEmpty(e.queue) || (r.lblQueue.string = "当前队列人数: " + e.queue);
r.matchTiming();
r.updateMatch();
r.schedule(function() {
r.updateMatch();
}, 5);
}, !0, function(e) {
i.showTipsMsg(a.isNullOrEmpty(e.message) ? "匹配错误" : e.message, function() {
if (r.node) {
r.node.removeFromParent();
r.node.destroy();
}
});
});
},
resumeMatch: function() {
var e = this;
this.joinTips.active = !1;
this.matchTiming();
this.updateMatch();
this.schedule(function() {
e.updateMatch();
}, 5);
},
handleDataSuccess: function() {
this._handleData = !1;
},
updateMatch: function() {
var e = this;
n.request(o.ServerEventName.MatchInfo, {}, function(t) {
a.isNullOrEmpty(t.queue) || (e.lblQueue.string = "当前队列人数: " + t.queue);
if (t.connectInfo) {
e.matchTime.unscheduleAllCallbacks();
e.unscheduleAllCallbacks();
o.ShowTablePop = !0;
n.connect(t.connectInfo, function() {
try {
o.CurrentGameType = t.connectInfo.data.gameType;
r.setGameType(r.GAME_TYPE[t.connectInfo.data.gameType]);
cc.director.loadScene(r.TABLE_TYPE[t.connectInfo.data.gameType]);
} catch (e) {
cc.director.loadScene("Lobby");
}
});
} else if (t.matchInfo) {
e.joinTips.active = !1;
e.closeBtn.active = !0;
} else {
i.alertTip("匹配已退出");
e.matchTime.unscheduleAllCallbacks();
e.unscheduleAllCallbacks();
if (e.node) {
e.node.removeFromParent();
e.node.destroy();
}
}
}, null, function(t) {
if (!t.type || t.type != o.ErrorType.Timeout) {
cc.find("Canvas/WinConfirm") || i.showTipsMsg(t.message || "匹配已退出");
if (e.node) {
e.matchTime.unscheduleAllCallbacks();
e.unscheduleAllCallbacks();
e.node.removeFromParent();
e.node.destroy();
}
}
});
},
handleMatchInfo: function(e) {
this.joinTips.active = !1;
if (!a.isNullOrEmpty(e.matchInfo)) {
a.isNullOrEmpty(e.matchInfo.queue) || (this.lblQueue.string = "当前队列人数: " + e.matchInfo.queue);
a.isNullOrEmpty(e.expire) || (this.matchDowntime = e.expire);
if (!a.isNullOrEmpty(e.matchInfo)) {
switch (e.matchInfo.code) {
case 1e3:
this.closeBtn.active = !0;
break;

case 3e3:
if (a.isNullOrEmpty(e.matchResult)) this.matchInfoNode.active = !1; else {
this.closeBtn.active = !1;
this.tipsNode.active = !0;
this.statusTips.string = "匹配成功";
this.matchDowntime = e.matchResult.expire;
this.matchID = e.matchResult.matchID;
this.showMatchInfo(e.matchResult.players);
}
break;

case 2001:
i.alertTip("加入游戏失败");
break;

case 4100:
i.alertTip("已拒绝进入游戏");
break;

case 4001:
i.alertTip("其他玩家拒绝进入游戏");
break;

case 4101:
i.alertTip("响应超时,房间已解散");
break;

case 4002:
i.alertTip("其他玩家响应超时,房间已解散");
break;

case 4102:
i.alertTip("加入房间失败,请稍后再试");
break;

case 4103:
i.alertTip("有玩家金币不足,无法开始游戏");
}
if ("END" == e.matchInfo.status) {
this.matchTime.unscheduleAllCallbacks();
this.unscheduleAllCallbacks();
this.node.destroy();
}
}
}
},
cancelEnterGame: function() {
i.playSfx();
this.matchTime.unscheduleAllCallbacks();
this.unscheduleAllCallbacks();
},
enterGame: function() {
o.ShowTablePop = !0;
n.connect(data, function() {
o.CurrentGameType = data.connectInfo.gameType;
r.setGameType(r.GAME_TYPE[data.connectInfo.gameType]);
cc.director.loadScene(r.TABLE_TYPE[data.connectInfo.gameType]);
});
},
matchTiming: function() {
var e = this;
this.matchTime.unscheduleAllCallbacks();
var t = new Date().getTime();
this.matchTime.schedule(function() {
var n = new Date().getTime() - t, i = Math.floor(n / 1e3 / 60), a = Math.floor(n / 1e3 % 60), r = i < 10 ? "0" + i : "" + i, o = a < 10 ? "0" + a : "" + a;
e.matchTime.string = r + ":" + o;
}, 1);
},
onClickClose: function() {
var e = this;
i.playSfx();
this.closeBtn.getChildByName("desc").getComponent(cc.Label).string = "正在取消";
this.closeBtn.getChildByName("desc").color = new cc.Color(255, 255, 255);
this.closeBtn.getComponent(cc.Button).interactable = !1;
n.request(o.ServerEventName.CancelMatch, {}, function() {}, !0, function() {
i.alertTip("取消失败");
e.closeBtn.getComponent(cc.Button).interactable = !0;
e.closeBtn.getChildByName("desc").color = new cc.Color(187, 82, 5);
e.closeBtn.getChildByName("desc").getComponent(cc.Label).string = "取消匹配";
});
},
showMatchInfo: function(e) {
var t = this;
this.matchInfoNode.active = !0;
var n;
n = o.isNewMatch ? e.findIndex(function(e) {
return parseInt(e.userID) == r.player.id;
}) : e.findIndex(function(e) {
return parseInt(e.id) == r.player.id;
});
this.refuseBtn.active = "wait" == e[n].status;
this.agreeBtn.active = "wait" == e[n].status;
e.forEach(function(i, a) {
try {
t.matchQueue[a].active = !0;
t.matchQueue[a].getChildByName("lblStatus").getComponent(cc.Label).string = c[i.status].desc;
t.matchQueue[a].getChildByName("lblStatus").color = new cc.color(c[i.status].color);
e[n].friend || (t.matchQueue[a].getChildByName("sameTable").active = i.friend);
} catch (e) {}
});
},
agreeJoinGame: function(e, t) {
var a = this;
n.request(o.ServerEventName.MatchOperate, {
option: t,
matchID: this.matchID
}, function() {
a.updateMatch();
}, 1, function(e) {
i.alertTip(e.message || "网络波动,请稍后再试");
a.updateMatch();
});
},
update: function() {
this.progressBar.progress >= 1 && (this.progressBar.progress = 0);
this.progressBar.progress += .002;
if (0 != parseInt(this.matchDowntime)) {
this.interval++;
if (this.interval % 60 == 0) {
this.interval = 0;
var e = a.getTimeStamp(), t = parseInt(this.matchDowntime);
if (e >= t) {
this.lblOperatime.string = "倒计时:0秒";
return;
}
this.lblOperatime.string = "倒计时:" + Math.floor((t - e) / 1e3) + "秒";
}
}
}
});
cc._RF.pop();
}, {
"../../Main/NetWork/Connector": "Connector",
"../../Main/Script/Cache": "Cache",
"../../Main/Script/DataBase": "DataBase",
"../../Main/Script/ROUTE": "ROUTE",
"../../Main/Script/utils": "utils",
"../../script/ui/ad/AdComponent": "AdComponent",
"../../script/ui/common/Avatar": "Avatar",
"../../script/ui/hall/data/App": "App",
"../GameConfig": "GameConfig"
} ],
ModuleMessagePop: [ function(e, t) {
"use strict";
cc._RF.push(t, "96420q2s11NCKF5N2wNCze6", "ModuleMessagePop");
e("../NetWork/Connector");
var n = e("../Script/Cache"), i = (e("../Script/DataBase"), e("../Script/utils")), a = (e("SceneLogin"), 
e("../../GameBase/GameConfig").GameConfig), r = (e("../Script/audio-ctrl"), e("../GoEasy/GoEasy").GoEasy), o = e("../Script/native-extend"), s = e("../GoEasy/GoEasyConfig").GoEasyConfig, c = o.Social;
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
msgContent: cc.Node,
noData: cc.Node,
msgItem: cc.Prefab,
updateInfo: !1
},
onLoad: function() {
this.addEvents();
this.refreshUI();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
},
refreshUI: function() {
var e = this, t = r._queueMailMsg.concat(i.getValue(a.StorageKey.EmaliMsg, []));
if (i.isNullOrEmpty(t)) {
this.noData.active = !0;
this.msgContent.active = !1;
} else {
this.noData.active = !1;
this.msgContent.active = !0;
t.forEach(function(t) {
if (!i.isNullOrEmpty(t)) {
var a = t;
if (!i.isNullOrEmpty(a.type) && "RECHARGE" == a.type) {
e.updateInfo = !0;
a.type = "MAIL";
}
var r = cc.instantiate(e.msgItem), o = a.content.match(/#(\S*)#/);
o && r.on(cc.Node.EventType.TOUCH_END, function() {
n.alertTip("复制成功");
c.setCopy(o[1]);
});
var s = a.content.replace(/#/g, "");
r.getChildByName("content").getComponent(cc.Label).string = "" + s;
r.getChildByName("titleContainer").getChildByName("title").getComponent(cc.Label).string = a.title;
r.getChildByName("titleContainer").getChildByName("date").getComponent(cc.Label).string = parseInt(a.timestamp) > 0 ? i.timestampToTime(a.timestamp) : a.timestamp;
e.msgContent.addChild(r);
}
});
i.saveValue(a.StorageKey.EmaliMsg, t);
r._queueMailMsg = [];
r.markGroupAsRead(s.Group[0]);
r.markPrivateAsRead(s.ServerID);
}
},
onClickClose: function() {
n.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../GoEasy/GoEasy": "GoEasy",
"../GoEasy/GoEasyConfig": "GoEasyConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/audio-ctrl": "audio-ctrl",
"../Script/native-extend": "native-extend",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleNiaoCards16: [ function(e, t) {
"use strict";
cc._RF.push(t, "1fb86j64a5Ly7iv3FfE+FPb", "ModuleNiaoCards16");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
cardAnim: cc.Node
},
init: function(e, t, i) {
var a = this;
0 == e && (e = 35);
this.node.getComponent(cc.Sprite).spriteFrame = n.cardsSpriteFrame["p1b" + e];
this.node.scale = 0;
var r = cc.scaleTo(.2, 1.5), o = cc.scaleTo(.1, .8), s = cc.scaleTo(.1, 1), c = cc.delayTime(.1 * i), l = cc.sequence(c, r, o, s, cc.callFunc(function() {
t ? a.cardAnim.active = !0 : a.node.color = cc.color(142, 142, 142);
}));
this.node.runAction(l);
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleNodeFace: [ function(e, t) {
"use strict";
cc._RF.push(t, "f1169p396xJlZnWNu6IsAfZ", "ModuleNodeFace");
e("DataBase");
cc.Class({
extends: cc.Component,
properties: {
spriteFrame: [ cc.SpriteFrame ],
nodeFace: cc.Sprite,
clips: [ cc.AnimationClip ],
animationSprite: cc.SpriteAtlas
},
init: function(e, t, n) {
for (var i = this, a = [], r = t > 9 ? t + "" : "0" + t, o = 1; o < 6; o++) a.push(this.animationSprite._spriteFrames["exp_" + r + "_" + o]);
this.clips[t] = cc.AnimationClip.createWithSpriteFrames(a, 30);
this.clips[t].wrapMode = 0;
this.clips[t].speed = .3;
cc.log(e, n);
this.node && (this.node.opacity = 0);
this.nodeFace.spriteFrame = this.spriteFrame[t];
var s = this.nodeFace.node.getComponent(cc.Animation);
this.nodeFace.node.position = n[e];
s.addClip(this.clips[t], "clip");
this.node.runAction(cc.sequence(cc.fadeIn(.3), cc.callFunc(function() {
s.play("clip");
})));
s.on("finished", function() {
i.node.runAction(cc.sequence(cc.delayTime(.8), cc.fadeIn(.3), cc.callFunc(function() {
i.node && i.node.destroy();
})));
});
}
});
cc._RF.pop();
}, {
DataBase: "DataBase"
} ],
ModuleNotice: [ function(e, t) {
"use strict";
cc._RF.push(t, "e8d3eLNJB5AII3fsATMU1fA", "ModuleNotice");
cc.Class({
extends: cc.Component,
properties: {
lblNotice: cc.Label,
speed: {
default: 100,
tips: "广播的速度"
}
},
onLoad: function() {},
start: function() {},
showTips: function(e, t) {
var n = this;
void 0 === t && (t = 3);
this.node.zIndex = 504;
this.node.position = cc.v2(0, 235);
this.lblNotice.string = e;
this.lblNotice.node.stopAllActions();
setTimeout(function() {
if (n.lblNotice) {
var e = n.lblNotice.node.width + n.lblNotice.node.parent.width, i = cc.place(cc.v2(n.lblNotice.node.parent.width / 2, 0)), a = cc.moveBy(e / n.speed, cc.v2(-e, 0)), r = 0, o = cc.sequence(cc.callFunc(function() {
r++;
}), i, a, cc.callFunc(function() {
r == t && n.node.destroy();
})), s = cc.repeat(o, t);
n.lblNotice.node.runAction(s);
}
}, 100);
}
});
cc._RF.pop();
}, {} ],
ModuleOtherCardsMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "7efe0G+pZVE15LTDOk/dKkq", "ModuleOtherCardsMJ");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {},
init: function(e, t) {
0 == e && (e = 35);
this.node.getComponent(cc.Sprite).spriteFrame = n.cardsSpriteFrame["p" + (t + 1) + "s" + e];
this.node.height *= scale;
this.node.width *= scale;
if (this.node.getChildByName("ting")) {
this.node.getChildByName("ting").height *= scale;
this.node.getChildByName("ting").width *= scale;
}
this.node.getChildByName("lai") && showLai && (this.node.getChildByName("lai").active = 0 == e);
if (this.node.getChildByName("back")) {
this.node.getChildByName("back").height *= scale;
this.node.getChildByName("back").width *= scale;
}
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleOtherHands16: [ function(e, t) {
"use strict";
cc._RF.push(t, "2b997MXyP9KwbREMrD9IF1H", "ModuleOtherHands16");
cc.Class({
extends: cc.Component,
properties: {
layoutGround: e("./ModuleHandGround16")
},
onLoad: function() {
this.layoutHands = this.node.getChildByName("layoutHands");
this.layoutGetCard = this.node.getChildByName("layoutGetCard");
this.layoutGetCard.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.5, 130), cc.fadeTo(.5, 255))));
},
init: function(e) {
this.node.active = !0;
for (var t = 0; t < e.hands; t++) this.layoutHands.children[t].active = !0;
e.ground && this.layoutGround.initGround(e.ground);
},
outCard: function() {
this.layoutGetCard.active ? this.layoutGetCard.active = !1 : this.removeHands();
},
getCard: function() {
this.layoutGetCard.active = !0;
},
setHands: function(e) {
switch (e.type) {
case "peng":
this.removeHands();
this.removeHands();
break;

case "fang":
this.removeHands();
this.removeHands();
this.removeHands();
break;

case "suo":
this.removeHands();
break;

case "an":
this.removeHands();
this.removeHands();
this.removeHands();
this.removeHands();
}
},
removeHands: function() {
if (1 != this.layoutGetCard.active) {
var e = this.layoutHands.children, t = e.findIndex(function(e) {
return 1 == e.active;
});
t >= 0 && (e[t].active = !1);
} else this.layoutGetCard.active = !1;
},
action: function(e) {
this.setHands(e);
this.layoutGround.addGround(e);
},
reset: function() {
this.layoutGround.resetGround();
this.layoutGetCard.active = !1;
this.layoutHands.children.forEach(function(e) {
e.active = !1;
});
}
});
cc._RF.pop();
}, {
"./ModuleHandGround16": "ModuleHandGround16"
} ],
ModuleOtherHandsMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "4c728nhK6BMZJj594BWS0Mh", "ModuleOtherHandsMJ");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("../../Main/Script/utils");
cc.Class({
extends: cc.Component,
properties: {
layoutGround: e("./ModuleHandGroundMJ"),
layoutFlower: e("./ModuleFlowerMJ")
},
onLoad: function() {
this.layoutHands = this.node.getChildByName("layoutHands");
this.layoutGetCard = this.node.getChildByName("layoutGetCard");
this.layoutGetCard.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.5, 130), cc.fadeTo(.5, 255))));
},
init: function(e, t) {
this.node.active = !0;
console.log("初始化对方手牌-----", e);
this.layoutGetCard.active = e.hands.length > 13;
for (var a = 0; a < Math.min(e.hands, 13); a++) this.layoutHands.children[a].active = !0;
if (!i.isNullOrEmpty(e.grounds)) {
var r = e.grounds.filter(function(e) {
return e.event != n.GameAction.FLOWER;
});
this.layoutGround.initGround(r, t);
var o = e.grounds.filter(function(e) {
return e.event == n.GameAction.FLOWER;
});
this.layoutFlower.initFlower(o, t);
}
},
outCard: function() {
this.layoutGetCard.active ? this.layoutGetCard.active = !1 : this.removeHands();
},
getCard: function() {
this.layoutGetCard.active = !0;
},
setHands: function(e) {
console.log("--删除类型-", e);
switch (e.event) {
case n.GameAction.PONG:
case n.GameAction.CHOW:
console.log("--删除2张-");
this.removeHands();
this.removeHands();
break;

case n.GameAction.ZHI:
console.log("--删除3张-");
this.removeHands();
this.removeHands();
this.removeHands();
break;

case n.GameAction.SHOW:
console.log("--删除1张-");
this.removeHands();
break;

case n.GameAction.KONG:
console.log("--删除4张-");
this.removeHands();
this.removeHands();
this.removeHands();
this.removeHands();
}
},
removeHands: function() {
if (1 != this.layoutGetCard.active) {
var e = this.layoutHands.children, t = e.findIndex(function(e) {
return 1 == e.active;
});
t >= 0 && (e[t].active = !1);
} else this.layoutGetCard.active = !1;
},
action: function(e, t) {
this.setHands(e);
this.layoutGround.addGround(e, t);
},
actionflower: function(e, t) {
this.setHands(e);
this.layoutFlower.addFlower(e, t);
},
reset: function() {
this.layoutGround.resetGround();
this.layoutFlower.resetFlower();
this.layoutGetCard.active = !1;
this.layoutHands.children.forEach(function(e) {
e.active = !1;
});
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../Main/Script/utils": "utils",
"./ModuleFlowerMJ": "ModuleFlowerMJ",
"./ModuleHandGroundMJ": "ModuleHandGroundMJ"
} ],
ModulePart08: [ function(e, t) {
"use strict";
cc._RF.push(t, "c9e88hcAAtJcbnUjFfMtovT", "ModulePart08");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
lblName: cc.Label,
lblEndScore: cc.Label,
lblEndScoreNeg: cc.Label,
lblId: cc.Label,
sprHead: cc.Sprite,
commonHead: cc.SpriteFrame,
sprWinner: cc.Node,
lblScore: [ cc.Label ],
imgHost: cc.Node
},
onLoad: function() {},
init: function(e, t, i, a) {
var r = this;
this.imgHost.active = 0 == i && !n.config.clan;
this.lblEndScore.node.active = t.score[1] >= 0;
this.lblEndScoreNeg.node.active = t.score[1] < 0;
this.lblEndScore.string = "" + t.score[1];
this.lblEndScoreNeg.string = "+" + t.score[1];
this.sprWinner.active = t.score[1] == a && a > 0;
this.lblName.string = n.players[i].prop.name;
this.sprHead.spriteFrame = n.playerHead[i];
this.lblId.string = n.players[i].prop.pid;
e.forEach(function(e, t) {
0 == i && (r.lblScore[t].string = "第" + t + "局 " + e.userScore0);
1 == i && (r.lblScore[t].string = "第" + t + "局 " + e.userScore1);
2 == i && (r.lblScore[t].string = "第" + t + "局 " + e.userScore2);
});
cc.log("sprHead", this.sprHead.spriteFrame);
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModulePart16: [ function(e, t) {
"use strict";
cc._RF.push(t, "9fa3ecBg4RJB6lbRvCw+IVk", "ModulePart16");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
lblName: cc.Label,
lblEndScore: cc.Label,
lblId: cc.Label,
sprWinner: cc.Node,
lblHupai: cc.Label,
lblZM: cc.Label,
lblJP: cc.Label,
lblDP: cc.Label,
lblAN: cc.Label,
lblMING: cc.Label
},
init: function(e, t, i, a) {
this.lblEndScore.string = t.scores[2];
this.sprWinner.active = t.scores[2] == a && a > 0;
this.lblName.string = n.players[i].prop.name;
this.lblId.string = "ID:" + n.players[i].prop.pid;
t.ach || (t.ach = [ 0, 0, 0, 0, 0 ]);
this.lblZM.string = t.ach[0];
this.lblJP.string = t.ach[1];
this.lblDP.string = t.ach[2];
this.lblAN.string = t.ach[3] || 0;
this.lblMING.string = t.ach[4] || 0;
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModulePay: [ function(e, t) {
"use strict";
cc._RF.push(t, "b47036BFwdDHq3Js4yDEiP+", "ModulePay");
var n = e("Cache");
cc.Class({
extends: cc.Component,
properties: {},
start: function() {},
showPay: function() {
this.node.parent = cc.find("Canvas");
},
exitPay: function() {
n.playSfx();
this.node.removeFromParent(!1);
}
});
cc._RF.pop();
}, {
Cache: "Cache"
} ],
ModulePlayer08: [ function(e, t) {
"use strict";
cc._RF.push(t, "7de65ke66lHJKdpN9Z1y2ea", "ModulePlayer08");
var n = e("../../../Main/Script/TableInfo"), i = (e("audio-ctrl"), e("Cache")), a = e("../../../Main/Script/utils"), r = e("../../../GameBase/GameConfig").GameConfig, o = (e("../../../Main/Script/DataBase"), 
[ cc.v2(48, 169), cc.v2(48, -119) ]), s = [ cc.v2(160, 55), cc.v2(160, 55) ];
cc.v2(-1.2, -38.6), cc.v2(105, 48), cc.v2(94, 49), cc.v2(-94, 49), cc.v2(94, 49);
cc.Class({
extends: cc.Component,
properties: {
nodePlayer: cc.Node,
lblName: cc.Label,
sprHead: e("../../../script/ui/common/Avatar"),
headCircle: cc.Node,
lblHuxi: cc.Label,
sprActive: cc.Sprite,
sprReady: [ cc.Sprite ],
lblscore: cc.Label,
sprOffline: cc.Sprite,
qi: cc.Node,
ground: cc.Node,
lblEmpty: cc.Label,
group: cc.Prefab,
card: cc.Prefab,
headMask: cc.Node,
imgBanker: cc.Node,
autoNode: cc.Node,
betStr: cc.Label,
clock: cc.Node,
niaoNode: cc.Node,
scoreNode: cc.Node,
maskBg: cc.Node,
huxiBgNode: cc.Node,
totalHuxi: cc.Node,
totalHuxiLabel: cc.Label,
qiHu: cc.Node,
playerData: null
},
onLoad: function() {
this.lastTime = 0;
},
init: function(e, t) {
this.playerData = e;
if (null != e && !a.isNullOrEmpty(e.prop)) {
var i = n.realIdx[e.idx];
this.totalHuxi.active = !0;
this.totalHuxiLabel.string = e.scores.turn;
this.realIdx = i;
this.idx = e.idx;
this.imgBanker.active = n.zhuang == this.idx && n.status != r.GameStatus.WAIT;
this.realIdx = i;
this.qi.position = o[i];
if (0 == i) {
this.scoreNode.active = !0;
this.qi.getComponent(cc.Layout).verticalDirection = cc.Layout.VerticalDirection.BOTTOM_TO_TOP;
}
this.ground.position = s[i];
n.players[e.idx] = e;
this.sprHead.avatarUrl = e.prop.head;
this.lblName.string = a.getStringByLength(e.prop.name, 5);
this.sprOffline.node.active = e.offline;
this.lblHuxi.string = "0";
this.lblHuxi.value = 0;
this.lblscore.string = "" + a.formatGold(e.wallet);
this.sprReady[1 == i ? 1 : 0].node.active = e.ready;
this.niaoNode.active = e.plus;
this.lblEmpty.node.active = !1;
this.qiHu.active = e.dead;
this.initGround(e.grounds);
this.initQi(e.drops);
if (e.idx != n.idx && !t) {
this.headMask.off(cc.Node.EventType.TOUCH_END, this.showInfo, this);
this.headMask.on(cc.Node.EventType.TOUCH_END, this.showInfo, this);
}
}
},
activeAutoPlay: function(e) {
this.autoNode.scale = 1;
this.autoNode.active = e;
},
showInfo: function() {
if (new Date().getTime() - this.lastTime < 2e3) i.alertTip("发言间隔需要2秒"); else {
var e = this.idx;
a.pop(r.pop.PlayerInfo, function(t) {
t.getComponent("ModulePlayerInfo").init(e);
});
}
},
reset: function(e) {
this.headMask.off("touchend");
var t = n.realIdx[e.idx];
this.lblName.string = "";
a.setHead(this.sprHead, "");
this.lblHuxi.string = "0";
this.lblHuxi.value = 0;
this.lblscore.string = "0.00";
this.sprReady[1 == t ? 1 : 0].node.active = !1;
this.sprOffline.node.active = !1;
n.players[e.idx] = null;
n.playerHead[e.idx] = null;
this.lblEmpty.node.active = !0;
this.niaoNode.active = !1;
this.node.active = !1;
},
setScore: function(e) {
this.lblscore.string = a.formatGold(e);
},
showReady: function(e) {
var t = n.realIdx[e.idx];
this.sprReady[1 == t ? 1 : 0].node.active = !0;
if (!a.isNullOrEmpty(e.readyStatus)) if (e.readyStatus.plus) {
this.niaoNode.active = !0;
this.niaoNode.scale = 0;
var i = cc.fadeIn(.5), r = cc.scaleTo(.1, 3), o = cc.scaleTo(.3, .2), s = cc.scaleTo(.1, 1), c = cc.sequence(r, cc.delayTime(.3), o, s);
cc.spawn(i, c);
this.niaoNode.runAction(c);
} else this.niaoNode.active = !1;
},
hideReady: function() {
this.sprReady.forEach(function(e) {
e.node.active = !1;
});
},
active: function(e) {
var t = this.sprActive.node;
t.active = this.idx == e.idx;
t.stopAllActions();
t.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5), cc.fadeOut(1), cc.delayTime(.5), cc.fadeIn(1))));
},
refreshHuxi: function() {
var e = 0;
this.ground.content.forEach(function(t) {
"hu" == t.type && (t.xi = 0);
e += t.xi;
});
this.lblHuxi.value = e;
this.lblHuxi.string = "" + this.lblHuxi.value;
},
roundReset: function(e) {
void 0 === e && (e = 0);
n.zhuang >= 0 && (this.imgBanker.active = n.zhuang == this.idx && n.status != r.GameStatus.WAIT);
this.lblHuxi.string = "0";
this.lblHuxi.value = 0;
this.qi.content = [];
this.group.content = [];
0 == e && this.hideReady();
this.initGround(null);
this.initQi(null);
},
changeStatus: function(e) {
this.sprOffline.node.active = e.offline && !a.isNullOrEmpty(this.playerData.prop);
},
initGround: function(e) {
var t = this;
this.ground.removeAllChildren();
this.ground.length = 0;
this.ground.content = [];
a.isNullOrEmpty(e) || e.forEach(function(e) {
t.newGroup(e, !0);
});
},
initQi: function(e) {
var t = this;
this.qi.removeAllChildren();
this.qi.length = 0;
this.qi.content = [];
a.isNullOrEmpty(e) || e.forEach(function(e) {
t.newQi(e, !0);
});
},
newGroup: function(e, t) {
"wei" == e.type && n.zhao.push(e.card);
var i = [], a = cc.instantiate(this.group);
a.scale = .35;
a.parent = this.ground;
var r = {
x: 34 * this.ground.length - 76,
y: 20
}, o = cc.v2(r.x + 80, 20);
a.getComponent("BaseGroupZP").init(e, {
bg: !1,
click: !1
});
this.ground.content.push(a.getComponent("BaseGroupZP"));
if (t) a.position = cc.v2(r.x, 20); else {
a.position = o;
i.push(cc.targetedAction(a, cc.sequence(cc.place(o), cc.delayTime(.2), cc.moveTo(.2, r.x, r.y))));
}
this.ground.length++;
this.refreshHuxi();
return i;
},
resetGroupPos: function() {
for (var e = 0; e < this.ground.content.length; e++) this.ground.content[e].node.position = cc.v2(34 * e - 76, 20);
},
newQi: function(e, t) {
this.qi.content.push(e);
var n = cc.instantiate(this.card);
n.width = 34;
n.height = 38.85;
n.parent = this.qi;
n.getComponent("BaseCardZP").init(e);
n.active = t;
this.qi.length++;
return n;
},
showBet: function(e) {
this.betStr.node.active = !0;
this.betStr.string = e;
},
hideBet: function() {
this.betStr.node.active = !1;
},
setQiHu: function(e) {
this.qiHu.active = e;
},
showClock: function(e) {
var t = this, n = this.clock.getChildByName("time").getComponent(cc.Label);
n.string = a.isNullOrEmpty(e) ? "15" : "" + parseInt(e);
var i = a.isNullOrEmpty(e) ? 15 : parseInt(e);
n.unscheduleAllCallbacks();
this.clock.active = !0;
n.schedule(function() {
i--;
t.clock.getChildByName("time").getComponent(cc.Label).string = Math.max(i, 0);
}, 1);
},
hideClock: function() {
this.clock.getChildByName("time").getComponent(cc.Label).unscheduleAllCallbacks();
this.clock.active = !1;
},
removePlayer: function() {
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/common/Avatar": "Avatar",
Cache: "Cache",
"audio-ctrl": "audio-ctrl"
} ],
ModulePlayer16: [ function(e, t) {
"use strict";
cc._RF.push(t, "33519gOrXJNiq2g6c7y8noo", "ModulePlayer16");
var n = e("TableInfo"), i = (e("Cache"), e("../../../Main/Script/utils")), a = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
lblScores: cc.Label,
imgReady: cc.Node,
imgActive: cc.Node,
sprDefaultHead: cc.SpriteFrame,
imgOffline: cc.Node,
imgZhuang: cc.Node,
imgHead: e("../../../script/ui/common/Avatar"),
betStr: cc.Label,
lblName: cc.Label,
autoNode: cc.Node,
lastTime: 0
},
newPlayer: function() {
this._scores = [ 0, 0, 0, 0 ];
},
playerInit: function(e, t) {
console.log("初始化玩家: 1", e);
this.idx = e.idx;
this.playData = e;
this.realIdx = n.realIdx[e.idx];
var r = [ cc.v2(69.5 - cc.winSize.width / 2 + a.FitScreen, -80), cc.v2(cc.winSize.width / 2 - 69.5 - a.FitScreen, 60), cc.v2(69.5 - cc.winSize.width / 2 + a.FitScreen, 110) ];
this.node.position = r[this.realIdx];
if (!i.isNullOrEmpty(e.prop)) {
this.imgHead.avatarUrl = e.prop.head;
this.imgReady.active = e.ready;
if (1 == this.realIdx) {
this.imgReady.x = -this.imgReady.x;
this.betStr.node.x = -82;
}
this.imgOffline.active = e.offline;
n.players[e.idx] = e;
this.lblName.string = i.getStringByLength(e.prop.name, 5);
this.imgZhuang.active = this.idx == n.zhuang;
this.lblScores.string = "" + i.formatGold(e.wallet);
if (e.idx != n.idx && !t) {
this.node.off(cc.Node.EventType.TOUCH_END, this.showInfo, this);
this.node.on(cc.Node.EventType.TOUCH_END, this.showInfo, this);
}
}
},
showInfo: function() {
if (this.playData) {
App.lockScene();
var e = this.playData.idx;
i.pop(a.pop.PlayerInfo, function(t) {
App.unlockScene();
t.getComponent("ModulePlayerInfo").init(e);
});
}
},
reset: function() {
this.lblName.string = "等待进入";
this.imgReady.active = !1;
this.imgOffline.active = !1;
this.imgZhuang.active = !1;
this.imgHead.spriteFrame = this.sprDefaultHead;
},
roundReset: function() {
this.imgReady.active = !1;
this.imgActive.active = !1;
this.resetOther();
this.imgZhuang.active = n.zhuang == this.idx;
},
active: function(e) {
var t = this.imgActive;
t.active = this.idx == e;
t.stopAllActions();
t.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5), cc.fadeOut(1), cc.delayTime(.5), cc.fadeIn(1))));
},
activeReady: function(e) {
this.imgReady.active = e;
},
activeAutoPlay: function(e) {
this.autoNode.active = e;
},
resetOther: function() {},
setScore: function(e) {
this.lblScores.string = i.formatGold(e);
},
showBet: function(e) {
this.betStr.node.active = !0;
this.betStr.string = e;
},
hideBet: function() {
this.betStr.node.active = !1;
},
removePlayer: function() {
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/utils": "utils",
"../../../script/ui/common/Avatar": "Avatar",
Cache: "Cache",
TableInfo: "TableInfo"
} ],
ModulePlayer19: [ function(e, t) {
"use strict";
cc._RF.push(t, "3eec9S+ZG5B6LVsrpNMt0ze", "ModulePlayer19");
var n = e("TableInfo"), i = (e("Cache"), e("../../../Main/Script/utils")), a = e("../../../GameBase/GameConfig").GameConfig, r = e("../../../script/ui/hall/data/App").App;
cc.Class({
extends: cc.Component,
properties: {
lblScores: cc.Label,
gaNode: cc.Node,
imgReady: cc.Node,
progressBar: cc.ProgressBar,
imgActive: cc.Node,
sprDefaultHead: cc.SpriteFrame,
imgOffline: cc.Node,
imgZhuang: cc.Node,
imgHead: e("../../../script/ui/common/Avatar"),
betStr: cc.Label,
lblName: cc.Label,
autoNode: cc.Node,
lastTime: 0
},
newPlayer: function() {
this._scores = [ 0, 0, 0, 0 ];
},
playerInit: function(e) {
console.log("初始化玩家: " + e.idx + " ", e);
this.idx = e.idx;
this.playData = e;
this.realIdx = n.realIdx[e.idx];
if (i.isNullOrEmpty(e.prop)) {
console.log("--1-");
this.imgOffline.active = !1;
} else {
this.imgHead.avatarUrl = e.prop.head;
this.imgReady.active = null != e.ready;
if (1 == this.realIdx) {
this.imgReady.x = -this.imgReady.x;
this.betStr.node.x = -82;
}
this.imgOffline.active = e.offline;
n.players[e.idx] = e;
this.lblName.string = i.getStringByLength(e.prop.name, 5);
this.imgZhuang.active = this.idx == n.zhuang;
this.lblScores.string = "" + e.total;
}
var t = [ cc.v2(42 - cc.winSize.width / 2 + a.FitScreen, -133), cc.v2(cc.winSize.width / 2 - 42 - a.FitScreen, 100), cc.v2(329, cc.winSize.height / 2 - 64), cc.v2(42 - cc.winSize.width / 2 + a.FitScreen, 100) ];
2 == this.realIdx && (this.gaNode.position = cc.v2(65, 42));
this.node.position = t[this.realIdx];
},
showInfo: function() {
if (this.playData) {
r.lockScene();
var e = this.playData.idx;
i.pop(a.pop.PlayerInfo, function(t) {
r.unlockScene();
t.getComponent("ModulePlayerInfo").init(e);
});
}
},
reset: function() {
this.lblName.string = "空闲";
this.imgReady.active = !1;
this.imgOffline.active = !1;
this.imgZhuang.active = !1;
this.imgHead.spriteFrame = this.sprDefaultHead;
},
roundReset: function() {
this.imgReady.active = !1;
this.imgActive.active = !1;
this.progressBar.node.active = !1;
this.imgOffline.active = !1;
this.gaNode.active = !1;
this.resetOther();
this.imgZhuang.active = n.zhuang == this.idx;
},
active: function(e) {
if (this.idx == e) {
this.progressBar.node.active = !0;
this.progressBar.progress = 1;
} else this.progressBar.node.active = !1;
},
showReady: function() {
this.imgReady.active = !0;
},
hideReady: function() {
this.imgReady.active = !1;
},
activeAutoPlay: function(e) {
this.autoNode.active = e;
},
resetOther: function() {},
offlineChange: function(e) {
i.isNullOrEmpty(this.playData.prop) ? this.imgOffline.active = !1 : this.imgOffline.active = e;
},
setScore: function(e) {
this.lblScores.string = e;
},
showBet: function(e) {
this.betStr.node.active = !0;
this.betStr.string = e;
},
hideBet: function() {
this.betStr.node.active = !1;
},
showGa: function() {
this.gaNode.active = !0;
},
removePlayer: function() {
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
update: function() {
if (this.progressBar.node.active) {
this.progressBar.progress <= 0 && (this.progressBar.progress = 1);
this.progressBar.progress -= 28e-5;
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/utils": "utils",
"../../../script/ui/common/Avatar": "Avatar",
"../../../script/ui/hall/data/App": "App",
Cache: "Cache",
TableInfo: "TableInfo"
} ],
ModulePlayerHead07: [ function(e, t) {
"use strict";
cc._RF.push(t, "57a03UV3L5EaLlESA1YpgxD", "ModulePlayerHead07");
var n = e("../../../Main/Script/TableInfo"), i = e("../../../Main/Script/Cache"), a = (e("../../../Main/Script/DataBase"), 
e("audio-ctrl"), e("../../../Main/Script/utils")), r = e("../../../GameBase/GameConfig").GameConfig, o = (cc.v2(-511, -232), 
cc.v2(509, 148), cc.v2(-511, 148), [ cc.v2(106, 48), cc.v2(-106, 48), cc.v2(106, 48) ]);
cc.Class({
extends: cc.Component,
properties: {
sprHead: e("../../../script/ui/common/Avatar"),
playLight: cc.Node,
imgBanker: cc.Node,
lblZongjifen: cc.Label,
lblName: cc.Label,
sprStatus: cc.Node,
lastTime: 0,
sprBaodan: cc.Node,
nodeAutoPlay: cc.Node,
readyIcon: cc.Node,
scoreChange: cc.Node,
loseFont: cc.Font,
winFont: cc.Font,
niaoNode: cc.Node,
clock: cc.Node,
cardContainer: cc.Node,
cardCount: cc.Label,
playerData: null
},
init: function(e) {
var t = this;
this.playerData = e;
var i = cc.find("Canvas"), s = [ cc.v2(69.5 - i.width / 2 + r.FitScreen, 0), cc.v2(i.width / 2 - 69.5 - r.FitScreen, 130), cc.v2(69.5 - i.width / 2 + r.FitScreen, 110) ];
this.node.position = s[n.realIdx[e.idx]];
var c = [ cc.v2(90, 0), cc.v2(-90, 0), cc.v2(90, 0) ];
this.cardContainer.position = c[n.realIdx[e.idx]];
if (!a.isNullOrEmpty(e.prop)) {
this.playLight.active = !1;
this.sprStatus.active = e.offline;
this.imgBanker.active = e.idx == n.zhuang && n.status != r.GameStatus.WAIT;
this.lblZongjifen.string = a.formatGold(e.wallet);
this.cardCount.string = "number" == typeof e.hands ? "" + e.hands : "";
this.readyIcon.active = e.ready;
this.niaoNode.active = e.ready && e.ready.plus;
this.lblName.string = a.getStringByLength(e.prop.name, 6);
this.sprHead.avatarUrl = e.prop.head;
this.sprBaodan.setPosition(o[n.realIdx[e.idx]]);
this.node.on("touchend", function() {
n.idx != e.idx && t.showInfo(e);
});
}
},
showInfo: function(e) {
var t = new Date().getTime();
if (t - this.lastTime < 2e3) {
this.lastTime = t;
i.alertTip("发言间隔需要2秒");
} else {
var n = e.idx;
a.pop(r.pop.PlayerInfo, function(e) {
e.getComponent("ModulePlayerInfo").init(n);
});
}
},
resetPlayer: function() {
console.log("重置", this.playerData);
this.imgBanker.active = !1;
this.playLight.active = !1;
this.sprBaodan.active = !1;
this.nodeAutoPlay.active = !1;
this.readyIcon.active = !1;
this.sprStatus.active = !1;
this.cardCount.string = "0";
this.niaoNode.active = !1;
this.hideClock();
},
activeBanker: function(e) {
this.imgBanker.active = e;
},
playCardLight: function(e) {
if (e) {
this.playLight.active = !0;
this.playLight.stopAllActions();
this.playLight.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(1), cc.delayTime(.2), cc.fadeIn(1))));
} else {
this.playLight.stopAllActions();
this.playLight.active = !1;
}
},
activeBaodan: function(e) {
this.sprBaodan.active = e;
},
activeAutoPlay: function(e) {
this.nodeAutoPlay.active = e;
},
activeReady: function(e) {
this.readyIcon.active = e;
},
changeCardCount: function(e) {
this.cardCount.string = e + "";
},
setScore: function(e) {
this.lblZongjifen.string = a.formatGold(e);
},
activeOffline: function(e) {
this.sprStatus.active = e && !a.isNullOrEmpty(this.playerData.prop);
},
activeNiao: function(e) {
console.log("鸟显示-1-", e);
console.log("鸟显示-2-", e.readyStatus);
console.log("鸟显示-3-", e.readyStatus.plus);
if (!a.isNullOrEmpty(e.readyStatus)) if (e.readyStatus.plus) {
this.niaoNode.active = !0;
this.niaoNode.scale = 0;
var t = cc.fadeIn(.5), n = cc.scaleTo(.1, 3), i = cc.scaleTo(.3, .2), r = cc.scaleTo(.1, 1), o = cc.sequence(n, cc.delayTime(.3), i, r);
cc.spawn(t, o);
this.niaoNode.runAction(o);
} else this.niaoNode.active = !1;
},
showBombScores: function(e, t, n, i) {
var r = this;
this.lblZongjifen.string = a.formatGold(t);
if (n < 0) {
this.scoreChange.getComponent(cc.Label).font = this.loseFont;
this.scoreChange.getComponent(cc.Label).string = a.formatGold(n);
} else {
this.scoreChange.getComponent(cc.Label).font = this.winFont;
this.scoreChange.getComponent(cc.Label).string = a.formatGold(n);
}
this.scoreChange.anchorX = 1 == e ? 1 : 0;
this.scoreChange.position = 1 == e ? cc.v2(-81, -108) : cc.v2(79, -108);
this.scoreChange && (this.scoreChange.opacity = 0);
this.scoreChange.active = !0;
var o = cc.fadeIn(.3), s = 1 == e ? cc.moveTo(.3, cc.v2(-81, -65)) : cc.moveTo(.3, cc.v2(79, -65)), c = cc.spawn(o, s), l = cc.delayTime(1), u = cc.callFunc(function() {
r.scoreChange.active = !1;
a.isNullOrEmpty(i) || i();
});
this.scoreChange.runAction(cc.sequence(c, l, u));
},
showClock: function(e) {
var t = this;
console.log("倒计时:", e);
var n = this.clock.getChildByName("time").getComponent(cc.Label);
n.string = a.isNullOrEmpty(e) ? "15" : "" + parseInt(e);
var i = a.isNullOrEmpty(e) ? 15 : parseInt(e);
n.unscheduleAllCallbacks();
this.clock.active = !0;
n.schedule(function() {
if (0 != i) {
i--;
t.clock.getChildByName("time").getComponent(cc.Label).string = Math.max(i, 0);
}
}, 1);
},
hideClock: function() {
this.clock.getChildByName("time").getComponent(cc.Label).unscheduleAllCallbacks();
this.clock.active = !1;
},
removePlayer: function() {
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/common/Avatar": "Avatar",
"audio-ctrl": "audio-ctrl"
} ],
ModulePlayerInfo_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "cfd25WR/i5FU78lAKqnMfQU", "ModulePlayerInfo_09");
var n = e("TableInfo"), i = (e("DataBase"), e("audio-ctrl"), e("../../../Main/Script/utils")), a = e("../../../GameBase/GameConfig").GameConfig, r = e("../../../Main/Script/Cache");
cc.Class({
extends: cc.Component,
properties: {
sprHead: e("../../../script/ui/common/Avatar"),
imgActive: cc.Node,
lblJifen: cc.Label,
lblXifen: cc.Label,
lblName: cc.Label,
lblScore: cc.Label,
lblAdminDesc: cc.Label,
offlineNode: cc.Node,
lastTime: 0,
sprBZ: cc.Node,
readyNode: cc.Node,
autoIcon: cc.Node,
clock: cc.Node,
imgPass: cc.Node,
sprBaodan: cc.Node,
rankSpr: cc.Sprite,
rankSfArr: [ cc.SpriteFrame ],
rankPos: null,
currentData: null
},
init: function(e, t, o) {
var s, c = this;
void 0 === t && (t = !1);
void 0 === o && (o = !1);
console.log("---初始化玩家数据---", e);
this.currentData = e;
switch (n.realIdx[e.idx]) {
case 0:
this.node.setPosition(-cc.winSize.width / 2 + this.node.width / 2 + a.FitScreen, -200);
this.sprBaodan.setPosition(75, -50);
this.rankPos = cc.v2(60, 45);
break;

case 1:
this.node.setPosition(cc.winSize.width / 2 - this.node.width / 2 - a.FitScreen, 35);
this.imgPass.setPosition(-140, 35);
this.sprBaodan.setPosition(-75, -50);
this.rankPos = cc.v2(-60, 45);
break;

case 2:
this.node.setPosition(-168, 220);
this.imgPass.setPosition(0, -115);
this.sprBaodan.setPosition(75, -50);
this.rankPos = cc.v2(60, 45);
break;

case 3:
this.node.setPosition(-cc.winSize.width / 2 + this.node.width / 2 + a.FitScreen, 35);
this.sprBaodan.setPosition(75, -50);
this.rankPos = cc.v2(60, 45);
}
if (!i.isNullOrEmpty(e.prop)) {
this.sprBaodan.active = !1;
this.imgPass.active = !1;
this.sprBZ.active = e.call;
this.imgActive.active = !1;
this.offlineNode.active = e.offline;
this.setJifen(e.credit);
this.setXifen(e.bonus);
if ("CUSTOM" == (null == (s = n.options) ? void 0 : s.mode) || t) {
this.sprHead.avatarUrl = e.prop.head;
this.lblName.string = i.getStringByLength(e.prop.name, 5);
this.lblScore.string = i.formatGold(e.wallet);
} else {
this.lblName.string = "玩家" + (e.idx + 1);
this.lblScore.node.active = !1;
this.lblScore.string = "";
}
o.reporterID == n.players[e.idx].prop.pid ? this.lblAdminDesc.string = "举报人" : o.suspectID == n.players[e.idx].prop.pid ? this.lblAdminDesc.string = "被举报者" : this.lblAdminDesc.string = "";
this.node.on("touchend", function() {
r.playSfx();
o ? i.pop(a.pop.AdminPunishPop, function(t) {
t.getComponent("AdminPunishPop").initData(n.players[e.idx].prop, o);
}) : t ? i.pop(a.pop.ReportPop, function(t) {
t.getComponent("ReportPop").initData(e);
}) : n.idx != e.idx && c.showInfo(e);
});
}
},
resetPlayer: function() {
this.sprBaodan.active = !1;
this.imgPass.active = !1;
this.sprBZ.active = !1;
this.imgActive.active = !1;
this.offlineNode.active = !1;
this.readyNode.active = !1;
this.setJifen(0);
this.setXifen(0);
this.rankSpr.node.active = !1;
},
showInfo: function(e) {
var t = new Date().getTime();
if (t - this.lastTime < 2e3) {
this.lastTime = t;
r.alertTip("间隔需要2秒");
} else {
var n = e.idx;
i.pop(a.pop.PlayerInfo, function(e) {
e.getComponent("ModulePlayerInfo").init(n);
});
}
},
showActive: function(e) {
if (e == this.currentData.idx) {
this.imgActive.active = !0;
this.imgActive.stopAllActions();
this.imgActive.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(1), cc.delayTime(.2), cc.fadeIn(1))));
} else this.imgActive.active = !1;
},
activeBao: function(e) {
this.sprBZ.active = e;
},
activeOffline: function(e) {
this.offlineNode.active = e && !i.isNullOrEmpty(this.currentData.prop);
},
activeReady: function(e) {
this.readyNode.active = e;
},
activeAuto: function(e) {
this.autoIcon.active = e;
},
setJifen: function(e) {
this.lblJifen.string = "" + e;
},
setXifen: function(e) {
this.lblXifen.string = "" + e;
},
setWallet: function(e) {
this.lblScore.string = "" + i.formatGold(e);
},
showClock: function(e) {
var t = this, n = this.clock.getChildByName("time").getComponent(cc.Label);
n.string = i.isNullOrEmpty(e) ? "15" : "" + parseInt(e);
var a = i.isNullOrEmpty(e) ? 15 : parseInt(e);
n.unscheduleAllCallbacks();
this.clock.active = !0;
n.schedule(function() {
a--;
t.clock.getChildByName("time").getComponent(cc.Label).string = Math.max(a, 0);
}, 1);
},
hideClock: function() {
this.clock.getChildByName("time").getComponent(cc.Label).unscheduleAllCallbacks();
this.clock.active = !1;
},
activeBaodan: function(e) {
this.sprBaodan.active = e;
},
activeRank: function() {
this.rankSpr.node.active = !1;
},
finishAnim: function(e, t) {
void 0 === t && (t = !1);
console.log("rank--2-", e, t);
this.rankSpr.spriteFrame = this.rankSfArr[e];
if (t) {
this.rankSpr.node.position = this.rankPos;
this.rankSpr.node.active = !0;
} else {
var n = cc.find("Canvas").convertToWorldSpaceAR(cc.v2(0, 0)), i = this.node.convertToNodeSpaceAR(n);
this.rankSpr.node.position = i;
this.rankSpr.node.scale = 10;
this.rankSpr.node.active = !0;
var a = cc.scaleTo(.3, 3), o = cc.scaleTo(.3, 1);
r.playSound("addScore");
this.rankSpr.node.runAction(cc.sequence(a, cc.delayTime(.3), cc.spawn(o, cc.moveTo(.3, this.rankPos))));
}
},
destroyPlayer: function() {
this.node.destroy();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/utils": "utils",
"../../../script/ui/common/Avatar": "Avatar",
DataBase: "DataBase",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
ModulePlayerInfo: [ function(e, t) {
"use strict";
cc._RF.push(t, "2bc19N6AlFD6YwIUCN6LIho", "ModulePlayerInfo");
var n = e("TableInfo"), i = e("Connector"), a = e("ROUTE"), r = e("../../Main/Script/Cache"), o = e("../../Main/Script/utils"), s = e("../GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
userId: cc.Label,
userName: cc.Label,
avatar: e("../../script/ui/common/Avatar"),
closeBtn: cc.Node,
lastTime: 0
},
onLoad: function() {
this.addEvents();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
},
init: function(e) {
this.idx = e;
this.userId.string = o.isNullOrEmpty(n.options) || n.options.gameType != s.GameType.XHZD || "CUSTOM" == n.options.mode ? n.players[e].prop.pid : "";
this.userName.string = o.isNullOrEmpty(n.options) || n.options.gameType != s.GameType.XHZD || "CUSTOM" == n.options.mode ? n.players[e].prop.name : "玩家" + (e + 1);
(o.isNullOrEmpty(n.options) || n.options.gameType != s.GameType.XHZD || "CUSTOM" == n.options.mode) && (this.avatar.avatarUrl = n.players[e].prop.head);
},
emitAnimation: function(e, t) {
if (this.checkDurationTime()) {
r.playSfx();
this.pleaseWaite();
} else {
i.gameMessage(a.CS_GAME_CHAT, {
messageType: 4,
content: t,
target: this.idx
});
this.storageCurrentTime();
this.onClickClose();
}
},
storageCurrentTime: function() {
var e = new Date();
this.lastTime = e.getTime();
},
checkDurationTime: function() {
return new Date().getTime() - this.lastTime < 3e3;
},
pleaseWaite: function() {
r.alertTip("发言间隔需要3秒");
},
onClickClose: function() {
r.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../Main/Script/Cache": "Cache",
"../../Main/Script/utils": "utils",
"../../script/ui/common/Avatar": "Avatar",
"../GameConfig": "GameConfig",
Connector: "Connector",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleProfitRoomItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "bc4ddZv9mJFFY1MN98qe5RV", "ModuleProfitRoomItem");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("../Script/Cache"), a = e("../Script/utils");
cc.Class({
extends: cc.Component,
properties: {
lblName: cc.Label,
lblTotal: cc.Label,
lblProfit: cc.Label,
newProfit: cc.EditBox,
itemData: null
},
init: function(e, t) {
void 0 === t && (t = !1);
this.itemData = e;
this.lblName.string = "" + e.room.name;
this.lblTotal.string = "" + a.formatGold(e.price, 2);
if (t) {
this.lblProfit.string = "" + a.formatGold(e.profit, 2);
this.newProfit.node.active = !1;
} else if (a.isNullOrEmpty(e.parentProfit)) {
this.lblProfit.string = "" + a.formatGold(e.profit, 2);
this.newProfit.string = a.isNullOrEmpty(e.childProfit) ? "0" : "" + a.formatGold(e.childProfit, 2);
} else {
this.lblProfit.string = "" + a.formatGold(e.parentProfit, 2);
this.newProfit.string = "" + a.formatGold(e.profit, 2);
}
},
editedProfit: function(e) {
if (/^[0-9]+.?[0-9]*$/.test(e.string)) {
this.itemData.changed = !0;
a.isNullOrEmpty(this.itemData.parentProfit) ? this.itemData.childProfit = parseInt(100 * parseFloat(e.string)) : this.itemData.profit = parseInt(100 * parseFloat(e.string));
a.dispatchAllEvent(this.node, n.GameEventNames.PROXY_CHANGE_PROFIT, this.itemData);
} else i.alertTip("请输入数字");
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../Script/Cache": "Cache",
"../Script/utils": "utils"
} ],
ModuleProxyChildItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "3797aa5g9xCOK3XAEwrBlS0", "ModuleProxyChildItem");
var n = e("../../GameBase/GameConfig").GameConfig, i = (e("../../script/ui/hall/data/App").App, 
e("../Script/utils"));
cc.Class({
extends: cc.Component,
properties: {
lblName: cc.Label,
lblId: cc.Label,
lblPhone: cc.Label,
desc: cc.Node,
lblWattle: cc.Label,
selectSpr: cc.SpriteFrame,
unselectSpr: cc.SpriteFrame,
itemData: null
},
initData: function(e) {
var t = this;
this.itemData = e;
if (cc.find("Canvas")) {
cc.find("Canvas").off(n.GameEventNames.PROXY_SELECT_USER, this.selectActive, this);
cc.find("Canvas").on(n.GameEventNames.PROXY_SELECT_USER, this.selectActive, this);
}
this.lblName.string = "" + i.getStringByLength(e.name, 5);
this.lblId.string = "ID:" + e.id;
this.lblPhone.string = "" + e.phone;
this.lblWattle.string = "" + i.formatGold(e.wallet, 2);
this.node.on(cc.Node.EventType.TOUCH_END, function() {
i.dispatchAllEvent(t.node, n.GameEventNames.PROXY_SELECT_USER, e);
});
},
selectActive: function(e) {
this.node.getComponent(cc.Sprite).spriteFrame = e.detail.id == this.itemData.id ? this.selectSpr : this.unselectSpr;
this.lblName.node.color = e.detail.id == this.itemData.id ? new cc.color("#ffffff") : new cc.color("#3E62A1");
this.lblId.node.color = e.detail.id == this.itemData.id ? new cc.color("#ffffff") : new cc.color("#3E62A1");
this.lblPhone.node.color = e.detail.id == this.itemData.id ? new cc.color("#ffffff") : new cc.color("#3E62A1");
this.lblWattle.node.color = e.detail.id == this.itemData.id ? new cc.color("#ffffff") : new cc.color("#3E62A1");
this.desc.color = e.detail.id == this.itemData.id ? new cc.color("#ffffff") : new cc.color("#3E62A1");
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../Script/utils": "utils"
} ],
ModuleProxyChild: [ function(e, t) {
"use strict";
cc._RF.push(t, "156b87c/EVDaYcMzIM0r9Y6", "ModuleProxyChild");
var n = e("../NetWork/Connector"), i = e("../Script/Cache"), a = (e("../Script/DataBase"), 
e("../Script/utils")), r = e("../../GameBase/GameConfig").GameConfig, o = (e("SceneLogin"), 
e("../Script/native-extend")), s = e("../../script/ui/hall/data/App").App;
o.Social;
cc.Class({
extends: cc.Component,
properties: {
childContainer: cc.Node,
childItem: cc.Prefab,
selectName: cc.Label,
selectId: cc.Label,
selectPhone: cc.Label,
selectWallet: cc.Label,
normalNode: cc.Node,
adminNode: cc.Node,
count: cc.EditBox,
searchBox: cc.EditBox,
historyItem: cc.Prefab,
historyContainer: cc.Node,
addPage: cc.Node,
newName: cc.EditBox,
newPhone: cc.EditBox,
profitPage: cc.Prefab,
totalPage: cc.Prefab,
walletNode: cc.Node,
walletInput: cc.EditBox,
nodata: cc.Node,
historyNodata: cc.Node,
userNodata: cc.Node
},
onLoad: function() {
this.walletNode.active = !a.isNullOrEmpty(r.ProxyData.credit) && r.ProxyData.credit > 0;
this.addEvents();
this.refreshChildrenData();
},
addEvents: function() {
try {
s.EventManager.addEventListener(r.GameEventNames.EXCHANGE_LEAGUE_UPDATEDATA, this.refreshChildrenData, this);
cc.find("Canvas").on(r.GameEventNames.PROXY_SELECT_USER, this.refreshSelectInfo, this);
s.EventManager.addEventListener(r.GameEventNames.PROXY_PROFIT_DATA, this.saveProxyProfit, this);
} catch (e) {}
},
removeEvents: function() {
try {
s.EventManager.removeEventListener(r.GameEventNames.EXCHANGE_LEAGUE_UPDATEDATA, this.refreshChildrenData, this);
cc.find("Canvas").off(r.GameEventNames.PROXY_SELECT_USER, this.refreshSelectInfo, this);
s.EventManager.removeEventListener(r.GameEventNames.PROXY_PROFIT_DATA, this.saveProxyProfit, this);
} catch (e) {}
},
refreshChildrenData: function() {
var e = this;
n.request(r.ServerEventName.ProxyChildren, {
isLeague: r.ProxyIsLeague
}, function(t) {
if (t.proxies) {
e.proxyChildData = t.proxies.concat();
e.initData(e.proxyChildData);
}
});
},
refreshChildrenItemData: function(e) {
var t = this;
r.ProxyData = e.proxy;
this.proxyChildData.forEach(function(n, i) {
n.id == e.dest.id && (t.proxyChildData[i] = e.dest);
});
this.initData(this.proxyChildData);
},
initData: function(e) {
var t = this;
this.addPage.active = !1;
this.childContainer.removeAllChildren();
if (a.isNullOrEmpty(e)) {
this.nodata.active = !0;
this.userNodata.active = !0;
} else {
this.nodata.active = !1;
this.userNodata.active = !1;
e.forEach(function(e) {
var n = cc.instantiate(t.childItem);
n.getComponent("ModuleProxyChildItem").initData(e);
t.childContainer.addChild(n);
});
this.refreshSelectInfo({
detail: e[0]
});
}
},
refreshSelectInfo: function(e) {
this.addPage.active = !1;
this.selectUserInfo = e.detail;
this.selectName.string = "" + a.getStringByLength(e.detail.name, 6);
this.selectId.string = "(" + e.detail.id + ")";
this.selectPhone.string = "" + e.detail.phone;
this.selectWallet.string = "" + a.formatGold(e.detail.wallet);
this.normalNode.active = !!(r.ProxyIsLeague || "admin" != r.ProxyData.role && "manager" != r.ProxyData.role);
this.adminNode.active = !r.ProxyIsLeague && ("admin" == r.ProxyData.role || "manager" == r.ProxyData.role);
this.downloadHistoryData();
},
addWellet: function() {
var e = this;
i.playSfx();
a.isNullOrEmpty(this.selectUserInfo) ? i.alertTip("请选择用户") : /^[0-9]*[1-9][0-9]*$/.test(this.count.string) ? i.showConfirm("确认上分金额：" + this.count.string, function() {
n.request(r.ServerEventName.ProxyChangeWallet, {
id: e.selectUserInfo.id,
wallet: 100 * parseFloat(e.count.string),
isLeague: r.ProxyIsLeague
}, function(t) {
i.alertTip("上分成功");
e.refreshChildrenItemData(t);
});
}) : i.alertTip("请输入整数金额");
},
reduceWellet: function() {
var e = this;
i.playSfx();
a.isNullOrEmpty(this.selectUserInfo) ? i.alertTip("请选择用户") : /^[0-9]*[1-9][0-9]*$/.test(this.count.string) ? i.showConfirm("确认下分金额：" + this.count.string, function() {
n.request(r.ServerEventName.ProxyChangeWallet, {
id: e.selectUserInfo.id,
wallet: 100 * parseFloat("-" + e.count.string),
isLeague: r.ProxyIsLeague
}, function(t) {
i.alertTip("下分成功");
e.refreshChildrenItemData(t);
});
}) : i.alertTip("请输入整数金额");
},
onOpenClub: function() {
var e = this;
i.playSfx();
i.showConfirm("确认给代理" + this.selectUserInfo.id + "开启亲友圈?", function() {
n.request(r.ServerEventName.ProxyOpenClub, {
proxyID: e.selectUserInfo.id
}, function(e) {
i.alertTip("开启成功");
console.log("开启权限: ", e);
});
});
},
onClickCreate: function() {
i.playSfx();
this.addPage.active = !0;
},
onCloseAddPage: function() {
i.playSfx();
this.addPage.active = !1;
},
setProxyProfit: function() {
i.playSfx();
var e = cc.instantiate(this.profitPage);
e.getComponent("ModuleProxyProfit").downloadProfitData();
cc.find("Canvas").addChild(e);
},
changeProxyProfit: function() {
i.playSfx();
if (a.isNullOrEmpty(this.selectUserInfo)) i.alertTip("请选择用户"); else {
var e = cc.instantiate(this.profitPage);
e.getComponent("ModuleProxyProfit").downloadChildData(this.selectUserInfo.id);
cc.find("Canvas").addChild(e);
}
},
saveProxyProfit: function(e) {
console.log("利润设置----", e);
this.proxyProfitData = e.data.concat();
this.proxyProfitData.forEach(function(e) {
e.profit = e.childProfit;
});
},
onConfirmProxy: function() {
var e = this;
i.playSfx();
if (a.isNullOrEmpty(this.proxyProfitData)) i.alertTip("利润分成未设置"); else if (a.isNullOrEmpty(this.newName.string)) i.alertTip("代理名称未设置"); else if (a.isNullOrEmpty(this.newPhone.string)) i.alertTip("手机号未注册"); else {
var t = {
phone: this.newPhone.string,
name: this.newName.string
}, o = {
profits: this.proxyProfitData,
proxy: t,
isLeague: r.ProxyIsLeague
};
if (!a.isNullOrEmpty(r.ProxyData.credit) && 0 != r.ProxyData.credit) {
if (a.isNullOrEmpty(this.walletInput.string)) {
i.alertTip("初始金额未设置");
return;
}
if (!/^[0-9]*[1-9][0-9]*$/.test(this.walletInput.string)) {
i.alertTip("请输入整数金额");
return;
}
if (parseInt(this.walletInput.string) < 100) {
i.alertTip("初始金额必须大于100元");
return;
}
o.wallet = 100 * parseInt(this.walletInput.string);
}
n.request(r.ServerEventName.ProxyAdd, o, function() {
i.alertTip("提交成功");
e.refreshChildrenData();
e.addPage.active = !1;
});
}
},
downloadHistoryData: function() {
var e = this;
a.isNullOrEmpty(this.selectUserInfo) || n.request(r.ServerEventName.ProxyHistory, {
id: this.selectUserInfo.id,
logType: "proxies",
isLeague: r.ProxyIsLeague
}, function(t) {
if (e.historyContainer) {
e.historyContainer.removeAllChildren();
e.historyNodata.active = 0 == t.logs.length;
t.logs.forEach(function(t) {
var n = cc.instantiate(e.historyItem), i = a.timestampToTime(new Date(t.createdAt).getTime());
n.getChildByName("time").getComponent(cc.Label).string = "" + i;
n.getChildByName("desc").getComponent(cc.Label).string = t.remarks;
e.historyContainer.addChild(n);
});
}
});
},
onClickSearch: function() {
i.playSfx();
var e = this;
n.request(r.ServerEventName.ProxyChildren, {
keywords: this.searchBox.string,
isLeague: r.ProxyIsLeague
}, function(t) {
if (t.proxies) {
var n = t.proxies.concat();
e.initData(n);
}
});
},
resetSearch: function() {
i.playSfx();
this.refreshChildrenData();
},
onShowQrcode: function() {
var e = this;
i.playSfx();
a.isNullOrEmpty(this.selectUserInfo) || a.pop(r.pop.SharePop, function(t) {
t.getComponent("ModuleSharePop").refresChildUI(e.selectUserInfo.inviter);
});
},
onShowChildTotal: function() {
i.playSfx();
var e = cc.instantiate(this.totalPage);
e.getComponent("ProxyChildTotal").initData(this.selectUserInfo.id);
cc.find("Canvas").addChild(e);
console.log("测试----");
},
onClickClose: function() {
i.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/native-extend": "native-extend",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleProxyProfit: [ function(e, t) {
"use strict";
cc._RF.push(t, "f1b28vIPhtMVokmhQvsQwMA", "ModuleProxyProfit");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("../../script/ui/hall/data/App").App, a = e("../NetWork/Connector"), r = e("../Script/Cache"), o = e("../Script/utils");
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
roomsContainer: cc.Node,
roomItem: cc.Prefab,
oneClickBox: cc.EditBox,
lblUnit: cc.Label,
typeContainer: cc.Node,
setBtn: cc.Node,
saveBtn: cc.Node,
childTag: cc.Node,
gameType: "PDK",
profitType: "ratio",
PDKData: [],
LDZPData: [],
XHZDData: [],
HZMJData: [],
changeId: -1
},
onLoad: function() {
this.addEvents();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
cc.find("Canvas").on(n.GameEventNames.PROXY_CHANGE_PROFIT, this.resetData, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
cc.find("Canvas").off(n.GameEventNames.PROXY_CHANGE_PROFIT, this.resetData, this);
},
showSelfProfit: function() {
var e = this;
this._isChange = !1;
this.typeContainer.active = !1;
this.setBtn.active = !1;
this.saveBtn.active = !1;
this.childTag.active = !1;
this.lblUnit.node.active = !1;
this.oneClickBox.node.active = !1;
this.showSelf = !0;
o.deepcopyArr(n.ProxyIsLeague ? n.ProxyProfitData : n.ProxyClubProfitData).forEach(function(t) {
switch (t.room.gameType) {
case n.GameType.PDK_SOLO:
e.PDKData.push(t);
break;

case n.GameType.LDZP_SOLO:
e.LDZPData.push(t);
break;

case n.GameType.XHZD:
e.XHZDData.push(t);
break;

case n.GameType.HZMJ_SOLO:
e.HZMJData.push(t);
}
});
this.refreshUI();
},
downloadProfitData: function() {
var e = this;
this._isChange = !1;
o.deepcopyArr(n.ProxyIsLeague ? n.ProxyProfitData : n.ProxyClubProfitData).forEach(function(t) {
switch (t.room.gameType) {
case n.GameType.PDK_SOLO:
e.PDKData.push(t);
break;

case n.GameType.LDZP_SOLO:
e.LDZPData.push(t);
break;

case n.GameType.XHZD:
e.XHZDData.push(t);
break;

case n.GameType.HZMJ_SOLO:
e.HZMJData.push(t);
}
});
this.refreshUI();
},
downloadChildData: function(e) {
var t = this;
this._isChange = !0;
this.changeId = e;
a.request(n.ServerEventName.ProxyProfit, {
id: e,
isLeague: n.ProxyIsLeague
}, function(e) {
if (e.profits) {
var i = o.deepcopyArr(e.profits), a = o.deepcopyArr(n.ProxyIsLeague ? n.ProxyProfitData : n.ProxyClubProfitData);
i.forEach(function(e, i) {
e.changed = !1;
e.price = a[i].price;
e.parentProfit = a[i].profit;
switch (e.room.gameType) {
case n.GameType.PDK_SOLO:
t.PDKData.push(e);
break;

case n.GameType.LDZP_SOLO:
t.LDZPData.push(e);
break;

case n.GameType.XHZD:
t.XHZDData.push(e);
break;

case n.GameType.HZMJ_SOLO:
t.HZMJData.push(e);
}
});
t.refreshUI();
}
});
},
refreshUI: function() {
var e = this;
this.roomsContainer.removeAllChildren();
var t = [];
switch (this.gameType) {
case "PDK":
t = this.PDKData;
break;

case "LDZP":
t = this.LDZPData;
break;

case "XHZD":
t = this.XHZDData;
break;

case "HZMJ":
t = this.HZMJData;
}
t.forEach(function(t) {
var n = cc.instantiate(e.roomItem);
n.getComponent("ModuleProfitRoomItem").init(t, e.showSelf);
e.roomsContainer.addChild(n);
});
},
selectGameType: function(e, t) {
r.playSfx();
if (this.gameType != t) {
this.gameType = t;
this.refreshUI();
}
},
selectProfitType: function(e, t) {
r.playSfx();
if (this.profitType != t) {
this.profitType = t;
this.lblUnit.string = "ratio" == t ? "%" : "元";
}
},
oneClickSetting: function() {
var e = this;
r.playSfx();
if (/^[0-9]+([.]{1}[0-9]+){0,1}$/.test(this.oneClickBox.string)) {
var t = parseFloat(this.oneClickBox.string);
switch (this.gameType) {
case "PDK":
this.PDKData.forEach(function(n) {
n.changed = !0;
var i = o.isNullOrEmpty(n.parentProfit) ? "childProfit" : "profit", a = o.isNullOrEmpty(n.parentProfit) ? "profit" : "parentProfit";
n[i] = "ratio" == e.profitType ? (n[a] * t / 100).toFixed(2) : (n[a] - 100 * t).toFixed(2);
});
break;

case "LDZP":
this.LDZPData.forEach(function(n) {
n.changed = !0;
var i = o.isNullOrEmpty(n.parentProfit) ? "childProfit" : "profit", a = o.isNullOrEmpty(n.parentProfit) ? "profit" : "parentProfit";
n[i] = "ratio" == e.profitType ? (n[a] * t / 100).toFixed(2) : (n[a] - 100 * t).toFixed(2);
});
break;

case "XHZD":
this.XHZDData.forEach(function(n) {
n.changed = !0;
var i = o.isNullOrEmpty(n.parentProfit) ? "childProfit" : "profit", a = o.isNullOrEmpty(n.parentProfit) ? "profit" : "parentProfit";
n[i] = "ratio" == e.profitType ? (n[a] * t / 100).toFixed(2) : (n[a] - 100 * t).toFixed(2);
});
break;

case "HZMJ":
this.HZMJData.forEach(function(n) {
n.changed = !0;
var i = o.isNullOrEmpty(n.parentProfit) ? "childProfit" : "profit", a = o.isNullOrEmpty(n.parentProfit) ? "profit" : "parentProfit";
n[i] = "ratio" == e.profitType ? (n[a] * t / 100).toFixed(2) : (n[a] - 100 * t).toFixed(2);
});
}
this.refreshUI();
} else r.alertTip("请输入整数或小数");
},
resetData: function(e) {
switch (this.gameType) {
case "PDK":
this.PDKData.forEach(function(t) {
t.id == e.detail.id && (t = e.detail);
});
break;

case "LDZP":
this.LDZPData.forEach(function(t) {
t.id == e.detail.id && (t = e.detail);
});
break;

case "XHZD":
this.XHZDData.forEach(function(t) {
t.id == e.detail.id && (t = e.detail);
});
break;

case "HZMJ":
this.HZMJData.forEach(function(t) {
t.id == e.detail.id && (t = e.detail);
});
}
},
saveProfitSetting: function() {
var e = this;
r.playSfx();
var t = this.PDKData.concat(this.LDZPData).concat(this.XHZDData).concat(this.HZMJData), s = !1;
t.forEach(function(t) {
if (e._isChange) {
s = parseInt(t.profit) <= 0;
t.profit = parseInt(t.profit);
} else o.isNullOrEmpty(t.childProfit) || parseInt(t.childProfit) <= 0 ? s = !0 : t.childProfit = parseInt(t.childProfit);
});
if (s) r.alertTip("游戏分成需大于0"); else if (this._isChange) a.request(n.ServerEventName.ProxyChangeProfit, {
profits: t,
id: this.changeId,
isLeague: n.ProxyIsLeague
}, function() {
r.alertTip("修改成功");
e.onClickClose();
}); else {
i.EventManager.dispatchEventWith(n.GameEventNames.PROXY_PROFIT_DATA, t);
this.onClickClose();
}
},
onClickClose: function() {
r.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/utils": "utils"
} ],
ModuleProxyTotal: [ function(e, t) {
"use strict";
cc._RF.push(t, "225daK1B0JIG66PLT/wgfCA", "ModuleProxyTotal");
var n, i = e("../NetWork/Connector"), a = e("../Script/Cache"), r = (e("../Script/DataBase"), 
e("../Script/utils")), o = e("../../GameBase/GameConfig").GameConfig, s = (e("SceneLogin"), 
e("../Script/native-extend")), c = e("../../script/ui/hall/data/App").App;
s.Social;
cc.Class(((n = {
extends: cc.Component,
properties: {
lblName: cc.Label,
lblId: cc.Label,
lblEarn: cc.Label,
lblWallet: cc.Label,
lblPhone: cc.Label,
profitPage: cc.Prefab,
lblCount: cc.Label,
lblProxyCount: cc.Label,
lblUserCount: cc.Label,
lblWallets: cc.Label,
lblProxyWallet: cc.Label,
lblUserWallet: cc.Label,
lblRewardWin: cc.Label,
btnReward: cc.Node,
userItem: cc.Prefab,
earnItem: cc.Prefab,
gameItem: cc.Prefab,
rechargeItem: cc.Prefab,
historyItem: cc.Prefab,
creditItem: cc.Prefab,
recordItem: cc.Prefab,
btnCredit: cc.Node,
itemContainer: cc.Node,
btnSetting: cc.Node,
animTips: cc.Node,
animDesc: cc.Label,
btnActive: cc.Node,
lastClickTime: 0
},
onLoad: function() {
this.addEvents();
this.downloadProxyData();
},
addEvents: function() {
c.EventManager.addEventListener(o.GameEventNames.EXCHANGE_LEAGUE_UPDATEDATA, this.downloadProxyData, this);
},
removeEvents: function() {
c.EventManager.removeEventListener(o.GameEventNames.EXCHANGE_LEAGUE_UPDATEDATA, this.downloadProxyData, this);
},
downloadProxyData: function() {
var e = this;
i.request(o.ServerEventName.ProxyInfo, {
isLeague: o.ProxyIsLeague
}, function(t) {
o.ProxyMarketConfig = [ {
amount: 1e5,
reward: 1e3,
tradeType: "fast"
}, {
amount: 2e5,
reward: 2e3,
tradeType: "fast"
}, {
amount: 3e5,
reward: 3e3,
tradeType: "fast"
}, {
amount: 5e5,
reward: 5e3,
tradeType: "fast"
}, {
amount: 1e6,
reward: 1e4,
tradeType: "fast"
} ];
if (t.proxy) {
o.ProxyData = t.proxy;
r.saveValue(o.StorageKey.ProxyData, t.proxy);
o.ProxyProfitData = t.profits;
e.refreshUI(t.total);
}
if (!r.isNullOrEmpty(t.notice)) {
var n = r.getValue(o.StorageKey.ProxyNoticeVersion, "1.0.0");
if (0 != e.versionCompareHandle(t.notice, n)) {
r.pop(o.pop.ProxyActivityPop);
r.saveValue(o.StorageKey.ProxyNoticeVersion, t.notice);
return;
}
}
}, !0, function(t) {
a.showTipsMsg(t.message || "登录信息失效", function() {
r.pop(o.pop.ProxyLoginPop);
e.node && e.onClickClose();
console.log("shaskldjakl", cc.find("Canvas/MainPrefabProxyManagePop"));
cc.find("Canvas/MainPrefabProxyManagePop") && cc.find("Canvas/MainPrefabProxyManagePop").destroy();
});
});
},
refreshUI: function(e) {
var t = this;
this.lblEarn.string = (e / 100).toFixed(2) + "元";
this.lblName.string = "" + r.getStringByLength(o.ProxyData.name, 5);
this.lblId.string = "ID: " + o.ProxyData.id;
this.lblPhone.string = "" + o.ProxyData.phone;
this.btnSetting.active = "admin" == o.ProxyData.role || "manager" == o.ProxyData.role;
this.lblWallet.string = r.formatGold(o.ProxyData.wallet, 2) + "元";
this.lblRewardWin.string = r.formatGold(o.ProxyData.rewardWin) + "元";
this.btnReward.active = o.ProxyData.rewardWin > 0;
if (r.isNullOrEmpty(o.ProxyData.credit) || 0 == o.ProxyData.credit) {
this.btnCredit.active = !1;
this.onClickUser();
} else {
this.btnCredit.active = !0;
this.onClickCredit();
}
this.startAnim();
i.request(o.ServerEventName.ProxyDetail, {
id: o.ProxyData.id,
isLeague: o.ProxyIsLeague
}, function(e) {
try {
t.lblCount.string = "直属用户总数: " + e.count;
t.lblUserCount.string = "下级用户总数: " + e.userCount;
t.lblProxyCount.string = "下级代理总数: " + e.proxyCount;
t.lblWallets.string = "直属用户余额: " + r.formatGold(e.wallet);
t.lblUserWallet.string = "下级用户余额: " + r.formatGold(e.userWallet);
t.lblProxyWallet.string = "下级代理余额: " + r.formatGold(e.proxyWallet);
} catch (e) {}
});
},
onSelfProfit: function() {
a.playSfx();
var e = cc.instantiate(this.profitPage);
e.getComponent("ModuleProxyProfit").showSelfProfit();
cc.find("Canvas").addChild(e);
},
onChangeData: function() {},
onShareInviter: function() {
a.playSfx();
r.pop(o.pop.SharePop, function(e) {
e.getComponent("ModuleSharePop").refreshProxyUI();
});
},
onClickRecord: function() {
a.playSfx();
this.itemContainer.removeAllChildren();
var e = cc.instantiate(this.recordItem);
this.itemContainer.addChild(e);
},
onClickUser: function() {
a.playSfx();
this.itemContainer.removeAllChildren();
var e = cc.instantiate(this.userItem);
this.itemContainer.addChild(e);
},
onClickEarn: function() {
a.playSfx();
this.itemContainer.removeAllChildren();
var e = cc.instantiate(this.earnItem);
this.itemContainer.addChild(e);
},
onClickGame: function() {
a.playSfx();
this.itemContainer.removeAllChildren();
var e = cc.instantiate(this.gameItem);
this.itemContainer.addChild(e);
},
onClickRecharge: function() {
a.playSfx();
this.itemContainer.removeAllChildren();
var e = cc.instantiate(this.rechargeItem);
this.itemContainer.addChild(e);
console.log("----", this.itemContainer);
},
onClickHistory: function() {
a.playSfx();
this.itemContainer.removeAllChildren();
var e = cc.instantiate(this.historyItem);
this.itemContainer.addChild(e);
},
onClickCredit: function() {
a.playSfx();
this.itemContainer.removeAllChildren();
var e = cc.instantiate(this.creditItem);
this.itemContainer.addChild(e);
},
onLogout: function() {
a.playSfx();
r.saveValue(o.StorageKey.ProxyToken, "");
r.pop(o.pop.ProxyLoginPop);
cc.find("Canvas/MainPrefabProxyManagePop") && cc.find("Canvas/MainPrefabProxyManagePop").destroy();
this.onClickClose();
},
onClickActive: function() {
a.playSfx();
r.pop(o.pop.ProxyActivePop);
},
onClickZPRank: function() {
a.playSfx();
o.BtnIsMoving || r.pop(o.pop.ProxyZPRankPop);
},
onClickSetting: function() {
a.playSfx();
r.pop(o.pop.AdminSettingPop);
},
onClickActivity: function() {
a.playSfx();
r.pop(o.pop.ProxyActivityPop);
}
}).onClickActivity = function() {
a.playSfx();
r.pop(o.pop.ProxyInviteUser);
}, n.onGetReward = function() {
var e = this;
if (0 != o.ProxyData.rewardWin) {
a.playSfx();
i.request(o.ServerEventName.ProxyAdminReward, {}, function() {
a.alertTip("领取成功");
e.refreshProxyData();
});
} else a.alertTip("暂无奖励可领取");
}, n.refreshProxyData = function() {
var e = this;
i.request(o.ServerEventName.ProxyInfo, {
isLeague: o.ProxyIsLeague
}, function(t) {
if (t.proxy) {
o.ProxyData = t.proxy;
o.ProxyProfitData = t.profits;
e.refreshUI(t.total);
}
}, !0, function(t) {
a.showTipsMsg(t.message || "登录信息失效", function() {
r.pop(o.pop.ProxyLoginPop);
e.onClickClose();
});
});
}, n.versionCompareHandle = function(e, t) {
for (var n = e.split("."), i = t.split("."), a = 0; a < n.length; ++a) {
var r = parseInt(n[a]), o = parseInt(i[a] || 0);
if (r !== o) return r - o;
}
return i.length > n.length ? -1 : 0;
}, n.openMarketPop = function() {
a.playSfx();
r.pop(o.pop.ProxyMarketPop);
}, n.startAnim = function() {
var e = this;
this.animTips.stopAllActions();
this.animTips.scale = 0;
var t = cc.scaleTo(.5, 1.1).easing(cc.easeBackInOut()), n = cc.scaleTo(.5, 0).easing(cc.easeBackInOut()), i = cc.sequence(t, cc.delayTime(4), n, cc.callFunc(function() {
e.animDesc.string = "优惠" == e.animDesc.string ? "省钱" : "优惠";
})), a = cc.repeatForever(i);
this.animTips.runAction(a);
}, n.onClickClose = function() {
a.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}, n.onDestroy = function() {
this.removeEvents();
}, n));
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/native-extend": "native-extend",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleProxyUserItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "455caklxphO8KPFQk2mqpZK", "ModuleProxyUserItem");
var n = e("../../GameBase/GameConfig").GameConfig, i = (e("../../script/ui/hall/data/App").App, 
e("../Script/utils"));
cc.Class({
extends: cc.Component,
properties: {
lblName: cc.Label,
lblId: cc.Label,
lblWattle: cc.Label,
avatarSpr: cc.Sprite,
selectSpr: cc.SpriteFrame,
unselectSpr: cc.SpriteFrame,
itemData: null
},
initData: function(e) {
var t = this;
this.itemData = e;
try {
cc.find("Canvas").off(n.GameEventNames.PROXY_SELECT_USER, this.selectActive, this);
cc.find("Canvas").on(n.GameEventNames.PROXY_SELECT_USER, this.selectActive, this);
} catch (e) {}
this.lblName.string = "" + i.getStringByLength(e.name, 6);
this.lblId.string = "ID: " + e.id;
this.lblWattle.string = "钱包: " + i.formatGold(e.wallet, 2);
var a = i.isNullOrEmpty(e.head) ? "" : e.head;
i.setHead(this.avatarSpr, a);
this.node.on(cc.Node.EventType.TOUCH_END, function() {
i.dispatchAllEvent(t.node, n.GameEventNames.PROXY_SELECT_USER, e);
});
},
selectActive: function(e) {
this.node.getComponent(cc.Sprite).spriteFrame = e.detail.id == this.itemData.id ? this.selectSpr : this.unselectSpr;
this.lblName.node.color = e.detail.id == this.itemData.id ? new cc.color("#ffffff") : new cc.color("#3E62A1");
this.lblId.node.color = e.detail.id == this.itemData.id ? new cc.color("#ffffff") : new cc.color("#3E62A1");
this.lblWattle.node.color = e.detail.id == this.itemData.id ? new cc.color("#ffffff") : new cc.color("#3E62A1");
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../Script/utils": "utils"
} ],
ModuleProxyUsers: [ function(e, t) {
"use strict";
cc._RF.push(t, "7b729X3s+BPn6n5UTxzztmr", "ModuleProxyUsers");
var n = e("../NetWork/Connector"), i = e("../Script/Cache"), a = (e("../Script/DataBase"), 
e("../Script/utils")), r = e("../../GameBase/GameConfig").GameConfig, o = (e("SceneLogin"), 
e("../Script/native-extend")), s = e("../../script/ui/hall/data/App").App;
o.Social;
cc.Class({
extends: cc.Component,
properties: {
usersContainer: cc.Node,
usersItem: cc.Prefab,
selectName: cc.Label,
selectId: cc.Label,
selectProxyID: cc.Label,
selectWallet: cc.Label,
selectAvatar: cc.Sprite,
count: cc.EditBox,
searchBox: cc.EditBox,
historyContainer: cc.Node,
historyItem: cc.Prefab,
noData: cc.Node,
historyNodata: cc.Node,
userNodata: cc.Node,
userData: []
},
onLoad: function() {
this.addEvents();
this.refreshUsersData();
},
addEvents: function() {
try {
cc.find("Canvas").on(r.GameEventNames.PROXY_SELECT_USER, this.refreshSelectInfo, this);
s.EventManager.addEventListener(r.GameEventNames.EXCHANGE_LEAGUE_UPDATEDATA, this.refreshUsersData, this);
} catch (e) {}
},
removeEvents: function() {
try {
cc.find("Canvas").off(r.GameEventNames.PROXY_SELECT_USER, this.refreshSelectInfo, this);
s.EventManager.removeEventListener(r.GameEventNames.EXCHANGE_LEAGUE_UPDATEDATA, this.refreshUsersData, this);
} catch (e) {}
},
refreshUsersData: function() {
var e = this;
n.request(r.ServerEventName.ProxyUsers, {
isLeague: r.ProxyIsLeague
}, function(t) {
if (t.users) {
e.proxyUsersData = t.users.concat();
e.initData(e.proxyUsersData);
}
});
},
refreshUsersItemData: function(e) {
var t = this;
a.isNullOrEmpty(e.proxy) || (r.ProxyData = e.proxy);
a.isNullOrEmpty(e.user) || this.proxyUsersData.forEach(function(n, i) {
n.id == e.user.id && (t.proxyUsersData[i] = e.user);
});
console.log("-----", this.proxyUsersData);
this.initData(this.proxyUsersData);
},
initData: function(e) {
var t = this;
this.userData = e.concat();
this.usersContainer.removeAllChildren();
if (a.isNullOrEmpty(e)) {
this.noData.active = !0;
this.userNodata.active = !0;
} else {
this.noData.active = !1;
this.userNodata.active = !1;
e.forEach(function(e) {
var n = cc.instantiate(t.usersItem);
n.getComponent("ModuleProxyUserItem").initData(e);
t.usersContainer.addChild(n);
});
this.refreshSelectInfo({
detail: e[0]
});
}
},
refreshSelectInfo: function(e) {
this.selectUserInfo = e.detail;
this.selectName.string = "" + a.getStringByLength(e.detail.name, 6);
this.selectId.string = "ID: " + e.detail.id;
this.selectProxyID.node.active = "admin" == r.ProxyData.role;
this.selectProxyID.string = "代理ID: " + e.detail.proxyID;
this.selectWallet.string = "" + a.formatGold(e.detail.wallet);
a.setHead(this.selectAvatar, e.detail.head);
this.downloadHistoryData();
},
addWellet: function() {
var e = this;
i.playSfx();
a.isNullOrEmpty(this.selectUserInfo) ? i.alertTip("请选择用户") : /^[0-9]*[1-9][0-9]*$/.test(this.count.string) ? i.showConfirm("确认充值金额：" + this.count.string, function() {
n.request(r.ServerEventName.ProxyUserWallet, {
id: e.selectUserInfo.id,
wallet: 100 * parseFloat(e.count.string),
isLeague: r.ProxyIsLeague
}, function(t) {
i.alertTip("上分成功");
e.refreshUsersItemData(t);
});
}) : i.alertTip("请输入整数金额");
},
reduceWellet: function() {
var e = this;
i.playSfx();
a.isNullOrEmpty(this.selectUserInfo) ? i.alertTip("请选择用户") : /^[0-9]*[1-9][0-9]*$/.test(this.count.string) ? i.showConfirm("确认下分金额：" + this.count.string, function() {
n.request(r.ServerEventName.ProxyUserWallet, {
id: e.selectUserInfo.id,
wallet: 100 * parseFloat("-" + e.count.string),
isLeague: r.ProxyIsLeague
}, function(t) {
i.alertTip("下分成功");
e.refreshUsersItemData(t);
});
}) : i.alertTip("请输入整数金额");
},
onClickSearch: function() {
i.playSfx();
var e = this;
n.request(r.ServerEventName.ProxyUsers, {
keywords: this.searchBox.string,
isLeague: r.ProxyIsLeague
}, function(t) {
if (t.users) {
var n = t.users.concat();
e.initData(n);
}
});
},
resetSearch: function() {
i.playSfx();
this.refreshUsersData();
},
downloadHistoryData: function() {
var e = this;
a.isNullOrEmpty(this.selectUserInfo) || n.request(r.ServerEventName.ProxyHistory, {
id: this.selectUserInfo.id,
logType: "user",
isLeague: r.ProxyIsLeague
}, function(t) {
if (e.historyContainer) {
e.historyContainer.removeAllChildren();
e.historyNodata.active = 0 == t.logs.length;
t.logs.forEach(function(t) {
var n = cc.instantiate(e.historyItem), i = a.timestampToTime(new Date(t.createdAt).getTime());
n.getChildByName("time").getComponent(cc.Label).string = "" + i;
n.getChildByName("desc").getComponent(cc.Label).string = t.wallet >= 0 ? "充值" + a.formatGold(t.wallet, 2) + "元" : "下分" + a.formatGold(Math.abs(t.wallet), 2) + "元";
e.historyContainer.addChild(n);
});
}
});
},
openHistoryPage: function() {
var e = this;
a.isNullOrEmpty(this.selectUserInfo) ? i.alertTip("请选择用户") : a.pop(r.pop.AdminHistoryPop, function(t) {
t.getComponent("AdminHistoryPop").initData(e.selectUserInfo.id);
});
},
openProfitDetail: function() {
i.playSfx();
a.pop(r.pop.ProxyProfitDetail);
},
onClickClose: function() {
i.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/native-extend": "native-extend",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModulePunishUserItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "635eaUyIvZKjZKJ6oqCK77s", "ModulePunishUserItem");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("../Script/utils");
cc.Class({
extends: cc.Component,
properties: {
lblName: cc.Label,
lblId: cc.Label,
lblReason: cc.Label,
lblStatus: cc.Label,
selectSpr: cc.SpriteFrame,
unselectSpr: cc.SpriteFrame,
itemData: null
},
initData: function(e) {
var t = this;
this.itemData = e;
if (cc.find("Canvas")) {
cc.find("Canvas").off(n.GameEventNames.ADMIN_SELECT_USER, this.selectActive, this);
cc.find("Canvas").on(n.GameEventNames.ADMIN_SELECT_USER, this.selectActive, this);
}
this.lblName.string = i.isNullOrEmpty(e.user) ? "未知玩家昵..." : "" + i.getStringByLength(e.user.name, 5);
this.lblId.string = i.isNullOrEmpty(e.user) ? "未知玩家ID" : "" + e.user.id;
this.lblReason.string = "" + i.getStringByLength(e.reason, 6);
switch (e.status) {
case "end":
this.lblStatus.string = "已处理";
break;

case "malicious":
this.lblStatus.string = "恶意举报";
break;

case "wait":
this.lblStatus.string = "未处理";
break;

case "warn":
this.lblStatus.string = "警告";
break;

case "punishment":
this.lblStatus.string = "处罚";
break;

case "frozen":
this.lblStatus.string = "冻结";
break;

default:
this.lblStatus.string = "未知状态";
}
this.node.on(cc.Node.EventType.TOUCH_END, function() {
i.dispatchAllEvent(t.node, n.GameEventNames.ADMIN_SELECT_USER, e);
});
},
selectActive: function(e) {
this.node.getComponent(cc.Sprite).spriteFrame = e.detail.id == this.itemData.id ? this.selectSpr : this.unselectSpr;
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../Script/utils": "utils"
} ],
ModuleRemainCards_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "7e260f2qE1IooLlM6RRjrjK", "ModuleRemainCards_09");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
remainName: cc.Label,
remainHead: cc.Sprite,
preCards: cc.Prefab
},
init: function(e) {
var t, i = this;
t = e.hands.length > 12 ? -33 - e.hands.length : -33;
this.node.getComponent("cc.Layout").spacingX = t;
this.remainName.string = n.players[e.idx].prop.name;
this.remainHead.spriteFrame = n.playerHead[e.idx];
e.hands.forEach(function(e) {
var t = cc.instantiate(i.preCards);
t.parent = i.node;
t.getComponent("ModuleCardsInit_09").init(e);
});
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleReplay08: [ function(e, t) {
"use strict";
cc._RF.push(t, "f108b0HGE5Mta5wBPsgua4+", "ModuleReplay08");
var n = e("../../../Main/Script/ROUTE"), i = (e("../../../Main/Script/DataBase"), 
e("../../../Main/Script/Cache")), a = e("TableInfo"), r = (e("audio-ctrl"), e("../../../GameBase/GameConfig").GameConfig), o = (cc.v2(-502, -150), 
cc.v2(502, 130), cc.v2(-502, 130), [ {
begin: cc.v2(-424, -168),
end: cc.v2(-1, 143)
}, {
begin: cc.v2(-446, 152),
end: cc.v2(-195, 132)
} ]), s = [ cc.v2(-10, 86), cc.v2(-310, 158) ], c = [ {
begin: cc.v2(0, 174),
end: cc.v2(0, 0)
}, {
begin: cc.v2(0, 174),
end: cc.v2(-468, 190)
} ], l = {
begin: cc.v2(0, 300),
end: cc.v2(0, 0)
};
cc.Class({
extends: cc.Component,
properties: {
_queueGameMsg: [],
player: cc.Prefab,
lblTurn: cc.Label,
lblDeck: cc.Label,
lblTid: cc.Label,
card: cc.Prefab,
layoutShowCard: cc.Layout,
show: cc.Prefab,
nodehands: [ cc.Layout ],
nodeQuestImg: cc.Label,
spriteFrameQuest: [ cc.SpriteFrame ],
btnOperate: [ cc.Node ],
preRoundSummary: cc.Prefab,
preGameSummary: cc.Prefab,
lblSpeed: cc.Label,
imgProgress: cc.Sprite,
currentTurn: 0
},
playManageAudio: function(t) {
if (cc.sys.isNative) {
var n = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/Game08/" + t;
cc.loader.load(n, function(t, n) {
e("audio-ctrl").getInstance().playSFX(n);
});
}
},
initData: function(e) {
r.CurrentGameType = e;
},
onLoad: function() {
var e = this;
this._queueGameMsg = [];
this._queueGameMsg = i.replayData;
this.length = this._queueGameMsg.length;
this.layoutShowCard.node.zIndex = 20;
this.lblSpeed.string = "当前速度: x1";
a.zhao = [];
this.hands = [ null, null ];
this.nodehands.forEach(function(t, n) {
e.hands[n] = t.node.getComponent("BaseHandZP");
});
this.speed = 1;
a.playerHead = [ null, null ];
a.realIdx = [ null, null ];
a.players = [ null, null ];
this.players = [ null, null ];
for (var t = cc.find("Canvas"), n = [ cc.v2(69.5 - t.width / 2, -170), cc.v2(69.5 - t.width / 2, 220) ], o = 0; o < 2; o++) {
var s = cc.instantiate(this.player);
s.parent = this.node;
s.position = n[o];
s.zIndex = 1;
this.players[o] = s.getComponent("ModulePlayer08");
}
this.node.on(r.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
this.node.on(r.GameEventNames.REPLAY_CONTINUE, this.onReplayNext, this);
this.node.on(r.GameEventNames.REPLAY_SHOW_GAME_SUMMARY, this.showGameSummary, this);
setTimeout(function() {
e.schedule(e.gameMsgSchedule, .1);
}, 500);
},
resume: function() {
cc.director.getScheduler().resumeTarget(this);
this.btnOperate[0].active = !0;
this.btnOperate[1].active = !1;
},
pause: function() {
cc.director.getScheduler().pauseTarget(this);
this.btnOperate[0].active = !1;
this.btnOperate[1].active = !0;
},
playSpeed: function(e, t) {
cc.director.getScheduler().isTargetPaused(this) && this.resume();
this.speed = "1" == t ? this.speed - .2 : this.speed + .2;
this.speed > 1.6 && (this.speed = 1.6);
this.speed < .4 && (this.speed = .4);
this.lblSpeed.string = "当前速度: x" + this.speed.toFixed(1);
cc.director.getScheduler().setTimeScale(this.speed);
},
quit: function() {
i.replayData = null;
this.node.off(r.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
cc.director.getScheduler().setTimeScale(1);
cc.director.getScheduler().unscheduleAllForTarget(this);
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
var e = cc.find("Canvas/gameSummary");
if (e) {
e.removeFromParent();
e.destroy();
}
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else if (!(this._queueGameMsg.length <= 0)) {
var e = this._queueGameMsg.shift();
this.imgProgress.fillRange = 1 - this._queueGameMsg.length / this.length;
switch (e.route) {
case n.SC_GAME_DATA:
a.options = e.data.options;
break;

case "SC_RECORD":
this.record(e.data);
break;

case n.SC_SHOW_CARD:
this.showCard(e.data);
break;

case n.SC_PLAY_CARD:
this.playCard(e.data);
break;

case n.SC_PASS_CARD:
this.passCard(e.data);
break;

case n.SC_ACTION:
this.action(e.data);
break;

case n.SC_DEAD:
this.dead(e.data);
break;

case n.SC_ROUND_SUMMARY:
cc.director.getScheduler().unscheduleAllForTarget(this);
this.roundSummary(e.data);
break;

case n.SC_GAME_SUMMARY:
cc.director.getScheduler().unscheduleAllForTarget(this);
break;

case n.SC_GET_CARD:
cc.log(e.data);
this.getCard(e.data);
break;

case n.SC_GAME_DRAW:
this.gameDraw();
break;

default:
cc.log(e.route);
}
}
},
record: function(e) {
var t = this, n = null;
e.players.forEach(function(e) {
0 == e.prop.pid && (n = e.idx);
});
null == n && (n = 0);
a.idx = n;
a.zhuang = e.banker;
this.realIdx = [ 0, 0 ];
this.realIdx[n] = 0;
this.realIdx[(n + 1) % 2] = 1;
a.realIdx = this.realIdx;
this.lblDeck.string = "19";
this.lblTurn.string = "第" + e.round + "局";
this.lblTid.string = "房间号: " + e.tableID;
e.players.forEach(function(e) {
var n = a.realIdx[e.idx];
t.players[n].init(e, !0);
t.hands[n].init(e.hands, !0);
});
},
gameDraw: function() {
var e = this;
this._delayTime = 15;
this.nodeQuestImg.node.position = s[0];
this.nodeQuestImg.spriteFrame = this.spriteFrameQuest[6];
this.nodeQuestImg.node.active = !0;
this.nodeQuestImg.node.opacity = 255;
this.nodeQuestImg.node.scale = 2.5;
this.nodeQuestImg.node.runAction(cc.sequence(cc.callFunc(function() {
e.nodeQuestImg.node.opacity = 255;
}), cc.place(s[0]), cc.scaleTo(.3, 1), cc.delayTime(.5), cc.fadeOut(.3)));
},
playCard: function(e) {
a.currentPlayer = e.idx;
this.players.forEach(function(t) {
t.active(e);
});
},
getCard: function(e) {
var t, n = this, i = [], r = [];
this._delayTime = 6;
var s = a.realIdx[e.idx];
(t = cc.instantiate(this.show)).getComponent("BaseCardZP").init(e.card, !0);
t.parent = this.node;
t.position = c[0].begin;
var l = 0, u = [];
this.hands[s]._hands.forEach(function(t) {
t.length;
t.forEach(function(t) {
if (t._card == e.card) {
l++;
u.push(t);
}
});
});
var d = [], h = null;
if (2 == l) {
for (var f = 0; f < 3; f++) {
var p = cc.instantiate(this.card);
p.scale = .8;
p.parent = this.hands[s].node;
p.pao = !0;
p._pos = {
x: 0,
y: f
};
p._card = e.card;
p.active = !1;
p.getComponent("BaseCardZP").init(e.card, !1, !0);
d.push(p);
}
for (var m = function() {
var e = u.shift();
n.hands[s]._hands[e._pos.x].splice(e._pos.y, 1);
n.hands[s].sortHands();
r.push(cc.targetedAction(e, cc.callFunc(function() {
e.destroy();
})));
}; u.length > 0; ) m();
this.hands[s]._hands.splice(0, 0, d);
} else {
(h = cc.instantiate(this.card)).scale = .8;
h.parent = this.hands[s].node;
h.getComponent("BaseCardZP").init(e.card);
h._card = e.card;
h.pao = !1;
h.active = !1;
this.hands[s]._hands[12].splice(0, 0, h);
}
i.push(cc.targetedAction(t, cc.sequence(cc.delayTime(.3), cc.moveTo(.3, o[s].begin), cc.callFunc(function() {
t.destroy();
}))));
r.length > 0 && i.push(cc.spawn(r));
i.push(cc.callFunc(function() {
d.forEach(function(e) {
e.active = !0;
});
}));
i.push(cc.callFunc(function() {
n.hands[s].sortHands();
}));
null != h && i.push(cc.callFunc(function() {
h.active = !0;
}));
this.node.runAction(cc.sequence(i));
cc.log(this.hands[s]._hands[7]);
},
showCard: function(e) {
var t = a.realIdx[e.idx];
this.players.forEach(function(t) {
t.active(e);
});
this._delayTime = 4;
var n = "DECK" == e.src;
if ("PLAY" == e.src) {
this.hands[t].removeHands(e.card);
this.hands[t].sortHands();
a.currentPlayer = null;
}
this.players[t].activeAutoPlay(e.auto);
var i = a.players[e.idx].prop.sex, r = e.card + ".mp3";
this.playManageAudio(i + "_" + r);
a.currentCard = e.card;
this.layoutShowCard.node.stopAllActions();
this.layoutShowCard.node.removeAllChildren();
var s = cc.instantiate(this.show);
s.parent = this.layoutShowCard.node;
s.position = "DECK" == e.src ? l.begin : o[t].begin;
s.getComponent("BaseCardZP").init(e.card, !0, !1, n);
s.runAction(cc.spawn(cc.moveTo(.2, o[t].end), cc.scaleTo(.2, 1)));
this.currentCard = s;
null != e.deck && (this.lblDeck.string = "" + e.deck);
},
playAudio: function(e, t, n, i) {
var r = a.realIdx[e.idx], o = e.type, s = a.players[e.idx].prop.sex;
"pao" == o && "PLAY" == e.src && (o = "kaijiao");
t && (o = "pao");
n && (o = "fangjiao");
i && (o = "ti");
var c = 0;
this.players[r].ground.content.forEach(function(e) {
"pao" != e.type && "ti" != e.type || c++;
});
c > 1 && "pao" == e.type && (o = "chongpao");
(4 & e.hu) > 0 && (o = "zimo");
var l = o + ".mp3";
this.playManageAudio(s + "_" + l);
},
passCard: function(e) {
this._delayTime = 10;
var t = a.realIdx[e.idx], n = cc.instantiate(this.show);
n.getComponent("BaseCardZP").init(e.card, !0);
n.parent = this.node;
n.zIndex = 20;
n.position = o[t].end;
var i = this.players[t].newQi(e.card, !1), r = this.players[t].qi.position.add(i), s = this.players[t].nodePlayer.position.add(r);
this.layoutShowCard.node.removeAllChildren();
n.runAction(cc.sequence(cc.place(o[t].end), cc.delayTime(.5), cc.spawn(cc.moveTo(.4, s), cc.scaleTo(.4, .2)), cc.callFunc(function() {
i.active = !0;
}), cc.callFunc(function() {
n.destroy();
})));
},
action: function(e) {
var t = this;
this._delayTime = 5;
cc.log("action++++++++++++", e);
var n = a.realIdx[e.idx];
this.layoutShowCard.node.removeAllChildren();
this.nodeQuestImg.node.active = !0;
this.nodeQuestImg.node.opacity = 0;
switch (e.type) {
case "chi":
this.nodeQuestImg.string = "吃";
break;

case "peng":
this.nodeQuestImg.string = "碰";
break;

case "wei":
this.nodeQuestImg.string = "偎";
break;

case "ti":
this.nodeQuestImg.string = "提";
break;

case "pao":
this.nodeQuestImg.string = "跑";
break;

case "bi":
break;

case "hu":
this.nodeQuestImg.string = "胡";
break;

default:
cc.log(e.type);
}
switch (e.type) {
case "chi":
this.nodeQuestImg.string = "吃";
e.cards.forEach(function(e, i) {
0 != i && t.hands[n].removeHands(e);
});
break;

case "peng":
this.nodeQuestImg.string = "碰";
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
break;

case "wei":
this.nodeQuestImg.string = "偎";
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
break;

case "ti":
this.nodeQuestImg.string = "提";
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
break;

case "pao":
this.nodeQuestImg.string = "跑";
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
this.hands[n].removeHands(e.card);
break;

case "bi":
e.cards.forEach(function(e) {
t.hands[n].removeHands(e);
});
break;

case "hu":
this._delayTime = 5;
this.nodeQuestImg.string = "胡";
break;

default:
cc.log(e.type);
}
this.hands[n].sortHands();
var i = [], r = !1, o = !1;
if ("pao" == e.type && "DECK" == e.src || "ti" == e.type && "GROUND" == e.src || "pao" == e.type && "GROUND" == e.src || "pao" == e.type && "HANDS" == e.src) {
this._delayTime = 2;
this.players[n].ground.content.forEach(function(i, a) {
cc.log("detail", i);
if (e.card == i.cardValue && ("peng" == i.type || "wei" == i.type)) {
i.remove();
r = "wei" == i.type && "GROUND" == e.src;
o = "ti" == e.type && "GROUND" == e.src;
t.players[n].ground.content.splice(a, 1);
t.players[n].ground.length--;
cc.log(t.players[n]);
t.players[n].resetGroupPos();
}
});
}
var c = this.players[n].newGroup(e, !1);
this.nodeQuestImg.node.scale = 2.5;
i.push(cc.targetedAction(this.nodeQuestImg.node, cc.sequence(cc.callFunc(function() {
t.nodeQuestImg.node.opacity = 255;
}), cc.place(s[n]), cc.scaleTo(.3, 1), cc.delayTime(.3), cc.fadeOut(.2))));
i.push(c[0]);
this.node.runAction(cc.spawn(i));
this.playAudio(e, !1, r, o);
},
refreshScore: function(e) {
this.players.forEach(function(t) {
t.idx == e.idx ? t.lblscore.value = t.lblscore.value + (e.card > 9 ? 4 : 2) : t.lblscore.value = t.lblscore.value - (e.card > 9 ? 2 : 1);
t.lblscore.string = "" + t.lblscore.value;
});
},
dead: function(e) {
this.players.forEach(function(t, n) {
a.realIdx[e.idx] == n && t.setQiHu(!0);
});
},
roundSummary: function(e) {
var t = this;
a.currentPlayer = null;
var n = cc.instantiate(this.preRoundSummary);
n.getComponent("ModuleRoundSummary08").init(e, !0);
n.parent = this.node;
this.nodeRoundSummary = n;
n.zIndex = 10;
e.players.forEach(function(n) {
var i = a.realIdx[n.idx];
t.players[i].totalHuxiLabel.string = e.finish ? "0" : "" + n.scores.turn;
});
},
gameSummary: function(e) {
var t = cc.instantiate(this.preGameSummary);
t.getComponent("ModuleGameSummary08").init(e, !0);
t.parent = cc.find("Canvas");
t.zIndex = 10;
},
showGameSummary: function() {},
onReplayNext: function() {
this.schedule(this.gameMsgSchedule, .1);
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/ROUTE": "ROUTE",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
ModuleReplay16: [ function(e, t) {
"use strict";
cc._RF.push(t, "349c23sfB5O55o2tXRgbFYG", "ModuleReplay16");
e("../../Game19/Hulib/calc19");
var n = e("../../Game16/Script/MJGameConfig"), i = e("../../../Main/Script/TableInfo"), a = (e("../../../Main/NetWork/Connector"), 
e("DataBase")), r = (e("PACK"), e("../../../Main/Script/ROUTE")), o = (e("audio-ctrl"), 
e("native-extend").Social, e("../../../Main/Script/utils"), e("voice-ctrl"), e("../../../Main/Script/Cache")), s = e("../../../script/ui/hall/data/App").App, c = e("../../../GameBase/GameConfig").GameConfig, l = [ "东", "南", "西", "北" ];
cc.Class({
extends: cc.Component,
properties: {
btnOperate: [ cc.Node ],
lblSpeed: cc.Label,
nodeDirection: cc.Node,
sprFlag: cc.Node,
layoutDirection: cc.Node,
player: cc.Prefab,
lblCombo: cc.Label,
lblPhoneTime: cc.Label,
lblTid: cc.Label,
lblTurn: cc.Label,
lblDeck: cc.Label,
lblWind: cc.Label,
card: cc.Prefab,
nodePlayCard: [ cc.Node ],
hands: e("../../GameMj/commonScript/ModuleHandsMJ"),
layoutHands: [ e("../../GameMj/commonScript/ModuleReplayHandsMJ") ],
ground: [ e("../../GameMj/commonScript/ModuleGroundMJ") ],
selfHandGround: e("../../GameMj/commonScript/ModuleHandGroundMJ"),
selfHandFlower: e("../../GameMj/commonScript/ModuleFlowerMJ"),
preRoundSummary: cc.Prefab,
imgQuest: cc.Node,
spriteFrameQuest: [ cc.SpriteFrame ],
texturee: cc.SpriteAtlas,
dtCount: 0,
lastTxTime: 0
},
playManageAudio: function(t) {
var n = a.gameType < 10 ? "Game0" + a.gameType : "Game" + a.gameType;
if (cc.sys.isNative) {
var i = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + n + "/" + t;
cc.loader.load(i, function(t, n) {
t || e("audio-ctrl").getInstance().playSFX(n);
});
}
},
onLoad: function() {
this.addEvents();
this.speed = 1;
this._queueGameMsg = o.replayData;
this.length = this._queueGameMsg.length;
cc.sprFlag = this.sprFlag;
for (var e in this.texturee._spriteFrames) i.cardsSpriteFrame[e] = this.texturee._spriteFrames[e];
i.playerHead = [ null, null, null, null ];
i.players = [ null, null, null, null ];
this.alReady = !0;
this._status = "DONE";
cc.director.getScheduler().schedule(this.gameMsgSchedule, this, .2);
cc.director.getScheduler().setTimeScale(this.speed);
o.hideMask();
},
addEvents: function() {
s.EventManager.addEventListener(c.GameEventNames.HNMJ_RESET_SAME_CARD, this.resetSameCard, this);
s.EventManager.addEventListener(c.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
},
removeEvents: function() {
s.EventManager.removeEventListener(c.GameEventNames.HNMJ_RESET_SAME_CARD, this.resetSameCard, this);
s.EventManager.removeEventListener(c.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else if (!(this._queueGameMsg.length <= 0)) {
var e = this._queueGameMsg.shift(), t = cc.sys.isBrowser ? e : JSON.stringify(e);
switch (e.route) {
case "SC_RECORD":
this.joinTable(e.data);
break;

case r.SC_PLAY_CARD:
this.playCard(e.data);
break;

case r.SC_OUT_CARD:
this.outCard(e.data);
break;

case r.SC_ACTION:
this.action(e.data);
break;

case r.SC_ROUND_SUMMARY:
cc.log(e.data);
this.roundSummary(e.data);
break;

case r.SC_REFRESH_CARD:
a.player.card = e.data.card;
break;

case r.SC_CANCEL_AUTO:
this.cancelAuto(e.data);
break;

case r.SC_START_AUTO:
this.startAuto(e.data);
break;

case r.SC_SYNC_HANDS:
this.syncCard(e.data);
break;

case r.SC_GAME_DESTORY:
this.playerLeave(e.data);
break;

default:
console.log(t);
}
}
},
joinTable: function(e) {
console.log("joinTable", e);
this.nodeDirection.active = !0;
i.zhuang = null;
i.wind = null;
var t = e.idx || 0;
i.idx = e.idx || 0;
i.options = e.options;
i.config = e.options;
if (4 == i.options.person) {
this.realIdx = [ 0, 0, 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 4] = 1;
this.realIdx[(t + 2) % 4] = 2;
this.realIdx[(t + 3) % 4] = 3;
} else if (3 == i.options.person) {
this.realIdx = [ 0, 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 3] = 1;
this.realIdx[(t + 2) % 3] = 2;
} else {
this.realIdx = [ 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 2] = 2;
}
i.realIdx = this.realIdx;
this.players = new Array(4);
this.initPlayer(e);
this.initTableMsg(e);
this.resetPlayStatus(e);
},
initPlayer: function(e) {
var t = this;
e.players.forEach(function(e) {
if (null != e) {
var n = i.realIdx[e.idx], a = cc.instantiate(t.player);
t.node.addChild(a);
t.players[n] = a.getComponent("PlayerMJ");
t.players[n].playerInit(e);
e.idx == i.idx ? t.hands.init(e, !1) : t.layoutHands[n].init(e, n);
}
});
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.players.forEach(function(e) {
null != e && e.roundReset();
});
this.ground.forEach(function(e, t) {
e.reset(t);
});
},
initTableMsg: function(e) {
this.lblTurn.string = 0 == e.round ? "" : "第" + e.turn + "圈 第" + e.round + "局";
this.lblTid.string = "房号:" + e.options.tableID;
},
resume: function() {
cc.director.getScheduler().resumeTarget(this);
this.btnOperate[0].active = !0;
this.btnOperate[1].active = !1;
},
pause: function() {
cc.director.getScheduler().pauseTarget(this);
this.btnOperate[0].active = !1;
this.btnOperate[1].active = !0;
},
playSpeed: function(e, t) {
cc.director.getScheduler().isTargetPaused(this) && this.resume();
this.speed = "1" == t ? this.speed - .2 : this.speed + .2;
this.speed > 1.6 && (this.speed = 1.6);
this.speed < .4 && (this.speed = .4);
this.lblSpeed.string = "当前速度: x" + this.speed.toFixed(1);
cc.director.getScheduler().setTimeScale(this.speed);
},
quit: function() {
o.replayData = null;
cc.director.getScheduler().setTimeScale(1);
cc.director.getScheduler().unscheduleAllForTarget(this);
var e = cc.find("Canvas/summarySelect16");
e && e.destroy();
this.node && this.node.destroy();
},
joinGame: function(e) {
var t = i.realIdx[e.idx];
if (0 != t) {
var n = cc.instantiate(this.player);
n.parent = cc.find("Canvas/nodeTable");
this.players[t] = n.getComponent("ModulePlayer19");
this.players[t].playerInit(e);
}
},
gameInit: function(e) {
i.status = c.GameStatus.START;
if (e.combo && e.combo > 0) {
this.lblCombo.node.active = !0;
this.lblCombo.string = "+" + e.combo;
} else this.lblCombo.node.active = !1;
this.lblDeck.string = e.decks + "";
i.zhuang = e.banker;
i.wind = e.wind;
i.status = c.GameStatus.START;
i.currentPlayer = null;
i.turn = e.turn;
this.players.forEach(function(e) {
var t = i.players[e.idx];
e.playerInit(t);
});
this.hands.init(e, !1);
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.players.forEach(function(e) {
null != e && e.roundReset();
});
this.ground.forEach(function(e, t) {
e.reset(t);
});
this.layoutHands.forEach(function(e, t) {
if (2 != i.options.person) {
if (0 != t) {
e.reset();
e.init({
hands: 13
}, t);
}
} else if (2 == t) {
e.reset();
e.init({
hands: 13
}, t);
}
});
this.resetPlayStatus(e);
},
playCard: function(e) {
i.serialID = e.serialID;
if (e.idx == i.idx) {
this.hands._hands[this.hands._hands.length - 1].getCard = !0;
this.hands.sortCards();
}
this.hands.resetSameCard();
cc.playCard = e.idx == i.idx;
this.playCardLight(e);
},
playCardLight: function(e) {
this.nodePlayCard.forEach(function(e) {
e.active = !1;
});
var t = this.nodePlayCard[this.directionIdx[i.realIdx[e.idx]]];
t.active = !0;
t.stopAllActions();
t.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.8, 100), cc.fadeTo(.8, 255))));
this.players.forEach(function(t) {
t.clockAnim(e);
});
},
resetPlayStatus: function(e) {
var t = i.realIdx[e.wind];
this.lblWind.string = "" + l[e.wind];
this.directionIdx = [ 0, 0, 0, 0 ];
switch (t) {
case 0:
this.directionIdx = [ 0, 1, 2, 3 ];
this.layoutDirection.rotation = 0;
break;

case 1:
this.layoutDirection.rotation = -90;
this.directionIdx = [ 3, 0, 1, 2 ];
break;

case 2:
this.layoutDirection.rotation = 180;
this.directionIdx = [ 2, 3, 0, 1 ];
break;

case 3:
this.layoutDirection.rotation = 90;
this.directionIdx = [ 1, 2, 3, 0 ];
}
this.nodePlayCard.forEach(function(e) {
e.active = !1;
});
this.players.forEach(function(e) {
e.imgActive.active = !1;
});
},
getCard: function(e) {
var t = this;
if (!(-1 == e.card || e.cards && e.cards.length > 0 && e.cards.includes(-1))) {
this._delayTime = 5;
var n = i.realIdx[e.idx];
this.lblDeck.string = e.decks + "";
e.idx == i.idx ? e.event == c.GameAction.DRAW_MULTI ? this.hands.getCard(e.cards) : this.hands.getCard(e.card) : e.event == c.GameAction.DRAW_MULTI ? e.cards.forEach(function(i) {
var a = {
event: "DRAW_MULTI",
idx: e.idx,
card: i,
hands: e.hands,
decks: e.decks,
auto: e.auto
};
t.layoutHands[n].getCard(a, n);
}) : this.layoutHands[n].getCard(e, n);
}
},
outCard: function(e) {
var t = {
idx: e.idx,
status: !1
};
this.changeStatus(t);
var n = i.realIdx[e.idx];
0 != n ? this.layoutHands[n].outCard(e.card) : this.hands.autoSortCard(e.card);
this.changeAutoState(e);
this.ground[n].outCard(e.card, n, !0);
var a = "MELD_" + e.card + ".mp3";
this.playManageAudio(a);
},
action: function(e) {
var t = this;
this._delayTime = 5;
if (e.event != c.GameAction.DRAW && e.event != c.GameAction.DRAW_MULTI) if (e.event != c.GameAction.PLAY) {
var a, r = i.realIdx[e.idx], o = "";
if (e.idx == i.idx) {
this.hands._hands.forEach(function(e) {
return e.getCard = !1;
});
switch (e.event) {
case c.GameAction.PONG:
o = "PONG_0.mp3";
a = 0;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 2);
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case c.GameAction.CHOW:
o = "CHOW_0.mp3";
a = 5;
this.selfHandGround.addGround(e, 0);
[ e.tile, e.tile + 1, e.tile + 2 ].forEach(function(n) {
n != e.card && t.hands.removeCard(n);
});
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case c.GameAction.ZHI:
o = "KONG_0.mp3";
a = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 3);
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case c.GameAction.SHOW:
a = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card);
this.hands.checkedCard = null;
this.hands.sortCards();
o = "KONG_3.mp3";
break;

case c.GameAction.KONG:
o = "KONG_0.mp3";
a = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 4);
this.hands.sortCards();
break;

case c.GameAction.FLOWER_MULTI:
this._delayTime = 5;
o = "FLOWER.mp3";
a = 3;
e.cards.forEach(function(n) {
var i = {
auto: e.auto,
card: n,
event: c.GameAction.FLOWER,
idx: e.idx
};
t.selfHandFlower.addFlower(i, 0);
t.hands.removeCard(n);
});
this.hands.sortCards();
break;

case c.GameAction.FLOWER:
this._delayTime = 5;
o = "FLOWER.mp3";
a = 3;
this.selfHandFlower.addFlower(e, 0);
this.hands.removeCard(e.card);
this.hands.sortCards();
break;

case c.GameAction.WIN:
a = e.from == e.idx ? 4 : 2;
o = e.from == e.idx ? "WIN_DRAW_1.mp3" : "WIN_NODRAW_2.mp3";
}
} else switch (e.event) {
case c.GameAction.PONG:
a = 0;
o = "PONG_1.mp3";
this.layoutHands[r].action(e, r);
break;

case c.GameAction.CHOW:
o = "CHOW_3.mp3";
a = 5;
this.layoutHands[r].action(e, r);
break;

case c.GameAction.WIN:
a = e.from == e.idx ? 4 : 2;
o = e.from == e.idx ? "WIN_DRAW_0.mp3" : "WIN_NODRAW_0.mp3";
break;

case c.GameAction.FLOWER_MULTI:
this._delayTime = 5;
o = "FLOWER.mp3";
a = 3;
e.cards.forEach(function(n) {
var i = {
auto: e.auto,
card: n,
event: c.GameAction.FLOWER,
idx: e.idx
};
t.layoutHands[r].actionflower(i, r);
});
break;

case c.GameAction.FLOWER:
this._delayTime = 5;
o = "FLOWER.mp3";
a = 3;
this.layoutHands[r].actionflower(e, r);
break;

case c.GameAction.SHOW:
a = 1;
this.layoutHands[r].action(e, r);
o = "KONG_3.mp3";
break;

default:
o = "KONG_1.mp3";
a = 1;
this.layoutHands[r].action(e, r);
}
e.event != c.GameAction.PONG && e.event != c.GameAction.CHOW && e.event != c.GameAction.ZHI || this.ground[i.realIdx[e.from]].removeCard();
e.event == c.GameAction.WIN && (this._delayTime = 10);
this.imgQuest.active = !0;
this.imgQuest.scale = 0;
this.imgQuest.getComponent(cc.Sprite).spriteFrame = this.spriteFrameQuest[a];
this.imgQuest.stopAllActions();
var s = cc.place(n.GAME_HZMJ.QUEST_IMG_POS[r]), l = cc.scaleTo(.2, 1.5), u = cc.scaleTo(.1, .8), d = cc.scaleTo(.1, 1), h = cc.delayTime(.2), f = cc.sequence(s, l, u, d, h, cc.callFunc(function() {
t.imgQuest.scale = 0;
}));
this.imgQuest.runAction(f);
this.playManageAudio(o);
} else this.outCard(e); else this.getCard(e);
},
roundSummary: function(e) {
var t = this;
i.status = e.status;
this.hands.hideTing();
cc.sprFlag.removeFromParent();
cc.playCard = !1;
var n = cc.instantiate(this.preRoundSummary);
n.parent = cc.find("Canvas");
n.getComponent("ModuleRoundSummary16").init(e);
e.players.forEach(function(e, n) {
var a = i.realIdx[n];
t.players[a].roundReset();
t.players[a].setScore(e.wallet);
});
},
roundReset: function() {
this.hands.reset();
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.ground.forEach(function(e, t) {
e.reset(t);
});
this.layoutHands.forEach(function(e, t) {
0 != t && e.reset();
});
},
changeStatus: function(e) {
var t = i.realIdx[e.idx];
this.players[t].imgOffline.active = e.status;
},
onExitGame: function() {
o.playSfx();
},
cancelAuto: function(e) {
var t = i.realIdx[e.idx];
this.players[t].activeAutoPlay(!1);
},
startAuto: function(e) {
var t = i.realIdx[e.idx];
this.players[t].activeAutoPlay(!0);
},
changeAutoState: function(e) {
var t = i.realIdx[e.idx];
this.players[t].activeAutoPlay(e.auto);
},
syncCard: function(e) {
var t = [];
e.hands.sort(function(e, t) {
return e - t;
});
this.hands._hands.forEach(function(e, n) {
t[n] = e._card;
});
t.sort(function(e, t) {
return e - t;
});
if (t.toString() != e.hands.toString()) {
console.log("手牌同步: ", t, e.hands);
this.hands.init(e);
}
},
showSameCard: function(e) {
var t = e.data;
this.ground.forEach(function(e) {
e.showSameCard(t);
});
},
resetSameCard: function() {},
update: function() {
this.dtCount++;
if (this.dtCount % 60) {
this.dtCount = 0;
var e = new Date(), t = (e.getHours() < 10 ? "0" + e.getHours() : e.getHours()) + ":", n = e.getMinutes() < 10 ? "0" + e.getMinutes() : e.getMinutes();
this.lblPhoneTime.string = t + n;
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/hall/data/App": "App",
"../../Game16/Script/MJGameConfig": "MJGameConfig",
"../../Game19/Hulib/calc19": "calc19",
"../../GameMj/commonScript/ModuleFlowerMJ": void 0,
"../../GameMj/commonScript/ModuleGroundMJ": void 0,
"../../GameMj/commonScript/ModuleHandGroundMJ": void 0,
"../../GameMj/commonScript/ModuleHandsMJ": void 0,
"../../GameMj/commonScript/ModuleReplayHandsMJ": void 0,
DataBase: "DataBase",
PACK: "PACK",
"audio-ctrl": "audio-ctrl",
"native-extend": "native-extend",
"voice-ctrl": "voice-ctrl"
} ],
ModuleReplayHands16: [ function(e, t) {
"use strict";
cc._RF.push(t, "da127eikv1Au7UHHhlHGWcg", "ModuleReplayHands16");
cc.Class({
extends: cc.Component,
properties: {
layoutGround: e("./ModuleHandGround16")
},
start: function() {},
init: function(e) {
var t = this;
this._hands = e;
this.layoutHands = this.node.getChildByName("layoutHands");
this.layoutGetCard = this.node.getChildByName("layoutGetCard");
this.handsArr = this.layoutHands.children.slice();
this._hands.sort(function(e, t) {
return e - t;
});
this._hands.forEach(function(e) {
var n = t.handsArr.findIndex(function(e) {
return 0 == e.active;
});
if (n >= 0) {
t.handsArr[n].active = !0;
t.handsArr[n].getComponent("ModuleCards16").init(e);
t.handsArr[n]._card = e;
}
});
},
action: function(e) {
this.layoutGround.addGround(e);
},
getCard: function(e) {
this._hands.push(e);
this.layoutGetCard.active = !0;
this.layoutGetCard.children[0].getComponent("ModuleCards16").init(e);
this.layoutGetCard.children[0]._card = e;
},
removeCard: function(e) {
var t = this._hands.findIndex(function(t) {
return t == e;
});
t >= 0 && this._hands.splice(t, 1);
},
sortCards: function() {
var e = this;
this.layoutGetCard.active = !1;
this.layoutHands.children.forEach(function(e) {
return e.active = !1;
});
this._hands.sort(function(e, t) {
return e - t;
});
this._hands.forEach(function(t) {
var n = e.handsArr.findIndex(function(e) {
return 0 == e.active;
});
if (n >= 0) {
e.handsArr[n].active = !0;
e.handsArr[n].getComponent("ModuleCards16").init(t);
e.handsArr[n]._card = t;
}
});
},
setHands: function(e) {
switch (e.type) {
case "peng":
this.removeHands();
this.removeHands();
break;

case "fang":
this.removeHands();
this.removeHands();
this.removeHands();
break;

case "suo":
this.removeHands();
break;

case "an":
this.removeHands();
this.removeHands();
this.removeHands();
this.removeHands();
}
}
});
cc._RF.pop();
}, {
"./ModuleHandGround16": "ModuleHandGround16"
} ],
ModuleReplayHandsMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "6a355wLibJF6Jukyx/Usou5", "ModuleReplayHandsMJ");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("../../Main/Script/utils");
cc.Class({
extends: cc.Component,
properties: {
selfHands: cc.Prefab,
layoutGround: e("./ModuleHandGroundMJ"),
layoutFlower: e("./ModuleFlowerMJ")
},
onLoad: function() {
this.layoutHands = this.node.getChildByName("layoutHands");
this.layoutGetCard = this.node.getChildByName("layoutGetCard");
this.layoutGetCard.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.5, 130), cc.fadeTo(.5, 255))));
},
init: function(e, t) {
var a = this;
this.node.active = !0;
console.log("初始化对方手牌-----", e);
this.layoutGetCard.active = !1;
this.layoutHands.removeAllChildren();
e.hands.forEach(function(e) {
var n = cc.instantiate(a.selfHands);
n.getComponent("ModuleGroundCardsMJ").init(e, t, .7);
a.layoutHands.addChild(n);
});
if (!i.isNullOrEmpty(e.grounds)) {
var r = e.grounds.filter(function(e) {
return e.event != n.GameAction.FLOWER;
});
this.layoutGround.initGround(r, t);
var o = e.grounds.filter(function(e) {
return e.event == n.GameAction.FLOWER;
});
this.layoutFlower.initFlower(o, t);
}
},
outCard: function(e) {
console.log("出的牌", e);
this.removeHands(e, 1);
},
getCard: function(e, t) {
var n = this;
this.layoutGetCard.active = !0;
this.layoutGetCard._card = e.card;
this.layoutGetCard.getComponent("ModuleGroundCardsMJ").init(e.card, t);
this.layoutHands.removeAllChildren();
var i = 0;
e.hands.forEach(function(a) {
if (a != e.card || 0 != i) {
var r = cc.instantiate(n.selfHands);
r.getComponent("ModuleGroundCardsMJ").init(a, t, .7);
r._card = a;
n.layoutHands.addChild(r);
} else i++;
});
},
setHands: function(e) {
console.log("--删除类型-", e);
switch (e.event) {
case n.GameAction.PONG:
case n.GameAction.CHOW:
console.log("--删除2张-");
this.removeHands(e.card, 2);
break;

case n.GameAction.ZHI:
console.log("--删除3张-");
this.removeHands(e.card, 3);
break;

case n.GameAction.SHOW:
console.log("--删除1张-");
this.removeHands(e.card);
break;

case n.GameAction.KONG:
console.log("--删除4张-");
this.removeHands(e.card, 3);
}
},
removeHands: function(e, t) {
console.log("开始删牌", e, t);
var n = this.layoutHands.children;
this.layoutGetCard.active = !1;
n.forEach(function(e) {
e.active = !0;
});
var i = t;
if (this.layoutGetCard._card == e) {
console.log("删除抓拍", e, i);
this.layoutGetCard._card = -1;
i--;
}
n.forEach(function(t) {
console.log("当前node", t._card, i);
if (0 != i && t._card == e) {
t.destroy();
i--;
}
});
},
action: function(e, t) {
this.setHands(e);
this.layoutGround.addGround(e, t);
},
actionflower: function(e, t) {
this.setHands(e);
this.layoutFlower.addFlower(e, t);
},
reset: function() {
this.layoutGround.resetGround();
this.layoutFlower.resetFlower();
this.layoutGetCard.active = !1;
this.layoutHands.children.forEach(function(e) {
e.active = !1;
});
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../Main/Script/utils": "utils",
"./ModuleFlowerMJ": "ModuleFlowerMJ",
"./ModuleHandGroundMJ": "ModuleHandGroundMJ"
} ],
ModuleReplayMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "7b3c1ltHedFrJnb3vBPoqNt", "ModuleReplayMJ");
e("../Game19/Hulib/calc19");
var n = e("../Game16/Script/MJGameConfig"), i = e("../../Main/Script/TableInfo"), a = (e("../../Main/NetWork/Connector"), 
e("DataBase")), r = (e("PACK"), e("../../Main/Script/ROUTE")), o = (e("audio-ctrl"), 
e("native-extend").Social, e("../../Main/Script/utils")), s = (e("voice-ctrl"), 
e("../../Main/Script/Cache")), c = e("../../GameBase/GameConfig").GameConfig, l = e("../../script/ui/hall/data/App").App, u = [ "东", "南", "西", "北" ];
cc.Class({
extends: cc.Component,
properties: {
btnOperate: [ cc.Node ],
lblSpeed: cc.Label,
nodeDirection: cc.Node,
sprFlag: cc.Node,
layoutDirection: cc.Node,
player: cc.Prefab,
lblCombo: cc.Label,
lblPhoneTime: cc.Label,
lblTid: cc.Label,
lblTurn: cc.Label,
lblDeck: cc.Label,
lblWind: cc.Label,
card: cc.Prefab,
nodePlayCard: [ cc.Node ],
hands: [ e("../../GameMj/commonScript/ModuleHandsMJ") ],
layoutHands: [ e("../../GameMj/commonScript/ModuleReplayHandsMJ") ],
ground: [ e("../../GameMj/commonScript/ModuleGroundMJ") ],
selfHandGround: e("../../GameMj/commonScript/ModuleHandGroundMJ"),
selfHandFlower: e("../../GameMj/commonScript/ModuleFlowerMJ"),
preRoundSummary: cc.Prefab,
imgQuest: cc.Node,
spriteFrameQuest: [ cc.SpriteFrame ],
texturee: cc.SpriteAtlas,
dtCount: 0,
lastTxTime: 0
},
playManageAudio: function(t) {
var n = a.gameType < 10 ? "Game0" + a.gameType : "Game" + a.gameType;
if (cc.sys.isNative) {
var i = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + n + "/" + t;
cc.loader.load(i, function(t, n) {
t || e("audio-ctrl").getInstance().playSFX(n);
});
}
},
onLoad: function() {
this.addEvents();
this.speed = 1;
this._queueGameMsg = s.replayData;
this.length = this._queueGameMsg.length;
cc.sprFlag = this.sprFlag;
for (var e in this.texturee._spriteFrames) i.cardsSpriteFrame[e] = this.texturee._spriteFrames[e];
i.playerHead = [ null, null, null, null ];
i.players = [ null, null, null, null ];
this.alReady = !0;
this._status = "DONE";
cc.director.getScheduler().schedule(this.gameMsgSchedule, this, .2);
cc.director.getScheduler().setTimeScale(this.speed);
s.hideMask();
},
addEvents: function() {
l.EventManager.addEventListener(c.GameEventNames.HNMJ_RESET_SAME_CARD, this.resetSameCard, this);
l.EventManager.addEventListener(c.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
},
removeEvents: function() {
l.EventManager.removeEventListener(c.GameEventNames.HNMJ_RESET_SAME_CARD, this.resetSameCard, this);
l.EventManager.removeEventListener(c.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else if (!(this._queueGameMsg.length <= 0)) {
var e = this._queueGameMsg.shift(), t = cc.sys.isBrowser ? e : JSON.stringify(e);
console.log(t);
switch (e.route) {
case "SC_RECORD":
this.joinTable(e.data);
break;

case r.SC_PLAY_CARD:
this.playCard(e.data);
break;

case r.SC_OUT_CARD:
this.outCard(e.data);
break;

case r.SC_ACTION:
this.action(e.data);
break;

case r.SC_ROUND_SUMMARY:
cc.log(e.data);
this.roundSummary(e.data);
break;

case r.SC_REFRESH_CARD:
a.player.card = e.data.card;
break;

case r.SC_CANCEL_AUTO:
this.cancelAuto(e.data);
break;

case r.SC_START_AUTO:
this.startAuto(e.data);
break;

case r.SC_SYNC_HANDS:
this.syncCard(e.data);
break;

case r.SC_GAME_DESTORY:
this.playerLeave(e.data);
break;

default:
console.log(t);
}
}
},
joinTable: function(e) {
this.nodeDirection.active = !0;
i.zhuang = null;
i.wind = null;
var t = e.idx || 0;
i.idx = e.idx || 0;
i.options = e.options;
i.config = e.options;
if (4 == i.options.person) {
this.realIdx = [ 0, 0, 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 4] = 1;
this.realIdx[(t + 2) % 4] = 2;
this.realIdx[(t + 3) % 4] = 3;
} else if (3 == i.options.person) {
this.realIdx = [ 0, 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 3] = 1;
this.realIdx[(t + 2) % 3] = 2;
} else {
this.realIdx = [ 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 2] = 2;
}
i.realIdx = this.realIdx;
this.players = new Array(4);
this.initPlayer(e);
this.initTableMsg(e);
this.resetPlayStatus(e);
},
initPlayer: function(e) {
var t = this;
e.players.forEach(function(e) {
if (null != e) {
var n = i.realIdx[e.idx], a = cc.instantiate(t.player);
t.node.addChild(a);
t.players[n] = a.getComponent("ModulePlayer19");
t.players[n].playerInit(e);
console.log("初始化手牌-----", n);
e.idx == i.idx ? t.hands.init(e, !1) : t.layoutHands[n].init(e, n);
}
});
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.players.forEach(function(e) {
if (null != e) {
e.roundReset();
e.showGa();
}
});
this.ground.forEach(function(e, t) {
e.reset(t);
});
},
initTableMsg: function(e) {
this.lblTurn.string = (e.turn || "0") + "/" + i.options.maxTurn;
this.lblTid.string = "房号:" + e.options.tableID;
},
resume: function() {
cc.director.getScheduler().resumeTarget(this);
this.btnOperate[0].active = !0;
this.btnOperate[1].active = !1;
},
pause: function() {
cc.director.getScheduler().pauseTarget(this);
this.btnOperate[0].active = !1;
this.btnOperate[1].active = !0;
},
playSpeed: function(e, t) {
cc.director.getScheduler().isTargetPaused(this) && this.resume();
this.speed = "1" == t ? this.speed - .2 : this.speed + .2;
this.speed > 1.6 && (this.speed = 1.6);
this.speed < .4 && (this.speed = .4);
this.lblSpeed.string = "当前速度: x" + this.speed.toFixed(1);
cc.director.getScheduler().setTimeScale(this.speed);
},
quit: function() {
s.replayData = null;
cc.director.getScheduler().setTimeScale(1);
cc.director.getScheduler().unscheduleAllForTarget(this);
var e = cc.find("Canvas/summarySelect16");
e && e.destroy();
this.node && this.node.destroy();
},
joinGame: function(e) {
var t = i.realIdx[e.idx];
if (0 != t) {
var n = cc.instantiate(this.player);
n.parent = cc.find("Canvas/nodeTable");
this.players[t] = n.getComponent("ModulePlayer19");
this.players[t].playerInit(e);
}
},
gameInit: function(e) {
i.status = c.GameStatus.START;
if (e.combo && e.combo > 0) {
this.lblCombo.node.active = !0;
this.lblCombo.string = "+" + e.combo;
} else this.lblCombo.node.active = !1;
this.lblDeck.string = e.decks + "";
i.zhuang = e.banker;
i.wind = e.wind;
i.status = c.GameStatus.START;
i.currentPlayer = null;
this.lblTurn.string = (0 == e.turn ? 1 : e.turn) + "/" + i.options.maxTurn;
i.turn = e.turn;
this.players.forEach(function(e) {
var t = i.players[e.idx];
e.playerInit(t);
});
this.hands.init(e, !1);
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.players.forEach(function(e) {
if (null != e) {
e.roundReset();
e.showGa();
}
});
this.ground.forEach(function(e, t) {
e.reset(t);
});
this.layoutHands.forEach(function(e, t) {
if (2 != i.options.person) {
if (0 != t) {
e.reset();
e.init({
hands: 13
}, t);
}
} else if (2 == t) {
e.reset();
e.init({
hands: 13
}, t);
}
});
this.resetPlayStatus(e);
},
playCard: function(e) {
i.serialID = e.serialID;
if (e.idx == i.idx) {
this.hands._hands[this.hands._hands.length - 1].getCard = !0;
this.hands.sortCards();
}
this.hands.resetSameCard();
cc.playCard = e.idx == i.idx;
this.playCardLight(e);
},
playCardLight: function(e) {
this.nodePlayCard.forEach(function(e) {
e.active = !1;
});
var t = this.nodePlayCard[this.directionIdx[i.realIdx[e.idx]]];
t.active = !0;
t.stopAllActions();
t.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.8, 100), cc.fadeTo(.8, 255))));
this.players.forEach(function(t) {
t.active(e.idx);
});
},
resetPlayStatus: function(e) {
var t = i.realIdx[e.wind];
this.lblWind.string = "" + u[e.wind];
this.directionIdx = [ 0, 0, 0, 0 ];
switch (t) {
case 0:
this.directionIdx = [ 0, 1, 2, 3 ];
this.layoutDirection.rotation = 0;
break;

case 1:
this.layoutDirection.rotation = -90;
this.directionIdx = [ 3, 0, 1, 2 ];
break;

case 2:
this.layoutDirection.rotation = 180;
this.directionIdx = [ 2, 3, 0, 1 ];
break;

case 3:
this.layoutDirection.rotation = 90;
this.directionIdx = [ 1, 2, 3, 0 ];
}
this.nodePlayCard.forEach(function(e) {
e.active = !1;
});
this.players.forEach(function(e) {
e.imgActive.active = !1;
});
},
getCard: function(e) {
var t = this;
if (!(-1 == e.card || e.cards && e.cards.length > 0 && e.cards.includes(-1))) {
this._delayTime = 5;
var n = i.realIdx[e.idx];
this.lblDeck.string = e.decks + "";
e.idx == i.idx ? e.event == c.GameAction.DRAW_MULTI ? this.hands.getCard(e.cards) : this.hands.getCard(e.card) : e.event == c.GameAction.DRAW_MULTI ? e.cards.forEach(function(i) {
var a = {
event: "DRAW_MULTI",
idx: e.idx,
card: i,
hands: e.hands,
decks: e.decks,
auto: e.auto
};
t.layoutHands[n].getCard(a, n);
}) : this.layoutHands[n].getCard(e, n);
}
},
outCard: function(e) {
var t = {
idx: e.idx,
status: !1
};
this.changeStatus(t);
var n = i.realIdx[e.idx];
0 != n ? this.layoutHands[n].outCard(e.card) : this.hands.autoSortCard(e.card);
this.changeAutoState(e);
console.log("出牌-----", e.card, n);
this.ground[n].outCard(e.card, n, !0);
console.log("出牌--1---", this.ground[n]);
var a = "MELD_" + e.card + ".mp3";
this.playManageAudio(a);
},
action: function(e) {
var t = this;
this._delayTime = 5;
if (e.event != c.GameAction.DRAW && e.event != c.GameAction.DRAW_MULTI) if (e.event != c.GameAction.PLAY) {
var a, r = i.realIdx[e.idx], o = "";
if (e.idx == i.idx) {
this.hands._hands.forEach(function(e) {
return e.getCard = !1;
});
switch (e.event) {
case c.GameAction.PONG:
o = "PONG_0.mp3";
a = 0;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 2);
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case c.GameAction.CHOW:
o = "CHOW_0.mp3";
a = 5;
this.selfHandGround.addGround(e, 0);
[ e.tile, e.tile + 1, e.tile + 2 ].forEach(function(n) {
n != e.card && t.hands.removeCard(n);
});
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case c.GameAction.ZHI:
o = "KONG_0.mp3";
a = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 3);
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case c.GameAction.SHOW:
a = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card);
this.hands.checkedCard = null;
this.hands.sortCards();
o = "KONG_3.mp3";
break;

case c.GameAction.KONG:
o = "KONG_0.mp3";
a = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 4);
this.hands.sortCards();
break;

case c.GameAction.FLOWER_MULTI:
this._delayTime = 5;
o = "FLOWER.mp3";
a = 3;
e.cards.forEach(function(n) {
var i = {
auto: e.auto,
card: n,
event: c.GameAction.FLOWER,
idx: e.idx
};
t.selfHandFlower.addFlower(i, 0);
t.hands.removeCard(n);
});
this.hands.sortCards();
break;

case c.GameAction.FLOWER:
this._delayTime = 5;
o = "FLOWER.mp3";
a = 3;
this.selfHandFlower.addFlower(e, 0);
this.hands.removeCard(e.card);
this.hands.sortCards();
break;

case c.GameAction.WIN:
console.log("胡牌--data---", e);
a = e.from == e.idx ? 4 : 2;
o = e.from == e.idx ? "WIN_DRAW_1.mp3" : "WIN_NODRAW_2.mp3";
}
} else switch (e.event) {
case c.GameAction.PONG:
a = 0;
o = "PONG_1.mp3";
this.layoutHands[r].action(e, r);
break;

case c.GameAction.CHOW:
o = "CHOW_3.mp3";
a = 5;
this.layoutHands[r].action(e, r);
break;

case c.GameAction.WIN:
a = e.from == e.idx ? 4 : 2;
o = e.from == e.idx ? "WIN_DRAW_0.mp3" : "WIN_NODRAW_0.mp3";
break;

case c.GameAction.FLOWER_MULTI:
this._delayTime = 5;
o = "FLOWER.mp3";
a = 3;
e.cards.forEach(function(n) {
var i = {
auto: e.auto,
card: n,
event: c.GameAction.FLOWER,
idx: e.idx
};
t.layoutHands[r].actionflower(i, r);
});
break;

case c.GameAction.FLOWER:
this._delayTime = 5;
o = "FLOWER.mp3";
a = 3;
this.layoutHands[r].actionflower(e, r);
break;

case c.GameAction.SHOW:
a = 1;
this.layoutHands[r].action(e, r);
o = "KONG_3.mp3";
break;

default:
o = "KONG_1.mp3";
a = 1;
this.layoutHands[r].action(e, r);
}
e.event != c.GameAction.PONG && e.event != c.GameAction.CHOW && e.event != c.GameAction.ZHI || this.ground[i.realIdx[e.from]].removeCard();
e.event == c.GameAction.WIN && (this._delayTime = 10);
this.imgQuest.active = !0;
this.imgQuest.scale = 0;
this.imgQuest.getComponent(cc.Sprite).spriteFrame = this.spriteFrameQuest[a];
this.imgQuest.stopAllActions();
var s = cc.place(n.GAME_HZMJ.QUEST_IMG_POS[r]), l = cc.scaleTo(.2, 1.5), u = cc.scaleTo(.1, .8), d = cc.scaleTo(.1, 1), h = cc.delayTime(.2), f = cc.sequence(s, l, u, d, h, cc.callFunc(function() {
t.imgQuest.scale = 0;
}));
this.imgQuest.runAction(f);
this.playManageAudio(o);
} else this.outCard(e); else this.getCard(e);
},
roundSummary: function(e) {
var t = this;
if (!e.destory) {
this.hands.hideTing();
cc.sprFlag.removeFromParent();
cc.playCard = !1;
var n = cc.instantiate(this.preRoundSummary);
n.parent = cc.find("Canvas");
n.getComponent("ModuleRoundSummary19").init(e, !0);
n.active = !0;
e.players.forEach(function(e, n) {
var a = i.realIdx[n];
t.players[a].roundReset();
o.isNullOrEmpty(e.total) || t.players[a].setScore(e.total);
});
}
},
roundReset: function() {
this.hands.reset();
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.ground.forEach(function(e, t) {
e.reset(t);
});
this.layoutHands.forEach(function(e, t) {
0 != t && e.reset();
});
},
changeStatus: function(e) {
var t = i.realIdx[e.idx];
this.players[t].imgOffline.active = e.status;
},
onExitGame: function() {
s.playSfx();
},
cancelAuto: function(e) {
var t = i.realIdx[e.idx];
this.players[t].activeAutoPlay(!1);
},
startAuto: function(e) {
var t = i.realIdx[e.idx];
this.players[t].activeAutoPlay(!0);
},
changeAutoState: function(e) {
var t = i.realIdx[e.idx];
this.players[t].activeAutoPlay(e.auto);
},
syncCard: function(e) {
var t = [];
e.hands.sort(function(e, t) {
return e - t;
});
this.hands._hands.forEach(function(e, n) {
t[n] = e._card;
});
t.sort(function(e, t) {
return e - t;
});
if (t.toString() != e.hands.toString()) {
console.log("手牌同步: ", t, e.hands);
this.hands.init(e);
}
},
showSameCard: function(e) {
var t = e.data;
this.ground.forEach(function(e) {
e.showSameCard(t);
});
},
resetSameCard: function() {},
update: function() {
this.dtCount++;
if (this.dtCount % 60) {
this.dtCount = 0;
var e = new Date(), t = (e.getHours() < 10 ? "0" + e.getHours() : e.getHours()) + ":", n = e.getMinutes() < 10 ? "0" + e.getMinutes() : e.getMinutes();
this.lblPhoneTime.string = t + n;
}
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../GameMj/commonScript/ModuleFlowerMJ": "ModuleFlowerMJ",
"../../GameMj/commonScript/ModuleGroundMJ": "ModuleGroundMJ",
"../../GameMj/commonScript/ModuleHandGroundMJ": "ModuleHandGroundMJ",
"../../GameMj/commonScript/ModuleHandsMJ": "ModuleHandsMJ",
"../../GameMj/commonScript/ModuleReplayHandsMJ": "ModuleReplayHandsMJ",
"../../Main/NetWork/Connector": "Connector",
"../../Main/Script/Cache": "Cache",
"../../Main/Script/ROUTE": "ROUTE",
"../../Main/Script/TableInfo": "TableInfo",
"../../Main/Script/utils": "utils",
"../../script/ui/hall/data/App": "App",
"../Game16/Script/MJGameConfig": "MJGameConfig",
"../Game19/Hulib/calc19": "calc19",
DataBase: "DataBase",
PACK: "PACK",
"audio-ctrl": "audio-ctrl",
"native-extend": "native-extend",
"voice-ctrl": "voice-ctrl"
} ],
ModuleReplay_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "1f358O4kRZO5qZDtheyct+A", "ModuleReplay_09");
var n = e("ROUTE"), i = e("DataBase"), a = e("Cache"), r = e("TableInfo"), o = e("audio-ctrl"), s = e("../../../GameBase/GameConfig").GameConfig, c = e("../../../Main/NetWork/Connector"), l = e("../../../script/ui/hall/data/App").App, u = e("../../../Main/Script/utils");
cc.v2(-490, -294), cc.v2(526, 121), cc.v2(-61, 295), cc.v2(-492, 70);
cc.Class({
extends: cc.Component,
properties: {
_delayTime: 0,
lblCurrentScore: cc.Label,
bgCount: [ cc.Layout ],
btnOperate: [ cc.Button ],
sprProgress: cc.Sprite,
lblSpeed: cc.Label,
lblTurn: cc.Label,
lblRule: cc.Label,
nodeRule: cc.Node,
prePlayerInfo: cc.Prefab,
bgTable: cc.Node,
nodePlayerInfo: [],
imgPass: [ cc.Node ],
nodeHands: [ cc.Node ],
dropCards: [ cc.Node ],
prePlayCards: cc.Prefab,
hands: [],
preCoin: cc.Prefab,
preScore: cc.Prefab,
nodeRemainCard: cc.Prefab,
lblReDate: cc.Label,
summaryPrefab: cc.Prefab,
punishNode: cc.Node,
punishCount: cc.Label,
reportData: !1
},
onLoad: function() {
this.hands = [ null, null, null, null ];
this.addEvents();
this.initChat();
this.speed = 1;
this._queueGameMsg = [];
this._queueGameMsg = a.replayData;
this.msgCount = this._queueGameMsg.length;
this.btnOperate[1].node.active = !1;
cc.director.getScheduler().schedule(this.gameMsgSchedule, this, .2);
cc.director.getScheduler().setTimeScale(this.speed);
},
adminReplayInit: function(e) {
var t = this;
this.reportData = e;
this.punishNode.active = !0;
c.request(s.ServerEventName.ReportHandleLogs, {
clubID: l.Club.CurrentClubID,
fileID: e.fileID
}, function(e) {
u.isNullOrEmpty(e.handleLogs) || e.handleLogs.forEach(function(e) {
t.punishCount.string += e + "\n";
});
});
},
addEvents: function() {
this.node.on(s.GameEventNames.ZD_BACK_HALL, this.quit, this);
},
removeEvents: function() {
this.node.off(s.GameEventNames.ZD_BACK_HALL, this.quit, this);
},
resume: function() {
cc.director.getScheduler().resumeTarget(this);
this.btnOperate[0].node.active = !0;
this.btnOperate[1].node.active = !1;
},
pause: function() {
cc.director.getScheduler().pauseTarget(this);
this.btnOperate[0].node.active = !1;
this.btnOperate[1].node.active = !0;
},
quit: function() {
a.replayData = [];
cc.director.getScheduler().setTimeScale(1);
cc.director.getScheduler().unscheduleAllForTarget(this);
this.node && this.node.destroy();
},
playSpeed: function(e, t) {
cc.director.getScheduler().isTargetPaused(this) && this.resume();
this.speed = 1 == t ? this.speed - .2 : this.speed + .2;
this.speed > 1.6 && (this.speed = 1.6);
this.speed < .4 && (this.speed = .4);
this.lblSpeed.string = "当前速度: x" + this.speed.toFixed(1);
cc.director.getScheduler().setTimeScale(this.speed);
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else {
this.sprProgress.fillRange = 1 - this._queueGameMsg.length / this.msgCount;
if (!(this._queueGameMsg.length <= 0)) {
var e = this._queueGameMsg.shift();
console.log(e);
this.node.getComponent("ModuleAudioCtr_09");
switch (e.route) {
case n.SC_RECORD:
this.initTable(e.data);
break;

case n.SC_SHOW_CARD:
this.showPlayCards(e.data);
break;

case n.SC_PASS_CARD:
this.showPass(e.data);
break;

case n.SC_ACTION:
this.gameActon(e.data);
break;

case n.SC_SCORE:
this.scoreFly(e.data);
break;

case n.SC_FINISH:
var t = r.realIdx[e.data.idx];
e.data.idx == r.idx && (r.status = s.GameStatus.FINISH);
this.nodePlayerInfo[t].getComponent("ModulePlayerInfo_09").activeBaodan(!1);
this.nodePlayerInfo[t].getComponent("ModulePlayerInfo_09").finishAnim(e.data.finish);
r.players[t].finish = e.data.finish;
break;

case n.SC_ROUND_SUMMARY:
this.roundSummary(e.data);
break;

case n.SC_GAME_CHAT:
if (null != this.chat) {
this.chat.contentFly(e.data);
this._delayTime = 10;
}
break;

default:
console.log("-----不要-------", e.route);
}
}
}
},
gameActon: function(e) {
switch (e.event) {
case s.GameAction.CALL:
break;

case s.GameAction.PLAY:
this.showPlayCards(e);
break;

case s.GameAction.PASS:
this.showPass(e);
break;

case s.GameAction.PLUS:
break;

case s.GameAction.CREDIT:
this.scoreFly(e);
break;

case s.GameAction.ALERT:
break;

case s.GameAction.DONE:
var t = r.realIdx[e.idx];
e.idx == r.idx && (r.status = s.GameStatus.FINISH);
this.nodePlayerInfo[t].getComponent("ModulePlayerInfo_09").activeBaodan(!1);
this.nodePlayerInfo[t].getComponent("ModulePlayerInfo_09").finishAnim(e.rank);
r.players[t].rank = e.rank;
}
},
roundSummary: function(e) {
var t = this;
this._delayTime = 10;
e.players.forEach(function(e) {
var n = t.nodePlayerInfo[r.realIdx[e.idx]].getComponent("ModulePlayerInfo_09");
n.lblJifen.string = "0";
n.lblXifen.string = "0";
});
var n = cc.instantiate(this.summaryPrefab);
this.node.addChild(n, 2, "roundSummary");
n.getComponent("ModuleSummary09").initData(e, !0);
r.bao = -1;
},
refreshTableScore: function(e) {
var t = this;
e.cards.forEach(function(e) {
var n = e % 100;
if (5 == n || 10 == n) {
t.lblCurrentScore.node.runAction(cc.sequence(cc.scaleTo(.3, 1.3), cc.scaleTo(.2, 1)));
t.lblCurrentScore.string = "" + (n + parseInt(t.lblCurrentScore.string));
}
if (13 == n) {
t.lblCurrentScore.node.runAction(cc.sequence(cc.scaleTo(.3, 1.3), cc.scaleTo(.2, 1)));
t.lblCurrentScore.string = "" + (10 + parseInt(t.lblCurrentScore.string));
}
});
},
showPlayCards: function(e) {
var t = this;
e.action && this.addXi(e.action);
var n = e.currentCard ? e.currentCard : e, i = r.realIdx[n.idx];
r.current = null;
r.current = n;
this._delayTime = 4;
this.refreshTableScore(n);
var a = cc.url.raw("resources/Audio/Common/playCard.mp3");
o.getInstance().playSFX(a);
this.dropCards.forEach(function(e, n) {
e.destroyAllChildren();
t.imgPass[n].active = !1;
});
var s = cc.instantiate(this.prePlayCards);
s.parent = this.dropCards[i];
s.getComponent("ModuleShowCards_09").init(n, !0);
this.nodePlayerInfo[i].getComponent("ModulePlayerInfo_09").activeAuto(n.auto);
this.bgTable.getComponent("ModuleAudioCtr_09").playVoice(n, r.players[n.idx].prop.sex);
this.removeHands(n);
},
removeHands: function(e) {
var t = this, n = r.realIdx[e.idx];
e.cards.forEach(function(e) {
for (var i = 0; i < t.hands[n].length; i++) {
var a = t.hands[n].findIndex(function(t) {
return e == t;
});
if (a >= 0) {
t.hands[n].splice(a, 1);
return;
}
}
});
this.nodeHands[n].getComponent("ModuleHands_09").refreshHandCards(this.hands[n], !0);
},
showPass: function(e) {
this.nodePlayerInfo[r.realIdx[e.idx]].getComponent("ModulePlayerInfo_09").activeAuto(e.auto);
this._delayTime = 3;
this.bgTable.getComponent("ModuleAudioCtr_09").PassVoice(this.nodePlayerInfo[r.realIdx[e.idx]].sex);
var t = this.imgPass[r.realIdx[e.idx]];
t.active = !0;
t.scale = 0;
t.runAction(cc.scaleTo(.2, 1));
},
showBln: function(e) {
this.layerHandCards.active = !0;
r.currentPlayer = e;
this.showPlayerLight(e);
var t = Math.max(r.options.clock, 0);
this.nodePlayerInfo[r.realIdx[e]].showClock(t);
if (e == r.idx) {
this.layerHandCards.getComponent("ModuleCards_09").checkCurrent();
null != r.current && logic.decode(r.current.cards, r.config.shun);
this.changeBtn(!0);
this.btnTips.tipsTime = 0;
this.btnTips.getComponent(cc.Button).interactable = null != r.current;
this.btnPass.getComponent(cc.Button).interactable = null != r.current;
r.firstPlay || this.btnTips.getComponent("ModuleTips_09").autoTip();
}
r.firstPlay = !1;
this.nodePlayerInfo.forEach(function(e) {
return e.getComponent("ModulePlayerInfo_09").nodeBln.active = !1;
});
this.nodePlayerInfo[r.realIdx[e]].getComponent("ModulePlayerInfo_09").activeBln(!0);
},
initRealIdx: function(e) {
var t = null;
e.players.forEach(function(e) {
e.prop.pid == i.player.id && (t = e.idx);
});
null == t && (t = 0);
r.idx = t;
var n = [ 0, 0, 0, 0 ];
n[t] = 0;
n[(t + 1) % 4] = 1;
n[(t + 2) % 4] = 2;
n[(t + 3) % 4] = 3;
r.realIdx = n;
},
initTable: function(e) {
e.turn = e.turn ? e.turn : 0;
r.idx = e.idx;
r.config = e.config;
r.tid = e.tid;
r.current = e.current;
this.lblReDate.string = i.gameDate;
this.setTurn(e);
this.initRealIdx(e);
this.initPlayers(e);
e.players.forEach(function(e) {
1 == e.bao && (r.bao = e.idx);
});
},
initPlayers: function(e) {
var t = this;
this.nodePlayerInfo = new Array(4);
r.players = new Array(4);
r.playerHead = new Array(4);
r.players = e.players;
e.players.forEach(function(n, i) {
cc.log(n);
if (null != n) {
var a = cc.instantiate(t.prePlayerInfo);
a.parent = t.bgTable;
a.sex = e.players[i].prop.sex;
a.getComponent("ModulePlayerInfo_09").init(e.players[n.idx], !0, t.reportData);
t.nodePlayerInfo[r.realIdx[n.idx]] = a;
t.initHands(n);
}
});
},
initHands: function(e) {
var t = r.realIdx[e.idx];
e.hands.sort(function(e, t) {
return e % 100 - t % 100;
});
this.hands[t] = e.hands;
this.hands[t].reverse();
this.nodeHands[t].getComponent("ModuleHands_09").refreshHandCards(this.hands[t], !0);
},
showRule: function() {
this.nodeRule.active = !this.nodeRule.active;
},
initRule: function(e) {
e.config;
var t = "";
t += r.config.turn + "局\n";
r.config.plus ? t += "喜分算加分\n" : t += "喜分算乘分\n";
r.config.shun && (t += "可打顺子\n");
r.config.bomb && (t += "三个炸弹算一个喜分");
this.lblRule.string = t;
},
addXi: function(e) {
var t = this, n = e.from.length, i = cc.url.raw("resources/Audio/Common/addScore.mp3");
o.getInstance().playSFX(i);
var a = [ cc.v2(-cc.winSize.width / 2 + 69.5 + s.FitScreen, -272), cc.v2(cc.winSize.width / 2 - 69.5 - s.FitScreen, -37), cc.v2(-168, 148), cc.v2(-cc.winSize.width / 2 + 69.5 + s.FitScreen, -37) ], c = [], l = [], u = [], d = a[r.realIdx[e.to[0].idx]], h = 5 * e.to[0].score;
try {
c.push(cc.delayTime(.1));
for (var f = 0; f < h; f++) {
var p = cc.instantiate(this.preCoin);
p.parent = this.node;
p.setPosition(a[r.realIdx[e.from[f % n].idx]]);
var m = cc.v2(100 * Math.random() - 50, 100 * Math.random() - 50);
c.push(cc.targetedAction(p, cc.sequence(cc.delayTime(.5 * Math.random()), cc.spawn(cc.moveBy(.3, m), cc.scaleTo(.1, .7)), cc.moveTo(.3, d), cc.callFunc(function() {
this.destroy();
}, p))));
}
l.push(cc.spawn(c));
var g = cc.instantiate(this.preScore);
g.getComponent(cc.Label).string = "+" + e.to[0].score;
g.parent = this.node;
g && (g.opacity = 0);
g.scale = .2;
g.position = d;
var v = this.nodePlayerInfo[r.realIdx[e.to[0].idx]].getComponent("ModulePlayerInfo_09");
e.from.forEach(function(e) {
var n = t.nodePlayerInfo[r.realIdx[e.idx]].getComponent("ModulePlayerInfo_09");
u.push(n);
});
l.push(cc.targetedAction(g, cc.sequence(cc.spawn(cc.scaleTo(.2, 1.2), cc.fadeIn(.2)), cc.scaleTo(.1, 1), cc.delayTime(.1), cc.callFunc(function() {
try {
console.log("123132", e);
v.lblXifen.string = "" + e.to[0].bonus;
e.from.forEach(function(e, t) {
u[t].lblXifen.string = "" + e.bonus;
});
} catch (e) {}
}), cc.spawn(cc.moveBy(.4, 0, 40), cc.fadeOut(.4)), cc.callFunc(function() {
this.destroy();
}, g))));
} catch (e) {}
try {
this.node.runAction(cc.sequence(l));
} catch (e) {}
},
scoreFly: function(e) {
var t = this;
e.action && this.addXi(e.action);
r.current = null;
this.dropCards.forEach(function(e, n) {
e.removeAllChildren(!0);
t.bgCount[n].node.removeAllChildren(!0);
t.imgPass[n].active = !1;
});
if ("0" != this.lblCurrentScore.string) {
var n = cc.url.raw("resources/Audio/Common/addScore.mp3");
o.getInstance().playSFX(n);
this.lblCurrentScore.string = "0";
e.credits.forEach(function(e, n) {
t.nodePlayerInfo[r.realIdx[n]].getComponent("ModulePlayerInfo_09").setJifen(e);
r.players[r.realIdx[n]].scores = e;
});
}
},
initChat: function() {
var e = this;
cc.loader.loadRes("GameBase/preChat", function(t, n) {
if (t) e.initChat(); else {
e.chat = cc.instantiate(n).getComponent("ModuleChat");
var i = {
str: [ "哎呀头都被你们炸晕了", "赢了钱请大家去满天红吃火锅", "不要走决战到天亮", "对家的牌还不错", "跟你们打牌真是太开心了", "手气不好 建议你去趟台湾岛", "在哪个山沟沟里,信号这么差", "快点呀,头发都等白了", "跟你合作真是太愉快了" ],
url: "ChatImg/Game09",
aniPos: [ cc.v2(-cc.winSize.width / 2 + 69.5 + s.FitScreen, -210), cc.v2(cc.winSize.width / 2 - 69.5 - s.FitScreen, 65), cc.v2(-168, 250), cc.v2(-cc.winSize.width / 2 + 69.5 + s.FitScreen, 65) ],
msgPos: [ cc.v2(-cc.winSize.width / 2 + 69.5 + s.FitScreen + 50, -180), cc.v2(cc.winSize.width / 2 - 69.5 - s.FitScreen - 50, 95), cc.v2(-118, 280), cc.v2(-cc.winSize.width / 2 + 69.5 + s.FitScreen + 50, 95) ],
facePos: [ cc.v2(-cc.winSize.width / 2 + 69.5 + s.FitScreen + 139, -196), cc.v2(cc.winSize.width / 2 - 69.5 - s.FitScreen - 139, 79), cc.v2(-29, 264), cc.v2(-cc.winSize.width / 2 + 69.5 + s.FitScreen + 139, 79) ]
};
e.chat.init(i);
}
});
},
setTurn: function(e) {
r.turn = e.turn;
this.lblTurn.string = e.turn + " 局";
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/utils": "utils",
"../../../script/ui/hall/data/App": "App",
Cache: "Cache",
DataBase: "DataBase",
ROUTE: "ROUTE",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
ModuleRoundSummary08: [ function(e, t) {
"use strict";
cc._RF.push(t, "c6903Nt/O5PdYExbmtgTLyY", "ModuleRoundSummary08");
var n = e("../../../Main/Script/TableInfo"), i = (e("Connector"), e("../../../Main/Script/ROUTE"), 
e("native-extend").Social, e("../../../Main/Script/utils")), a = (e("audio-ctrl"), 
e("../../../Main/Script/Cache")), r = e("../../../GameBase/GameConfig").GameConfig, o = e("../../../script/ui/hall/data/App").App, s = [ "天胡", "地胡", "自摸", "十三红", "红胡", "一点红", "一块匾", "海底胡", "大卡", "中卡", "接炮" ];
cc.Class({
extends: cc.Component,
properties: {
infoContent: cc.Node,
bgMask: cc.Node,
winNode: cc.Node,
loseNode: cc.Node,
dataContent: cc.Node,
drawContent: cc.Node,
preMingTang: cc.Prefab,
sprHead: [ cc.Sprite ],
lblXi: cc.Label,
groundContent: cc.Node,
deckContent: cc.Node,
playerContent: cc.Node,
playerWinBg: cc.SpriteFrame,
playerLoseBg: cc.SpriteFrame,
leftPlayerWin: cc.SpriteFrame,
rightPlayerWin: cc.SpriteFrame,
card: cc.Prefab,
roundSummaryGroup: cc.Prefab,
lblWinScore: cc.Label,
layoutHu: cc.Layout,
playerDrawContent: cc.Node,
playerItem: cc.Node,
drawPlayerItem: cc.Node,
downloadTime: cc.Label,
preGameSummary: cc.Prefab,
avatarContent: [ e("../../../script/ui/common/Avatar") ],
avatarDrawContent: [ e("../../../script/ui/common/Avatar") ],
isReplay: !1,
cutCard: cc.Toggle,
adComponent: e("../../../script/ui/ad/AdComponent"),
descCut: cc.Label,
summaryData: null
},
onLoad: function() {
if (i.isNullOrEmpty(r.AdData) || i.isNullOrEmpty(r.AdData.LDZPSummaryAd)) this.adComponent.hideAd(); else {
this.adComponent.showAd();
this.adComponent.initAd(r.AdData.LDZPSummaryAd);
}
},
checkHu: function(e) {
var t = this;
if (!e.draw) {
var n = [], i = e.action.hu;
(1 & i) > 0 && n.push(0);
(2 & i) > 0 && n.push(1);
(4 & i) > 0 && n.push(2);
(8 & i) > 0 && n.push(3);
(16 & i) > 0 && n.push(4);
(32 & i) > 0 && n.push(5);
(128 & i) > 0 && n.push(6);
(256 & i) > 0 && n.push(7);
(512 & i) > 0 && n.push(8);
(1024 & i) > 0 && n.push(9);
(2048 & i) > 0 && n.push(10);
n.forEach(function(e) {
var n = cc.instantiate(t.preMingTang);
n.parent = t.layoutHu.node;
n.getChildByName("lblMT").getComponent(cc.Label).string = s[e];
n.getChildByName("lblScore").active = !1;
});
}
},
init: function(e, t) {
var a = this;
void 0 === t && (t = !1);
this.summaryData = e;
this.checkHu(e);
t || this.readyDownload();
this.isReplay = t;
this.playerItem.active = !1;
this.drawPlayerItem.active = !1;
if (e.draw) {
this.drawContent.active = !0;
this.winNode.active = !1;
this.loseNode.active = !1;
this.dataContent.active = !1;
this.playerDrawContent.active = !0;
e.players.forEach(function(e, t) {
var r = a.playerDrawContent.getChildByName("player" + t);
a.avatarDrawContent[t].avatarUrl = n.players[e.idx].prop.head;
r.getChildByName("name").getComponent(cc.Label).string = i.getStringByLength(n.players[e.idx].prop.name, 7);
r.getChildByName("score").getComponent(cc.Label).string = "" + e.scores.turn;
});
} else {
e.draw || (this.lblWinScore.string = "总得分：" + e.action.score);
this.initRemain(e);
this.initPlayer(e);
}
},
initPlayer: function(e) {
var t = this;
if (!e.draw) {
this.lblXi.string = "" + e.action.xi;
e.players.forEach(function(t) {
t.win = t.idx == e.action.idx ? 1 : 0;
t.pao = "PLAY" == e.action.src && e.action.from == t.idx;
});
e.players.sort(function(e, t) {
return t.win - e.win;
});
}
e.players.forEach(function(a, r) {
var o = t.playerContent.getChildByName("player" + r);
if (a.idx == n.idx) if (e.draw) ; else if (e.draw || e.action.idx != n.idx) {
t.winNode.active = !1;
t.loseNode.active = !0;
t.playerContent.getChildByName("player0").getComponent(cc.Sprite).spriteFrame = t.playerLoseBg;
} else {
t.winNode.active = !0;
t.loseNode.active = !1;
t.playerContent.getChildByName("player0").getComponent(cc.Sprite).spriteFrame = t.playerWinBg;
}
t.avatarContent[r].avatarUrl = n.players[a.idx].prop.head;
o.getChildByName("win").active = 1 == a.win && 1 != e.draw;
o.getChildByName("pao").active = a.pao && 1 != e.draw;
0 == r && t.initGround(e, r, a);
o.getChildByName("name").getComponent(cc.Label).string = i.getStringByLength(n.players[a.idx].prop.name, 7);
o.getChildByName("zonghuxi").active = !0;
o.getChildByName("goldIcon").active = !1;
o.getChildByName("zonghuxi").getChildByName("huxi").getComponent(cc.Label).string = "" + a.scores.turn;
});
},
initRemain: function(e) {
var t = this;
e.decks.forEach(function(e) {
var n = cc.instantiate(t.card);
n.width = 34;
n.height = 34;
n.parent = t.deckContent;
n.getComponent("BaseCardZP").init(e);
});
},
initGround: function(e) {
var t = this;
if (!e.draw) {
var n, i = null;
e.action.cards.forEach(function(t, a) {
t.cards.forEach(function(t) {
if (t == e.action.card && null == i) {
i = a;
n = t;
}
});
});
null != i && e.action.cards[i].cards.sort(function(e, t) {
return e == n && t != n ? -1 : e != n && t == n ? 1 : 0;
});
e.action.cards.forEach(function(e, n) {
var a, r = cc.instantiate(t.roundSummaryGroup);
r.parent = t.groundContent;
a = i == n;
r.getComponent("ModuleSummaryGroup05").init(e, !0, a);
});
}
},
makeHands: function(e) {
var t = [];
e.forEach(function(n, i) {
if (3 == n) {
e[i] -= 3;
t.push({
type: "kan",
cards: [ i, i, i ]
});
}
});
var n = [];
e.forEach(function(i, a) {
if (2 == i) {
e[a] -= 2;
n.push(a);
n.push(a);
}
if (4 == n.length) {
t.push({
type: "dui",
cards: n
});
n = [];
}
});
n.length > 0 && t.push({
type: "dui",
cards: n
});
if (e[1] > 0 && e[6] > 0 && e[9] > 0) {
e[1]--;
e[6]--;
e[9]--;
t.push({
type: "shun",
cards: [ 1, 6, 9 ]
});
}
if (e[11] > 0 && e[16] > 0 && e[19] > 0) {
e[11]--;
e[16]--;
e[19]--;
t.push({
type: "shun",
cards: [ 11, 16, 19 ]
});
}
e.forEach(function(n, i) {
if (i % 10 < 8 && e[i] > 0 && e[i + 1] > 0 && e[i + 2] > 0) {
e[i]--;
e[i + 1]--;
e[i + 2]--;
t.push({
type: "shun",
cards: [ i, i + 1, i + 2 ]
});
}
});
var i = [];
e.forEach(function(e, n) {
for (var a = 0; a < e; a++) {
i.push(n);
if (i.length >= 4) {
t.push({
cards: i.slice()
});
i = [];
}
}
});
i.length > 0 && t.push({
cards: i.slice()
});
return t;
},
sendReady: function(e, t) {
if (this.isReplay) ; else if (i.isNullOrEmpty(this.summaryData.ach)) o.EventManager.dispatchEventWith(r.GameEventNames.LDZP_SHUFFLE_CARD, "1" == t); else {
var n = cc.instantiate(this.preGameSummary);
n.getComponent("ModuleGameSummary08").init(this.summaryData.ach);
n.parent = cc.find("Canvas");
}
this.remove();
},
remove: function() {
this.downInterval && clearInterval(this.downInterval);
this.node && this.node.destroy();
},
readyDownload: function() {
var e = this;
this.downloadTime.node.active = !0;
var t = 30;
this.downloadTime.string = "30";
this.downloadTime.unscheduleAllCallbacks();
this.downloadTime.schedule(function() {
t--;
e.downloadTime.string = Math.max(t, 0);
t < 0 && e.downloadTime.unscheduleAllCallbacks();
}, 1);
},
onShowSummary: function() {
a.playSfx();
this.infoContent.active = !0;
this.bgMask.active = !0;
},
onShowTable: function() {
a.playSfx();
this.infoContent.active = !1;
this.bgMask.active = !1;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/ad/AdComponent": "AdComponent",
"../../../script/ui/common/Avatar": "Avatar",
"../../../script/ui/hall/data/App": "App",
Connector: "Connector",
"audio-ctrl": "audio-ctrl",
"native-extend": "native-extend"
} ],
ModuleRoundSummary16: [ function(e, t) {
"use strict";
cc._RF.push(t, "f008dvuAsxIYrxfyWqbx4Mw", "ModuleRoundSummary16");
var n = e("../../../Main/Script/TableInfo"), i = e("Connector"), a = e("ROUTE"), r = (e("native-extend").Social, 
e("../../../Main/Script/utils")), o = (e("audio-ctrl"), e("../../../Main/Script/Cache")), s = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
infoContent: cc.Node,
bgMask: cc.Node,
btnExit: cc.Node,
player: cc.Prefab,
layoutPlayer: cc.Node,
titleSpr: [ cc.Node ],
lblDetail: [ cc.Label ],
containerBird: cc.Node,
preBirdCard: cc.Prefab,
cutCard: cc.Toggle,
descCut: cc.Label
},
ready: function() {
if (n.status == s.GameStatus.WAIT || n.status == s.GameStatus.DESTORY) {
s.IsQuickStart = !0;
i.gameMessage(a.CS_PLAYER_LEAVE, {});
} else {
i.gameMessage(a.CS_GAME_READY, {
plus: !1,
shuffle: this.cutCard.isChecked
});
n.shuffle = this.cutCard.isChecked;
}
this.node && this.node.destroy();
},
birdReady: function() {
if (n.status == s.GameStatus.WAIT || n.status == s.GameStatus.DESTORY) {
s.IsQuickStart = !0;
i.gameMessage(a.CS_PLAYER_LEAVE, {});
} else {
i.gameMessage(a.CS_GAME_READY, {
plus: !0,
shuffle: this.cutCard.isChecked
});
n.shuffle = this.cutCard.isChecked;
}
this.node && this.node.destroy();
},
init: function(e, t) {
void 0 === t && (t = !1);
this.btnExit.active = n.status == s.GameStatus.WAIT || n.status == s.GameStatus.DESTORY;
t && (this.cutCard.node.active = !1);
if (e.draw) {
this.titleSpr[2].active = !0;
this.titleSpr[0].active = !1;
this.titleSpr[1].active = !1;
} else {
this.titleSpr[0].active = e.players.findIndex(function(e, t) {
return e.scores.base > 0 && t == n.idx;
}) >= 0;
this.titleSpr[1].active = e.players.findIndex(function(e, t) {
return e.scores.base > 0 && t != n.idx;
}) >= 0;
this.titleSpr[2].active = !1;
}
this.initPlayer(e);
this.initBird(e);
r.isNullOrEmpty(n.options) || r.isNullOrEmpty(n.options.shuffle) || (this.descCut.string = "每次" + r.formatGold(n.options.shuffle));
},
initPlayer: function(e) {
var t = this;
e.players.forEach(function(n, i) {
var a = cc.instantiate(t.player);
a.parent = t.layoutPlayer;
a.getComponent("ModuleRoundSummaryPlayer16").init(n, i, e);
});
},
initBird: function(e) {
var t = this;
if ("number" == typeof e.birds) {
var n = cc.instantiate(this.preBirdCard);
n.parent = this.containerBird;
n.getComponent("ModuleGroundCardsMJ").init(e.bird, 0);
} else e.birds.forEach(function(e) {
var n = cc.instantiate(t.preBirdCard);
n.parent = t.containerBird;
e.hit || (n.color = cc.color(142, 142, 142));
n.getComponent("ModuleGroundCardsMJ").init(e.card, 0);
});
},
onExit: function() {
o.playSfx();
o.showConfirm("是否退出房间", function() {
i.gameMessage(a.CS_PLAYER_LEAVE, {});
});
},
onShowSummary: function() {
o.playSfx();
this.infoContent.active = !0;
this.bgMask.active = !0;
},
onShowTable: function() {
o.playSfx();
this.infoContent.active = !1;
this.bgMask.active = !1;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
Connector: "Connector",
ROUTE: "ROUTE",
"audio-ctrl": "audio-ctrl",
"native-extend": "native-extend"
} ],
ModuleRoundSummary19: [ function(e, t) {
"use strict";
cc._RF.push(t, "9ea61jFaiZOMLh3wzuNc10I", "ModuleRoundSummary19");
var n = e("../../../Main/Script/TableInfo"), i = e("Connector"), a = e("ROUTE"), r = (e("native-extend").Social, 
e("../../../Main/Script/utils")), o = (e("audio-ctrl"), e("../../../Main/Script/Cache")), s = e("../../../GameBase/GameConfig").GameConfig, c = e("../../../script/ui/hall/data/App").App;
cc.Class({
extends: cc.Component,
properties: {
infoContent: cc.Node,
bgMask: cc.Node,
player: cc.Prefab,
layoutPlayer: cc.Node,
lblDeck: cc.Label,
lblContinue: cc.Label,
deckContent: cc.Node,
btnExit: cc.Node,
deckCard: cc.Prefab,
cutCard: cc.Toggle,
descCut: cc.Label,
roundSummary: null,
isReplay: !1,
interval: 0
},
ready: function() {
var e = this;
if (r.isNullOrEmpty(this.roundSummary.ach)) if (this.isReplay) {
c.EventManager.dispatchEventWith(s.GameEventNames.REPLAY_BACK_HALL);
this.node.destroy();
} else {
i.gameMessage(a.CS_GAME_READY, {
shuffle: this.cutCard.isChecked
});
n.shuffle = this.cutCard.isChecked;
this.node && this.node.destroy();
} else {
var t = this.roundSummary.ach.concat();
r.pop(s.pop.MJGameSummary, function(n) {
n.getComponent("ModuleGameSummaryMJ").initData(t, e.isReplay);
});
c.EventManager.dispatchEventWith(s.GameEventNames.HNMJ_GAME_SUMMARY);
this.node.destroy();
}
},
init: function(e, t) {
void 0 === t && (t = !1);
s.ShowTablePop = !0;
if (t) {
this.btnExit.active = !1;
this.cutCard.node.active = !1;
}
this.lblContinue.string = r.isNullOrEmpty(e.total) ? "下一局" : "游戏结算";
this.isReplay = t;
this.roundSummary = e;
this.initPlayer(e);
this.initDeck(e.decks);
r.isNullOrEmpty(n.options) || r.isNullOrEmpty(n.options.shuffle) || (this.descCut.string = "每次" + r.formatGold(n.options.shuffle) + "元");
},
initPlayer: function(e) {
var t = this;
e.players.forEach(function(n, i) {
var a = cc.instantiate(t.player);
a.parent = t.layoutPlayer;
a.getComponent("ModuleRoundSummaryPlayer19").init(n, i, e);
});
},
initDeck: function(e) {
var t = this;
this.deckContent.removeAllChildren();
this.lblDeck.string = "剩余" + (e.length || 0) + "张";
e.forEach(function(e) {
var n = cc.instantiate(t.deckCard);
n.getComponent("ModuleGroundCardsMJ").init(e, 0);
t.deckContent.addChild(n);
});
},
onExit: function() {
o.playSfx();
cc.director.loadScene("Lobby");
},
onShowSummary: function() {
o.playSfx();
this.infoContent.active = !0;
this.bgMask.active = !0;
},
onShowTable: function() {
o.playSfx();
this.infoContent.active = !1;
this.bgMask.active = !1;
},
update: function() {
if (this.roundSummary.clock && r.isNullOrEmpty(this.roundSummary.total)) {
this.interval++;
if (this.interval % 60 == 0) {
this.interval = 0;
var e = r.getTimeStamp(), t = this.roundSummary.clock, n = Math.floor((t - e) / 1e3);
this.lblContinue.string = "下一局 (" + Math.max(n, 0) + ")";
}
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/hall/data/App": "App",
Connector: "Connector",
ROUTE: "ROUTE",
"audio-ctrl": "audio-ctrl",
"native-extend": "native-extend"
} ],
ModuleRoundSummaryPlayer16: [ function(e, t) {
"use strict";
cc._RF.push(t, "b403bwIWMlCnI49PubqeJ0B", "ModuleRoundSummaryPlayer16");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("../../../Main/Script/TableInfo"), a = e("../../../Main/Script/utils"), r = {
ZHI: "点杠",
KONG: "暗杠",
BU: "明杠",
PONG: "",
CHOW: ""
};
cc.Class({
extends: cc.Component,
properties: {
sprHead: cc.Sprite,
lblName: cc.Label,
lblId: cc.Label,
lblScore: cc.Label,
lblBird: cc.Label,
lblGang: cc.Label,
lblPiao: cc.Label,
lblTotal: cc.Label,
imgZhuang: cc.Sprite,
layoutHands: cc.Node,
layoutGround: cc.Node,
card: cc.Prefab,
group: cc.Prefab,
gangType: cc.Prefab,
huCard: cc.Node
},
init: function(e, t, r) {
console.log("结算----", e, t, r);
this.lblName.string = a.getStringByLength(i.players[t].prop.name, 5);
this.lblId.string = "ID:" + i.players[t].prop.pid;
a.setHead(this.sprHead, i.players[t].prop.head);
this.lblScore.string = a.formatGold(e.scores.base);
this.lblBird.string = a.formatGold(e.scores.bird);
this.lblGang.string = a.formatGold(e.scores.kong);
this.lblPiao.string = a.formatGold(e.scores.plus || 0);
this.lblTotal.string = a.formatGold(e.scores.turn || 0);
this.initPlayerHands(e);
this.initGround(e);
this.imgZhuang.node.active = t == i.zhuang;
if (!a.isNullOrEmpty(e.card)) {
console.log("胡牌");
this.huCard.getComponent("ModuleGroundCardsMJ").init(e.card, 0);
this.huCard.active = !0;
this.huCard.scale = n.FitScreen > 0 ? 1.2 : .9;
this.node.getChildByName("info").getChildByName("hu").active = !0;
}
},
initPlayerHands: function(e) {
var t = this, i = 0;
this.layoutHands.parent.active = !0;
e.hands.sort(function(e, t) {
return e - t;
});
e.hands.forEach(function(e) {
var a = cc.instantiate(t.card);
a.active = !0;
a.scale = n.FitScreen > 0 ? 1.2 : .9;
a.parent = t.layoutHands;
a.getComponent("ModuleGroundCardsMJ").init(e, 0);
0 == e && i++;
});
return i;
},
initGround: function(e) {
var t = this;
e.grounds.length > 0 && (this.layoutGround.active = !0);
e.grounds.forEach(function(e) {
var i = cc.instantiate(t.group);
i.active = !0;
i.parent = t.layoutGround;
i.scale = n.FitScreen > 0 ? .8 : .55;
i.getComponent("ModuleGroundDetailMJ").init(e, 0);
if (e.event == n.GameAction.ZHI || e.event == n.GameAction.KONG || e.event == n.GameAction.BU) {
var a = cc.instantiate(t.gangType);
a.getComponent(cc.Label).string = r[e.event];
a.position = cc.v2(0, 100);
i.addChild(a);
}
});
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils"
} ],
ModuleRoundSummaryPlayer19: [ function(e, t) {
"use strict";
cc._RF.push(t, "f7875L/WXtAfq1Y2Pbpflen", "ModuleRoundSummaryPlayer19");
var n, i = e("../../../GameBase/GameConfig").GameConfig, a = e("../../../Main/Script/TableInfo"), r = (e("../../../Main/Script/utils"), 
(n = {
triplet: " 碰碰胡x",
dragon: " 豪华七小对x",
one: " 幺九字x",
single: " 十三幺x",
pair: " 七对x",
mix: " 混一色x",
pure: " 清一色x",
sky: " 天胡x",
kong: " 杠花x",
draw: " 自摸x",
combo: " 连庄+",
flower: " 花胡+",
follow: " 首轮跟张",
loser: " 包牌",
shooter: " 放炮",
winner: " 接炮"
}).follow = " 跟牌", n), o = {
ZHI: "点杠 x1",
KONG: "暗杠 x2",
BU: "明杠 x1",
PONG: "",
CHOW: ""
};
cc.Class({
extends: cc.Component,
properties: {
sprHead: e("../../../script/ui/common/Avatar"),
lblTotal: cc.Label,
lblHuStr: cc.Label,
lblFlowerStr: cc.Label,
lblGang: cc.Label,
imgZhuang: cc.Node,
imgHu: cc.Node,
handContent: cc.Node,
groundContent: cc.Node,
flowerContent: cc.Node,
card: cc.Prefab,
group: cc.Prefab,
huCard: cc.Node,
winFont: cc.Font,
loseFont: cc.Font
},
init: function(e, t) {
this.sprHead.avatarUrl = a.players[t].prop.head;
this.lblTotal.font = (e.score || 0) < 0 ? this.loseFont : this.winFont;
this.lblTotal.string = e.score || 0;
this.initPlayerHands(e);
this.initGround(e);
this.imgZhuang.active = e.host;
this.imgHu.active = e.win;
if (e.card) {
this.huCard.getComponent("ModuleGroundCardsMJ").init(e.card, 0);
this.huCard.active = !0;
this.huCard.scale = .8;
} else this.huCard.active = !1;
var n = "";
for (var i in e.special) 0 != e.special[i] && (n += r[i] + (e.special[i] < 0 ? "" : "" + e.special[i]));
for (var o in e.plus) 0 != e.plus[o] && (n += r[o] + (e.plus[o] < 0 ? "" : "" + e.plus[o]));
e.combo && e.combo > 0 && (n += " 连庄 +" + e.combo);
this.lblHuStr.string = n;
},
initPlayerHands: function(e) {
var t = this;
this.handContent.removeAllChildren();
e.hands.forEach(function(e) {
var n = cc.instantiate(t.card);
n.active = !0;
n.scale = .85;
n.parent = t.handContent;
n.getComponent("ModuleGroundCardsMJ").init(e, 0);
});
},
initGround: function(e) {
var t = this;
this.flowerContent.removeAllChildren();
this.groundContent.removeAllChildren();
var n = 0, a = "";
e.grounds.forEach(function(e) {
if (e.event != i.GameAction.FLOWER) {
e.event != i.GameAction.ZHI && e.event != i.GameAction.KONG && e.event != i.GameAction.BU || (a += e.card > 30 ? " 字" + o[e.event] : " " + o[e.event]);
var r = cc.instantiate(t.group);
r.active = !0;
r.parent = t.groundContent;
r.scale = .55;
r.getComponent("ModuleGroundDetailMJ").init(e, 0);
} else {
n++;
var s = cc.instantiate(t.card);
s.active = !0;
s.scale = .8;
s.parent = t.flowerContent;
s.getComponent("ModuleGroundCardsMJ").init(e.card, 0);
}
});
n > 0 && (this.lblFlowerStr.string = n + "花");
this.lblGang.string = a;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/common/Avatar": "Avatar"
} ],
ModuleRulePop: [ function(e, t) {
"use strict";
cc._RF.push(t, "f29ccU+1JVFOL4PSIi3pzCF", "ModuleRulePop");
e("../NetWork/Connector");
var n = e("../Script/Cache"), i = (e("../Script/DataBase"), e("../Script/utils"), 
e("SceneLogin"), e("../../GameBase/GameConfig").GameConfig);
e("../Script/audio-ctrl");
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
PDKBtn: cc.Node,
XHZDBtn: cc.Node,
LDZPBtn: cc.Node,
web: cc.WebView
},
onLoad: function() {
this.addEvents();
this.refreshUI();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.PDKBtn.on(cc.Node.EventType.TOUCH_END, this.onClickPDK, this);
this.XHZDBtn.on(cc.Node.EventType.TOUCH_END, this.onClickXHZD, this);
this.LDZPBtn.on(cc.Node.EventType.TOUCH_END, this.onClickLDZP, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.PDKBtn.off(cc.Node.EventType.TOUCH_END, this.onClickPDK, this);
this.XHZDBtn.off(cc.Node.EventType.TOUCH_END, this.onClickXHZD, this);
this.LDZPBtn.off(cc.Node.EventType.TOUCH_END, this.onClickLDZP, this);
},
refreshUI: function() {
this.web.url = i.ConfigUrl + "info/rule_pdk.HTML";
},
onClickPDK: function() {
n.playSfx();
this.web.url = i.ConfigUrl + "info/rule_pdk.HTML";
},
onClickXHZP: function() {
n.playSfx();
this.web.url = i.ConfigUrl + "info/rule_xhzp.HTML";
},
onClickXHZD: function() {
n.playSfx();
this.web.url = i.ConfigUrl + "info/rule_xhzd.HTML";
},
onClickLDZP: function() {
n.playSfx();
this.web.url = i.ConfigUrl + "info/rule_ldzp.HTML";
},
onClickClose: function() {
n.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/audio-ctrl": "audio-ctrl",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleRule: [ function(e, t) {
"use strict";
cc._RF.push(t, "2be60f+hgtCDbAq0hhews9r", "ModuleRule");
var n = e("Cache");
cc.Class({
extends: cc.Component,
properties: {
content: cc.WebView
},
start: function() {},
showRule: function(e, t) {
parseInt(t);
this.node.parent = cc.find("Canvas");
},
exitRule: function() {
n.playSfx();
this.node.removeFromParent(!1);
}
});
cc._RF.pop();
}, {
Cache: "Cache"
} ],
ModuleSelfCardsMJ: [ function(e, t) {
"use strict";
cc._RF.push(t, "6b941R1qxlNuJW7P4dQrjW7", "ModuleSelfCardsMJ");
var n = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {},
init: function(e, t, i) {
void 0 === t && (t = 1);
void 0 === i && (i = !1);
0 == e && (e = 35);
this.node.getComponent(cc.Sprite).spriteFrame = n.cardsSpriteFrame["p1b" + e];
this.node.height *= t;
this.node.width *= t;
if (this.node.getChildByName("ting")) {
this.node.getChildByName("ting").height *= t;
this.node.getChildByName("ting").width *= t;
}
this.node.getChildByName("lai") && i && (this.node.getChildByName("lai").active = 0 == e);
if (this.node.getChildByName("back")) {
this.node.getChildByName("back").height *= t;
this.node.getChildByName("back").width *= t;
}
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
ModuleServicePop: [ function(e, t) {
"use strict";
cc._RF.push(t, "f6321fgDpVBTbKavtpYWcWV", "ModuleServicePop");
e("../NetWork/Connector");
var n = e("../Script/Cache"), i = e("../Script/DataBase"), a = e("../Script/utils"), r = (e("SceneLogin"), 
e("../../GameBase/GameConfig").GameConfig), o = (e("../Script/audio-ctrl"), e("../GoEasy/GoEasy").GoEasy), s = e("../Script/native-extend"), c = e("../GoEasy/GoEasyConfig").GoEasyConfig, l = e("../../script/ui/hall/data/App").App, u = s.Social;
cc.Class({
extends: e("../GoEasy/GoEasyChat"),
properties: {
web: cc.WebView,
chatRoomNode: cc.Node
},
onLoad: function() {
var e = this;
this.refreshUI();
u.serviceImgCallBack = function(t) {
e.addImgItem(t);
};
},
addEvents: function() {
l.EventManager.addEventListener(r.GameEventNames.GOEASY_UPDATE_SERVICE, this.handleChat, this);
},
removeEvents: function() {
l.EventManager.removeEventListener(r.GameEventNames.GOEASY_UPDATE_SERVICE, this.handleChat, this);
},
refreshUI: function() {
var e = this;
if (r.GameInfo.serviceMode) {
this.web.node.active = !1;
this.chatRoomNode.active = !0;
o.privateHistory(c.ServiceID).then(function(t) {
o.markServiceAsRead();
t.content.forEach(function(t) {
e.addChatItem(t);
});
e.addEvents();
}).catch(function() {
e.addEvents();
});
} else {
this.web.node.active = !0;
this.chatRoomNode.active = !1;
this.web.url = r.GameInfo.customeService + '&metadata={"tel":"' + i.player.phone + '","name":"' + i.player.name + '","qq":"' + i.player.id + '","addr":"xyqp"}';
console.log(r.GameInfo.customeService + '&metadata={"tel":"' + i.player.phone + '","name":"' + i.player.name + '","qq":"' + i.player.id + '","addr":"xyqp"}');
}
},
addChatItem: function(e) {
var t = this;
if ("PRIVATE" == JSON.parse(e.payload.text).type || "SERVICE" == JSON.parse(e.payload.text).type) {
var n = cc.instantiate(this.msgItem);
n.getComponent("ChatItem").initData(e);
this.msgContent.addChild(n);
} else {
var i = cc.instantiate(this.systemItem);
i.getChildByName("word").getComponent(cc.Label).string = "" + JSON.parse(e.payload.text).content;
this.msgContent.addChild(i);
}
setTimeout(function() {
t.msgScrollView.scrollToBottom();
}, 100);
},
onClickSend: function() {
if (a.isNullOrEmpty(this.msgInput.string)) n.alertTip("消息不能为空"); else {
var e = {
content: this.msgInput.string,
contentType: c.ContentType.TEXT,
type: c.MessageType.SERVICE,
timestamp: new Date().getTime()
}, t = {
payload: {
text: JSON.stringify(e)
},
receiverId: c.ServiceID,
senderId: i.player.id
};
this.addChatItem(t);
o.sendMessage(e, c.ChatType.PRIVATE, c.ServiceID, i.player);
this.msgInput.string = "";
}
},
addImgItem: function(e) {
var t = {
content: r.GameInfo.resourceURL + e,
contentType: c.ContentType.IMAGE,
type: c.MessageType.SERVICE,
timestamp: new Date().getTime()
}, n = {
payload: {
text: JSON.stringify(t)
},
receiverId: c.ServiceID,
senderId: i.player.id
};
this.addChatItem(n);
o.sendMessage(t, c.ChatType.PRIVATE, c.ServiceID, i.player);
},
onClickClose: function() {
n.playSfx();
u.serviceImgCallBack = null;
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
u.serviceImgCallBack = null;
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../GoEasy/GoEasy": "GoEasy",
"../GoEasy/GoEasyChat": "GoEasyChat",
"../GoEasy/GoEasyConfig": "GoEasyConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/audio-ctrl": "audio-ctrl",
"../Script/native-extend": "native-extend",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleSettingPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "4202b8PQJxDlbAD0TVGyYm6", "ModuleSettingPop");
e("../NetWork/Connector");
var n = e("../Script/Cache"), i = (e("../Script/DataBase"), e("../Script/utils")), a = (e("SceneLogin"), 
e("../../GameBase/GameConfig").GameConfig), r = e("../Script/audio-ctrl");
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
updateBtn: cc.Node,
exitBtn: cc.Node,
changeUserBtn: cc.Node,
musicOff: cc.Node,
musicOpen: cc.Node,
soundOff: cc.Node,
soundOpen: cc.Node,
soundPage: cc.Node,
infoPage: cc.Node
},
onLoad: function() {
this.addEvents();
this.refreshUI();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.updateBtn.on(cc.Node.EventType.TOUCH_END, this.onClickUpdate, this);
this.exitBtn.on(cc.Node.EventType.TOUCH_END, this.onClickExit, this);
this.changeUserBtn.on(cc.Node.EventType.TOUCH_END, this.onClickChange, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.updateBtn.off(cc.Node.EventType.TOUCH_END, this.onClickUpdate, this);
this.exitBtn.off(cc.Node.EventType.TOUCH_END, this.onClickExit, this);
this.changeUserBtn.off(cc.Node.EventType.TOUCH_END, this.onClickChange, this);
},
refreshUI: function() {
var e = i.getValue(a.StorageKey.MusicVolume, 1);
this.musicOff.active = 0 == e;
this.musicOpen.active = 1 == e;
var t = i.getValue(a.StorageKey.SoundVolume, 1);
this.soundOff.active = 0 == t;
this.soundOpen.active = 1 == t;
},
showSoundPage: function() {
n.playSfx();
this.soundPage.active = !0;
this.infoPage.active = !1;
},
showInfoPage: function() {
n.playSfx();
this.soundPage.active = !1;
this.infoPage.active = !0;
},
closeMusic: function() {
n.playSfx();
this.musicOff.active = !0;
this.musicOpen.active = !1;
r.getInstance().setBGMVolume(0);
i.saveValue(a.StorageKey.MusicVolume, 0);
},
openMusic: function() {
n.playSfx();
this.musicOff.active = !1;
this.musicOpen.active = !0;
r.getInstance().setBGMVolume(1);
i.saveValue(a.StorageKey.MusicVolume, 1);
},
closeSound: function() {
n.playSfx();
this.closeMusic();
this.soundOff.active = !0;
this.soundOpen.active = !1;
r.getInstance().setSFXVolume(0);
i.saveValue(a.StorageKey.SoundVolume, 0);
},
openSound: function() {
n.playSfx();
this.openMusic();
this.soundOff.active = !1;
this.soundOpen.active = !0;
r.getInstance().setSFXVolume(1);
i.saveValue(a.StorageKey.SoundVolume, 1);
},
onClickChange: function() {
n.playSfx();
cc.director.loadScene("Login");
},
onClickExit: function() {
n.playSfx();
n.showConfirm("是否退出游戏", function() {
cc.game.end();
});
},
onClickUpdate: function() {
n.playSfx();
cc.director.loadScene("Update");
},
onClickClose: function() {
n.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/audio-ctrl": "audio-ctrl",
"../Script/utils": "utils",
SceneLogin: "SceneLogin"
} ],
ModuleShowCards_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "469ad+CO5FIFK4fdTKbjgMK", "ModuleShowCards_09");
e("../../../Main/Script/TableInfo");
var n = e("Logic_09");
cc.Class({
extends: cc.Component,
properties: {
preCards: cc.Prefab,
nodeFirst: cc.Node,
nodeDan: cc.Node
},
action: function(e) {
e && (e.opacity = 0);
e.scale = 1.3;
e.runAction(cc.spawn(cc.scaleTo(.05, 1), cc.fadeIn(.05)));
},
init: function(e, t) {
var i = this, a = n.sortPlayedCard(e), r = e.card, o = (e.count, e.cards.length, 
e.count), s = [], c = [];
cc.log(a);
if ("SAN" == e.type || "FEIJI" == e.type) {
for (var l = function(t) {
e.cards[t] % 100 >= r && e.cards[t] % 100 < r + o && s.filter(function(n) {
return n % 100 == e.cards[t] % 100;
}).length < 3 ? s.push(e.cards[t]) : c.push(e.cards[t]);
}, u = 0; u < e.cards.length; u++) l(u);
s.sort(n.sortCard);
c.sort(n.sortCard);
cc.log(s, c);
for (var d = 0; d < s.length; d++) {
var h = cc.instantiate(this.preCards);
h.parent = this.nodeFirst;
t && this.action(h, d);
h.getComponent("ModuleCardsInit_09").init(s[d]);
}
for (var f = 0; f < c.length; f++) {
var p = cc.instantiate(this.preCards);
this.nodeDan.active = !0;
p.parent = this.nodeDan;
t && this.action(p, f);
p.getComponent("ModuleCardsInit_09").init(c[f]);
}
} else if ("DUI" == e.type || "DAN" == e.type) for (var m = 0; m < a.length; m++) {
var g = cc.instantiate(this.preCards);
g.parent = this.nodeFirst;
this.action(g, m);
g.getComponent("ModuleCardsInit_09").init(a[m]);
} else a.forEach(function(e, t) {
var n = cc.instantiate(i.preCards);
n.y += 30;
n && (n.opacity = 0);
n.parent = i.nodeFirst;
var a = cc.moveBy(.1, cc.v2(0, -30)), r = cc.fadeIn(.1), o = cc.spawn(a, r), s = cc.delayTime(.02 * (t + 1));
n.runAction(cc.sequence(s, o));
n.getComponent("ModuleCardsInit_09").init(e);
});
}
});
cc._RF.pop();
}, {
"../../../Main/Script/TableInfo": "TableInfo",
Logic_09: "Logic_09"
} ],
ModuleShowNiao: [ function(e, t) {
"use strict";
cc._RF.push(t, "7ab5b6gS59IiaVaVcfPxPnN", "ModuleShowNiao");
var n = e("../../../Main/Script/Cache");
cc.Class({
extends: cc.Component,
properties: {
sprCount: cc.Sprite,
sfCountArr: [ cc.SpriteFrame ],
countIcon: cc.Node,
content_1: cc.Node,
content_2: cc.Node,
content_3: cc.Node,
niaoCard: cc.Prefab,
preRoundSummary: cc.Prefab
},
start: function() {},
renderUI: function(e) {
var t = this;
console.log("抓鸟数据", e);
var i = 0;
if (e.birds.length > 0) {
n.playSound("zhongma");
var a = e.birds[0], r = cc.instantiate(this.niaoCard);
r.getComponent("ModuleNiaoCards16").init(a.card, !0, 0);
this.content_1.active = !0;
this.content_1.addChild(r);
i = a.zhong;
this.sprCount.spriteFrame = this.sfCountArr[i];
} else {
this.sprCount.node.active = !1;
this.countIcon.active = !1;
}
setTimeout(function() {
var n = cc.instantiate(t.preRoundSummary);
n.parent = cc.find("Canvas");
n.getComponent("ModuleRoundSummary16").init(e);
n.active = !0;
if (t.node) {
t.node.removeFromParent();
t.node.destroy();
}
}, 3e3);
}
});
cc._RF.pop();
}, {
"../../../Main/Script/Cache": "Cache"
} ],
ModuleSummary07: [ function(e, t) {
"use strict";
cc._RF.push(t, "8d333TdjpdO9LW5kknUdB70", "ModuleSummary07");
var n = e("../../../Main/NetWork/Connector"), i = e("../../../Main/Script/Cache"), a = e("../../../GameBase/GameConfig").GameConfig, r = (e("../../../Main/Script/utils"), 
e("../../../Main/Script/TableInfo")), o = e("../../../Main/Script/ROUTE"), s = e("../../../script/ui/hall/data/App").App;
cc.Class({
extends: cc.Component,
properties: {
summaryContent: cc.Node,
summaryItem: cc.Prefab,
shuffleBtn: cc.Node,
unShuffleBtn: cc.Node,
continueBtn: cc.Node,
goBackBtn: cc.Node,
loseBg: cc.Node,
winBg: cc.Node,
infoContent: cc.Node,
bgMask: cc.Node,
cutCard: cc.Toggle,
descCut: cc.Label,
continueSpr: cc.SpriteFrame,
nextSpr: cc.SpriteFrame,
isReplay: !1
},
onLoad: function() {},
initData: function(e, t) {
var n = this;
void 0 === t && (t = !1);
this.isReplay = t;
if (e.winner == r.idx) {
this.winBg.active = !0;
this.loseBg.active = !1;
} else {
this.winBg.active = !1;
this.loseBg.active = !0;
}
e.players.forEach(function(t) {
var i = cc.instantiate(n.summaryItem);
i.getComponent("ModuleSummaryItem07").initData(t, e.winner, e.ach);
n.summaryContent.addChild(i);
});
if (t) {
this.shuffleBtn.active = !1;
this.goBackBtn.active = !1;
this.unShuffleBtn.active = !1;
} else {
this.goBackBtn.active = r.status == a.GameStatus.WAIT || r.status == a.GameStatus.DESTORY;
if (r.options.maxRound > 1 || e.round > 1) {
this.unShuffleBtn.active = !0;
this.shuffleBtn.active = !0;
this.continueBtn.active = !1;
} else {
this.unShuffleBtn.active = !1;
this.shuffleBtn.active = !1;
this.continueBtn.active = !0;
}
}
},
continueGame: function() {
i.playSfx();
if (r.status == a.GameStatus.WAIT || r.status == a.GameStatus.DESTORY) {
a.IsQuickStart = !0;
n.gameMessage(o.CS_PLAYER_LEAVE, {});
} else s.EventManager.dispatchEventWith(a.GameEventNames.PDK_CONTINUE_GAME);
this.remove();
},
selectShuffleCard: function(e, t) {
if (r.status == a.GameStatus.WAIT || r.status == a.GameStatus.DESTORY) {
a.IsQuickStart = !0;
n.gameMessage(o.CS_PLAYER_LEAVE, {});
} else s.EventManager.dispatchEventWith(a.GameEventNames.PDK_SHUFFLE_CARD, "1" == t);
this.remove();
},
backHall: function() {
if (!this.isReplay) {
a.ShowTablePop = !0;
i.showMask("正在返回大厅...请稍后");
n.gameMessage(o.CS_PLAYER_LEAVE, {});
this.remove();
}
},
onShowSummary: function() {
i.playSfx();
this.infoContent.active = !0;
this.bgMask.active = !0;
},
onShowTable: function() {
i.playSfx();
this.infoContent.active = !1;
this.bgMask.active = !1;
},
remove: function() {
this.node && this.node.destroy();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/hall/data/App": "App"
} ],
ModuleSummary09: [ function(e, t) {
"use strict";
cc._RF.push(t, "0c2b4a56rZG1L1eHEdwVv05", "ModuleSummary09");
e("../../../Main/Script/TableInfo"), e("../../../Main/NetWork/Connector");
var n = e("../../../Main/Script/Cache"), i = e("../../../Main/Script/utils"), a = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
summaryContent: cc.Node,
summaryItem: cc.Prefab,
shuffleContinueBtn: cc.Node,
continueBtn: cc.Node,
goBackBtn: cc.Node,
loseBg: cc.Node,
winBg: cc.Node,
infoContent: cc.Node,
bgMask: cc.Node,
descCut: cc.Label,
isReplay: !1
},
onLoad: function() {},
initData: function(e, t) {
var n = this;
void 0 === t && (t = !1);
this.isReplay = t;
if (t) {
this.continueBtn.active = !1;
this.shuffleContinueBtn.active = !1;
} else this.goBackBtn.active = e.status == a.GameStatus.WAIT;
if (e.winner == a.ZDCurrentGroup) {
this.winBg.active = !0;
this.loseBg.active = !1;
} else {
this.winBg.active = !1;
this.loseBg.active = !0;
}
e.players.sort(i.compare("rank"));
e.players.forEach(function(i) {
var a = cc.instantiate(n.summaryItem);
n.summaryContent.addChild(a);
a.getComponent("ModuleSummaryItem09").initData(i, e.winner, i.idx, t);
});
},
onContinueGame: function(e, t) {
n.playSfx();
i.dispatchAllEvent(this.node, a.GameEventNames.ZD_CONTINUE_GAME, {
cut: 1 == parseInt(t)
});
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onBackHall: function() {
n.playSfx();
i.dispatchAllEvent(this.node, a.GameEventNames.ZD_BACK_HALL);
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onShowSummary: function() {
n.playSfx();
this.infoContent.active = !0;
this.bgMask.active = !0;
},
onShowTable: function() {
n.playSfx();
this.infoContent.active = !1;
this.bgMask.active = !1;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils"
} ],
ModuleSummaryGroup05: [ function(e, t) {
"use strict";
cc._RF.push(t, "92ff9c+27pG45fzf0B2X0cX", "ModuleSummaryGroup05");
var n = [ "对", "胡", "坎", "跑", "碰", "顺", "提", "偎", "吃" ];
cc.Class({
extends: cc.Component,
properties: {
lblType: cc.Label,
group: cc.Node,
lblHuxi: cc.Label,
light: cc.Node
},
onLoad: function() {},
init: function(e, t, i) {
this.group = this.group.getComponent("BaseGroupZP");
cc.log(i);
i && (this.light.active = !0);
this.lblHuxi.string = e.xi;
var a = -1;
switch (e.type) {
case "dui":
a = 0;
break;

case "hu":
a = 1;
break;

case "kan":
a = 2;
1 == t && (e.card = e.cards[0]);
break;

case "pao":
a = 3;
1 == t && (e.card = e.cards[0]);
break;

case "peng":
a = 4;
1 == t && (e.card = e.cards[0]);
break;

case "shun":
a = 5;
break;

case "ti":
a = 6;
1 == t && (e.card = e.cards[0]);
break;

case "wei":
a = 7;
1 == t && (e.card = e.cards[0]);
break;

case "chi":
case "bi":
a = 8;
}
if (-1 != a) {
console.log("结算item----", n[a]);
this.lblType.string = n[a];
}
this.group.init(e, {
bg: !1,
click: !1
}, !0);
}
});
cc._RF.pop();
}, {} ],
ModuleSummaryItem07: [ function(e, t) {
"use strict";
cc._RF.push(t, "f97c6Ux3B9M+q38bnnwvsqt", "ModuleSummaryItem07");
e("Connector"), e("ROUTE");
var n = e("../../../Main/Script/TableInfo"), i = e("../../../Main/Script/utils");
cc.Class({
extends: cc.Component,
properties: {
winIcon: cc.Node,
sprCt: cc.Node,
sprDN: cc.Node,
lblName: cc.Label,
avatarSpr: e("../../../script/ui/common/Avatar"),
lblId: cc.Label,
cardCount: cc.Label,
lblNiao: cc.Label,
score: cc.Label,
totalScore: cc.Label,
winBg: cc.Node,
loseBg: cc.Node,
winDesc: cc.Node,
loseDesc: cc.Node,
boomCount: cc.Label,
boomScore: cc.Label,
winFont: cc.Font,
loseFont: cc.Font
},
initData: function(e, t, a) {
if (e.idx == n.idx) {
this.lblName.node.color = new cc.color(255, 217, 0, 255);
this.lblId.node.color = new cc.color(255, 217, 0, 255);
}
this.boomCount.string = "x" + Math.max(e.scores.bomb, 0);
this.boomScore.string = e.scores.add >= 0 ? "+" + i.formatGold(e.scores.add) : i.formatGold(e.scores.add);
try {
this.lblName.string = i.getStringByLength(n.players[e.idx].prop.name, 5);
this.avatarSpr.avatarUrl = n.players[e.idx].prop.head;
this.lblId.string = "ID:" + n.players[e.idx].prop.pid;
} catch (e) {
this.lblName.string = "玩家已离开";
this.lblId.string = "";
}
this.sprCt.active = e.hands.length == (n.config.ext ? 16 : 15);
this.cardCount.string = e.hands.length + "张";
this.score.string = "" + i.formatGold(e.scores.turn);
if (i.isNullOrEmpty(a)) this.totalScore.node.active = !1; else {
this.totalScore.node.active = !0;
var r = a.findIndex(function(t) {
return t.idx == e.idx;
});
this.totalScore.string = "" + i.formatGold(a[r].total);
if (a[r].total > 0) {
this.totalScore.font = this.winFont;
this.winDesc.active = !0;
} else {
this.totalScore.font = this.loseFont;
this.loseDesc.active = !0;
}
}
this.winIcon.active = e.idx == t;
this.lblNiao.string = e.scores.plus > 0 ? "+" + i.formatGold(e.scores.plus) : i.formatGold(e.scores.plus);
this.sprDN.active = e.bird;
this.winBg.active = t == e.idx;
this.loseBg.active = !this.winBg.active;
}
});
cc._RF.pop();
}, {
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/common/Avatar": "Avatar",
Connector: "Connector",
ROUTE: "ROUTE"
} ],
ModuleSummaryItem08: [ function(e, t) {
"use strict";
cc._RF.push(t, "c3515KJl9JMG5IMVqC5l6QH", "ModuleSummaryItem08");
e("Connector"), e("ROUTE");
var n = e("TableInfo"), i = (e("../../../Main/Script/TableInfo").turn, e("../../../Main/Script/utils"));
cc.Class({
extends: cc.Component,
properties: {
winIcon: cc.Node,
sprDN: cc.Node,
lblNiao: cc.Label,
lblName: cc.Label,
avatarSpr: e("../../../script/ui/common/Avatar"),
lblId: cc.Label,
score: cc.Label,
lblTotalHu: cc.Label,
lblHu: cc.Label,
lblBoom: cc.Label,
lblTi: cc.Label,
lblPao: cc.Label,
winBg: cc.Node,
loseBg: cc.Node,
winFont: cc.Font,
loseFont: cc.Font
},
initData: function(e) {
if (e.idx == n.idx) {
this.lblName.node.color = new cc.color(255, 217, 0, 255);
this.lblId.node.color = new cc.color(255, 217, 0, 255);
}
try {
this.lblName.string = i.getStringByLength(n.players[e.idx].prop.name, 5);
this.avatarSpr.avatarUrl = n.players[e.idx].prop.head;
this.lblId.string = "ID:" + n.players[e.idx].prop.pid;
} catch (e) {
this.lblName.string = "玩家已离开";
this.lblId.string = "";
}
this.lblTotalHu.string = "总胡息：" + e.scores.turn;
this.lblHu.string = "" + e.scores.win;
this.lblBoom.string = "" + e.scores.lose;
this.lblTi.string = "" + e.scores.ti;
this.lblPao.string = "" + e.scores.pao;
if (e.scores.total > 0) {
this.score.font = this.winFont;
this.winBg.active = !0;
this.loseBg.active = !1;
this.score.string = "+" + i.formatGold(e.scores.total);
} else {
this.score.font = this.loseFont;
this.score.string = "" + i.formatGold(e.scores.total);
this.winBg.active = !1;
this.loseBg.active = !0;
}
this.winIcon.active = !1;
this.lblNiao.string = e.scores.plus > 0 ? "+" + i.formatGold(e.scores.plus) : i.formatGold(e.scores.plus);
this.sprDN.active = e.bird;
}
});
cc._RF.pop();
}, {
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/common/Avatar": "Avatar",
Connector: "Connector",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleSummaryItem09: [ function(e, t) {
"use strict";
cc._RF.push(t, "846e1rzloxBJKzA1vmxOcIL", "ModuleSummaryItem09");
e("Connector"), e("ROUTE"), e("../../../GameBase/GameConfig").GameConfig;
var n = e("../../../Main/Script/TableInfo"), i = e("../../../Main/Script/utils");
cc.Class({
extends: cc.Component,
properties: {
lblZhua: cc.Label,
lblJifen: cc.Label,
lblXifen: cc.Label,
lblWinScore: cc.Label,
lblLoseScore: cc.Label,
lblNiao: cc.Label,
lblBet: cc.Label,
rankSpr: cc.Sprite,
avatarSpr: e("../../../script/ui/common/Avatar"),
lblName: cc.Label,
lblBetReward: cc.Label,
lblID: cc.Label,
sprQG: cc.Node,
sprBG: cc.Node,
sprBZ: cc.Node,
sprDN: cc.Node,
winBg: cc.Node,
loseBg: cc.Node,
rankSprArr: [ cc.SpriteFrame ]
},
initData: function(e, t, a, r) {
if (a == n.idx) {
this.lblName.node.color = new cc.color(255, 217, 0, 255);
this.lblID.node.color = new cc.color(255, 217, 0, 255);
}
this.winBg.active = e.group == t;
this.loseBg.active = !this.winBg.active;
this.rankSpr.spriteFrame = this.rankSprArr[e.rank];
try {
var o;
if ("CUSTOM" == (null == (o = n.options) ? void 0 : o.mode)) {
this.lblName.string = i.getStringByLength(n.players[a].prop.name, 5);
this.avatarSpr.avatarUrl = n.players[a].prop.head;
} else {
this.lblName.string = a == n.idx || r ? i.getStringByLength(n.players[a].prop.name, 5) : "玩家" + (a + 1);
this.avatarSpr.avatarUrl = a == n.idx || r ? n.players[a].prop.head : "";
}
r && (this.lblID.string = "ID:" + n.players[a].prop.pid);
} catch (e) {
this.lblName.string = "玩家已离开";
}
this.sprBZ.active = e.call;
this.lblZhua.string = "" + e.credit;
this.lblBet.string = e.bet > 0 ? "+" + e.bet : e.bet;
this.lblJifen.string = e.reward > 0 ? "+" + e.reward : e.reward;
this.lblXifen.string = e.bonus > 0 ? "+" + e.bonus : e.bonus;
if (e.turn > 0) {
this.lblWinScore.node.active = !0;
this.lblLoseScore.node.active = !1;
this.lblWinScore.string = "+" + i.formatGold(e.turn);
} else {
this.lblWinScore.node.active = !1;
this.lblLoseScore.node.active = !0;
this.lblLoseScore.string = "" + i.formatGold(e.turn);
}
switch (e.ext) {
case 0:
this.sprQG.active = !1;
this.sprBG.active = !1;
break;

case 1:
this.sprQG.active = !1;
this.sprBG.active = !0;
break;

case 2:
this.sprQG.active = !0;
this.sprBG.active = !1;
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/common/Avatar": "Avatar",
Connector: "Connector",
ROUTE: "ROUTE"
} ],
ModuleSummarySelect16: [ function(e, t) {
"use strict";
cc._RF.push(t, "c38bbVYr6BB1rXAjTGPBGML", "ModuleSummarySelect16");
cc.Class({
extends: cc.Component,
properties: {
toggle: [ cc.Toggle ]
},
start: function() {},
show: function() {
var e = cc.find("Canvas/roundSummary"), t = cc.find("Canvas/replay/roundSummary");
e && (e.active = !0);
t && (t.active = !0);
},
hide: function() {
var e = cc.find("Canvas/roundSummary"), t = cc.find("Canvas/replay/roundSummary");
e && (e.active = !1);
t && (t.active = !1);
}
});
cc._RF.pop();
}, {} ],
ModuleTableItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "fee872Rt99Ah6Icm3hSBxXs", "ModuleTableItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M, x, O = e("../../../GameBase/GameConfig"), G = H(e("../../../Main/NetWork/Connector")), R = H(e("../../../Main/Script/Cache")), k = H(e("../../../Main/Script/DataBase")), L = H(e("../../../Main/Script/utils")), B = H(e("../common/Avatar")), F = H(e("../common/CompListRenderer")), U = e("./data/App");
function H(e) {
return e && e.__esModule ? e : {
default: e
};
}
function z(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function j(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function W(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
q(e, t);
}
function q(e, t) {
return (q = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function Y(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var J = cc._decorator, V = J.ccclass, K = J.property, Z = (i = K([ B.default ]), 
a = K(cc.Node), r = K(cc.Node), o = K(cc.Node), s = K(cc.Node), c = K(cc.Node), 
l = K(cc.Sprite), u = K(cc.Sprite), d = K(cc.SpriteFrame), h = K(cc.SpriteFrame), 
f = K(cc.SpriteFrame), p = K(cc.SpriteFrame), m = K(cc.SpriteFrame), g = K(cc.Label), 
V(v = (C = function(e) {
W(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
z(t = e.call.apply(e, [ this ].concat(i)) || this, "avatar", b, j(t));
z(t, "player1", y, j(t));
z(t, "player2", S, j(t));
z(t, "player3", _, j(t));
z(t, "player4", T, j(t));
z(t, "statusNode", E, j(t));
z(t, "gameStatus", A, j(t));
z(t, "tableBg", I, j(t));
z(t, "inGame", N, j(t));
z(t, "waitting", w, j(t));
z(t, "customTable", D, j(t));
z(t, "matchTable", P, j(t));
z(t, "privateTable", M, j(t));
z(t, "tableName", x, j(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.refreshUI();
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.refreshUI = function() {
e.prototype.refreshUI.call(this);
this.data && this.initData(this.data);
};
n.openRoomPop = function(e) {
L.default.pop(O.GameConfig.pop.TableRoomPop, function(t) {
t.getComponent("TableRoomPop").refreshUI(e);
});
};
n.initData = function(e) {
var t = this, n = e.roomData, i = e.roomNameDict, a = this;
if ("create" != e.type) {
this.tableName.string = O.GameConfig.TableType[e.mode] + " " + i.get(e.roomID);
e.status == O.GameConfig.GameStatus.WAIT || e.status == O.GameConfig.GameStatus.SUMMARY ? this.gameStatus.spriteFrame = this.waitting : this.gameStatus.spriteFrame = this.inGame;
switch (e.mode) {
case "CUSTOM":
this.tableBg.spriteFrame = this.customTable;
break;

case "MATCH":
this.tableBg.spriteFrame = this.matchTable;
break;

case "PRIVATE":
this.tableBg.spriteFrame = this.privateTable;
}
this.statusNode.active = 0 != e.players.length;
this.player3.active = e.person >= 3;
this.player4.active = 4 == e.person;
e.players.forEach(function(n, i) {
L.default.isNullOrEmpty(n) || (U.App.Club.IsLeague && e.gameType == O.GameConfig.GameType.XHZD ? t.avatar[i].avatarUrl = "" : t.avatar[i].avatarUrl = n.head);
});
e.status == O.GameConfig.GameStatus.WAIT || e.status == O.GameConfig.GameStatus.SUMMARY ? this.node.on(cc.Node.EventType.TOUCH_END, function() {
L.default.isNullOrEmpty(e.matchID) ? a.enterGame(e, n) : R.default.alertTip("无法加入有奖专区的牌桌");
}, this) : "owner" != U.App.Club.CurrentClubRole && "manager" != U.App.Club.CurrentClubRole || this.node.on(cc.Node.EventType.TOUCH_END, function() {
R.default.showConfirm("是否解散房间 " + e.tableID, function() {
G.default.request(O.GameConfig.ServerEventName.DestroyTable, {
roomID: e.roomID,
gameType: e.gameType,
tableID: e.tableID,
clubID: U.App.Club.CurrentClubID
}, function() {
R.default.alertTip("解散成功");
U.App.EventManager.dispatchEventWith(O.GameConfig.GameEventNames.CLUB_ROOM_DESTROY);
}, !0, function(e) {
R.default.alertTip(e.message || "解散失败");
});
});
}, this);
} else {
this.player1.active = !1;
this.player2.active = !1;
this.player3.active = !1;
this.player4.active = !1;
this.gameStatus.node.active = !1;
this.tableName.string = O.GameConfig.GameName[e.gameType] + "开房";
this.node.on(cc.Node.EventType.TOUCH_END, function() {
a.openRoomPop(e);
}, this);
}
};
n.enterGame = function(e, t) {
var n = new Date().getTime();
if (n - O.GameConfig.LastSocketTime < 2e3) R.default.alertTip("点击过于频繁"); else {
O.GameConfig.LastSocketTime = n;
if (O.GameConfig.IsConnecting) R.default.alertTip("正在进入房间"); else {
t.gameType = e.gameType;
O.GameConfig.TableRoom = t;
if (U.App.Club.IsLeague && e.gameType == O.GameConfig.GameType.XHZD) L.default.pop(O.GameConfig.pop.MatchPop, function(t) {
t.getComponent("ModuleMatchPop").startMatch(e.roomID);
}); else {
O.GameConfig.IsConnecting = !0;
var i = L.default.isNullOrEmpty(e.tableID) ? {
roomID: e.roomID,
gameType: e.gameType,
tableID: "",
clubID: U.App.Club.CurrentClubID
} : {
roomID: e.roomID,
gameType: e.gameType,
tableID: e.tableID,
clubID: U.App.Club.CurrentClubID
};
G.default.request(O.GameConfig.ServerEventName.JoinClubGame, i, function(e) {
L.default.saveValue(O.GameConfig.StorageKey.LastRoomData, t);
O.GameConfig.IsConnecting = !1;
O.GameConfig.ShowTablePop = !0;
G.default.connect(e, function() {
O.GameConfig.CurrentGameType = e.data.gameType;
k.default.setGameType(k.default.GAME_TYPE[e.data.gameType]);
cc.director.loadScene(k.default.TABLE_TYPE[e.data.gameType]);
});
}, !0, function(e) {
O.GameConfig.IsConnecting = !1;
R.default.showTipsMsg(L.default.isNullOrEmpty(e.message) ? "进入游戏失败" : e.message);
});
}
}
}
};
n.onJoinTable = function() {};
n.onClickClose = function() {
R.default.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
n.onDestroy = function() {
this.removeEvents();
};
return t;
}(F.default), b = Y(C.prototype, "avatar", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), y = Y(C.prototype, "player1", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = Y(C.prototype, "player2", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = Y(C.prototype, "player3", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = Y(C.prototype, "player4", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = Y(C.prototype, "statusNode", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = Y(C.prototype, "gameStatus", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = Y(C.prototype, "tableBg", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), N = Y(C.prototype, "inGame", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), w = Y(C.prototype, "waitting", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), D = Y(C.prototype, "customTable", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), P = Y(C.prototype, "matchTable", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), M = Y(C.prototype, "privateTable", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), x = Y(C.prototype, "tableName", [ g ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C)) || v);
n.default = Z;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/utils": "utils",
"../common/Avatar": "Avatar",
"../common/CompListRenderer": "CompListRenderer",
"./data/App": "App"
} ],
ModuleTablePop: [ function(e, t) {
"use strict";
cc._RF.push(t, "08a3diO/FtCSqvVwlqqLloF", "ModuleTablePop");
var n = e("../../../Main/NetWork/Connector"), i = e("../../../Main/Script/Cache"), a = e("../../../Main/Script/DataBase"), r = e("../../../Main/Script/utils"), o = e("../../ui/hall/data/App").App, s = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
closeBtn: cc.Node,
walletBtn: cc.Node,
tableItem: cc.Prefab,
tableContent: cc.Node,
avatar: e("../common/Avatar"),
username: cc.Label,
lblScore: cc.Label,
userId: cc.Label,
onlyWaitIcon: cc.Node,
clubName: cc.Label,
clubID: cc.Label,
rewardNode: cc.Node,
levelContainer: cc.Node,
typeContainer: cc.Node,
quickStartBtn: cc.Node,
gameBtnItem: cc.Prefab,
roomBtnItem: cc.Prefab,
gameContent: cc.Node,
roomContent: cc.Node,
noticeBtn: cc.Node,
proxyBtn: cc.Node,
childBtn: cc.Node,
userBtn: cc.Node,
noticeNode: cc.Node,
lblNotice: cc.Label,
currentType: "",
currentRoom: "",
connecting: !1,
interval: 0
},
onLoad: function() {
this.addEvents();
this.refreshUI();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
o.EventManager.addEventListener(s.GameEventNames.GAME_TYPE_CHANGE, this.renderRoom, this);
o.EventManager.addEventListener(s.GameEventNames.ROOM_TYPE_CHANGE, this.selectRoom, this);
o.EventManager.addEventListener(s.GameEventNames.CLUB_DATA_CHANGE, this.updateUI, this);
o.EventManager.addEventListener(s.GameEventNames.CLUB_ROOM_CHANGE, this.refreshUI, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
o.EventManager.removeEventListener(s.GameEventNames.GAME_TYPE_CHANGE, this.renderRoom, this);
o.EventManager.removeEventListener(s.GameEventNames.ROOM_TYPE_CHANGE, this.selectRoom, this);
o.EventManager.removeEventListener(s.GameEventNames.CLUB_DATA_CHANGE, this.updateUI, this);
o.EventManager.removeEventListener(s.GameEventNames.CLUB_ROOM_CHANGE, this.refreshUI, this);
},
updateUI: function() {
this.lblScore.string = o.Club.ClubScore;
this.initNotice();
},
refreshUI: function() {
var e = this;
this.roomData = new Object();
this.currentRoomData = new Object();
this.connecting = !0;
n.request(s.ServerEventName.ClubInfo, {
clubID: o.Club.CurrentClubID
}, function(t) {
e.connecting = !0;
if (!r.isNullOrEmpty(t.club)) {
o.Club.ClubNotice = t.club.club.notice;
o.Club.ClubBank = t.club.bank;
o.Club.ClubScore = t.club.score;
o.Club.ClubReward = t.club.reward;
o.Club.ShuffleLevel = t.club.shuffleLevel;
o.Club.ClubLevel = t.club.level;
o.Club.CurrentClubRole = t.club.role;
e.walletBtn.active = "owner" == t.club.role;
e.rewardNode.active = "owner" == t.club.role || "proxy" == t.club.role;
e.avatar.avatarUrl = a.player.head;
e.userId.string = "ID: " + a.player.id;
e.username.string = r.getStringByLength(a.player.name);
e.lblScore.string = o.Club.ClubScore;
e.clubName.string = "" + t.club.club.name;
e.clubID.string = "ID: " + t.club.club.id;
if ("user" == t.club.role) {
e.noticeBtn.active = !1;
e.proxyBtn.active = !1;
e.childBtn.active = !1;
e.userBtn.active = !1;
} else {
e.noticeBtn.active = !0;
e.proxyBtn.active = !0;
e.childBtn.active = !0;
e.userBtn.active = !0;
}
e.initNotice();
}
r.isNullOrEmpty(t.rooms) || function() {
t.rooms.forEach(function(t) {
r.isNullOrEmpty(e.roomData[t.gameType]) && (e.roomData[t.gameType] = []);
e.roomData[t.gameType].push(t);
});
var n = {}, i = function(t) {
r.isNullOrEmpty(n[t]) && (n[t] = []);
e.roomData[t].forEach(function(e) {
n[t].push(e.id);
});
};
for (var a in e.roomData) i(a);
for (var o in n) {
var s = r.deepcopyArr(e.roomData[o])[0];
s.id = n[o];
s.name = "大厅";
e.roomData[o].unshift(s);
}
console.log("处理后的数据--add--", e.roomData);
e.renderGame();
}();
}, !0, function(t) {
i.showTipsMsg(t.message || "获取公会信息失败", function() {
e.node.destroy();
});
});
},
initNotice: function() {
var e = this;
if (!r.isNullOrEmpty(o.Club.ClubNotice)) {
this.noticeNode.active = !0;
this.lblNotice.string = o.Club.ClubNotice;
setTimeout(function() {
if (e.lblNotice) {
e.lblNotice.node.stopAllActions();
var t = e.lblNotice.node.width + e.lblNotice.node.parent.width, n = cc.place(cc.v2(e.lblNotice.node.parent.width / 2, 0)), i = cc.moveBy(t / 100, cc.v2(-t, 0)), a = cc.sequence(n, i), r = cc.repeatForever(a);
e.lblNotice.node.runAction(r);
}
}, 500);
}
},
renderGame: function() {
this.gameContent.removeAllChildren();
var e = "";
for (var t in this.roomData) {
"" == e && (e = t);
var n = cc.instantiate(this.gameBtnItem);
n.getComponent("TableGameItem").initData(t);
this.gameContent.addChild(n);
}
o.EventManager.dispatchEventWith(s.GameEventNames.GAME_TYPE_CHANGE, e);
},
renderRoom: function(e) {
var t = this, n = e.data;
this.currentType = n;
this.currentRoomData = new Object();
this.roomContent.removeAllChildren();
this.roomData[n].forEach(function(e) {
var n = cc.instantiate(t.roomBtnItem);
n.getComponent("TableRoomItem").initData(e);
t.roomContent.addChild(n);
});
o.EventManager.dispatchEventWith(s.GameEventNames.ROOM_TYPE_CHANGE, this.roomData[n][0]);
},
selectRoom: function(e) {
var t = e.data;
this.currentRoomData = t;
this.downloadTableData(t);
},
downloadTableData: function(e) {
var t = this, a = [];
"object" != typeof e.id ? a.push(e.id) : a = e.id;
this.connecting = !0;
n.request(s.ServerEventName.Tables, {
rooms: a,
clubID: o.Club.CurrentClubID
}, function(n) {
i.hideMask();
t.connecting = !1;
t.interval = 0;
if (n.success) {
"object" != typeof e.id ? t.quickStartBtn.active = !0 : t.quickStartBtn.active = !1;
var a = [];
(a = n.rooms.map(function(e) {
return e.tables.map(function(t) {
var n = JSON.parse(t);
n.roomID = e.roomID;
return n;
});
}).reduce(function(e, t) {
return e.concat(t);
})).sort(function(e, t) {
return r.sortByProps(e, t, {
status: "desc",
players: "asc"
});
});
console.log("桌子总数据----- ", JSON.stringify(a));
t.tableData = a;
o.EventManager.dispatchEventWith(s.GameEventNames.ROOM_TYPE_BTN_CHANGE, e);
t.renderTableUI(e);
}
}, null, function() {
t.connecting = !1;
t.interval = 0;
});
},
onWaitTable: function() {
i.playSfx();
if (!r.isNullOrEmpty(this.currentRoomData)) {
this.onlyWaitIcon.active = !this.onlyWaitIcon.active;
this.renderTableUI(this.currentRoomData);
}
},
renderTableUI: function(e) {
var t = this;
console.log("roomData--", e);
try {
this.tableContent.removeAllChildren();
if ("object" != typeof e.id) {
var n = cc.instantiate(this.tableItem), i = {
person: e.config.person,
players: [],
status: "WAIT",
roomID: e.id
};
n.getComponent("ModuleTableItem").initData(i, e);
this.tableContent.addChild(n);
}
this.tableData.forEach(function(n) {
if (t.onlyWaitIcon.active) {
if (n.status == s.GameStatus.WAIT || n.status == s.GameStatus.SUMMARY) {
var i = cc.instantiate(t.tableItem);
i.getComponent("ModuleTableItem").initData(n, e);
t.tableContent.addChild(i);
}
} else {
var a = cc.instantiate(t.tableItem);
a.getComponent("ModuleTableItem").initData(n, e);
t.tableContent.addChild(a);
}
});
} catch (e) {
console.log("-加桌子--报错--", e);
}
},
onQuickStart: function() {
i.playSfx();
this.enterGame();
},
enterGame: function() {
var e = this, t = new Date().getTime();
if (!(t - s.LastSocketTime < 2e3)) {
s.LastSocketTime = t;
r.pop(s.pop.MatchPop, function(t) {
t.getComponent("ModuleMatchPop").startMatch(e.currentRoomData.id);
});
}
},
refreshTableData: function() {
i.playSfx();
this.downloadTableData(this.currentRoomData);
},
openNotice: function() {
i.playSfx();
r.pop(s.pop.ClubNoticePop);
},
openClubUserList: function() {
i.playSfx();
r.pop(s.pop.ClubUserListPop);
},
openHistory: function() {
i.playSfx();
r.pop(s.pop.ClubHistoryListPop, function(e) {
e.getComponent("ClubHistoryListPop").initUserID(a.player.id);
});
},
openClubBank: function() {
i.playSfx();
r.pop(s.pop.ClubBankPop);
},
openClubReward: function() {
i.playSfx();
r.pop(s.pop.ClubRewardPop);
},
openProxyList: function() {
i.playSfx();
r.pop(s.pop.ClubProxyListPop, function(e) {
e.getComponent("ClubProxyListPop").initUserID(a.player.id);
});
},
openChildUser: function() {
i.playSfx();
r.pop(s.pop.ChildUserListPop, function(e) {
e.getComponent("ChildUserListPop").initUserID(a.player.id);
});
},
openInfoPop: function() {
i.playSfx();
r.pop(s.pop.InfoPop);
},
openWalletPop: function() {
i.playSfx();
r.pop(s.pop.ClubWalletListPop);
},
onClickClose: function() {
i.playSfx();
o.EventManager.dispatchEventWith(s.GameEventNames.JUDGE_TIPS);
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
},
update: function() {
this.interval++;
if (!r.isNullOrEmpty(this.currentRoomData) && "" != this.currentType && !this.connecting && this.interval >= 1800) {
this.interval = 0;
this.downloadTableData(this.currentRoomData);
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/utils": "utils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ModuleTableSet: [ function(e, t) {
"use strict";
cc._RF.push(t, "c5a04E0+GhFHbgjSZhO3H3u", "ModuleTableSet");
e("ROUTE"), e("../../Main/Script/DataBase"), e("TableInfo"), e("Connector");
var n = e("../../Main/Script/Cache"), i = e("../GameConfig").GameConfig, a = e("../../Main/Script/utils"), r = e("../../Main/Script/audio-ctrl");
cc.Class({
extends: cc.Component,
properties: {
musicOff: cc.Node,
musicOpen: cc.Node,
soundOpen: cc.Node,
soundOff: cc.Node,
closeBtn: cc.Node,
connectBtn: cc.Node,
togBgSelect: [ cc.Toggle ]
},
onLoad: function() {
this.addEvents();
this.setInit();
},
addEvents: function() {
this.closeBtn.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.connectBtn.on(cc.Node.EventType.TOUCH_END, this.onClickReconnect, this);
},
removeEvents: function() {
this.closeBtn.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);
this.connectBtn.off(cc.Node.EventType.TOUCH_END, this.onClickReconnect, this);
},
setInit: function() {
var e = a.getValue(i.StorageKey.MusicVolume, 1);
this.musicOff.active = 0 == e;
this.musicOpen.active = 1 == e;
var t = a.getValue(i.StorageKey.SoundVolume, 1);
this.soundOff.active = 0 == t;
this.soundOpen.active = 1 == t;
var n = a.getValue(i.StorageKey.tableBgIndex, 0);
this.togBgSelect[n].isChecked = !0;
},
selectBgImg: function(e, t) {
n.playSfx();
a.saveValue(i.StorageKey.tableBgIndex, parseInt(t));
var r = cc.find("Canvas/nodeTable/bg2");
r && (r.getComponent(cc.Sprite).spriteFrame = i.tableBgSprite[parseInt(t)]);
},
closeMusic: function() {
n.playSfx();
this.musicOff.active = !0;
this.musicOpen.active = !1;
r.getInstance().setBGMVolume(0);
a.saveValue(i.StorageKey.MusicVolume, 0);
},
openMusic: function() {
n.playSfx();
this.musicOff.active = !1;
this.musicOpen.active = !0;
r.getInstance().setBGMVolume(1);
a.saveValue(i.StorageKey.MusicVolume, 1);
},
closeSound: function() {
n.playSfx();
this.soundOff.active = !0;
this.soundOpen.active = !1;
r.getInstance().setSFXVolume(0);
a.saveValue(i.StorageKey.SoundVolume, 0);
},
openSound: function() {
n.playSfx();
this.soundOff.active = !1;
this.soundOpen.active = !0;
r.getInstance().setSFXVolume(1);
a.saveValue(i.StorageKey.SoundVolume, 1);
},
onClickReconnect: function() {
n.playSfx();
r.getInstance().stopAll();
cc.game.restart();
},
onClickClose: function() {
n.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../Main/Script/Cache": "Cache",
"../../Main/Script/DataBase": "DataBase",
"../../Main/Script/audio-ctrl": "audio-ctrl",
"../../Main/Script/utils": "utils",
"../GameConfig": "GameConfig",
Connector: "Connector",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleTingItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "0f42eMLI6FAy6LM8uO1vaU4", "ModuleTingItem");
cc.Class({
extends: cc.Component,
properties: {
spriteFrame: [ cc.SpriteFrame ],
cardCount: cc.Label
},
onLoad: function() {},
init: function(e, t, n) {
(t ? this.node.getChildByName("2").getComponent(cc.Sprite) : this.node.getComponent(cc.Sprite)).spriteFrame = this.spriteFrame[e];
this.node.value = e;
this.cardCount.string = n + "张";
}
});
cc._RF.pop();
}, {} ],
ModuleTips08: [ function(e, t) {
"use strict";
cc._RF.push(t, "83dd5G6P0xOZYwiFWqkdj/F", "ModuleTips08");
var n = t.exports;
n.sumCount = function(e) {
var t = 0;
e.forEach(function(e) {
return t += e;
});
return t;
};
n.testHu = function(e, t, i) {
var a = n.sumCount(e.cards);
if (0 != a) {
if (1 != a) {
var r = e.cards.findIndex(function(e) {
return e > 0;
});
if (t && e.cards[r] >= 2) {
e.cards[r] -= 2;
var o = "D" + (r < 10 ? 0 : 1) + r % 10 + "0";
e.temp.push(o);
n.testHu(e, !1, i);
e.temp.splice(e.temp.indexOf(o), 1);
e.cards[r] += 2;
}
if (3 == e.cards[r]) {
e.cards[r] -= 3;
var s = "P" + (r < 10 ? 0 : 1) + r % 10 + (r < 10 ? 1 : 3);
e.temp.push(s);
n.testHu(e, t, i);
e.temp.splice(e.temp.indexOf(s), 1);
e.cards[r] += 3;
}
if (e.cards[r] > 0 && e.cards[r + 1] > 0 && e.cards[r + 2] > 0 && (r < 8 || r > 9 && r < 18)) {
e.cards[r]--;
e.cards[r + 1]--;
e.cards[r + 2]--;
var c = "S" + (r < 10 ? 0 : 1) + r % 10 + (r % 10 == 0 ? r < 10 ? 3 : 6 : 0);
e.temp.push(c);
n.testHu(e, t, i);
e.temp.splice(e.temp.indexOf(c), 1);
e.cards[r]++;
e.cards[r + 1]++;
e.cards[r + 2]++;
}
if (e.cards[1] > 0 && e.cards[6] > 0 && e.cards[9] > 0) {
e.cards[1]--;
e.cards[6]--;
e.cards[9]--;
e.temp.push("H013");
n.testHu(e, t, i);
e.temp.splice(e.temp.indexOf("H013"), 1);
e.cards[1]++;
e.cards[6]++;
e.cards[9]++;
}
if (e.cards[11] > 0 && e.cards[16] > 0 && e.cards[19] > 0) {
e.cards[11]--;
e.cards[16]--;
e.cards[19]--;
e.temp.push("H116");
n.testHu(e, t, i);
e.temp.splice(e.temp.indexOf("H116"), 1);
e.cards[11]++;
e.cards[16]++;
e.cards[19]++;
}
if (e.cards[r] > 0 && r < 10 && e.cards[r + 10] > 1) {
e.cards[r]--;
e.cards[r + 10] -= 2;
e.temp.push("B0" + r + "0");
n.testHu(e, t, i);
e.temp.splice(e.temp.indexOf("B0" + r + "0"), 1);
e.cards[r]++;
e.cards[r + 10] += 2;
}
if (e.cards[r] > 1 && r < 10 && e.cards[r + 10] > 0) {
e.cards[r] -= 2;
e.cards[r + 10]--;
e.temp.push("B1" + r + "0");
n.testHu(e, t, i);
e.temp.splice(e.temp.indexOf("B1" + r + "0"), 1);
e.cards[r] += 2;
e.cards[r + 10]++;
}
}
} else {
var l = e.temp.slice().sort().join(".");
l.length > 0 && e.data.add(l);
}
};
n.canHu = function(e, t) {
var i = n.sumCount(e);
if (0 === i) return !0;
if (1 === i) return !1;
var a = e.findIndex(function(e) {
return e > 0;
});
if (!t && 2 == e[a]) {
e[a] -= 2;
if (n.canHu(e, !0)) return !0;
e[a] += 2;
}
if (!t && a <= 8 && e[a + 1] > 0) {
e[a]--;
e[a + 1]--;
if (n.canHu(e, !0)) return !0;
e[a]++;
e[a + 1]++;
}
if (!t && a < 8 && e[a + 2] > 0) {
e[a]--;
e[a + 2]--;
if (n.canHu(e, !0)) return !0;
e[a]++;
e[a + 2]++;
}
if (!t && 1 === a && e[6] > 0) {
e[1]--;
e[6]--;
if (n.canHu(e, !0)) return !0;
e[1]++;
e[6]++;
}
if (!t && 1 === a && e[9] > 0) {
e[1]--;
e[9]--;
if (n.canHu(e, !0)) return !0;
e[1]++;
e[9]++;
}
if (!t && 6 === a && e[9] > 0) {
e[6]--;
e[9]--;
if (n.canHu(e, !0)) return !0;
e[6]++;
e[9]++;
}
if (e[a] > 2) {
e[a] -= 3;
if (n.canHu(e, t)) return !0;
e[a] += 3;
}
if (e[a] > 0 && e[a + 1] > 0 && e[a + 2] > 0 && a < 8) {
e[a]--;
e[a + 1]--;
e[a + 2]--;
if (n.canHu(e, t)) return !0;
e[a]++;
e[a + 1]++;
e[a + 2]++;
}
if (e[1] > 0 && e[6] > 0 && e[9] > 0) {
e[1]--;
e[6]--;
e[9]--;
if (n.canHu(e, t)) return !0;
e[1]++;
e[6]++;
e[9]++;
}
return !1;
};
n.maxHu = function(e, t, n) {
e.forEach(function(e) {
var i = e.split("."), a = [];
i.forEach(function(e) {
var t = e[0], n = 10 * parseInt(e[1]), i = parseInt(e[2]), r = parseInt(e[3]);
switch (t) {
case "S":
a.push({
type: "shun",
xi: r,
cards: [ i + n, i + n + 1, i + n + 2 ]
});
break;

case "H":
a.push({
type: "shun",
xi: r,
cards: [ 1 + n, 6 + n, 9 + n ]
});
break;

case "D":
a.push({
type: "dui",
xi: r,
cards: [ i + n, i + n ]
});
break;

case "P":
a.push({
type: "peng",
xi: r,
cards: [ i + n, i + n, i + n ]
});
break;

case "B":
0 == n ? a.push({
type: "shun",
xi: r,
cards: [ i, i + 10, i + 10 ]
}) : a.push({
type: "shun",
xi: r,
cards: [ i, i, i + 10 ]
});
}
});
t.forEach(function(e) {
var t = {
type: e.type,
xi: e.xi
};
switch (e.type) {
case "pao":
case "ti":
t.cards = [ e.card, e.card, e.card, e.card ];
break;

case "wei":
case "kan":
case "peng":
t.cards = [ e.card, e.card, e.card ];
break;

case "chi":
case "bi":
t.cards = e.cards;
}
a.push(t);
});
var r = 0;
a.forEach(function(e) {
return r += e.xi;
});
var o = r;
20 == r ? o *= 2 : 30 == r && (o = 100);
if (o >= n.hu && 7 == a.length) {
n.xi = r;
n.hu = o;
n.cards = a;
}
});
if (0 == e.size) {
var i = [];
t.forEach(function(e) {
var t = {
type: e.type,
xi: e.xi
};
switch (e.type) {
case "pao":
case "ti":
t.cards = [ e.card, e.card, e.card, e.card ];
break;

case "wei":
case "kan":
case "peng":
t.cards = [ e.card, e.card, e.card ];
break;

case "chi":
case "bi":
t.cards = e.cards;
}
i.push(t);
});
var a = 0;
i.forEach(function(e) {
return a += e.xi;
});
var r = a;
20 == a ? r *= 2 : 30 == a && (r = 100);
if (r >= n.hu && 7 == i.length) {
n.xi = a;
n.hu = r;
n.cards = i;
}
}
};
n.countCard = function(e, t) {
var n = 0;
e.forEach(function(e) {
e.cards.forEach(function(e) {
e == t && n++;
});
});
return n;
};
n.makeHu = function(e, t, i) {
var a = e.slice();
a[i]++;
var r = t.findIndex(function(e) {
return "peng" == e.type && e.card == i;
});
if (r >= 0 && 1 == a[i]) {
t[r].type = "pao";
t[r].xi = i < 10 ? 6 : 9;
t[r].src = "DECK";
t[r].before = "peng";
a[i] = 0;
}
var o = t.findIndex(function(e) {
return "wei" == e.type && e.card == i;
});
if (o >= 0 && 1 == a[i]) {
t[o].type = "pao";
t[o].xi = i < 10 ? 6 : 9;
t[o].src = "GROUND";
t[o].before = "wei";
a[i] = 0;
}
if (4 == a[i]) {
t.push({
type: "pao",
card: i,
xi: i < 10 ? 6 : 9,
src: "PLAY",
before: "kan"
});
a[i] = 0;
}
a.forEach(function(e, n) {
if (3 == e && n != i) {
t.push({
type: "kan",
card: n,
xi: n < 10 ? 3 : 6
});
a[n] = 0;
}
});
var s = {
cards: a.slice(),
temp: [],
data: new Set()
}, c = {
xi: 0,
cards: [],
hu: 0
}, l = t.findIndex(function(e) {
return "ti" == e.type || "pao" == e.type;
}) >= 0, u = 0;
t.forEach(function(e) {
return u += e.xi;
});
n.testHu(s, l, u);
n.maxHu(s.data, t, c);
var d = t.findIndex(function(e) {
return e.card == i && "pao" == e.type;
});
if (d >= 0) {
var h = JSON.parse(JSON.stringify(t));
s = {
cards: a.slice(),
temp: [],
data: new Set()
};
var f = h[d];
switch (f.src) {
case "DECK":
f.type = "peng";
f.xi = i < 10 ? 1 : 3;
delete f.src;
s.cards[i] = 1;
break;

case "GROUND":
f.type = "wei";
f.xi = i < 10 ? 3 : 6;
delete f.src;
s.cards[i] = 1;
break;

case "PLAY":
f.type = "kan";
f.xi = i < 10 ? 3 : 6;
delete f.src;
s.cards[i] = 1;
}
l = h.findIndex(function(e) {
return "ti" == e.type || "pao" == e.type;
}) >= 0;
u += f.xi;
n.testHu(s, l, u);
n.maxHu(s.data, h, c);
}
return c.xi >= 15 && c.cards.length >= 7;
};
cc._RF.pop();
}, {} ],
ModuleTipsCard: [ function(e, t) {
"use strict";
cc._RF.push(t, "863dfqCy+lP9aosfj9X31WQ", "ModuleTipsCard");
cc.Class({
extends: cc.Component,
properties: {
cardItem: cc.Prefab
},
start: function() {},
refreshCard: function(e) {
var t = this;
this.node.destroyAllChildren();
e.forEach(function(e) {
var n = cc.instantiate(t.cardItem);
n.getComponent("ModuleCards07").init(e);
n.parent = t.node;
});
},
removeCards: function() {
this.node.destroyAllChildren();
}
});
cc._RF.pop();
}, {} ],
ModuleTipsPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "5f1cfMtvDJGBK+oDX+5LugE", "ModuleTipsPop");
cc.Class({
extends: cc.Component,
properties: {
lblWord: cc.Label
},
start: function() {},
showTips: function(e) {
var t = this;
this.lblWord.string = e;
this.node.position = cc.v2(cc.winSize.width / 2 + this.node.width / 2, cc.winSize.height / 2 - (this.lblWord.node.height + 30) / 2);
this.enterAnim();
this.lblWord.scheduleOnce(function() {
t.leaveAnim();
}, 5);
},
enterAnim: function() {
var e = cc.moveTo(.3, cc.v2(cc.winSize.width / 2 - this.node.width / 2, cc.winSize.height / 2 - (this.lblWord.node.height + 30) / 2)), t = cc.sequence(cc.delayTime(.5), e);
this.node.runAction(t);
},
leaveAnim: function() {
var e = this, t = cc.moveTo(.3, cc.v2(cc.winSize.width / 2 - this.node.width / 2, cc.winSize.height / 2 + (this.lblWord.node.height + 30) / 2)), n = cc.sequence(t, cc.callFunc(function() {
if (e.node) {
e.node.removeFromParent();
e.node.destroy();
}
}));
this.node.runAction(n);
}
});
cc._RF.pop();
}, {} ],
ModuleTips_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "e170aVgPJpOhYaeuJ7bwv3h", "ModuleTips_09");
var n = e("Logic_09"), i = e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
layerHandCards: cc.Node,
sprDisnable: cc.Node,
btnTip: cc.Button,
canvas: cc.Node
},
autoTip: function() {
this.sprDisnable.active = !1;
var e = this.canvas.getComponent("SceneTable09").hands, t = (this.layerHandCards.getComponent("ModuleCards_09").nodeCards, 
[]);
e.forEach(function(e) {
e.forEach(function(e) {
t.push(e);
});
});
var a = n.autoplay(t, i.current, this.node.tipsTime, i.config.shun);
if (null != a) if (0 != a.length) ; else {
this.sprDisnable.active = !0;
this.node.getComponent(cc.Button).interactable = !1;
}
},
tipsStart: function() {
this.sprDisnable.active = !1;
var e = this.canvas.getComponent("SceneTable09").hands, t = this.layerHandCards.getComponent("ModuleCards_09").nodeCards, a = [];
e.forEach(function(e) {
e.forEach(function(e) {
a.push(e);
});
});
cc.log("newHands", a);
cc.log("TableInfo.current", i.current);
cc.log("this.node.tipsTime,TableInfo.config.shun", this.node.tipsTime, i.config.shun);
cc.log("newHands", a);
var r = n.autoplay(a, i.current, this.node.tipsTime, i.config.shun);
cc.log("提示结果", r);
if (null != r) if (0 != r.length) {
i.tipResult = [];
i.tipResult = r;
this.node.tipsTime++;
t.forEach(function(e) {
e.forEach(function(e) {
e.getChildByName("bgCardMask").active = !1;
e._prior = !1;
e.isZhankai = !1;
e.setPosition(e.pos0);
});
});
r.forEach(function(e) {
for (var n = 0; n < t.length; n++) for (var i = 0; i < t[n].length; i++) {
var a = t[n][i], r = a.getChildByName("bgCardMask");
if (a._value == e && !r.active) {
r.active = !0;
a._prior = !0;
t[n].length > 3 && t[n].forEach(function(e) {
e.setPosition(e.pos1);
e.isZhankai = !0;
});
return;
}
}
});
this.layerHandCards.getComponent("ModuleCards_09").checkCurrent();
} else {
this.sprDisnable.active = !0;
this.node.getComponent(cc.Button).interactable = !1;
}
}
});
cc._RF.pop();
}, {
Logic_09: "Logic_09",
TableInfo: "TableInfo"
} ],
ModuleTouxiang08: [ function(e, t) {
"use strict";
cc._RF.push(t, "8c573RcAxVHyKC5O0pU0g0V", "ModuleTouxiang08");
var n = e("TableInfo"), i = e("Connector"), a = e("ROUTE"), r = e("../../../Main/Script/utils"), o = e("../../../Main/Script/Cache"), s = (e("../../../GameBase/GameConfig").GameConfig, 
{
wait: "考虑中",
allow: "同意",
refuse: "拒绝"
}), c = {
wait: "#0A5ECF",
allow: "#4ac93e",
refuse: "#d10602"
};
cc.Class({
extends: cc.Component,
properties: {
nodePlayer: [ cc.Node ],
btnAgree: cc.Node,
btnRefuse: cc.Node,
nodeVote: cc.Node,
lblTime: cc.Label,
lblTips: cc.Label
},
onLoad: function() {
var e = this;
this.lblName = [];
this.lblStatus = [];
this.sprHead = [];
this.nodePlayer.forEach(function(t) {
e.sprHead.push(t.getChildByName("sprHead").getComponent(cc.Sprite));
e.lblStatus.push(t.getChildByName("lblStatus").getComponent(cc.Label));
e.lblName.push(t.getChildByName("lblName").getComponent(cc.Label));
});
},
txInit: function(e) {
var t = this;
if ("REFUSE" != e.status && "EMPTY" != e.status) {
this.nodeVote.active = !0;
var i = this.btnRefuse.getComponent(cc.Button), a = this.btnAgree.getComponent(cc.Button);
this.lblTips.string = "等待其他玩家同意";
if (null == e.cancel) {
cc.director.getScheduler().unscheduleAllForTarget(this);
var o = Math.floor((e.clock - r.getTimeStamp()) / 1e3);
this.lblTime.string = Math.max(o, 0);
this.schedule(function() {
o--;
t.lblTime.string = Math.max(o, 0);
}, 1);
i.interactable = "wait" == e.data[n.idx];
a.interactable = "wait" == e.data[n.idx];
cc.color("#d10602"), cc.color("#4ac93e");
e.data.forEach(function(e, n) {
t.lblStatus[n].string = s[e];
t.lblStatus[n].node.color = cc.color(c[e]);
});
n.players.forEach(function(e, i) {
if (r.isNullOrEmpty(e)) t.nodePlayer[i].active = !1; else {
t.nodePlayer[i].active = !0;
t.lblName[i].node.stopAllActions();
t.lblName[i].string = r.getStringByLength(n.players[i].prop.name, 6);
if (t.lblName[i].node.width > 86) {
var a = t.lblName[i].node.width;
t.lblName[i].node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1), cc.moveTo(4, (80 - a) / 2, -2), cc.delayTime(1), cc.moveTo(4, (a - 80) / 2, -2))));
}
r.setHead(t.sprHead[i], n.players[i].prop.head);
}
});
} else {
this.nodeVote.active = !1;
cc.director.getScheduler().unscheduleAllForTarget(this);
}
} else this.nodeVote.active = !1;
},
refuse: function() {
o.playSfx();
i.gameMessage(a.CS_DISBAND, "refuse");
},
agree: function() {
o.playSfx();
i.gameMessage(a.CS_DISBAND, "allow");
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/utils": "utils",
Connector: "Connector",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleTouxiang19: [ function(e, t) {
"use strict";
cc._RF.push(t, "db57aa4309E87bAKDIctfr5", "ModuleTouxiang19");
var n = e("TableInfo"), i = e("Connector"), a = e("ROUTE"), r = e("../../../Main/Script/utils"), o = e("../../../GameBase/GameConfig").GameConfig, s = {
wait: "考虑中",
allow: "同意",
refuse: "拒绝"
}, c = {
wait: "#0A5ECF",
allow: "#4ac93e",
refuse: "#d10602"
};
cc.Class({
extends: cc.Component,
properties: {
nodePlayer: [ cc.Node ],
btnAgree: cc.Node,
btnRefuse: cc.Node,
nodeVote: cc.Node,
lblTime: cc.Label,
lblTips: cc.Label,
titleSpr: cc.Sprite,
voteSf: cc.SpriteFrame,
confirmSf: cc.SpriteFrame
},
onLoad: function() {
var e = this;
this.lblName = [];
this.lblStatus = [];
this.sprHead = [];
this.nodePlayer.forEach(function(t) {
e.sprHead.push(t.getChildByName("sprHead").getComponent(cc.Sprite));
e.lblStatus.push(t.getChildByName("lblStatus").getComponent(cc.Label));
e.lblName.push(t.getChildByName("lblName").getComponent(cc.Label));
});
},
txInit: function(e) {
var t = this;
console.log("投降----", e);
console.log("投降---TableInfo.players-", n.players);
if ("REFUSE" != e.status && "EMPTY" != e.status) {
this.titleSpr.spriteFrame = "VOTE" == e.status ? this.voteSf : this.confirmSf;
this.nodeVote.active = !0;
var i = this.btnRefuse.getComponent(cc.Button), a = this.btnAgree.getComponent(cc.Button);
this.lblTips.string = "等待其他玩家同意";
if (null == e.cancel) {
cc.director.getScheduler().unscheduleAllForTarget(this);
var l = Math.floor((e.clock - r.getTimeStamp()) / 1e3);
this.lblTime.string = Math.max(l, 0);
this.schedule(function() {
l--;
t.lblTime.string = Math.max(l, 0);
}, 1);
i.interactable = "wait" == e.data[n.idx];
a.interactable = "wait" == e.data[n.idx];
cc.color("#d10602"), cc.color("#4ac93e");
e.data.forEach(function(e, n) {
t.lblStatus[n].string = s[e];
t.lblStatus[n].node.color = cc.color(c[e]);
});
n.players.forEach(function(e, i) {
if (e) {
t.nodePlayer[i].active = !0;
t.lblName[i].node.stopAllActions();
t.lblName[i].string = r.getStringByLength(n.players[i].prop.name, 6);
r.setHead(t.sprHead[i], o.HeadUrl + n.players[i].prop.head);
}
});
} else {
this.nodeVote.active = !1;
cc.director.getScheduler().unscheduleAllForTarget(this);
}
} else this.nodeVote.active = !1;
},
refuse: function() {
i.gameMessage(a.CS_DISBAND, "refuse");
},
agree: function() {
i.gameMessage(a.CS_DISBAND, "allow");
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/utils": "utils",
Connector: "Connector",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleTouxiang_09: [ function(e, t) {
"use strict";
cc._RF.push(t, "63d89EztKdOVKtGNF/uxucP", "ModuleTouxiang_09");
var n = e("TableInfo"), i = e("Connector"), a = e("ROUTE"), r = e("../../../Main/Script/utils"), o = e("../../../GameBase/GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
nodePlayer: [ cc.Node ],
btnAgree: cc.Node,
btnRefuse: cc.Node,
nodeVote: cc.Node,
preLblTips: cc.Prefab,
lblTime: cc.Label,
lblTips: cc.Label
},
onLoad: function() {
var e = this;
this.lblName = [];
this.lblStatus = [];
this.sprHead = [];
this.nodePlayer.forEach(function(t) {
e.sprHead.push(t.getChildByName("sprHead").getComponent(cc.Sprite));
e.lblStatus.push(t.getChildByName("lblStatus").getComponent(cc.Label));
e.lblName.push(t.getChildByName("lblName").getComponent(cc.Label));
});
},
txInit: function(e) {
var t = this, i = 0;
this.nodeVote.active = !0;
var a = this.btnRefuse.getComponent(cc.Button), s = this.btnAgree.getComponent(cc.Button);
this.lblTips.string = "所有玩家同意或者倒计时" + e.voteTime + "秒以后解散";
if (null == e.cancel) {
cc.director.getScheduler().unscheduleAllForTarget(this);
var c = e.voteTime;
this.lblTime.string = c;
this.schedule(function() {
c--;
t.lblTime.string = Math.floor(Math.max(c, 0));
}, 1);
a.interactable = !e.vote[n.idx];
s.interactable = !e.vote[n.idx];
var l = cc.color("#d10602"), u = cc.color("#4ac93e");
e.vote.forEach(function(e, n) {
t.lblStatus[n].string = e ? "同意" : "考虑中";
t.lblStatus[n].node.color = e ? u : l;
});
e.vote.forEach(function(e) {
1 == e && i++;
});
4 == i && (this.nodeVote.active = !1);
n.players.forEach(function(e, i) {
t.lblName[i].node.stopAllActions();
t.lblName[i].string = e.idx != n.idx && o.IsLeague ? "玩家" + (e.idx + 1) : r.getStringByLength(n.players[i].prop.name, 6);
if (t.lblName[i].node.width > 86) {
var a = t.lblName[i].node.width;
t.lblName[i].node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1), cc.moveTo(4, (80 - a) / 2, -2), cc.delayTime(1), cc.moveTo(4, (a - 80) / 2, -2))));
}
e.idx != n.idx && o.IsLeague || r.setHead(t.sprHead[i], n.players[i].prop.head);
});
} else {
this.nodeVote.active = !1;
cc.director.getScheduler().unscheduleAllForTarget(this);
}
},
refuse: function() {
i.gameMessage(a.CS_QUICK_FINISH, {
vote: !1
});
},
agree: function() {
i.gameMessage(a.CS_QUICK_FINISH, {
vote: !0
});
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/utils": "utils",
Connector: "Connector",
ROUTE: "ROUTE",
TableInfo: "TableInfo"
} ],
ModuleWinConfirm: [ function(e, t) {
"use strict";
cc._RF.push(t, "b3546hgT9ZO7rn98h76SUr0", "ModuleWinConfirm");
var n = e("../../script/ui/hall/data/App").App, i = e("./Cache"), a = e("./utils");
cc.Class({
extends: cc.Component,
properties: {
btnConfirm: cc.Node,
btnCancel: cc.Node,
showTips: cc.Node,
lblMessage: cc.Label
},
cancel: function() {
i.playSfx();
null != this.callback2 && this.callback2();
this.node && this.node.destroy();
},
confirm: function() {
i.playSfx();
null != this.callback1 && this.callback1();
this.node && this.node.destroy();
},
saveStorageKey: function(e) {
i.playSfx();
a.saveValue(this.key, e.isChecked);
},
show: function(e, t, i, a, r, o) {
void 0 === o && (o = 500);
if (r) {
this.key = r;
this.showTips.active = !0;
}
n.unlockScene();
this.btnCancel.active = "showConfirm" == e;
this.btnConfirm.position = "showConfirm" == e ? cc.v2(-125, -98) : cc.v2(-1, -111);
this.btnCancel.position = cc.v2(124, -98);
this.lblMessage.string = "   " + t;
this.callback1 = i;
this.callback2 = a;
this.node.parent = cc.find("Canvas");
this.node.zIndex = o;
this.node.active = !0;
this.node.getChildByName("content").scale = 0;
this.node.getChildByName("content").runAction(cc.sequence(cc.scaleTo(.2, 1), cc.callFunc(function() {})));
}
});
cc._RF.pop();
}, {
"../../script/ui/hall/data/App": "App",
"./Cache": "Cache",
"./utils": "utils"
} ],
ModuleWinMask: [ function(e, t) {
"use strict";
cc._RF.push(t, "79100YwykJAS7waH8I3y165", "ModuleWinMask");
var n = e("../../script/ui/hall/data/App").App, i = e("./audio-ctrl"), a = e("./Cache");
cc.Class({
extends: cc.Component,
properties: {
lblMessage: cc.Label,
reStartBtn: cc.Node
},
onLoad: function() {},
show: function() {
var e = this;
this.showBtn && clearTimeout(this.showBtn);
this.node.active = !0;
this.showBtn = setTimeout(function() {
if (e.reStartBtn) {
n.unlockScene();
e.reStartBtn.active = !0;
}
}, 2e4);
},
hide: function() {
this.reStartBtn.active = !1;
this.node.active = !1;
this.showBtn && clearTimeout(this.showBtn);
},
restartGame: function() {
a.playSfx();
i.getInstance().stopAll();
cc.game.restart();
}
});
cc._RF.pop();
}, {
"../../script/ui/hall/data/App": "App",
"./Cache": "Cache",
"./audio-ctrl": "audio-ctrl"
} ],
ModuleWinSetting: [ function(e, t) {
"use strict";
cc._RF.push(t, "77f73siTIRPZp0dF7NvwX99", "ModuleWinSetting");
e("ROUTE");
var n = e("DataBase"), i = (e("Connector"), e("Cache"), e("./audio-ctrl"));
cc.Class({
extends: cc.Component,
properties: {
toggleCard: [ cc.Toggle ],
imgMusicProgress: cc.Sprite,
imgSoundProgress: cc.Sprite,
sliderMusic: cc.Slider,
sliderSound: cc.Slider,
imgHandleOn: cc.Node,
imgHandleOff: cc.Node,
togBroadCast: cc.Toggle,
bgContentTableSet: cc.Layout,
bgContentSoundSet: cc.Layout,
togSoundSet: cc.Toggle,
togTableSet: cc.Toggle,
bgSpriteFrame: [ cc.SpriteFrame ],
togNoMusic: cc.Toggle,
togNoSound: cc.Toggle,
togBgSelect: [ cc.Toggle ],
nodeSet: cc.Node,
toggleLanguage: cc.Toggle,
btnDissolve: cc.Node,
btnLeave: cc.Node
},
onLoad: function() {
this.setInit();
cc.log("setInit");
},
show: function() {
this.nodeSet.active = !0;
},
hide: function() {
this.nodeSet.active = !1;
},
restart: function() {
i.getInstance().stopAll();
cc.game.restart();
},
setInit: function() {
cc.find("Canvas/nodeTable") && (this.btnDissolve.active = gameInfo.status > 1);
var e = n.getFloat(n.STORAGE_KEY.SET_MUSIC, 1), t = n.getFloat(n.STORAGE_KEY.SET_SOUND, 1), i = n.getInt(n.STORAGE_KEY.SET_TABLE);
this.sliderMusic.progress = e;
this.imgMusicProgress.fillRange = this.sliderMusic.progress;
this.togNoMusic.isChecked = 0 == e;
this.sliderSound.progress = t;
this.imgSoundProgress.fillRange = this.sliderSound.progress;
this.togNoSound.isChecked = 0 == t;
-1 != i && this.togBgSelect.forEach(function(e, t) {
e.isChecked = t == i;
});
},
initCard: function() {
var e = n.getInt(n.STORAGE_KEY.GAME_CARD);
this.toggleCard.forEach(function(t, n) {
t.isChecked = n == e;
});
n.card = e;
},
setCard: function(e, t) {
n.card = parseInt(t);
n.setInt(n.STORAGE_KEY.GAME_CARD, parseInt(t));
cc.find("Canvas/nodeTable/bg2/hands").getComponent("Hands").sortHands(!0);
cc.find("Canvas/nodeTable").getComponent("MainTable").players.forEach(function(e) {
e.sortQi();
e.sortGroup();
});
},
tableMusic: function(e) {
cc.log(e);
this.imgMusicProgress.fillRange = this.sliderMusic.progress;
this.togNoMusic.isChecked = 0 == this.sliderMusic.progress;
i.getInstance().setBGMVolume(this.sliderMusic.progress);
n.setFloat(n.STORAGE_KEY.SET_MUSIC, this.sliderMusic.progress);
},
tableSound: function() {
this.imgSoundProgress.fillRange = this.sliderSound.progress;
this.togNoSound.isChecked = 0 == this.sliderSound.progress;
i.getInstance().setSFXVolume(this.sliderSound.progress);
n.setFloat(n.STORAGE_KEY.SET_SOUND, this.sliderSound.progress);
},
broadCast: function() {
this.imgHandleOn.active = this.togBroadCast.isChecked;
this.imgHandleOff.active = !this.imgHandleOn.active;
},
changeFrame: function() {
this.bgContentSoundSet.node.active = this.togSoundSet.isChecked;
this.bgContentTableSet.node.active = this.togTableSet.isChecked;
},
musicManage: function() {
var e = this.togNoMusic.isChecked ? 0 : 1;
this.sliderMusic.progress = e;
this.imgMusicProgress.fillRange = e;
i.getInstance().setBGMVolume(e);
n.setFloat(n.STORAGE_KEY.SET_MUSIC, this.sliderMusic.progress);
},
soundManage: function() {
var e = this.togNoSound.isChecked ? 0 : 1;
this.sliderSound.progress = e;
this.imgSoundProgress.fillRange = e;
i.getInstance().setSFXVolume(e);
n.setFloat(n.STORAGE_KEY.SET_SOUND, this.sliderSound.progress);
},
selectBgImg: function(e, t) {
n.setInt(n.STORAGE_KEY.SET_TABLE, t);
var i = cc.find("Canvas/nodeTable/bg2");
i ? i.getComponent(cc.Sprite).spriteFrame = this.bgSpriteFrame[parseInt(t)] : (i = cc.find("Canvas/bgTable")).getComponent(cc.Sprite).spriteFrame = this.bgSpriteFrame[parseInt(t)];
},
restartGame: function() {
i.getInstance().stopAll();
cc.game.restart();
}
});
cc._RF.pop();
}, {
"./audio-ctrl": "audio-ctrl",
Cache: "Cache",
Connector: "Connector",
DataBase: "DataBase",
ROUTE: "ROUTE"
} ],
ModuleWinTips: [ function(e, t) {
"use strict";
cc._RF.push(t, "e2773bmzWxL2rPZutKR4SGM", "ModuleWinTips");
cc.Class({
extends: cc.Component,
properties: {
word: cc.Label
},
tipsInit: function(e, t) {
this.word.string = e;
var n = this.node;
n.parent = cc.find("Canvas");
this.node.zIndex = 501;
n.width = this.word.node.width + 60;
n.height = this.word.node.height + 60;
null != t ? n.setPosition(t) : n.setPosition(0, 0);
n.setScale(0);
n.opacity = 0;
n.runAction(cc.sequence(cc.spawn(cc.scaleTo(.2, 1.2), cc.fadeIn(.2)), cc.scaleTo(.1, .9), cc.scaleTo(.1, 1), cc.delayTime(1.5), cc.spawn(cc.moveBy(.5, 0, 50), cc.fadeOut(.5)), cc.removeSelf()));
},
tipsRightBottom: function(e) {
this.word.string = e;
var t = this.node;
cc.find("Canvas").addChild(t, 501, "tipsRightBottom");
t.width = this.word.node.width + 30;
t.height = this.word.node.height + 20;
t.setPosition(cc.winSize.width / 2 - t.width / 2, -cc.winSize.height / 2 + t.height / 2);
},
hideTipsRightBottom: function(e) {
var t = this;
e && (this.word.string = e);
var n = cc.fadeOut(.5), i = cc.sequence(cc.delayTime(.5), n, cc.callFunc(function() {
if (t.node) {
t.node.removeFromParent();
t.node.destroy();
}
}));
this.node.stopAllActions();
this.node.runAction(i);
}
});
cc._RF.pop();
}, {} ],
Music: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "4581ebLB25AXqDqUmZ1NpjD", "Music");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = f(e("../../../Main/Script/audio-ctrl")), d = f(e("../../../Main/Script/Cache")), h = f(e("../../common/GameUtils"));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
function p(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function m(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function g(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
v(e, t);
}
function v(e, t) {
return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function C(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var b = cc._decorator, y = b.ccclass, S = b.property, _ = (i = S(cc.SpriteFrame), 
a = S(cc.SpriteFrame), y(r = (o = function(e) {
g(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
p(t = e.call.apply(e, [ this ].concat(i)) || this, "SprCloseMusic", s, m(t));
p(t, "SprOpenMusic", c, m(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.renderUI();
};
n.renderUI = function() {
var e = h.default.getValue(l.GameConfig.StorageKey.MusicVolume, 1);
this.node.getComponent(cc.Sprite).spriteFrame = 0 == e ? this.SprCloseMusic : this.SprOpenMusic;
this.node.on(cc.Node.EventType.TOUCH_END, this.onClickMusic, this);
};
n.onClickMusic = function() {
d.default.playSfx();
if (1 == h.default.getValue(l.GameConfig.StorageKey.MusicVolume, 1)) {
this.node.getComponent(cc.Sprite).spriteFrame = this.SprCloseMusic;
u.default.getInstance().setBGMVolume(0);
u.default.getInstance().setSFXVolume(0);
h.default.saveValue(l.GameConfig.StorageKey.SoundVolume, 0);
h.default.saveValue(l.GameConfig.StorageKey.MusicVolume, 0);
} else {
this.node.getComponent(cc.Sprite).spriteFrame = this.SprOpenMusic;
u.default.getInstance().setBGMVolume(1);
u.default.getInstance().setSFXVolume(1);
h.default.saveValue(l.GameConfig.StorageKey.SoundVolume, 1);
h.default.saveValue(l.GameConfig.StorageKey.MusicVolume, 1);
}
};
return t;
}(cc.Component), s = C(o.prototype, "SprCloseMusic", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return {
type: cc.SpriteFrame,
default: null,
displayname: "关闭音乐icon"
};
}
}), c = C(o.prototype, "SprOpenMusic", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return {
type: cc.SpriteFrame,
default: null,
displayname: "开启音乐icon"
};
}
}), o)) || r);
n.default = _;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/audio-ctrl": "audio-ctrl",
"../../common/GameUtils": "GameUtils"
} ],
NoticeManager: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "7103c0GlEBGbbByDPfzKY7z", "NoticeManager");
n.__esModule = !0;
n.NoticeManager = void 0;
var i = e("../../GameBase/GameConfig.js"), a = (e("../../script/ui/hall/data/App.js"), 
r(e("../Script/Cache.js")), r(e("../Script/utils.js")));
function r(e) {
return e && e.__esModule ? e : {
default: e
};
}
var o = function() {
e.getInstance = function() {
null == this._instance && (this._instance = new e());
return this._instance;
};
function e() {
this.showStartTips = !1;
this.tipsNode = null;
console.log("实例化");
this.showStartTips = !1;
this.removeTips();
this.startInterval();
}
var t = e.prototype;
t.startInterval = function() {
var e = this;
this.timeInterval = setInterval(function() {
var t = a.default.getTimeStamp(i.GameConfig.TaskStartTime), n = a.default.getTimeStamp(i.GameConfig.TaskEndTime), r = a.default.getTimeStamp();
if (r <= n + 18e4 && r >= n) {
e.alertNotice("今日活动结束,奖励请在0点前领取,明天记得准时参加喔");
clearInterval(e.timeInterval);
} else if (r >= t && r < n && !e.showStartTips) {
e.alertNotice("每日流水活动正在进行!");
e.showStartTips = !0;
} else {
var o = Math.floor((t - r) / 1e3);
60 == o && e.alertNotice("活动开始倒计时: 1分钟");
300 == o && e.alertNotice("活动开始倒计时: 5分钟");
600 == o && e.alertNotice("活动开始倒计时: 10分钟");
}
}, 1e3);
};
t.alertNotice = function(e) {
var t = this;
cc.loader.loadRes(i.GameConfig.pop.NoticePop, function(n, i) {
if (!n) {
var a = cc.instantiate(i);
a.parent = cc.find("Canvas");
t.tipsNode = a.getComponent("ModuleNotice");
t.tipsNode.showTips(e, t.resetTips.bind(t));
}
console.log(n);
});
};
t.resetTips = function() {
console.log("123123123123", this);
this.showStartTips = !1;
};
t.removeTips = function() {
if (this.tipsNode) {
this.tipsNode.nodeDestroy(0);
this.tipsNode = null;
}
};
return e;
}();
n.NoticeManager = o;
o._instance = null;
cc._RF.pop();
}, {
"../../GameBase/GameConfig.js": "GameConfig",
"../../script/ui/hall/data/App.js": "App",
"../Script/Cache.js": "Cache",
"../Script/utils.js": "utils"
} ],
Number: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "56f97+MA71Cc6ZdzfOJhcIP", "Number");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g = e("../../../GameBase/GameConfig"), v = (i = e("../../../Main/Script/Cache")) && i.__esModule ? i : {
default: i
};
function C(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function b(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function y(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
S(e, t);
}
function S(e, t) {
return (S = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function _(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var T = cc._decorator, E = T.ccclass, A = T.property, I = (a = A(cc.Label), r = A(cc.Node), 
o = A(cc.Node), s = A(cc.Node), c = A(cc.Label), E(l = (u = function(e) {
y(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
C(t = e.call.apply(e, [ this ].concat(i)) || this, "lblNum", d, b(t));
C(t, "ensureBtn", h, b(t));
C(t, "delbtn", f, b(t));
C(t, "floatBtn", p, b(t));
C(t, "lblTitle", m, b(t));
t._callBack = null;
t._type = null;
return t;
}
var n = t.prototype;
n.initCallback = function(e, t, n) {
void 0 === e && (e = "");
this.lblTitle.string = e;
this.lblNum.string = "";
this.ensureBtn.getComponent(cc.Button).interactable = !1;
this.delbtn.active = t == g.GameConfig.NumberType.INT;
this.floatBtn.active = t == g.GameConfig.NumberType.FLOAT;
this._callBack = n;
this._type = t;
};
n.onClickNum = function(e, t) {
v.default.playSfx();
if (!(this._type == g.GameConfig.NumberType.FLOAT && -1 != this.lblNum.string.indexOf(".") && this.lblNum.string.split(".")[1].length >= 2)) {
this.lblNum.string += t;
this.ensureBtn.getComponent(cc.Button).interactable = !0;
}
};
n.onClickFloat = function() {
v.default.playSfx();
-1 == this.lblNum.string.indexOf(".") && ("" != this.lblNum.string ? this.lblNum.string += "." : this.lblNum.string = "0.");
};
n.onClickDetele = function() {
v.default.playSfx();
if ("" != this.lblNum.string) {
this.lblNum.string = this.lblNum.string.substring(0, this.lblNum.string.length - 1);
"" == this.lblNum.string && (this.ensureBtn.getComponent(cc.Button).interactable = !1);
}
};
n.onClickReset = function() {
v.default.playSfx();
this.lblNum.string = "";
this.ensureBtn.getComponent(cc.Button).interactable = !1;
};
n.onClickEnsure = function() {
if ("" != this.lblNum.string) {
var e = this._type == g.GameConfig.NumberType.INT ? parseInt(this.lblNum.string) : parseFloat(this.lblNum.string);
this._callBack && this._callBack(e);
this.node.destroy();
}
};
n.onClickClose = function() {
v.default.playSfx();
this.node.destroy();
};
return t;
}(cc.Component), d = _(u.prototype, "lblNum", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = _(u.prototype, "ensureBtn", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = _(u.prototype, "delbtn", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = _(u.prototype, "floatBtn", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = _(u.prototype, "lblTitle", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u)) || l);
n.default = I;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache"
} ],
PACK: [ function(e, t) {
"use strict";
cc._RF.push(t, "4f82cWUFDNKEqTH3yMzUonz", "PACK");
t.exports = {
CS_CONNECT_INIT: "CS_CONNECT_INIT",
CS_JOIN_DONE: "CS_JOIN_DONE",
CS_REJOIN_DONE: "CS_REJOIN_DONE",
CS_GAME_MESSAGE: "CS_GAME_MESSAGE",
SC_ENTER_ROOM: "SC_ENTER_ROOM",
SC_GAME_DESTORY: "SC_GAME_DESTORY",
SC_GAME_VOICE: "SC_GAME_VOICE",
CS_GAME_VOICE: "CS_GAME_VOICE",
SC_GAME_MESSAGE: "SC_GAME_MESSAGE",
SC_JOIN_ERROR: "SC_JOIN_ERROR",
SC_SERVER_NOTICE: "SC_SERVER_NOTICE",
CS_PING: "CS_PING",
SC_PONG: "SC_PONG",
CS_FILL_ROBOT: "CS_FILL_ROBOT"
};
cc._RF.pop();
}, {} ],
PlayerBase: [ function(e, t) {
"use strict";
cc._RF.push(t, "08565DWwAVPZKDpJKR2YOwW", "PlayerBase");
var n = e("TableInfo"), i = e("Cache"), a = e("../Main/Script/utils");
cc.Class({
extends: cc.Component,
properties: {
imgReady: cc.Node,
imgActive: cc.Node,
sprDefaultHead: cc.SpriteFrame,
imgOffline: cc.Node,
imgZhuang: cc.Node,
imgHead: cc.Sprite,
lblName: cc.Label
},
newPlayer: function() {
this._scores = [ 0, 0, 0, 0 ];
},
playerInit: function(e, t) {
var i = this;
this._scores = [ 0, 0, 0, 0 ];
this.idx = e.idx;
this.realIdx = n.realIdx[e.idx];
a.setHead(this.imgHead, e.prop.head);
this.imgReady.active = e.ready;
1 == this.realIdx && (this.imgReady.x = -this.imgReady.x);
this.imgHost.active = 0 == e.idx && !n.config.clan;
this.imgOffline.active = e.offline;
n.players[e.idx] = e;
this.lblName.string = e.prop.name;
this.imgZhuang.active = this.idx == n.zhuang;
this.initOther(e);
e.idx == n.idx || t || this.node.on("touchend", function() {
cc.log("touchend");
i.showInfo(e);
});
},
showInfo: function() {
if (new Date().getTime() - this.lastTime < 2e3) i.alertTip("发言间隔需要2秒"); else {
var e = this.idx, t = new cc.Event.EventCustom("playerInfo", !0);
t.detail = {
idx: e
};
this.node.dispatchEvent(t);
}
},
reset: function() {
this.lblName.string = "空闲";
this.imgReady.active = !1;
this.imgHost.active = !1;
this.imgOffline.active = !1;
this.imgZhuang.active = !1;
this.imgHead.spriteFrame = this.sprDefaultHead;
},
roundReset: function() {
this.imgReady.active = !1;
this.imgActive.active = !1;
this.resetOther();
this.imgZhuang.active = n.zhuang == this.idx;
},
active: function(e) {
var t = this.imgActive;
t.active = this.idx == e;
t.stopAllActions();
t.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5), cc.fadeOut(1), cc.delayTime(.5), cc.fadeIn(1))));
},
showReady: function() {
this.imgReady.active = !0;
},
hideReady: function() {
this.imgReady.active = !1;
},
resetOther: function() {},
initOther: function() {}
});
cc._RF.pop();
}, {
"../Main/Script/utils": "utils",
Cache: "Cache",
TableInfo: "TableInfo"
} ],
PlayerMJ: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "8894f7POk9GEKapuGE3TI9K", "PlayerMJ");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M = k(e("../../script/common/GameUtils")), x = k(e("../../script/ui/common/Avatar")), O = e("../../script/ui/hall/data/App"), G = k(e("../../Main/Script/TableInfo")), R = e("../../GameBase/GameConfig");
function k(e) {
return e && e.__esModule ? e : {
default: e
};
}
function L(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function B(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function F(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
U(e, t);
}
function U(e, t) {
return (U = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function H(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var z = cc._decorator, j = z.ccclass, W = z.property, q = (i = W(cc.Label), a = W(cc.Node), 
r = W(cc.Node), o = W(cc.ProgressBar), s = W(cc.Node), c = W(cc.SpriteFrame), l = W(cc.Node), 
u = W(cc.Node), d = W(x.default), h = W(cc.Label), f = W(cc.Label), p = W(cc.Node), 
m = W(cc.Node), j(g = (v = function(e) {
F(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
L(t = e.call.apply(e, [ this ].concat(i)) || this, "lblScores", C, B(t));
L(t, "gaNode", b, B(t));
L(t, "imgReady", y, B(t));
L(t, "progressBar", S, B(t));
L(t, "imgActive", _, B(t));
L(t, "sprDefaultHead", T, B(t));
L(t, "imgOffline", E, B(t));
L(t, "imgZhuang", A, B(t));
L(t, "imgHead", I, B(t));
L(t, "betStr", N, B(t));
L(t, "lblName", w, B(t));
L(t, "autoNode", D, B(t));
L(t, "niaoNode", P, B(t));
t.totalTime = 0;
t.clockTime = 0;
return t;
}
var n = t.prototype;
n.newPlayer = function() {
this._scores = [ 0, 0, 0, 0 ];
};
n.playerInit = function(e) {
console.log("初始化玩家: " + e.idx + " ", e);
this.idx = e.idx;
this.playData = e;
this.realIdx = G.default.realIdx[e.idx];
if (M.default.isNullOrEmpty(e.prop)) this.imgOffline.active = !1; else {
this.imgHead.avatarUrl = e.prop.head;
this.imgReady.active = null != e.ready;
if (1 == this.realIdx) {
this.imgReady.x = -this.imgReady.x;
this.betStr.node.x = -82;
}
this.imgOffline.active = e.offline;
G.default.players[e.idx] = e;
this.lblName.string = M.default.getStringByLength(e.prop.name, 5);
this.imgZhuang.active = this.idx == G.default.zhuang;
this.lblScores.string = "" + M.default.formatGold(e.wallet);
this.niaoNode.active = e.ready && e.ready.plus;
}
var t = [ cc.v2(42 - cc.winSize.width / 2 + R.GameConfig.FitScreen, -133), cc.v2(cc.winSize.width / 2 - 42 - R.GameConfig.FitScreen, 100), cc.v2(329, cc.winSize.height / 2 - 64), cc.v2(42 - cc.winSize.width / 2 + R.GameConfig.FitScreen, 100) ];
2 == this.realIdx && (this.gaNode.position = cc.v2(65, 42));
this.node.position = t[this.realIdx];
};
n.showInfo = function() {
if (this.playData) {
O.App.lockScene();
var e = this.playData.idx;
M.default.pop(R.GameConfig.pop.PlayerInfo, function(t) {
O.App.unlockScene();
t.getComponent("ModulePlayerInfo").init(e);
});
}
};
n.reset = function() {
this.lblName.string = "空闲";
this.imgReady.active = !1;
this.imgOffline.active = !1;
this.imgZhuang.active = !1;
this.imgHead.spriteFrame = this.sprDefaultHead;
this.niaoNode.active = !1;
};
n.roundReset = function() {
this.imgReady.active = !1;
this.imgActive.active = !1;
this.progressBar.node.active = !1;
this.imgOffline.active = !1;
this.niaoNode.active = !1;
this.gaNode.active = !1;
this.resetOther();
this.imgZhuang.active = G.default.zhuang == this.idx;
};
n.clockAnim = function(e) {
if (this.idx == e.idx) {
this.progressBar.node.active = !0;
this.clockTime = e.clock;
this.progressBar.progress = 1;
var t = M.default.getTimeStamp(e.clock), n = M.default.getTimeStamp();
this.totalTime = t - n;
} else {
this.progressBar.node.active = !1;
this.totalTime = 0;
this.clockTime = 0;
}
};
n.activeNiao = function(e) {
if (!M.default.isNullOrEmpty(e.readyStatus)) if (e.readyStatus.plus) {
this.niaoNode.active = !0;
this.niaoNode.scale = 0;
var t = cc.fadeIn(.5), n = cc.scaleTo(.1, 3), i = cc.scaleTo(.3, .2), a = cc.scaleTo(.1, 1), r = cc.sequence(n, cc.delayTime(.3), i, a);
cc.spawn(t, r);
this.niaoNode.runAction(r);
} else this.niaoNode.active = !1;
};
n.showReady = function() {
this.imgReady.active = !0;
};
n.hideReady = function() {
this.imgReady.active = !1;
};
n.activeAutoPlay = function(e) {
this.autoNode.active = e;
};
n.resetOther = function() {};
n.offlineChange = function(e) {
M.default.isNullOrEmpty(this.playData.prop) ? this.imgOffline.active = !1 : this.imgOffline.active = e;
};
n.setScore = function(e) {
this.lblScores.string = M.default.formatGold(e);
};
n.showBet = function(e) {
this.betStr.node.active = !0;
this.betStr.string = e;
};
n.hideBet = function() {
this.betStr.node.active = !1;
};
n.showGa = function() {
this.gaNode.active = !0;
};
n.removePlayer = function() {
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
n.update = function() {
if (this.progressBar.node.active && 0 != this.clockTime && !(this.totalTime <= 0)) {
var e = M.default.getTimeStamp(this.clockTime) - M.default.getTimeStamp();
this.progressBar.progress = e <= 0 ? 1 : e / this.totalTime;
}
};
return t;
}(cc.Component), C = H(v.prototype, "lblScores", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = H(v.prototype, "gaNode", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = H(v.prototype, "imgReady", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = H(v.prototype, "progressBar", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = H(v.prototype, "imgActive", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = H(v.prototype, "sprDefaultHead", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = H(v.prototype, "imgOffline", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = H(v.prototype, "imgZhuang", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = H(v.prototype, "imgHead", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), N = H(v.prototype, "betStr", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), w = H(v.prototype, "lblName", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), D = H(v.prototype, "autoNode", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), P = H(v.prototype, "niaoNode", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v)) || g);
n.default = q;
t.exports = n.default;
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../Main/Script/TableInfo": "TableInfo",
"../../script/common/GameUtils": "GameUtils",
"../../script/ui/common/Avatar": "Avatar",
"../../script/ui/hall/data/App": "App"
} ],
PopBase: [ function(e, t) {
"use strict";
cc._RF.push(t, "e3237FFuBtI5IIq4kT0AX5A", "PopBase");
var n = e("./Cache");
cc.Class({
extends: cc.Component,
properties: {},
start: function() {},
onClickClose: function() {
n.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"./Cache": "Cache"
} ],
PopQueue: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "11e1dVl5AZMZrnmiUJ0f6Nc", "PopQueue");
n.__esModule = !0;
n.PopQueue = void 0;
e("../../../GameBase/GameConfig"), e("../../ui/hall/data/App");
var i, a = (i = e("./PopupBase")) && i.__esModule ? i : {
default: i
}, r = e("./PopupManager"), o = function() {
e.getInstance = function() {
this._instance || (this._instance = new a.default());
return this._instance;
};
function e() {
this._queue = [];
}
e.prototype.showPop = function(e, t) {
void 0 === t && (t = !1);
t ? this._queue.push(e) : r.PopupManager.show(e);
};
return e;
}();
n.PopQueue = o;
o._instance = null;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../ui/hall/data/App": "App",
"./PopupBase": "PopupBase",
"./PopupManager": "PopupManager"
} ],
PopupBase: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "1e8e6tlOdNBo5Qwv5tXAylR", "PopupBase");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u;
function d(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function h(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function f(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
p(e, t);
}
function p(e, t) {
return (p = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function m(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var g = cc._decorator, v = g.ccclass, C = g.property, b = (i = C({
type: cc.Node,
tooltip: !1
}), a = C({
type: cc.Node,
tooltip: !1
}), r = C({
type: cc.Node,
tooltip: !1
}), v(o = (s = function(e) {
f(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
d(t = e.call.apply(e, [ this ].concat(i)) || this, "background", c, h(t));
d(t, "main", l, h(t));
d(t, "btnClose", u, h(t));
t.blocker = null;
t.animTime = .3;
t.options = null;
t.finishCallback = null;
return t;
}
var n = t.prototype;
n.onShow = function() {};
n.addEvents = function() {};
n.onHide = function(e) {
void 0 === e && (e = !1);
};
n.removeEvents = function() {};
n.show = function(e, t) {
var n = this;
void 0 === e && (e = this.animTime);
return new Promise(function(i) {
console.log("---show pop--1-", n);
n.options = t || Object.create(null);
console.log("---show pop--1-", n);
n.btnClose.on(cc.Node.EventType.TOUCH_END, n.hide, n);
console.log("---show pop--2-", n);
var a = n.background, r = n.main;
console.log("---show pop--3-", n);
a.addComponent(cc.BlockInputEvents);
n.node.active = !0;
a.active = !0;
r.active = !0;
a.opacity = 0;
r.scale = .5;
r.opacity = 0;
console.log("---show pop--4-", n);
n.init(n.options);
console.log("---show pop--5-", n);
n.updateDisplay(n.options);
console.log("---show pop--6-", n);
if (0 !== e) {
cc.tween(a).to(.8 * e, {
opacity: 200
}).start();
cc.tween(r).to(e, {
scale: 1,
opacity: 255
}, {
easing: "backOut"
}).call(function() {
i();
n.addEvents && n.addEvents();
n.onShow && n.onShow();
}).start();
} else {
a.opacity = 200;
r.scale = 1;
r.opacity = 255;
i();
n.addEvents && n.addEvents();
n.onShow && n.onShow();
}
});
};
n.hide = function(e, t) {
var n = this;
void 0 === e && (e = this.animTime);
void 0 === t && (t = !1);
return new Promise(function(i) {
if (0 !== e) {
var a = n.blocker;
if (!a) {
(a = n.blocker = new cc.Node("blocker")).addComponent(cc.BlockInputEvents);
a.setParent(n.node);
a.setContentSize(n.node.getContentSize());
}
a.active = !0;
cc.tween(n.background).delay(.2 * e).to(.8 * e, {
opacity: 0
}).start();
cc.tween(n.main).to(e, {
scale: .5,
opacity: 0
}, {
easing: "backIn"
}).call(function() {
a.active = !1;
n.node.active = !1;
n.btnClose.off(cc.Node.EventType.TOUCH_END, n.hide, n);
n.removeEvents && n.removeEvents();
n.onHide && n.onHide(t);
i();
n.finishCallback && n.finishCallback(t);
}).start();
} else {
n.node.active = !1;
n.btnClose.off(cc.Node.EventType.TOUCH_END, n.hide, n);
n.removeEvents && n.removeEvents();
n.onHide && n.onHide(t);
i();
n.finishCallback && n.finishCallback(t);
}
});
};
n.onDestroy = function() {
this.removeEvents && this.removeEvents();
this.onHide && this.onHide();
this.finishCallback && this.finishCallback(!0);
};
n.init = function() {};
n.updateDisplay = function() {};
n.setFinishCallback = function(e) {
this.finishCallback = e;
};
return t;
}(cc.Component), c = m(s.prototype, "background", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = m(s.prototype, "main", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = m(s.prototype, "btnClose", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = b;
t.exports = n.default;
cc._RF.pop();
}, {} ],
PopupManager: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "3eb7bVuHNZCa7qNBHfUmgUv", "PopupManager");
n.__esModule = !0;
n.PopupManager = void 0;
var i, a = (i = e("./PopupBase")) && i.__esModule ? i : {
default: i
};
function r(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function o(e, t, n) {
t && r(e.prototype, t);
n && r(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var s = function() {
function e() {}
e.show = function(e, t, n, i, r) {
var o = this;
void 0 === t && (t = !1);
void 0 === n && (n = null);
void 0 === i && (i = 1);
void 0 === r && (r = !1);
return new Promise(function(s) {
if ((o._current || o.lockedForNext) && t) {
o.push(e, t, n, i, r);
s(3);
} else {
o._current = {
path: e,
options: n,
mode: i
};
var c = o.getNodeFromCache(e);
o.loadStartCallback && o.loadStartCallback();
o.load(e).then(function(t) {
o.loadFinishCallback && o.loadFinishCallback();
if (cc.isValid(t)) {
c = cc.instantiate(t);
o._current.node = c;
c.setParent(o.container || cc.Canvas.instance.node);
c.setSiblingIndex(cc.macro.MAX_ZINDEX);
var r = c.getComponent(a.default);
if (r) {
o._current.popup = r;
设置完成回调;
r.setFinishCallback(function() {
o.lockedForNext = o._queue.length > 0;
o.recycle(e, c, i);
o._current = null;
s(1);
new Promise(function(e) {
cc.Canvas.instance.scheduleOnce(e, o.interval);
}).then(function() {
o.next();
});
});
r.show(n);
} else {
c.active = !0;
s(4);
}
} else {
cc.warn("[PopupManager]", "弹窗加载失败", e);
o._current = null;
s(2);
}
});
}
});
};
e.hideCurrent = function() {
if (this._current.popup) this._current.popup.hide(); else if (this._current.node) {
this._current.node.destroy();
this.release(this._current.path);
this._current = null;
}
};
e.getNodeFromCache = function(e) {
if (this._nodeMap.has(e)) {
var t = this._nodeMap.get(e);
if (cc.isValid(t)) return t;
this._nodeMap.delete(e);
}
if (this._prefabMap.has(e)) {
var n = this._prefabMap.get(e);
if (cc.isValid(n)) return cc.instantiate(n);
this._prefabMap.delete(e);
}
return null;
};
e.next = function() {
if (!this._current && 0 !== this._queue.length) {
var e = this._queue.shift();
this.lockedForNext = !1;
this.show(e.path, e.options, e.mode);
}
};
e.push = function(e, t, n, i, a) {
void 0 === t && (t = !1);
void 0 === n && (n = null);
void 0 === i && (i = 2);
void 0 === a && (a = !1);
this._current || this.lockedForNext ? a ? this._queue.unshift({
path: e,
options: n,
mode: i
}) : this._queue.push({
path: e,
options: n,
mode: i
}) : this.show(e, t, n, i);
};
e.recycle = function(e, t, n) {
switch (n) {
case 1:
t.destroy();
this._nodeMap.has(e) && this._nodeMap.delete(e);
this.release(e);
break;

case 2:
t.destroy();
this._nodeMap.has(e) && this._nodeMap.delete(e);
break;

case 3:
t.removeFromParent(!1);
this._nodeMap.has(e) || this._nodeMap.set(e, t);
}
};
e.load = function(e) {
var t = this;
return new Promise(function(n) {
cc.loader.loadRes(e, function(i, a) {
if (i) {
console.log("load prefab--err--", i);
n(null);
} else {
t._prefabMap.set(e, a);
n(a);
}
});
});
};
e.release = function(e) {
var t = this._nodeMap.get(e);
if (t) {
this._nodeMap.delete(e);
cc.isValid(t) && t.destroy();
t = null;
}
var n = this._prefabMap.get(e);
if (n) {
this._prefabMap.delete(e);
n = null;
}
};
o(e, null, [ {
key: "prefabMap",
get: function() {
return this._prefabMap;
}
}, {
key: "nodeMap",
get: function() {
return this._nodeMap;
}
}, {
key: "queue",
get: function() {
return this._queue;
}
}, {
key: "current",
get: function() {
return this._current;
}
} ]);
return e;
}();
n.PopupManager = s;
s._prefabMap = new Map();
s._nodeMap = new Map();
s._queue = [];
s._current = null;
s.lockedForNext = !1;
s.container = null;
s.interval = .1;
s.loadStartCallback = null;
s.loadFinishCallback = null;
cc._RF.pop();
}, {
"./PopupBase": "PopupBase"
} ],
ProxyBuyTradeItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "116aaU+rMpKRpBjmOZOw/BP", "ProxyBuyTradeItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h;
e("../../../GameBase/GameConfig"), f(e("../../../Main/NetWork/Connector")), f(e("../../../Main/Script/Cache")), 
f(e("../../common/GameUtils"));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
function p(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function m(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function g(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
v(e, t);
}
function v(e, t) {
return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function C(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var b = cc._decorator, y = b.ccclass, S = b.property, _ = (i = S(cc.Label), a = S(cc.Label), 
r = S(cc.Node), o = S(cc.Prefab), y(s = (c = function(e) {
g(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
p(t = e.call.apply(e, [ this ].concat(i)) || this, "lblDesc", l, m(t));
p(t, "lblAmount", u, m(t));
p(t, "animNode", d, m(t));
p(t, "selectTradeType", h, m(t));
return t;
}
var n = t.prototype;
n.initData = function(e) {
var t = this;
this.startAnim();
this.lblDesc.string = e.reward / 100 + "元";
this.lblAmount.string = e.amount / 100 + "元";
this.node.on(cc.Node.EventType.TOUCH_END, function() {
var n = cc.instantiate(t.selectTradeType);
n.getComponent("SelectTradeType").initData(e);
cc.find("Canvas").addChild(n);
}, this);
};
n.startAnim = function() {
this.animNode.stopAllActions();
var e = cc.scaleTo(.8, 1.1), t = cc.scaleTo(.8, 1), n = cc.sequence(e, t), i = cc.repeatForever(n);
this.animNode.runAction(i);
};
return t;
}(cc.Component), l = C(c.prototype, "lblDesc", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = C(c.prototype, "lblAmount", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = C(c.prototype, "animNode", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = C(c.prototype, "selectTradeType", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c)) || s);
n.default = _;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils"
} ],
ProxyCreateSellPage: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "5f05ahtv7lDMr8ZA9X+7XoI", "ProxyCreateSellPage");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M = e("../../../GameBase/GameConfig"), x = R(e("../../../Main/NetWork/Connector")), O = R(e("../../../Main/Script/Cache")), G = R(e("../../common/GameUtils"));
e("../hall/data/App");
function R(e) {
return e && e.__esModule ? e : {
default: e
};
}
function k(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function L(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function B(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
F(e, t);
}
function F(e, t) {
return (F = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function U(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var H = cc._decorator, z = H.ccclass, j = H.property, W = (i = j(cc.Prefab), a = j(cc.Node), 
r = j(cc.Node), o = j(cc.Slider), s = j(cc.ProgressBar), c = j(cc.Sprite), l = j(cc.Node), 
u = j(cc.Node), d = j(cc.Label), h = j(cc.Label), f = j(cc.Label), p = j(cc.Label), 
m = j(cc.Label), z(g = (v = function(e) {
B(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
k(t = e.call.apply(e, [ this ].concat(i)) || this, "codePre", C, L(t));
k(t, "btnConfirm", b, L(t));
k(t, "btnCancel", y, L(t));
k(t, "amountSlider", S, L(t));
k(t, "amountProgress", _, L(t));
k(t, "amountFrozen", T, L(t));
k(t, "handNode", E, L(t));
k(t, "lastAmount", A, L(t));
k(t, "lblAmount", I, L(t));
k(t, "lblMax", N, L(t));
k(t, "lblMin", w, L(t));
k(t, "lblRemain", D, L(t));
k(t, "lblFrozen", P, L(t));
t.amount = 0;
t.marketData = null;
t.maxAmount = 0;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.amountSlider.node.on(cc.Node.EventType.TOUCH_CANCEL, this.onMoveEnd, this);
this.amountSlider.node.on(cc.Node.EventType.TOUCH_END, this.onMoveEnd, this);
this.handNode.on(cc.Node.EventType.TOUCH_CANCEL, this.onMoveEnd, this);
this.handNode.on(cc.Node.EventType.TOUCH_END, this.onMoveEnd, this);
this.refreshUI();
};
n.refreshUI = function() {
var e = this;
x.default.request(M.GameConfig.ServerEventName.POTCInfo, {}, function(t) {
if (t.market) {
"frozen" == t.market.status && O.default.showTipsMsg("该店铺已封禁,解封时间为" + new Date(parseInt(t.marketRight)).format("yyyy-MM-dd hh:mm:ss"));
e.marketData = t.market;
e.maxAmount = Math.min(1e6, 1e5 * Math.floor((e.marketData.frozen + M.GameConfig.ProxyData.wallet + e.marketData.remain) / 1e5));
e.lblMax.string = G.default.formatGold(e.maxAmount) + "元";
e.lblMin.string = G.default.formatGold(0) + "元";
e.lblAmount.string = "当前售卖的金额: " + G.default.formatGold(e.marketData.frozen + e.marketData.remain) + "元";
e.amount = e.marketData.frozen + e.marketData.remain;
e.lblFrozen.string = "冻结的金额：" + G.default.formatGold(e.marketData.frozen) + "元";
e.lblRemain.string = "剩余可售金额：" + G.default.formatGold(e.maxAmount - e.marketData.frozen - e.marketData.remain) + "元";
e.amountFrozen.fillRange = e.marketData.frozen / e.maxAmount;
e.amountSlider.progress = (e.marketData.frozen + e.marketData.remain) / e.maxAmount;
e.amountProgress.progress = (e.marketData.frozen + e.marketData.remain) / e.maxAmount;
if (0 != e.marketData.remain || 0 != e.marketData.frozen) {
e.lastAmount.active = !0;
e.lastAmount.position = cc.v2(-e.amountSlider.node.width / 2 + e.amountSlider.node.width * e.amountProgress.progress, 0);
} else e.lastAmount.active = !1;
}
}, !0, function(e) {
O.default.showTipsMsg(e.message || "网络连接失败,请稍后再试");
});
};
n.confirm = function() {
var e = this;
O.default.playSfx();
var t = "需要在对方付款后" + Math.floor(M.GameConfig.GameInfo.otcConfig.FAST_SELL_CONFIRM_TIMEOUT / 1e3 / 60) + "分钟内放行";
if (G.default.getValue("sellFastTips", !1)) {
null != this.callback1 && null != this.marketData && this.callback1(this.amount);
this.node && this.node.destroy();
} else O.default.showConfirm(t, function() {
null != e.callback1 && null != e.marketData && e.callback1(e.amount);
e.node && e.node.destroy();
}, function() {}, "sellFastTips");
};
n.selectAmount = function(e) {
this.amountProgress.progress = e.progress;
var t = e.progress * this.maxAmount;
t = 1e5 * Math.ceil(t / 1e5);
this.amount = t / 100;
this.lblAmount.string = "当前售卖的金额: " + G.default.formatGold(t) + "元";
this.lblRemain.string = "剩余可售金额：" + G.default.formatGold(this.maxAmount - t) + "元";
};
n.onMoveEnd = function() {
this.amountSlider.progress < this.amountFrozen.fillRange && (this.amountSlider.progress = this.amountFrozen.fillRange);
var e = this.amountSlider.progress * this.maxAmount;
e = 1e5 * Math.ceil(e / 1e5);
this.amount = e / 100;
this.lblAmount.string = "当前售卖的金额: " + G.default.formatGold(e) + "元";
this.lblRemain.string = "剩余可售金额：" + G.default.formatGold(this.maxAmount - e) + "元";
this.amountProgress.progress = this.amountSlider.progress;
};
n.onClickEnsure = function() {
O.default.playSfx();
var e = this;
x.default.request(M.GameConfig.ServerEventName.POTCMarket, {
total: 100 * e.amount,
tradeType: "fast"
}, function(t) {
O.default.alertTip("寄售成功");
e.refreshUI();
M.GameConfig.ProxyData.wallet = t.wallet;
}, !0, function(e) {
O.default.alertTip(e.message || "寄售失败");
});
};
n.onClickCancel = function() {
var e = this;
O.default.playSfx();
var t = this;
cc.instantiate(this.codePre).getComponent("MarketAccountCode").initData("请输入验证码,确保为本人操作", function(n) {
x.default.request(M.GameConfig.ServerEventName.POTCMarket, {
total: 0 + (e.marketData.frozen || 0),
tradeType: "fast",
code: n
}, function(e) {
O.default.alertTip("下架成功");
t.refreshUI();
M.GameConfig.ProxyData.wallet = e.wallet;
}, !0, function(e) {
O.default.alertTip(e.message || "下架失败");
});
}, null, "proxyMarket");
};
return t;
}(cc.Component), C = U(v.prototype, "codePre", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = U(v.prototype, "btnConfirm", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = U(v.prototype, "btnCancel", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = U(v.prototype, "amountSlider", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = U(v.prototype, "amountProgress", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = U(v.prototype, "amountFrozen", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = U(v.prototype, "handNode", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = U(v.prototype, "lastAmount", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = U(v.prototype, "lblAmount", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), N = U(v.prototype, "lblMax", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), w = U(v.prototype, "lblMin", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), D = U(v.prototype, "lblRemain", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), P = U(v.prototype, "lblFrozen", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v)) || g);
n.default = W;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../hall/data/App": "App"
} ],
ProxyCreditHistoryItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "20c32f2AQZKr7sRw9E6OFzp", "ProxyCreditHistoryItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b = e("../../../GameBase/GameConfig"), y = T(e("../../../Main/NetWork/Connector")), S = T(e("../../../Main/Script/Cache")), _ = T(e("../../../script/common/GameUtils"));
function T(e) {
return e && e.__esModule ? e : {
default: e
};
}
function E(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function A(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function I(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
N(e, t);
}
function N(e, t) {
return (N = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function w(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var D = cc._decorator, P = D.ccclass, M = D.property, x = (i = M(cc.EditBox), a = M(cc.Label), 
r = M(cc.Label), o = M(cc.Label), s = M(cc.Node), c = M(cc.Node), l = M(cc.Node), 
P(u = (d = function(e) {
I(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
E(t = e.call.apply(e, [ this ].concat(i)) || this, "creditInput", h, A(t));
E(t, "lblWallet", f, A(t));
E(t, "lblCredit", p, A(t));
E(t, "lblProxyID", m, A(t));
E(t, "btnOperate", g, A(t));
E(t, "btnConfirm", v, A(t));
E(t, "warnNode", C, A(t));
t.itemData = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {};
n.renderUI = function(e) {
this.itemData = e;
this.btnOperate.active = !0;
this.btnConfirm.active = !1;
this.creditInput.node.active = !1;
this.lblCredit.string = "" + _.default.formatGold(e.credit);
this.creditInput.string = "" + parseInt(e.credit / 100);
this.lblWallet.string = "number" == typeof e.score ? "" + _.default.formatGold(e.score) : "" + e.score;
this.lblProxyID.string = "" + e.id;
e.warn && this.startWarnningAnim();
};
n.onClickOperate = function() {
S.default.playSfx();
this.btnOperate.active = !1;
this.btnConfirm.active = !0;
this.creditInput.node.active = !0;
};
n.onClickConfirm = function() {
var e = this;
S.default.playSfx();
if (_.default.isNullOrEmpty(this.creditInput.string)) S.default.alertTip("请输入额度"); else if (/^[0-9]*[0-9]*$/.test(this.creditInput.string)) {
var t = parseInt(this.creditInput.string);
y.default.request(b.GameConfig.ServerEventName.ProxyCreditUpdate, {
credit: 100 * t,
id: this.itemData.id
}, function() {
e.itemData.credit = 100 * t;
S.default.alertTip("提交成功");
e.renderUI(e.itemData);
}, !0, function(e) {
S.default.alertTip(e.message || "提交失败");
});
} else S.default.alertTip("请输入整数金额");
};
n.startWarnningAnim = function() {
var e = this;
this.warnNode.stopAllActions();
this.warnNode.active = !0;
var t = cc.scaleTo(.5, 1.3), n = cc.callFunc(function() {
e.warnNode.scale = .8;
e.warnNode.opacity = 255;
}), i = cc.fadeOut(.5), a = cc.spawn(t, i), r = cc.sequence(a, cc.delayTime(.5), n), o = cc.repeatForever(r);
this.warnNode.runAction(o);
};
return t;
}(cc.Component), h = w(d.prototype, "creditInput", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = w(d.prototype, "lblWallet", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = w(d.prototype, "lblCredit", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = w(d.prototype, "lblProxyID", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = w(d.prototype, "btnOperate", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = w(d.prototype, "btnConfirm", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = w(d.prototype, "warnNode", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d)) || u);
n.default = x;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../script/common/GameUtils": "GameUtils"
} ],
ProxyCreditHistory: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "80b4beiaw1OSqEsHKZ7fu49", "ProxyCreditHistory");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v = e("../../../GameBase/GameConfig"), C = y(e("../../../Main/NetWork/Connector")), b = y(e("../../../script/common/GameUtils"));
function y(e) {
return e && e.__esModule ? e : {
default: e
};
}
function S(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function _(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function T(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
E(e, t);
}
function E(e, t) {
return (E = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function A(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var I = cc._decorator, N = I.ccclass, w = I.property, D = (i = w(cc.Node), a = w(cc.Node), 
r = w(cc.Prefab), o = w(cc.Label), s = w(cc.Label), c = w(cc.Label), N(l = (u = function(e) {
T(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
S(t = e.call.apply(e, [ this ].concat(i)) || this, "warnNode", d, _(t));
S(t, "historyContent", h, _(t));
S(t, "historyItem", f, _(t));
S(t, "lblUserWallet", p, _(t));
S(t, "lblProxyWallet", m, _(t));
S(t, "lblCredit", g, _(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.downloadData();
};
n.downloadData = function() {
var e = this;
C.default.request(v.GameConfig.ServerEventName.ProxyCredit, {}, function(t) {
e.renderUI(t);
});
};
n.renderUI = function(e) {
var t = this;
if (!b.default.isNullOrEmpty(e.summary)) {
this.lblCredit.string = b.default.formatGold(e.summary.score) + "/" + b.default.formatGold(v.GameConfig.ProxyData.credit);
this.lblProxyWallet.string = "" + b.default.formatGold(e.summary.subScore);
this.lblUserWallet.string = "" + b.default.formatGold(e.summary.userScore);
}
this.historyContent.removeAllChildren();
b.default.isNullOrEmpty(e.proxies) || e.proxies.forEach(function(e) {
var n = cc.instantiate(t.historyItem);
n.getComponent("ProxyCreditHistoryItem").renderUI(e);
t.historyContent.addChild(n);
});
e.warn && this.startWarnningAnim();
};
n.startWarnningAnim = function() {
var e = this;
this.warnNode.stopAllActions();
this.warnNode.active = !0;
var t = cc.scaleTo(.5, 1.3), n = cc.callFunc(function() {
e.warnNode.scale = .8;
e.warnNode.opacity = 255;
}), i = cc.fadeOut(.5), a = cc.spawn(t, i), r = cc.sequence(a, cc.delayTime(.5), n), o = cc.repeatForever(r);
this.warnNode.runAction(o);
};
return t;
}(cc.Component), d = A(u.prototype, "warnNode", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = A(u.prototype, "historyContent", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = A(u.prototype, "historyItem", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = A(u.prototype, "lblUserWallet", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = A(u.prototype, "lblProxyWallet", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = A(u.prototype, "lblCredit", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u)) || l);
n.default = D;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../script/common/GameUtils": "GameUtils"
} ],
ProxyCreditPage: [ function(e, t) {
"use strict";
cc._RF.push(t, "f4de5/SVuVFAoT8+ETml10D", "ProxyCreditPage");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("../../NetWork/Connector"), a = e("../../Script/Cache"), r = e("../../Script/utils");
cc.Class({
extends: e("../../Script/PopBase"),
properties: {
lblScoreId: cc.EditBox,
lblScore: cc.EditBox
},
addCredit: function() {
var e = this;
a.playSfx();
r.isNullOrEmpty(this.lblScoreId.string) ? a.alertTip("请输入代理id") : /^[0-9]*[1-9][0-9]*$/.test(this.lblScore.string) ? a.showConfirm("确认充值金额：" + this.lblScore.string, function() {
i.request(n.ServerEventName.AdminSetCredit, {
proxyID: parseInt(e.lblScoreId.string),
credit: 100 * parseFloat(e.lblScore.string)
}, function() {
a.alertTip("上分成功");
});
}) : a.alertTip("请输入整数金额");
},
reduceCredit: function() {
var e = this;
a.playSfx();
r.isNullOrEmpty(this.lblScoreId.string) ? a.alertTip("请输入代理id") : /^[0-9]*[1-9][0-9]*$/.test(this.lblScore.string) ? a.showConfirm("确认下分金额：" + this.lblScore.string, function() {
i.request(n.ServerEventName.AdminSetCredit, {
proxyID: parseInt(e.lblScoreId.string),
credit: 100 * parseFloat("-" + e.lblScore.string)
}, function() {
a.alertTip("下分成功");
});
}) : a.alertTip("请输入整数金额");
},
searchCredit: function() {
i.request(n.ServerEventName.AdminGetCredit, {
proxyID: parseInt(this.lblScoreId.string)
}, function() {});
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../NetWork/Connector": "Connector",
"../../Script/Cache": "Cache",
"../../Script/PopBase": "PopBase",
"../../Script/utils": "utils"
} ],
ProxyData: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "46b72MjLsFIpZ6VniCULYEt", "ProxyData");
n.__esModule = !0;
n.ProxyDetailData = n.ProxyData = void 0;
function i(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function a(e, t, n) {
t && i(e.prototype, t);
n && i(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var r = function() {
function e(e) {
void 0 === e && (e = {});
this._id = e.id || 0;
this._name = e.name || "暂无";
this._inviter = e.inviter || "QWERTY";
this._league = e.league || "public";
this._wallet = e.wallet || 0;
this._phone = e.phone || "暂无";
this._role = e.role || "normal";
this._rewardWin = e.rewardWin || 0;
this._parent = e.parent || "暂无";
this._shuffle = e.shuffle || 0;
this._credit = e.credit || 0;
}
a(e, [ {
key: "id",
get: function() {
return this._id;
}
}, {
key: "name",
get: function() {
return this._name;
}
}, {
key: "inviter",
get: function() {
return this._inviter;
}
}, {
key: "league",
get: function() {
return this._league;
}
}, {
key: "wallet",
get: function() {
return this._wallet;
}
}, {
key: "phone",
get: function() {
return this._phone;
}
}, {
key: "role",
get: function() {
return this._role;
}
}, {
key: "rewardWin",
get: function() {
return this._rewardWin;
}
}, {
key: "parent",
get: function() {
return this._parent;
}
}, {
key: "shuffle",
get: function() {
return this._shuffle;
}
}, {
key: "credit",
get: function() {
return this._credit;
}
} ]);
return e;
}();
n.ProxyData = r;
var o = function() {
function e(e) {
void 0 === e && (e = {});
this._count = e.count || 0;
this._userCount = e.userCount || 0;
this._proxyCount = e.proxyCount || 0;
this._wallet = e.wallet || 0;
this._userWallet = e.userWallet || 0;
this._proxyWallet = e.proxyWallet || 0;
}
a(e, [ {
key: "count",
get: function() {
return this._count;
}
}, {
key: "userCount",
get: function() {
return this._userCount;
}
}, {
key: "proxyCount",
get: function() {
return this._proxyCount;
}
}, {
key: "wallet",
get: function() {
return this._wallet;
}
}, {
key: "userWallet",
get: function() {
return this._userWallet;
}
}, {
key: "proxyWallet",
get: function() {
return this._proxyWallet;
}
} ]);
return e;
}();
n.ProxyDetailData = o;
cc._RF.pop();
}, {} ],
ProxyInviteUser: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "f222bH7NcNLELH11DTQHGvu", "ProxyInviteUser");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M = e("../../../GameBase/GameConfig"), x = L(e("../../../Main/NetWork/Connector")), O = L(e("../../../Main/Script/Cache")), G = e("../../ui/hall/data/App"), R = L(e("../../common/GameUtils")), k = L(e("../common/Avatar"));
function L(e) {
return e && e.__esModule ? e : {
default: e
};
}
function B(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function F(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function U(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
H(e, t);
}
function H(e, t) {
return (H = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function z(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var j = cc._decorator, W = j.ccclass, q = j.property, Y = (i = q(cc.Node), a = q(cc.Label), 
r = q(cc.Label), o = q(cc.Label), s = q(cc.Node), c = q(cc.Label), l = q(cc.Label), 
u = q(cc.Node), d = q(cc.Label), h = q(cc.Label), f = q(k.default), p = q(cc.Node), 
m = q(cc.Node), W(g = (v = function(e) {
U(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
B(t = e.call.apply(e, [ this ].concat(i)) || this, "inputNode", C, F(t));
B(t, "idInput", b, F(t));
B(t, "levelInput", y, F(t));
B(t, "shuffleInput", S, F(t));
B(t, "proxyNode", _, F(t));
B(t, "ensureDesc", T, F(t));
B(t, "lblTitle", E, F(t));
B(t, "userNode", A, F(t));
B(t, "lblId", I, F(t));
B(t, "lblName", N, F(t));
B(t, "avatarSpr", w, F(t));
B(t, "shuffleTips", D, F(t));
B(t, "shuffleBox", P, F(t));
t.popType = "user";
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.initUI();
};
n.initType = function(e) {
this.popType = e;
this.proxyNode.active = "user" != e;
this.ensureDesc.string = "user" != e ? "添加合伙人" : "确认邀请";
this.lblTitle.string = "user" != e ? "添加合伙人" : "邀请玩家";
if (0 == G.App.Club.ShuffleLevel) {
this.shuffleInput.node.active = !1;
this.shuffleBox.active = !1;
this.shuffleTips.active = !1;
this.shuffleInput.string = "0";
}
};
n.onConfirm = function() {
var e = this;
O.default.playSfx();
"" != this.idInput.string ? x.default.request(M.GameConfig.ServerEventName.SearchUserInfo, {
userID: parseInt(this.idInput.string)
}, function(t) {
if (R.default.isNullOrEmpty(t.user)) O.default.alertTip("未找到该玩家"); else {
e.inputNode.active = !1;
e.userNode.active = !0;
e.lblId.string = "玩家ID: " + t.user.id;
e.lblName.string = "昵称: " + R.default.getStringByLength(t.user.name, 6);
e.avatarSpr.avatarUrl = t.user.head;
}
}) : O.default.alertTip("请输入玩家id");
};
n.ensureConfirm = function() {
var e = this;
O.default.playSfx();
"user" != this.popType ? "" != this.levelInput.string ? "" != this.shuffleInput.string ? x.default.request(M.GameConfig.ServerEventName.AddProxy, {
userID: parseInt(this.idInput.string),
clubID: G.App.Club.CurrentClubID,
level: parseInt(this.levelInput.string),
shuffleLevel: parseInt(this.shuffleInput.string)
}, function() {
G.App.EventManager.dispatchEventWith(M.GameConfig.GameEventNames.ADD_PROXY);
O.default.alertTip("添加成功");
e.initUI();
}) : O.default.alertTip("请输入合伙人洗牌s") : O.default.alertTip("请输入合伙人等级") : x.default.request(M.GameConfig.ServerEventName.Invite, {
userID: parseInt(this.idInput.string),
clubID: G.App.Club.CurrentClubID
}, function() {
G.App.EventManager.dispatchEventWith(M.GameConfig.GameEventNames.ADD_USER);
O.default.alertTip("邀请成功");
e.initUI();
});
};
n.onClickInput = function() {
var e = this;
O.default.playSfx();
O.default.showNumer("请输入玩家ID", M.GameConfig.NumberType.INT, function(t) {
e.idInput.string = "" + t;
});
};
n.onClickLevel = function() {
var e = this;
O.default.playSfx();
O.default.showNumer("请输入合伙人等级", M.GameConfig.NumberType.INT, function(t) {
e.levelInput.string = "" + t;
});
};
n.onClickShuffle = function() {
var e = this;
O.default.playSfx();
O.default.showNumer("请输入合伙人洗牌", M.GameConfig.NumberType.INT, function(t) {
e.shuffleInput.string = "" + t;
});
};
n.cancelConfirm = function() {
O.default.playSfx();
this.inputNode.active = !0;
this.userNode.active = !1;
};
n.initUI = function() {
this.idInput.string = "";
this.inputNode.active = !0;
this.userNode.active = !1;
};
n.onClickClose = function() {
O.default.playSfx();
this.node.destroy();
};
return t;
}(cc.Component), C = z(v.prototype, "inputNode", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = z(v.prototype, "idInput", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = z(v.prototype, "levelInput", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = z(v.prototype, "shuffleInput", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = z(v.prototype, "proxyNode", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = z(v.prototype, "ensureDesc", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = z(v.prototype, "lblTitle", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = z(v.prototype, "userNode", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = z(v.prototype, "lblId", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), N = z(v.prototype, "lblName", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), w = z(v.prototype, "avatarSpr", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), D = z(v.prototype, "shuffleTips", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), P = z(v.prototype, "shuffleBox", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v)) || g);
n.default = Y;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ProxyLevelPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "82a9eNngLpDKa8suxf7xbG6", "ProxyLevelPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = f(e("../../../Main/NetWork/Connector")), d = f(e("../../../Main/Script/Cache")), h = (f(e("../../../Main/Script/DataBase")), 
e("../../ui/hall/data/App"));
f(e("../../common/GameUtils")), f(e("../common/Avatar"));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
function p(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function m(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function g(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
v(e, t);
}
function v(e, t) {
return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function C(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var b = cc._decorator, y = b.ccclass, S = b.property, _ = (i = S(cc.Label), a = S(cc.Label), 
y(r = (o = function(e) {
g(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
p(t = e.call.apply(e, [ this ].concat(i)) || this, "lblLevel", s, m(t));
p(t, "lblShuffle", c, m(t));
t.proxyData = null;
return t;
}
var n = t.prototype;
n.initData = function(e) {
this.proxyData = e;
this.lblLevel.string = "" + e.level;
this.lblShuffle.string = "" + e.shuffleLevel;
};
n.onChangeShuffle = function() {
var e = this;
d.default.playSfx();
d.default.showNumer("修改洗牌", l.GameConfig.NumberType.INT, function(t) {
e.lblShuffle.string = "" + t;
});
};
n.onChangeLevel = function() {
var e = this;
d.default.playSfx();
d.default.showNumer("修改等级", l.GameConfig.NumberType.INT, function(t) {
e.lblLevel.string = "" + t;
});
};
n.changeLevel = function() {
var e = this;
d.default.playSfx();
u.default.request(l.GameConfig.ServerEventName.UpdateLevel, {
shuffleLevel: parseInt(this.lblShuffle.string),
level: parseInt(this.lblLevel.string),
userID: this.proxyData.userID,
clubID: h.App.Club.CurrentClubID,
whole: !1
}, function() {
d.default.alertTip("操作成功");
h.App.EventManager.dispatchEventWith(l.GameConfig.GameEventNames.PROXY_LEVEL_UPDATE);
e.node.destroy();
});
};
n.onClickClose = function() {
d.default.playSfx();
this.node.destroy();
};
return t;
}(cc.Component), s = C(o.prototype, "lblLevel", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c = C(o.prototype, "lblShuffle", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), o)) || r);
n.default = _;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
ProxyMarketPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "051cdPcT9FPPrfiE6C9juWS", "ProxyMarketPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A = e("../../../GameBase/GameConfig"), I = (w(e("../../../Main/NetWork/Connector")), 
w(e("../../../Main/Script/Cache"))), N = w(e("../../common/GameUtils"));
e("../hall/data/App");
function w(e) {
return e && e.__esModule ? e : {
default: e
};
}
function D(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function P(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function M(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
x(e, t);
}
function x(e, t) {
return (x = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function O(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var G = cc._decorator, R = G.ccclass, k = G.property, L = (i = k(cc.Prefab), a = k(cc.Prefab), 
r = k(cc.Prefab), o = k(cc.Prefab), s = k(cc.Node), c = k(cc.Node), l = k(cc.Node), 
u = k(cc.Node), d = k(cc.Toggle), h = k(cc.Node), R(f = (p = function(e) {
M(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
D(t = e.call.apply(e, [ this ].concat(i)) || this, "marketAccountInfo", m, P(t));
D(t, "rewardTradeItem", g, P(t));
D(t, "createTradePage", v, P(t));
D(t, "buyTradeList", C, P(t));
D(t, "rewardContent", b, P(t));
D(t, "buyListContent", y, P(t));
D(t, "layerContent", S, P(t));
D(t, "buyListScroll", _, P(t));
D(t, "btnBuy", T, P(t));
D(t, "updateBtn", E, P(t));
t.codeCoolDown = !0;
return t;
}
var n = t.prototype;
n.start = function() {
this.showBuyPage();
};
n.showBuyPage = function() {
var e = this;
this.layerTopActive(!0);
this.removeContentChildren();
A.GameConfig.ProxyMarketConfig.forEach(function(t) {
var n = cc.instantiate(e.rewardTradeItem);
n.getComponent("ProxyBuyTradeItem").initData(t);
e.rewardContent.addChild(n);
});
};
n.openAccountInfo = function() {
I.default.playSfx();
var e = cc.instantiate(this.marketAccountInfo);
e.getComponent("ModuleMarketAccount").renderData("proxy");
cc.find("Canvas").addChild(e);
};
n.showSellPage = function() {
var e = this;
I.default.playSfx();
if (N.default.isNullOrEmpty(A.GameConfig.ProxyData.alipay) && N.default.isNullOrEmpty(A.GameConfig.ProxyData.bank)) {
this.btnBuy.check();
I.default.showConfirm("至少填写一种收款信息", function() {
var t = cc.instantiate(e.marketAccountInfo);
t.getComponent("ModuleMarketAccount").renderData("proxy");
cc.find("Canvas").addChild(t);
});
} else {
this.layerTopActive(!1);
this.removeContentChildren();
var t = cc.instantiate(this.createTradePage);
this.layerContent.addChild(t);
}
};
n.layerTopActive = function(e) {
this.buyListScroll.active = e;
this.updateBtn.active = e;
};
n.removeContentChildren = function() {
this.buyListContent.removeAllChildren();
this.layerContent.removeAllChildren();
this.rewardContent.removeAllChildren();
};
n.showBuyList = function() {
I.default.playSfx();
this.layerTopActive(!1);
this.removeContentChildren();
var e = cc.instantiate(this.buyTradeList);
e.getComponent("TradeList").downloadList(!0, "proxy");
this.layerContent.addChild(e);
};
n.showSellList = function() {
I.default.playSfx();
this.layerTopActive(!1);
this.removeContentChildren();
var e = cc.instantiate(this.buyTradeList);
e.getComponent("TradeList").downloadList(!1, "proxy");
this.layerContent.addChild(e);
};
n.onClickClose = function() {
I.default.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
return t;
}(cc.Component), m = O(p.prototype, "marketAccountInfo", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = O(p.prototype, "rewardTradeItem", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = O(p.prototype, "createTradePage", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = O(p.prototype, "buyTradeList", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = O(p.prototype, "rewardContent", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = O(p.prototype, "buyListContent", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = O(p.prototype, "layerContent", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = O(p.prototype, "buyListScroll", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = O(p.prototype, "btnBuy", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = O(p.prototype, "updateBtn", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p)) || f);
n.default = L;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../hall/data/App": "App"
} ],
ProxyProfitDetail: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "69bcavkQl9Noo11rqzHKH57", "ProxyProfitDetail");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S = e("../../../GameBase/GameConfig"), _ = A(e("../../../Main/NetWork/Connector")), T = A(e("../../../Main/Script/Cache")), E = A(e("../../../script/common/GameUtils"));
function A(e) {
return e && e.__esModule ? e : {
default: e
};
}
function I(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function N(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function w(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
D(e, t);
}
function D(e, t) {
return (D = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function P(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var M = {
ALL: "ALL",
PDK: "PDK_SOLO",
LDZP: "LDZP_SOLO",
XHZD: "XHZD",
HZMJ: "HZMJ_SOLO"
}, x = cc._decorator, O = x.ccclass, G = x.property, R = (i = G(cc.Label), a = G(cc.Label), 
r = G(cc.Node), o = G(cc.Prefab), s = G(cc.Prefab), c = G(cc.Node), l = G(cc.Label), 
u = G(cc.Node), O(d = (h = function(e) {
w(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
I(t = e.call.apply(e, [ this ].concat(i)) || this, "lblEndDate", f, N(t));
I(t, "lblStartDate", p, N(t));
I(t, "itemContent", m, N(t));
I(t, "detailItem", g, N(t));
I(t, "selectDate", v, N(t));
I(t, "pageContainer", C, N(t));
I(t, "lblPage", b, N(t));
I(t, "noData", y, N(t));
t.userId = 0;
t.gameType = M.ALL;
t.startDate = null;
t.endDate = null;
t.page = 1;
t.totalPage = 0;
t.renderData = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.renderData = {
page: [],
rows: {}
};
this.gameType = M.ALL;
var e = new Date(), t = e.getFullYear(), n = e.getMonth() + 1 >= 10 ? e.getMonth() + 1 : "0" + (e.getMonth() + 1), i = e.getDate() >= 10 ? e.getDate() : "0" + e.getDate();
this.startDate = "" + t + n + i;
this.endDate = "" + t + n + i;
this.lblEndDate.string = "截止日期: " + t + "年" + n + "月" + i + "日";
this.lblStartDate.string = "起始日期: " + t + "年" + n + "月" + i + "日";
this.downloadData(1);
};
n.downloadData = function(e) {
var t = this;
this.noData.active = !1;
if (-1 == this.renderData.page.indexOf(e)) {
var n = "ALL" == this.gameType ? {
startDate: this.startDate,
endDate: this.endDate,
page: e,
limit: 8
} : {
startDate: this.startDate,
endDate: this.endDate,
gameType: this.gameType,
page: e,
limit: 8
};
_.default.request(S.GameConfig.ServerEventName.ProxyProfitDetail, n, function(e) {
t.itemContent.removeAllChildren();
if (e.result && !E.default.isNullOrEmpty(e.result.rows)) {
t.renderData.page.push(e.result.page);
t.renderData.rows["" + e.result.page] = e.result.rows;
t.pageContainer.active = !0;
t.page = e.result.page;
t.totalPage = Math.ceil(e.result.count / 8);
t.lblPage.string = e.result.page + "/" + Math.ceil(e.result.count / 8);
e.result.rows.forEach(function(e) {
var n = cc.instantiate(t.detailItem);
n.getChildByName("content").getChildByName("id").getComponent(cc.Label).string = e.userID;
n.getChildByName("content").getChildByName("amount").getComponent(cc.Label).string = e.count;
n.getChildByName("content").getChildByName("reward").getComponent(cc.Label).string = (parseInt(e.fee) / 100).toFixed(2);
n.getChildByName("content").getChildByName("name").getComponent(cc.Label).string = E.default.getStringByLength(e.name, 5);
t.itemContent.addChild(n);
});
} else {
t.noData.active = !0;
t.pageContainer.active = !1;
}
}, !0);
} else {
this.page = e;
this.itemContent.removeAllChildren();
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.detailItem);
n.getChildByName("content").getChildByName("id").getComponent(cc.Label).string = e.userID;
n.getChildByName("content").getChildByName("amount").getComponent(cc.Label).string = e.count;
n.getChildByName("content").getChildByName("reward").getComponent(cc.Label).string = (parseInt(e.fee) / 100).toFixed(2);
n.getChildByName("content").getChildByName("name").getComponent(cc.Label).string = E.default.getStringByLength(e.name, 5);
t.itemContent.addChild(n);
});
}
};
n.selectGameType = function(e, t) {
this.gameType = t;
this.renderData = {
page: [],
rows: {}
};
this.downloadData(1);
};
n.addPage = function() {
T.default.playSfx();
if (this.page >= this.totalPage) T.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
this.downloadData(e);
}
};
n.reducePage = function() {
T.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
this.downloadData(e);
} else T.default.alertTip("已经是第一页");
};
n.openSelectDate = function(e, t) {
var n = this, i = cc.instantiate(this.selectDate);
this.node.addChild(i);
var a = i.getComponent("UIDatePicker");
a.setDate(new Date().getFullYear(), new Date().getMonth(), new Date().getDate());
a.setPickDateCallback(function(e, i, a) {
i = i + 1 > 9 ? i + 1 : "0" + (i + 1);
a = a > 9 ? a : "0" + a;
if (1 == t) {
n.startDate = "" + e + i + a;
n.lblStartDate.string = "起始日期: " + e + "年" + i + "月" + a + "日";
} else {
n.endDate = "" + e + i + a;
n.lblEndDate.string = "截止日期: " + e + "年" + i + "月" + a + "日";
}
console.log("" + e + i + a);
});
};
n.selectByDate = function() {
if (parseInt(this.startDate) > parseInt(this.endDate)) T.default.alertTip("截止日期不能早于起始日期"); else {
this.renderData = {
page: [],
rows: {}
};
this.downloadData(1);
}
};
n.onClickClose = function() {
T.default.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
return t;
}(cc.Component), f = P(h.prototype, "lblEndDate", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = P(h.prototype, "lblStartDate", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = P(h.prototype, "itemContent", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = P(h.prototype, "detailItem", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = P(h.prototype, "selectDate", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = P(h.prototype, "pageContainer", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = P(h.prototype, "lblPage", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = P(h.prototype, "noData", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h)) || d);
n.default = R;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../script/common/GameUtils": "GameUtils"
} ],
ProxyRecord: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "d86day37w9MJo3u0VIxSTxv", "ProxyRecord");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = h(e("../../../Main/NetWork/Connector")), d = h(e("../../common/GameUtils"));
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
function f(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function p(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function m(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
g(e, t);
}
function g(e, t) {
return (g = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function v(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var C = cc._decorator, b = C.ccclass, y = C.property, S = (i = y(cc.Node), a = y(cc.Prefab), 
b(r = (o = function(e) {
m(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
f(t = e.call.apply(e, [ this ].concat(i)) || this, "itemContent", s, p(t));
f(t, "recordItem", c, p(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.renderUI();
};
n.renderUI = function() {
var e = this;
this.itemContent.removeAllChildren();
u.default.request(l.GameConfig.ServerEventName.InviteRecord, {}, function(t) {
d.default.isNullOrEmpty(t.list) || t.list.forEach(function(t) {
var n = cc.instantiate(e.recordItem);
n.getChildByName("desc").getComponent(cc.Label).string = "leave" == t.type ? "直属玩家" + t.name + "(" + t.id + ")已离开 " + t.date : "玩家" + t.name + "(" + t.id + ")已成为直属玩家 " + t.date;
e.itemContent.addChild(n);
});
});
};
return t;
}(cc.Component), s = v(o.prototype, "itemContent", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c = v(o.prototype, "recordItem", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), o)) || r);
n.default = S;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../common/GameUtils": "GameUtils"
} ],
ProxyTotal: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "f1e0cFenkJJ2IuAbg1wYBBx", "ProxyTotal");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M, x, O = k(e("../../base/pop/PopupBase")), G = e("../../ui/hall/data/App"), R = k(e("../../common/GameUtils"));
function k(e) {
return e && e.__esModule ? e : {
default: e
};
}
function L(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function B(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function F(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
U(e, t);
}
function U(e, t) {
return (U = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function H(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var z = cc._decorator, j = z.ccclass, W = z.property, q = (i = W(cc.Label), a = W(cc.Label), 
r = W(cc.Label), o = W(cc.Label), s = W(cc.Label), c = W(cc.Label), l = W(cc.Label), 
u = W(cc.Node), d = W(cc.Label), h = W(cc.Label), f = W(cc.Label), p = W(cc.Label), 
m = W(cc.Label), g = W(cc.Label), j(v = (C = function(e) {
F(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
L(t = e.call.apply(e, [ this ].concat(i)) || this, "lblEarn", b, B(t));
L(t, "lblName", y, B(t));
L(t, "lblPhone", S, B(t));
L(t, "lblId", _, B(t));
L(t, "lblEarn", T, B(t));
L(t, "lblWallet", E, B(t));
L(t, "lblRewardWin", A, B(t));
L(t, "btnReward", I, B(t));
L(t, "lblCount", N, B(t));
L(t, "lblUserCount", w, B(t));
L(t, "lblProxyCount", D, B(t));
L(t, "lblWallets", P, B(t));
L(t, "lblUserWallet", M, B(t));
L(t, "lblProxyWallet", x, B(t));
t.codeCoolDown = !0;
return t;
}
var n = t.prototype;
n.start = function() {
this.renderUI();
};
n.renderUI = function() {
var e = this;
this.lblEarn.string = R.default.formatGold(G.App.Proxy.proxyEarn, 2) + "元";
this.lblName.string = "" + R.default.getStringByLength(G.App.Proxy.proxyData.name, 5);
this.lblId.string = "ID: " + G.App.Proxy.proxyData.id;
this.lblPhone.string = "" + G.App.Proxy.proxyData.phone;
this.lblWallet.string = R.default.formatGold(G.App.Proxy.proxyData.wallet, 2) + "元";
this.lblRewardWin.string = R.default.formatGold(G.App.Proxy.proxyData.rewardWin) + "元";
this.btnReward.active = G.App.Proxy.proxyData.rewardWin > 0;
G.App.Proxy.getDetailInfo().then(function() {
e.renderTotalUI();
});
};
n.renderTotalUI = function() {
this.lblCount.string = "直属用户总数: " + G.App.Proxy.proxyDetail.count;
this.lblUserCount.string = "下级用户总数: " + G.App.Proxy.proxyDetail.userCount;
this.lblProxyCount.string = "下级代理总数: " + G.App.Proxy.proxyDetail.proxyCount;
this.lblWallets.string = "直属用户余额: " + R.default.formatGold(G.App.Proxy.proxyDetail.wallet);
this.lblUserWallet.string = "下级用户余额: " + R.default.formatGold(G.App.Proxy.proxyDetail.userWallet);
this.lblProxyWallet.string = "下级代理余额: " + R.default.formatGold(G.App.Proxy.proxyDetail.proxyWallet);
};
return t;
}(O.default), b = H(C.prototype, "lblEarn", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = H(C.prototype, "lblName", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = H(C.prototype, "lblPhone", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = H(C.prototype, "lblId", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), T = H(C.prototype, "lblEarn", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), E = H(C.prototype, "lblWallet", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), A = H(C.prototype, "lblRewardWin", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), I = H(C.prototype, "btnReward", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), N = H(C.prototype, "lblCount", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), w = H(C.prototype, "lblUserCount", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), D = H(C.prototype, "lblProxyCount", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), P = H(C.prototype, "lblWallets", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), M = H(C.prototype, "lblUserWallet", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), x = H(C.prototype, "lblProxyWallet", [ g ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C)) || v);
n.default = q;
t.exports = n.default;
cc._RF.pop();
}, {
"../../base/pop/PopupBase": "PopupBase",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App"
} ],
ProxyTradeInfoPage: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "f3ff1hgaZ5AgKLqxhaw8u0V", "ProxyTradeInfoPage");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M, x, O, G, R, k, L, B, F, U, H, z, j, W, q, Y, J, V, K, Z, Q, X, $, ee, te, ne, ie, ae, re, oe, se, ce, le, ue, de, he, fe, pe, me, ge, ve, Ce, be, ye, Se, _e, Te, Ee, Ae, Ie, Ne, we, De, Pe, Me, xe, Oe, Ge, Re, ke, Le, Be, Fe, Ue, He = e("../../../GameBase/GameConfig"), ze = e("../../../Main/GoEasy/GoEasyConfig"), je = Ve(e("../../../Main/NetWork/Connector")), We = (e("../../../Main/Script/audio-ctrl"), 
Ve(e("../../../Main/Script/Cache"))), qe = e("../../../Main/Script/native-extend"), Ye = Ve(e("../../common/GameUtils")), Je = e("../hall/data/App");
function Ve(e) {
return e && e.__esModule ? e : {
default: e
};
}
function Ke(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function Ze(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function Qe(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
Xe(e, t);
}
function Xe(e, t) {
return (Xe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function $e(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var et = cc._decorator, tt = et.ccclass, nt = et.property, it = (i = nt(cc.Label), 
a = nt(cc.Label), r = nt(cc.Label), o = nt(cc.Label), s = nt(cc.Label), c = nt(cc.Label), 
l = nt(cc.Label), u = nt(cc.Label), d = nt(cc.Label), h = nt(cc.Label), f = nt(cc.Label), 
p = nt(cc.Label), m = nt(cc.Label), g = nt(cc.Node), v = nt(cc.Sprite), C = nt(cc.Label), 
b = nt(cc.SpriteFrame), y = nt(cc.Sprite), S = nt(cc.Node), _ = nt(cc.Node), T = nt(cc.Node), 
E = nt(cc.Node), A = nt(cc.Node), I = nt(cc.Node), N = nt(cc.Node), w = nt(cc.Node), 
D = nt(cc.Node), P = nt(cc.Node), M = nt(cc.Node), x = nt(cc.Node), O = nt(cc.Node), 
G = nt(cc.Node), R = nt(cc.Node), k = nt(cc.Node), L = nt(cc.Node), B = nt(cc.Node), 
F = nt(cc.Node), U = nt(cc.Node), H = nt(cc.Node), z = nt(cc.Sprite), j = nt(cc.Label), 
W = nt(cc.Node), q = nt(cc.SpriteFrame), Y = nt(cc.SpriteFrame), J = nt(cc.Prefab), 
tt(V = (K = function(e) {
Qe(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
Ke(t = e.call.apply(e, [ this ].concat(i)) || this, "lblDownTime", Z, Ze(t));
Ke(t, "lblBuyerIDDesc", Q, Ze(t));
Ke(t, "lblBuyerID", X, Ze(t));
Ke(t, "lblNameDesc", $, Ze(t));
Ke(t, "lblName", ee, Ze(t));
Ke(t, "lblAccountDesc", te, Ze(t));
Ke(t, "lblAccount", ne, Ze(t));
Ke(t, "lblBank", ie, Ze(t));
Ke(t, "lblBankAddress", ae, Ze(t));
Ke(t, "lblPhoneDesc", re, Ze(t));
Ke(t, "lblPhone", oe, Ze(t));
Ke(t, "lblCreateAt", se, Ze(t));
Ke(t, "lblUpdateAt", ce, Ze(t));
Ke(t, "chatRoom", le, Ze(t));
Ke(t, "qrcodeNode", ue, Ze(t));
Ke(t, "qrcodeDesc", de, Ze(t));
Ke(t, "defaultSf", he, Ze(t));
Ke(t, "qrcodeSpr", fe, Ze(t));
Ke(t, "qrcodeMask", pe, Ze(t));
Ke(t, "judgeBtn", me, Ze(t));
Ke(t, "serviceBtn", ge, Ze(t));
Ke(t, "submitDataBtn", ve, Ze(t));
Ke(t, "copyServiceBtn", Ce, Ze(t));
Ke(t, "copyTips", be, Ze(t));
Ke(t, "processBtn", ye, Ze(t));
Ke(t, "confirmBtn", Se, Ze(t));
Ke(t, "cancelBtn", _e, Ze(t));
Ke(t, "plsProcessBtn", Te, Ze(t));
Ke(t, "plsCancelBtn", Ee, Ze(t));
Ke(t, "judgeProcessBtn", Ae, Ze(t));
Ke(t, "judgeCancelBtn", Ie, Ze(t));
Ke(t, "agreeProcessBtn", Ne, Ze(t));
Ke(t, "agreeCancelBtn", we, Ze(t));
Ke(t, "refuseProcessBtn", De, Ze(t));
Ke(t, "refuseCancelBtn", Pe, Ze(t));
Ke(t, "tradeInfo", Me, Ze(t));
Ke(t, "btnContainer", xe, Ze(t));
Ke(t, "tradeNoData", Oe, Ze(t));
Ke(t, "payTypeContainer", Ge, Ze(t));
Ke(t, "statusSpr", Re, Ze(t));
Ke(t, "statusTips", ke, Ze(t));
Ke(t, "tipsContainer", Le, Ze(t));
Ke(t, "cancelSf", Be, Ze(t));
Ke(t, "doneSf", Fe, Ze(t));
Ke(t, "codePre", Ue, Ze(t));
t.allData = [];
t.unfinishData = [];
t.finishData = [];
t.tradeType = "all";
t.payType = "";
t.isInitRoom = !1;
t.tradeId = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
};
n.addEvents = function() {
Je.App.EventManager.addEventListener(He.GameConfig.GameEventNames.SHOW_TRADE_TIPS, this.refreshTrade, this);
};
n.removeEvents = function() {
Je.App.EventManager.removeEventListener(He.GameConfig.GameEventNames.SHOW_TRADE_TIPS, this.refreshTrade, this);
};
n.refreshTrade = function() {
this.selectInfo && this.downloadTrades();
};
n.initData = function(e) {
this.tradeId = e;
this.downloadTrades();
};
n.downloadTrades = function() {
var e = this;
this.tradeInfo.active = !0;
this.btnContainer.active = !0;
this.tradeNoData.active = !1;
this.lblDownTime.node.active = !1;
this.qrcodeNode.node.active = !1;
je.default.request(He.GameConfig.ServerEventName.POTCTrade, {
tradeID: this.tradeId
}, function(t) {
e.selectTrades({
detail: t.trade
});
});
};
n.selectTrades = function(e) {
var t = this;
this.selectInfo = e.detail;
this.enjoinChatRoom();
this.deleteTradeDone(this.selectInfo.id);
var n = e.detail.buyer.id == He.GameConfig.ProxyData.id ? "buy" : "sell";
this.payTypeContainer.active = "buy" == n && "cancel" != e.detail.status && "done" != e.detail.status;
this.payType = e.detail.payType;
this.payTypeContainer.getChildByName("alipay").active = !Ye.default.isNullOrEmpty(this.selectInfo.seller.alipay);
this.payTypeContainer.getChildByName("wechat").active = !Ye.default.isNullOrEmpty(this.selectInfo.seller.wechat);
this.payTypeContainer.getChildByName("bank").active = !Ye.default.isNullOrEmpty(this.selectInfo.seller.bank);
this.payTypeContainer.getChildByName("" + this.payType).getComponent(cc.Toggle).check();
this.refreshSelectInfo();
this.judgeBtn.active = "sell" == n && "process" == e.detail.status;
this.statusSpr.node.active = !1;
if ("cancel" == e.detail.status || "done" == e.detail.status) {
this.statusSpr.node.active = !0;
this.statusSpr.node.stopAllActions();
this.statusSpr.spriteFrame = "cancel" == e.detail.status ? this.cancelSf : this.doneSf;
this.statusSpr.node.opacity = 0;
this.statusSpr.node.scale = 3;
var i = cc.scaleTo(.1, 1), a = cc.fadeIn(.1), r = cc.spawn(i, a);
this.statusSpr.node.runAction(r);
}
var o = !1;
this.statusTips.node.active = !1;
this.statusTips.string = "";
this.tipsContainer.active = !1;
switch (e.detail.status) {
case "wait":
if ("buy" == n) {
this.statusTips.node.active = !0;
this.tipsContainer.active = !0;
this.statusTips.string = "请付款后再点击【已付款】，恶意点击【已付款】会被制裁扣分";
o = !0;
}
break;

case "process":
if ("sell" == n) {
this.tipsContainer.active = !0;
this.statusTips.node.active = !0;
this.statusTips.string = "请确认【" + He.GameConfig.ChannelName[this.selectInfo.payType] + "】已收到对方转款,未收到付款请点击【交易遇到问题】";
o = !0;
}
break;

case "judge":
this.tipsContainer.active = !0;
this.statusTips.node.active = !0;
this.statusTips.string = "请点击右侧联系对方或点击上方电话进行协商";
o = !0;
break;

case "release":
if ("buy" == n) {
this.tipsContainer.active = !0;
this.statusTips.node.active = !0;
this.statusTips.string = "是否已和对方完成协商";
o = !0;
}
break;

case "confirm":
if ("sell" == n) {
this.tipsContainer.active = !0;
this.statusTips.node.active = !0;
this.statusTips.string = "是否已和对方完成协商";
o = !0;
}
break;

case "service":
this.tipsContainer.active = !0;
this.statusTips.node.active = !0;
this.statusTips.string = "sell" == n ? "客服已介入,请提交收款记录给客服,未提交收款记录会不利于您的判决" : "客服已介入,请提交付款凭证给客服,未提交付款凭证会不利于您的判决";
o = !0;
}
if (o) {
this.statusTips.node.opacity = 0;
this.statusTips.node.scale = 3;
var s = cc.scaleTo(.2, 1), c = cc.fadeIn(.2), l = cc.spawn(s, c);
this.statusTips.node.runAction(l);
}
this.confirmBtn.active = "buy" == n && "wait" == e.detail.status && new Date().getTime() + He.GameConfig.ServerTimeDiff - new Date(e.detail.updatedAt).getTime() < He.GameConfig.GameInfo.otcConfig.BUY_TIMEOUT;
this.cancelBtn.active = "buy" == n && "wait" == e.detail.status && new Date().getTime() + He.GameConfig.ServerTimeDiff - new Date(e.detail.updatedAt).getTime() < He.GameConfig.GameInfo.otcConfig.BUY_TIMEOUT;
this.processBtn.active = "sell" == n && "process" == e.detail.status;
this.plsProcessBtn.active = "buy" == n && "judge" == e.detail.status;
this.judgeCancelBtn.active = "buy" == n && "judge" == e.detail.status;
this.plsCancelBtn.active = "sell" == n && "judge" == e.detail.status;
this.judgeProcessBtn.active = "sell" == n && "judge" == e.detail.status;
this.agreeProcessBtn.active = "sell" == n && "confirm" == e.detail.status;
this.agreeCancelBtn.active = "buy" == n && "release" == e.detail.status;
this.refuseProcessBtn.active = "sell" == n && "confirm" == e.detail.status;
this.refuseCancelBtn.active = "buy" == n && "release" == e.detail.status;
this.serviceBtn.active = "judge" == e.detail.status;
this.submitDataBtn.active = "service" == e.detail.status;
this.copyServiceBtn.active = "service" == e.detail.status;
this.copyTips.active = "service" == e.detail.status;
if ("process" == e.detail.status || "wait" == e.detail.status || "trans" == e.detail.status) {
this.tipsContainer.active = !0;
this.lblDownTime.node.active = !0;
this.lblDownTime.unscheduleAllCallbacks();
var u = 0;
switch (e.detail.status) {
case "wait":
u = He.GameConfig.GameInfo.otcConfig.BUY_TIMEOUT;
break;

case "process":
u = "slow" == e.detail.tradeType ? He.GameConfig.GameInfo.otcConfig.SLOW_SELL_CONFIRM_TIMEOUT : He.GameConfig.GameInfo.otcConfig.FAST_SELL_CONFIRM_TIMEOUT;
break;

case "trans":
u = He.GameConfig.GameInfo.otcConfig.SLOW_BUY_TRANS_TIME;
}
this.lblDownTime.schedule(function() {
var n = u - (new Date().getTime() + He.GameConfig.ServerTimeDiff - new Date(e.detail.updatedAt).getTime());
if (n <= 0) {
t.lblDownTime.string = "00:00";
t.lblDownTime.unscheduleAllCallbacks();
} else {
var i = Math.floor(n / 1e3 / 60 / 60);
if (i > 0) t.lblDownTime.string = "约" + i + "小时"; else {
var a = Math.floor(n / 1e3 / 60), r = Math.floor(n / 1e3 % 60), o = a < 10 ? "0" + a : "" + a, s = r < 10 ? "0" + r : "" + r;
t.lblDownTime.string = o + ":" + s;
console.log("----显示倒计时----", t.lblDownTime.node.active);
}
}
}, 1);
} else {
console.log("----隐藏倒计时----");
this.lblDownTime.node.active = !1;
}
};
n.refreshSelectInfo = function() {
var e = this;
console.log("----selectInfo----", this.selectInfo);
var t = this.selectInfo.buyer.id == He.GameConfig.ProxyData.id ? "buy" : "sell";
this.lblBuyerIDDesc.node.active = "sell" == t;
this.lblBuyerID.node.active = "sell" == t;
this.lblBuyerID.string = "" + this.selectInfo.buyer.id;
this.lblNameDesc.string = "buy" == t ? "收款人" : "购买人";
this.lblName.string = "buy" == t ? JSON.parse(this.selectInfo.seller[this.payType]).name : this.selectInfo.buyer.name;
this.lblAccountDesc.node.active = "buy" == t;
this.lblAccount.node.active = "buy" == t;
this.lblAccount.string = JSON.parse(this.selectInfo.seller[this.payType]).account + "";
if ("bank" == this.payType && "buy" == t) {
this.lblBank.node.active = !0;
this.lblBankAddress.node.active = !0;
this.lblBank.node.parent.active = !0;
this.lblBankAddress.node.parent.active = !0;
this.lblBank.string = "" + JSON.parse(this.selectInfo.seller[this.payType]).bank;
this.lblBankAddress.string = "" + JSON.parse(this.selectInfo.seller[this.payType]).address;
} else {
this.lblBank.node.active = !1;
this.lblBankAddress.node.active = !1;
this.lblBank.node.parent.active = !1;
this.lblBankAddress.node.parent.active = !1;
}
this.lblPhoneDesc.node.active = "cancel" != this.selectInfo.status || "done" != this.selectInfo.status;
this.lblPhone.node.active = "cancel" != this.selectInfo.status || "done" != this.selectInfo.status;
this.lblPhoneDesc.string = "buy" == t ? "收款人手机" : "购买人手机";
this.lblPhone.string = "buy" == t ? this.selectInfo.seller.phone : this.selectInfo.buyer.phone;
this.lblCreateAt.string = Ye.default.timestampToTime(new Date(this.selectInfo.createdAt)) + "";
this.lblUpdateAt.string = Ye.default.timestampToTime(new Date(this.selectInfo.updatedAt)) + "";
this.qrcodeNode.node.active = "buy" == t && "bank" != this.payType && "cancel" != this.selectInfo.status && "done" != this.selectInfo.status || "sell" == t && "wait" != this.selectInfo.status;
this.qrcodeDesc.string = "buy" == t ? "点击查看收款码" : "点击查看付款凭证";
if ("buy" == t && "bank" != this.payType || "sell" == t && "wait" != this.selectInfo.status) {
var n = "buy" == t ? JSON.parse(this.selectInfo.seller[this.payType]).address : this.selectInfo.receipt;
Ye.default.isNullOrEmpty(n) ? this.qrcodeNode.spriteFrame = this.defaultSf : Ye.default.loadImg(He.GameConfig.GameInfo.resourceURL + n).then(function(t) {
e.qrcodeNode.spriteFrame = t;
});
}
};
n.showQrCode = function() {
var e = this;
We.default.playSfx();
if (Ye.default.isNullOrEmpty(this.selectInfo)) We.default.alertTip("请选择订单"); else {
var t = this.selectInfo.buyer.id == He.GameConfig.ProxyData.id ? JSON.parse(this.selectInfo.seller[this.selectInfo.payType]).address : this.selectInfo.receipt;
if (Ye.default.isNullOrEmpty(t)) We.default.alertTip(this.selectInfo.buyer.id == He.GameConfig.ProxyData.id ? "暂无收款码" : "对方未上传付款凭证"); else {
this.qrcodeMask.active = !0;
Ye.default.loadImg(He.GameConfig.GameInfo.resourceURL + t).then(function(t) {
e.qrcodeSpr.spriteFrame = t;
});
Je.App.lockScene();
this.qrcodeSpr.node.scale = 0;
setTimeout(function() {
if (e.qrcodeSpr.node.height > 500) {
var t = 500 * e.qrcodeSpr.node.width / e.qrcodeSpr.node.height;
e.qrcodeSpr.node.width = t;
e.qrcodeSpr.node.height = 500;
}
e.qrcodeSpr.node.runAction(cc.scaleTo(.2, 1));
Je.App.unlockScene();
}, 300);
}
}
};
n.hideQrCode = function() {
var e = this;
We.default.playSfx();
this.qrcodeSpr.node.stopAllActions();
this.qrcodeSpr.node.runAction(cc.sequence(cc.scaleTo(.2, 0), cc.callFunc(function() {
e.qrcodeMask.active = !1;
})));
};
n.saveQrCode = function() {
We.default.playSfx();
var e = JSON.parse(this.selectInfo.seller[this.selectInfo.payType]).address;
Ye.default.SaveToLocal(He.GameConfig.GameInfo.resourceURL + e, function(e) {
"error " == e ? We.default.alertTip("保存失败,请截屏保存") : qe.Social.saveImage(e);
});
};
n.copyStr = function(e) {
We.default.playSfx();
We.default.alertTip("复制成功");
qe.Social.setCopy(e.currentTarget.getComponent(cc.Label).string);
};
n.onClickCancel = function() {
var e = this;
We.default.playSfx();
Ye.default.isNullOrEmpty(this.selectInfo) ? We.default.alertTip("请选择订单") : We.default.showConfirm("确认取消订单吗?\n\n多次取消订单会限制交易", function() {
je.default.request(He.GameConfig.ServerEventName.POTCCancelTrade, {
tradeID: e.selectInfo.id
}, function() {
We.default.alertTip("取消成功");
e.downloadTrades();
});
});
};
n.onClickConfirm = function() {
var e = this;
We.default.playSfx();
if (Ye.default.isNullOrEmpty(this.selectInfo)) We.default.alertTip("请选择订单"); else {
var t = this;
Ye.default.pop(He.GameConfig.pop.ConfirmReceiptPop, function(n) {
n.getComponent("ConfirmReceiptPop").show("showConfirm", "请上传付款凭证", function(n) {
je.default.request(He.GameConfig.ServerEventName.POTCConfirmTrade, {
tradeID: t.selectInfo.id,
receipt: n
}, function() {
We.default.alertTip("等待卖家放行");
We.default.showConfirm("是否拨打电话催促对方放行", function() {
qe.Social.makeCall("" + e.selectInfo.seller.phone);
t.downloadTrades();
}, function() {
t.downloadTrades();
});
});
});
});
}
};
n.onClickProcess = function() {
var e = this;
We.default.playSfx();
Ye.default.isNullOrEmpty(this.selectInfo) ? We.default.alertTip("请选择订单") : We.default.showConfirm("请确认【" + He.GameConfig.ChannelName[this.selectInfo.payType] + "】已收到对方转款" + Ye.default.formatGold(this.selectInfo.amount) + "元,未收到请勿放行！！！避免钱货两空！！！", function() {
je.default.request(He.GameConfig.ServerEventName.POTCProcessTrade, {
tradeID: e.selectInfo.id
}, function() {
We.default.alertTip("交易成功");
e.downloadTrades();
});
});
};
n.onClickJudge = function() {
var e = this;
We.default.playSfx();
Ye.default.isNullOrEmpty(this.selectInfo) ? We.default.alertTip("请选择订单") : We.default.showConfirm("未收到对方付款? 可以与对方进行电话沟通", function() {
je.default.request(He.GameConfig.ServerEventName.POTCReportTrade, {
tradeID: e.selectInfo.id
}, function() {
We.default.alertTip("订单进入申诉状态");
e.downloadTrades();
});
});
};
n.onPleaseProcess = function() {
var e = this;
We.default.playSfx();
Ye.default.isNullOrEmpty(this.selectInfo) ? We.default.alertTip("请选择订单") : We.default.showConfirm("协商完成,请求卖家再次确认放行", function() {
je.default.request(He.GameConfig.ServerEventName.POTCPleaseProcess, {
tradeID: e.selectInfo.id
}, function() {
We.default.alertTip("等待对方同意");
e.downloadTrades();
});
});
};
n.onPleaseCancel = function() {
var e = this;
We.default.playSfx();
Ye.default.isNullOrEmpty(this.selectInfo) ? We.default.alertTip("请选择订单") : We.default.showConfirm("协商完成,请求买家取消订单", function() {
je.default.request(He.GameConfig.ServerEventName.POTCPleaseCancel, {
tradeID: e.selectInfo.id
}, function() {
We.default.alertTip("等待对方同意");
e.downloadTrades();
});
});
};
n.enjoinChatRoom = function() {
if (!this.isInitRoom) {
this.isInitRoom = !0;
var e = this.selectInfo.seller.id == He.GameConfig.ProxyData.id ? this.selectInfo.buyer.id : this.selectInfo.seller.id;
this.chatRoom.getComponent("GoEasyChat").initData(e, this.selectInfo, ze.GoEasyConfig.ChatType.PRIVATE);
}
};
n.onSumbitData = function() {
We.default.playSfx();
Ye.default.isNullOrEmpty(this.selectInfo) ? We.default.alertTip("请选择订单") : qe.Social.openUrl(He.GameConfig.GameInfo.customeService + '&metadata={"tel":"' + He.GameConfig.ProxyData.phone + '","name":"' + He.GameConfig.ProxyData.name + '","代理ID":"' + He.GameConfig.ProxyData.id + '","addr":"xyqp","tradeID":"' + this.selectInfo.id + '","sellerID":"' + this.selectInfo.seller.id + '","buyerID":"' + this.selectInfo.buyer.id + '"}');
};
n.onCopyService = function() {
We.default.playSfx();
if (Ye.default.isNullOrEmpty(this.selectInfo)) We.default.alertTip("请选择订单"); else {
var e = He.GameConfig.GameInfo.customeService + '&metadata={"tel":"' + He.GameConfig.ProxyData.phone + '","name":"' + He.GameConfig.ProxyData.name + '","代理ID":"' + He.GameConfig.ProxyData.id + '","addr":"xyqp","tradeID":"' + this.selectInfo.id + '","sellerID":"' + this.selectInfo.seller.id + '","buyerID":"' + this.selectInfo.buyer.id + '"}';
qe.Social.setCopy(e);
}
};
n.onServiceTrade = function() {
var e = this;
We.default.playSfx();
Ye.default.isNullOrEmpty(this.selectInfo) ? We.default.alertTip("请选择订单") : We.default.showConfirm("申请客服介入后,请在及时提交资料给客服,未及时提供资料会不利于最后判决", function() {
je.default.request(He.GameConfig.ServerEventName.POTCServiceTrade, {
tradeID: e.selectInfo.id
}, function() {
We.default.alertTip(e.selectInfo.buyer.id == He.GameConfig.ProxyData.id ? "请提交付款凭证给客服" : "请提交收款记录给客服");
e.downloadTrades();
});
});
};
n.deleteTradeDone = function(e) {
var t = Ye.default.getValue("" + He.GameConfig.StorageKey.TradeWaitting + He.GameConfig.ProxyData.id, []).filter(function(t) {
return t.tradeID != e;
});
Ye.default.saveValue("" + He.GameConfig.StorageKey.TradeWaitting + He.GameConfig.ProxyData.id, t);
Je.App.EventManager.dispatchEventWith(He.GameConfig.GameEventNames.HIDE_TRADE_TIPS);
};
n.onClickPhone = function(e) {
We.default.playSfx();
qe.Social.setCopy(e.currentTarget.getComponent(cc.Label).string);
qe.Social.makeCall(e.currentTarget.getComponent(cc.Label).string);
};
n.onClickService = function() {
We.default.playSfx();
qe.Social.openUrl(He.GameConfig.GameInfo.customeService + '&metadata={"tel":"' + He.GameConfig.ProxyData.phone + '","name":"' + He.GameConfig.ProxyData.name + '","qq":"' + He.GameConfig.ProxyData.id + '","addr":"xyqp","tradeID":"' + this.selectInfo.id + '","sellerID":"' + this.selectInfo.seller.id + '","buyerID":"' + this.selectInfo.buyer.id + '"}');
};
n.onClickClose = function() {
We.default.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
return t;
}(cc.Component), Z = $e(K.prototype, "lblDownTime", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Q = $e(K.prototype, "lblBuyerIDDesc", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), X = $e(K.prototype, "lblBuyerID", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), $ = $e(K.prototype, "lblNameDesc", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ee = $e(K.prototype, "lblName", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), te = $e(K.prototype, "lblAccountDesc", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ne = $e(K.prototype, "lblAccount", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ie = $e(K.prototype, "lblBank", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ae = $e(K.prototype, "lblBankAddress", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), re = $e(K.prototype, "lblPhoneDesc", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), oe = $e(K.prototype, "lblPhone", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), se = $e(K.prototype, "lblCreateAt", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ce = $e(K.prototype, "lblUpdateAt", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), le = $e(K.prototype, "chatRoom", [ g ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ue = $e(K.prototype, "qrcodeNode", [ v ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), de = $e(K.prototype, "qrcodeDesc", [ C ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), he = $e(K.prototype, "defaultSf", [ b ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), fe = $e(K.prototype, "qrcodeSpr", [ y ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), pe = $e(K.prototype, "qrcodeMask", [ S ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), me = $e(K.prototype, "judgeBtn", [ _ ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ge = $e(K.prototype, "serviceBtn", [ T ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ve = $e(K.prototype, "submitDataBtn", [ E ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ce = $e(K.prototype, "copyServiceBtn", [ A ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), be = $e(K.prototype, "copyTips", [ I ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ye = $e(K.prototype, "processBtn", [ N ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Se = $e(K.prototype, "confirmBtn", [ w ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _e = $e(K.prototype, "cancelBtn", [ D ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Te = $e(K.prototype, "plsProcessBtn", [ P ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ee = $e(K.prototype, "plsCancelBtn", [ M ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ae = $e(K.prototype, "judgeProcessBtn", [ x ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ie = $e(K.prototype, "judgeCancelBtn", [ O ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ne = $e(K.prototype, "agreeProcessBtn", [ G ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), we = $e(K.prototype, "agreeCancelBtn", [ R ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), De = $e(K.prototype, "refuseProcessBtn", [ k ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Pe = $e(K.prototype, "refuseCancelBtn", [ L ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Me = $e(K.prototype, "tradeInfo", [ B ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), xe = $e(K.prototype, "btnContainer", [ F ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Oe = $e(K.prototype, "tradeNoData", [ U ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ge = $e(K.prototype, "payTypeContainer", [ H ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Re = $e(K.prototype, "statusSpr", [ z ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ke = $e(K.prototype, "statusTips", [ j ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Le = $e(K.prototype, "tipsContainer", [ W ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Be = $e(K.prototype, "cancelSf", [ q ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Fe = $e(K.prototype, "doneSf", [ Y ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ue = $e(K.prototype, "codePre", [ J ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), K)) || V);
n.default = it;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/GoEasy/GoEasyConfig": "GoEasyConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/audio-ctrl": "audio-ctrl",
"../../../Main/Script/native-extend": "native-extend",
"../../common/GameUtils": "GameUtils",
"../hall/data/App": "App"
} ],
Proxy: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "87596UEu/tEkbpVmk6qten8", "Proxy");
n.__esModule = !0;
n.Proxy = void 0;
var i = e("../../../../GameBase/GameConfig"), a = l(e("../../../../Main/Script/Cache")), r = e("../../../base/pop/PopupManager"), o = l(e("../../../common/GameUtils")), s = l(e("../../../common/network/Http")), c = e("./ProxyData");
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
function u(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function d(e, t, n) {
t && u(e.prototype, t);
n && u(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var h = function() {
e.getInstance = function() {
this._instance || (this._instance = new e());
return this._instance;
};
function e() {
this._proxyData = new c.ProxyData();
this._proxyDetail = new c.ProxyDetailData();
this._proxyEarn = 0;
this._proxyToken = "";
}
var t = e.prototype;
t.loginProxy = function() {
var e = o.default.getValue(i.GameConfig.StorageKey.ProxyToken, "");
o.default.isNullOrEmpty(e) ? r.PopupManager.show(i.GameConfig.pop.ProxyLoginPop) : this.getProxyInfo().then(function() {
r.PopupManager.show(i.GameConfig.pop.ProxyManagePop);
r.PopupManager.release(i.GameConfig.pop.ProxyLoginPop);
}).catch(function(e) {
a.default.alertTip(e.message || "获取信息超时");
});
};
t.codeLoginProxy = function(e, t) {
var n = this, c = {
url: i.GameConfig.ServerEventName.ProxyLogin,
data: {
code: e,
phone: t,
publicKey: i.GameConfig.Encrtyptor.getPublicKey()
}
};
s.default.post(c).then(function(e) {
var t = i.GameConfig.Encrtyptor.decrypt(e.token);
o.default.saveValue(i.GameConfig.StorageKey.ProxyToken, t);
n.getProxyInfo().then(function() {
r.PopupManager.show(i.GameConfig.pop.ProxyManagePop);
r.PopupManager.release(i.GameConfig.pop.ProxyLoginPop);
}).catch(function(e) {
console.log("-----111----", e);
a.default.alertTip(e.message || "获取信息超时");
});
}).catch(function(e) {
console.log("-----222----", e);
a.default.alertTip(e.message || "登录失败");
});
};
t.getProxyInfo = function() {
var e = this;
return new Promise(function(t, n) {
var a = o.default.getValue(i.GameConfig.StorageKey.ProxyToken, ""), r = o.default.encryptToken(a), l = {
url: i.GameConfig.ServerEventName.ProxyInfo,
data: {
isLeague: i.GameConfig.ProxyIsLeague
},
headers: {
"xxx-token": r
},
token: a
};
s.default.post(l).then(function(n) {
e._proxyData = new c.ProxyData(n.proxy);
e._proxyEarn = n.total;
t(n);
}).catch(function(e) {
console.log("-----err----", e);
n(e);
});
});
};
t.getDetailInfo = function() {
var e = this;
return new Promise(function(t) {
var n = o.default.getValue(i.GameConfig.StorageKey.ProxyToken, ""), r = o.default.encryptToken(n), l = {
url: i.GameConfig.ServerEventName.ProxyDetail,
data: {
id: e._proxyData.id,
isLeague: i.GameConfig.ProxyIsLeague
},
headers: {
"xxx-token": r
},
token: n
};
s.default.post(l).then(function(n) {
e._proxyDetail = new c.ProxyDetailData(n);
t();
}).catch(function(e) {
a.default.alertTip(e.message || "获取统计数据失败");
t();
});
});
};
d(e, [ {
key: "proxyData",
get: function() {
return this._proxyData;
}
}, {
key: "proxyEarn",
get: function() {
return this._proxyEarn;
}
}, {
key: "proxyDetail",
get: function() {
return this._proxyDetail;
}
} ]);
return e;
}();
n.Proxy = h;
h._instance = null;
cc._RF.pop();
}, {
"../../../../GameBase/GameConfig": "GameConfig",
"../../../../Main/Script/Cache": "Cache",
"../../../base/pop/PopupManager": "PopupManager",
"../../../common/GameUtils": "GameUtils",
"../../../common/network/Http": "Http",
"./ProxyData": "ProxyData"
} ],
PushManager: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "c7d57y9ZUJBAKl3fo3tY8WX", "PushManager");
n.__esModule = !0;
n.PushManager = void 0;
var i = e("../../../../GameBase/GameConfig"), a = c(e("../../../../Main/Script/Cache")), r = c(e("../../../../Main/Script/PACK")), o = c(e("../../../common/GameUtils")), s = e("./App");
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
var l = function() {
e.getInstance = function() {
this._instance || (this._instance = new e());
return this._instance;
};
function e() {
this._socket = null;
this._status = "";
this._times = 0;
this._retryTime = 0;
this._msgQueue = [];
this._pingSchedule = null;
}
var t = e.prototype;
t.connect = function() {
var e = this;
if (!cc.sys.isBrowser) {
this._times = 0;
if (null != this._socket) {
console.log("_socket存在，断开前面的连接");
this._socket.close();
this._socket = null;
}
try {
this._pingSchedule && clearInterval(this._pingSchedule);
this.schedulePing();
var t = o.default.getValue(i.GameConfig.StorageKey.UserToken, ""), n = o.default.encryptToken(t);
"Lobby" == cc.director.getScene().name && a.default.alertTipRightBottom("推送服务连接中");
this._socket = new WebSocket(i.GameConfig.NoticeUrl + "?token=" + encodeURIComponent(n));
this._status = i.GameConfig.ConnectState.CONNECTING;
this._socket.onopen = function() {
a.default.hideTipRightBottom("连接成功");
e._status = i.GameConfig.ConnectState.CONNECTED;
e._retryTime = 0;
};
this._socket.onmessage = function(t) {
var n = JSON.parse(t.data).pack, c = JSON.parse(t.data).data;
n != r.default.SC_PONG && console.log("onmessage--", n, c);
var l = "string" == typeof c ? JSON.parse(c) : c;
switch (n) {
case r.default.SC_PONG:
e.getPong();
break;

case "CARD":
break;

case "SCORE":
a.default.alertTipPop("公会ID:" + l.clubID + "\n" + o.default.formatGold(l.delta) + "体力");
if (l.clubID == s.App.Club.CurrentClubID) {
console.log("赋值体力");
s.App.Club.ClubScore = l.score;
}
break;

case "CLUB":
console.log("--加入公会--", l);
a.default.alertTipPop("\n " + l.name + "邀请您已加入\n公会:" + l.clubID);
s.App.EventManager.dispatchEventWith(i.GameConfig.GameEventNames.UPDATE_HALL_CLUB);
break;

default:
console.log("未知信息---" + n + "   " + c);
}
};
this._socket.onerror = function() {
e._status = i.GameConfig.ConnectState.CLOSED;
};
this._socket.onclose = function() {
e._status = i.GameConfig.ConnectState.CLOSED;
console.log("onclose--");
};
} catch (e) {
console.log("--rrr--", e);
}
}
};
t.reconnect = function() {
if (this._retryTime >= 3) this.connectError(); else {
this._status = i.GameConfig.ConnectState.CONNECTING;
this._retryTime++;
this.connect();
}
};
t.connectError = function() {
var e = this;
this._status = i.GameConfig.ConnectState.CLOSED;
this._retryTime = 0;
this.clearSchedule();
setTimeout(function() {
e.connect();
}, 5e3);
};
t.schedulePing = function() {
var e = this;
this._pingSchedule = setInterval(function() {
e._status != i.GameConfig.ConnectState.CONNECTING && e.sendPing();
}, 2e3);
};
t.clearSchedule = function() {
this._pingSchedule && clearInterval(this._pingSchedule);
this._times = 0;
this._pingSchedule = null;
};
t.sendPing = function() {
this._times++;
if (this._times > 5) this.reconnect(); else {
var e = new Date().getTime();
this.emit(r.default.CS_PING, {
time: e
});
}
};
t.getPong = function() {
this._times = 0;
};
t.emit = function(e, t) {
if (null != this._socket && this._socket.readyState != WebSocket.CLOSED && this._socket.readyState != WebSocket.CLOSING) {
var n = {
pack: e,
data: t
};
"CS_PING" != e && console.log(e, t);
try {
this._socket.send(JSON.stringify(n));
} catch (e) {}
}
};
t.gameMessage = function(e, t) {
this.emit(r.default.CS_GAME_MESSAGE, {
route: e,
data: t
});
};
t.disconnect = function() {
this._socket && this._socket.close();
this._socket = null;
this._status = "";
this._retryTime = 0;
this._msgQueue = [];
this.clearSchedule();
a.default.hideTipRightBottom("断开推送服务");
};
return e;
}();
n.PushManager = l;
l._instance = null;
cc._RF.pop();
}, {
"../../../../GameBase/GameConfig": "GameConfig",
"../../../../Main/Script/Cache": "Cache",
"../../../../Main/Script/PACK": "PACK",
"../../../common/GameUtils": "GameUtils",
"./App": "App"
} ],
QuestItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "2539aNz4XlI07FK+R1qeaZP", "QuestItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = h(e("../../../Main/Script/Cache")), d = (h(e("../../../script/common/GameUtils")), 
h(e("../../../Main/Script/DataBase")), e("./data/App"));
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
function f(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function p(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function m(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
g(e, t);
}
function g(e, t) {
return (g = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function v(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var C = cc._decorator, b = C.ccclass, y = C.property, S = (i = y(cc.Label), a = y([ cc.Node ]), 
b(r = (o = function(e) {
m(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
f(t = e.call.apply(e, [ this ].concat(i)) || this, "lblContent", s, p(t));
f(t, "answerArr", c, p(t));
t.currentIndex = 0;
return t;
}
var n = t.prototype;
n.onLoad = function() {};
n.renderUI = function(e) {
var t = this;
this.currentId = e.questId;
this.lblContent.string = e.content;
e.answer.forEach(function(e) {
t.answerArr[e.index].active = !0;
t.answerArr[e.index].getChildByName("word").getComponent(cc.Label).string = e.word;
});
};
n.onClickAnswer = function(e, t) {
u.default.playSfx();
var n = {
questId: this.currentId,
answer: parseInt(t)
};
d.App.EventManager.dispatchEventWith(l.GameConfig.GameEventNames.QUESTION_SELECT_ANSWER, n);
};
n.onClickClose = function() {
u.default.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
return t;
}(cc.Component), s = v(o.prototype, "lblContent", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c = v(o.prototype, "answerArr", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), o)) || r);
n.default = S;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../script/common/GameUtils": "GameUtils",
"./data/App": "App"
} ],
QuestionPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "ee997mu/cBE65dt2aAkdpVC", "QuestionPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d = e("../../../GameBase/GameConfig"), h = m(e("../../../Main/NetWork/Connector")), f = m(e("../../../Main/Script/Cache")), p = e("./data/App");
function m(e) {
return e && e.__esModule ? e : {
default: e
};
}
function g(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function v(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function C(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
b(e, t);
}
function b(e, t) {
return (b = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function y(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var S = cc._decorator, _ = S.ccclass, T = S.property, E = (i = T(cc.Node), a = T(cc.Prefab), 
r = T(cc.Label), _(o = (s = function(e) {
C(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
g(t = e.call.apply(e, [ this ].concat(i)) || this, "questContent", c, v(t));
g(t, "questItem", l, v(t));
g(t, "lblTitle", u, v(t));
t.currentIndex = 0;
t.answerData = [];
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.renderUI();
};
n.addEvents = function() {
p.App.EventManager.addEventListener(d.GameConfig.GameEventNames.QUESTION_SELECT_ANSWER, this.handleAnswer, this);
};
n.removeEvents = function() {
p.App.EventManager.removeEventListener(d.GameConfig.GameEventNames.QUESTION_SELECT_ANSWER, this.handleAnswer, this);
};
n.renderUI = function() {
var e = this;
this.lblTitle.string = d.GameConfig.QuestData.title;
this.questContent.removeAllChildren();
d.GameConfig.QuestData.list.forEach(function(t) {
var n = cc.instantiate(e.questItem);
n.getComponent("QuestItem").renderUI(t);
e.questContent.addChild(n);
});
};
n.handleAnswer = function(e) {
console.log(e);
var t = this.answerData.findIndex(function(t) {
return e.data.questId == t.questId;
});
-1 == t ? this.answerData.push(e.data) : this.answerData[t] = e.data;
};
n.onClickConfirm = function() {
var e = this;
console.log("答案", this.answerData);
this.answerData.length < d.GameConfig.QuestData.list.length ? f.default.alertTip("请完成所有问题") : h.default.request(d.GameConfig.ServerEventName.Questionnaire, {
answer: this.answerData
}, function() {
f.default.alertTip("提交成功");
e.onClickClose();
}, !0, function(t) {
f.default.alertTip(t.message || "提交失败");
e.onClickClose();
});
};
n.onClickClose = function() {
f.default.playSfx();
this.removeEvents();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
return t;
}(cc.Component), c = y(s.prototype, "questContent", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = y(s.prototype, "questItem", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = y(s.prototype, "lblTitle", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = E;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"./data/App": "App"
} ],
ROUTE: [ function(e, t) {
"use strict";
cc._RF.push(t, "15434CQ2YBJcqYniJy7Mjq7", "ROUTE");
t.exports = {
CS_CHAPTER: "CS_CHAPTER",
SC_CHAPTER: "SC_CHAPTER",
SC_REFRESH_CARD: "SC_REFRESH_CARD",
CS_CLAN_QUEUE: "CS_CLAN_QUEUE",
CS_JOIN_ROOM: "CS_JOIN_ROOM",
CS_CREATE_ROOM: "CS_CREATE_ROOM",
CS_RE_GAME: "CS_RE_GAME",
SC_PLAY_ERROR: "SC_PLAY_ERROR",
SC_GAME_DESTORY: "SC_GAME_DESTORY",
SC_TOAST: "SC_TOAST",
SC_GAME_DATA: "SC_GAME_DATA",
SC_JOIN_TABLE: "SC_JOIN_TABLE",
SC_JOIN_GAME: "SC_JOIN_GAME",
SC_PREPARE: "SC_PREPARE",
CS_GAME_READY: "CS_GAME_READY",
CS_NEXT: "CS_NEXT",
SC_GAME_READY: "SC_GAME_READY",
SC_NEXT: "SC_NEXT",
SC_CHANGE_STATUS: "SC_CHANGE_STATUS",
SC_GAME_INIT: "SC_GAME_INIT",
SC_SHOW_CARD: "SC_SHOW_CARD",
SC_PASS_CARD: "SC_PASS_CARD",
SC_PLAY_CARD: "SC_PLAY_CARD",
CS_PLAY_CARD: "CS_PLAY_CARD",
SC_CANCEL_AUTO: "SC_CANCEL_AUTO",
CS_CANCEL_AUTO: "CS_CANCEL_AUTO",
SC_START_AUTO: "SC_START_AUTO",
CS_START_AUTO: "CS_START_AUTO",
SC_SYNC_HANDS: "SC_SYNC_HANDS",
SC_TIPS: "SC_TIPS",
SC_SHOW_HOST: "SC_SHOW_HOST",
SC_SCORE: "SC_SCORE",
SC_FINISH: "SC_FINISH",
SC_PROGRESS: "SC_PROGRESS",
CS_PROGRESS: "CS_PROGRESS",
SC_GAME_VOTE: "SC_GAME_VOTE",
CS_GAME_VOTE: "CS_GAME_VOTE",
CS_GAME_CHAT: "CS_GAME_CHAT",
SC_GAME_CHAT: "SC_GAME_CHAT",
SC_PLAYER_LEAVE: "SC_PLAYER_LEAVE",
CS_PLAYER_LEAVE: "CS_PLAYER_LEAVE",
SC_ROUND_SUMMARY: "SC_ROUND_SUMMARY",
SC_GAME_SUMMARY: "SC_GAME_SUMMARY",
SC_RECONNECT: "SC_RECONNECT",
SC_RECORD: "SC_RECORD",
SC_CUTE: "SC_CUTE",
CS_CUTE: "CS_CUTE",
SC_SYSTEM_NOTICE: "SC_SYSTEM_NOTICE",
SC_DEAD: "SC_DEAD",
SC_GET_CARD: "SC_GET_CARD",
CS_GET_CARD: "CS_GET_CARD",
SC_OUT_CARD: "SC_OUT_CARD",
CS_OUT_CARD: "CS_OUT_CARD",
SC_QUEST: "SC_QUEST",
SC_QIANGGANG: "SC_QIANGGANG",
CS_QIANGGANG: "CS_QIANGGANG",
CS_ANSWER: "CS_ANSWER",
SC_GAME_DRAW: "SC_GAME_DRAW",
SC_HAIDI: "SC_HAIDI",
SC_ACTION: "SC_ACTION",
SC_ACTIONS: "SC_ACTIONS",
SC_ALERT: "SC_ALERT",
SC_SHOW_DECK: "SC_SHOW_DECK",
CS_SHOW_DECK: "CS_SHOW_DECK",
SC_QUICK_FINISH: "SC_QUICK_FINISH",
CS_QUICK_FINISH: "CS_QUICK_FINISH",
SC_DISBAND: "SC_DISBAND",
CS_DISBAND: "CS_DISBAND",
SC_SHOW_HANDS: "SC_SHOW_HANDS",
SC_LOCATION: "SC_LOCATION",
CS_LOCATION: "CS_LOCATION",
SC_PIAO: "SC_PIAO",
SC_BET: "SC_BET",
CS_PIAO: "CS_PIAO",
SC_BAO: "SC_BAO",
CS_BAO: "CS_BAO",
SC_CALL: "SC_CALL",
CS_CALL: "CS_CALL",
SC_MASTER: "SC_MASTER"
};
cc._RF.pop();
}, {} ],
ReHands07: [ function(e, t) {
"use strict";
cc._RF.push(t, "c8704be3k5CNacHxl0LusQb", "ReHands07");
e("TableInfo");
cc.Class({
extends: cc.Component,
properties: {
preCard: cc.Prefab,
nodeCards: [],
bgTable: cc.Layout,
search: []
},
refreshHandCards: function(e, t) {
var n = this;
this.node.destroyAllChildren();
this.nodeCards = [];
var i = Math.floor(e.length / 2);
e.forEach(function(a, r) {
var o = cc.instantiate(n.preCard);
o.getComponent("ModuleCards07").init(a);
o.parent = n.node;
o._prior = !1;
o._before = !1;
o._value = a;
o.active = t;
o.setPosition(10 * (e.length - 27) - 430 + (13 - i + r) * (62 - e.length), 7);
o.pos0 = cc.v2(o.x, o.y);
o.pos1 = cc.v2(o.x, o.y + 10);
n.nodeCards.push(o);
});
}
});
cc._RF.pop();
}, {
TableInfo: "TableInfo"
} ],
Replay07: [ function(e, t) {
"use strict";
cc._RF.push(t, "e768dV5wahALKMqSnahYGY1", "Replay07");
var n = e("ROUTE"), i = e("DataBase"), a = e("Cache"), r = e("TableInfo"), o = e("audio-ctrl"), s = e("../../../GameBase/GameConfig").GameConfig, c = (e("../../../Main/Script/utils"), 
cc.v2(-500, -234), cc.v2(500, 122), cc.v2(-500, 122), {
ext: !0,
show: !0,
black: !0,
bird: !0,
rand: !0,
four: !0,
aaa: !0,
limit: !0,
person: 2,
clan: !0,
turn: 10
});
cc.v2(-522, -234), cc.v2(522, 122), cc.v2(-522, 122);
cc.Class({
extends: cc.Component,
properties: {
_delayTime: 0,
bgCount: [ cc.Layout ],
btnOperate: [ cc.Button ],
sprProgress: cc.Sprite,
lblSpeed: cc.Label,
lblRoomId: cc.Label,
lblTurn: cc.Label,
lblRule: cc.Label,
nodeRule: cc.Node,
exitBtn: cc.Node,
prePlayerInfo: cc.Prefab,
bgTable: cc.Node,
nodePlayerInfo: [],
imgPass: [ cc.Node ],
nodeHands: [ cc.Node ],
dropCards: [ cc.Node ],
prePlayCards: cc.Prefab,
hands: [],
preScore: cc.Prefab,
preCoin: cc.Prefab,
summaryPrefab: cc.Prefab,
debug: !0
},
onLoad: function() {
this.hands = [ null, null, null, null ];
this._queueGameMsg = [];
this._queueGameMsg = a.replayData;
this.msgCount = this._queueGameMsg.length;
this.speed = 1;
this.node.on(s.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
this.btnOperate[1].node.active = !1;
this.schedule(this.gameMsgSchedule.bind(this), .2);
cc.director.getScheduler().setTimeScale(this.speed);
},
resume: function() {
cc.director.getScheduler().resumeTarget(this);
this.btnOperate[0].node.active = !0;
this.btnOperate[1].node.active = !1;
},
pause: function() {
cc.director.getScheduler().pauseTarget(this);
this.btnOperate[0].node.active = !1;
this.btnOperate[1].node.active = !0;
},
quit: function() {
this.node.off(s.GameEventNames.REPLAY_BACK_HALL, this.quit, this);
a.replayData = [];
cc.director.getScheduler().setTimeScale(1);
cc.director.getScheduler().unscheduleAllForTarget(this);
this.node && this.node.destroy();
},
playSpeed: function(e, t) {
var n = parseInt(t);
this.speed = 1 == n ? this.speed - .2 : this.speed + .2;
this.speed > 1.6 && (this.speed = 1.6);
this.speed < .4 && (this.speed = .4);
this.lblSpeed.string = "当前速度: x" + this.speed.toFixed(1);
cc.director.getScheduler().setTimeScale(this.speed);
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else {
this.sprProgress.fillRange = 1 - this._queueGameMsg.length / this.msgCount;
if (!(this._queueGameMsg.length <= 0)) {
var e = this._queueGameMsg.shift();
this.node.getComponent("BgTableAudioCtr07");
switch (e.route) {
case n.SC_RECORD:
this.initTable(e.data);
break;

case n.SC_PLAY_CARD:
this.showBln(e.data.idx);
break;

case n.SC_SHOW_CARD:
this.showPlayCards(e.data);
break;

case n.SC_PASS_CARD:
this.showPass(e.data);
break;

case n.SC_SCORE:
this.scoreFly(e.data);
break;

case n.SC_ROUND_SUMMARY:
this.roundSummary(e.data);
}
}
}
},
initTable: function(e) {
e.turn = e.turn ? e.turn : 0;
r.idx = e.idx;
r.config = c;
r.current = e.current;
r.zhuang = e.zhuang;
var t = null;
e.players.forEach(function(e) {
e.prop.pid == i.player.id && (t = e.idx);
});
null == t && (t = e.players[0].idx);
r.idx = t;
var n = [ 0, 0, 0 ];
n[t] = 0;
n[(t + 1) % 3] = 1;
2 == r.config.person ? n[(t + 2) % 3] = 1 : n[(t + 2) % 3] = 2;
r.realIdx = n;
this.lblTurn.string = "第" + e.round + "局";
this.lblRoomId.string = "房间号: " + e.tableID;
this.initPlayers(e);
},
initPlayers: function(e) {
var t = this;
this.nodePlayerInfo = new Array(3);
r.players = new Array(3);
r.playerHead = new Array(3);
r.players = e.players;
e.players.forEach(function(e, n) {
if (null != e) {
var i = cc.instantiate(t.prePlayerInfo);
i.parent = t.bgTable;
var a = i.getComponent("ModulePlayerHead07");
a.init(e, n);
t.nodePlayerInfo[r.realIdx[e.idx]] = a;
t.initHands(e);
}
});
},
initHands: function(e) {
var t = r.realIdx[e.idx];
e.hands.sort(function(e, t) {
return e % 100 - t % 100;
});
this.hands[t] = e.hands;
this.hands[t].reverse();
this.nodeHands[t].getComponent("ReHands07").refreshHandCards(this.hands[t], !0);
},
showRule: function() {
this.nodeRule.active = !this.nodeRule.active;
},
roundSummary: function(e) {
var t = this;
r.zhuang = null;
e.winner == r.idx ? this.playManageAudio("audio_win.mp3") : this.playManageAudio("audio_lose.mp3");
this.node.runAction(cc.sequence(cc.delayTime(1.5), cc.callFunc(function() {
var n = cc.instantiate(t.summaryPrefab);
t.node.addChild(n, 2, "roundSummary");
n.getComponent("ModuleSummary07").initData(e, !0);
t.exitBtn.zIndex = 999;
e.players.forEach(function(e) {
t.nodePlayerInfo[r.realIdx[e.idx]].activeBaodan(!1);
t.nodePlayerInfo[r.realIdx[e.idx]].setScore(e.wallet);
t.nodePlayerInfo[r.realIdx[e.idx]].hideClock();
var n = cc.instantiate(t.prePlayCards);
n.scale = 1;
n.parent = t.dropCards[r.realIdx[e.idx]].node;
var i = JSON.parse(JSON.stringify(e.hands));
n.getComponent("LayoutShowCards07").initRemainCard(i);
});
})));
},
showPlayCards: function(e) {
var t = this, n = r.realIdx[e.idx];
r.current = null;
r.current = e;
this._delayTime = 4;
var i = cc.url.raw("resources/Audio/Common/playCard.mp3");
o.getInstance().playSFX(i);
this.dropCards.forEach(function(e, n) {
e.destroyAllChildren();
t.imgPass[n].active = !1;
});
this.nodePlayerInfo[n].activeAutoPlay(e.auto);
var a = cc.instantiate(this.prePlayCards);
0 == n && (a.scale = 1);
a.parent = this.dropCards[n];
a.getComponent("LayoutShowCards07").init(e);
this.bgTable.getComponent("BgTableAudioCtr07").playVoice(e, r.players[e.idx].prop.sex);
this.removeHands(e);
},
removeHands: function(e) {
var t = this, n = r.realIdx[e.idx];
e.cards.forEach(function(e) {
for (var i = 0; i < t.hands[n].length; i++) {
var a = t.hands[n].findIndex(function(t) {
return e == t;
});
if (a >= 0) {
t.hands[n].splice(a, 1);
return;
}
}
});
this.nodeHands[n].getComponent("ReHands07").refreshHandCards(this.hands[n], !0);
},
showPass: function(e) {
this._delayTime = 3;
this.bgTable.getComponent("BgTableAudioCtr07").PassVoice(1);
var t = this.imgPass[r.realIdx[e.idx]];
t.active = !0;
t.scale = 0;
t.runAction(cc.scaleTo(.2, 1));
},
showBln: function(e) {
this.nodePlayerInfo.forEach(function(e) {
return e.playCardLight(!1);
});
this.nodePlayerInfo[r.realIdx[e]].playCardLight(!0);
},
scoreFly: function(e) {
var t = this;
this.dropCards.forEach(function(e, n) {
e.removeAllChildren(!0);
t.bgCount[n].node.removeAllChildren(!0);
t.imgPass[n].active = !1;
});
e.from.length;
var n = cc.url.raw("resources/Audio/Common/addScore.mp3");
o.getInstance().playSFX(n);
r.realIdx[e.to[0].idx];
try {
this.nodePlayerInfo[r.realIdx[e.to[0].idx]].showBombScores(r.realIdx[e.to[0].idx], e.to[0].wallet, e.to[0].score, function() {});
e.from.forEach(function(e) {
t.nodePlayerInfo[r.realIdx[e.idx]].showBombScores(r.realIdx[e.idx], e.wallet, e.score);
});
} catch (e) {}
},
playManageAudio: function(e) {
var t = i.gameType < 10 ? "Game0" + i.gameType : "Game" + i.gameType;
if (cc.sys.isNative) {
var n = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + t + "/" + e;
cc.loader.load(n, function(e, t) {
o.getInstance().playSFX(t);
});
}
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/utils": "utils",
Cache: "Cache",
DataBase: "DataBase",
ROUTE: "ROUTE",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
ReplayBase: [ function(e, t) {
"use strict";
cc._RF.push(t, "b37f7F/orVOi5JvxKVbt/jN", "ReplayBase");
var n = e("ROUTE"), i = e("DataBase"), a = e("Cache");
e("TableInfo"), e("audio-ctrl");
cc.Class({
extends: cc.Component,
properties: {
speed: 1,
lblSpeed: cc.Label,
lblReplayTime: cc.Label,
imgProgress: cc.Sprite,
lblTime: cc.Label,
lblTurn: cc.Label,
lblTid: cc.Label,
lblRule: cc.Label
},
playManageAudio: function(t) {
var n = i.gameType < 10 ? "Game0" + i.gameType : "Game" + i.gameType;
if (cc.sys.isNative) {
var a = jsb.fileUtils.getWritablePath() + "remote-asset/Audio/" + n + "/" + t;
cc.loader.load(a, function(t, n) {
e("audio-ctrl").getInstance().playSFX(n);
});
}
},
resume: function() {
cc.log(cc.director.getScheduler().isScheduled(this.gameMsgSchedule, this));
cc.director.getScheduler().resumeTarget(this);
this.btnOperate[0].active = !0;
this.btnOperate[1].active = !1;
},
pause: function() {
cc.director.getScheduler().pauseTarget(this);
this.btnOperate[0].active = !1;
this.btnOperate[1].active = !0;
},
playSpeed: function(e, t) {
cc.director.getScheduler().isTargetPaused(this) && this.resume();
this.speed = "1" == t ? this.speed - .2 : this.speed + .2;
this.speed > 1.6 && (this.speed = 1.6);
this.speed < .4 && (this.speed = .4);
this.lblSpeed.string = "当前速度: x" + this.speed.toFixed(1);
cc.director.getScheduler().setTimeScale(this.speed);
},
quit: function() {
a.replayData = null;
cc.director.getScheduler().setTimeScale(1);
cc.director.getScheduler().unscheduleAllForTarget(this);
this.node && this.node.destroy();
var e = cc.find("Canvas/summarySelect");
e && e.destroy();
},
gameMsgSchedule: function() {
this.lblTime.string = new Date().format("hh:mm");
if (this._delayTime > 0) this._delayTime--; else if (!(this._queueGameMsg.length <= 0)) {
var e = this._queueGameMsg.shift();
this.imgProgress.fillRange = 1 - this._queueGameMsg.length / this.length;
cc.log(e.route);
switch (e.route) {
case "SC_RECORD":
this.record(e.data);
cc.log(e.data);
break;

case n.SC_ROUND_SUMMARY:
cc.log(e.data);
this.roundSummary(e.data);
break;

default:
this.otherMsg(e.data);
}
}
},
otherMsg: function() {},
record: function() {},
roundSummary: function() {}
});
cc._RF.pop();
}, {
Cache: "Cache",
DataBase: "DataBase",
ROUTE: "ROUTE",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
ReportPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "bae9abIp39L6INcVG+YoCxK", "ReportPop");
var n = e("../Main/NetWork/Connector"), i = e("../Main/Script/Cache"), a = e("../Main/Script/utils"), r = e("../script/ui/hall/data/App").App, o = e("./GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
reasonBox: cc.EditBox,
userName: cc.Label,
userID: cc.Label,
userData: null
},
initData: function(e) {
this.userData = e;
this.userName.string = "" + a.getStringByLength(e.prop.name, 6);
this.userID.string = "" + e.prop.pid;
},
onClickReport: function() {
i.playSfx();
this.onConfirmReport();
},
onConfirmReport: function() {
var e = this, t = this;
n.request(o.ServerEventName.ReportUser, {
clubID: r.Club.CurrentClubID,
suspectID: this.userData.prop.pid,
fileID: o.CurrentReplayData,
reason: this.reasonBox.string
}, function(n) {
if (n.confirmPop) i.showConfirm(n.message, function() {
t.ensureConfirm();
}); else {
i.alertTip("举报成功");
if (e.node) {
e.node.removeFromParent();
e.node.destroy();
}
}
});
},
ensureConfirm: function() {
var e = this;
n.request(o.ServerEventName.ReportUser, {
clubID: r.Club.CurrentClubID,
suspectID: this.userData.prop.pid,
fileID: o.CurrentReplayData,
reason: this.reasonBox.string,
confirm: 1
}, function() {
i.alertTip("举报成功");
if (e.node) {
e.node.removeFromParent();
e.node.destroy();
}
});
},
onClickClose: function() {
i.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../Main/NetWork/Connector": "Connector",
"../Main/Script/Cache": "Cache",
"../Main/Script/utils": "utils",
"../script/ui/hall/data/App": "App",
"./GameConfig": "GameConfig"
} ],
RewardPop: [ function(e, t) {
"use strict";
cc._RF.push(t, "d46ed2OI2xDZbcVw9mQEjHN", "RewardPop");
var n = e("../../Script/Cache");
cc.Class({
extends: cc.Component,
properties: {
rewardIcon: cc.Sprite,
rewardCount: cc.Label,
animNode: cc.Node,
rewardIconArr: [ cc.SpriteFrame ]
},
initData: function(e) {
var t = this;
setTimeout(function() {
t.animNode.active = !0;
}, 500);
this.rewardCount.string = e.prize / 100 + "元";
e.prize <= 3e4 && (this.rewardIcon.spriteFrame = this.rewardIconArr[3]);
e.prize <= 1e4 && (this.rewardIcon.spriteFrame = this.rewardIconArr[2]);
e.prize <= 5e3 && (this.rewardIcon.spriteFrame = this.rewardIconArr[1]);
e.prize <= 1e3 && (this.rewardIcon.spriteFrame = this.rewardIconArr[0]);
},
onClickClose: function() {
n.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
}
});
cc._RF.pop();
}, {
"../../Script/Cache": "Cache"
} ],
RewardTradeItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "8fa88X4vlZLnaxwQ3sVJEtB", "RewardTradeItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b = e("../../../GameBase/GameConfig"), y = T(e("../../../Main/NetWork/Connector")), S = T(e("../../../Main/Script/Cache")), _ = T(e("../../common/GameUtils"));
function T(e) {
return e && e.__esModule ? e : {
default: e
};
}
function E(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function A(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function I(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
N(e, t);
}
function N(e, t) {
return (N = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function w(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var D = {
alipay: "支付宝",
wechat: "微信"
}, P = cc._decorator, M = P.ccclass, x = P.property, O = (i = x(cc.Label), a = x(cc.Label), 
r = x(cc.Node), o = x(cc.Node), s = x(cc.Node), c = x(cc.Node), l = x(cc.Prefab), 
M(u = (d = function(e) {
I(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
E(t = e.call.apply(e, [ this ].concat(i)) || this, "lblDesc", h, A(t));
E(t, "lblAmount", f, A(t));
E(t, "alipayIcon", p, A(t));
E(t, "wechatIcon", m, A(t));
E(t, "bankIcon", g, A(t));
E(t, "animNode", v, A(t));
E(t, "tradeInfoPop", C, A(t));
return t;
}
var n = t.prototype;
n.initData = function(e) {
var t = this;
this.startAnim();
this.lblDesc.string = e.reward / 100 + "元";
this.lblAmount.string = e.amount / 100 + "元";
this[e.paytype + "Icon"].active = !0;
this.node.on(cc.Node.EventType.TOUCH_END, function() {
var n = "交易金额: " + e.amount / 100 + "元\n\n   付款方式: " + D[e.paytype];
S.default.showConfirm(n, function() {
y.default.request(b.GameConfig.ServerEventName.OTCCreateTrade, {
tradeType: e.tradeType,
payType: e.paytype,
amount: e.amount
}, function(e) {
if (_.default.getValue(b.GameConfig.StorageKey.CreateTrade, !1)) {
var n = cc.instantiate(t.tradeInfoPop);
n.getComponent("TradeInfoPage").downloadTrades(e.trade.id);
cc.find("Canvas").addChild(n);
} else S.default.showTipsMsg("仔细核对对方收款账户信息,避免转错账户,（请保留付款凭证,作为申诉依据）", function() {
var n = cc.instantiate(t.tradeInfoPop);
n.getComponent("TradeInfoPage").downloadTrades(e.trade.id);
cc.find("Canvas").addChild(n);
}, b.GameConfig.StorageKey.CreateTrade);
}, !0, function(e) {
S.default.alertTip(e.message || "购买失败");
});
});
}, this);
};
n.startAnim = function() {
this.animNode.stopAllActions();
var e = cc.scaleTo(.8, 1.1), t = cc.scaleTo(.8, 1), n = cc.sequence(e, t), i = cc.repeatForever(n);
this.animNode.runAction(i);
};
return t;
}(cc.Component), h = w(d.prototype, "lblDesc", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = w(d.prototype, "lblAmount", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), p = w(d.prototype, "alipayIcon", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = w(d.prototype, "wechatIcon", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = w(d.prototype, "bankIcon", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = w(d.prototype, "animNode", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = w(d.prototype, "tradeInfoPop", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d)) || u);
n.default = O;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils"
} ],
RobotPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "81b266TW6BBbKus0ZCU2p0U", "RobotPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d = e("../../../GameBase/GameConfig"), h = m(e("../../../Main/NetWork/Connector")), f = m(e("../../../Main/Script/Cache")), p = e("./data/App");
function m(e) {
return e && e.__esModule ? e : {
default: e
};
}
function g(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function v(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function C(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
b(e, t);
}
function b(e, t) {
return (b = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function y(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var S = cc._decorator, _ = S.ccclass, T = S.property, E = (i = T(cc.Node), a = T(cc.Prefab), 
r = T(cc.Label), _(o = (s = function(e) {
C(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
g(t = e.call.apply(e, [ this ].concat(i)) || this, "itemContent", c, v(t));
g(t, "itemPre", l, v(t));
g(t, "lblRoom", u, v(t));
t.currentRoomID = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
this.refreshUI();
};
n.addEvents = function() {
p.App.EventManager.addEventListener(d.GameConfig.GameEventNames.ROBOT_SELECT_ROOM, this.selectRoom, this);
};
n.removeEvents = function() {
p.App.EventManager.removeEventListener(d.GameConfig.GameEventNames.ROBOT_SELECT_ROOM, this.selectRoom, this);
};
n.selectRoom = function(e) {
this.lblRoom.string = "操作房型: " + e.data.name;
this.currentRoomID = e.data.roomID;
};
n.refreshUI = function() {
var e = this;
this.itemContent.removeAllChildren();
d.GameConfig.TableAllRooms.forEach(function(t) {
var n = cc.instantiate(e.itemPre);
n.getComponent("TableRoomBtn").robotInit(t);
e.itemContent.addChild(n);
});
};
n.changeTable = function(e, t) {
f.default.playSfx();
this.currentRoomID && h.default.request(d.GameConfig.ServerEventName.Robot, {
roomID: this.currentRoomID,
clubID: p.App.Club.CurrentClubID,
operate: parseInt(t)
}, function() {
f.default.alertTip("操作成功");
}, !0, function(e) {
f.default.alertTip(e.message || "操作失败");
});
};
n.onClickClose = function() {
f.default.playSfx();
this.removeEvents();
this.node.removeFromParent();
this.node.destroy();
};
return t;
}(cc.Component), c = y(s.prototype, "itemContent", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = y(s.prototype, "itemPre", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = y(s.prototype, "lblRoom", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = E;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"./data/App": "App"
} ],
RoomListItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "77e0a6GMsJOw4GnLSgzGGTG", "RoomListItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T = e("../../../GameBase/GameConfig"), E = D(e("../../../Main/NetWork/Connector")), A = D(e("../../../Main/Script/Cache")), I = D(e("../../common/GameUtils")), N = D(e("../common/CompListRenderer")), w = e("./data/App");
function D(e) {
return e && e.__esModule ? e : {
default: e
};
}
function P(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function M(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function x(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
O(e, t);
}
function O(e, t) {
return (O = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function G(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var R = cc._decorator, k = R.ccclass, L = R.property, B = (i = L(cc.Label), a = L(cc.Label), 
r = L(cc.EditBox), o = L(cc.Label), s = L(cc.Label), c = L(cc.Label), l = L(cc.Label), 
u = L(cc.Label), d = L(cc.Label), k(h = (f = function(e) {
x(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
P(t = e.call.apply(e, [ this ].concat(i)) || this, "lblXlh", p, M(t));
P(t, "lblGameName", m, M(t));
P(t, "lblRoomName", g, M(t));
P(t, "lblPerson", v, M(t));
P(t, "lblBase", C, M(t));
P(t, "lblFee", b, M(t));
P(t, "lblLower", y, M(t));
P(t, "lblBird", S, M(t));
P(t, "lblShuffle", _, M(t));
t.roomID = null;
t.roomData = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {};
n.refreshUI = function() {
e.prototype.refreshUI.call(this);
this.data && this.initData(this.data);
};
n.initData = function(e) {
this.roomData = e;
this.roomID = e.roomID;
this.lblXlh.string = e.index;
this.lblGameName.string = T.GameConfig.GameName[e.gameType];
this.lblRoomName.string = e.name;
this.lblPerson.string = e.person + "人场";
this.lblBase.string = I.default.formatGold(e.base);
this.lblFee.string = I.default.formatGold(e.fee);
this.lblLower.string = I.default.formatGold(e.lower);
this.lblBird.string = I.default.formatGold(e.bird);
this.lblShuffle.string = I.default.formatGold(e.shuffle);
};
n.onInputBase = function() {
var e = this;
A.default.playSfx();
A.default.showNumer("请输入底分", T.GameConfig.NumberType.FLOAT, function(t) {
e.lblBase.string = "" + t;
});
};
n.onInputFee = function() {
var e = this;
A.default.playSfx();
A.default.showNumer("请输入抽水金额", T.GameConfig.NumberType.FLOAT, function(t) {
e.lblFee.string = "" + t;
});
};
n.onInputLower = function() {
var e = this;
A.default.playSfx();
A.default.showNumer("请输入限入金额", T.GameConfig.NumberType.FLOAT, function(t) {
e.lblLower.string = "" + t;
});
};
n.onInputNiao = function() {
var e = this;
A.default.playSfx();
A.default.showNumer("请输入打鸟金额", T.GameConfig.NumberType.FLOAT, function(t) {
e.lblBird.string = "" + t;
});
};
n.onInputShuffle = function() {
var e = this;
A.default.playSfx();
A.default.showNumer("请输入洗牌金额", T.GameConfig.NumberType.FLOAT, function(t) {
e.lblShuffle.string = "" + t;
});
};
n.onChangeRoom = function() {
A.default.playSfx();
var e = {
clubID: w.App.Club.CurrentClubID,
name: this.lblRoomName.string,
roomID: this.roomData.roomID,
gameType: this.roomData.gameType,
base: parseInt(100 * parseFloat(this.lblBase.string)),
fee: parseInt(100 * parseFloat(this.lblFee.string)),
lower: parseInt(100 * parseFloat(this.lblLower.string)),
bird: parseInt(100 * parseFloat(this.lblBird.string)),
shuffle: parseInt(100 * parseFloat(this.lblShuffle.string)),
person: this.roomData.person
};
E.default.request(T.GameConfig.ServerEventName.CreateRoom, e, function() {
A.default.alertTip("修改成功");
w.App.EventManager.dispatchEventWith(T.GameConfig.GameEventNames.CLUB_ROOM_CHANGE);
}, !0, function(e) {
A.default.alertTip(e.message || "修改失败");
});
};
n.onDeleteRoom = function() {
var e = this;
A.default.playSfx();
E.default.request(T.GameConfig.ServerEventName.DeleteRoom, {
clubID: w.App.Club.CurrentClubID,
roomID: this.roomID
}, function() {
A.default.alertTip("成功删除");
w.App.EventManager.dispatchEventWith(T.GameConfig.GameEventNames.CLUB_ROOM_CHANGE);
e.node.destroy();
}, !0, function(e) {
A.default.alertTip(e.message || "删除失败");
});
};
return t;
}(N.default), p = G(f.prototype, "lblXlh", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), m = G(f.prototype, "lblGameName", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), g = G(f.prototype, "lblRoomName", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), v = G(f.prototype, "lblPerson", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), C = G(f.prototype, "lblBase", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), b = G(f.prototype, "lblFee", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), y = G(f.prototype, "lblLower", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), S = G(f.prototype, "lblBird", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _ = G(f.prototype, "lblShuffle", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f)) || h);
n.default = B;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils",
"../common/CompListRenderer": "CompListRenderer",
"./data/App": "App"
} ],
RoomTagItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "1eaa9Fm82tJSb+Z9uDO1jAN", "RoomTagItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d = e("../../../GameBase/GameConfig");
e("./data/App");
function h(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function f(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function p(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
m(e, t);
}
function m(e, t) {
return (m = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function g(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var v = cc._decorator, C = v.ccclass, b = v.property, y = (i = b(cc.Label), a = b(cc.Node), 
r = b(cc.Prefab), C(o = (s = function(e) {
p(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
h(t = e.call.apply(e, [ this ].concat(i)) || this, "desc", c, f(t));
h(t, "tagContent", l, f(t));
h(t, "tagItem", u, f(t));
return t;
}
t.prototype.renderUI = function(e, t) {
var n = this;
this.desc.string = d.GameConfig.GameName[e] + ":";
this.tagContent.removeAllChildren();
t.forEach(function(e) {
var t = cc.instantiate(n.tagItem);
t.getComponent("RoomToggle").initDate(e);
n.tagContent.addChild(t);
});
};
return t;
}(cc.Component), c = g(s.prototype, "desc", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = g(s.prototype, "tagContent", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = g(s.prototype, "tagItem", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = y;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"./data/App": "App"
} ],
RoomToggle: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "59c6dWdxUJGiY7F7eD4V5cv", "RoomToggle");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p = e("../../../GameBase/GameConfig"), m = (i = e("../../../Main/Script/Cache")) && i.__esModule ? i : {
default: i
}, g = e("./data/App");
function v(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function C(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function b(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
y(e, t);
}
function y(e, t) {
return (y = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function S(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var _ = cc._decorator, T = _.ccclass, E = _.property, A = (a = E(cc.Toggle), r = E(cc.Label), 
o = E(cc.Label), s = E(cc.Label), T(c = (l = function(e) {
b(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
v(t = e.call.apply(e, [ this ].concat(i)) || this, "selfToggel", u, C(t));
v(t, "lblRoomName", d, C(t));
v(t, "lblLower", h, C(t));
v(t, "lblFee", f, C(t));
t.currentData = null;
return t;
}
var n = t.prototype;
n.initDate = function(e) {
var t = this;
this.currentData = e;
this.lblRoomName.string = "" + e.name;
this.lblLower.string = "" + e.lower;
this.lblFee.string = "" + e.fee;
this.selfToggel.isChecked = e.choose;
this.selfToggel.node.on(cc.Node.EventType.TOUCH_END, function() {
setTimeout(function() {
t.selfToggel.isChecked ? g.App.EventManager.dispatchEventWith(p.GameConfig.GameEventNames.SELECT_TAG_HISTORY, t.currentData) : g.App.EventManager.dispatchEventWith(p.GameConfig.GameEventNames.CANCEL_TAG_HISTORY, t.currentData);
}, 300);
}, this);
};
n.onInputFee = function() {
var e = this;
m.default.playSfx();
m.default.showNumer("请输入房费", p.GameConfig.NumberType.FLOAT, function(t) {
e.lblFee.string = "" + t;
e.currentData.fee = t;
e.selfToggel.isChecked ? g.App.EventManager.dispatchEventWith(p.GameConfig.GameEventNames.SELECT_TAG_HISTORY, e.currentData) : g.App.EventManager.dispatchEventWith(p.GameConfig.GameEventNames.CANCEL_TAG_HISTORY, e.currentData);
});
};
n.onInputLower = function() {
var e = this;
m.default.playSfx();
m.default.showNumer("请输入最低积分限制", p.GameConfig.NumberType.FLOAT, function(t) {
e.lblLower.string = "" + t;
e.currentData.lower = t;
e.selfToggel.isChecked ? g.App.EventManager.dispatchEventWith(p.GameConfig.GameEventNames.SELECT_TAG_HISTORY, e.currentData) : g.App.EventManager.dispatchEventWith(p.GameConfig.GameEventNames.CANCEL_TAG_HISTORY, e.currentData);
});
};
return t;
}(cc.Component), u = S(l.prototype, "selfToggel", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = S(l.prototype, "lblRoomName", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), h = S(l.prototype, "lblLower", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), f = S(l.prototype, "lblFee", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l)) || c);
n.default = A;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"./data/App": "App"
} ],
SceneHall: [ function(e, t) {
"use strict";
cc._RF.push(t, "a10acNPaIZDWb76yFFd47r9", "SceneHall");
var n = e("../Script/DataBase"), i = e("audio-ctrl"), a = e("../Script/Cache"), r = (e("../NetWork/Connector"), 
e("native-extend")), o = e("../Script/utils"), s = e("../../GameBase/GameConfig").GameConfig, c = e("../NetWork/Connector"), l = e("../../script/base/pop/PopupManager").PopupManager, u = e("../../script/ui/hall/data/App").App, d = (e("../../script/common/GameUtils").default, 
e("./native-extend").Social, r.Social);
cc.Class({
extends: e("HallBase"),
properties: {
lblVersion: cc.Label,
sprHead: e("../../script/ui/common/Avatar"),
lblName: cc.Label,
lblLeagueScore: cc.Label,
lblClubScore: cc.Label,
lblId: cc.Label,
lblNotice: cc.Label,
speed: {
default: 100,
tips: "广播的速度"
},
DLMBtn: cc.Node,
clubBtn: cc.Node,
noClubInfo: cc.Node,
clubInfo: cc.Node,
lblClubName: cc.Label,
lblClubID: cc.Label,
lblClubRole: cc.Label,
lblClubUserCount: cc.Label,
lblClubOLCount: cc.Label,
infoNode: cc.Node,
adminNode: cc.Node,
tradeBtn: cc.Node,
updateBtn: cc.Node,
settingBtn: cc.Node,
infoBtn: cc.Node,
noticeNode: cc.Node,
updateWalletTime: 0
},
onLoad: function() {
o.fitScreen();
this.addEvents();
},
start: function() {
n.loadGameType();
this.init();
this.initHallBase();
},
init: function() {
u.lockScene();
s.IsConnecting = !1;
this.refreshPlayerData();
this.initBGM();
this.initNotice();
var e = cc.find("lblSchedule");
e && e.getComponent(cc.Label).unscheduleAllCallbacks();
cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_ANDROID && (cc.gameVersion = s.DefaultVersion);
null == cc.gameVersion && (cc.gameVersion = s.DefaultVersion);
this.lblVersion.string = "版本号: " + cc.gameVersion;
},
addEvents: function() {
u.EventManager.addEventListener(s.GameEventNames.CLUB_CHANGE, this.changeClubInfo, this);
u.EventManager.addEventListener(s.GameEventNames.UPDATE_HALL_CLUB, this.updateClubInfo, this);
this.DLMBtn.on(cc.Node.EventType.TOUCH_END, this.showDLM, this);
this.settingBtn.on(cc.Node.EventType.TOUCH_END, this.onClickSetting, this);
this.infoBtn.on(cc.Node.EventType.TOUCH_END, this.onClickInfo, this);
this.updateBtn.on(cc.Node.EventType.TOUCH_END, this.onClickRefresh, this);
this.lblId.node.on(cc.Node.EventType.TOUCH_END, this.copyId, this);
this.node.on(s.GameEventNames.PLAYER_DATA_UPDATE, this.initPlayer, this);
},
removeEvents: function() {
u.EventManager.removeEventListener(s.GameEventNames.CLUB_CHANGE, this.changeClubInfo, this);
u.EventManager.removeEventListener(s.GameEventNames.UPDATE_HALL_CLUB, this.updateClubInfo, this);
this.DLMBtn.off(cc.Node.EventType.TOUCH_END, this.showDLM, this);
this.settingBtn.off(cc.Node.EventType.TOUCH_END, this.onClickSetting, this);
this.infoBtn.off(cc.Node.EventType.TOUCH_END, this.onClickInfo, this);
this.updateBtn.off(cc.Node.EventType.TOUCH_END, this.onClickRefresh, this);
this.node.off(s.GameEventNames.PLAYER_DATA_UPDATE, this.initPlayer, this);
},
showBill: function() {
this.bill.showBill();
},
exitGame: function() {
a.showConfirm("是否退出游戏", function() {
cc.game.end();
});
},
initNotice: function() {
var e = this;
if (!o.isNullOrEmpty(s.GameInfo.gameNotice)) {
this.noticeNode.active = !0;
this.lblNotice.string = s.GameInfo.gameNotice;
setTimeout(function() {
if (e.lblNotice) {
e.lblNotice.node.stopAllActions();
var t = e.lblNotice.node.width + e.lblNotice.node.parent.width, n = cc.place(cc.v2(e.lblNotice.node.parent.width / 2, 0)), i = cc.moveBy(t / e.speed, cc.v2(-t, 0)), a = cc.sequence(n, i), r = cc.repeatForever(a);
e.lblNotice.node.runAction(r);
}
}, 100);
}
},
initBGM: function() {
var e = cc.url.raw("resources/Audio/Common/HallMusic.mp3");
i.getInstance().playBGM(e);
},
refreshPlayerData: function() {
var e = this;
c.request(s.ServerEventName.GetPlayerInfo, {}, function(t) {
a.hideMask();
t.ts && (s.ServerTimeDiff = t.ts - new Date().getTime());
t.player.hasBind && o.saveValue(s.StorageKey.UserAccount, t.player.phone);
o.saveValue(s.StorageKey.UserLoginTime, parseInt(new Date().getTime() / 1e3));
o.isNullOrEmpty(t.xhzdConfig) || (s.xhzdConfig = t.xhzdConfig);
s.RewardConfig = o.isNullOrEmpty(t.rewardConfig) ? [] : t.rewardConfig;
e.adminNode.active = t.isSuperUser;
t.player.isSuperUser = t.isSuperUser;
o.isNullOrEmpty(t.ad) ? s.AdData = {} : s.AdData = t.ad;
o.isNullOrEmpty(t.inviteData) ? s.InviteList = [] : s.InviteList = t.inviteData;
o.isNullOrEmpty(t.questionnaire) ? s.QuestData = {} : s.QuestData = t.questionnaire;
o.isNullOrEmpty(t.clubs) || u.Club.initClubData(t.clubs);
n.player = t.player;
n.connectInfo = t.connectInfo;
e.initPlayer();
if (o.isNullOrEmpty(t.connectInfo)) if (s.IsQuickStart) {
s.IsQuickStart = !1;
e.newMatchEnter();
} else {
u.unlockScene();
if (t.matchInfo) o.pop(s.pop.MatchPop, function(e) {
e.getComponent("ModuleMatchPop").resumeMatch(t);
}); else if (s.ShowTablePop && -1 != u.Club.CurrentClubID) {
s.ShowTablePop = !1;
o.pop(s.pop.TablePop);
}
} else c.connect(t.connectInfo, function() {
s.CurrentGameType = t.connectInfo.data.gameType;
n.setGameType(n.GAME_TYPE[t.connectInfo.data.gameType]);
cc.director.loadScene(n.TABLE_TYPE[t.connectInfo.data.gameType]);
});
}, !0, function(e) {
u.unlockScene();
o.isNullOrEmpty(e.status) || 700 != e.status.code ? a.showTipsMsg(o.isNullOrEmpty(e.message) ? "长时间未登录，密码失效，请重新登录" : e.message, function() {
cc.director.loadScene("Login");
}) : a.showTipsMsg(o.isNullOrEmpty(e.message) ? "版本号错误" : e.message, function() {
cc.director.loadScene("Update");
});
});
},
initPlayer: function() {
this.lblName.string = o.getStringByLength(n.player.name, 8);
this.lblId.string = "ID: " + n.player.id;
this.sprHead.avatarUrl = n.player.head;
this.lblLeagueScore.string = "" + n.player.card;
this.lblClubScore.string = "" + n.player.diamond;
this.changeClubInfo();
},
newMatchEnter: function() {
var e = {
isAgain: !0,
roomID: "",
gameType: "",
tableID: "",
clubID: u.Club.CurrentClubID,
isQuick: !0
};
c.request(s.ServerEventName.JoinClubGame, e, function(e) {
s.ShowTablePop = !0;
c.connect(e, function() {
s.CurrentGameType = e.data.gameType;
n.setGameType(n.GAME_TYPE[e.data.gameType]);
cc.director.loadScene(n.TABLE_TYPE[e.data.gameType]);
});
}, !0, function(e) {
a.showTipsMsg(e.message || "进入游戏失败");
});
},
onClickSetting: function() {
a.playSfx();
o.pop(s.pop.SettingPop);
},
onClickShare: function() {
a.playSfx();
o.pop(s.pop.SharePop);
},
onClickAdmin: function() {
a.playSfx();
o.pop(s.pop.AdminManagerPop);
},
ShowGiveScore: function() {
a.playSfx();
o.pop(s.pop.GiveScorePop);
},
onClickInfo: function() {
a.playSfx();
o.pop(s.pop.SettingPop);
},
onClickActive: function() {
a.playSfx();
o.pop(s.pop.ClubListPop, function(e) {
e.getComponent("ClubListPop").renderClub();
});
},
onClickUpdate: function() {
a.playSfx();
o.pop(s.pop.ActivePop);
},
onClickCreate: function() {
a.playSfx();
o.pop(s.pop.CreateClubPop);
},
onClickHistory: function() {
cc.loader.loadRes("Main/HZMJ_146841_YH362QN5_1_1", function(e, t) {
console.log("本地链接", JSON.stringify(t.json));
var n = t.json;
a.replayData = n.concat();
console.log("回放数据: ", n);
if (null != n) {
s.CurrentReplayData = "20240325/HZMJ_146841_YH362QN5_1_1";
cc.loader.loadRes("Main/Prefab/replay16", function(e, t) {
e ? cc.log("error to load replay") : cc.instantiate(t).parent = cc.find("Canvas");
});
} else a.alertTip("暂无回放");
});
},
showClub: function() {
a.playSfx();
o.pop(s.pop.ClubListPop, function(e) {
e.getComponent("ClubListPop").renderLeague();
});
},
onClickFund: function() {
a.playSfx();
l.show(s.pop.ActiveCenterPop);
},
showDLM: function() {
a.playSfx();
-1 != u.Club.CurrentClubID ? o.pop(s.pop.TablePop) : a.alertTip("没有加入公会");
},
changeClubInfo: function() {
if (-1 == u.Club.CurrentClubID || o.isNullOrEmpty(u.Club.CurrentClubData)) {
this.noClubInfo.active = !0;
this.clubInfo.active = !1;
} else {
console.log("App.Club.CurrentClubData: ", u.Club.CurrentClubData);
this.noClubInfo.active = !1;
this.clubInfo.active = !0;
this.lblClubName.string = "类型: " + (1 == u.Club.CurrentClubData.club.isLeague ? "联盟" : "公会");
this.lblClubID.string = "" + u.Club.CurrentClubData.club.name;
this.lblClubRole.string = "ID: " + u.Club.CurrentClubID;
this.lblClubUserCount.string = "我的身份: " + s.ROLE_DESC[u.Club.CurrentClubData.role];
this.lblClubOLCount.string = "人数: " + u.Club.CurrentClubData.peoples;
}
},
onClickRefresh: function() {
a.playSfx();
var e = o.getTimeStamp();
if (!(e - this.updateWalletTime < 3e3)) {
this.updateWalletTime = e;
this.refreshPlayerData();
}
},
copyId: function() {
a.playSfx();
a.alertTip("id复制成功");
d.setCopy("" + n.player.id);
},
updateClubInfo: function() {
var e = this;
console.log("---刷新公会----");
c.request(s.ServerEventName.GetPlayerInfo, {}, function(t) {
t.ts && (s.ServerTimeDiff = t.ts - new Date().getTime());
t.player.hasBind && o.saveValue(s.StorageKey.UserAccount, t.player.phone);
o.saveValue(s.StorageKey.UserLoginTime, parseInt(new Date().getTime() / 1e3));
o.isNullOrEmpty(t.xhzdConfig) || (s.xhzdConfig = t.xhzdConfig);
s.RewardConfig = o.isNullOrEmpty(t.rewardConfig) ? [] : t.rewardConfig;
o.isNullOrEmpty(t.ad) ? s.AdData = {} : s.AdData = t.ad;
o.isNullOrEmpty(t.inviteData) ? s.InviteList = [] : s.InviteList = t.inviteData;
o.isNullOrEmpty(t.questionnaire) ? s.QuestData = {} : s.QuestData = t.questionnaire;
o.isNullOrEmpty(t.clubs) || u.Club.initClubData(t.clubs);
n.player = t.player;
n.connectInfo = t.connectInfo;
e.initPlayer();
});
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/base/pop/PopupManager": "PopupManager",
"../../script/common/GameUtils": "GameUtils",
"../../script/ui/common/Avatar": "Avatar",
"../../script/ui/hall/data/App": "App",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/utils": "utils",
"./native-extend": "native-extend",
HallBase: "HallBase",
"audio-ctrl": "audio-ctrl",
"native-extend": "native-extend"
} ],
SceneHotUpdate: [ function(e, t) {
"use strict";
cc._RF.push(t, "5a624bDI2xFEb+eKZRafwx9", "SceneHotUpdate");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("../NetWork/Connector"), a = e("./utils"), r = e("./Cache"), o = e("../Script/native-extend").Social, s = e("../Script/DataBase"), c = e("../NetWork/Connector"), l = e("./jsencrypt"), u = e("./SelectLink").SelectLink;
e("../../script/ui/hall/data/App").App;
cc.Class({
extends: cc.Component,
properties: {
manifestUrl: {
default: null,
type: cc.Asset
},
bar: cc.Sprite,
lblMsg: cc.Label,
inputContent: cc.Node,
urlInput: cc.EditBox,
btnRestart: cc.Node,
_updating: !1,
_canRetry: !1,
_storagePath: "",
spriteProgress: 0,
serverProgress: 0
},
onLoad: function() {
var e = this;
n.enableLog = cc.sys.isBrowser;
this.scheduleOnce(function() {
e._hideNativeSplash();
n.DeviceID = "" + o.getUUID();
n.DeviceIDFA = "" + o.getIDFA();
e.lblMsg.string = "正在选择最优线路";
e.selectLink = new u(e.onLoadSprite.bind(e), e.changeHotUrl.bind(e));
}, 1);
this.loadInfoTimes = 0;
cc.sys.isNative && this.mainAudioVersion();
},
compareVersion: function(e, t) {
if ("" == e) return -1;
for (var n = e.split("."), i = t.split("."), a = 0; a < n.length; ++a) {
var r = parseInt(n[a]), o = parseInt(i[a] || 0);
if (r !== o) return r - o;
}
return i.length > n.length ? -1 : 0;
},
mainAudioVersion: function() {
var e = this, t = n.ConfigUrl + "update_media/mediaMain.json";
c.get(t, "getJson", function(t) {
for (var n = 0; n < t.length; n++) {
var i = s.getString(s.STORAGE_KEY.AUDIO_VERSION[t[n].game]);
console.log("cse audioVersion", i);
console.log("cse resData[i].game", t[n].game);
console.log("cse db.STORAGE_KEY.AUDIO_VERSION[resData[i].game]", s.STORAGE_KEY.AUDIO_VERSION[t[n].game]);
var a = e.compareVersion(i, t[n].version);
0 == a || a > 0 || s.setString(s.STORAGE_KEY.AUDIO_VERSION[t[n].game], t[n].version);
}
}, !0, null);
},
_hideNativeSplash: function() {
cc.sys.os == cc.sys.OS_ANDROID && jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity", "hideSplash", "()V");
},
onLoadSprite: function() {
var e = this;
cc.director.preloadScene("Login");
cc.director.preloadScene("Lobby");
this.lblMsg.string = "正在加载资源";
this.spriteProgress = 0;
this.bar.fillRange = 0;
var t = 1001;
for (var i in n.ServerEventName) {
n.ErrorCode[n.ServerEventName[i]] = "" + t;
t++;
}
console.log("GameConfig.ErrorCode", n.ErrorCode);
for (var a = function(t) {
cc.loader.loadResDir("hallBg/bgTable" + t, cc.SpriteFrame, function(i, a) {
if (!i) {
n.tableBgSprite[t] = a[0];
e.onLoadSpriteProgress(1 / 7);
}
});
}, r = 0; r < 2; r++) a(r);
cc.loader.loadResDir("head/touxiang", cc.SpriteAtlas, function(t, i) {
if (!t) {
n.AvatartAtlas = i[0];
e.onLoadSpriteProgress(1 / 7);
}
});
cc.loader.loadResDir("Audio/porket_card", cc.SpriteAtlas, function(t, i) {
if (!t) {
n.PorketAtlas = i[0];
e.onLoadSpriteProgress(1 / 7);
}
});
for (var o = function(t) {
cc.loader.loadResDir("GameBase/0" + t, cc.SpriteFrame, function(i, a) {
if (!i) {
n.WiFiSprite[t] = a[0];
e.onLoadSpriteProgress(1 / 7);
}
});
}, s = 1; s <= 3; s++) o(s);
},
onLoadSpriteProgress: function(e) {
var t = this;
this.spriteProgress += e;
this.bar.fillRange = this.spriteProgress;
this.spriteProgress >= .99 && this.scheduleOnce(function() {
t.lblMsg.string = "正在选择更新线路";
cc.sys.isBrowser ? t.onUpdateProgress() : t.selectLink.selectHot();
}, 1);
},
selectLinkUrl: function() {
i.logicUrl = "http://" + this.urlInput.string + "/";
this.getGameInfo();
},
changeHotUrl: function(e) {
"" == e ? this.onUpdateProgress("") : this.handleUpdateFail(e);
},
handleUpdateFail: function(e) {
var t = this;
if (n.IsDebug || cc.sys.isBrowser) this.onUpdateProgress(""); else {
var i = this.manifestUrl.nativeUrl;
cc.loader.md5Pipe && (i = cc.loader.md5Pipe.transformURL(i));
this.modifyAppLoadUrlForManifestFile(e, i, function(e) {
t.onUpdateProgress(e);
});
}
},
modifyAppLoadUrlForManifestFile: function(e, t, n) {
try {
this._storagePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : "/") + "remote-asset";
if (jsb.fileUtils.isFileExist(jsb.fileUtils.getWritablePath() + "remote-asset/project.manifest")) {
console.log("有下载的manifest文件");
var i = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : "/") + "remote-asset", a = jsb.fileUtils.getStringFromFile(i + "/project.manifest"), r = JSON.parse(a);
r.packageUrl = e;
r.remoteManifestUrl = r.packageUrl + "project.manifest";
r.remoteVersionUrl = r.packageUrl + "version.manifest";
var o = JSON.stringify(r);
jsb.fileUtils.writeStringToFile(o, i + "/project.manifest") && cc.sys.localStorage.setItem("appHotUpdateUrl", e);
n(i + "/project.manifest");
} else {
console.log("不存在project.manifest");
var s = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : "/") + "remote-asset";
jsb.fileUtils.isDirectoryExist(s) || jsb.fileUtils.createDirectory(s);
var c = t, l = jsb.fileUtils.getStringFromFile(c), u = JSON.parse(l);
u.packageUrl = e;
u.remoteManifestUrl = u.packageUrl + "project.manifest";
u.remoteVersionUrl = u.packageUrl + "version.manifest";
var d = JSON.stringify(u);
jsb.fileUtils.writeStringToFile(d, s + "/project.manifest") && cc.sys.localStorage.setItem("appHotUpdateUrl", e);
n(s + "/project.manifest");
}
} catch (e) {
console.log("读写manifest文件错误!!!(请看错误详情--\x3e) ", e);
}
},
onUpdateProgress: function(e) {
this.btnRestart.active = !1;
this.lblMsg.string = "正在检测版本更新";
if (cc.sys.isNative) {
this._storagePath = (jsb.fileUtils ? jsb.fileUtils.getWritablePath() : "/") + "remote-asset";
this._am && (this._am = null);
this._am = new jsb.AssetsManager(e, this._storagePath, function(e, t) {
cc.gameVersion = e;
for (var n = e.split("."), i = t.split("."), a = 0; a < n.length; ++a) {
var r = parseInt(n[a]), o = parseInt(i[a] || 0);
if (r !== o) return r - o;
}
return i.length > n.length ? -1 : 0;
});
this._am.setVerifyCallback(function(e, t) {
t.compressed, t.md5, t.path;
return !0;
});
this.lblMsg.string = "检测更新";
cc.sys.os === cc.sys.OS_ANDROID && this._am.setMaxConcurrentTask(2);
this.bar.fillRange = 0;
this.checkUpdate();
} else {
console.log("设备id: ", n.DeviceID);
this.getGameInfo();
}
},
checkUpdate: function() {
if (this._updating) this.lblMsg.string = "正在检测版本"; else {
if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {
var e = this.manifestUrl.nativeUrl;
cc.loader.md5Pipe && (e = cc.loader.md5Pipe.transformURL(e));
this._am.loadLocalManifest(e);
}
if (this._am.getLocalManifest() && this._am.getLocalManifest().isLoaded()) {
this._am.setEventCallback(null);
this._am.setEventCallback(this.checkCb.bind(this));
this._am.checkUpdate();
this._updating = !0;
} else {
this.lblMsg.string = "下载更新文件失败";
this.btnRestart.active = !0;
}
}
},
restartGame: function() {
cc.audioEngine.stopAll();
cc.game.restart();
},
loadGame: function() {
o.openUrl("http://down.xyhldqp.com/download/index.html");
},
checkCb: function(e) {
console.log("checkCode--------------: " + e.getEventCode());
var t = !1;
switch (e.getEventCode()) {
case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
this.lblMsg.string = "本地文件读取失败";
this.btnRestart.active = !0;
break;

case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:
this.lblMsg.string = "下载版本文件失败";
this.btnRestart.active = !0;
break;

case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
this.lblMsg.string = "已更新至最新版本";
this.getGameInfo();
break;

case jsb.EventAssetsManager.NEW_VERSION_FOUND:
this.lblMsg.string = "发现新版本,正在更新";
this.bar.fillRange = 0;
t = !0;
break;

default:
return;
}
this._am.setEventCallback(null);
this._checkListener = null;
this._updating = !1;
t && this.hotUpdate();
},
hotUpdate: function() {
if (this._am && !this._updating) {
this._am.setEventCallback(this.updateCb.bind(this));
if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {
var e = this.manifestUrl.nativeUrl;
cc.loader.md5Pipe && (e = cc.loader.md5Pipe.transformURL(e));
this._am.loadLocalManifest(e);
}
this._failCount = 0;
this._am.update();
this._updating = !0;
}
},
updateCb: function(e) {
console.log("updateCb--------------: " + e.getEventCode());
console.log("updateCb-------1-------: " + e.getMessage());
for (var t in e) console.log("event key", t);
var n = !1, i = !1, a = !1;
switch (e.getEventCode()) {
case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:
try {
this.lblMsg && (this.lblMsg.string = "读取本地版本文件失败");
} catch (e) {}
this.btnRestart.active = !0;
i = !0;
a = !0;
break;

case jsb.EventAssetsManager.UPDATE_PROGRESSION:
this.bar.fillRange = e.getPercent();
break;

case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:
case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:
try {
this.lblMsg && (this.lblMsg.string = "读取远程版本文件失败");
} catch (e) {}
this.btnRestart.active = !0;
i = !0;
break;

case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:
try {
this.lblMsg && (this.lblMsg.string = "已经是最新版本");
} catch (e) {}
i = !0;
a = !0;
break;

case jsb.EventAssetsManager.UPDATE_FINISHED:
try {
this.lblMsg && (this.lblMsg.string = "更新完成 ");
} catch (e) {}
n = !0;
break;

case jsb.EventAssetsManager.UPDATE_FAILED:
try {
this.lblMsg && (this.lblMsg.string = "更新失败 ");
} catch (e) {}
this.btnRestart.active = !0;
this._updating = !1;
this._canRetry = !0;
break;

case jsb.EventAssetsManager.ERROR_UPDATING:
try {
this.lblMsg && (this.lblMsg.string = "更新失败");
} catch (e) {}
this.btnRestart.active = !0;
break;

case jsb.EventAssetsManager.ERROR_DECOMPRESS:
try {
this.lblMsg && (this.lblMsg.string = "解压缩失败");
} catch (e) {}
this.btnRestart.active = !0;
}
if (a) this.getGameInfo(); else {
if (i) {
this._am.setEventCallback(null);
this._updateListener = null;
this._updating = !1;
this.btnRestart.active = !0;
}
if (n) {
this._am.setEventCallback(null);
this._updateListener = null;
var r = jsb.fileUtils.getSearchPaths(), o = this._am.getLocalManifest().getSearchPaths();
Array.prototype.unshift.apply(r, o);
cc.sys.localStorage.setItem("HotUpdateSearchPaths", JSON.stringify(r));
jsb.fileUtils.setSearchPaths(r);
cc.audioEngine.stopAll();
cc.game.restart();
}
}
},
loadCustomManifest: function() {
if (this._am.getState() === jsb.AssetsManager.State.UNINITED) {
var e = new jsb.Manifest(customManifestStr, this._storagePath);
this._am.loadLocalManifest(e, this._storagePath);
}
},
retry: function() {
if (!this._updating && this._canRetry) {
this._canRetry = !1;
this.lblMsg.string = "Retry failed Assets...";
this._am.downloadFailedAssets();
}
},
getGameInfo: function() {
var e = this;
if (this.loadInfoTimes > 2) r.showTipsMsg("无法连接服务器", function() {
cc.game.end();
}); else {
n.ShowTablePop = !1;
0 == this.loadInfoTimes && (this.lblMsg.string = "正在获取游戏配置");
n.Encrtyptor = new l.JSEncrypt();
n.Encrtyptor.getKey();
c.request(n.ServerEventName.GetPublicKey, {}, function(e) {
a.saveValue(n.StorageKey.TokenPKey, e.key);
}, null, function() {});
i.request(n.ServerEventName.GetGameInfo, {}, function(t) {
if (t.data) {
n.ConfigUrl = t.data.resourceUrl;
n.NoticeUrl = t.data.noticeUrl;
n.RecordUrl = t.data.recordUrl;
n.HeadUrl = t.data.headUrl;
n.DownloadUrl = t.data.download;
n.RoomConfig = t.data.gameConfig;
n.ShareUrl = t.data.shareUrl;
for (var i in t.data) n.GameInfo[i] = t[i];
}
e.judgeToken();
}, null, function(t) {
r.showTipsMsg(a.isNullOrEmpty(t.message) ? "未获取到游戏配置" : t.message, function() {
e.lblMsg.string = "重新获取游戏配置";
e.loadInfoTimes++;
e.getGameInfo();
});
});
}
},
judgeToken: function() {
o.reCallInviter();
var e = a.getValue(n.StorageKey.UserToken, "");
if (a.isNullOrEmpty(e)) cc.director.loadScene("Login"); else {
this.lblMsg.string = "正在登陆";
cc.director.loadScene("Lobby");
}
},
onDestroy: function() {
if (this._updateListener) {
this._am.setEventCallback(null);
this._updateListener = null;
}
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../NetWork/Connector": "Connector",
"../Script/DataBase": "DataBase",
"../Script/native-extend": "native-extend",
"./Cache": "Cache",
"./SelectLink": "SelectLink",
"./jsencrypt": 10,
"./utils": "utils"
} ],
SceneLogin: [ function(e, t) {
"use strict";
cc._RF.push(t, "0f25cdrYvpAqo7E5XHSvkfY", "SceneLogin");
var n = e("../Script/Cache"), i = e("../NetWork/Connector"), a = e("../Script/DataBase"), r = e("../Script/utils"), o = (e("audio-ctrl"), 
e("TableInfo"), e("../../GameBase/GameConfig").GameConfig), s = e("../Script/native-extend").Social, c = (e("Logic07"), 
e("./ROUTE"), e("./SelectLink").SelectLink, e("../../script/ui/hall/data/App").App);
t.exports = {
loginSuccessCallback: function(e) {
if (r.isNullOrEmpty(e.token)) n.alertTip("登录失败"); else {
a.player = e.player;
a.connectInfo = e.connectInfo;
(r.isNullOrEmpty(e.version) || r.versionCompareHandle(e.version, "1.0.0") <= 0) && e.connectInfo ? i.connect(e, function() {
o.CurrentGameType = e.connectInfo.gameType;
a.setGameType(a.GAME_TYPE[e.connectInfo.gameType]);
cc.director.loadScene(a.TABLE_TYPE[e.connectInfo.gameType]);
}) : (r.isNullOrEmpty(e.version) || r.versionCompareHandle(e.version, "1.0.0") <= 0) && e.matchInfo && r.pop(o.pop.MatchPop, function(t) {
t.getComponent("ModuleMatchPop").resumeMatch(e);
});
}
}
};
cc.Class({
extends: cc.Component,
properties: {
lblVersion: cc.Label,
winTips: cc.Prefab,
testbtn: cc.Node,
testContent: cc.Node
},
onLoad: function() {
r.fitScreen();
o.DeviceID = "" + s.getUUID();
o.DeviceIDFA = "" + s.getIDFA();
this.loadPrefab();
this.init();
this.audioInit();
this.initGameType();
cc.director.preloadScene("Lobby");
cc.find("lblSchedule").getComponent(cc.Label).unscheduleAllCallbacks();
var e = s.getInviter();
o.InviteCode = r.decodeInviter(e);
o.ShowTablePop = !1;
c.Club.clear();
},
compareVersion: function(e, t) {
if ("" == e) return -1;
for (var n = e.split("."), i = t.split("."), a = 0; a < n.length; ++a) {
var r = parseInt(n[a]), o = parseInt(i[a] || 0);
if (r !== o) return r - o;
}
return i.length > n.length ? -1 : 0;
},
initGameType: function() {
cc.game.addPersistRootNode(cc.find("winMask"));
cc.game.addPersistRootNode(cc.find("lblSchedule"));
},
init: function() {
cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_ANDROID && (cc.gameVersion = o.DefaultVersion);
null == cc.gameVersion && (cc.gameVersion = o.DefaultVersion);
this.lblVersion.string = "版本号: " + cc.gameVersion;
},
loadPrefab: function() {
var e = cc.instantiate(this.winTips);
n.winTips = e.getComponent("ModuleWinTips");
},
audioInit: function() {},
showLogin: function() {
n.playSfx();
r.pop(o.pop.LoginPop);
},
otherLogin: function() {},
wechatLogin: function() {
n.playSfx();
s.wechatAuth();
s.wxLoginCallBack = function(e) {
var t = r.encryptToken(o.DeviceID);
i.request(o.ServerEventName.UserLogin, {
publicKey: o.Encrtyptor.getPublicKey(),
deviceID: t,
wechatCode: e
}, function(e) {
if (e.success && e.token) {
r.saveValue(o.StorageKey.UserLoginTime, parseInt(new Date().getTime() / 1e3));
cc.director.loadScene("Lobby");
}
}, !0, function(e) {
n.showTipsMsg(e.message || "登录失败");
});
};
},
createTestAccount: function() {
for (var e = 1; e <= 30; e++) {
var t = cc.instantiate(this.testbtn);
t.active = !0;
t.getChildByName("name").getComponent(cc.Label).string = "玩家" + e;
t._data = "test" + e;
t.on(cc.Node.EventType.TOUCH_END, this.ontestLogin, this);
this.testContent.addChild(t);
}
},
ontestLogin: function(e) {
console.log("1231231", e.currentTarget);
var t = r.encryptToken(e.currentTarget._data);
i.request("game/test/login", {
publicKey: o.Encrtyptor.getPublicKey(),
deviceID: t
}, function(e) {
if (e.success && e.token) {
r.saveValue(o.StorageKey.UserLoginTime, parseInt(new Date().getTime() / 1e3));
cc.director.loadScene("Lobby");
}
}, !0, function(e) {
n.showTipsMsg(e.message || "登录失败");
});
},
devicesLogin: function() {
n.playSfx();
var e = r.encryptToken(o.DeviceID);
i.request(o.ServerEventName.UserLogin, {
publicKey: o.Encrtyptor.getPublicKey(),
deviceID: e
}, function(e) {
if (e.success && e.token) {
r.saveValue(o.StorageKey.UserLoginTime, parseInt(new Date().getTime() / 1e3));
cc.director.loadScene("Lobby");
}
}, !0, function(e) {
n.showTipsMsg(e.message || "登录失败");
});
},
onClearStorage: function() {
n.playSfx();
cc.sys.localStorage.clear();
i.request(o.ServerEventName.GetPublicKey, {}, function(e) {
n.alertTip("清除成功");
r.saveValue(o.StorageKey.TokenPKey, e.key);
});
},
onTestLocal: function() {
s.openUrl('https://chatlink-new.meiqia.cn/widget/standalone.html?eid=9feccffbe0ea723a7ab49215e59a6c75&metadata={"tel":"' + DataBase.player.phone + '","name":"' + DataBase.player.name + '","qq":"' + DataBase.player.id + '","addr":"xyqp"}');
},
onTestOnline: function() {
n.alertTip("地址换为 http://120.77.220.32:8000/");
i.logicUrl = "http://120.77.220.32:8000/";
}
});
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/ui/hall/data/App": "App",
"../NetWork/Connector": "Connector",
"../Script/Cache": "Cache",
"../Script/DataBase": "DataBase",
"../Script/native-extend": "native-extend",
"../Script/utils": "utils",
"./ROUTE": "ROUTE",
"./SelectLink": "SelectLink",
Logic07: "Logic07",
TableInfo: "TableInfo",
"audio-ctrl": "audio-ctrl"
} ],
SceneTable07: [ function(e, t) {
"use strict";
cc._RF.push(t, "55ae9RlGEJLWIyXPqp8+jbN", "SceneTable07");
var n = e("../../../Main/Script/ROUTE"), i = e("../../../Main/Script/TableInfo"), a = e("../../../Main/NetWork/Connector"), r = e("../../../Main/Script/DataBase"), o = e("PACK"), s = e("Logic07"), c = e("../../../Main/Script/utils"), l = e("../../../Main/Script/native-extend").Social, u = e("audio-ctrl"), d = (e("voice-ctrl"), 
e("../../../Main/Script/Cache")), h = e("../../../GameBase/GameConfig").GameConfig, f = e("../../../script/ui/hall/data/App").App, p = {
ext: !1,
show: !0,
black: !1,
bird: !0,
rand: !0,
four: !0,
aaa: !1,
limit: !0,
person: 3,
clan: !0,
turn: 10
};
cc.Class({
extends: e("GameBase"),
properties: {
_delayTime: 0,
lastBtnState: !1,
prePlayerInfo: cc.Prefab,
layerHandCards: cc.Layout,
testCards: cc.Layout,
hands: [],
lblRoomId: cc.Label,
lblTurn: cc.Label,
lblGameType: cc.Label,
lblBase: cc.Label,
lblNiao: cc.Label,
lblDistance: cc.Label,
btnTips: cc.Node,
btnPlayCards: cc.Node,
dropCards: [ cc.Layout ],
preCards: cc.Prefab,
imgPass: [ cc.Node ],
nodePlayerInfo: [],
preCoin: cc.Prefab,
birdReadyBtn: cc.Node,
normalReadyBtn: cc.Node,
shuffleBtn: cc.Node,
unShuffleBtn: cc.Node,
bgTable: cc.Node,
preType: cc.Prefab,
bgCount: [ cc.Layout ],
sprDisnable: cc.Node,
sfxClip: {
type: cc.AudioClip,
default: null
},
summaryPrefab: cc.Prefab,
prePlayCards: cc.Prefab,
pokerSkeleton: [ sp.SkeletonData ],
aniNode: cc.Prefab,
nodeBack: cc.Prefab,
currentAutoStatus: !1,
startAutoBtn: cc.Node,
cancelAutoBtn: cc.Node,
exitBtn: cc.Node,
autoMask: cc.Node,
showCardContent1: cc.Node,
showCardContent2: cc.Node,
nodeTx: cc.Node,
cutAnim: sp.SkeletonData,
bgNode: cc.Sprite,
cutTips: cc.Node,
readyData: null,
lastAutoTime: 0
},
onLoad: function() {
var e = this;
if (!h.isTest) {
this.initChatContent();
this.readyData = {};
this.initGameBase();
this.addEvents();
this.alReady = !1;
i.idx = -1;
this.layerHandCards.node.getComponent("LayerHandsCards07").touchEvent();
a.emit(o.CS_JOIN_DONE, {});
a.LogsClient(h.LogsEvents.SOCKET_LINK, {
action: h.LogsActions.ENTER_SCENE,
gamtype: "PDK_SOLO"
});
this.schedule(function() {
e.gameMsgSchedule();
}, .1);
c.pop(h.pop.TipsCard, function(t) {
t.setPosition(-cc.winSize.width / 2 + 200, cc.winSize.height / 2 - t.height / 2);
e.tipsCardPrefab = t.getComponent("ModuleTipsCard");
});
}
},
addEvents: function() {
this.startAutoBtn.on(cc.Node.EventType.TOUCH_END, this.onStartAuto, this);
this.cancelAutoBtn.on(cc.Node.EventType.TOUCH_END, this.onCancelAuto, this);
this.exitBtn.on(cc.Node.EventType.TOUCH_END, this.onClickExit, this);
this.birdReadyBtn.on(cc.Node.EventType.TOUCH_END, this.birdReady, this);
this.normalReadyBtn.on(cc.Node.EventType.TOUCH_END, this.normalReady, this);
this.shuffleBtn.on(cc.Node.EventType.TOUCH_END, this.shuffleCard, this);
this.unShuffleBtn.on(cc.Node.EventType.TOUCH_END, this.unShuffleCard, this);
this.node.on(h.GameEventNames.PDK_BACK_HALL, this.backHall, this);
f.EventManager.addEventListener(h.GameEventNames.PDK_SHUFFLE_CARD, this.summaryHandleGame, this);
f.EventManager.addEventListener(h.GameEventNames.PDK_CONTINUE_GAME, this.showReadyBtn, this);
},
removeEvents: function() {
this.startAutoBtn.off(cc.Node.EventType.TOUCH_END, this.onStartAuto, this);
this.cancelAutoBtn.off(cc.Node.EventType.TOUCH_END, this.onCancelAuto, this);
this.exitBtn.off(cc.Node.EventType.TOUCH_END, this.onClickExit, this);
this.node.off(h.GameEventNames.PDK_BACK_HALL, this.backHall, this);
f.EventManager.removeEventListener(h.GameEventNames.PDK_SHUFFLE_CARD, this.summaryHandleGame, this);
f.EventManager.removeEventListener(h.GameEventNames.PDK_CONTINUE_GAME, this.showReadyBtn, this);
},
initChatContent: function() {
var e = this;
this.node.on("chatAlready", function() {
var t = cc.find("Canvas"), n = {
str: [ "快点啊,我等得花儿都谢了", "你的牌打的真是太好了", "不要走,决战到天亮", "不好意思,我得离开一会", "咱们交个朋友吧", "不要吵了,专心玩游戏吧" ],
url: "ChatImg/Game11",
aniPos: [ cc.v2(69.5 - t.width / 2 + h.FitScreen, 29), cc.v2(t.width / 2 - 69.5 - h.FitScreen, 159) ],
msgPos: [ cc.v2(69.5 - t.width / 2 + h.FitScreen + 50, 83), cc.v2(t.width / 2 - 69.5 - h.FitScreen - 50, 213) ],
facePos: [ cc.v2(239 - t.width / 2 + h.FitScreen, 0), cc.v2(t.width / 2 - 139 - h.FitScreen, 130) ],
faceAnchor: [ {
x: 0,
y: 0
}, {
x: 1,
y: 1
}, {
x: 0,
y: 1
} ]
};
e.chat.init(n);
});
},
playSE: function() {
u.getInstance().setSFXVolume(r.getFloat(r.STORAGE_KEY.SET_SOUND, 1));
u.getInstance().playSFX(this.sfxClip);
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else if (!(a._queueGameMsg.length <= 0)) {
var e = a._queueGameMsg.shift(), t = cc.sys.isBrowser ? e : JSON.stringify(e);
console.log(t);
e.route != n.SC_GAME_DATA && e.route != n.SC_JOIN_TABLE && e.route != n.SC_RECONNECT || (this.alReady = !0);
if (this.alReady) switch (e.route) {
case n.SC_GAME_DATA:
this.resume(e.data);
break;

case n.SC_JOIN_TABLE:
this.initTable(e.data);
break;

case n.SC_RECONNECT:
this.resume(e.data);
break;

case n.SC_GAME_INIT:
this.initGame(e.data);
break;

case n.SC_PLAY_CARD:
this.playCard(e.data);
break;

case n.SC_SHOW_CARD:
this.showPlayCards(e.data);
break;

case n.SC_GAME_READY:
this.changeReady(e.data);
break;

case n.SC_PASS_CARD:
this.showPass(e.data);
break;

case n.SC_REFRESH_CARD:
r.player.card = e.data.card;
break;

case n.SC_PLAYER_LEAVE:
this.leavePlayer(e.data.idx);
break;

case n.SC_CHANGE_STATUS:
this.changeStatus(e.data);
break;

case n.SC_SCORE:
this.scoreFly(e.data);
break;

case n.SC_FINISH:
this.finish();
break;

case n.SC_ROUND_SUMMARY:
this.roundSummary(e.data);
break;

case n.SC_GAME_SUMMARY:
break;

case n.SC_GAME_CHAT:
null != this.chat && this.chat.contentFly(e.data);
break;

case n.SC_SYSTEM_NOTICE:
c.pop(h.pop.NoticePop, function(t) {
t.getComponent("ModuleNotice").showTips(e.data.msg, message.data.times);
});
break;

case n.SC_PLAY_ERROR:
break;

case n.SC_ALERT:
this.acBaodan(e.data);
break;

case n.SC_LOCATION:
this.refreshLoc(e.data);
break;

case n.SC_CANCEL_AUTO:
this.cancelAuto(e.data);
break;

case n.SC_START_AUTO:
this.startAuto(e.data);
break;

case n.SC_TIPS:
this.showTipsCard(e.data);
break;

case n.SC_TOAST:
c.isNullOrEmpty(e.data.message) || d.alertTip(e.data.message);
break;

case n.SC_DISBAND:
this.nodeTx.getComponent("ModuleTouxiang08").txInit(e.data);
break;

case n.SC_GAME_DESTORY:
this.destoryGame();
break;

case "SC_TEST":
this.testCards1(e.data);
break;

default:
cc.error(e);
}
}
},
testCards1: function(e) {
e.sort(function(e, t) {
return e % 100 - t % 100;
});
var t = e;
t.reverse();
this.testCards.node.getComponent("LayerHandsCards07").refreshHandCards(t, !0);
},
destoryGame: function() {
a._queueGameMsg = [];
a._queueChatMsg = [];
a.disconnect();
},
refreshLoc: function(e) {
var t = e.idx, n = i.players[t];
n && (n.prop.loc = e.loc);
},
showPass: function(e) {
var t = i.realIdx[e.idx];
this.dropCards[t].node.destroyAllChildren();
this.bgCount[t].node.destroyAllChildren();
this.imgPass[t].active = !1;
this._delayTime = 5;
this.changeBtn(!1);
this.sprDisnable.active = e.idx == i.idx;
this.bgTable.getComponent("BgTableAudioCtr07").PassVoice(i.players[e.idx].prop.sex);
this.imgPass[i.realIdx[e.idx]].active = !0;
},
initGame: function(e) {
var t = this;
this.node.getChildByName("roundSummary") && this.node.getChildByName("roundSummary").removeFromParent();
this.nodePlayerInfo.forEach(function(e) {
e.activeReady(!1);
e.changeCardCount(15);
});
i.baodan = 2 == i.options.person ? [ !1, !1 ] : [ !1, !1, !1 ];
i.zhuang = e.banker;
i.firstPlay = !0;
i.current = null;
i.status = h.GameStatus.START;
this.exitBtn.active = !1;
this.setTurn(e);
this.startAutoBtn.active = !0;
if (c.isNullOrEmpty(e.shuffle)) this.initHands(e, !1); else {
this.cutCount = 0;
this.cutIdx = [];
this.shuffleData = e;
e.shuffle.forEach(function(e) {
if (e.shuffle) {
t.cutCount++;
t.cutIdx.push(e.idx);
}
i.realIdx[e.idx];
});
this.handleShuffle();
}
},
handleShuffle: function() {
var e = this;
if (this.cutCount > 0) {
this._delayTime = 100;
var t = new cc.Node();
t.parent = this.node;
t.addComponent(sp.Skeleton);
var n = t.getComponent(sp.Skeleton);
n.skeletonData = this.cutAnim;
n.premultipliedAlpha = !1;
n.setAnimation(1, "idle", !1);
this.cutTips.active = !0;
var a = this.cutIdx.shift();
this.cutTips.getChildByName("name").getComponent(cc.Label).string = i.players[a].prop.name + "正在洗牌";
n && n.setCompleteListener(function() {
t.destroy();
e.cutTips.active = !1;
e.cutCount--;
e.handleShuffle();
});
} else this.initHands(this.shuffleData, !1);
},
initTable: function(e) {
var t = cc.find("Canvas");
this.showCardContent1.position = cc.v2(t.width / 2 - 139 - 35 - h.FitScreen, 130);
this.showCardContent2.position = cc.v2(139 - t.width / 2 + 70 + h.FitScreen, 130);
i.zhuang = e.banker;
i.firstPlay = !1;
i.status = e.status;
this.exitBtnStatus();
i.idx = e.idx;
i.options = e.options;
i.config = p;
i.current = e.current;
this.lblGameType.string = h.GameName[e.options.gameType] + (1 == e.options.maxRound ? "把结" : "（8小局）");
this.lblBase.string = "底分: " + c.formatGold(e.options.base);
this.lblNiao.string = "打鸟: " + c.formatGold(e.options.bird);
this.lblRoomId.string = "房间号: " + e.tableID;
var n = e.idx;
if (3 == i.options.person) {
this.realIdx = [ 0, 0, 0 ];
this.realIdx[n] = 0;
this.realIdx[(n + 1) % 3] = 1;
this.realIdx[(n + 2) % 3] = 2;
} else {
this.realIdx = [ 0, 0 ];
this.realIdx[n] = 0;
this.realIdx[(n + 1) % 2] = 1;
}
i.realIdx = this.realIdx;
c.isNullOrEmpty(this.nodePlayerInfo) || this.nodePlayerInfo.forEach(function(e) {
e.removePlayer();
});
this.setTurn(e);
this.initPlayers(e);
this.changeAutoBtn(!1);
},
initPlayers: function(e) {
var t = this;
this.nodePlayerInfo = new Array(i.options.person);
i.players = e.players;
e.players.forEach(function(n, a) {
var r = cc.instantiate(t.prePlayerInfo);
r.parent = t.bgTable;
var o = r.getComponent("ModulePlayerHead07");
o.init(n, a);
t.nodePlayerInfo[i.realIdx[n.idx]] = o;
i.idx != n.idx || i.status != h.GameStatus.WAIT && i.status != h.GameStatus.SUMMARY || (i.options.maxRound > 1 && e.round > 1 ? t.shuffleBtnStatus(!n.ready) : t.readyBtnStatus(!n.ready));
i.idx == n.idx && t.changeAutoState(n);
});
},
leavePlayer: function() {
this.node.removeAllChildren();
a.disconnect();
},
resume: function(e) {
var t = this;
this.initTable(e);
e.disband && this.nodeTx.getComponent("ModuleTouxiang08").txInit(e.disband);
if (e.status != h.GameStatus.WAIT && e.status != h.GameStatus.PREPARE && e.status != h.GameStatus.SUMMARY) {
this.readyBtnStatus(!1);
this.shuffleBtnStatus(!1);
e.players.forEach(function(n) {
t.nodePlayerInfo[i.realIdx[n.idx]].activeAutoPlay(n.auto);
t.nodePlayerInfo[i.realIdx[n.idx]].activeReady(!1);
i.idx == n.idx && t.changeAutoState(n);
console.log("---", n.hands);
if (1 == n.hands) {
i.baodan[n.idx] = !0;
t.nodePlayerInfo[i.realIdx[n.idx]].activeBaodan(!0);
}
null != n.historyCard && t.showPlayCards(n.historyCard);
null != e.currentCard && n.idx == e.currentCard.idx && t.showPlayCards(e.currentCard);
});
i.current = e.current;
this.initHands(e, !0);
var n = {
idx: e.currentIDX,
clock: e.clock
};
this.playCard(n);
}
},
scoreFly: function() {
var e = this;
this.dropCards.forEach(function(t, n) {
t.node.removeAllChildren(!0);
e.bgCount[n].node.removeAllChildren(!0);
e.imgPass[n].active = !1;
});
this.sprDisnable.active = !1;
},
finish: function() {
var e = this;
this.dropCards.forEach(function(t, n) {
t.node.destroyAllChildren(!0);
e.bgCount[n].node.destroyAllChildren(!0);
e.imgPass[n].active = !1;
});
this.sprDisnable.active = !1;
i.current = null;
},
resetCards: function() {
this.layerHandCards.getComponent("LayerHandsCards07").nodeCards.forEach(function(e) {
e.getChildByName("bgCardMask").active = !1;
e._prior = !1;
e.isZhankai = !1;
e.setPosition(e.pos0);
});
this.btnPlayCards.getComponent(cc.Button).interactable = !1;
},
initHands: function(e, t) {
if (!c.isNullOrEmpty(e.hands)) {
e.hands.sort(function(e, t) {
return e % 100 - t % 100;
});
this.hands = e.hands;
this.hands.reverse();
this.layerHandCards.node.getComponent("LayerHandsCards07").refreshHandCards(this.hands, t);
t || this.cutCards(this.hands);
}
},
cutCards: function(e) {
var t = this;
this._delayTime = 100;
for (var n = [ cc.v2(522, 350), cc.v2(-522, 250) ], a = [], r = [], o = [], s = [], c = [], d = cc.url.raw("resources/Audio/Common/deal07.mp3"), h = Math.ceil(e.length / 2), f = 0; f < e.length * (i.options.person - 1); f++) {
var p = cc.instantiate(this.nodeBack);
p.parent = this.layerHandCards.node;
p.setPosition(0, 0);
a.push(p);
}
for (var m = 0; m < e.length; m++) {
var g = cc.instantiate(this.nodeBack);
g.parent = this.layerHandCards.node;
g.setPosition(0, 0);
r.push(g);
}
var v = [], C = [];
a.forEach(function(e, t) {
v.push(cc.targetedAction(e, cc.sequence(cc.delayTime(.02 * t % 3), cc.spawn(cc.rotateBy(.3, 180), cc.scaleTo(.3, 1), cc.moveTo(.6, n[t % (i.options.person - 1)]), cc.sequence(cc.delayTime(.4), cc.fadeOut(.2))), cc.delayTime(.2), cc.callFunc(function() {
this.destroy();
}, e))));
});
r.forEach(function(e, t) {
C.push(cc.targetedAction(e, cc.sequence(cc.delayTime(.02 * t % 3), cc.spawn(cc.rotateBy(.3, 180), cc.scaleTo(.3, 1), cc.moveTo(.6, 40 * (8 - h + t) - 273, 80), cc.callFunc(function() {
t % 9 == 0 && u.getInstance().playSFX(d);
}), cc.sequence(cc.delayTime(.4), cc.fadeOut(.2))), cc.callFunc(function() {
this.destroy();
}, e))));
});
var b = this.layerHandCards.node.getComponent("LayerHandsCards07");
b.nodeCards.forEach(function(t, n) {
t.active = !0;
t && (t.opacity = 0);
c.push(cc.targetedAction(t, cc.sequence(cc.delayTime(n / e.length), cc.fadeIn(.2))));
});
this._delayTime = 0;
s.push(cc.spawn(v));
s.push(cc.spawn(C));
s.push(cc.spawn(c));
o.push(cc.spawn(s));
o.push(cc.callFunc(function() {
t._delayTime = 0;
}));
try {
this.node.runAction(cc.sequence(o));
} catch (e) {
l.reportError(e);
r.forEach(function(e) {
e.destroy();
});
a.forEach(function(e) {
e.destroy();
});
b.nodeCards.forEach(function(e) {
e.active = !0;
e && (e.opacity = 255);
});
this._delayTime = 0;
}
},
playCard: function(e) {
i.currentPlayer = e.idx;
var t = e.idx, n = i.realIdx[t];
this.dropCards[n].node.destroyAllChildren();
this.bgCount[n].node.destroyAllChildren();
this.imgPass[n].active = !1;
this.showPlayCardLight(t);
i.firstPlay && this.nodePlayerInfo[i.realIdx[t]].activeBanker(!0);
var a = Math.max((e.clock - c.getTimeStamp()) / 1e3, 0);
this.nodePlayerInfo[i.realIdx[t]].showClock(a);
if (t == i.idx) {
console.log("显示出牌按钮", t, i.idx);
this.layerHandCards.getComponent("LayerHandsCards07").checkCurrent();
this.changeBtn(!0);
this.btnTips.tipsTime = 0;
this.btnTips.getComponent(cc.Button).interactable = null != i.current;
var r = this.hands, o = [];
r.forEach(function(e) {
o.push(e);
});
var l = s.autoplay(o, i.current, 0, i.config);
l && 1 == l.length && this.btnTips.getComponent("BtnTips07").tipsStart();
}
i.firstPlay = !1;
},
acChupai: function() {
null == this.btnPlayCards._last && (this.btnPlayCards._last = 0);
if (!(new Date().getTime() - this.btnPlayCards._last < 1e3)) {
this.btnPlayCards._last = new Date().getTime();
var e = JSON.parse(JSON.stringify(i.select));
a.gameMessage(n.CS_PLAY_CARD, e.cards, !0);
}
},
birdReady: function() {
d.playSfx();
this.readyData.plus = !0;
this.initDesk();
this.readyBtnStatus(!1);
this.shuffleBtnStatus(!0);
},
normalReady: function() {
d.playSfx();
this.readyData.plus = !1;
this.initDesk();
this.readyBtnStatus(!1);
this.shuffleBtnStatus(!0);
},
showReadyBtn: function() {
this.readyBtnStatus(!0);
},
summaryHandleGame: function(e) {
console.log("是否洗牌开始--", e);
e.data ? this.shuffleCard() : this.unShuffleCard();
},
shuffleCard: function() {
d.playSfx();
this.initDesk();
this.readyData.shuffle = !0;
a.gameMessage(n.CS_GAME_READY, this.readyData);
},
unShuffleCard: function() {
d.playSfx();
this.initDesk();
this.readyData.shuffle = !1;
a.gameMessage(n.CS_GAME_READY, this.readyData);
},
initDesk: function(e) {
var t = this;
void 0 === e && (e = 0);
this.sprDisnable.active = !1;
this.node.getChildByName("roundSummary") && this.node.getChildByName("roundSummary").removeFromParent();
this.layerHandCards.node.destroyAllChildren();
this.layerHandCards.getComponent("LayerHandsCards07").nodeCards = [];
this.dropCards.forEach(function(e, n) {
e.node.destroyAllChildren();
t.bgCount[n].node.destroyAllChildren();
t.imgPass[n].active = !1;
});
},
acBaodan: function(e) {
d.playSound(i.players[e.idx].prop.sex + "_baodan");
i.baodan[e.idx] = !0;
this.nodePlayerInfo[i.realIdx[e.idx]].activeBaodan(!0);
},
showPlayCards: function(e) {
this.changeBtn(!1);
i.current = null;
i.current = e;
this._delayTime = 5;
var t = i.realIdx[e.idx];
this.nodePlayerInfo[t].activeOffline(!1);
this.nodePlayerInfo[t].activeAutoPlay(e.auto);
this.nodePlayerInfo[t].playCardLight(!1);
this.nodePlayerInfo[t].hideClock();
this.nodePlayerInfo[t].changeCardCount(e.hands);
i.idx == e.idx && this.changeAutoState(e);
var n = cc.url.raw("resources/Audio/Common/playCard.mp3");
u.getInstance().playSFX(n);
var a, r = i.realIdx[e.idx];
if (this.dropCards[r].node.children.length > 0) {
this.dropCards[r].node.destroyAllChildren();
this.bgCount[r].node.destroyAllChildren();
}
this.sprDisnable.active = !1;
switch (e.type) {
case "BOMB":
a = 0;
break;

case "LIANDUI":
a = 1;
break;

case "SHUN":
var o = cc.instantiate(this.preType);
o.parent = this.bgCount[r].node;
var s = e.cards.length;
a = 2;
o.getComponent("cc.Label").string = [ "", "", "", "", "", "五连顺", "六连顺", "七连顺", "八连顺", "九连顺", "十连顺", "十一连顺", "十二连顺" ][s];
break;

case "FEIJI":
a = 0 != r ? 4 : 3;
}
if (!c.isNullOrEmpty(a)) {
var l = cc.instantiate(this.aniNode);
l.parent = this.bgCount[r].node;
l.addComponent(sp.Skeleton);
var d = l.getComponent(sp.Skeleton);
d.skeletonData = this.pokerSkeleton[a];
d.premultipliedAlpha = !1;
d.setAnimation(1, "animation", !1);
this.playManageAudio("texiao_" + a + ".mp3");
}
this.bgTable.getComponent("BgTableAudioCtr07").playVoice(e, i.players[e.idx].prop.sex);
this.removeHands(e);
var h = cc.instantiate(this.prePlayCards);
h.scale = 1;
h.parent = this.dropCards[r].node;
var f = JSON.parse(JSON.stringify(e));
h.getComponent("LayoutShowCards07").init(f);
},
removeHands: function(e) {
var t = this;
if (e.idx == i.idx) {
e.cards.forEach(function(e) {
for (var n = 0; n < t.hands.length; n++) {
var i = t.hands.findIndex(function(t) {
return e == t;
});
if (i >= 0) {
t.hands.splice(i, 1);
return;
}
}
});
this.layerHandCards.getComponent("LayerHandsCards07").refreshHandCards(this.hands, !0);
}
},
roundSummary: function(e) {
var t = this;
this.nodeTx.active = !1;
this.tipsCardPrefab.removeCards();
this.dropCards.forEach(function(e, n) {
e.node.destroyAllChildren();
t.bgCount[n].node.destroyAllChildren();
t.imgPass[n].active = !1;
});
i.zhuang = null;
i.baodan = 2 == i.options.person ? [ !1, !1 ] : [ !1, !1, !1 ];
i.status = e.status;
this.exitBtnStatus();
e.winner == i.idx ? this.playManageAudio("audio_win.mp3") : this.playManageAudio("audio_lose.mp3");
this.node.runAction(cc.sequence(cc.delayTime(.5), cc.callFunc(function() {
var n = cc.instantiate(t.summaryPrefab);
n.getComponent("ModuleSummary07").initData(e);
t.node.addChild(n, 2, "roundSummary");
e.players.forEach(function(e) {
var n = i.realIdx[e.idx];
t.nodePlayerInfo[n].resetPlayer();
t.nodePlayerInfo[n].setScore(e.wallet);
var a = cc.instantiate(t.prePlayCards);
a.scale = 1;
a.parent = t.dropCards[n].node;
var r = JSON.parse(JSON.stringify(e.hands));
a.getComponent("LayoutShowCards07").initRemainCard(r);
});
t.readyBtnStatus(1 == i.options.maxRound);
})));
},
vote: function() {
d.showConfirm("是否解散房间", function() {
a.gameMessage(n.CS_GAME_VOTE, {
agree: !0
});
});
},
backHall: function() {
h.ShowTablePop = !0;
d.showMask("正在返回大厅...请稍后");
a.gameMessage(n.CS_PLAYER_LEAVE, {});
},
restartGame: function() {
u.getInstance().stopAll();
cc.game.restart();
},
changeStatus: function(e) {
var t = i.realIdx[e.idx];
this.nodePlayerInfo[t].activeOffline(e.offline);
},
changeReady: function(e) {
if (i.idx == e.idx) {
this.readyBtnStatus(!1);
this.shuffleBtnStatus(!1);
}
this.nodePlayerInfo[i.realIdx[e.idx]].activeReady(!0);
this.nodePlayerInfo[i.realIdx[e.idx]].activeNiao(e);
},
showPlayCardLight: function(e) {
this.nodePlayerInfo.forEach(function(e) {
return e.playCardLight(!1);
});
this.nodePlayerInfo[i.realIdx[e]].playCardLight(!0);
},
setTurn: function(e) {
i.turn = e.round;
this.lblTurn.string = 0 == e.round ? "" : "第" + e.turn + "圈 第" + e.round + "局";
},
restart: function() {
u.getInstance().stopAll();
cc.game.restart();
},
cancelAuto: function(e) {
this.nodePlayerInfo[i.realIdx[e.idx]].activeAutoPlay(!1);
i.idx == e.idx && this.changeAutoBtn(!1);
},
startAuto: function(e) {
this.nodePlayerInfo[i.realIdx[e.idx]].activeAutoPlay(!0);
i.idx == e.idx && this.changeAutoBtn(!0);
},
changeAutoBtn: function(e) {
this.startAutoBtn.active = !e;
this.autoMask.active = e;
this.currentAutoStatus = e;
},
changeAutoState: function(e) {
this.nodePlayerInfo[i.realIdx[e.idx]].activeAutoPlay(!1);
i.idx == e.idx && this.changeAutoBtn(e.auto);
},
onStartAuto: function() {
if (i.status == h.GameStatus.START) {
this.changeAutoBtn(!0);
a.gameMessage(n.CS_START_AUTO, {});
}
},
onCancelAuto: function() {
this.changeAutoBtn(!1);
a.gameMessage(n.CS_CANCEL_AUTO, {});
},
showTipsCard: function(e) {
this.tipsCardPrefab.refreshCard(e.cards);
},
onClickExit: function() {
var e = this;
d.playSfx();
if (!this.onExitting && i.status != h.GameStatus.START) {
this.onExitting = !0;
d.showConfirm("是否退出房间", function() {
e.onExitting = !1;
a.gameMessage(n.CS_PLAYER_LEAVE, {});
}, function() {
e.onExitting = !1;
});
}
},
updatePlayerDistance: function() {
if (c.isNullOrEmpty(i.players[0]) || c.isNullOrEmpty(i.players[1])) this.lblDistance.node.active = !1; else {
this.lblDistance.node.active = !0;
this.checkLoc(i.players[0]) && this.checkLoc(i.players[1]) ? this.lblDistance.string = "玩家距离: " + c.getDistance(i.players[0].location, i.players[1].location) : this.lblDistance.string = "玩家距离: 未知";
}
},
onQuickFinish: function() {
var e = this;
d.playSfx();
if (!this.quickFinished) {
this.quickFinished = !0;
d.showConfirm("是否结束本局游戏？", function() {
a.gameMessage(n.CS_DISBAND, "allow");
e.quickFinished = !1;
}, function() {
e.quickFinished = !1;
});
}
},
checkLoc: function(e) {
return null != e.prop && null != e.location && 0 != e.location.lat && 0 != e.location.long;
},
readyBtnStatus: function(e) {
this.birdReadyBtn.active = e;
this.normalReadyBtn.active = e;
},
shuffleBtnStatus: function(e) {
this.shuffleBtn.active = e;
this.unShuffleBtn.active = e;
},
changeBtn: function(e) {
this.btnPlayCards.active = e;
this.btnTips.active = e;
},
exitBtnStatus: function() {
this.exitBtn.active = i.status == h.GameStatus.WAIT || i.status == h.GameStatus.DESTORY;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/native-extend": "native-extend",
"../../../Main/Script/utils": "utils",
"../../../script/ui/hall/data/App": "App",
GameBase: "GameBase",
Logic07: "Logic07",
PACK: "PACK",
"audio-ctrl": "audio-ctrl",
"voice-ctrl": "voice-ctrl"
} ],
SceneTable08: [ function(e, t) {
"use strict";
cc._RF.push(t, "c247bgkvDNDiJ3L2poqsmAA", "SceneTable08");
cc.v2(-502, -150), cc.v2(502, 130), cc.v2(-502, 130);
var n = [ {
begin: cc.v2(0, -40),
end: cc.v2(-1, 123)
}, {
begin: cc.v2(-446, 152),
end: cc.v2(-195, 160)
} ], i = (cc.v2(-2, 183), cc.v2(67, 242), cc.v2(-53, 242), e("../../../GameBase/Module/ModuleClock"), 
cc.v2(-367, -93), cc.v2(367, 79), cc.v2(-367, 79), [ cc.v2(-10, 86), cc.v2(-310, 158) ]), a = [ {
begin: cc.v2(0, 174),
end: cc.v2(-502, -253)
}, {
begin: cc.v2(0, 174),
end: cc.v2(-468, 190)
} ], r = {
begin: cc.v2(0, 300),
end: cc.v2(0, 0)
}, o = e("../../../Main/Script/TableInfo"), s = e("../../../Main/NetWork/Connector"), c = e("../../../Main/Script/DataBase"), l = e("../../../Main/Script/PACK"), u = e("../../../Main/Script/ROUTE"), d = e("../../../Main/Script/Cache"), h = e("../Script/ModuleTips08"), f = e("audio-ctrl"), p = e("../../../Main/Script/native-extend").Social, m = e("../../../Main/Script/utils"), g = e("../../../GameBase/GameConfig").GameConfig, v = e("../../../script/ui/hall/data/App").App, C = {
yhz: !0,
piao: !0,
person: 3,
clan: !0,
turn: 10
};
cc.Class({
extends: e("GameBase"),
properties: {
nodeDeck: cc.Node,
imgBet: [ cc.Label ],
nodePiao: cc.Node,
sprHorn: [ cc.Sprite ],
card: cc.Prefab,
bg: cc.Node,
layoutQuest: cc.Node,
_delayTime: 0,
lblGameType: cc.Label,
lblBase: cc.Label,
lblNiao: cc.Label,
lblTurn: cc.Label,
lblRoomId: cc.Label,
normalReadyBtn: cc.Node,
birdReadyBtn: cc.Node,
shuffleBtn: cc.Node,
unShuffleBtn: cc.Node,
lblDeck: cc.Label,
player: cc.Prefab,
layoutShowCard: cc.Layout,
hands: cc.Node,
btnQuest: [ cc.Node ],
show: cc.Prefab,
group: cc.Prefab,
nodeBtn: cc.Node,
layoutGroup: cc.Layout,
btnGuo: cc.Sprite,
nodeQuestImg: cc.Label,
preRoundSummary: cc.Prefab,
layoutSummaryHands: [ cc.Layout ],
layoutShowChi: cc.Layout,
layoutBi: cc.Layout,
chiContent1: cc.Node,
chiContent2: cc.Node,
chiBox: cc.Prefab,
nodeChi: cc.Node,
btnOutCard: cc.Node,
longCards: cc.Prefab,
startAutoBtn: cc.Node,
cancelAutoBtn: cc.Node,
exitBtn: cc.Node,
autoMask: cc.Node,
nodeTx: cc.Node,
lastAutoTime: 0,
tingNode: cc.Node,
tingContent: cc.Node,
tingItem: cc.Prefab,
tingBtn: cc.Node,
bgNode: cc.Sprite,
cutAnim: sp.SkeletonData,
cutTips: cc.Node,
readyData: null,
gameFinish: !0
},
onLoad: function() {
this.tingAnim = !1;
this.readyData = {};
this.addEvents();
this.nodeDeck.active = !1;
this.initChatContent();
this.initGameBase();
o.zhuang = -1;
this.btnQuest.forEach(function(e) {
e.zIndex = 22;
});
this.nodeQuestImg.node.zIndex = 5;
this.nodeChi.zIndex = 21;
this.layoutShowCard.node.zIndex = 20;
this.contentShowChi = [];
this.layoutQuest.zIndex = 20;
this.alReady = !1;
this.btnQuest[0].type = "chi";
this.btnQuest[1].type = "peng";
this.btnQuest[2].type = "hu";
o.playerHead = [ null, null, null ];
o.realIdx = [ null, null, null ];
o.players = [ null, null, null ];
this.hands = this.hands.getComponent("BaseHandZP");
this.cardSortFinish = !0;
this.schedule(this.gameMsgSchedule, .1);
s.emit(l.CS_JOIN_DONE, {});
s.LogsClient(g.LogsEvents.SOCKET_LINK, {
action: g.LogsActions.ENTER_SCENE,
gamtype: "LDZP_SOLO"
});
},
addEvents: function() {
this.startAutoBtn.on(cc.Node.EventType.TOUCH_END, this.onStartAuto, this);
this.cancelAutoBtn.on(cc.Node.EventType.TOUCH_END, this.onCancelAuto, this);
this.exitBtn.on(cc.Node.EventType.TOUCH_END, this.onClickExit, this);
v.EventManager.addEventListener(g.GameEventNames.LDZP_SHUFFLE_CARD, this.summaryHandleGame, this);
},
removeEvents: function() {
this.startAutoBtn.off(cc.Node.EventType.TOUCH_END, this.onStartAuto, this);
this.cancelAutoBtn.off(cc.Node.EventType.TOUCH_END, this.onCancelAuto, this);
this.exitBtn.off(cc.Node.EventType.TOUCH_END, this.onClickExit, this);
v.EventManager.removeEventListener(g.GameEventNames.LDZP_SHUFFLE_CARD, this.summaryHandleGame, this);
},
initChatContent: function() {
var e = this;
this.node.on("chatAlready", function() {
var t = cc.find("Canvas"), n = {
str: [ "赢了钱请大家去满天红吃火锅", "不要走决战到天亮", "跟你们打牌真是太开心了", "手气不好建议你去趟台湾岛", "在哪个山沟沟里，信号这么差", "烦死了又胡低章", "快点啊,头发都等白了", "跟你合作真是太愉快了", "你的牌打得也太好了", "别太算死了牌都不敢跟你打了", "看牛的孩子伤不起啊", "碰到个鬼又胡坐春" ],
url: "ChatImg/Game08",
aniPos: [ cc.v2(60 - t.width / 2 + g.FitScreen, -145), cc.v2(60 - t.width / 2 + g.FitScreen, 273) ],
msgPos: [ cc.v2(69.5 - t.width / 2 + g.FitScreen + 50, -137), cc.v2(69.5 - t.width / 2 + g.FitScreen + 50, 277) ],
facePos: [ cc.v2(60 - t.width / 2 + g.FitScreen + 50, -191), cc.v2(60 - t.width / 2 + g.FitScreen + 50, 227) ],
faceAnchor: [ {
x: 0,
y: 0
}, {
x: 1,
y: 1
}, {
x: 0,
y: 1
} ]
};
e.chat.init(n);
});
},
gameMsgSchedule: function() {
if (this.cardSortFinish) if (this._delayTime > 0) this._delayTime--; else if (!(s._queueGameMsg.length <= 0)) {
var e = s._queueGameMsg.shift();
e.route != u.SC_JOIN_TABLE && e.route != u.SC_RECONNECT && e.route != u.SC_GAME_DATA || (this.alReady = !0);
if (this.alReady) {
console.log(e.route + ":  ", e);
switch (e.route) {
case u.SC_RECONNECT:
case u.SC_GAME_DATA:
this.reconnect(e.data);
break;

case u.SC_JOIN_TABLE:
e.data.turn = 0;
o.turn = 0;
o.gameSummary = null;
this.initTable(e.data);
break;

case u.SC_JOIN_GAME:
this.joinGame(e.data);
break;

case u.SC_NEXT:
case u.SC_GAME_READY:
this.gameReady(e.data);
break;

case u.SC_CHANGE_STATUS:
this.changeStatus(e.data);
break;

case u.SC_GAME_INIT:
this.gameInit(e.data);
break;

case u.SC_SHOW_CARD:
this.showCard(e.data);
break;

case u.SC_SYNC_HANDS:
this.syncCard(e.data);
break;

case u.SC_PLAY_CARD:
this.playCard(e.data);
break;

case u.SC_PASS_CARD:
cc.log(e.data);
this.passCard(e.data);
break;

case u.SC_QUEST:
this.showQuest(e.data);
break;

case u.SC_GAME_VOTE:
break;

case u.SC_PLAYER_LEAVE:
this.leavePlayer(e.data);
break;

case u.SC_ACTION:
this.action(e.data);
break;

case u.SC_ROUND_SUMMARY:
this.roundSummary(e.data);
break;

case u.SC_GET_CARD:
this.newGetCard(e.data);
break;

case u.SC_GAME_CHAT:
this.chat.contentFly(e.data);
break;

case u.SC_SYSTEM_NOTICE:
this.chat.systemNotice(e.data);
break;

case "SC_DEAD":
this.dead(e.data);
break;

case u.SC_PIAO:
2 == o.config.person ? this.showClock([ 0, 1 ], o.options.clock) : this.showClock([ 0, 1, 2 ], o.options.clock);
this.hideBet();
this.showPiao();
break;

case u.SC_BET:
this.hideClock(e.data.idx);
this.showBet(e.data);
break;

case u.SC_GAME_DRAW:
break;

case u.SC_REFRESH_CARD:
c.player.card = e.data.card;
break;

case u.SC_CANCEL_AUTO:
this.cancelAuto(e.data);
break;

case u.SC_START_AUTO:
this.startAuto(e.data);
break;

case u.SC_DISBAND:
this.nodeTx.getComponent("ModuleTouxiang08").txInit(e.data);
break;

case u.SC_TOAST:
m.isNullOrEmpty(e.data.message) || d.alertTip(e.data.message);
break;

case u.SC_GAME_DESTORY:
this.destoryGame();
break;

default:
cc.log(e.route);
}
}
}
},
destoryGame: function() {
s._queueGameMsg = [];
s._queueChatMsg = [];
s.disconnect();
},
initTable: function(e) {
var t = cc.find("Canvas"), n = [ cc.v2(60 - t.width / 2 + g.FitScreen, -191), cc.v2(60 - t.width / 2 + g.FitScreen, 227) ];
o.zhuang = e.banker;
o.status = e.status;
o.options = e.options;
this.exitBtnStatus();
var i = e.idx;
o.idx = e.idx;
o.config = C;
this.lblGameType.string = g.GameName[e.options.gameType];
if (3 == o.options.person) {
this.realIdx = [ 0, 0, 0 ];
this.realIdx[i] = 0;
this.realIdx[(i + 1) % 3] = 1;
this.realIdx[(i + 2) % 3] = 2;
} else {
this.realIdx = [ 0, 0 ];
this.realIdx[i] = 0;
this.realIdx[(i + 1) % 2] = 1;
}
o.realIdx = this.realIdx;
m.isNullOrEmpty(this.players) || this.players.forEach(function(e) {
e.removePlayer();
});
this.players = new Array(o.options.person);
for (var a = 0; a < o.options.person; a++) {
var r = cc.instantiate(this.player);
r.parent = this.bg;
r.position = n[a];
r.zIndex = 1;
this.players[a] = r.getComponent("ModulePlayer08");
}
this.playerInit(e.players);
this.initTableMsg(e);
},
playerInit: function(e) {
var t = this;
e.forEach(function(e) {
if (null != e) {
var n = o.realIdx[e.idx];
t.players[n].init(e);
e.idx == o.idx && o.status == g.GameStatus.WAIT && t.readyBtnStatus(!e.ready);
}
});
},
initTableMsg: function(e) {
this.lblBase.string = "底分: " + m.formatGold(e.options.base);
this.lblNiao.string = "打鸟: " + m.formatGold(e.options.bird);
this.lblTurn.string = 0 == e.turn ? "" : e.turn + "局";
this.lblRoomId.string = "房间号: " + e.tableID;
this.lblDeck.string = "";
},
gameDraw: function() {
var e = this;
this._delayTime = 15;
this.nodeQuestImg.node.position = i[0];
this.nodeQuestImg.node.active = !0;
this.nodeQuestImg.node.opacity = 255;
this.nodeQuestImg.node.scale = 2.5;
this.nodeQuestImg.node.runAction(cc.sequence(cc.callFunc(function() {
e.nodeQuestImg.node.opacity = 255;
}), cc.place(i[0]), cc.scaleTo(.3, 1), cc.delayTime(.5), cc.fadeOut(.3)));
},
showBet: function(e) {
if (-1 != e.piao) {
o.idx == e.idx && (this.nodePiao.active = !1);
var t = o.realIdx[e.idx];
this.players[t].showBet([ "不飘", "飘一", "飘二", "飘三" ][e.piao]);
}
},
hideBet: function() {
this.players.forEach(function(e) {
e.hideBet();
});
},
showPiao: function() {
o.status = g.GameStatus.START;
this.exitBtnStatus();
this.tingNode.active = !1;
this.tingBtn.active = !1;
this.hands.node.destroyAllChildren();
this.nodePiao.active = !0;
this.players.forEach(function(e) {
e.roundReset();
});
this.layoutSummaryHands.forEach(function(e) {
e.node.removeAllChildren();
});
},
btnPiaoCallBack: function(e, t) {
this.nodePiao.active = !1;
switch (t) {
case "0":
s.gameMessage(u.CS_PIAO, {
piao: 0
});
break;

case "1":
s.gameMessage(u.CS_PIAO, {
piao: 1
});
break;

case "2":
s.gameMessage(u.CS_PIAO, {
piao: 2
});
break;

case "3":
s.gameMessage(u.CS_PIAO, {
piao: 3
});
}
},
dead: function(e) {
this.players.forEach(function(t, n) {
o.realIdx[e.idx] == n && t.setQiHu(!0);
});
},
roundSummary: function(e) {
var t = this;
this.hideClock();
this.nodeChi.node = !1;
this.nodeBtn.active = !1;
this.nodeTx.active = !1;
this.hands.node.active = !1;
this.tingNode.active = !1;
this.tingBtn.active = !1;
o.currentPlayer = null;
o.status = e.status;
this.exitBtnStatus();
this.nodeDeck.runAction(cc.moveTo(.5, cc.v2(0, 30)).easing(cc.easeBackInOut()));
var n = cc.instantiate(this.preRoundSummary);
n.zIndex = 15;
n.getComponent("ModuleRoundSummary08").init(e);
this.node.addChild(n, 2, "roundSummary");
e.players.forEach(function(n) {
var i = o.realIdx[n.idx];
t.players[i].totalHuxiLabel.string = m.isNullOrEmpty(e.ach) ? n.scores.turn : "0";
t.players[i].activeAutoPlay(!1);
t.players[i].setQiHu(!1);
n.wallet && t.players[i].setScore(n.wallet);
});
this.readyData = {};
m.isNullOrEmpty(e.ach) ? this.shuffleBtnStatus(!0) : this.readyBtnStatus(!0);
e.finish || this.cancelAuto({
idx: o.idx
});
this.initSummaryHands(e);
},
initSummaryHands: function(e) {
var t = this;
this.layoutSummaryHands.forEach(function(e) {
e.node.removeAllChildren();
});
e.players.forEach(function(e) {
var n = o.realIdx[e.idx];
if (0 != n) {
var i = t.hands.makeHands(e.hands), a = [ [], [], [], [], [], [], [], [], [], [], [], [] ], r = 6 - Math.floor(i.length / 2);
r > 0 && r--;
i.forEach(function(e) {
e.forEach(function(e, i) {
var o = cc.instantiate(t.card);
o.scale = .3;
o.parent = t.layoutSummaryHands[n].node;
o.getComponent("BaseCardZP").init(e);
o._pos = {
x: r,
y: i
};
o.setPosition(29 * o._pos.x - 82, 34 * o._pos.y - 54);
a[r].push(o);
});
r++;
});
}
});
},
gameReady: function(e) {
var t = o.realIdx[e.idx];
if (0 == t) {
this.readyBtnStatus(!1);
this.shuffleBtnStatus(!1);
}
this.players[t].showReady(e);
if (e.idx == o.idx) {
this.layoutSummaryHands.forEach(function(e) {
e.node.removeAllChildren();
});
this.players.forEach(function(e) {
e.roundReset(1);
});
}
},
joinGame: function(e) {
var t = o.realIdx[e.idx];
this.players[t].init(e);
},
passCard: function(e) {
var t = this;
this.hideClock();
this.nodeChi.node = !1;
this.nodeBtn.active = !1;
this._delayTime = 6;
var i = o.realIdx[e.idx];
this.players[i].changeStatus({
offline: !1
});
var a = this.players[i].newQi(e.card, !1), r = this.players[i].qi.position.add(a), s = this.players[i].nodePlayer.position.add(r);
this.currentCard.runAction(cc.sequence(cc.place(n[i].end), cc.delayTime(.3), cc.spawn(cc.moveTo(.2, s), cc.scaleTo(.2, .2)), cc.callFunc(function() {
a.active = !0;
}), cc.callFunc(function() {
t.currentCard.destroy();
})));
},
btnGuoCallBack: function() {
s.gameMessage(u.CS_ANSWER, {
serialID: o.serialID,
answer: -1,
card: this.questCard
});
this.layoutQuest.active = !1;
},
changeStatus: function(e) {
var t = o.realIdx[e.idx];
this.players[t].changeStatus(e);
},
getCard: function(e) {
var t = this;
this._delayTime = 25;
var n = [], i = this.deal(e), r = [], s = null, c = null, l = null, u = null, d = !1;
this.hands._hands.forEach(function(n, i) {
n.forEach(function(a, r) {
if (null == s && a._card == e.card && e.idx == o.idx) {
d = 1 == n.length;
l = i;
u = r;
c = a.position;
a.destroy();
t.hands._hands[i].splice(r, 1);
t.hands.sortHands();
s = e.card;
}
});
});
this.hands._hands.forEach(function(e, t) {
e.length > 0 && e.forEach(function(e) {
r.push(cc.targetedAction(e, cc.sequence(cc.delayTime(t / 10), cc.callFunc(function() {
e.opacity = 255;
}))));
});
});
i.push(cc.spawn(r));
n.push(cc.spawn(i));
var h = o.players[e.idx].prop.sex, f = e.card + ".mp3";
this.lblDeck.string = "" + e.deck;
o.currentCard = e.card;
var p = o.realIdx[e.idx];
this.layoutShowCard.node.stopAllActions();
this.layoutShowCard.node.removeAllChildren();
var m = cc.instantiate(this.show);
m.parent = this.layoutShowCard.node;
m.position = a[p].begin;
m.opacity = 0;
m.getComponent("BaseCardZP").init(e.card);
n.push(cc.targetedAction(m, cc.sequence(cc.callFunc(function() {
t.playManageAudio(h + "_" + f);
}), cc.fadeIn(.2), cc.delayTime(.5), cc.spawn(cc.moveTo(.2, e.idx == o.idx ? this.hands.node.position.add(c) : a[p].end), cc.scaleTo(.2, 1)), cc.callFunc(function() {
if (e.idx == o.idx) {
var n = cc.instantiate(t.card);
n.parent = t.hands.node;
n._card = e.card;
n.scale = .8;
n._pos = {
x: l,
y: u
};
n.getComponent("BaseCardZP").init(e.card);
d ? t.hands._hands.splice(l + 1, 0, [ n ]) : t.hands._hands[l].splice(u, 0, n);
t.hands._hands[l].forEach(function(e) {
e.pao && n._card == e._card && (n.pao = !0);
});
t.hands.sortHands();
}
}), cc.callFunc(function() {
m.destroy();
}))));
this.node.runAction(cc.sequence(n));
},
newGetCard: function(e) {
var t, i = this, r = [], s = [];
this._delayTime = 6;
if (e.idx == o.idx) {
(t = cc.instantiate(this.show)).getComponent("BaseCardZP").init(e.card, !0);
t.parent = this.node;
t.position = a[0].begin;
var c = 0, l = [];
this.hands._hands.forEach(function(t) {
t.length;
t.forEach(function(t) {
if (t._card == e.card) {
c++;
l.push(t);
}
});
});
var u = [], d = null;
if (2 == c) {
for (var h = 0; h < 3; h++) {
var f = cc.instantiate(this.card);
f.scale = .8;
f.parent = this.hands.node;
f.pao = !0;
f._pos = {
x: 0,
y: h
};
f._card = e.card;
f.active = !1;
f.getComponent("BaseCardZP").init(e.card, !1, !0);
u.push(f);
}
for (var p = function() {
var e = l.shift();
i.hands._hands[e._pos.x].splice(e._pos.y, 1);
i.hands.sortHands();
s.push(cc.targetedAction(e, cc.callFunc(function() {
e.destroy();
})));
cc.log("222222222222", s);
}; l.length > 0; ) p();
this.hands._hands.splice(0, 0, u);
} else {
(d = cc.instantiate(this.card)).scale = .8;
d.parent = this.hands.node;
d.getComponent("BaseCardZP").init(e.card);
d._card = e.card;
d.pao = !1;
d.active = !1;
this.hands._hands[12].splice(0, 0, d);
}
r.push(cc.targetedAction(t, cc.sequence(cc.delayTime(.3), cc.moveTo(.3, n[0].begin), cc.callFunc(function() {
t.destroy();
}))));
s.length > 0 && r.push(cc.spawn(s));
r.push(cc.callFunc(function() {
u.forEach(function(e) {
e.active = !0;
});
}));
r.push(cc.callFunc(function() {
i.hands.sortHands();
}));
null != d && r.push(cc.callFunc(function() {
d.active = !0;
}));
this.node.runAction(cc.sequence(r));
cc.log(this.hands._hands[7]);
} else {
var m, g = o.realIdx[e.idx];
(m = cc.instantiate(this.show)).getComponent("BaseCardZP").init(e.card, !0);
m.parent = this.node;
m.position = a[g].begin;
m.runAction(cc.sequence(cc.delayTime(.3), cc.moveTo(.3, a[g].end), cc.delayTime(.3), cc.callFunc(function() {
m.destroy();
})));
}
},
qihu: function() {
var e = this;
d.showConfirm("是否弃胡？", function() {
s.gameMessage(u.CS_PLAY_CARD, -1);
e.btnQihu.active = !1;
});
},
gameInit: function(e) {
var t = this;
this.node.getChildByName("roundSummary") && this.node.getChildByName("roundSummary").removeFromParent();
this.nodeTx.active = !1;
this.nodeDeck.active = !0;
this.lblDeck.string = "19";
o.zhuang = e.banker;
o.status = g.GameStatus.START;
this.exitBtnStatus();
o.currentPlayer = null;
o.zhao = [];
this.layoutSummaryHands.forEach(function(e) {
e.node.removeAllChildren();
});
this.lblTurn.string = (0 == e.turn ? 1 : e.turn) + "局";
o.turn = e.turn;
this.players.forEach(function(e) {
e.roundReset();
});
if (e.shuffle) {
this.cutCount = 0;
this.cutIdx = [];
this.shuffleData = e;
e.shuffle.forEach(function(e) {
if (e.shuffle) {
t.cutCount++;
t.cutIdx.push(e.idx);
}
o.realIdx[e.idx];
});
this.handleShuffle();
} else {
this.hands.init(e.hands, !1);
this.cardSortFinish = !1;
this.deal();
}
this.checkTing();
},
handleShuffle: function() {
var e = this;
if (this.cutCount > 0) {
this._delayTime = 100;
var t = new cc.Node();
t.parent = this.node;
t.addComponent(sp.Skeleton);
var n = t.getComponent(sp.Skeleton);
n.skeletonData = this.cutAnim;
n.premultipliedAlpha = !1;
n.setAnimation(1, "idle", !1);
this.cutTips.active = !0;
var i = this.cutIdx.shift();
this.cutTips.getChildByName("name").getComponent(cc.Label).string = o.players[i].prop.name + "正在洗牌";
n && n.setCompleteListener(function() {
t.destroy();
e.cutTips.active = !1;
e.cutCount--;
e.handleShuffle();
});
} else {
this.hands.init(this.shuffleData.hands, !1);
this.cardSortFinish = !1;
this.deal();
}
},
reconnect: function(e) {
var t = this;
this.initTable(e);
e.disband && this.nodeTx.getComponent("ModuleTouxiang08").txInit(e.disband);
switch (e.status) {
case g.GameStatus.WAIT:
this.nodeDeck.position = cc.v2(0, 30);
break;

case g.GameStatus.START:
this.shuffleBtnStatus(!1);
this.readyBtnStatus(!1);
e.players.forEach(function(e) {
if (null != e) {
if (o.config.piao) {
var n = {
idx: e.idx,
piao: e.piao
};
t.showBet(n);
}
if (e.idx == o.idx && -1 == e.piao) {
t.showPiao();
t.showClock([ e.idx ], e.clock);
}
}
});
this.nodeDeck.position = cc.v2(0, 30);
break;

case g.GameStatus.PLAY:
case g.GameStatus.QUEST:
this.nodeDeck.position = cc.v2(0, 270);
this.nodeDeck.active = !0;
this.readyBtnStatus(!1);
this.shuffleBtnStatus(!1);
o.turn = e.turn;
this.btnOutCard.active = e.currentIDX == o.idx;
this.hands.node.active = !0;
o.zhao = [];
this.hands.init(e.hands, !0);
this.lblDeck.string = "" + e.decks;
e.players.forEach(function(e) {
if (null != e) {
var n = o.realIdx[e.idx];
t.players[n].hideReady();
t.players[n].refreshHuxi();
t.players[n].activeAutoPlay(e.auto, n);
o.idx == e.idx && t.changeAutoBtn(e.auto, 1);
}
});
e.currentCard && (o.currentCard = e.currentCard.card);
null != e.currentCard && 0 != e.currentCard.active ? this.showCard(e.currentCard) : this.checkTing();
if (null != e.currentIDX) {
o.currentPlayer = e.currentIDX;
var n = {
idx: e.currentIDX
};
this.players.forEach(function(e) {
e.active(n);
});
}
if (!m.isNullOrEmpty(e.quest)) {
e.quest.clock = e.clock;
this.showQuest(e.quest);
}
break;

case g.GameStatus.SUMMARY:
case g.GameStatus.CHAPTER:
this.nodeDeck.position = cc.v2(0, 30);
this.readyBtnStatus(!1);
e.players.forEach(function(e) {
e.idx != o.idx || e.ready || t.shuffleBtnStatus(!0);
});
}
},
leavePlayer: function() {
this.node.removeAllChildren();
s.disconnect();
},
deal: function() {
var e = this;
this._delayTime = 10;
for (var t = cc.url.raw("resources/Audio/Common/deal.mp3"), n = [], i = [], a = function(i) {
var a = cc.instantiate(e.longCards);
a.parent = e.nodeDeck;
a.position = cc.v2(0, 6);
var r = cc.delayTime(.1 * i), o = cc.moveBy(.4, cc.v2(0, 100)), s = cc.fadeOut(.4), c = cc.spawn(o, s), l = cc.callFunc(function() {
a.destroy();
}), u = cc.sequence(r, d, c, l), d = cc.callFunc(function() {
f.getInstance().playSFX(t);
});
n.push(cc.targetedAction(a, u));
}, r = 0; r < 5; r++) a(r);
this.nodeDeck.runAction(cc.sequence(cc.spawn(n), cc.moveTo(.5, cc.v2(0, 270))));
try {
this.hands._hands.forEach(function(e) {
e.length > 0 && 4 != e.length && e.forEach(function(e) {
var t = e.x;
i.push(cc.targetedAction(e, cc.sequence(cc.callFunc(function() {
e.x = -30;
e.opacity = 255;
}), cc.moveTo(.7, cc.v2(t, e.y)).easing(cc.easeBackInOut()))));
});
});
this.node.runAction(cc.sequence(cc.callFunc(function() {
e.hands.node.active = !0;
}), cc.spawn(i), cc.callFunc(function() {
e.hands.sortHands();
e.cardSortFinish = !0;
})));
} catch (e) {
p.reportError(e);
this.hands.sortHands();
this.cardSortFinish = !0;
}
},
checkCP: function(e) {
var t = o.realIdx[e.idx], n = 0;
this.players[t].ground.content.forEach(function(e) {
"pao" != e.type && "ti" != e.type || n++;
});
cc.log("chongpao", n);
if (n > 0 && ("pao" == e.type || "ti" == e.type)) {
cc.log("1111");
this._delayTime = 10;
}
},
action: function(e) {
var t = this;
this.hideClock();
this.changeAutoState(e);
("pao" == e.type && "DECK" == e.src || "ti" == e.type && "GROUND" == e.src || "pao" == e.type && "GROUND" == e.src || "pao" == e.type && "HANDS" == e.src) && (this._delayTime = 8);
this._delayTime = e.idx == o.idx && "hu" != e.type ? 2 : 5;
"hu" == e.type && (this._delayTime = 15);
this.layoutQuest.active = !1;
var n = o.realIdx[e.idx];
"ti" == e.type && "HANDS" == e.src || this.layoutShowCard.node.removeAllChildren();
this.checkCP(e);
this.nodeQuestImg.node.position = i[n];
this.nodeQuestImg.node.active = !0;
this.nodeQuestImg.node.opacity = 0;
switch (e.type) {
case "chi":
this.nodeQuestImg.string = "吃";
break;

case "peng":
this.nodeQuestImg.string = "碰";
break;

case "wei":
this.nodeQuestImg.string = "偎";
break;

case "ti":
this.nodeQuestImg.string = "提";
break;

case "pao":
this.nodeQuestImg.string = "跑";
break;

case "bi":
break;

case "hu":
this.players.forEach(function(t) {
t.active(e);
});
e.hu, this.nodeQuestImg.string = "胡";
break;

default:
cc.log(e.type);
}
if (e.idx == o.idx) {
switch (e.type) {
case "chi":
this.nodeQuestImg.string = "吃";
e.cards.forEach(function(e, n) {
0 != n && t.hands.removeHands(e);
});
break;

case "peng":
this.nodeQuestImg.string = "碰";
this.hands.removeHands(e.card);
this.hands.removeHands(e.card);
break;

case "wei":
this.nodeQuestImg.string = "偎";
this.hands.removeHands(e.card);
this.hands.removeHands(e.card);
break;

case "ti":
this.nodeQuestImg.string = "提";
this.hands.removeHands(e.card);
this.hands.removeHands(e.card);
this.hands.removeHands(e.card);
this.hands.removeHands(e.card);
break;

case "pao":
this.nodeQuestImg.string = "跑";
this.hands.removeHands(e.card);
this.hands.removeHands(e.card);
this.hands.removeHands(e.card);
break;

case "bi":
e.cards.forEach(function(e) {
t.hands.removeHands(e);
});
break;

case "hu":
break;

default:
cc.log(e.type);
}
this.hands.sortHands();
}
var a = [], r = !1, s = !1;
if ("pao" == e.type && "DECK" == e.src || "ti" == e.type && "GROUND" == e.src || "pao" == e.type && "GROUND" == e.src || "pao" == e.type && "HANDS" == e.src) {
cc.log("welcome to the 绝对领域");
this.players[n].ground.content.forEach(function(i, a) {
if (e.card == i.cardValue && ("peng" == i.type || "wei" == i.type)) {
i.remove();
r = "wei" == i.type && "HANDS" == e.src;
s = "ti" == e.type && "GROUND" == e.src;
t.players[n].ground.content.splice(a, 1);
t.players[n].ground.length--;
t.players[n].resetGroupPos();
}
});
}
var c = this.players[n].newGroup(e, !1);
this.nodeQuestImg.node.scale = 4;
a.push(cc.targetedAction(this.nodeQuestImg.node, cc.sequence(cc.place(i[n]), cc.spawn(cc.fadeIn(.2), cc.scaleTo(.2, 1)), cc.scaleTo(.2, 2), cc.fadeOut(.3))));
a.push(c[0]);
this.node.runAction(cc.spawn(a));
this.playAudio(e, !1, r, s);
"hu" != e.type && this.checkTing();
},
playAudio: function(e, t, n, i) {
var a = o.realIdx[e.idx], r = e.type, s = o.players[e.idx].prop.sex;
"pao" == r && "PLAY" == e.src && (r = "kaijiao");
t && (r = "pao");
n && (r = "fangjiao");
i && (r = "ti");
var c = 0;
this.players[a].ground.content.forEach(function(e) {
"pao" != e.type && "ti" != e.type || c++;
});
c > 1 && "pao" == e.type && (r = "chongpao");
"ti" == e.type && "HANDS" == e.src && (r = "long");
(32 & e.hu) > 0 && (r = "zimo");
var l = r + ".mp3";
this.playManageAudio(s + "_" + l);
},
showCard: function(e) {
this.showClock([ e.idx ], e.clock);
this.changeAutoState(e);
e.idx == o.idx && this.checkTing(e.card);
var t = o.realIdx[e.idx];
this._delayTime = 2;
this.players.forEach(function(t) {
t.active(e);
});
var i = "DECK" == e.src;
if ("PLAY" == e.src) {
e.offline = !1;
this.players[t].changeStatus(e.offline);
}
this.btnOutCard.active = !1;
o.currentPlayer = null;
var a = o.players[e.idx].prop.sex, s = e.card + ".mp3";
this.playManageAudio(a + "_" + s);
o.currentCard = e.card;
this.layoutShowCard.node.stopAllActions();
this.layoutShowCard.node.removeAllChildren();
var c = cc.instantiate(this.show);
c.zIndex = 21;
c.parent = this.layoutShowCard.node;
c.position = "DECK" == e.src ? r.begin : n[t].begin;
c.getComponent("BaseCardZP").init(e.card, !0, !1, i);
c.position = n[t].end;
c.runAction(cc.sequence(cc.scaleTo(.1, 1.3), cc.scaleTo(.1, 1.1)));
this.currentCard = c;
m.isNullOrEmpty(e.deck) || (this.lblDeck.string = "" + e.deck);
},
playCard: function(e) {
if (typeof e.hands != Number || this.hands.node.childrenCount == e.hands) {
this.showClock([ e.idx ], e.clock);
o.realIdx[e.idx];
o.currentPlayer = e.idx;
this.players.forEach(function(t) {
t.active(e);
});
this.btnOutCard.active = e.idx == o.idx;
} else d.showTipsMsg("网络连接不稳定", function() {
cc.director.loadScene("Update");
});
},
sendContinue: function() {
d.playSfx();
s.gameMessage(u.CS_GAME_READY, {});
},
sendReady: function(e, t) {
d.playSfx();
this.readyData.plus = -1 != parseInt(t);
this.shuffleBtnStatus(!0);
this.readyBtnStatus(!1);
},
summaryHandleGame: function(e) {
var t = e.data ? 1 : -1;
this.shuffleCard("", t);
},
shuffleCard: function(e, t) {
d.playSfx();
this.readyData.shuffle = -1 != parseInt(t);
s.gameMessage(u.CS_GAME_READY, this.readyData);
},
stopSchedule: function() {
cc.director.getScheduler().unscheduleAllForTarget(this);
},
emitVote: function() {
d.showConfirm("是否解散游戏", function() {
s.gameMessage(u.CS_GAME_VOTE, {
agree: !0
});
});
},
emitLeave: function() {
0 == o.idx ? d.showConfirm("解散游戏不扣房卡，是否解散游戏", function() {
s.gameMessage(u.CS_PLAYER_LEAVE, {});
}) : s.gameMessage(u.CS_PLAYER_LEAVE, {});
},
showQuest: function(e) {
var t = this;
if (!m.isNullOrEmpty(e.quests)) {
e.idx || (e.idx = o.idx);
this.showClock([ e.idx ], e.clock);
this.layoutQuest.active = !0;
this.nodeBtn.active = !0;
this.nodeChi.active = !1;
this.quest = [ [], [], [] ];
this.questChi = [];
o.serialID = e.serialID;
e.quests.forEach(function(e, n) {
e.idx = n;
e.card = o.currentCard;
t.questCard = e.card;
switch (e.type) {
case "chi":
o.currentCard = e.options[0].cards[0];
t.quest[0].push(e);
t.questChi.push(e);
break;

case "peng":
o.currentCard = e.card;
t.quest[1].push(e);
break;

case "hu":
o.currentCard = e.card;
t.quest[2].push(e);
}
});
this.btnQuest.forEach(function(e, n) {
e.active = t.quest[n].length > 0;
});
}
},
btnQuestCallFunc: function(e, t) {
var n = this;
switch (t) {
case "0":
this.quest[2].length > 0 ? d.showConfirm("您确定放弃胡牌?", function() {
n.showQuestChi();
}) : this.showQuestChi();
break;

case "1":
if (this.quest[2].length > 0) d.showConfirm("您确定放弃胡牌?", function() {
s.gameMessage(u.CS_ANSWER, {
serialID: o.serialID,
answer: n.quest[1][0].idx,
card: o.currentCard
});
n.layoutQuest.active = !1;
}); else {
s.gameMessage(u.CS_ANSWER, {
serialID: o.serialID,
answer: this.quest[1][0].idx,
card: o.currentCard
});
this.layoutQuest.active = !1;
}
break;

case "2":
s.gameMessage(u.CS_ANSWER, {
serialID: o.serialID,
answer: this.quest[2][0].idx,
card: o.currentCard
});
this.layoutQuest.active = !1;
break;

case "3":
if (this.nodeChi.active) {
this.nodeChi.node = !1;
this.nodeBtn.active = !0;
} else if (this.quest[2].length > 0) d.showConfirm("您确定放弃胡牌?", function() {
s.gameMessage(u.CS_ANSWER, {
serialID: o.serialID,
answer: -1,
card: o.currentCard
});
n.layoutQuest.active = !1;
}); else {
s.gameMessage(u.CS_ANSWER, {
serialID: o.serialID,
answer: -1,
card: o.currentCard
});
this.layoutQuest.active = !1;
}
}
},
showQuestChi: function() {
var e = this;
this.nodeBtn.active = !1;
this.nodeChi.active = !0;
this.chiContent1.removeAllChildren();
this.chiContent2.removeAllChildren();
this.quest[0].forEach(function(t, n) {
var i = cc.instantiate(e.chiBox);
if (n > 3) {
i.parent = e.chiContent2;
e.chiContent1.y = 147;
} else {
e.chiContent1.y = 0;
i.parent = e.chiContent1;
}
i.getComponent("ModuleChiBoxZp").init(t);
});
},
showBi: function(e, t, n, i) {
var a = this;
if (null == n) {
n = [];
this.quest[0].forEach(function(e) {
n.push(JSON.parse(JSON.stringify(e)));
});
}
this.layoutGroup.node.active = !1;
this.layoutBi.node.active = !0;
this.chiIdx = [];
this.layoutShowChi.node.removeAllChildren();
this.layoutBi.node.removeAllChildren();
var r = this.layoutShowChi.node, o = cc.instantiate(this.group);
o.parent = r;
o.scale = .75;
o.getComponent("BaseGroupZP").init(e, {
click: !1,
bg: !0
});
this.contentShowChi.push(o);
if (null != t.cards) {
var s = cc.instantiate(this.group);
s.parent = r;
s.getComponent("BaseGroupZP").init(t, {
click: !1,
bg: !0
});
this.contentShowChi.push(s);
}
for (var c = 0; c < n.length; c++) {
var l, u = {
x: c,
y: l = i ? n[c].options.findIndex(function(e) {
return JSON.stringify(e.cards) == JSON.stringify(t.cards);
}) : n[c].options.findIndex(function(t) {
return JSON.stringify(t.cards) == JSON.stringify(e.cards);
})
};
if (l > -1) {
i && 3 == this.quest[0][c].options.length && this.chiIdx.push(u);
i || this.chiIdx.push(u);
}
}
for (var d = 0; d < n.length; d++) {
if (!i) {
var h = n[d].options.findIndex(function(t) {
return JSON.stringify(t.cards) == JSON.stringify(e.cards);
});
h > -1 && n[d].options.splice(h, 1);
}
if (null != t.cards) {
var f = n[d].options.findIndex(function(e) {
return JSON.stringify(e.cards) == JSON.stringify(t.cards);
});
cc.log("删除删除删除删除", f);
f > -1 && n[d].options.splice(f, 1);
}
}
var p = [];
this.chiIdx.forEach(function(i) {
n[i.x].options.forEach(function(r) {
if (p.findIndex(function(e) {
return JSON.stringify(e) == JSON.stringify(r.cards);
}) < 0) {
var o = cc.instantiate(a.group);
o.parent = a.layoutBi.node;
o.scale = .75;
r.type = "chi";
r.idx = n[i.x].idx;
o.getComponent("BaseGroupZP").init(r, {
click: 1 == n[i.x].options.length || 3 == a.contentShowChi.length,
bg: !0
});
n[i.x].options.length > 1 && a.contentShowChi.length < 3 && o.on("touchend", function() {
t = {
type: "chi",
cards: r.cards,
idx: n[i.x].idx,
xi: 0,
card: null
};
a.showBi(e, t, n, !0);
});
p.push(r.cards);
}
});
});
},
quitChi: function() {
if (this.layoutBi.node.active) {
this.layoutBi.node.active = !1;
this.layoutBi.node.removeAllChildren();
this.layoutGroup.node.active = !0;
this.layoutShowChi.node.removeAllChildren();
this.showQuestChi();
} else {
this.nodeChi.active = !1;
this.nodeBtn.active = !0;
}
},
showClock: function(e, t) {
var n = this;
this.hideClock();
if (!m.isNullOrEmpty(e)) {
this.clockSprite = [];
var i = Math.max((t - m.getTimeStamp()) / 1e3, 0);
e.forEach(function(e) {
n.players[o.realIdx[e]].showClock(i);
n.clockSprite.push(o.realIdx[e]);
});
}
},
hideClock: function(e) {
var t = this;
void 0 === e && (e = -1);
m.isNullOrEmpty(this.clockSprite) || (-1 == e ? this.clockSprite.forEach(function(e) {
t.players[e].hideClock();
}) : this.players[o.realIdx[e]].hideClock());
},
cancelAuto: function(e) {
var t = o.realIdx[e.idx];
this.players[t].activeAutoPlay(!1, t);
if (o.idx == e.idx) {
this.startAutoBtn.active = !0;
this.autoMask.active = !1;
}
},
startAuto: function(e) {
var t = o.realIdx[e.idx];
this.players[t].activeAutoPlay(!0, t);
if (o.idx == e.idx) {
this.startAutoBtn.active = !1;
this.autoMask.active = !0;
}
},
changeAutoBtn: function(e) {
this.startAutoBtn.active = !e;
this.autoMask.active = e;
},
changeAutoState: function(e) {
var t = o.realIdx[e.idx];
this.players[t].activeAutoPlay(e.auto, t);
o.idx == e.idx && this.changeAutoBtn(e.auto, 2);
},
onStartAuto: function() {
if (o.status == g.GameStatus.START || o.status == g.GameStatus.QUEST || o.status == g.GameStatus.PLAY) {
this.startAutoBtn.active = !1;
this.autoMask.active = !0;
s.gameMessage(u.CS_START_AUTO, {});
}
},
onCancelAuto: function() {
this.startAutoBtn.active = !0;
this.autoMask.active = !1;
s.gameMessage(u.CS_CANCEL_AUTO, {});
},
syncCard: function(e) {
this._delayTime = 3;
this.hands.syncCard(e);
},
onClickExit: function() {
var e = this;
d.playSfx();
if (o.status != g.GameStatus.START && !this.onExitting) {
this.onExitting = !0;
d.showConfirm("是否退出游戏", function() {
s.gameMessage(u.CS_PLAYER_LEAVE, {});
g.ShowTablePop = !0;
e.onExitting = !1;
}, function() {
e.onExitting = !1;
});
}
},
checkTing: function(e, t) {
var n = this;
this.tingContent.removeAllChildren();
var i = [], a = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
(e || 0 == e) && a[e]++;
this.players.forEach(function(e) {
e.ground.content.forEach(function(e) {
switch (e.type) {
case "chi":
case "bi":
a[e.cards[0]]++;
a[e.cards[1]]++;
a[e.cards[2]]++;
break;

case "peng":
case "wei":
a[e.cardValue] += 3;
break;

case "pao":
case "ti":
a[e.cardValue] += 4;
}
});
});
this.players.forEach(function(e) {
e.qi.content.forEach(function(e) {
a[e]++;
});
});
try {
var r = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
this.hands._hands.forEach(function(e) {
e.forEach(function(e) {
r[e._card]++;
});
});
(t || 0 == t) && r[t]--;
r.forEach(function(e, t) {
e > 0 && (a[t] = a[t] + e);
});
this.players[0].ground.content.forEach(function(e) {
var t = {
type: e.type,
xi: e.xi,
card: e.cardValue,
cards: e.cards
};
i.push(t);
});
var s = [];
this.showCardTing(r, a, i);
r.forEach(function(e, t) {
if (a[t] < 4) {
var n = JSON.parse(JSON.stringify(i));
h.makeHu(r, n, t, o.config) && s.push(t);
}
});
this.tingNode.active = s.length > 0;
for (var c = [], l = 0; l < 20; l++) c.push(0);
s.forEach(function(e) {
c[e]++;
});
s.length > 0 && c.forEach(function(e, t) {
if (e > 0) {
var i = cc.instantiate(n.tingItem);
i.width = 48.5;
i.height = 55.5;
i.parent = n.tingContent;
var r = 4 - a[t];
i.getComponent("ModuleTingItem").init(t, !1, r);
}
});
} catch (e) {}
},
showTingNode: function() {
d.playSfx();
this.tingNode.active = !this.tingNode.active;
},
showCardTing: function(e, t, n) {
var i = [];
e.forEach(function(a, r) {
if (0 != a && 4 != a && 3 != a) {
var s = e.concat();
s[r]--;
for (var c = !1, l = 0; l < s.length; l++) if (t[l] < 4) {
var u = JSON.parse(JSON.stringify(n));
if (h.makeHu(s, u, l, o.config)) {
c = !0;
break;
}
}
c && i.push(r);
}
});
for (var a = 0; a < this.hands._hands.length; a++) 0 != this.hands._hands[a].length && this.hands._hands[a].forEach(function(e) {
e.getComponent("BaseCardZP").showTing(-1 != i.indexOf(e._card));
});
},
tingNodeAnim: function() {},
onGiveUpHu: function() {
var e = this;
d.playSfx();
if (!this.giveUpHuing) {
this.giveUpHuing = !0;
d.showConfirm("是否弃胡？", function() {
s.gameMessage(u.CS_PLAY_CARD, -1);
e.giveUpHuing = !1;
}, function() {
e.giveUpHuing = !1;
});
}
},
onQuickFinish: function() {
var e = this;
d.playSfx();
if (!this.quickFinished) {
this.quickFinished = !0;
d.showConfirm("是否结束本局游戏？", function() {
s.gameMessage(u.CS_DISBAND, "allow");
e.quickFinished = !1;
}, function() {
e.quickFinished = !1;
});
}
},
exitBtnStatus: function() {
this.exitBtn.active = o.status == g.GameStatus.WAIT || o.status == g.GameStatus.DESTORY;
},
readyBtnStatus: function(e) {
this.birdReadyBtn.active = e;
this.normalReadyBtn.active = e;
},
shuffleBtnStatus: function(e) {
this.shuffleBtn.active = e;
this.unShuffleBtn.active = e;
},
onDestroy: function() {
this.removeEvents();
this.removeGoEasyEvents();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../GameBase/Module/ModuleClock": "ModuleClock",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/PACK": "PACK",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/native-extend": "native-extend",
"../../../Main/Script/utils": "utils",
"../../../script/ui/hall/data/App": "App",
"../Script/ModuleTips08": "ModuleTips08",
GameBase: "GameBase",
"audio-ctrl": "audio-ctrl"
} ],
SceneTable09: [ function(e, t) {
"use strict";
cc._RF.push(t, "ca4b0/bxAVLdpdiHSriuAKN", "SceneTable09");
var n = e("../../../Main/Script/ROUTE"), i = e("../../../Main/NetWork/Connector"), a = e("../../../Main/Script/DataBase"), r = e("../../../Main/Script/PACK"), o = e("Logic_09"), s = e("../../../Main/Script/utils"), c = e("../../../Main/Script/native-extend").Social, l = e("../../../Main/Script/audio-ctrl"), u = e("../../../Main/Script/Cache"), d = e("../../../GameBase/GameConfig").GameConfig, h = e("../../../Main/Script/TableInfo"), f = (cc.v2(-514, -240), 
cc.v2(508, 187), cc.v2(-168, 283), cc.v2(-515, 130), cc.v2(-490, -294), cc.v2(526, 121), 
cc.v2(-61, 295), cc.v2(-492, 70), cc.v2(-380, -294), cc.v2(526, 95), cc.v2(-61, 264), 
cc.v2(-492, 41), {
plus: !0,
shun: !1,
bomb: !0,
clan: !0,
turn: 10
});
cc.Class({
extends: e("GameBase"),
properties: {
_delayTime: 0,
prePlayerInfo: cc.Prefab,
layerHandCards: cc.Node,
hands: [],
lblRoomId: cc.Label,
lblJushu: cc.Label,
lblGameType: cc.Label,
lblBase: cc.Label,
lblRules: cc.Node,
btnPass: cc.Node,
btnTips: cc.Node,
btnPlayCards: cc.Node,
dropCards: [ cc.Layout ],
preCards: cc.Prefab,
imgPass: [ cc.Node ],
nodePlayerInfo: [],
preCoin: cc.Prefab,
preScore: cc.Prefab,
btnReady: cc.Node,
birdBtnReady: cc.Node,
bgTable: cc.Layout,
btnCut: cc.Node,
aniNode: cc.Prefab,
pokerSkeleton: [ sp.SkeletonData ],
preType: cc.Prefab,
preCount: cc.Prefab,
bgCount: [ cc.Layout ],
bgSpriteFrame: [ cc.SpriteFrame ],
sprDisnable: cc.Node,
nodeCut: cc.Node,
nodeBtn: cc.Node,
nodeBtnTips: cc.Node,
sfxClip: {
type: cc.AudioClip,
default: null
},
lblCurrentScore: cc.Label,
layerRemainCard: cc.Node,
nodeRemainCard: cc.Prefab,
layerSelect: cc.Node,
layerShowCards: cc.Node,
prePlayCards: cc.Prefab,
nodeBao: cc.Node,
maskPos: cc.Node,
nodeTx: cc.Node,
action: [ cc.Node ],
nodeHands: [ cc.Node ],
xiHands: [],
autoBtn: cc.Node,
exitBtn: cc.Node,
autoMask: cc.Node,
bgNode: cc.Sprite,
summaryPrefab: cc.Prefab,
gpsBtn: cc.Node,
wuNode: cc.Node,
shiNode: cc.Node,
kNode: cc.Node,
cutAnim: sp.SkeletonData,
cutTips: cc.Node,
bomb: cc.Prefab,
lastTxTime: 0
},
onLoad: function() {
this.initChatContent();
this.initGameBase();
this.addEvents();
h.ready = !1;
h.idx = -1;
i.emit(r.CS_JOIN_DONE, {});
i.LogsClient(d.LogsEvents.SOCKET_LINK, {
action: d.LogsActions.ENTER_SCENE,
gamtype: "XHZD"
});
this.schedule(this.gameMsgSchedule, .1);
},
addEvents: function() {
this.node.on(d.GameEventNames.ZD_BACK_HALL, this.onClickExit, this);
this.node.on(d.GameEventNames.ZD_CONTINUE_GAME, this.continueGame, this);
},
removeEvents: function() {
this.node.off(d.GameEventNames.ZD_BACK_HALL, this.onClickExit, this);
this.node.off(d.GameEventNames.ZD_CONTINUE_GAME, this.continueGame, this);
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else if (!(i._queueGameMsg.length <= 0)) {
var e = i._queueGameMsg.shift();
e.route != n.SC_JOIN_TABLE && e.route != n.SC_RECONNECT && e.route != n.SC_GAME_DATA || (h.ready = !0);
if (h.ready) {
var t = this.nodeCut.getComponent("ModuleDeal_09");
console.log(e.route + ":  ", e);
switch (e.route) {
case n.SC_GAME_DATA:
this.resume(e.data);
break;

case n.SC_JOIN_TABLE:
this.initTable(e.data);
break;

case n.SC_GET_CARD:
cc.log(e.data);
break;

case n.SC_RECONNECT:
this.resume(e.data);
break;

case n.SC_GAME_INIT:
this.initGame(e.data);
break;

case n.SC_PLAY_CARD:
this.playCard(e.data);
break;

case n.SC_GAME_READY:
this.changeReady(e.data);
break;

case n.SC_REFRESH_CARD:
a.player.card = e.data.card;
break;

case n.SC_PLAYER_LEAVE:
this.leavePlayer(e.data.idx);
break;

case n.SC_CHANGE_STATUS:
this.changeStatus(e.data);
break;

case n.SC_ACTION:
this.gameActon(e.data);
break;

case n.SC_FINISH:
break;

case n.SC_ROUND_SUMMARY:
this.roundSummary(e.data);
break;

case n.SC_GAME_SUMMARY:
break;

case n.SC_PROGRESS:
t.cutHandMove(e.data.percent);
break;

case n.SC_CUTE:
this.cuteCard(e.data);
break;

case n.SC_SHOW_HOST:
this.resetPlayers(e.data);
break;

case n.SC_GAME_CHAT:
null != this.chat && this.chat.contentFly(e.data);
break;

case n.SC_SYSTEM_NOTICE:
null != this.chat && this.chat.systemNotice(e.data);
break;

case n.SC_PLAY_ERROR:
u.alertTip("请选择正确牌型");
break;

case n.SC_CALL:
this.showBao(e.data);
break;

case n.SC_ALERT:
this.showBaodan(e.data);
break;

case n.SC_QUICK_FINISH:
this.nodeTx.getComponent("ModuleTouxiang_09").txInit(e.data);
break;

case n.SC_CANCEL_AUTO:
this.cancelAuto(e.data);
break;

case n.SC_START_AUTO:
this.startAuto(e.data);
break;

case n.SC_GAME_DESTORY:
this.destoryGame();
break;

case n.SC_TOAST:
s.isNullOrEmpty(e.data.message) || u.alertTip(e.data.message);
break;

default:
console.log(e);
}
}
}
},
initTable: function(e) {
this.lblGameType.string = d.GameName[e.options.gameType] + " " + e.options.rules.poker + "副牌";
this.lblRules.active = 3 == e.options.rules.poker;
this.lblBase.string = "底分: " + s.formatGold(e.options.base);
e.turn = e.turn ? e.turn : 0;
h.firstPlay = !1;
h.status = e.status;
this.exitBtnStatus();
h.idx = e.idx;
h.config = f;
h.options = e.options;
h.current = e.current;
this.layerHandCards.getComponent("ModuleCards_09").touchEvent();
this.lblRoomId.string = "房间号: " + e.options.tableID;
var t = e.idx, n = [ 0, 0, 0, 0 ];
n[t] = 0;
n[(t + 1) % 4] = 1;
n[(t + 2) % 4] = 2;
n[(t + 3) % 4] = 3;
h.realIdx = n;
this.nodeHands.forEach(function(e) {
e.destroyAllChildren();
});
this.setTurn(e);
this.initPlayers(e);
},
showRule: function() {},
setTurn: function(e) {
h.turn = e.round;
this.lblJushu.string = 0 == e.round ? "" : "第" + e.turn + "圈 第" + e.round + "局";
},
initPlayers: function(e) {
var t = this;
s.isNullOrEmpty(this.nodePlayerInfo) || this.nodePlayerInfo.forEach(function(e) {
e && e.destroyPlayer();
});
this.nodePlayerInfo = new Array(4);
h.players = new Array(4);
h.players = e.players;
e.players.forEach(function(n) {
if (null != n) {
var i = cc.instantiate(t.prePlayerInfo);
i.parent = t.bgTable.node;
var a = i.getComponent("ModulePlayerInfo_09");
a.init(n);
a.hideClock();
a.activeReady(null != n.ready);
t.nodePlayerInfo[h.realIdx[n.idx]] = a;
n.idx != h.idx || n.ready || e.status == d.GameStatus.START || (t.btnReady.active = !0);
}
});
this.onGpsTwinkling();
},
initGame: function(e) {
var t = this;
h.status = d.GameStatus.START;
this._delayTime = 50;
this.nodeTx.active = !1;
h.currentPlayer = e.currentIDX;
h.firstPlay = !0;
h.current = null;
this.setTurn(e);
if (e.shuffle) {
this.cutCount = 0;
this.cutIdx = [];
this.shuffleData = e;
e.shuffle.forEach(function(e) {
if (e.shuffle) {
t.cutCount++;
t.cutIdx.push(e.idx);
}
});
this.handleShuffle();
} else {
this.initHands(e, !1);
this.nodeCut.getComponent("ModuleDeal_09").cut(e);
}
this.nodePlayerInfo.forEach(function(e) {
e.resetPlayer();
});
h.players.forEach(function(e) {
return e.rank = -1;
});
},
handleShuffle: function() {
var e = this;
if (this.cutCount > 0) {
this._delayTime = 100;
var t = new cc.Node();
t.parent = this.node;
t.addComponent(sp.Skeleton);
var n = t.getComponent(sp.Skeleton);
n.skeletonData = this.cutAnim;
n.premultipliedAlpha = !1;
n.setAnimation(1, "idle", !1);
this.cutTips.active = !0;
var i = this.cutIdx.shift();
this.cutTips.getChildByName("name").getComponent(cc.Label).string = h.players[i].prop.name + "正在洗牌";
n && n.setCompleteListener(function() {
t.destroy();
e.cutTips.active = !1;
e.cutCount--;
e.handleShuffle();
});
} else {
this.initHands(this.shuffleData, !1);
this.nodeCut.getComponent("ModuleDeal_09").cut(this.shuffleData);
}
},
leavePlayer: function() {
i.disconnect();
},
resume: function(e) {
var t = this, a = JSON.stringify(e), r = JSON.parse(a);
this.initTable(r);
if (r.status != d.GameStatus.PREPARE) {
r.quickFinish && this.nodeTx.getComponent("ModuleTouxiang_09").txInit(r.quickFinish);
if (r.status != d.GameStatus.WAIT) if (r.status != d.GameStatus.SUMMARY) {
r.players.forEach(function(e) {
t.nodePlayerInfo[h.realIdx[e.idx]].activeReady(!1);
});
var o = r.status == d.GameStatus.CALL && r.currentIDX != r.idx && null == r.players[r.idx].call;
this.initHands(r, !o);
if (r.status == d.GameStatus.CALL) {
this.nodePlayerInfo.forEach(function(e) {
return e.activeBao(!1);
});
if (null != r.currentIDX) {
var s = {
idx: r.currentIDX,
clock: r.clock
};
this.showBao(s);
return;
}
}
if (r.status != d.GameStatus.CUTE) {
r.currentCard && this.showPlayCards(r.currentCard);
var c = {
idx: r.currentIDX,
clock: r.clock
};
this.playCard(c);
this.baoData = {
call: !1,
idx: 0
};
e.players.forEach(function(e) {
t.nodePlayerInfo[h.realIdx[e.idx]].activeAuto(e.auto);
h.idx == e.idx && t.changeAutoBtn(e.auto);
if (e && -1 != e.rank) {
e.idx == h.idx && (h.status = d.GameStatus.FINISH);
console.log("rank--1-", e.rank, e);
t.nodePlayerInfo[h.realIdx[e.idx]].finishAnim(e.rank, !0);
h.players[h.realIdx[e.idx]].rank = e.rank;
}
1 == e.hands && t.nodePlayerInfo[h.realIdx[e.idx]].activeBaodan(!0);
if (e.call) {
h.bao = e.idx;
t.baoData = {
call: !0,
idx: e.idx
};
}
});
r.scores && (this.lblCurrentScore.string = 5 * parseInt(r.scores.F) + 10 * parseInt(r.scores.T) + 10 * parseInt(r.scores.K) + "");
this.updateScoresLayout(r.creditCards);
} else this.cuteCard(r);
} else r.players.forEach(function(e) {
e.idx == h.idx && (t.btnReady.active = null == e.ready);
});
} else i.gameMessage(n.CS_GAME_READY, {
plus: !1
});
},
gameActon: function(e) {
switch (e.event) {
case d.GameAction.CALL:
this.runBao(e);
break;

case d.GameAction.PLAY:
this.showPlayCards(e);
break;

case d.GameAction.PASS:
this.showPass(e);
break;

case d.GameAction.PLUS:
this.initXiHands(e);
break;

case d.GameAction.CREDIT:
this.scoreFly(e);
break;

case d.GameAction.ALERT:
this.showBaodan(e);
break;

case d.GameAction.DONE:
var t = h.realIdx[e.idx];
e.idx == h.idx && (h.status = d.GameStatus.FINISH);
this.nodePlayerInfo[t].activeBaodan(!1);
this.nodePlayerInfo[t].finishAnim(e.rank);
h.players[t].rank = e.rank;
}
},
changeStatus: function(e) {
if (!(h.idx < 0)) {
var t = h.realIdx[e.idx];
h.players[t].offline = e.offline;
this.nodePlayerInfo[t].activeOffline(e.offline);
}
},
changeReady: function(e) {
h.idx == e.idx && (this.btnReady.active = !1);
this.nodePlayerInfo[h.realIdx[e.idx]].activeReady(!0);
},
showPlayerLight: function(e) {
this.nodePlayerInfo.forEach(function(t) {
return t.showActive(e);
});
},
destoryGame: function() {
i._queueGameMsg = [];
i._queueChatMsg = [];
i.disconnect();
},
initChatContent: function() {
var e = this;
this.node.on("chatAlready", function() {
var t = {
str: [ "哎呀头都被你们炸晕了", "赢了钱请大家去满天红吃火锅", "不要走决战到天亮", "对家的牌还不错", "跟你们打牌真是太开心了", "手气不好 建议你去趟台湾岛", "在哪个山沟沟里,信号这么差", "快点呀,头发都等白了", "跟你合作真是太愉快了" ],
url: "ChatImg/Game09",
aniPos: [ cc.v2(-cc.winSize.width / 2 + 69.5 + d.FitScreen, -210), cc.v2(cc.winSize.width / 2 - 69.5 - d.FitScreen, 65), cc.v2(-168, 250), cc.v2(-cc.winSize.width / 2 + 69.5 + d.FitScreen, 65) ],
msgPos: [ cc.v2(-cc.winSize.width / 2 + 69.5 + d.FitScreen + 50, -180), cc.v2(cc.winSize.width / 2 - 69.5 - d.FitScreen - 50, 95), cc.v2(-118, 280), cc.v2(-cc.winSize.width / 2 + 69.5 + d.FitScreen + 50, 95) ],
facePos: [ cc.v2(-cc.winSize.width / 2 + 69.5 + d.FitScreen + 139, -196), cc.v2(cc.winSize.width / 2 - 69.5 - d.FitScreen - 139, 79), cc.v2(-29, 264), cc.v2(-cc.winSize.width / 2 + 69.5 + d.FitScreen + 139, 79) ]
};
e.chat.init(t);
});
},
acTx: function() {
var e = new Date().getTime();
if (e - this.lastTxTime < 1e4) u.alertTip("点击过于频繁,不能少于10秒"); else {
if (h.status != d.GameStatus.START) if (h.bao < 0) {
if (h.players[0].credit == h.players[1].credit || h.players.findIndex(function(e) {
return -1 != e.rank;
}) < 0) {
u.alertTip("双方分数相同且没有上游");
return;
}
} else if (h.players[h.realIdx[h.bao]].credit == h.players[3 - h.realIdx[h.bao]].credit || h.players.findIndex(function(e) {
return -1 != e.rank;
}) < 0) {
u.alertTip("双方分数相同且没有上游");
return;
}
this.lastTxTime = e;
i.gameMessage(n.CS_QUICK_FINISH, {
vote: !0
});
}
},
resetPlayers: function(e) {
var t = this;
if (e.group[0] != e.group[1] && 2 != Math.abs(e.group[1] - e.group[0])) {
h.players.forEach(function(t, n) {
return t.idx = e.playerIDX[n];
});
h.idx = h.players[h.idx].idx;
h.players.sort(function(e, t) {
return e.idx - t.idx;
});
this.resetRealIdx(h.idx);
this.nodePlayerInfo.forEach(function(e) {
return e.destroyPlayer();
});
this.maskPos.active = !0;
this._delayTime = 10;
setTimeout(function() {
h.players.forEach(function(e, n) {
var i = cc.instantiate(t.prePlayerInfo);
i.parent = t.bgTable.node;
var a = i.getComponent("ModulePlayerInfo_09");
a.init(e);
t.nodePlayerInfo[h.realIdx[n]] = a;
});
t.maskPos.active = !1;
}, 1e3);
}
},
showBaodan: function(e) {
var t = h.realIdx[e.idx];
this.nodePlayerInfo[t].activeBaodan(!0);
var n = h.players[t].prop.sex;
u.playSound(n + "_baodan");
},
resetRealIdx: function(e) {
var t = [ 0, 0, 0, 0 ];
t[e] = 0;
t[(e + 1) % 4] = 1;
t[(e + 2) % 4] = 2;
t[(e + 3) % 4] = 3;
h.realIdx = t;
},
runBao: function(e) {
(h.idx == e.idx || e.call) && (this.layerHandCards.active = !0);
this.baoData = e;
var t = h.realIdx[e.idx], n = e.call ? 0 : 1;
if (e.call) {
h.bao = e.idx;
this.nodePlayerInfo[t].activeBao(!0);
}
h.idx == e.idx && (this.nodeBao.active = !1);
this.nodePlayerInfo[t].hideClock();
var i = [ cc.v2(0, 0), cc.v2(cc.winSize.width / 2 - 200 - d.FitScreen, 50), cc.v2(70, 260), cc.v2(-cc.winSize.width / 2 + 200 + d.FitScreen, 50) ];
this.action[n].active = !0;
this.action[n].scale = 0;
this.action[n].setPosition(i[t]);
var a = cc.scaleTo(.01, 0), r = cc.scaleTo(.1, 1.2), o = cc.fadeIn(.2), s = cc.fadeOut(.2), c = cc.sequence(cc.spawn(cc.sequence(a, r), o), cc.delayTime(.5), s);
this.action[n].runAction(c);
this.playManageAudio(h.players[e.idx].prop.sex + "_bao_" + n + ".mp3");
},
showBao: function(e) {
var t = e.idx;
h.idx == t && (this.layerHandCards.active = !0);
if (!s.isNullOrEmpty(e.auto)) {
var n = h.realIdx[t];
this.nodePlayerInfo[n].activeAuto(e.auto);
h.idx == t && this.changeAutoBtn(e.auto);
}
var i = Math.max((e.clock - s.getTimeStamp()) / 1e3, 0);
this.nodePlayerInfo[h.realIdx[t]].showClock(i);
this.showPlayerLight(t);
this.nodeBao.active = t == h.idx;
this.btnPlayCards.active = !1;
this.btnTips.avtive = !1;
},
acBao: function(e, t) {
var a = this;
if (0 == parseInt(t)) u.showConfirm("是否包庄", function() {
a.nodeBao.active = !1;
i.gameMessage(n.CS_CALL, {
event: "CALL",
call: !0
});
}); else {
this.nodeBao.active = !1;
i.gameMessage(n.CS_CALL, {
event: "CALL",
call: !1
});
}
},
acShowScore: function() {
i.gameMessage(n.CS_SHOW_DECK, {});
},
cuteCard: function(e) {
h.status = d.GameStatus.START;
this.exitBtnStatus();
this.nodeHands.forEach(function(e) {
e.destroyAllChildren();
});
h.status = d.GameStatus.START;
h.cuter = null != e.cuterIDX ? e.cuterIDX : e.idx;
this.initDesk();
if (!s.isNullOrEmpty(e.auto)) {
var t = h.realIdx[h.cuter];
this.nodePlayerInfo[t].activeAuto(e.auto);
h.idx == h.cuter && this.changeAutoBtn(e.auto);
}
this.nodeCut.getComponent("ModuleDeal_09").showDeal();
},
passCard: function() {
i.gameMessage(n.CS_PLAY_CARD, {
event: "PASS"
});
this.resetCards();
},
showPass: function(e) {
this._delayTime = 3;
var t = h.realIdx[e.idx];
this.nodePlayerInfo[t].activeAuto(e.auto);
this.nodePlayerInfo[t].hideClock();
h.idx == e.idx && this.changeAutoBtn(e.auto);
this.changeBtn(!1);
this.sprDisnable.active = !1;
this.bgTable.node.getComponent("ModuleAudioCtr_09").PassVoice(h.players[e.idx].prop.sex);
var n = this.imgPass[t];
n.active = !0;
n.scale = 0;
n.runAction(cc.scaleTo(.1, 1));
},
initXiHands: function(e) {
var t = this;
this.nodeBtn.active = !1;
this._delayTime = 25;
this.layerHandCards.destroyAllChildren();
var n = [ [], [], [], [] ];
e.players.forEach(function(e) {
var n = h.realIdx[e.idx];
e.hands.sort(function(e, t) {
return e % 100 - t % 100;
});
e.hands.reverse();
t.nodeHands[n].getComponent("ModuleHands_09").refreshHandCards(e.hands, !0);
});
e.players.forEach(function(e) {
var i = h.realIdx[e.idx];
e.hands.sort(function(e, t) {
return e % 100 - t % 100;
});
var a = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
e.hands.forEach(function(e) {
a[e % 100]++;
});
var r = a.findIndex(function(e, t) {
return e >= 5 || 15 == t && 4 == e;
});
r >= 0 && n[i].push(r % 100);
t.nodeHands[i].getComponent("ModuleHands_09").nodeCards.forEach(function(e) {
n[i].forEach(function(t) {
e._value % 100 == t && e.setPosition(e.pos1);
});
});
s.isNullOrEmpty(e.bonus) || t.addXi(e.bonus);
});
},
initDesk: function() {
var e = this;
this.sprDisnable.active = !1;
this.lblCurrentScore.string = "0";
this.nodePlayerInfo.forEach(function(e) {
e.resetPlayer();
});
this.layerHandCards.destroyAllChildren();
this.layerHandCards.getComponent("ModuleCards_09").nodeCards = [];
this.dropCards.forEach(function(t, n) {
t.node.destroyAllChildren();
e.bgCount[n].node.destroyAllChildren();
e.imgPass[n].active = !1;
});
},
addXi: function(e) {
var t = this;
[ 3, 4, 5 ].includes(e.bomb) && this.bombAnim(e.bomb);
var n = e.from.length, i = cc.url.raw("resources/Audio/Common/addScore.mp3");
l.getInstance().playSFX(i);
var a = [ cc.v2(-cc.winSize.width / 2 + 69.5 + d.FitScreen, -272), cc.v2(cc.winSize.width / 2 - 69.5 - d.FitScreen, -37), cc.v2(-168, 148), cc.v2(-cc.winSize.width / 2 + 69.5 + d.FitScreen, -37) ], r = [], o = [], s = [], u = a[h.realIdx[e.to[0].idx]], f = 5 * e.to[0].score;
try {
r.push(cc.delayTime(.1));
for (var p = 0; p < f; p++) {
var m = cc.instantiate(this.preCoin);
m.parent = this.node;
m.setPosition(a[h.realIdx[e.from[p % n].idx]]);
var g = cc.v2(100 * Math.random() - 50, 100 * Math.random() - 50);
r.push(cc.targetedAction(m, cc.sequence(cc.delayTime(.5 * Math.random()), cc.spawn(cc.moveBy(.3, g), cc.scaleTo(.1, .7)), cc.moveTo(.3, u), cc.callFunc(function() {
this.destroy();
}, m))));
}
o.push(cc.spawn(r));
var v = cc.instantiate(this.preScore);
v.getComponent(cc.Label).string = "+" + e.to[0].score;
v.parent = this.node;
v && (v.opacity = 0);
v.scale = .2;
v.position = u;
var C = this.nodePlayerInfo[h.realIdx[e.to[0].idx]];
e.from.forEach(function(e) {
var n = t.nodePlayerInfo[h.realIdx[e.idx]];
s.push(n);
});
o.push(cc.targetedAction(v, cc.sequence(cc.spawn(cc.scaleTo(.2, 1.2), cc.fadeIn(.2)), cc.scaleTo(.1, 1), cc.delayTime(.1), cc.callFunc(function() {
try {
C.setXifen(e.to[0].bonus);
e.from.forEach(function(e, t) {
s[t].setXifen(e.bonus);
});
} catch (e) {
c.reportError(e);
}
}), cc.spawn(cc.moveBy(.4, 0, 40), cc.fadeOut(.4)), cc.callFunc(function() {
this.destroy();
}, v))));
} catch (e) {
c.reportError(e);
}
try {
this.node.runAction(cc.sequence(o));
} catch (e) {
c.reportError(e);
}
},
scoreFly: function(e) {
var t = this;
if (e.action) {
this.addXi(e.action);
[ 3, 4, 5 ].includes(e.action.bomb) && this.bombAnim(e.action.bomb);
}
h.current = null;
this.dropCards.forEach(function(e, n) {
e.node.removeAllChildren(!0);
t.bgCount[n].node.removeAllChildren(!0);
t.imgPass[n].active = !1;
});
this.sprDisnable.active = !1;
this.updateScoresLayout(e.creditCards);
if ("0" != this.lblCurrentScore.string) {
var n = cc.url.raw("resources/Audio/Common/addScore.mp3");
l.getInstance().playSFX(n);
this.lblCurrentScore.string = "0";
e.credits.forEach(function(e, n) {
t.nodePlayerInfo[h.realIdx[n]].setJifen(e);
h.players[h.realIdx[n]].scores = e;
});
}
},
updateScoresLayout: function(e) {
var t = this;
if (!s.isNullOrEmpty(this.baoData) && !s.isNullOrEmpty(e)) {
var n = [];
n = this.baoData.call ? this.baoData.idx == h.idx ? e[0] : e[1] : e[h.idx % 2];
this.wuNode.destroyAllChildren();
this.shiNode.destroyAllChildren();
this.kNode.destroyAllChildren();
console.log("--scores--", n);
console.log("--this.baoData--", this.baoData);
n.forEach(function(e) {
if (e % 100 == 5) {
t.wuNode.active = !0;
var n = cc.instantiate(t.preCards);
n.parent = t.wuNode;
n.width = 45;
n.height = 62.5;
n.getComponent("ModuleCardsInit_09").init(e);
}
if (e % 100 == 10) {
t.shiNode.active = !0;
var i = cc.instantiate(t.preCards);
i.parent = t.shiNode;
i.width = 45;
i.height = 62.5;
i.getComponent("ModuleCardsInit_09").init(e);
}
if (e % 100 == 13) {
t.kNode.active = !0;
var a = cc.instantiate(t.preCards);
a.parent = t.kNode;
a.width = 45;
a.height = 62.5;
a.getComponent("ModuleCardsInit_09").init(e);
}
});
}
},
ready: function() {
u.playSfx();
cc.find("Canvas/roundSummary") && cc.find("Canvas/roundSummary").removeFromParent();
i.gameMessage(n.CS_GAME_READY, {
plus: !1
});
},
resetCards: function() {
this.layerHandCards.getComponent("ModuleCards_09").nodeCards.forEach(function(e) {
e.forEach(function(e) {
e.getChildByName("bgCardMask").active = !1;
e._prior = !1;
e.isZhankai = !1;
e.setPosition(e.pos0);
});
});
this.btnPlayCards.getComponent(cc.Button).interactable = !1;
},
initHands: function(e, t) {
var n = this;
this.hands = [ [], [], [], [], [], [], [], [], [], [], [], [], [], [] ];
e.hands.sort(function(e, t) {
return e % 100 - t % 100;
});
e.hands.forEach(function(e) {
n.hands[e % 100 - 3].push(e);
});
for (var i = 0; i < this.hands.length; i++) if (0 == this.hands[i].length) {
this.hands.splice(i, 1);
i--;
}
this.hands.reverse();
var a = this.layerHandCards.getComponent("ModuleCards_09");
console.log("选择包庄---3-", e, h.idx);
this.layerHandCards.active = t;
a.refreshHandCards(this.hands, t);
},
playCard: function(e) {
var t = e.idx;
this.layerHandCards.active = !0;
h.currentPlayer = t;
this.showPlayerLight(t);
var n = Math.max((e.clock - s.getTimeStamp()) / 1e3, 0);
this.nodePlayerInfo[h.realIdx[t]].showClock(n);
if (t == h.idx) {
this.layerHandCards.getComponent("ModuleCards_09").checkCurrent();
null != h.current && o.decode(h.current.cards, h.config.shun);
this.changeBtn(!0);
this.btnTips.tipsTime = 0;
this.btnTips.getComponent(cc.Button).interactable = null != h.current;
this.btnPass.getComponent(cc.Button).interactable = null != h.current;
h.firstPlay || this.btnTips.getComponent("ModuleTips_09").autoTip();
}
h.firstPlay = !1;
},
changeBtn: function(e) {
this.nodeBtn.active = e;
this.btnPlayCards.active = e;
this.btnTips.active = e;
this.btnPass.active = e;
this.btnPlayCards.opacity = 255;
this.btnPass.opacity = 255;
this.btnTips.opacity = 255;
this.nodeBtnTips.active = !1;
},
acChupai: function() {
s.isNullOrEmpty(this.btnPlayCards._last) && (this.btnPlayCards._last = 0);
if (!(new Date().getTime() - this.btnPlayCards._last < 1e3)) {
this.btnPlayCards._last = new Date().getTime();
var e = JSON.parse(JSON.stringify(h.select));
if (e.length > 1) {
this.layerSelect.active = !0;
this.changeBtn(!1);
this.showSelect(e);
} else i.gameMessage(n.CS_PLAY_CARD, e[0], !0);
}
},
showSelect: function(e) {
var t = this, a = JSON.parse(JSON.stringify(e));
this.layerShowCards.destroyAllChildren();
a.forEach(function(a, r) {
var o = cc.instantiate(t.prePlayCards);
o.parent = t.layerShowCards;
o.getComponent("ModuleShowCards_09").init(a, !1);
o.on("touchend", function() {
i.gameMessage(n.CS_PLAY_CARD, e[r], !0);
t.layerSelect.active = !1;
});
});
},
hideSelect: function() {
this.layerSelect.active = !1;
this.changeBtn(!0);
},
refreshTableScore: function(e) {
var t = this;
e.cards.forEach(function(e) {
var n = e % 100;
if (5 == n || 10 == n) {
t.lblCurrentScore.node.runAction(cc.sequence(cc.scaleTo(.3, 1.3), cc.scaleTo(.2, 1)));
t.lblCurrentScore.string = "" + (n + parseInt(t.lblCurrentScore.string));
}
if (13 == n) {
t.lblCurrentScore.node.runAction(cc.sequence(cc.scaleTo(.3, 1.3), cc.scaleTo(.2, 1)));
t.lblCurrentScore.string = "" + (10 + parseInt(t.lblCurrentScore.string));
}
});
},
continueGame: function(e) {
h.shuffle = e.detail.cut;
i.gameMessage(n.CS_GAME_READY, {
plus: !1,
shuffle: h.shuffle
});
},
showPlayCards: function(e) {
var t = this;
if (e.action) {
this.addXi(e.action);
[ 3, 4, 5 ].includes(e.action.bomb) && this.bombAnim(e.action.bomb);
}
var n = e.currentCard ? e.currentCard : e;
this.changeBtn(!1);
h.current = null;
h.current = n;
this._delayTime = 7;
var i = h.realIdx[n.idx];
this.refreshTableScore(n);
this.nodePlayerInfo[i].activeOffline(!1);
this.nodePlayerInfo[i].activeAuto(n.auto);
this.nodePlayerInfo[i].hideClock();
h.idx == n.idx && this.changeAutoBtn(n.auto);
var a, r = cc.url.raw("resources/Audio/Common/playCard.mp3");
l.getInstance().playSFX(r);
this.dropCards.forEach(function(e, n) {
e.node.destroyAllChildren();
t.bgCount[n].node.destroyAllChildren();
t.imgPass[n].active = !1;
});
this.sprDisnable.active = !1;
if ("BOMB" == n.type && n.card % 100 < 16) {
var o = cc.instantiate(this.preCount), c = h.realIdx[n.idx], u = [ cc.v2(0, -61), cc.v2(-100, -61), cc.v2(100, -61), cc.v2(100, -61) ];
o.parent = this.bgCount[i].node;
o.setPosition(u[c]);
o.getChildByName("lblCount").getComponent(cc.Label).string = n.cards.length;
o.opacity = 0;
o.runAction(cc.fadeIn(.3));
}
switch (n.type) {
case "BOMB":
a = 0;
break;

case "LIANDUI":
a = 1;
break;

case "SHUN":
var d = cc.instantiate(this.preType);
d.parent = this.bgCount[i].node;
var f = n.cards.length;
a = 2;
d.getComponent(cc.Label).string = [ "", "", "", "", "", "五连顺", "六连顺", "七连顺", "八连顺", "九连顺", "十连顺", "十一连顺", "十二连顺" ][f];
break;

case "FEIJI":
a = 0 != i ? 4 : 3;
}
if (!s.isNullOrEmpty(a)) {
var p = cc.instantiate(this.aniNode);
p.parent = this.bgCount[i].node;
p.addComponent(sp.Skeleton);
var m = p.getComponent(sp.Skeleton);
m.skeletonData = this.pokerSkeleton[a];
m.premultipliedAlpha = !1;
m.setAnimation(1, "animation", !1);
this.playManageAudio("texiao_" + a + ".mp3");
}
this.bgTable.node.getComponent("ModuleAudioCtr_09").playVoice(n, h.players[n.idx].prop.sex);
this.removeHands(n);
var g = cc.instantiate(this.prePlayCards);
g.scale = 1;
g.parent = this.dropCards[i].node;
var v = JSON.parse(JSON.stringify(n));
g.getComponent("ModuleShowCards_09").init(v, !0);
},
removeHands: function(e) {
var t = this;
if (e.idx == h.idx) {
e.cards.forEach(function(e) {
for (var n = 0; n < t.hands.length; n++) for (var i = 0; i < t.hands[n].length; i++) {
var a = t.hands[n].findIndex(function(t) {
return e == t;
});
if (a >= 0) {
t.hands[n].splice(a, 1);
0 == t.hands[n].length && t.hands.splice(n, 1);
return;
}
}
});
this.layerHandCards.getComponent("ModuleCards_09").refreshHandCards(this.hands, !0);
}
},
roundSummary: function(e) {
var t = this;
this.wuNode.destroyAllChildren();
this.shiNode.destroyAllChildren();
this.kNode.destroyAllChildren();
this.wuNode.active = !1;
this.shiNode.active = !1;
this.kNode.active = !1;
this.btnReady.active = !0;
h.status = e.status;
this.exitBtnStatus();
h.current = null;
this.nodeTx.active = !1;
h.bao = e.bao;
this._delayTime = 10;
e.players.forEach(function(e, n) {
var i = t.nodePlayerInfo[h.realIdx[n]];
i.resetPlayer();
i.setWallet(e.wallet);
if (h.idx == n) {
t.changeAutoBtn(!1);
d.ZDCurrentGroup = e.group;
}
i.activeBaodan(!1);
h.players[n].bao = null;
});
var n = cc.instantiate(this.summaryPrefab);
cc.find("Canvas").addChild(n, 0, "roundSummary");
n.getComponent("ModuleSummary09").initData(e);
h.bao = -1;
},
Share: function() {
this.showShare();
},
backHall: function() {
d.ShowTablePop = !0;
i.gameMessage(n.CS_PLAYER_LEAVE, {});
},
onDebuggerBtn: function() {
u.showTipsMsg("积分不足", function() {});
},
onStartAuto: function() {
u.playSfx();
h.status == d.GameStatus.START && i.gameMessage(n.CS_START_AUTO, {});
},
onCancelAuto: function() {
u.playSfx();
i.gameMessage(n.CS_CANCEL_AUTO, {});
},
cancelAuto: function(e) {
this.nodePlayerInfo[h.realIdx[e.idx]].activeAuto(!1);
h.idx == e.idx && this.changeAutoBtn(!1);
},
startAuto: function(e) {
this.nodePlayerInfo[h.realIdx[e.idx]].activeAuto(!0);
h.idx == e.idx && this.changeAutoBtn(!0);
},
changeAutoBtn: function(e) {
this.autoBtn.active = !e;
this.autoMask.active = e;
},
onClickExit: function() {
var e = this;
u.playSfx();
if (!this.onExitting && h.status != d.GameStatus.START) {
this.onExitting = !0;
u.showConfirm("是否退出房间", function() {
d.ShowTablePop = !0;
e.onExitting = !1;
i.gameMessage(n.CS_PLAYER_LEAVE, {});
}, function() {
e.onExitting = !1;
});
}
},
bombAnim: function(e) {
var t = cc.instantiate(this.bomb);
t.parent = cc.find("Canvas");
t.getComponent("BombAnim").startAnim(e);
},
onGpsTwinkling: function() {
this.gpsBtn.active = !0;
var e = [ null, null, null, null ], t = [ null, null, null, null ];
h.players.forEach(function(n, i) {
if (!s.isNullOrEmpty(n.prop)) {
e[h.realIdx[n.idx]] = n;
t[i] = n.prop.ip;
}
});
if (t[0] == t[1] && null != t[0] && null != t[1] || t[0] == t[2] && null != t[0] && null != t[2] || t[1] == t[2] && null != t[1] && null != t[2] || t[0] == t[3] && null != t[0] && null != t[3] || t[1] == t[3] && null != t[1] && null != t[3] || t[3] == t[2] && null != t[3] && null != t[2]) u.alertTipPop("警告： 有玩家之间的ip相同！！！"); else {
var n = 0;
this.checkPlayer(e[0]) && this.checkPlayer(e[1]) && (n += s.judgeDistance(e[0].location, e[1].location, 500));
this.checkPlayer(e[0]) && this.checkPlayer(e[2]) && (n += s.judgeDistance(e[0].location, e[2].location, 500));
this.checkPlayer(e[0]) && this.checkPlayer(e[3]) && (n += s.judgeDistance(e[0].location, e[3].location, 500));
this.checkPlayer(e[1]) && this.checkPlayer(e[2]) && (n += s.judgeDistance(e[1].location, e[2].location, 500));
this.checkPlayer(e[1]) && this.checkPlayer(e[3]) && (n += s.judgeDistance(e[1].location, e[3].location, 500));
this.checkPlayer(e[2]) && this.checkPlayer(e[3]) && (n += s.judgeDistance(e[2].location, e[3].location, 500));
n > 0 && u.alertTipPop("警告： 有玩家之间距离小于500米！！！");
}
},
checkPlayer: function(e) {
return null != e && null != e.prop && null != e.location && 0 != e.location.lat && 0 != e.location.long;
},
onDistancePop: function() {
u.playSfx();
s.pop(d.pop.DistanceZDPop);
},
exitBtnStatus: function() {
this.exitBtn.active = h.status == d.GameStatus.WAIT || h.status == d.GameStatus.DESTORY;
},
downloadTime: function(e) {
var t = this;
this.lblTime.unscheduleAllCallbacks();
var n = s.getTimeStamp(e), i = s.getTimeStamp();
Math.floor((n - i) / 1e3);
this.lblTime.string = 15;
this.lblTime.schedule(function() {
var e = s.getTimeStamp(), i = Math.floor((n - e) / 1e3);
i < 0 || (t.lblTime.string = i);
}, 1);
},
onDestroy: function() {
this.removeEvents();
this.removeGoEasyEvents();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/PACK": "PACK",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/audio-ctrl": "audio-ctrl",
"../../../Main/Script/native-extend": "native-extend",
"../../../Main/Script/utils": "utils",
GameBase: "GameBase",
Logic_09: "Logic_09"
} ],
SceneTable16: [ function(e, t) {
"use strict";
cc._RF.push(t, "10580ud29xIsLS/MisSj1a4", "SceneTable16");
var n = e("../Hulib/calc16").Calc, i = e("../../Game16/Script/MJGameConfig"), a = e("../../../Main/Script/TableInfo"), r = e("../../../Main/NetWork/Connector"), o = e("DataBase"), s = e("PACK"), c = e("../../../Main/Script/ROUTE"), l = e("audio-ctrl"), u = (e("native-extend").Social, 
e("../../../Main/Script/utils")), d = e("../../../Main/Script/Cache"), h = e("../../../GameBase/GameConfig").GameConfig, f = (e("../../Game16/demo/queue").Queue, 
e("../../../script/ui/hall/data/App").App), p = [ "东", "南", "西", "北" ];
cc.Class({
extends: e("GameBase"),
properties: {
nodeDirection: cc.Node,
layoutDirection: cc.Node,
player: cc.Prefab,
lblCombo: cc.Label,
lblTime: cc.Label,
btnDestory: cc.Node,
btnReady: cc.Node,
lblTid: cc.Label,
lblBase: cc.Label,
lblGametype: cc.Label,
lblTurn: cc.Label,
lblDeck: cc.Label,
lblWind: cc.Label,
card: cc.Prefab,
nodePlayCard: [ cc.Node ],
hands: e("../../commonScript/ModuleHandsMJ"),
layoutHands: [ e("../../commonScript/ModuleOtherHandsMJ") ],
ground: [ e("../../commonScript/ModuleGroundMJ") ],
selfHandGround: e("../../commonScript/ModuleHandGroundMJ"),
selfHandFlower: e("../../commonScript/ModuleFlowerMJ"),
nodeQuest: cc.Node,
nodeSelectQuest: cc.Node,
preRoundSummary: cc.Prefab,
showSummaryNiao: cc.Prefab,
imgQuest: cc.Node,
spriteFrameQuest: [ cc.SpriteFrame ],
preShowCard: cc.Prefab,
bgTing: cc.Node,
btnTing: cc.Node,
preTingCard: cc.Prefab,
lblTing: cc.Label,
texturee: cc.SpriteAtlas,
btnExit: cc.Node,
bgNode: cc.Node,
autoMask: cc.Node,
btnAuto: cc.Node,
cutAnim: sp.SkeletonData,
cutTips: cc.Node,
nodeTx: cc.Node,
lastTxTime: 0
},
onLoad: function() {
this.initGameBase(!0);
this.addEvents();
cc.sprFlag = cc.find("Canvas/nodeTable/sprFlag");
for (var e in this.texturee._spriteFrames) a.cardsSpriteFrame[e] = this.texturee._spriteFrames[e];
a.playerHead = [ null, null, null, null ];
a.players = [ null, null, null, null ];
this.initChatContent();
this.alReady = !1;
this._status = "DONE";
this.schedule(this.gameMsgSchedule, .1);
r.emit(s.CS_JOIN_DONE, {});
d.hideMask();
},
addEvents: function() {
this.btnExit.on(cc.Node.EventType.TOUCH_END, this.onExitGame, this);
f.EventManager.addEventListener(h.GameEventNames.HNMJ_SHOW_SAME_CARD, this.showSameCard, this);
f.EventManager.addEventListener(h.GameEventNames.HNMJ_RESET_SAME_CARD, this.resetSameCard, this);
f.EventManager.addEventListener(h.GameEventNames.HNMJ_CHECK_HU, this.handleCheckHu, this);
f.EventManager.addEventListener(h.GameEventNames.HNMJ_HIDE_TING, this.hideTingUI, this);
f.EventManager.addEventListener(h.GameEventNames.HNMJ_QUEST_CALL, this.questCall, this);
f.EventManager.addEventListener(h.GameEventNames.HNMJ_GAME_SUMMARY, this.roundReset, this);
},
removeEvents: function() {
f.EventManager.removeEventListener(h.GameEventNames.HNMJ_SHOW_SAME_CARD, this.showSameCard, this);
f.EventManager.removeEventListener(h.GameEventNames.HNMJ_RESET_SAME_CARD, this.resetSameCard, this);
f.EventManager.removeEventListener(h.GameEventNames.HNMJ_CHECK_HU, this.handleCheckHu, this);
f.EventManager.removeEventListener(h.GameEventNames.HNMJ_HIDE_TING, this.hideTingUI, this);
f.EventManager.removeEventListener(h.GameEventNames.HNMJ_QUEST_CALL, this.questCall, this);
f.EventManager.removeEventListener(h.GameEventNames.HNMJ_GAME_SUMMARY, this.roundReset, this);
},
initChatContent: function() {
var e = this;
this.node.on("chatAlready", function() {
var t = {
str: [ "快点啊,我等得花儿都谢了", "你的牌打的真是太好了", "不要走,决战到天亮", "不好意思,我得离开一会", "咱们交个朋友吧", "不要吵了,专心玩游戏吧" ],
url: "ChatImg/Game11",
aniPos: [ cc.v2(69.5 - cc.winSize.width / 2 + h.FitScreen, -54), cc.v2(cc.winSize.width / 2 - 69.5 - h.FitScreen, 96), cc.v2(329, cc.winSize.height / 2 - 64), cc.v2(cc.winSize.width / 2 - 69.5 - h.FitScreen, 96) ],
msgPos: [ cc.v2(69.5 - cc.winSize.width / 2 + h.FitScreen + 50, -140), cc.v2(cc.winSize.width / 2 - 69.5 - h.FitScreen - 50, 100), cc.v2(329, cc.winSize.height / 2 - 64), cc.v2(cc.winSize.width / 2 - 69.5 - h.FitScreen - 50, 100) ],
facePos: [ cc.v2(69.5 - cc.winSize.width / 2 + h.FitScreen + 50, -100), cc.v2(cc.winSize.width / 2 - 69.5 - h.FitScreen + 50, 50), cc.v2(329, cc.winSize.height / 2 - 64), cc.v2(cc.winSize.width / 2 - 69.5 - h.FitScreen + 50, 50) ],
faceAnchor: [ {
x: 0,
y: 0
}, {
x: 1,
y: 1
}, {
x: 0,
y: 1
} ]
};
e.chat.init(t);
});
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else if (!(r._queueGameMsg.length <= 0)) {
var e = r._queueGameMsg.shift(), t = cc.sys.isBrowser ? e : JSON.stringify(e);
console.log(t);
e.route != c.SC_GAME_DATA && e.route != c.SC_JOIN_TABLE && e.route != c.SC_RECONNECT || (this.alReady = !0);
if (this.alReady) switch (e.route) {
case c.SC_GAME_DATA:
this.reconnect(e.data);
break;

case c.SC_CHAPTER:
case c.SC_GAME_READY:
this.gameReady(e.data);
break;

case c.SC_CHANGE_STATUS:
this.changeStatus(e.data);
break;

case c.SC_GAME_INIT:
this.gameInit(e.data);
break;

case c.SC_PLAY_CARD:
this.playCard(e.data);
break;

case c.SC_GET_CARD:
this.getCard(e.data);
break;

case c.SC_OUT_CARD:
this.outCard(e.data);
break;

case c.SC_PLAYER_LEAVE:
this.onPlayerLeave(e.data);
break;

case c.SC_SCORE:
this.score(e.data);
break;

case c.SC_GAME_CHAT:
this.chat.contentFly(e.data);
break;

case c.SC_GAME_DRAW:
this.gameDraw(e.data);
break;

case c.SC_QUEST:
this.quest(e.data);
break;

case c.SC_ACTION:
this.action(e.data);
break;

case c.SC_ROUND_SUMMARY:
cc.log(e.data);
this.roundSummary(e.data);
break;

case c.SC_GAME_SUMMARY:
break;

case c.SC_REFRESH_CARD:
o.player.card = e.data.card;
break;

case c.SC_DEAD:
this.dead(e.data);
break;

case c.SC_SYSTEM_NOTICE:
u.pop(h.pop.NoticePop, function(t) {
t.getComponent("ModuleNotice").showTips(e.data.message, e.data.times);
});
break;

case c.SC_CANCEL_AUTO:
this.cancelAuto(e.data);
break;

case c.SC_START_AUTO:
this.startAuto(e.data);
break;

case c.SC_SYNC_HANDS:
this.syncCard(e.data);
break;

case c.SC_DISBAND:
this.nodeTx.getComponent("ModuleTouxiang19").txInit(e.data);
break;

case c.SC_GAME_DESTORY:
this.playerLeave(e.data);
break;

case c.SC_TOAST:
u.isNullOrEmpty(e.data.message) || d.alertTip(e.data.message);
break;

default:
console.log("default------", t);
}
}
},
joinTable: function(e) {
a.status = e.status;
a.zhuang = null;
a.wind = null;
a.tid = e.tid;
var t = e.idx;
a.idx = e.idx;
a.options = e.options;
a.config = e.options;
if (4 == a.config.person) {
this.realIdx = [ 0, 0, 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 4] = 1;
this.realIdx[(t + 2) % 4] = 2;
this.realIdx[(t + 3) % 4] = 3;
} else if (3 == a.config.person) {
this.realIdx = [ 0, 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 3] = 1;
this.realIdx[(t + 2) % 3] = 2;
} else {
this.realIdx = [ 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 2] = 2;
}
a.realIdx = this.realIdx;
u.isNullOrEmpty(this.players) || this.players.forEach(function(e) {
e && e.node.destroy();
});
this.players = new Array(4);
this.initPlayer(e);
this.initTableMsg(e);
},
initPlayer: function(e) {
var t = this;
console.log("initPlayer----", this.players);
e.players.forEach(function(n) {
if (null != n) {
var i = a.realIdx[n.idx], r = cc.instantiate(t.player);
t.node.addChild(r);
t.players[i] = r.getComponent("PlayerMJ");
t.players[i].playerInit(n);
n.idx != a.idx || n.ready || e.status == h.GameStatus.START || (t.btnReady.active = !0);
}
});
},
initTableMsg: function(e) {
this.lblBase.string = "底分: " + u.formatGold(e.options.base);
this.lblGametype.string = "红中麻将 " + (1 == e.options.maxRound ? "把结" : "（8小局）");
this.lblTurn.string = 0 == e.round ? "" : "第" + e.turn + "圈 第" + e.round + "局";
this.lblTid.string = "房号:" + e.options.tableID;
},
gameInit: function(e) {
var t = this;
a.status = h.GameStatus.START;
this.nodeDirection.active = !0;
this.nodeTx.active = !1;
this.btnDestory.active = !1;
a.outCards = [];
this.bgTing.getChildByName("cardContainer").removeAllChildren();
this.btnTing.getChildByName("cardContainer").removeAllChildren();
this.btnTing.active = !1;
this.lblTing.node.active = !1;
var n = cc.find("Canvas/roundSummary");
n && n.destroy();
if (e.combo && e.combo > 0) {
this.lblCombo.node.active = !0;
this.lblCombo.string = "+" + e.combo;
} else this.lblCombo.node.active = !1;
this.lblDeck.string = e.decks + "";
a.zhuang = e.banker;
a.wind = e.wind;
a.status = h.GameStatus.START;
a.currentPlayer = null;
this.btnReady.active = !1;
this.lblTurn.string = 0 == e.round ? "" : "第" + e.turn + "圈 第" + e.round + "局";
this.exitBtnStatus();
a.turn = e.turn;
if (e.shuffle) {
this.cutCount = 0;
this.cutIdx = [];
this.shuffleData = e;
e.shuffle.forEach(function(e) {
if (e.shuffle) {
t.cutCount++;
t.cutIdx.push(e.idx);
}
a.realIdx[e.idx];
});
this.handleShuffle();
} else this.hands.init(e, !1);
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.ground.forEach(function(e, t) {
e.reset(t);
});
this.layoutHands.forEach(function(e, t) {
if (2 != a.config.person) {
if (0 != t) {
e.reset();
e.init({
hands: 13
}, t);
}
} else if (2 == t) {
e.reset();
e.init({
hands: 13
}, t);
}
});
this.players.forEach(function(e) {
e.hideReady();
});
this.resetPlayStatus(e);
},
handleShuffle: function() {
var e = this;
if (this.cutCount > 0) {
this._delayTime = 100;
var t = new cc.Node();
t.parent = this.node;
t.addComponent(sp.Skeleton);
var n = t.getComponent(sp.Skeleton);
n.skeletonData = this.cutAnim;
n.premultipliedAlpha = !1;
n.setAnimation(1, "idle", !1);
this.cutTips.active = !0;
var i = this.cutIdx.shift();
this.cutTips.getChildByName("name").getComponent(cc.Label).string = a.players[i].prop.name + "正在洗牌";
n && n.setCompleteListener(function() {
t.destroy();
e.cutTips.active = !1;
e.cutCount--;
e.handleShuffle();
});
} else {
this._delayTime = 0;
this.hands.init(this.shuffleData, !1);
}
},
showBtnQuest: function() {
var e = cc.find("Canvas/nodeTable/btnQuest");
if (e) {
e.active = !0;
e.getChildByName("layout").children.forEach(function() {});
}
},
playCard: function(e) {
a.serialID = e.serialID;
u.isNullOrEmpty(e.hands) || (this.nodeQuest.active = !1);
if (e.idx == a.idx) {
this.hands._hands.length;
this.checkOutCard();
this.hands._hands[this.hands._hands.length - 1].getCard = !0;
this.hands.sortCards();
}
console.log("轮到出牌----", e);
this.hideTingUI();
this.hands.resetSameCard();
this.downloadTime(e);
cc.playCard = e.idx == a.idx;
this.playCardLight(e);
},
checkOutCard: function() {
for (var e = !1, t = a.outCards.slice(), i = [], r = [], o = 0; o < 38; o++) r.push(0);
this.hands._hands.forEach(function(t) {
if (t) {
i.push(t._card);
r[t._card]++;
t.ting = !1;
e = t._card > 40;
}
});
if (!e) {
t.forEach(function(e) {
return r[e]++;
});
for (var s = 0; s < i.length; s++) {
var c = i.slice();
c.splice(s, 1);
for (var l = 0; l < 38; l++) if (0 != l && 10 != l && 20 != l && 30 != l) {
var u = c.slice();
u.push(l);
n.checkHu(u.slice()) && (this.hands._hands[s].ting = !0);
}
}
this.hands.showTing();
}
},
checkHu: function(e, t) {
void 0 === t && (t = !1);
var i = !1, r = a.outCards.slice();
this.lblTing.node.active = !1;
this.bgTing.getChildByName("cardContainer").removeAllChildren();
this.btnTing.getChildByName("cardContainer").removeAllChildren();
for (var o = [], s = 0; s < 38; s++) o.push(0);
r.forEach(function(e) {
return o[e]++;
});
var c = [];
this.hands._hands.forEach(function(e) {
if (e) {
c.push(e._card);
o[e._card]++;
i = e._card > 40;
}
});
if (!i) {
for (var l = 0, u = 0; u < 38; u++) if (0 != u && 10 != u && 20 != u && 30 != u) {
var d = c.slice();
d.push(u);
e && d.splice(d.indexOf(e), 1);
n.checkHu(d.slice()) && l++;
}
if (l >= 34) this.lblTing.node.active = !0; else {
this.btnTing.active = !1;
for (var h = 0; h < 38; h++) if (0 != h && 10 != h && 20 != h && 30 != h) {
var f = c.slice();
f.push(h);
e && f.splice(f.indexOf(e), 1);
if (n.checkHu(f.slice())) {
this.btnTing.active = !0;
if (t) {
this.btnTing.active = !1;
this.bgTing.active = !0;
}
var p = cc.instantiate(this.preTingCard);
p.parent = this.bgTing.getChildByName("cardContainer");
p.y = 10;
p.getChildByName("count").getComponent(cc.Label).string = "剩" + (4 - o[h]) + "张";
p.getComponent("ModuleSelfCardsMJ").init(h, .7);
var m = cc.instantiate(this.preTingCard);
m.parent = this.btnTing.getChildByName("cardContainer");
m.y = 0;
m.getComponent("ModuleSelfCardsMJ").init(h, .45);
}
}
}
}
},
showTingUI: function() {
this.bgTing.active = !0;
},
hideTingUI: function() {
this.bgTing.active = !1;
},
playCardLight: function(e) {
this.nodePlayCard.forEach(function(e) {
e.active = !1;
});
var t = this.nodePlayCard[this.directionIdx[a.realIdx[e.idx]]];
t.active = !0;
t.stopAllActions();
t.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.8, 100), cc.fadeTo(.8, 255))));
this.players.forEach(function(t) {
t.clockAnim(e);
});
},
resetPlayStatus: function(e) {
var t = a.realIdx[e.wind];
this.lblWind.string = "" + p[e.wind];
this.directionIdx = [ 0, 0, 0, 0 ];
switch (t) {
case 0:
this.directionIdx = [ 0, 1, 2, 3 ];
this.layoutDirection.rotation = 0;
break;

case 1:
this.layoutDirection.rotation = -90;
this.directionIdx = [ 3, 0, 1, 2 ];
break;

case 2:
this.layoutDirection.rotation = 180;
this.directionIdx = [ 2, 3, 0, 1 ];
break;

case 3:
this.layoutDirection.rotation = 90;
this.directionIdx = [ 1, 2, 3, 0 ];
}
this.nodePlayCard.forEach(function(e) {
e.active = !1;
});
this.players.forEach(function(e) {
e.imgActive.active = !1;
});
},
getCard: function(e) {
this.nodeQuest.active = !1;
this._delayTime = 3;
var t = a.realIdx[e.idx];
this.lblDeck.string = e.decks + "";
if (e.idx == a.idx) {
e.event == h.GameAction.DRAW_MULTI ? this.hands.getCard(e.cards) : this.hands.getCard(e.card);
this.syncCard(e);
this.checkHu();
} else {
console.log("对面打牌-----", e);
this.layoutHands[t].getCard(e.hands);
}
},
outCard: function(e) {
this.nodeQuest.active = !1;
this.lblTime.unscheduleAllCallbacks();
this.downloadTime(e);
var t = a.realIdx[e.idx];
0 != t ? this.layoutHands[t].outCard(e.card) : e.auto && this.hands.autoSortCard(e.card);
this.changeAutoState(e);
var n = cc.url.raw("resources/Audio/Common/outCardMj.mp3");
l.getInstance().playSFX(n);
this.ground[t].outCard(e.card, t, !0);
0 == t && this.checkHu();
var i = ("male" == a.players[e.idx].prop.sex ? "male" : "female") + "_p_" + (e.card >= 11 && e.card <= 19 ? e.card + 10 : e.card >= 21 && e.card <= 29 ? e.card - 10 : e.card) + ".mp3";
this.playManageAudio(i);
},
playerLeave: function(e) {
if (!u.isNullOrEmpty(e.reason)) {
this.btnDestory.active = !0;
d.alertTip(e.reason);
}
a.status = h.GameStatus.DESTORY;
r.disconnect(!1);
this.exitBtnStatus();
this.btnReady.active = !1;
this.players.forEach(function(e, t) {
e && 0 != t && e.removePlayer();
});
},
score: function() {},
gameDraw: function() {},
quest: function(e) {
var t = this;
a.serialID = e.serialID;
this.nodeQuest.active = !0;
var n = this.nodeQuest.getChildByName("hu"), i = this.nodeQuest.getChildByName("peng"), r = this.nodeQuest.getChildByName("gang"), o = this.nodeQuest.getChildByName("chi");
this.nodeQuest.getChildByName("guo").active = !0;
n.active = !1;
i.active = !1;
r.active = !1;
o.active = !1;
var s = {
idx: a.idx,
clock: e.clock
};
this.downloadTime(s);
this.chiArr = [];
this.gangArr = [];
e.quests.forEach(function(s, c) {
switch (s.event) {
case h.GameAction.PLAY:
var l = {
idx: a.idx,
clock: e.clock,
serialID: e.serialID
};
t.playCard(l);
break;

case h.GameAction.PONG:
i.active = !0;
i.card = s.card;
i.answer = c;
break;

case h.GameAction.CHOW:
o.active = !0;
s.index = c;
t.chiArr.push(s);
break;

case h.GameAction.WIN:
n.active = !0;
t.lblTing.node.active = !1;
t.btnTing.active = !1;
n.card = s.card;
n.answer = c;
break;

default:
r.active = !0;
s.index = c;
t.gangArr.push(s);
}
});
},
btnQuestCall: function(e, t) {
var n = this;
this.nodeQuest.getChildByName("hu").active && t != h.GameAction.WIN ? d.showConfirm("是否放弃胡牌", function() {
n.handleQuestCall(t);
}) : this.handleQuestCall(t);
},
handleQuestCall: function(e) {
var t = this;
switch (e) {
case h.GameAction.GUO:
r.gameMessage(c.CS_ANSWER, {
answer: -1,
serialID: a.serialID
});
this.nodeQuest.active = !1;
break;

case h.GameAction.PONG:
r.gameMessage(c.CS_ANSWER, {
answer: this.nodeQuest.getChildByName("peng").answer,
serialID: a.serialID
});
this.nodeQuest.active = !1;
break;

case h.GameAction.CHOW:
if (this.chiArr.length > 1) {
this.chiArr.forEach(function(e) {
t.nodeSelectQuest.getChildByName("groundContent").getComponent("ModuleHandGroundMJ").addGround(e, 0);
});
this.nodeSelectQuest.active = !0;
return;
}
r.gameMessage(c.CS_ANSWER, {
answer: this.chiArr[0].index,
serialID: a.serialID
});
this.nodeQuest.active = !1;
break;

case "GANG":
if (this.gangArr.length > 1) {
this.gangArr.forEach(function(e) {
t.nodeSelectQuest.getChildByName("groundContent").getComponent("ModuleHandGroundMJ").addGround(e, 0);
});
this.nodeSelectQuest.active = !0;
return;
}
r.gameMessage(c.CS_ANSWER, {
answer: this.gangArr[0].index,
serialID: a.serialID
});
this.nodeQuest.active = !1;
break;

case h.GameAction.WIN:
r.gameMessage(c.CS_ANSWER, {
answer: this.nodeQuest.getChildByName("hu").answer,
serialID: a.serialID
});
this.nodeQuest.active = !1;
}
},
questCall: function(e) {
this.hideSelectQuest();
r.gameMessage(c.CS_ANSWER, {
answer: e.data.index,
serialID: a.serialID
});
this.nodeQuest.active = !1;
},
hideSelectQuest: function() {
this.nodeSelectQuest.getChildByName("groundContent").getComponent("ModuleHandGroundMJ").resetGround();
this.nodeSelectQuest.active = !1;
},
action: function(e) {
var t = this;
if (e.event != h.GameAction.DRAW && e.event != h.GameAction.DRAW_MULTI) if (e.event != h.GameAction.PLAY) {
var n, r = a.realIdx[e.idx], o = "";
if (e.idx == a.idx) {
this.hands._hands.forEach(function(e) {
return e.getCard = !1;
});
switch (e.event) {
case h.GameAction.PONG:
o = "peng";
n = 0;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 2);
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case h.GameAction.CHOW:
o = "chi";
n = 5;
this.selfHandGround.addGround(e, 0);
[ e.tile, e.tile + 1, e.tile + 2 ].forEach(function(n) {
n != e.card && t.hands.removeCard(n);
});
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case h.GameAction.ZHI:
o = "gang";
n = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 3);
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case h.GameAction.SHOW:
o = "gang";
n = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card);
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case h.GameAction.KONG:
n = 1;
o = "gang";
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 4);
this.hands.sortCards();
break;

case h.GameAction.FLOWER_MULTI:
this._delayTime = 5;
n = 3;
e.cards.forEach(function(n) {
var i = {
auto: e.auto,
card: n,
event: h.GameAction.FLOWER,
idx: e.idx
};
t.selfHandFlower.addFlower(i, 0);
t.hands.removeCard(n);
});
this.hands.sortCards();
break;

case h.GameAction.FLOWER:
this._delayTime = 5;
n = 3;
this.selfHandFlower.addFlower(e, 0);
this.hands.removeCard(e.card);
this.hands.sortCards();
break;

case h.GameAction.WIN:
console.log("胡牌--data---", e);
o = "hu";
n = e.from == e.idx ? 4 : 2;
}
} else switch (e.event) {
case h.GameAction.PONG:
o = "peng";
n = 0;
this.layoutHands[r].action(e, r);
break;

case h.GameAction.CHOW:
o = "chi";
n = 5;
this.layoutHands[r].action(e, r);
break;

case h.GameAction.WIN:
o = "hu";
n = e.from == e.idx ? 4 : 2;
break;

case h.GameAction.FLOWER_MULTI:
this._delayTime = 5;
n = 3;
e.cards.forEach(function(n) {
var i = {
auto: e.auto,
card: n,
event: h.GameAction.FLOWER,
idx: e.idx
};
t.layoutHands[r].actionflower(i, r);
});
break;

case h.GameAction.FLOWER:
this._delayTime = 5;
n = 3;
this.layoutHands[r].actionflower(e, r);
break;

case h.GameAction.SHOW:
o = "gang";
n = 1;
this.layoutHands[r].action(e, r);
break;

default:
o = "gang";
n = 1;
this.layoutHands[r].action(e, r);
}
e.event != h.GameAction.PONG && e.event != h.GameAction.CHOW && e.event != h.GameAction.ZHI || this.ground[a.realIdx[e.from]].removeCard();
e.event == h.GameAction.WIN && (this._delayTime = 10);
this.imgQuest.active = !0;
this.imgQuest.scale = 0;
this.imgQuest.getComponent(cc.Sprite).spriteFrame = this.spriteFrameQuest[n];
this.imgQuest.stopAllActions();
var s = cc.place(i.GAME_HZMJ.QUEST_IMG_POS[r]), c = cc.scaleTo(.2, 1.5), l = cc.scaleTo(.1, .8), u = cc.scaleTo(.1, 1), d = cc.delayTime(.2), f = cc.sequence(s, c, l, u, d, cc.callFunc(function() {
t.imgQuest.scale = 0;
}));
this.imgQuest.runAction(f);
var p = ("male" == a.players[e.idx].prop.sex ? "male" : "female") + "_p_" + o + ".mp3";
this.playManageAudio(p);
} else this.outCard(e); else this.getCard(e);
},
roundSummary: function(e) {
var t = this;
if (!e.destory) {
a.status = e.status;
this.onCancelAuto();
this.exitBtnStatus();
this.nodeQuest.active = !1;
this.bgTing.active = !1;
this.nodeTx.active = !1;
this.btnTing.active = !1;
this.stopTime();
this.hands.hideTing();
cc.sprFlag.removeFromParent();
cc.playCard = !1;
if (0 == e.birds.length) {
var n = cc.instantiate(this.preRoundSummary);
n.parent = cc.find("Canvas");
n.getComponent("ModuleRoundSummary16").init(e);
} else {
var i = cc.instantiate(this.showSummaryNiao);
i.getComponent("ModuleShowNiao").renderUI(e);
this.node.addChild(i);
}
e.players.forEach(function(e, n) {
var i = a.realIdx[n];
t.players[i].roundReset();
t.players[i].setScore(e.wallet);
});
}
},
dead: function() {},
sendReady: function(e, t) {
this.roundReset();
r.gameMessage(c.CS_GAME_READY, {
plus: "-1" == t,
shuffle: !1
});
},
roundReset: function() {
this.hands.reset();
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.ground.forEach(function(e, t) {
e.reset(t);
});
this.layoutHands.forEach(function(e, t) {
0 != t && e.reset();
});
this.lblTing.node.active = !1;
this.btnTing.active = !1;
},
gameReady: function(e) {
var t = a.realIdx[e.idx];
if (0 == t) {
this.roundReset();
this.btnReady.active = !1;
}
this.players[t].imgReady.active = !0;
this.players[t].activeNiao(e);
},
reconnect: function(e) {
var t = this;
a.outCards = [];
this.joinTable(e);
this.roundReset();
a.zhuang = e.banker;
a.wind = e.wind;
e.status, h.GameStatus.WAIT;
e.disband && this.nodeTx.getComponent("ModuleTouxiang19").txInit(e.disband);
if (e.status == h.GameStatus.START || e.status == h.GameStatus.PLAY || e.status == h.GameStatus.QUEST) {
this.nodeDirection.active = !0;
this.lblDeck.string = e.decks + "";
a.turn = e.turn;
this.resetPlayStatus(e);
if (e.combo && e.combo > 0) {
this.lblCombo.node.active = !0;
this.lblCombo.string = "+" + e.combo;
} else this.lblCombo.node.active = !1;
this.hands.init(e, !0);
if (null != e.currentIDX && null == e.currentCard) {
var n = {
idx: e.currentIDX,
clock: e.clock,
serialID: e.serialID
};
this.playCard(n);
a.currentPlayer = e.currentIDX;
}
if (!u.isNullOrEmpty(e.grounds)) {
var i = e.grounds.filter(function(e) {
return e.event != h.GameAction.FLOWER;
});
this.selfHandGround.initGround(i, 0);
var r = e.grounds.filter(function(e) {
return e.event == h.GameAction.FLOWER;
});
this.selfHandFlower.initFlower(r, 0);
}
u.isNullOrEmpty(e.drops) || this.ground[0].init(e.drops, 0);
e.players.forEach(function(n) {
if (n) {
n.auto && t.startAuto(n);
var i = a.realIdx[n.idx];
if (0 != i) {
t.ground[i].init(n.drops, i);
t.layoutHands[i].init(n, i);
}
t.players[i].playerInit(n);
t.players[i].hideReady();
t.players[i].clockAnim({
idx: e.currentIDX,
clock: e.clock
});
}
});
if (null != e.currentCard && e.currentCard.src != h.GameAction.SHOW) {
a.currentCard = e.currentCard;
this.outCard(e.currentCard);
}
this.checkOutCard();
if (e.quest) {
e.quest.clock = e.clock;
this.quest(e.quest);
}
this.btnReady.active = !1;
}
if (e.status == h.GameStatus.SUMMARY) {
this.nodeDirection.active = !0;
var o = {
idx: e.currentIDX,
clock: e.clock
};
this.downloadTime(o);
e.players.forEach(function(e) {
e.idx == a.idx && (t.btnReady.active = null == e.ready);
});
}
this.exitBtnStatus();
},
changeStatus: function(e) {
var t = a.realIdx[e.idx];
this.players[t].offlineChange(e.offline);
},
onExitGame: function() {
d.playSfx();
if ("CUSTOM" == a.options.mode) {
h.ShowTablePop = !0;
d.showConfirm("是否退出房间", function() {
r.gameMessage(c.CS_PLAYER_LEAVE, {});
});
} else {
if (a.status != h.GameStatus.DESTORY) return;
cc.director.loadScene("Lobby");
}
},
onPlayerLeave: function() {
r.disconnect();
},
onContinueMatch: function() {
d.playSfx();
u.pop(h.pop.MatchPop, function(e) {
e.getComponent("ModuleMatchPop").startMatch(a.config.roomID);
});
},
cancelAuto: function(e) {
var t = a.realIdx[e.idx];
this.players[t].activeAutoPlay(!1);
if (a.idx == e.idx) {
this.btnAuto.active = !0;
this.autoMask.active = !1;
}
},
startAuto: function(e) {
var t = a.realIdx[e.idx];
this.players[t].activeAutoPlay(!0);
if (a.idx == e.idx) {
this.btnAuto.active = !1;
this.autoMask.active = !0;
}
},
onStartAuto: function() {
d.playSfx();
console.log("状态---:", a.status);
if (a.status == h.GameStatus.START || a.status == h.GameStatus.QUEST || a.status == h.GameStatus.PLAY) {
this.btnAuto.active = !1;
this.autoMask.active = !0;
r.gameMessage(c.CS_START_AUTO, {});
}
},
onCancelAuto: function() {
d.playSfx();
this.btnAuto.active = !0;
this.autoMask.active = !1;
r.gameMessage(c.CS_CANCEL_AUTO, {});
},
changeAutoState: function(e) {
var t = a.realIdx[e.idx];
this.players[t].activeAutoPlay(e.auto);
if (a.idx == e.idx) {
this.btnAuto.active = !e.auto;
this.autoMask.active = e.auto;
}
},
syncCard: function(e) {
var t = [];
e.hands.sort(function(e, t) {
return e - t;
});
this.hands._hands.forEach(function(e, n) {
t[n] = e._card;
});
t.sort(function(e, t) {
return e - t;
});
if (t.toString() != e.hands.toString()) {
console.log("手牌同步: ", t, e.hands);
this.hands.init(e);
}
},
showSameCard: function(e) {
var t = e.data;
this.ground.forEach(function(e) {
e.showSameCard(t);
});
},
resetSameCard: function() {
this.ground.forEach(function(e) {
e.resetSameCard();
});
},
handleCheckHu: function(e) {
this.checkHu(e.data.card, e.data.showTing);
},
acTx: function() {
var e = new Date().getTime();
if (e - this.lastTxTime < 1e4) d.alertTip("点击过于频繁,不能少于10秒"); else if (a.status != h.GameStatus.WAIT && a.status != h.GameStatus.SUMMARY) {
this.lastTxTime = e;
r.gameMessage(c.CS_DISBAND, "allow");
} else d.alertTip("牌局未开始,无法解散");
},
onDistancePop: function() {
d.playSfx();
u.pop(h.pop.DistanceMJPop);
},
onRulePop: function() {
d.playSfx();
u.pop(h.pop.MJRulePop);
},
downloadTime: function(e) {
var t = this;
console.log("倒计时---", e);
this.lblTime.unscheduleAllCallbacks();
var n = a.realIdx[e.idx];
this.players[n].clockAnim(e);
var i = u.getTimeStamp(e.clock), r = u.getTimeStamp(), o = Math.floor((i - r) / 1e3);
o > 0 && (this.lblTime.string = o);
this.lblTime.schedule(function() {
var e = u.getTimeStamp(), n = Math.floor((i - e) / 1e3);
n < 0 || (t.lblTime.string = n);
}, 1);
},
stopTime: function() {
this.lblTime.string = "";
this.lblTime.unscheduleAllCallbacks();
},
exitBtnStatus: function() {
this.btnExit.active = a.status == h.GameStatus.WAIT || a.status == h.GameStatus.DESTORY;
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/hall/data/App": "App",
"../../Game16/Script/MJGameConfig": "MJGameConfig",
"../../Game16/demo/queue": "queue",
"../../commonScript/ModuleFlowerMJ": "ModuleFlowerMJ",
"../../commonScript/ModuleGroundMJ": "ModuleGroundMJ",
"../../commonScript/ModuleHandGroundMJ": "ModuleHandGroundMJ",
"../../commonScript/ModuleHandsMJ": "ModuleHandsMJ",
"../../commonScript/ModuleOtherHandsMJ": "ModuleOtherHandsMJ",
"../Hulib/calc16": "calc16",
DataBase: "DataBase",
GameBase: "GameBase",
PACK: "PACK",
"audio-ctrl": "audio-ctrl",
"native-extend": "native-extend"
} ],
SceneTable19: [ function(e, t) {
"use strict";
cc._RF.push(t, "9612eRO1rpMnL4Tr6RSdQlv", "SceneTable19");
var n = e("../Hulib/calc19"), i = e("../../Game16/Script/MJGameConfig"), a = e("../../../Main/Script/TableInfo"), r = e("../../../Main/NetWork/Connector"), o = e("DataBase"), s = e("PACK"), c = e("../../../Main/Script/ROUTE"), l = e("audio-ctrl"), u = (e("native-extend").Social, 
e("../../../Main/Script/utils")), d = e("voice-ctrl"), h = e("../../../Main/Script/Cache"), f = e("../../../GameBase/GameConfig").GameConfig, p = (e("../../Game16/demo/queue").Queue, 
e("../../../script/ui/hall/data/App").App), m = (e("assert").notEqual, "DONE"), g = [ "东", "南", "西", "北" ];
cc.Class({
extends: e("GameBase"),
properties: {
nodeDirection: cc.Node,
layoutDirection: cc.Node,
player: cc.Prefab,
lblCombo: cc.Label,
lblTime: cc.Label,
btnDestory: cc.Node,
btnReady: cc.Node,
lblTid: cc.Label,
lblBase: cc.Label,
lblTurn: cc.Label,
lblDeck: cc.Label,
lblWind: cc.Label,
card: cc.Prefab,
nodePlayCard: [ cc.Node ],
hands: e("../../commonScript/ModuleHandsMJ"),
layoutHands: [ e("../../commonScript/ModuleOtherHandsMJ") ],
ground: [ e("../../commonScript/ModuleGroundMJ") ],
selfHandGround: e("../../commonScript/ModuleHandGroundMJ"),
selfHandFlower: e("../../commonScript/ModuleFlowerMJ"),
nodeQuest: cc.Node,
nodeSelectQuest: cc.Node,
preRoundSummary: cc.Prefab,
imgQuest: cc.Node,
spriteFrameQuest: [ cc.SpriteFrame ],
preShowCard: cc.Prefab,
sprHorn: [ cc.Sprite ],
bgTing: cc.Node,
btnTing: cc.Node,
preTingCard: cc.Prefab,
lblTing: cc.Label,
btnContinue: cc.Node,
texturee: cc.SpriteAtlas,
nodeBird: cc.Node,
btnExit: cc.Node,
nodePiao: cc.Node,
bgNode: cc.Node,
autoMask: cc.Node,
btnAuto: cc.Node,
showNiao: cc.Prefab,
cutAnim: sp.SkeletonData,
cutTips: cc.Node,
nodeTx: cc.Node,
lastTxTime: 0
},
onLoad: function() {
var e = u.getValue(f.StorageKey.tableBgIndex, 0);
this.bgNode.spriteFrame = f.tableBgSprite[e];
this.initGameBase(!0);
this.addEvents();
cc.sprFlag = cc.find("Canvas/nodeTable/sprFlag");
for (var t in this.texturee._spriteFrames) a.cardsSpriteFrame[t] = this.texturee._spriteFrames[t];
a.playerHead = [ null, null, null, null ];
a.players = [ null, null, null, null ];
this.initChatContent();
this.alReady = !1;
this._status = m;
this.schedule(this.gameMsgSchedule, .1);
this.schedule(this.gameVoiceSchedule, .1);
r.emit(s.CS_JOIN_DONE, {});
h.hideMask();
},
addEvents: function() {
this.btnExit.on(cc.Node.EventType.TOUCH_END, this.onExitGame, this);
p.EventManager.addEventListener(f.GameEventNames.HNMJ_SHOW_SAME_CARD, this.showSameCard, this);
p.EventManager.addEventListener(f.GameEventNames.HNMJ_RESET_SAME_CARD, this.resetSameCard, this);
p.EventManager.addEventListener(f.GameEventNames.HNMJ_CHECK_HU, this.handleCheckHu, this);
p.EventManager.addEventListener(f.GameEventNames.HNMJ_HIDE_TING, this.hideTingUI, this);
p.EventManager.addEventListener(f.GameEventNames.HNMJ_QUEST_CALL, this.questCall, this);
p.EventManager.addEventListener(f.GameEventNames.HNMJ_GAME_SUMMARY, this.roundReset, this);
},
removeEvents: function() {
p.EventManager.removeEventListener(f.GameEventNames.HNMJ_SHOW_SAME_CARD, this.showSameCard, this);
p.EventManager.removeEventListener(f.GameEventNames.HNMJ_RESET_SAME_CARD, this.resetSameCard, this);
p.EventManager.removeEventListener(f.GameEventNames.HNMJ_CHECK_HU, this.handleCheckHu, this);
p.EventManager.removeEventListener(f.GameEventNames.HNMJ_HIDE_TING, this.hideTingUI, this);
p.EventManager.removeEventListener(f.GameEventNames.HNMJ_QUEST_CALL, this.questCall, this);
p.EventManager.removeEventListener(f.GameEventNames.HNMJ_GAME_SUMMARY, this.roundReset, this);
},
initChatContent: function() {
var e = this;
this.node.on("chatAlready", function() {
var t = cc.find("Canvas"), n = {
str: [ "快点啊,我等得花儿都谢了", "你的牌打的真是太好了", "不要走,决战到天亮", "不好意思,我得离开一会", "咱们交个朋友吧", "不要吵了,专心玩游戏吧" ],
url: "ChatImg/Game11",
aniPos: [ cc.v2(69.5 - t.width / 2 + f.FitScreen, -54), cc.v2(t.width / 2 - 69.5 - f.FitScreen, 96) ],
msgPos: [ cc.v2(69.5 - t.width / 2 + f.FitScreen + 50, -17), cc.v2(t.width / 2 - 69.5 - f.FitScreen - 50, 100) ],
facePos: [ cc.v2(69.5 - t.width / 2 + f.FitScreen + 50, -100), cc.v2(t.width / 2 - 69.5 - f.FitScreen + 50, 50) ],
faceAnchor: [ {
x: 0,
y: 0
}, {
x: 1,
y: 1
}, {
x: 0,
y: 1
} ]
};
e.chat.init(n);
});
},
gameMsgSchedule: function() {
if (this._delayTime > 0) this._delayTime--; else if (!(r._queueGameMsg.length <= 0)) {
var e = r._queueGameMsg.shift(), t = cc.sys.isBrowser ? e : JSON.stringify(e);
console.log(t);
e.route != c.SC_GAME_DATA && e.route != c.SC_JOIN_TABLE && e.route != c.SC_RECONNECT || (this.alReady = !0);
if (this.alReady) switch (e.route) {
case c.SC_GAME_DATA:
this.reconnect(e.data);
break;

case c.SC_JOIN_TABLE:
this.joinTable(e.data);
break;

case c.SC_JOIN_GAME:
this.joinGame(e.data);
break;

case c.SC_RECONNECT:
this.reconnect(e.data);
break;

case c.SC_CHAPTER:
case c.SC_GAME_READY:
this.gameReady(e.data);
break;

case c.SC_CHANGE_STATUS:
this.changeStatus(e.data);
break;

case c.SC_GAME_INIT:
this.gameInit(e.data);
break;

case c.SC_PLAY_CARD:
this.playCard(e.data);
break;

case c.SC_GET_CARD:
this.getCard(e.data);
break;

case c.SC_OUT_CARD:
this.outCard(e.data);
break;

case c.SC_PLAYER_LEAVE:
this.onPlayerLeave(e.data);
break;

case c.SC_SCORE:
this.score(e.data);
break;

case c.SC_GAME_CHAT:
this.chat.contentFly(e.data);
break;

case c.SC_GAME_DRAW:
this.gameDraw(e.data);
break;

case c.SC_QUEST:
this.quest(e.data);
break;

case c.SC_ACTION:
this.action(e.data);
break;

case c.SC_ROUND_SUMMARY:
cc.log(e.data);
this.roundSummary(e.data);
break;

case c.SC_GAME_SUMMARY:
break;

case c.SC_REFRESH_CARD:
o.player.card = e.data.card;
break;

case c.SC_DEAD:
this.dead(e.data);
break;

case c.SC_SYSTEM_NOTICE:
u.pop(f.pop.NoticePop, function(t) {
t.getComponent("ModuleNotice").showTips(e.data.message, e.data.times);
});
break;

case c.SC_CANCEL_AUTO:
this.cancelAuto(e.data);
break;

case c.SC_START_AUTO:
this.startAuto(e.data);
break;

case c.SC_SYNC_HANDS:
this.syncCard(e.data);
break;

case c.SC_DISBAND:
this.nodeTx.getComponent("ModuleTouxiang19").txInit(e.data);
break;

case c.SC_GAME_DESTORY:
this.playerLeave(e.data);
break;

case c.SC_TOAST:
u.isNullOrEmpty(e.data.message) || h.alertTip(e.data.message);
break;

default:
console.log(t);
}
}
},
joinTable: function(e) {
a.status = e.status;
a.zhuang = null;
a.wind = null;
a.tid = e.tid;
var t = e.idx;
a.idx = e.idx;
a.options = e.options;
a.config = e.options;
if (4 == a.config.person) {
this.realIdx = [ 0, 0, 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 4] = 1;
this.realIdx[(t + 2) % 4] = 2;
this.realIdx[(t + 3) % 4] = 3;
} else if (3 == a.config.person) {
this.realIdx = [ 0, 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 3] = 1;
this.realIdx[(t + 2) % 3] = 2;
} else {
this.realIdx = [ 0, 0 ];
this.realIdx[t] = 0;
this.realIdx[(t + 1) % 2] = 2;
}
a.realIdx = this.realIdx;
u.isNullOrEmpty(this.players) || this.players.forEach(function(e) {
e && e.node.destroy();
});
this.players = new Array(4);
this.initPlayer(e);
this.initTableMsg(e);
},
initPlayer: function(e) {
var t = this;
console.log("initPlayer----", this.players);
e.players.forEach(function(n) {
if (null != n) {
var i = a.realIdx[n.idx], r = cc.instantiate(t.player);
t.node.addChild(r);
t.players[i] = r.getComponent("ModulePlayer19");
t.players[i].playerInit(n);
n.idx != a.idx || n.ready || e.status == f.GameStatus.START || (t.btnReady.active = !0);
}
});
},
initTableMsg: function(e) {
this.lblBase.string = "底分: ¥" + e.options.base;
this.lblTurn.string = (e.turn || "0") + "/" + a.options.maxTurn;
this.lblTid.string = "房号:" + e.options.tableID;
},
joinGame: function(e) {
var t = a.realIdx[e.idx];
if (0 != t) {
var n = cc.instantiate(this.player);
n.parent = cc.find("Canvas/nodeTable");
this.players[t] = n.getComponent("ModulePlayer19");
this.players[t].playerInit(e);
}
},
gameInit: function(e) {
a.status = f.GameStatus.START;
this.nodeBird.parent.active = !1;
this.btnContinue.active = !1;
this.nodeDirection.active = !0;
this.nodePiao.active = !1;
this.nodeTx.active = !1;
this.btnDestory.active = !1;
a.outCards = [];
this.bgTing.getChildByName("cardContainer").removeAllChildren();
this.btnTing.getChildByName("cardContainer").removeAllChildren();
this.btnTing.active = !1;
this.lblTing.node.active = !1;
var t = cc.find("Canvas/roundSummary");
t && t.destroy();
if (e.combo && e.combo > 0) {
this.lblCombo.node.active = !0;
this.lblCombo.string = "+" + e.combo;
} else this.lblCombo.node.active = !1;
this.lblDeck.string = e.decks + "";
a.zhuang = e.banker;
a.wind = e.wind;
a.status = f.GameStatus.START;
a.currentPlayer = null;
this.btnReady.active = !1;
this.lblTurn.string = (0 == e.turn ? 1 : e.turn) + "/" + a.options.maxTurn;
this.changeBtnState();
a.turn = e.turn;
this.hands.init(e, !1);
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.players.forEach(function(e) {
if (null != e) {
e.roundReset();
e.showGa();
}
});
this.ground.forEach(function(e, t) {
e.reset(t);
});
this.layoutHands.forEach(function(e, t) {
if (2 != a.config.person) {
if (0 != t) {
e.reset();
e.init({
hands: 13
}, t);
}
} else if (2 == t) {
e.reset();
e.init({
hands: 13
}, t);
}
});
this.resetPlayStatus(e);
},
handleShuffle: function() {
var e = this;
if (this.cutCount > 0) {
this._delayTime = 100;
var t = new cc.Node();
t.parent = this.node;
t.addComponent(sp.Skeleton);
var n = t.getComponent(sp.Skeleton);
n.skeletonData = this.cutAnim;
n.premultipliedAlpha = !1;
n.setAnimation(1, "idle", !1);
this.cutTips.active = !0;
var i = this.cutIdx.shift();
this.cutTips.getChildByName("name").getComponent(cc.Label).string = a.players[i].prop.name + "正在洗牌";
n && n.setCompleteListener(function() {
t.destroy();
e.cutTips.active = !1;
e.cutCount--;
e.handleShuffle();
});
} else {
this._delayTime = 0;
this.hands.init(this.shuffleData, !1);
}
},
showBtnQuest: function() {
var e = cc.find("Canvas/nodeTable/btnQuest");
if (e) {
e.active = !0;
e.getChildByName("layout").children.forEach(function() {});
}
},
playCard: function(e) {
a.serialID = e.serialID;
u.isNullOrEmpty(e.hands) || (this.nodeQuest.active = !1);
if (e.idx == a.idx) {
this.hands._hands.length;
this.checkOutCard();
this.hands._hands[this.hands._hands.length - 1].getCard = !0;
this.hands.sortCards();
}
console.log("轮到出牌----", e);
this.hideTingUI();
this.hands.resetSameCard();
this.downloadTime(e.clock);
cc.playCard = e.idx == a.idx;
this.playCardLight(e);
},
checkOutCard: function() {
for (var e = !1, t = a.outCards.slice(), i = [], r = [], o = 0; o < 38; o++) r.push(0);
this.hands._hands.forEach(function(t) {
if (t) {
i.push(t._card);
r[t._card]++;
t.ting = !1;
e = t._card > 40;
}
});
if (!e) {
t.forEach(function(e) {
return r[e]++;
});
for (var s = 0; s < i.length; s++) {
var c = i.slice();
c.splice(s, 1);
for (var l = 0; l < 38; l++) if (0 != l && 10 != l && 20 != l && 30 != l) {
var u = c.slice();
u.push(l);
n.checkHu(u.slice()) && (this.hands._hands[s].ting = !0);
}
}
this.hands.showTing();
}
},
checkHu: function(e, t) {
void 0 === t && (t = !1);
var i = !1, r = a.outCards.slice();
this.lblTing.node.active = !1;
this.bgTing.getChildByName("cardContainer").removeAllChildren();
this.btnTing.getChildByName("cardContainer").removeAllChildren();
for (var o = [], s = 0; s < 38; s++) o.push(0);
r.forEach(function(e) {
return o[e]++;
});
var c = [];
this.hands._hands.forEach(function(e) {
if (e) {
c.push(e._card);
o[e._card]++;
i = e._card > 40;
}
});
if (!i) {
for (var l = 0, u = 0; u < 38; u++) if (0 != u && 10 != u && 20 != u && 30 != u) {
var d = c.slice();
d.push(u);
e && d.splice(d.indexOf(e), 1);
n.checkHu(d.slice()) && l++;
}
if (l >= 34) this.lblTing.node.active = !0; else {
this.btnTing.active = !1;
for (var h = 0; h < 38; h++) if (0 != h && 10 != h && 20 != h && 30 != h) {
var f = c.slice();
f.push(h);
e && f.splice(f.indexOf(e), 1);
if (n.checkHu(f.slice())) {
this.btnTing.active = !0;
if (t) {
this.btnTing.active = !1;
this.bgTing.active = !0;
}
var p = cc.instantiate(this.preTingCard);
p.parent = this.bgTing.getChildByName("cardContainer");
p.y = 10;
p.getChildByName("count").getComponent(cc.Label).string = "剩" + (4 - o[h]) + "张";
p.getComponent("ModuleSelfCardsMJ").init(h, .7);
var m = cc.instantiate(this.preTingCard);
m.parent = this.btnTing.getChildByName("cardContainer");
m.y = 0;
m.getComponent("ModuleSelfCardsMJ").init(h, .45);
}
}
}
}
},
showTingUI: function() {
this.bgTing.active = !0;
},
hideTingUI: function() {
this.bgTing.active = !1;
},
playCardLight: function(e) {
this.nodePlayCard.forEach(function(e) {
e.active = !1;
});
var t = this.nodePlayCard[this.directionIdx[a.realIdx[e.idx]]];
t.active = !0;
t.stopAllActions();
t.runAction(cc.repeatForever(cc.sequence(cc.fadeTo(.8, 100), cc.fadeTo(.8, 255))));
this.players.forEach(function(t) {
t.active(e.idx);
});
},
resetPlayStatus: function(e) {
var t = a.realIdx[e.wind];
this.lblWind.string = "" + g[e.wind];
this.directionIdx = [ 0, 0, 0, 0 ];
switch (t) {
case 0:
this.directionIdx = [ 0, 1, 2, 3 ];
this.layoutDirection.rotation = 0;
break;

case 1:
this.layoutDirection.rotation = -90;
this.directionIdx = [ 3, 0, 1, 2 ];
break;

case 2:
this.layoutDirection.rotation = 180;
this.directionIdx = [ 2, 3, 0, 1 ];
break;

case 3:
this.layoutDirection.rotation = 90;
this.directionIdx = [ 1, 2, 3, 0 ];
}
this.nodePlayCard.forEach(function(e) {
e.active = !1;
});
this.players.forEach(function(e) {
e.imgActive.active = !1;
});
},
getCard: function(e) {
this.nodeQuest.active = !1;
this._delayTime = 3;
var t = a.realIdx[e.idx];
this.lblDeck.string = e.decks + "";
if (e.idx == a.idx) {
e.event == f.GameAction.DRAW_MULTI ? this.hands.getCard(e.cards) : this.hands.getCard(e.card);
this.checkHu();
} else {
console.log("对面打牌-----", e);
this.layoutHands[t].getCard(e.hands);
}
},
outCard: function(e) {
this.nodeQuest.active = !1;
this.lblTime.unscheduleAllCallbacks();
this.downloadTime(e.clock);
var t = a.realIdx[e.idx];
0 != t ? this.layoutHands[t].outCard(e.card) : e.auto && this.hands.autoSortCard(e.card);
this.changeAutoState(e);
this.ground[t].outCard(e.card, t, !0);
0 == t && this.checkHu();
var n = "MELD_" + e.card + ".mp3";
this.playManageAudio(n);
},
playerLeave: function(e) {
if (!u.isNullOrEmpty(e.reason)) {
this.btnDestory.active = !0;
h.alertTip(e.reason);
}
a.status = f.GameStatus.DESTORY;
r.disconnect(!1);
this.changeBtnState();
this.btnReady.active = !1;
this.players.forEach(function(e, t) {
e && 0 != t && e.removePlayer();
});
},
score: function() {},
gameDraw: function() {},
quest: function(e) {
var t = this;
a.serialID = e.serialID;
this.nodeQuest.active = !0;
var n = this.nodeQuest.getChildByName("hu"), i = this.nodeQuest.getChildByName("peng"), r = this.nodeQuest.getChildByName("gang"), o = this.nodeQuest.getChildByName("chi");
this.nodeQuest.getChildByName("guo").active = !0;
n.active = !1;
i.active = !1;
r.active = !1;
o.active = !1;
this.downloadTime(e.clock);
this.chiArr = [];
this.gangArr = [];
e.quests.forEach(function(s, c) {
switch (s.event) {
case f.GameAction.PLAY:
var l = {
idx: a.idx,
clock: e.clock,
serialID: e.serialID
};
t.playCard(l);
break;

case f.GameAction.PONG:
i.active = !0;
i.card = s.card;
i.answer = c;
break;

case f.GameAction.CHOW:
o.active = !0;
s.index = c;
t.chiArr.push(s);
break;

case f.GameAction.WIN:
n.active = !0;
t.lblTing.node.active = !1;
t.btnTing.active = !1;
n.card = s.card;
n.answer = c;
break;

default:
r.active = !0;
s.index = c;
t.gangArr.push(s);
}
});
},
btnQuestCall: function(e, t) {
var n = this;
this.nodeQuest.getChildByName("hu").active && t != f.GameAction.WIN ? h.showConfirm("是否放弃胡牌", function() {
n.handleQuestCall(t);
}) : this.handleQuestCall(t);
},
handleQuestCall: function(e) {
var t = this;
switch (e) {
case f.GameAction.GUO:
r.gameMessage(c.CS_ANSWER, {
answer: -1,
serialID: a.serialID
});
this.nodeQuest.active = !1;
break;

case f.GameAction.PONG:
r.gameMessage(c.CS_ANSWER, {
answer: this.nodeQuest.getChildByName("peng").answer,
serialID: a.serialID
});
this.nodeQuest.active = !1;
break;

case f.GameAction.CHOW:
if (this.chiArr.length > 1) {
this.chiArr.forEach(function(e) {
t.nodeSelectQuest.getChildByName("groundContent").getComponent("ModuleHandGroundMJ").addGround(e, 0);
});
this.nodeSelectQuest.active = !0;
return;
}
r.gameMessage(c.CS_ANSWER, {
answer: this.chiArr[0].index,
serialID: a.serialID
});
this.nodeQuest.active = !1;
break;

case "GANG":
if (this.gangArr.length > 1) {
this.gangArr.forEach(function(e) {
t.nodeSelectQuest.getChildByName("groundContent").getComponent("ModuleHandGroundMJ").addGround(e, 0);
});
this.nodeSelectQuest.active = !0;
return;
}
r.gameMessage(c.CS_ANSWER, {
answer: this.gangArr[0].index,
serialID: a.serialID
});
this.nodeQuest.active = !1;
break;

case f.GameAction.WIN:
r.gameMessage(c.CS_ANSWER, {
answer: this.nodeQuest.getChildByName("hu").answer,
serialID: a.serialID
});
this.nodeQuest.active = !1;
}
},
questCall: function(e) {
this.hideSelectQuest();
r.gameMessage(c.CS_ANSWER, {
answer: e.data.index,
serialID: a.serialID
});
this.nodeQuest.active = !1;
},
hideSelectQuest: function() {
this.nodeSelectQuest.getChildByName("groundContent").getComponent("ModuleHandGroundMJ").resetGround();
this.nodeSelectQuest.active = !1;
},
action: function(e) {
var t = this;
if (e.event != f.GameAction.DRAW && e.event != f.GameAction.DRAW_MULTI) if (e.event != f.GameAction.PLAY) {
var n, r = a.realIdx[e.idx], o = "";
if (e.idx == a.idx) {
this.hands._hands.forEach(function(e) {
return e.getCard = !1;
});
switch (e.event) {
case f.GameAction.PONG:
o = "PONG_0.mp3";
n = 0;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 2);
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case f.GameAction.CHOW:
o = "CHOW_0.mp3";
n = 5;
this.selfHandGround.addGround(e, 0);
[ e.tile, e.tile + 1, e.tile + 2 ].forEach(function(n) {
n != e.card && t.hands.removeCard(n);
});
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case f.GameAction.ZHI:
o = "KONG_0.mp3";
n = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 3);
this.hands.checkedCard = null;
this.hands.sortCards();
break;

case f.GameAction.SHOW:
n = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card);
this.hands.checkedCard = null;
this.hands.sortCards();
o = "KONG_3.mp3";
break;

case f.GameAction.KONG:
o = "KONG_0.mp3";
n = 1;
this.selfHandGround.addGround(e, 0);
this.hands.removeCard(e.card, 4);
this.hands.sortCards();
break;

case f.GameAction.FLOWER_MULTI:
this._delayTime = 5;
o = "FLOWER.mp3";
n = 3;
e.cards.forEach(function(n) {
var i = {
auto: e.auto,
card: n,
event: f.GameAction.FLOWER,
idx: e.idx
};
t.selfHandFlower.addFlower(i, 0);
t.hands.removeCard(n);
});
this.hands.sortCards();
break;

case f.GameAction.FLOWER:
this._delayTime = 5;
o = "FLOWER.mp3";
n = 3;
this.selfHandFlower.addFlower(e, 0);
this.hands.removeCard(e.card);
this.hands.sortCards();
break;

case f.GameAction.WIN:
console.log("胡牌--data---", e);
n = e.from == e.idx ? 4 : 2;
o = e.from == e.idx ? "WIN_DRAW_1.mp3" : "WIN_NODRAW_2.mp3";
}
} else switch (e.event) {
case f.GameAction.PONG:
n = 0;
o = "PONG_1.mp3";
this.layoutHands[r].action(e, r);
break;

case f.GameAction.CHOW:
o = "CHOW_3.mp3";
n = 5;
this.layoutHands[r].action(e, r);
break;

case f.GameAction.WIN:
n = e.from == e.idx ? 4 : 2;
o = e.from == e.idx ? "WIN_DRAW_0.mp3" : "WIN_NODRAW_0.mp3";
break;

case f.GameAction.FLOWER_MULTI:
this._delayTime = 5;
o = "FLOWER.mp3";
n = 3;
e.cards.forEach(function(n) {
var i = {
auto: e.auto,
card: n,
event: f.GameAction.FLOWER,
idx: e.idx
};
t.layoutHands[r].actionflower(i, r);
});
break;

case f.GameAction.FLOWER:
this._delayTime = 5;
o = "FLOWER.mp3";
n = 3;
this.layoutHands[r].actionflower(e, r);
break;

case f.GameAction.SHOW:
n = 1;
this.layoutHands[r].action(e, r);
o = "KONG_3.mp3";
break;

default:
o = "KONG_1.mp3";
n = 1;
this.layoutHands[r].action(e, r);
}
e.event != f.GameAction.PONG && e.event != f.GameAction.CHOW && e.event != f.GameAction.ZHI || this.ground[a.realIdx[e.from]].removeCard();
e.event == f.GameAction.WIN && (this._delayTime = 10);
this.imgQuest.active = !0;
this.imgQuest.scale = 0;
this.imgQuest.getComponent(cc.Sprite).spriteFrame = this.spriteFrameQuest[n];
this.imgQuest.stopAllActions();
var s = cc.place(i.GAME_HZMJ.QUEST_IMG_POS[r]), c = cc.scaleTo(.2, 1.5), l = cc.scaleTo(.1, .8), u = cc.scaleTo(.1, 1), d = cc.delayTime(.2), h = cc.sequence(s, c, l, u, d, cc.callFunc(function() {
t.imgQuest.scale = 0;
}));
this.imgQuest.runAction(h);
this.playManageAudio(o);
} else this.outCard(e); else this.getCard(e);
},
roundSummary: function(e) {
var t = this;
if (!e.destory) {
this.onCancelAuto();
this.nodeQuest.active = !1;
this.bgTing.active = !1;
this.nodeTx.active = !1;
this.btnTing.active = !1;
this.stopTime();
this.hands.hideTing();
cc.sprFlag.removeFromParent();
cc.playCard = !1;
var n = cc.instantiate(this.preRoundSummary);
n.parent = cc.find("Canvas");
n.getComponent("ModuleRoundSummary19").init(e);
n.active = !0;
e.players.forEach(function(e, n) {
var i = a.realIdx[n];
t.players[i].roundReset();
u.isNullOrEmpty(e.total) || (a.players[e.idx].total = e.total);
});
}
},
dead: function() {},
sendReady: function() {
this.roundReset();
r.gameMessage(c.CS_GAME_READY, {});
this.btnContinue.active = !1;
},
roundReset: function() {
this.hands.reset();
this.selfHandGround.resetGround();
this.selfHandFlower.resetFlower();
this.ground.forEach(function(e, t) {
e.reset(t);
});
this.layoutHands.forEach(function(e, t) {
0 != t && e.reset();
});
this.lblTing.node.active = !1;
this.btnTing.active = !1;
},
gameReady: function(e) {
var t = a.realIdx[e.idx];
if (0 == t) {
this.btnContinue.active = !1;
this.roundReset();
this.btnReady.active = !1;
}
this.players[t].imgReady.active = !0;
},
reconnect: function(e) {
var t = this;
a.outCards = [];
this.joinTable(e);
this.roundReset();
a.zhuang = e.banker;
a.wind = e.wind;
e.status, f.GameStatus.WAIT;
e.quickFinish && this.nodeTx.getComponent("ModuleTouxiang19").txInit(e.quickFinish);
if (e.status == f.GameStatus.START || e.status == f.GameStatus.PLAY || e.status == f.GameStatus.QUEST) {
this.nodeDirection.active = !0;
this.lblDeck.string = e.decks + "";
a.turn = e.turn;
this.resetPlayStatus(e);
if (e.combo && e.combo > 0) {
this.lblCombo.node.active = !0;
this.lblCombo.string = "+" + e.combo;
} else this.lblCombo.node.active = !1;
this.hands.init(e, !0);
if (null != e.currentPlayer && null == e.currentCard) {
var n = {
idx: e.currentPlayer,
clock: e.clock,
serialID: e.serialID
};
this.playCard(n);
a.currentPlayer = e.currentPlayer;
}
if (!u.isNullOrEmpty(e.grounds)) {
var i = e.grounds.filter(function(e) {
return e.event != f.GameAction.FLOWER;
});
this.selfHandGround.initGround(i, 0);
var r = e.grounds.filter(function(e) {
return e.event == f.GameAction.FLOWER;
});
this.selfHandFlower.initFlower(r, 0);
}
u.isNullOrEmpty(e.drops) || this.ground[0].init(e.drops, 0);
e.players.forEach(function(n) {
if (n) {
n.auto && t.startAuto(n);
var i = a.realIdx[n.idx];
if (0 != i) {
t.ground[i].init(n.drops, i);
t.layoutHands[i].init(n, i);
}
t.players[i].playerInit(n);
t.players[i].hideReady();
t.players[i].active(e.currentPlayer);
}
});
if (null != e.currentCard && e.currentCard.src != f.GameAction.SHOW) {
a.currentCard = e.currentCard;
this.outCard(e.currentCard);
}
this.checkOutCard();
if (e.quest) {
e.quest.clock = e.clock;
this.quest(e.quest);
}
this.btnReady.active = !1;
}
if (e.status == f.GameStatus.SUMMARY) {
this.nodeDirection.active = !0;
this.downloadTime(e.clock);
e.players.forEach(function(e) {
e.idx == a.idx && (t.btnReady.active = null == e.ready);
});
}
this.changeBtnState();
},
changeStatus: function(e) {
var t = a.realIdx[e.idx];
this.players[t].offlineChange(e.offline);
},
gameVoiceSchedule: function() {
if (this.timeCell > 0) this.timeCell--; else if (!(r._queueChatMsg.length <= 0)) {
var e = r._queueChatMsg.shift();
this.playSpeech(e);
}
},
playSpeech: function(e) {
var t = this;
l.getInstance().setBGMVolume(0);
l.getInstance().setSFXVolume(0);
var n = JSON.parse(e.content);
this.timeCell = Math.ceil(n.time / 100);
var i = a.realIdx[e.idx], r = d.getInstance();
this.sprHorn.forEach(function(e, t) {
e.node.active = t == i;
});
if (o.getFloat(o.STORAGE_KEY.SET_SOUND, 1) > 0) {
r.prepare("local-0.amr");
r.writeVoice("local-0.amr", n.voice);
r.play("local-0.amr");
}
setTimeout(function() {
r.release();
l.getInstance().setSFXVolume(o.getFloat(o.STORAGE_KEY.SET_SOUND, 1));
l.getInstance().setBGMVolume(o.getFloat(o.STORAGE_KEY.SET_MUSIC, 1));
null != t.sprHorn && t.sprHorn.forEach(function(e) {
e.node.active = !1;
});
}, n.time);
},
onExitGame: function() {
h.playSfx();
if ("CUSTOM" == a.options.mode) {
f.ShowTablePop = !0;
h.showConfirm("是否退出房间", function() {
r.gameMessage(c.CS_PLAYER_LEAVE, {});
});
} else {
if (a.status != f.GameStatus.DESTORY) return;
cc.director.loadScene("Lobby");
}
},
onPlayerLeave: function() {
r.disconnect();
},
onContinueMatch: function() {
h.playSfx();
u.pop(f.pop.MatchPop, function(e) {
e.getComponent("ModuleMatchPop").startMatch(a.config.roomID);
});
},
cancelAuto: function(e) {
var t = a.realIdx[e.idx];
this.players[t].activeAutoPlay(!1);
if (a.idx == e.idx) {
this.btnAuto.active = !0;
this.autoMask.active = !1;
}
},
startAuto: function(e) {
var t = a.realIdx[e.idx];
this.players[t].activeAutoPlay(!0);
if (a.idx == e.idx) {
this.btnAuto.active = !1;
this.autoMask.active = !0;
}
},
onStartAuto: function() {
h.playSfx();
console.log("状态---:", a.status);
if (a.status == f.GameStatus.START || a.status == f.GameStatus.QUEST || a.status == f.GameStatus.PLAY) {
this.btnAuto.active = !1;
this.autoMask.active = !0;
r.gameMessage(c.CS_START_AUTO, {});
}
},
onCancelAuto: function() {
h.playSfx();
this.btnAuto.active = !0;
this.autoMask.active = !1;
r.gameMessage(c.CS_CANCEL_AUTO, {});
},
changeAutoState: function(e) {
var t = a.realIdx[e.idx];
this.players[t].activeAutoPlay(e.auto);
if (a.idx == e.idx) {
this.btnAuto.active = !e.auto;
this.autoMask.active = e.auto;
}
},
changeBtnState: function() {
this.btnExit.active = "CUSTOM" == a.options.mode ? a.status == f.GameStatus.WAIT : a.status == f.GameStatus.DESTORY || a.status == f.GameStatus.WAIT;
},
syncCard: function(e) {
var t = [];
e.hands.sort(function(e, t) {
return e - t;
});
this.hands._hands.forEach(function(e, n) {
t[n] = e._card;
});
t.sort(function(e, t) {
return e - t;
});
if (t.toString() != e.hands.toString()) {
console.log("手牌同步: ", t, e.hands);
this.hands.init(e);
}
},
showSameCard: function(e) {
var t = e.data;
this.ground.forEach(function(e) {
e.showSameCard(t);
});
},
resetSameCard: function() {
this.ground.forEach(function(e) {
e.resetSameCard();
});
},
handleCheckHu: function(e) {
this.checkHu(e.data.card, e.data.showTing);
},
acTx: function() {
var e = new Date().getTime();
if (e - this.lastTxTime < 1e4) h.alertTip("点击过于频繁,不能少于10秒"); else if (a.status != f.GameStatus.WAIT && a.status != f.GameStatus.SUMMARY) {
this.lastTxTime = e;
r.gameMessage(c.CS_DISBAND, "allow");
} else h.alertTip("牌局未开始,无法解散");
},
onDistancePop: function() {
h.playSfx();
u.pop(f.pop.DistanceMJPop);
},
onRulePop: function() {
h.playSfx();
u.pop(f.pop.MJRulePop);
},
downloadTime: function(e) {
var t = this;
this.lblTime.unscheduleAllCallbacks();
var n = u.getTimeStamp(e), i = u.getTimeStamp(), a = Math.floor((n - i) / 1e3);
a > 0 && (this.lblTime.string = a);
this.lblTime.schedule(function() {
var e = u.getTimeStamp(), i = Math.floor((n - e) / 1e3);
i < 0 || (t.lblTime.string = i);
}, 1);
},
stopTime: function() {
this.lblTime.string = "";
this.lblTime.unscheduleAllCallbacks();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/hall/data/App": "App",
"../../Game16/Script/MJGameConfig": "MJGameConfig",
"../../Game16/demo/queue": "queue",
"../../commonScript/ModuleFlowerMJ": "ModuleFlowerMJ",
"../../commonScript/ModuleGroundMJ": "ModuleGroundMJ",
"../../commonScript/ModuleHandGroundMJ": "ModuleHandGroundMJ",
"../../commonScript/ModuleHandsMJ": "ModuleHandsMJ",
"../../commonScript/ModuleOtherHandsMJ": "ModuleOtherHandsMJ",
"../Hulib/calc19": "calc19",
DataBase: "DataBase",
GameBase: "GameBase",
PACK: "PACK",
assert: 1,
"audio-ctrl": "audio-ctrl",
"native-extend": "native-extend",
"voice-ctrl": "voice-ctrl"
} ],
SelectLink: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "0373dwB5qJLTbe3KfftoXkb", "SelectLink");
n.__esModule = !0;
n.SelectLink = void 0;
var i = e("../../GameBase/GameConfig"), a = u(e("../../script/common/GameUtils")), r = u(e("../../script/common/network/Http")), o = u(e("../NetWork/Connector")), s = function(e) {
if (e && e.__esModule) return e;
if (null === e || "object" != typeof e && "function" != typeof e) return {
default: e
};
var t = l(void 0);
if (t && t.has(e)) return t.get(e);
var n = {}, i = Object.defineProperty && Object.getOwnPropertyDescriptor;
for (var a in e) if ("default" !== a && Object.prototype.hasOwnProperty.call(e, a)) {
var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a];
}
n.default = e;
t && t.set(e, n);
return n;
}(e("../Script/utils")), c = u(e("./Cache"));
function l(e) {
if ("function" != typeof WeakMap) return null;
var t = new WeakMap(), n = new WeakMap();
return (l = function(e) {
return e ? n : t;
})(e);
}
function u(e) {
return e && e.__esModule ? e : {
default: e
};
}
function d(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function h(e, t, n) {
t && d(e.prototype, t);
n && d(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
var f = function() {
function e(e, t) {
void 0 === e && (e = null);
void 0 === t && (t = null);
this._apiUrl = null;
this._apiSelected = !1;
this._hotSelected = !1;
this._apiCallback = null;
this._hotCallback = null;
this._startTime = 0;
this.selectCount = 0;
this.serverFailed = null;
this._apiUrl = null;
this._apiSelected = !1;
this._hotSelected = !1;
this._apiCallback = e;
this._hotCallback = t;
this._startTime = 0;
this.loadLocalConfig();
}
var t = e.prototype;
t.loadLocalConfig = function() {
if (cc.sys.isBrowser) this.changeLocalUrl("http://192.168.0.110:8000/"); else {
var e = 0;
cc.game.on(cc.game.EVENT_HIDE, function() {
e = new Date().getTime();
cc.game.pause();
});
cc.game.on(cc.game.EVENT_SHOW, function() {
cc.game.resume();
new Date().getTime() - e > 2e4 && 0 != e ? cc.game.restart() : e = 0;
});
this.selectLinkJSON(0);
}
};
t.selectLinkJSON = function(e) {
var t = this;
if (this.selectCount > 3) c.default.alertTip("无法连接服务器,请联系管理员"); else {
var n = [ "https://khgtyuq.oss-cn-hongkong.aliyuncs.com/config/release_first.json", "https://pku.qzhagy.com/config/release_first.json", "https://pku.nxhzgq.com/config/release_first.json" ];
this.selectCount++;
s.default.NewXMLRequestOSS(n[e], function(a) {
if ("err" == a) t.selectLinkJSON(t.selectCount); else {
s.default.saveValue(i.GameConfig.StorageKey.LinkJson, n[e]);
t.selectQuickestUrl(a);
}
});
}
};
t.selectQuickestUrl = function(e) {
var t = this;
this._apiSelected = !1;
this.serverFailed && clearTimeout(this.serverFailed);
this._startTime = a.default.getTimeStamp();
this.serverFailed = setTimeout(function() {
c.default.alertTip("网络较卡,正在选择新线路");
t.loadDefaultUrl();
}, 2e4);
e.servers.forEach(function(n) {
s.default.XMLRequest(n, e, t.changeLocalUrl.bind(t));
});
};
t.loadDefaultUrl = function() {
var e = this;
s.default.testConnect(i.GameConfig.DefaultUrl, function(t, n) {
console.log("loadDefaultUrl---", t, n);
if (t) {
a.default.LogsClient(i.GameConfig.LogsEvents.SELECT_LINK, {
action: i.GameConfig.LogsActions.SELECT_LINK_FAIL
});
c.default.showTipsMsg("无法访问服务器,请检查网络后再重启游戏", function() {
cc.game.end();
});
} else {
a.default.LogsClient(i.GameConfig.LogsEvents.SELECT_LINK, {
action: i.GameConfig.LogsActions.SELECT_SPARE_LINK
});
s.default.saveValue(i.GameConfig.StorageKey.ServerUrlObj, n);
e.selectQuickestUrl(n);
}
});
};
t.changeLocalUrl = function(e, t) {
if (!this._apiSelected) {
this._apiSelected = !0;
clearTimeout(this.serverFailed);
o.default.logicUrl = e;
r.default.API_URL = e;
var n = ((a.default.getTimeStamp() - this._startTime) / 1e3).toFixed(2);
a.default.LogsClient(i.GameConfig.LogsEvents.SELECT_LINK, {
action: i.GameConfig.LogsActions.SELECT_LINK_TIME,
url: e,
times: n
});
s.default.saveValue(i.GameConfig.StorageKey.ServerUrlObj, t);
this._apiCallback && this._apiCallback();
}
};
t.selectHot = function() {
var e = this;
this._hotSelected = !1;
var t = s.default.getValue(i.GameConfig.StorageKey.ServerUrlObj, {});
if (s.default.isNullOrEmpty(t) || s.default.isNullOrEmpty(t.update)) this._hotCallback && this._hotCallback(""); else if ("string" != typeof t.update) {
this.hotSelectFail && clearTimeout(this.hotSelectFail);
this.hotSelectFail = setTimeout(function() {
e._hotCallback && e._hotCallback("");
}, 12e3);
t.update.forEach(function(t) {
o.default.get(t + "version.manifest", "getJson", function() {
e.changeHotUrl(t);
}, null, function(e) {
console.log(t + "---err--", e);
});
});
} else this._hotCallback && this._hotCallback(t.update);
};
t.changeHotUrl = function(e) {
if (!this._hotSelected) {
this._hotSelected = !0;
clearTimeout(this.hotSelectFail);
console.log("新的热更新地址-----", e);
this._hotCallback && this._hotCallback(e);
}
};
h(e, [ {
key: "ApiUrl",
get: function() {
return this._apiUrl;
}
} ]);
return e;
}();
n.SelectLink = f;
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/common/GameUtils": "GameUtils",
"../../script/common/network/Http": "Http",
"../NetWork/Connector": "Connector",
"../Script/utils": "utils",
"./Cache": "Cache"
} ],
SelectTradeType: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "ddb3fdzPXdGToVIJlNoSh7N", "SelectTradeType");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l = e("../../../GameBase/GameConfig"), u = f(e("../../../Main/NetWork/Connector")), d = f(e("../../../Main/Script/Cache")), h = f(e("../../common/GameUtils"));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
function p(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function m(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function g(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
v(e, t);
}
function v(e, t) {
return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function C(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var b = cc._decorator, y = b.ccclass, S = b.property, _ = (i = S(cc.Label), a = S(cc.Prefab), 
y(r = (o = function(e) {
g(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
p(t = e.call.apply(e, [ this ].concat(i)) || this, "lblAmount", s, m(t));
p(t, "tradeInfoPop", c, m(t));
t.payType = null;
return t;
}
var n = t.prototype;
n.initData = function(e) {
this.tradeData = e;
this.lblAmount.string = "请选择支付方式";
};
n.selectPayType = function(e, t) {
d.default.playSfx();
this.payType = t;
};
n.onClickEnsure = function() {
var e = this;
d.default.playSfx();
h.default.isNullOrEmpty(this.payType) ? d.default.alertTip("请选择支付方式") : u.default.request(l.GameConfig.ServerEventName.POTCCreateTrade, {
amount: this.tradeData.amount,
payType: this.payType,
tradeType: this.tradeData.tradeType
}, function(t) {
if (h.default.getValue(l.GameConfig.StorageKey.CreateTrade, !1)) {
var n = cc.instantiate(e.tradeInfoPop);
n.getComponent("ProxyTradeInfoPage").initData(t.trade.id);
cc.find("Canvas").addChild(n);
if (e.node) {
e.node.removeFromParent();
e.node.destroy();
}
} else d.default.showTipsMsg("仔细核对对方收款账户信息,避免转错账户,（请保留付款凭证,作为申诉依据）", function() {
var n = cc.instantiate(e.tradeInfoPop);
n.getComponent("ProxyTradeInfoPage").initData(t.trade.id);
cc.find("Canvas").addChild(n);
if (e.node) {
e.node.removeFromParent();
e.node.destroy();
}
}, l.GameConfig.StorageKey.CreateTrade);
}, !0, function(t) {
d.default.showTipsMsg(t.message || "购买失败", function() {
if (e.node) {
e.node.removeFromParent();
e.node.destroy();
}
});
});
};
n.onClickClose = function() {
d.default.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
return t;
}(cc.Component), s = C(o.prototype, "lblAmount", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c = C(o.prototype, "tradeInfoPop", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), o)) || r);
n.default = _;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../common/GameUtils": "GameUtils"
} ],
SharePop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "07ffbbDYihF+bYdIwL+qm10", "SharePop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s = e("../../../GameBase/GameConfig"), c = d(e("../../../Main/NetWork/Connector")), l = d(e("../../../Main/Script/Cache")), u = d(e("../common/Avatar"));
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
function h(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function f(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function p(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
m(e, t);
}
function m(e, t) {
return (m = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
var g = cc._decorator, v = g.ccclass, C = (i = (0, g.property)(u.default), v(a = (r = function(e) {
p(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
h(t = e.call.apply(e, [ this ].concat(i)) || this, "img", o, f(t));
return t;
}
var n = t.prototype;
n.onLoad = function() {
var e = this;
this.addEvents();
c.default.request(s.GameConfig.ServerEventName.GetGameInfo, {}, function(t) {
if (t.data) {
s.GameConfig.ConfigUrl = t.data.resourceUrl;
s.GameConfig.NoticeUrl = t.data.noticeUrl;
s.GameConfig.RecordUrl = t.data.recordUrl;
s.GameConfig.HeadUrl = t.data.headUrl;
s.GameConfig.DownloadUrl = t.data.download;
s.GameConfig.RoomConfig = t.data.gameConfig;
s.GameConfig.ShareUrl = t.data.shareUrl;
for (var n in t.data) s.GameConfig.GameInfo[n] = t[n];
}
e.img.avatarUrl = s.GameConfig.ShareUrl;
console.log("123123", e.img.avatarUrl);
});
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.onClickClose = function() {
l.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), o = function(e, t, n, i) {
var a = {};
Object.keys(i).forEach(function(e) {
a[e] = i[e];
});
a.enumerable = !!a.enumerable;
a.configurable = !!a.configurable;
("value" in a || a.initializer) && (a.writable = !0);
void 0;
if (void 0 === (a = n.slice().reverse().reduce(function(t, n) {
return n(e, "img", t) || t;
}, a)).initializer) {
Object.defineProperty(e, "img", a);
a = null;
}
return a;
}(r.prototype, 0, [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), r)) || a);
n.default = C;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../common/Avatar": "Avatar"
} ],
SummaryInfo: [ function(e, t) {
"use strict";
cc._RF.push(t, "5bdf2ZEO/dB07LeVXFLne4a", "SummaryInfo");
var n = e("../../Main/Script/TableInfo"), i = e("../../Main/Script/utils"), a = e("../GameConfig").GameConfig;
cc.Class({
extends: cc.Component,
properties: {
roomId: cc.Label,
time: cc.Label,
version: cc.Label
},
start: function() {
this.time.string = i.timestampToTime(new Date().getTime());
n.options && n.options.roomID && n.options.tableID && (this.roomId.string = n.options.roomID + " 房号: " + n.options.tableID);
cc.sys.os != cc.sys.OS_IOS && cc.sys.os != cc.sys.OS_ANDROID && (cc.gameVersion = a.DefaultVersion);
null == cc.gameVersion && (cc.gameVersion = a.DefaultVersion);
this.version.string = "版本号: " + cc.gameVersion;
}
});
cc._RF.pop();
}, {
"../../Main/Script/TableInfo": "TableInfo",
"../../Main/Script/utils": "utils",
"../GameConfig": "GameConfig"
} ],
TableGameItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "45ce2x0Z1hNl6Tb7xZfy4Bl", "TableGameItem");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("../../../Main/Script/Cache"), a = e("./data/App").App;
cc.Class({
extends: cc.Component,
properties: {
chooseNode: cc.Node,
unChooseNode: cc.Node,
gameType: "",
gameSprArr: [ cc.SpriteFrame ]
},
addEvents: function() {
this.node.on(cc.Node.EventType.TOUCH_END, this.onClickBtn, this);
a.EventManager.addEventListener(n.GameEventNames.GAME_TYPE_CHANGE, this.changeUI, this);
},
removeEvents: function() {
a.EventManager.removeEventListener(n.GameEventNames.GAME_TYPE_CHANGE, this.changeUI, this);
},
initData: function(e) {
this.addEvents();
this.gameType = e;
var t = {
HALL: this.gameSprArr[0],
PDK: this.gameSprArr[1],
HZMJ: this.gameSprArr[2],
LDZP: this.gameSprArr[3],
XHZD: this.gameSprArr[4]
};
this.chooseNode.getComponent(cc.Sprite).spriteFrame = t[e];
this.unChooseNode.getComponent(cc.Sprite).spriteFrame = t[e];
this.unChooseNode.opacity = 120;
},
onClickBtn: function() {
i.playSfx();
a.EventManager.dispatchEventWith(n.GameEventNames.GAME_TYPE_CHANGE, this.gameType);
},
changeUI: function(e) {
this.chooseNode.active = e.data == this.gameType;
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"./data/App": "App"
} ],
TableInfo: [ function(e, t) {
"use strict";
cc._RF.push(t, "4fee9DSu4JBE6aNBPkwfkhx", "TableInfo");
t.exports = {
currentTag: null,
endGame: !1,
bao: -1,
baodan: [ !1, !1, !1 ],
tid: null,
realIdx: null,
current: null,
idx: null,
config: null,
status: null,
reconnect: null,
playerHead: null,
turn: 0,
currentPlayer: null,
firstPlay: null,
players: null,
tips: null,
zhongzhuang: null,
empData: [ {}, {}, {} ],
zhuang: null,
hostId: null,
select: null,
shuffle: !1,
zhao: [],
gameSummary: null,
cardsSpriteFrame: new Array(30),
sprZPCards: new Array(20),
cardsPool: null,
mjOutCards: [],
outCards: [],
mjPlayerPos: [ {
x: -487,
y: -139
}, {
x: 489,
y: 89
}, {
x: 318,
y: 240
}, {
x: -487,
y: 43
} ],
playerPos: [ {
x: -499,
y: -213
}, {
x: 508,
y: 116
}, {
x: -499,
y: 116
} ]
};
cc._RF.pop();
}, {} ],
TablePop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "b7c08kSF2RKSKk5rVc3smct", "TablePop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M, x, O, G, R, k, L, B, F, U, H, z, j, W, q, Y, J, V, K, Z, Q, X, $, ee, te = e("../../../GameBase/GameConfig"), ne = ue(e("../../../Main/Script/Cache")), ie = ue(e("../../common/GameUtils")), ae = ue(e("../../../Main/Script/DataBase")), re = ue(e("../../../Main/NetWork/Connector")), oe = e("./data/App"), se = ue(e("../common/Avatar")), ce = e("./data/Dict"), le = ue(e("../common/CompList"));
e("../../../Main/Script/TableInfo");
function ue(e) {
return e && e.__esModule ? e : {
default: e
};
}
function de(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function he(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function fe(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
pe(e, t);
}
function pe(e, t) {
return (pe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function me(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var ge = cc._decorator, ve = ge.ccclass, Ce = ge.property, be = (i = Ce(cc.Node), 
a = Ce(cc.Prefab), r = Ce(cc.Node), o = Ce(se.default), s = Ce(cc.Label), c = Ce(cc.Label), 
l = Ce(cc.Label), u = Ce(cc.Node), d = Ce(cc.Label), h = Ce(cc.Label), f = Ce(cc.Node), 
p = Ce(cc.Node), m = Ce(cc.Prefab), g = Ce(cc.Prefab), v = Ce(cc.Node), C = Ce(cc.Node), 
b = Ce(cc.Node), y = Ce(cc.Node), S = Ce(cc.Node), _ = Ce(cc.Node), T = Ce(cc.Node), 
E = Ce(cc.Node), A = Ce(cc.Node), I = Ce(cc.Node), N = Ce(cc.Label), ve(w = (D = function(e) {
fe(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
de(t = e.call.apply(e, [ this ].concat(i)) || this, "robotBtn", P, he(t));
de(t, "tableItem", M, he(t));
de(t, "tableContent", x, he(t));
de(t, "avatar", O, he(t));
de(t, "username", G, he(t));
de(t, "lblScore", R, he(t));
de(t, "userId", k, he(t));
de(t, "onlyWaitIcon", L, he(t));
de(t, "clubName", B, he(t));
de(t, "clubID", F, he(t));
de(t, "rewardNode", U, he(t));
de(t, "quickStartBtn", H, he(t));
de(t, "gameBtnItem", z, he(t));
de(t, "roomBtnItem", j, he(t));
de(t, "gameContent", W, he(t));
de(t, "roomContent", q, he(t));
de(t, "noticeBtn", Y, he(t));
de(t, "proxyBtn", J, he(t));
de(t, "childBtn", V, he(t));
de(t, "blackListBtn", K, he(t));
de(t, "changeIDBtn", Z, he(t));
de(t, "noticeNode", Q, he(t));
de(t, "totalScore", X, he(t));
de(t, "activeBtn", $, he(t));
de(t, "lblNotice", ee, he(t));
t.currentType = "";
t.currentRoom = "";
t.connecting = !1;
t.interval = 0;
t.roomNameDict = null;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.roomNameDict = new ce.Dict();
this.addEvents();
this.refreshUI();
this.robotBtn.active = ae.default.player.isSuperUser;
this.changeIDBtn.active = ae.default.player.isSuperUser;
};
n.addEvents = function() {
oe.App.EventManager.addEventListener(te.GameConfig.GameEventNames.GAME_TYPE_CHANGE, this.renderRoom, this);
oe.App.EventManager.addEventListener(te.GameConfig.GameEventNames.ROOM_TYPE_CHANGE, this.selectRoom, this);
oe.App.EventManager.addEventListener(te.GameConfig.GameEventNames.CLUB_DATA_CHANGE, this.updateUI, this);
oe.App.EventManager.addEventListener(te.GameConfig.GameEventNames.CLUB_ROOM_CHANGE, this.refreshUI, this);
oe.App.EventManager.addEventListener(te.GameConfig.GameEventNames.CLUB_ROOM_DESTROY, this.refreshTableData, this);
};
n.removeEvents = function() {
oe.App.EventManager.removeEventListener(te.GameConfig.GameEventNames.GAME_TYPE_CHANGE, this.renderRoom, this);
oe.App.EventManager.removeEventListener(te.GameConfig.GameEventNames.ROOM_TYPE_CHANGE, this.selectRoom, this);
oe.App.EventManager.removeEventListener(te.GameConfig.GameEventNames.CLUB_DATA_CHANGE, this.updateUI, this);
oe.App.EventManager.removeEventListener(te.GameConfig.GameEventNames.CLUB_ROOM_CHANGE, this.refreshUI, this);
oe.App.EventManager.removeEventListener(te.GameConfig.GameEventNames.CLUB_ROOM_DESTROY, this.refreshTableData, this);
};
n.updateUI = function() {
this.lblScore.string = ie.default.formatGold(oe.App.Club.ClubScore);
this.clubName.string = "" + oe.App.Club.ClubName;
this.initNotice();
};
n.refreshUI = function() {
var e = this;
this.roomData = new Object();
this.currentRoomData = new Object();
this.connecting = !0;
re.default.request(te.GameConfig.ServerEventName.ClubInfo, {
clubID: oe.App.Club.CurrentClubID
}, function(t) {
e.connecting = !0;
if (!ie.default.isNullOrEmpty(t.club)) {
var n, i, a, r, o, s;
oe.App.Club.IsLeague = !0;
oe.App.Club.ClubNotice = (null == (n = t.club) ? void 0 : null == (i = n.club) ? void 0 : i.notice) || "---";
oe.App.Club.ClubBank = t.club.bank || 0;
oe.App.Club.ClubScore = t.club.score || 0;
oe.App.Club.ClubReward = t.club.reward || 0;
oe.App.Club.ClubLevel = t.club.level || 0;
oe.App.Club.ShuffleLevel = t.club.shuffleLevel || 0;
oe.App.Club.ClubName = (null == (a = t.club) ? void 0 : null == (r = a.club) ? void 0 : r.name) || "----";
oe.App.Club.CurrentClubRole = t.club.role || "user";
e.rewardNode.active = "owner" == oe.App.Club.CurrentClubRole || "proxy" == oe.App.Club.CurrentClubRole;
e.clubName.string = "" + oe.App.Club.ClubName;
e.activeBtn.active = t.taskStatus;
var c = ie.default.getValue(te.GameConfig.StorageKey.ActiveDayTips, 0), l = new Date().getDate();
if (c != l && t.taskStatus) {
ie.default.saveValue(te.GameConfig.StorageKey.ActiveDayTips, l);
ie.default.pop(te.GameConfig.pop.ClubActivePop);
}
e.avatar.avatarUrl = ae.default.player.head || "";
e.userId.string = "ID: " + (ae.default.player.id || "----");
e.username.string = ie.default.getStringByLength(ae.default.player.name) || "----";
e.lblScore.string = ie.default.formatGold(oe.App.Club.ClubScore) || "-----";
e.clubID.string = "ID: " + ((null == (o = t.club) ? void 0 : null == (s = o.club) ? void 0 : s.id) || "----");
e.totalScore.active = "user" != oe.App.Club.CurrentClubRole;
e.noticeBtn.active = "owner" == oe.App.Club.CurrentClubRole || "manager" == oe.App.Club.CurrentClubRole;
e.blackListBtn.active = "owner" == oe.App.Club.CurrentClubRole || "manager" == oe.App.Club.CurrentClubRole;
if ("user" == oe.App.Club.CurrentClubRole) {
e.proxyBtn.active = !1;
e.childBtn.active = !1;
} else {
e.proxyBtn.active = oe.App.Club.IsLeague;
e.childBtn.active = !0;
}
e.initNotice();
}
e.roomNameDict.clear();
ie.default.isNullOrEmpty(t.rooms) || function() {
te.GameConfig.TableAllRooms = ie.default.deepcopyArr(t.rooms);
t.rooms.forEach(function(t) {
e.roomNameDict.add(t.roomID, t.name);
ie.default.isNullOrEmpty(e.roomData[t.gameType]) && (e.roomData[t.gameType] = []);
e.roomData[t.gameType].push(t);
});
var n = {}, i = function(t) {
ie.default.isNullOrEmpty(n[t]) && (n[t] = []);
e.roomData[t].forEach(function(e) {
n[t].push(e.roomID);
});
};
for (var a in e.roomData) i(a);
e.roomData.HALL = [ {
name: "大厅",
roomID: []
} ];
for (var r in n) {
var o = ie.default.deepcopyArr(e.roomData[r])[0];
o.roomID = n[r];
o.name = "大厅";
e.roomData[r].unshift(o);
e.roomData.HALL[0].roomID = e.roomData.HALL[0].roomID.concat(n[r]);
}
e.renderGame();
}();
}, !0, function(e) {
ne.default.showTipsMsg(e.message || "获取公会信息失败", function() {});
});
};
n.initNotice = function() {
var e = this;
if (!ie.default.isNullOrEmpty(oe.App.Club.ClubNotice)) {
this.noticeNode.active = !0;
this.lblNotice.string = oe.App.Club.ClubNotice || "----";
setTimeout(function() {
if (e.lblNotice) {
e.lblNotice.node.stopAllActions();
var t = e.lblNotice.node.width + e.lblNotice.node.parent.width, n = cc.place(cc.v2(e.lblNotice.node.parent.width / 2, 0)), i = cc.moveBy(t / 100, cc.v2(-t, 0)), a = cc.sequence(n, i), r = cc.repeatForever(a);
e.lblNotice.node.runAction(r);
}
}, 500);
}
};
n.renderGame = function() {
this.gameContent.removeAllChildren();
var e = ie.default.isNullOrEmpty(te.GameConfig.TableRoom) ? "HALL" : te.GameConfig.TableRoom.gameType, t = [];
for (var n in this.roomData) {
t.push(n);
var i = cc.instantiate(this.gameBtnItem);
i.getComponent("TableGameItem").initData(n);
"XHZD" == n ? this.gameContent.addChild(i, 2) : "HALL" == n ? this.gameContent.addChild(i, 3) : this.gameContent.addChild(i);
}
oe.App.EventManager.dispatchEventWith(te.GameConfig.GameEventNames.GAME_TYPE_CHANGE, e);
};
n.renderRoom = function(e) {
var t = this, n = e.data;
this.currentType = n;
this.currentRoomData = new Object();
this.roomContent.removeAllChildren();
this.roomData[n].forEach(function(e) {
var n = cc.instantiate(t.roomBtnItem);
n.getComponent("TableRoomItem").initData(e);
t.roomContent.addChild(n);
});
var i = 0;
if (!ie.default.isNullOrEmpty(te.GameConfig.TableRoom)) {
i = this.roomData[n].findIndex(function(e) {
return e.roomID == te.GameConfig.TableRoom.roomID;
});
console.log("---roomIndex--", i);
-1 == i && (i = 0);
}
oe.App.EventManager.dispatchEventWith(te.GameConfig.GameEventNames.ROOM_TYPE_CHANGE, this.roomData[n][i]);
};
n.selectRoom = function(e) {
var t = e.data;
this.currentRoomData = t;
this.downloadTableData(t);
};
n.downloadTableData = function(e) {
var t = this;
if (!ie.default.isNullOrEmpty(e.roomID)) {
var n = [];
"object" != typeof e.roomID ? n.push(e.roomID) : n = e.roomID;
this.connecting = !0;
re.default.request(te.GameConfig.ServerEventName.Tables, {
rooms: n,
clubID: oe.App.Club.CurrentClubID
}, function(n) {
ne.default.hideMask();
t.connecting = !1;
t.interval = 0;
if (n.success) {
console.log("roomData", e);
"object" != typeof e.roomID ? t.quickStartBtn.active = !0 : t.quickStartBtn.active = !1;
var i = [];
(i = n.rooms.map(function(e) {
return e.tables.map(function(t) {
if (ie.default.isNullOrEmpty(t)) return {};
var n = JSON.parse(t);
n.roomID = e.roomID;
return n;
});
}).reduce(function(e, t) {
return e.concat(t);
})).sort(function(e, t) {
return ie.default.sortByProps(e, t, {
status: "desc",
players: "asc"
});
});
if ("object" != typeof e.roomID) {
var a = {
person: e.person,
players: [],
status: "WAIT",
roomID: e.roomID,
mode: "CUSTOM",
gameType: e.gameType
};
i.unshift(a);
} else if ("HALL" == t.currentType) {
console.log("this.roomData----- ", t.roomData);
var r = [];
for (var o in t.roomData) if ("HALL" != o) {
var s = {
person: 2,
players: [],
status: "WAIT",
mode: "CUSTOM",
gameType: o,
type: "create",
msg: t.roomData[o]
};
r.unshift(s);
console.log("key: ", o);
}
r.sort(function(e, t) {
return ie.default.sortByProps(e, t, {
gameType: "XHZD"
});
});
i = r.concat(i);
}
t.tableData = i;
oe.App.EventManager.dispatchEventWith(te.GameConfig.GameEventNames.ROOM_TYPE_BTN_CHANGE, e);
t.renderTableUI(e);
}
}, null, function() {
t.connecting = !1;
t.interval = 0;
});
}
};
n.onWaitTable = function() {
ne.default.playSfx();
if (!ie.default.isNullOrEmpty(this.currentRoomData)) {
this.onlyWaitIcon.active = !this.onlyWaitIcon.active;
this.renderTableUI(this.currentRoomData);
}
};
n.renderTableUI = function(e) {
var t = this;
try {
this.tableContent.removeAllChildren();
this.tableData.forEach(function(n) {
if (!ie.default.isNullOrEmpty(n)) {
n.roomData = e;
n.roomNameDict = t.roomNameDict;
}
});
this.tableContent.getComponent(le.default).data = this.tableData;
if (te.GameConfig.IsQuickStart) {
te.GameConfig.IsQuickStart = !1;
this.newMatchEnter();
}
} catch (e) {
console.log("-加桌子--报错--", e);
}
};
n.newMatchEnter = function() {
var e = this, t = {
isAgain: !0,
roomID: [],
gameType: "LDZP",
tableID: "",
clubID: oe.App.Club.CurrentClubID,
isQuick: !0
};
re.default.request(te.GameConfig.ServerEventName.JoinClubGame, t, function(t) {
ie.default.saveValue(te.GameConfig.StorageKey.LastRoomData, e.currentRoomData);
te.GameConfig.ShowTablePop = !0;
re.default.connect(t, function() {
te.GameConfig.CurrentGameType = t.data.gameType;
ae.default.setGameType(ae.default.GAME_TYPE[t.data.gameType]);
cc.director.loadScene(ae.default.TABLE_TYPE[t.data.gameType]);
});
}, !0, function(e) {
ne.default.showTipsMsg(e.message || "进入游戏失败");
});
};
n.onQuickStart = function() {
ne.default.playSfx();
this.enterGame();
};
n.enterGame = function() {
var e = this, t = new Date().getTime();
if (!(t - te.GameConfig.LastSocketTime < 2e3)) {
te.GameConfig.LastSocketTime = t;
te.GameConfig.TableRoom = this.currentRoomData;
if ("XHZD" == this.currentRoomData.gameType) ie.default.pop(te.GameConfig.pop.MatchPop, function(t) {
t.getComponent("ModuleMatchPop").startMatch(e.currentRoomData.roomID);
}); else {
var n = {
roomID: this.currentRoomData.roomID,
gameType: this.currentRoomData.gameType,
tableID: "",
clubID: oe.App.Club.CurrentClubID,
isQuick: !0
};
re.default.request(te.GameConfig.ServerEventName.JoinClubGame, n, function(t) {
ie.default.saveValue(te.GameConfig.StorageKey.LastRoomData, e.currentRoomData);
te.GameConfig.ShowTablePop = !0;
re.default.connect(t, function() {
te.GameConfig.CurrentGameType = t.data.gameType;
ae.default.setGameType(ae.default.GAME_TYPE[t.data.gameType]);
cc.director.loadScene(ae.default.TABLE_TYPE[t.data.gameType]);
});
}, !0, function(e) {
ne.default.showTipsMsg(e.message || "进入游戏失败");
});
}
}
};
n.refreshTableData = function() {
var e = this;
this.downloadTableData(this.currentRoomData);
re.default.request(te.GameConfig.ServerEventName.ClubInfo, {
clubID: oe.App.Club.CurrentClubID
}, function(t) {
if (!ie.default.isNullOrEmpty(t.club)) {
var n, i, a, r, o, s;
oe.App.Club.IsLeague = 1 == (null == (n = t.club) ? void 0 : null == (i = n.club) ? void 0 : i.isLeague);
oe.App.Club.ClubNotice = null == (a = t.club) ? void 0 : null == (r = a.club) ? void 0 : r.notice;
oe.App.Club.ClubBank = t.club.bank || 0;
oe.App.Club.ClubScore = t.club.score;
oe.App.Club.ClubReward = t.club.reward;
oe.App.Club.ShuffleLevel = t.club.shuffleLevel;
oe.App.Club.ClubLevel = t.club.level;
oe.App.Club.ClubName = t.club.club.name;
oe.App.Club.CurrentClubRole = t.club.role;
e.rewardNode.active = "owner" == t.club.role || "proxy" == t.club.role;
e.clubName.string = (oe.App.Club.IsLeague ? "联盟: " : "公会: ") + oe.App.Club.ClubName;
e.activeBtn.active = t.taskStatus;
e.avatar.avatarUrl = ae.default.player.head;
e.userId.string = "ID: " + ae.default.player.id;
e.username.string = ie.default.getStringByLength(ae.default.player.name);
e.lblScore.string = ie.default.formatGold(oe.App.Club.ClubScore);
e.clubID.string = "ID: " + (null == (o = t.club) ? void 0 : null == (s = o.club) ? void 0 : s.id);
e.totalScore.active = "user" != t.club.role;
e.noticeBtn.active = "owner" == t.club.role || "manager" == t.club.role;
e.blackListBtn.active = "owner" == t.club.role || "manager" == t.club.role;
if ("user" == t.club.role) {
e.proxyBtn.active = !1;
e.childBtn.active = !1;
} else {
e.proxyBtn.active = oe.App.Club.IsLeague;
e.childBtn.active = !0;
}
e.initNotice();
}
}, !1, function() {});
};
n.openNotice = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ClubNoticePop);
};
n.openBlackList = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.BlackListPop);
};
n.openChangeID = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ChangeIDPop);
};
n.openClubUserList = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ClubUserListPop);
};
n.openHistory = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ClubHistoryListPop, function(e) {
e.getComponent("ClubHistoryListPop").initUserID(ae.default.player.id);
});
};
n.openClubBank = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ClubBankPop);
};
n.openRobotPop = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.RobotPop);
};
n.openClubReward = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ClubRewardPop);
};
n.openProxyList = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ClubProxyListPop, function(e) {
e.getComponent("ClubProxyListPop").initUserID(ae.default.player.id);
});
};
n.openChildUser = function() {
ne.default.openType = 1;
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ChildUserListPop, function(e) {
e.getComponent("ChildUserListPop").initUserID(ae.default.player.id);
});
};
n.openInfoPop = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.InfoPop);
};
n.openWalletPop = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ClubWalletListPop);
};
n.openActivePop = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ClubActivePop);
};
n.onClickScore = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ClubScoreListPop);
};
n.onClickTotalScore = function() {
ne.default.playSfx();
ie.default.pop(te.GameConfig.pop.ChildScoreListPop);
};
n.onSearchTable = function() {
var e = this;
ne.default.playSfx();
ne.default.showNumer("请输入房间号", te.GameConfig.NumberType.INT, function(t) {
var n = [];
"object" != typeof e.currentRoomData.roomID ? n.push(e.currentRoomData.roomID) : n = e.currentRoomData.roomID;
e.connecting = !0;
re.default.request(te.GameConfig.ServerEventName.Tables, {
rooms: n,
clubID: oe.App.Club.CurrentClubID,
tableID: "" + t
}, function(t) {
ne.default.hideMask();
e.connecting = !1;
e.interval = -1;
if (t.success) {
console.log("currentRoomData", e.currentRoomData);
e.quickStartBtn.active = "object" != typeof e.currentRoomData.roomID;
var n = [];
(n = t.rooms.map(function(e) {
return e.tables.map(function(t) {
if (ie.default.isNullOrEmpty(t)) return {};
var n = JSON.parse(t);
n.roomID = e.roomID;
return n;
});
}).reduce(function(e, t) {
return e.concat(t);
})).sort(function(e, t) {
return ie.default.sortByProps(e, t, {
status: "desc",
players: "asc"
});
});
e.tableData = n;
oe.App.EventManager.dispatchEventWith(te.GameConfig.GameEventNames.ROOM_TYPE_BTN_CHANGE, e.currentRoomData);
e.renderTableUI(e.currentRoomData);
}
}, !0, function() {
e.connecting = !1;
e.interval = 0;
});
});
};
n.ontesttt = function() {
ne.default.playSfx();
re.default.request("game/systemNotice", {
gameType: "HNMJ",
message: "阿萨德哈说剁几好阿说剁几哈看的啥阿说接电话阿黑色的大口袋",
times: 5
}, function() {});
};
n.onClickClose = function() {
ne.default.playSfx();
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
n.onDestroy = function() {
this.removeEvents();
};
n.update = function() {
if (!ie.default.isNullOrEmpty(this.currentRoomData) && "" != this.currentType && !this.connecting && -1 != this.interval && !cc.sys.isBrowser) {
this.interval++;
this.interval % 300 == 0 && this.refreshTableData();
}
};
return t;
}(cc.Component), P = me(D.prototype, "robotBtn", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), M = me(D.prototype, "tableItem", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), x = me(D.prototype, "tableContent", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), O = me(D.prototype, "avatar", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), G = me(D.prototype, "username", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), R = me(D.prototype, "lblScore", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), k = me(D.prototype, "userId", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), L = me(D.prototype, "onlyWaitIcon", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), B = me(D.prototype, "clubName", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), F = me(D.prototype, "clubID", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), U = me(D.prototype, "rewardNode", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), H = me(D.prototype, "quickStartBtn", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), z = me(D.prototype, "gameBtnItem", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), j = me(D.prototype, "roomBtnItem", [ g ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), W = me(D.prototype, "gameContent", [ v ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), q = me(D.prototype, "roomContent", [ C ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Y = me(D.prototype, "noticeBtn", [ b ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), J = me(D.prototype, "proxyBtn", [ y ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), V = me(D.prototype, "childBtn", [ S ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), K = me(D.prototype, "blackListBtn", [ _ ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Z = me(D.prototype, "changeIDBtn", [ T ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Q = me(D.prototype, "noticeNode", [ E ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), X = me(D.prototype, "totalScore", [ A ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), $ = me(D.prototype, "activeBtn", [ I ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ee = me(D.prototype, "lblNotice", [ N ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), D)) || w);
n.default = be;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/TableInfo": "TableInfo",
"../../common/GameUtils": "GameUtils",
"../common/Avatar": "Avatar",
"../common/CompList": "CompList",
"./data/App": "App",
"./data/Dict": "Dict"
} ],
TableRoomBtn: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "af0a1+bemJDvYXULpXwmDFi", "TableRoomBtn");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s = e("../../../GameBase/GameConfig"), c = f(e("../../../Main/Script/Cache")), l = f(e("../../common/GameUtils")), u = f(e("../../../Main/Script/DataBase")), d = f(e("../../../Main/NetWork/Connector")), h = e("./data/App");
f(e("../common/Avatar")), e("./data/Dict");
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
function p(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function m(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function g(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
v(e, t);
}
function v(e, t) {
return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
var C = cc._decorator, b = C.ccclass, y = (i = (0, C.property)(cc.Label), b(a = (r = function(e) {
g(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
p(t = e.call.apply(e, [ this ].concat(i)) || this, "desc", o, m(t));
t.roomData = null;
return t;
}
var n = t.prototype;
n.initData = function(e) {
this.desc.string = e.name;
this.roomData = e;
this.node.on(cc.Node.EventType.TOUCH_END, this.enterGame, this);
};
n.enterGame = function() {
var e = this;
c.default.playSfx();
if ("XHZD" == this.roomData.gameType) l.default.pop(s.GameConfig.pop.MatchPop, function(t) {
t.getComponent("ModuleMatchPop").startMatch(e.roomData.roomID);
}); else {
var t = {
roomID: this.roomData.roomID,
gameType: this.roomData.gameType,
tableID: "",
clubID: h.App.Club.CurrentClubID
};
d.default.request(s.GameConfig.ServerEventName.JoinClubGame, t, function(e) {
s.GameConfig.IsConnecting = !1;
s.GameConfig.ShowTablePop = !0;
d.default.connect(e, function() {
s.GameConfig.CurrentGameType = e.data.gameType;
u.default.setGameType(u.default.GAME_TYPE[e.data.gameType]);
cc.director.loadScene(u.default.TABLE_TYPE[e.data.gameType]);
});
}, !0, function(e) {
s.GameConfig.IsConnecting = !1;
c.default.showTipsMsg(l.default.isNullOrEmpty(e.message) ? "进入游戏失败" : e.message);
});
}
};
n.robotInit = function(e) {
this.desc.string = e.name;
this.roomData = e;
this.node.on(cc.Node.EventType.TOUCH_END, this.robotEvent, this);
};
n.robotEvent = function() {
c.default.playSfx();
h.App.EventManager.dispatchEventWith(s.GameConfig.GameEventNames.ROBOT_SELECT_ROOM, this.roomData);
};
n.onClickClose = function() {
c.default.playSfx();
this.node.removeFromParent();
this.node.destroy();
};
return t;
}(cc.Component), o = function(e, t, n, i) {
var a = {};
Object.keys(i).forEach(function(e) {
a[e] = i[e];
});
a.enumerable = !!a.enumerable;
a.configurable = !!a.configurable;
("value" in a || a.initializer) && (a.writable = !0);
void 0;
if (void 0 === (a = n.slice().reverse().reduce(function(t, n) {
return n(e, "desc", t) || t;
}, a)).initializer) {
Object.defineProperty(e, "desc", a);
a = null;
}
return a;
}(r.prototype, 0, [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), r)) || a);
n.default = y;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../common/GameUtils": "GameUtils",
"../common/Avatar": "Avatar",
"./data/App": "App",
"./data/Dict": "Dict"
} ],
TableRoomItem: [ function(e, t) {
"use strict";
cc._RF.push(t, "9db9dea7xdC+KAX5Rj0bPQQ", "TableRoomItem");
var n = e("../../../GameBase/GameConfig").GameConfig, i = e("../../../Main/Script/Cache"), a = e("./data/App").App, r = e("../../../Main/Script/utils");
cc.Class({
extends: cc.Component,
properties: {
chooseNode: cc.Node,
unChooseNode: cc.Node,
roomData: null
},
addEvents: function() {
this.node.on(cc.Node.EventType.TOUCH_END, this.onClickBtn, this);
a.EventManager.addEventListener(n.GameEventNames.ROOM_TYPE_BTN_CHANGE, this.changeBtnUI, this);
},
removeEvents: function() {
a.EventManager.removeEventListener(n.GameEventNames.ROOM_TYPE_BTN_CHANGE, this.changeBtnUI, this);
},
initData: function(e) {
this.addEvents();
this.roomData = e;
if ("大厅" == e.name) {
this.chooseNode.getChildByName("name").getComponent(cc.Label).string = e.name;
this.chooseNode.getChildByName("name").y -= 10;
this.chooseNode.getChildByName("base").getComponent(cc.Label).string = "";
this.unChooseNode.getChildByName("name").getComponent(cc.Label).string = e.name;
this.unChooseNode.getChildByName("name").y -= 10;
this.unChooseNode.getChildByName("base").getComponent(cc.Label).string = "";
} else {
this.chooseNode.getChildByName("name").getComponent(cc.Label).string = e.name;
this.chooseNode.getChildByName("base").getComponent(cc.Label).string = "最低: " + r.formatGold(e.lower);
this.unChooseNode.getChildByName("name").getComponent(cc.Label).string = e.name;
this.unChooseNode.getChildByName("base").getComponent(cc.Label).string = "最低: " + r.formatGold(e.lower);
}
},
onClickBtn: function() {
i.playSfx();
a.EventManager.dispatchEventWith(n.GameEventNames.ROOM_TYPE_CHANGE, this.roomData);
},
changeBtnUI: function(e) {
this.chooseNode.active = e.data.name == this.roomData.name;
},
onDestroy: function() {
this.removeEvents();
}
});
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/utils": "utils",
"./data/App": "App"
} ],
TableRoomPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "62c10ONGOxHb5SlVE0JanMD", "TableRoomPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u = (i = e("../../../Main/Script/Cache")) && i.__esModule ? i : {
default: i
};
function d(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function h(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function f(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
p(e, t);
}
function p(e, t) {
return (p = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function m(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var g = cc._decorator, v = g.ccclass, C = g.property, b = (a = C(cc.Node), r = C(cc.Prefab), 
v(o = (s = function(e) {
f(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
d(t = e.call.apply(e, [ this ].concat(i)) || this, "itemContent", c, h(t));
d(t, "itemPre", l, h(t));
return t;
}
var n = t.prototype;
n.refreshUI = function(e) {
var t = this;
this.itemContent.removeAllChildren();
e.msg.forEach(function(e) {
if ("大厅" != e.name) {
var n = cc.instantiate(t.itemPre);
n.getComponent("TableRoomBtn").initData(e);
t.itemContent.addChild(n);
}
});
};
n.onClickClose = function() {
u.default.playSfx();
this.node.removeFromParent();
this.node.destroy();
};
return t;
}(cc.Component), c = m(s.prototype, "itemContent", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = m(s.prototype, "itemPre", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = b;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../Main/Script/Cache": "Cache"
} ],
TestPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "6467cy0+jhLQZbqJRtCDUtU", "TestPop");
n.__esModule = !0;
n.default = void 0;
e("../../GameBase/GameConfig");
var i, a, r, o, s, c, l, u, d, h = (i = e("../base/pop/PopupBase")) && i.__esModule ? i : {
default: i
};
e("./hall/data/App");
function f(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function p(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function m(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
g(e, t);
}
function g(e, t) {
return (g = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function v(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var C = cc._decorator, b = C.ccclass, y = C.property, S = (a = y(cc.EditBox), r = y(cc.EditBox), 
o = y(cc.EditBox), b(s = (c = function(e) {
m(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
f(t = e.call.apply(e, [ this ].concat(i)) || this, "boxPhone", l, p(t));
f(t, "boxPwd", u, p(t));
f(t, "boxCode", d, p(t));
t.codeCoolDown = !0;
return t;
}
var n = t.prototype;
n.start = function() {};
n.onShow = function() {
console.log("onshow---");
};
n.onClickLogin = function() {
console.log("onClickLogin---", this.boxPhone.string);
console.log("onClickLogin---", this.boxPwd.string);
console.log("onClickLogin---", this.boxCode.string);
};
return t;
}(h.default), l = v(c.prototype, "boxPhone", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = v(c.prototype, "boxPwd", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), d = v(c.prototype, "boxCode", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), c)) || s);
n.default = S;
t.exports = n.default;
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../base/pop/PopupBase": "PopupBase",
"./hall/data/App": "App"
} ],
UIDatePicker: [ function(e, t) {
"use strict";
cc._RF.push(t, "6d106l+tDRL5rbAU45iCnts", "UIDatePicker");
cc.Class({
extends: cc.Component,
properties: {
lbYearMonth: cc.Label,
ndDays: cc.Node,
pfbDay: cc.Prefab
},
onLoad: function() {
this.initData();
this.updateDate();
},
initData: function() {
this.date = this.date ? this.date : new Date();
this.year = this.date.getFullYear();
this.month = this.date.getMonth();
this.day = this.date.getDate();
this.pfgListDay = [];
for (var e = 0; e < 31; ++e) {
var t = cc.instantiate(this.pfbDay);
t.parent = this.ndDays;
this.pfgListDay.push(t);
}
},
getMonthsDay: function(e, t) {
e = e, t = t;
if (0 == arguments.length) {
e = new Date().getFullYear();
t = data.getMonth();
}
if (1 == arguments.length) {
new Date();
t = data.getMonth();
}
var n = [ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];
(e % 4 == 0 && e % 100 != 0 || e % 400 == 0) && (n[1] = 29);
return n[t];
},
getMonthFirst: function(e, t) {
e = e, t = t;
if (0 == arguments.length) {
e = new Date().getFullYear();
t = data.getMonth();
}
if (1 == arguments.length) {
new Date();
t = data.getMonth();
}
var n = new Date(e, t, 1);
return n.getDay();
},
setDate: function(e, t, n) {
this.date = new Date(e, t, n);
this.year = this.date.getFullYear();
this.month = this.date.getMonth();
this.day = this.date.getDate();
this.updateDate();
},
updateDate: function() {
var e = this;
this.lbYearMonth.string = cc.js.formatStr("%s年%s月", this.year, this.month + 1);
for (var t = this.getMonthsDay(this.year, this.month), n = this.getMonthFirst(this.year, this.month), i = 0; i < this.pfgListDay.length; ++i) {
var a = this.pfgListDay[i];
if (i < t) {
a.active = !0;
var r = n + i, o = Math.floor(r / 7), s = r % 7, c = .5 * -(this.ndDays.width - a.width) + s * a.width, l = .5 * (this.ndDays.height - a.height) - o * a.height;
a.setPosition(c, l);
a.getComponent("UIItemDay").setDay(i, i + 1, this.day === i + 1, function(t, n) {
e.day = n;
e.updateDate();
});
} else a.active = !1;
}
},
onClickLeft2: function() {
this.year -= 1;
this.date.setFullYear(this.year);
this.date.setMonth(this.month);
this.updateDate();
},
onClickRight2: function() {
this.year += 1;
this.date.setFullYear(this.year);
this.date.setMonth(this.month);
this.updateDate();
},
onClickLeft: function() {
if (this.month > 0) this.month -= 1; else {
this.month = 11;
this.year -= 1;
}
this.date.setFullYear(this.year);
this.date.setMonth(this.month);
this.updateDate();
},
onClickRight: function() {
if (this.month < 11) this.month += 1; else {
this.month = 0;
this.year += 1;
}
this.date.setFullYear(this.year);
this.date.setMonth(this.month);
this.updateDate();
},
setPickDateCallback: function(e) {
this.cb = e;
},
onClickClose: function() {
this.cb && this.cb(this.year, this.month, this.day);
this.node.parent = null;
}
});
cc._RF.pop();
}, {} ],
UIItemDay: [ function(e, t) {
"use strict";
cc._RF.push(t, "252a5nAq6pLOITqXWwWN/H/", "UIItemDay");
cc.Class({
extends: cc.Component,
properties: {
lbDay: cc.Label,
spSel: cc.Sprite
},
setDay: function(e, t, n, i) {
this.index = e;
this.day = t;
this.cb = i;
this.lbDay.string = t;
this.spSel.enabled = n;
},
onClickItem: function() {
this.cb && this.cb(this.index, this.day);
}
});
cc._RF.pop();
}, {} ],
UserBaseItem: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "4c135O+GLJPPKoBL8Kc0PmT", "UserBaseItem");
n.__esModule = !0;
n.default = void 0;
var i, a, r = (i = e("../../../Main/Script/Cache")) && i.__esModule ? i : {
default: i
}, o = e("../../../Main/Script/native-extend");
function s(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
c(e, t);
}
function c(e, t) {
return (c = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
var l = cc._decorator, u = l.ccclass, d = (l.property, u(a = function(e) {
s(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
(t = e.call.apply(e, [ this ].concat(i)) || this).code = "";
return t;
}
var n = t.prototype;
n.initData = function(e) {
this.code = e;
this.node.on(cc.Node.EventType.TOUCH_END, this.copyCode, this);
};
n.copyCode = function() {
o.Social.setCopy(this.code);
r.default.alertTip("回放码已复制");
};
return t;
}(cc.Component)) || a);
n.default = d;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/native-extend": "native-extend"
} ],
UserInfoPop: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "39879Tgc2RKv6GZxyN6DuxE", "UserInfoPop");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M, x, O, G, R, k, L, B, F, U, H, z, j, W, q, Y, J, V, K, Z, Q, X, $, ee, te, ne, ie, ae, re, oe, se, ce, le, ue, de, he, fe, pe, me, ge, ve, Ce, be, ye, Se, _e, Te, Ee, Ae, Ie, Ne, we, De, Pe, Me, xe, Oe, Ge, Re, ke, Le, Be, Fe, Ue, He, ze, je, We, qe, Ye, Je = e("../../../GameBase/GameConfig"), Ve = et(e("../../../Main/NetWork/Connector")), Ke = et(e("../../../Main/Script/Cache")), Ze = e("../../ui/hall/data/App"), Qe = et(e("../../common/GameUtils")), Xe = et(e("../common/Avatar")), $e = et(e("../../../Main/Script/DataBase"));
e("../../../Main/Script/native-extend");
function et(e) {
return e && e.__esModule ? e : {
default: e
};
}
function tt(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function nt(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function it(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
at(e, t);
}
function at(e, t) {
return (at = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function rt(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var ot = cc._decorator, st = ot.ccclass, ct = ot.property, lt = (i = ct(cc.Label), 
a = ct(cc.Node), r = ct(cc.Node), o = ct(cc.Prefab), s = ct(cc.Prefab), c = ct(cc.Node), 
l = ct(cc.Node), u = ct(cc.Node), d = ct(cc.Node), h = ct(Xe.default), f = ct(cc.Node), 
p = ct(cc.Label), m = ct(cc.Label), g = ct(cc.Label), v = ct(cc.Label), C = ct(cc.Label), 
b = ct(cc.Label), y = ct(cc.Label), S = ct(cc.Sprite), _ = ct([ cc.SpriteFrame ]), 
T = ct(cc.Node), E = ct(cc.Node), A = ct(cc.Node), I = ct(cc.Label), N = ct(cc.Label), 
w = ct(cc.Label), D = ct(cc.Label), P = ct(cc.Label), M = ct(cc.Node), x = ct(cc.Node), 
O = ct(cc.Node), G = ct(cc.Node), R = ct(cc.Node), k = ct(cc.Toggle), L = ct(cc.Node), 
B = ct(cc.Node), F = ct(cc.Node), U = ct(cc.Node), H = ct(cc.Node), z = ct(cc.Prefab), 
j = ct(cc.Label), W = ct(cc.Label), q = ct(cc.Label), Y = ct(cc.Label), J = ct(cc.Label), 
V = ct(cc.Label), K = ct(cc.Label), Z = ct(cc.Label), st(Q = (X = function(e) {
it(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
tt(t = e.call.apply(e, [ this ].concat(i)) || this, "lblPage", $, nt(t));
tt(t, "pageContainer", ee, nt(t));
tt(t, "itemContent", te, nt(t));
tt(t, "baseInfoItem", ne, nt(t));
tt(t, "performInfoItem", ie, nt(t));
tt(t, "tipsContent", ae, nt(t));
tt(t, "scoreTips", re, nt(t));
tt(t, "baseTips", oe, nt(t));
tt(t, "performTips", se, nt(t));
tt(t, "avatar", ce, nt(t));
tt(t, "statusContent", le, nt(t));
tt(t, "lblStatus", ue, nt(t));
tt(t, "lblName", de, nt(t));
tt(t, "lblId", he, nt(t));
tt(t, "lblScore", fe, nt(t));
tt(t, "lblLevel", pe, nt(t));
tt(t, "lblCreated", me, nt(t));
tt(t, "lblUpdate", ge, nt(t));
tt(t, "roleSpr", ve, nt(t));
tt(t, "roleIconArr", Ce, nt(t));
tt(t, "dataContent", be, nt(t));
tt(t, "userDataContent", ye, nt(t));
tt(t, "proxyDataContent", Se, nt(t));
tt(t, "lblDataScore", _e, nt(t));
tt(t, "lblDataBank", Te, nt(t));
tt(t, "lblDataReward", Ee, nt(t));
tt(t, "lblDataLevel", Ae, nt(t));
tt(t, "lblDataLimit", Ie, nt(t));
tt(t, "userLimitTog", Ne, nt(t));
tt(t, "userFrozenTog", we, nt(t));
tt(t, "proxyLimitTog", De, nt(t));
tt(t, "proxyFrozenTog", Pe, nt(t));
tt(t, "otherContent", Me, nt(t));
tt(t, "wholeTog", xe, nt(t));
tt(t, "dataBtn", Oe, nt(t));
tt(t, "otherBtn", Ge, nt(t));
tt(t, "managerTog", Re, nt(t));
tt(t, "chooseManagerTog", ke, nt(t));
tt(t, "userInfoContent", Le, nt(t));
tt(t, "userInfoItem", Be, nt(t));
tt(t, "lblSumScore", Fe, nt(t));
tt(t, "lblPreson", Ue, nt(t));
tt(t, "lblCurExp", He, nt(t));
tt(t, "lblLastExp", ze, nt(t));
tt(t, "lblCurEarn", je, nt(t));
tt(t, "lblLastEarn", We, nt(t));
tt(t, "lblCurTurn", qe, nt(t));
tt(t, "lblLastTurn", Ye, nt(t));
t.page = 1;
t.totalPage = 0;
t.renderData = null;
t.currentList = 0;
t.userID = null;
t.userRole = "user";
t.currentUserInfo = null;
t.currentLog = "";
t.lastLoginTime = 0;
return t;
}
var n = t.prototype;
n.onLoad = function() {
this.addEvents();
};
n.addEvents = function() {};
n.removeEvents = function() {};
n.initUserID = function(e) {
this.userID = e;
this.renderData = {
page: [],
rows: {}
};
this.dataBtn.active = "user" != Ze.App.Club.CurrentClubRole;
this.otherBtn.active = "user" != Ze.App.Club.CurrentClubRole;
this.renderUI();
};
n.renderUI = function() {
var e = this;
this.itemContent.removeAllChildren();
Ve.default.request(Je.GameConfig.ServerEventName.UserInfo, {
clubID: Ze.App.Club.CurrentClubID,
userID: this.userID
}, function(t) {
if (!Qe.default.isNullOrEmpty(t.user)) {
e.avatar.avatarUrl = t.user.user.head;
e.lblName.string = t.user.user.name;
e.lblId.string = t.user.userID;
e.lblScore.string = Qe.default.formatGold(t.user.score) || 0;
e.lblLevel.string = t.user.level || 0;
e.lblCreated.string = new Date(t.user.createdAt).format("yyyy-MM-dd hh:mm:ss");
e.lblUpdate.string = new Date(t.user.updatedAt).format("yyyy-MM-dd hh:mm:ss");
e.lastLoginTime = new Date(t.user.updatedAt).getTime();
e.lblDataBank.string = Qe.default.formatGold(t.user.bank) || 0;
e.lblDataReward.string = Qe.default.formatGold(t.user.reward) || 0;
e.lblDataLevel.string = t.user.level || 0;
e.lblDataScore.string = Qe.default.formatGold(t.user.score) || 0;
e.lblDataLimit.string = Qe.default.formatGold(t.user.limit) || 0;
e.currentUserInfo = t.user;
e.managerTog.active = "owner" == Ze.App.Club.CurrentClubRole && "user" == t.user.role;
if ("user" == t.user.role) e.roleSpr.node.active = !1; else {
e.roleSpr.node.active = !0;
e.roleSpr.spriteFrame = "proxy" == t.user.role ? e.roleIconArr[1] : e.roleIconArr[0];
}
switch (t.user.role) {
case "user":
e.userDataContent.active = !0;
e.proxyDataContent.active = !1;
break;

case "proxy":
e.userDataContent.active = !1;
e.proxyDataContent.active = !0;
break;

case "manager":
case "owner":
e.userDataContent.active = !1;
e.proxyDataContent.active = !0;
e.chooseManagerTog.active = !0;
}
switch (t.user.status) {
case "normal":
e.userLimitTog.active = !1;
e.userFrozenTog.active = !1;
e.proxyLimitTog.active = !1;
e.proxyFrozenTog.active = !1;
e.chooseManagerTog.active = !1;
e.statusContent.active = !1;
e.lblStatus.string = "";
break;

case "limit":
e.userLimitTog.active = !0;
e.userFrozenTog.active = !1;
e.proxyLimitTog.active = !0;
e.proxyFrozenTog.active = !1;
e.chooseManagerTog.active = !1;
e.statusContent.active = !0;
e.lblStatus.string = "限制";
break;

case "frozen":
e.userLimitTog.active = !1;
e.userFrozenTog.active = !0;
e.proxyLimitTog.active = !1;
e.proxyFrozenTog.active = !0;
e.chooseManagerTog.active = !1;
e.statusContent.active = !0;
e.lblStatus.string = "冻结";
break;

case "blacklist":
e.userLimitTog.active = !1;
e.userFrozenTog.active = !1;
e.proxyLimitTog.active = !1;
e.proxyFrozenTog.active = !1;
e.chooseManagerTog.active = !1;
e.statusContent.active = !0;
e.lblStatus.string = "拉黑";
}
e.renderBaseInfo(1);
}
});
};
n.onClickBtn = function(e, t) {
this.currentList = parseInt(t);
this.renderData = {
page: [],
rows: {}
};
switch (this.currentList) {
case 1:
this.renderBaseInfo(1);
break;

case 2:
this.renderScoreLog(1, 1);
break;

case 3:
this.renderPerformLog(1);
break;

case 4:
this.renderScoreLog(1, 0);
}
};
n.renderBaseInfo = function(e) {
var t = this;
this.changeContent("item");
this.baseTips.active = !0;
this.scoreTips.active = !1;
this.performTips.active = !1;
this.itemContent.removeAllChildren();
this.currentList = 1;
if (-1 == this.renderData.page.indexOf(e)) Ve.default.request(Je.GameConfig.ServerEventName.UserBaseInfo, {
clubID: Ze.App.Club.CurrentClubID,
userID: this.userID,
page: e,
pageSize: 8
}, function(n) {
if (n.data && !Qe.default.isNullOrEmpty(n.data.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.data.rows;
t.pageContainer.active = !0;
t.page = e;
var i = "number" == typeof n.data.count ? n.data.count : n.data.count.length;
t.totalPage = Math.ceil(i / 8);
t.lblPage.string = e + "/" + Math.ceil(i / 8);
n.data.rows.forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("turn").getComponent(cc.Label).string = e.room;
n.getChildByName("win").getComponent(cc.Label).string = "" + Qe.default.formatGold(e.score);
t.itemContent.addChild(n);
});
}
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.baseInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("turn").getComponent(cc.Label).string = e.room;
n.getChildByName("win").getComponent(cc.Label).string = e.score;
t.itemContent.addChild(n);
});
}
};
n.renderScoreLog = function(e, t) {
var n = this;
this.changeContent("item");
this.baseTips.active = !1;
this.scoreTips.active = !0;
this.performTips.active = !1;
this.itemContent.removeAllChildren();
this.currentList = 2;
this.currentLog = t;
Ve.default.request(Je.GameConfig.ServerEventName.UserScoreLog, {
clubID: Ze.App.Club.CurrentClubID,
userID: this.userID,
page: e,
pageSize: 8,
type: this.currentLog
}, function(t) {
if (t.log && !Qe.default.isNullOrEmpty(t.log.rows)) {
n.renderData.page.push(e);
n.renderData.rows["" + e] = t.log.rows;
n.pageContainer.active = !0;
n.page = e;
var i = "number" == typeof t.log.count ? t.log.count : t.log.count.length;
n.totalPage = Math.ceil(i / 8);
n.lblPage.string = e + "/" + Math.ceil(i / 8);
t.log.rows.forEach(function(e) {
var t = cc.instantiate(n.baseInfoItem);
t.getChildByName("time").getComponent(cc.Label).string = new Date(e.createdAt).format("yyyy-MM-dd hh:mm:ss");
var i = Qe.default.isNullOrEmpty(e.recordCode) ? e.event : e.event + "" + e.recordCode;
!Qe.default.isNullOrEmpty(e.fee) && e.fee > 0 && (i += " 抽水" + Qe.default.formatGold(e.fee));
!Qe.default.isNullOrEmpty(e.shuffle) && e.shuffle > 0 && (i += " 洗牌" + Qe.default.formatGold(e.shuffle));
t.getChildByName("turn").getComponent(cc.Label).string = i;
t.getChildByName("win").getComponent(cc.Label).string = Qe.default.formatGold(e.remainScore) + (0 == e.remainBank ? "" : "(" + Qe.default.formatGold(e.remainBank) + ")");
Qe.default.isNullOrEmpty(e.recordCode) || t.getComponent("UserBaseItem").initData(e.recordCode);
n.itemContent.addChild(t);
});
}
});
};
n.renderPerformLog = function(e) {
var t = this;
this.changeContent("item");
this.baseTips.active = !1;
this.scoreTips.active = !1;
this.performTips.active = !0;
this.itemContent.removeAllChildren();
this.currentList = 3;
if (-1 == this.renderData.page.indexOf(e)) Ve.default.request(Je.GameConfig.ServerEventName.UserPerformLog, {
clubID: Ze.App.Club.CurrentClubID,
userID: this.userID,
page: e,
pageSize: 8
}, function(n) {
if (n.data && !Qe.default.isNullOrEmpty(n.data.rows)) {
t.renderData.page.push(e);
t.renderData.rows["" + e] = n.data.rows;
t.pageContainer.active = !0;
t.page = e;
var i = "number" == typeof n.data.count ? n.data.count : n.data.count.length;
t.totalPage = Math.ceil(i / 8);
t.lblPage.string = e + "/" + Math.ceil(i / 8);
n.data.rows.forEach(function(e) {
var n = cc.instantiate(t.performInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("turn").getComponent(cc.Label).string = e.turn;
n.getChildByName("reward").getComponent(cc.Label).string = Qe.default.formatGold(e.reward);
n.getChildByName("active").getComponent(cc.Label).string = Qe.default.formatGold(e.activity);
n.getChildByName("total").getComponent(cc.Label).string = Qe.default.formatGold(e.sum);
t.itemContent.addChild(n);
});
}
}); else {
this.page = e;
this.lblPage.string = this.page + "/" + this.totalPage;
this.renderData.rows["" + e].forEach(function(e) {
var n = cc.instantiate(t.performInfoItem);
n.getChildByName("time").getComponent(cc.Label).string = e.strDate;
n.getChildByName("turn").getComponent(cc.Label).string = e.turn;
n.getChildByName("reward").getComponent(cc.Label).string = Qe.default.formatGold(e.reward);
n.getChildByName("active").getComponent(cc.Label).string = Qe.default.formatGold(e.activity);
n.getChildByName("total").getComponent(cc.Label).string = Qe.default.formatGold(e.sum);
t.itemContent.addChild(n);
});
}
};
n.addPage = function() {
Ke.default.playSfx();
if (this.page >= this.totalPage) Ke.default.alertTip("已经是最后一页"); else {
var e = this.page + 1;
switch (this.currentList) {
case 1:
this.renderBaseInfo(e);
break;

case 2:
this.renderScoreLog(e, this.currentLog);
break;

case 3:
this.renderPerformLog(e);
}
}
};
n.reducePage = function() {
Ke.default.playSfx();
if (1 != this.page) {
var e = this.page - 1;
switch (this.currentList) {
case 1:
this.renderBaseInfo(e);
break;

case 2:
this.renderScoreLog(e, this.currentLog);
break;

case 3:
this.renderPerformLog(e);
}
} else Ke.default.alertTip("已经是第一页");
};
n.showDataContent = function() {
Ke.default.playSfx();
this.changeContent("data");
};
n.showOtherContent = function() {
Ke.default.playSfx();
this.changeContent("other");
this.renderOtherContent();
};
n.renderOtherContent = function() {
var e = this;
this.userInfoContent.removeAllChildren();
$e.default.player.isSuperUser || (this.currentUserInfo.cluster = this.currentUserInfo.cluster.slice(0, 2));
this.currentUserInfo.cluster.forEach(function(t) {
var n = cc.instantiate(e.userInfoItem);
n.getComponent("Avatar").avatarUrl = t.user.head;
n.getChildByName("name").getComponent(cc.Label).string = Qe.default.getStringByLength(t.user.name, 6);
n.getChildByName("id").getComponent(cc.Label).string = "" + t.userID;
e.userInfoContent.addChild(n);
});
Ve.default.request(Je.GameConfig.ServerEventName.GroupInfo, {
clubID: Ze.App.Club.CurrentClubID,
userID: this.userID
}, function(t) {
e.lblSumScore.string = "" + (Qe.default.formatGold(t.sumScore) || 0);
e.lblPreson.string = "" + Math.max(t.peoples || 0, 1);
e.lblCurExp.string = "" + (Qe.default.formatGold(t.currentExpenses) || 0);
e.lblLastExp.string = "" + (Qe.default.formatGold(t.lastExpenses) || 0);
e.lblCurEarn.string = "" + (Qe.default.formatGold(t.currentIncoming) || 0);
e.lblLastEarn.string = "" + (Qe.default.formatGold(t.lastIncoming) || 0);
e.lblCurTurn.string = "" + (t.currentTurn || 0);
e.lblLastTurn.string = "" + (t.lastTurn || 0);
});
};
n.changeContent = function(e) {
switch (e) {
case "data":
this.tipsContent.active = !1;
this.itemContent.active = !1;
this.pageContainer.active = !1;
this.dataContent.active = !0;
this.otherContent.active = !1;
break;

case "other":
this.pageContainer.active = !1;
this.tipsContent.active = !1;
this.itemContent.active = !1;
this.dataContent.active = !1;
this.otherContent.active = !0;
break;

case "item":
this.pageContainer.active = !1;
this.tipsContent.active = !0;
this.itemContent.active = !0;
this.dataContent.active = !1;
this.otherContent.active = !1;
}
};
n.onUserLimit = function() {
Ke.default.playSfx();
this.updateStatus(this.userLimitTog.active ? "normal" : "limit", this.wholeTog.isChecked, this.userLimitTog);
};
n.onUserFrozen = function() {
Ke.default.playSfx();
this.updateStatus(this.userFrozenTog.active ? "normal" : "frozen", this.wholeTog.isChecked, this.userFrozenTog);
};
n.onProxyLimit = function() {
Ke.default.playSfx();
this.updateStatus(this.proxyLimitTog.active ? "normal" : "limit", this.wholeTog.isChecked, this.proxyLimitTog);
};
n.onProxyFrozen = function() {
Ke.default.playSfx();
this.updateStatus(this.proxyFrozenTog.active ? "normal" : "frozen", this.wholeTog.isChecked, this.proxyFrozenTog);
};
n.onClickOthertatus = function(e, t) {
Ke.default.playSfx();
this.updateStatus(t, !0);
};
n.updateStatus = function(e, t, n) {
var i = this;
void 0 === n && (n = null);
Ve.default.request(Je.GameConfig.ServerEventName.UpdateStatus, {
clubID: Ze.App.Club.CurrentClubID,
userID: this.userID,
whole: t,
status: e
}, function() {
Ke.default.alertTip("操作成功");
switch (e) {
case "normal":
i.statusContent.active = !1;
i.lblStatus.string = "";
break;

case "limit":
i.statusContent.active = !0;
i.lblStatus.string = "限制";
break;

case "frozen":
i.statusContent.active = !0;
i.lblStatus.string = "冻结";
break;

case "blacklist":
i.statusContent.active = !0;
i.lblStatus.string = "拉黑";
}
n && (n.active = !n.active);
});
};
n.onChangeLevel = function() {
var e = this;
Ke.default.playSfx();
Ke.default.showNumer("修改等级", Je.GameConfig.NumberType.INT, function(t) {
e.changeLevel(t);
});
};
n.changeLevel = function(e) {
var t = this;
Ve.default.request(Je.GameConfig.ServerEventName.UpdateLevel, {
level: e,
userID: this.userID,
clubID: Ze.App.Club.CurrentClubID,
whole: !1
}, function() {
Ke.default.alertTip("操作成功");
t.lblLevel.string = e || 0;
t.lblDataLevel.string = e || 0;
});
};
n.onAddScore = function() {
var e = this;
Ke.default.playSfx();
Ke.default.showNumer("增加体力", Je.GameConfig.NumberType.FLOAT, function(t) {
e.changeScore(t);
});
};
n.onReduceScore = function() {
var e = this;
Ke.default.playSfx();
Ke.default.showNumer("减少体力", Je.GameConfig.NumberType.FLOAT, function(t) {
e.changeScore(parseFloat("-" + t));
});
};
n.changeScore = function(e) {
var t = this;
Ve.default.request(Je.GameConfig.ServerEventName.UpdateScore, {
score: Math.floor(100 * e),
userID: this.userID,
clubID: Ze.App.Club.CurrentClubID
}, function(n) {
Ke.default.alertTip("操作成功");
t.lblScore.string = "" + Qe.default.formatGold(100 * parseFloat(t.lblScore.string) + 100 * e);
t.lblDataScore.string = "" + Qe.default.formatGold(100 * parseFloat(t.lblDataScore.string) + 100 * e);
Ze.App.Club.ClubScore = n.score;
});
};
n.onClickBank = function() {
var e = this;
Ke.default.playSfx();
Ve.default.request(Je.GameConfig.ServerEventName.UpdateClubBank, {
score: Math.floor(100 * parseFloat(this.lblDataBank.string)),
userID: this.userID,
clubID: Ze.App.Club.CurrentClubID
}, function(t) {
Ke.default.alertTip("提取成功");
e.lblScore.string = "" + Qe.default.formatGold(parseFloat(e.lblScore.string) + parseFloat(e.lblDataBank.string));
e.lblDataBank.string = 0;
e.lblDataScore.string = "" + Qe.default.formatGold(parseFloat(e.lblDataScore.string) + parseFloat(e.lblDataBank.string));
if (e.userID == $e.default.player.id) {
Ze.App.Club.ClubBank = t.bank;
Ze.App.Club.ClubScore = t.score;
}
});
};
n.onClickReward = function() {
var e = this;
Ke.default.playSfx();
Ve.default.request(Je.GameConfig.ServerEventName.DrawReward, {
clubID: Ze.App.Club.CurrentClubID,
userID: this.userID,
reward: Math.floor(100 * parseFloat(this.lblDataReward.string))
}, function(t) {
Ke.default.alertTip("提取成功");
e.lblDataReward.string = Qe.default.formatGold(t.reward) || 0;
e.lblDataScore.string = Qe.default.formatGold(t.score) || 0;
e.lblScore.string = Qe.default.formatGold(t.score) || 0;
e.userID == $e.default.player.id && (Ze.App.Club.ClubScore = t.score);
});
};
n.onClickManager = function() {
var e = this;
Ke.default.playSfx();
Ve.default.request(Je.GameConfig.ServerEventName.Promote, {
promote: !this.chooseManagerTog.active,
userID: this.userID,
clubID: Ze.App.Club.CurrentClubID
}, function() {
Ke.default.alertTip("操作成功");
e.chooseManagerTog.active = !e.chooseManagerTog.active;
});
};
n.onExitClub = function() {
var e = this;
Ke.default.playSfx();
var t = "是否将他踢出公会?";
new Date().getTime() - this.lastLoginTime < 2592e5 && (t = "该玩家三天内进行过游戏,是否将他踢出公会?");
Ke.default.showConfirm(t, function() {
Ve.default.request(Je.GameConfig.ServerEventName.QuitClub, {
userID: e.userID,
clubID: Ze.App.Club.CurrentClubID
}, function() {
Ke.default.alertTip("踢出成功");
if (e.node) {
e.node.removeFromParent();
e.node.destroy();
}
}, !0, function(e) {
Ke.default.alertTip(e.message || "踢出失败");
});
});
};
n.changeLimitScore = function() {
var e = this;
Ke.default.playSfx();
Ke.default.showNumer("请输入信用额度", Je.GameConfig.NumberType.FLOAT, function(t) {
Ve.default.request(Je.GameConfig.ServerEventName.UpdateLimit, {
userID: e.userID,
clubID: Ze.App.Club.CurrentClubID,
limit: parseInt(100 * t)
}, function(t) {
Ke.default.alertTip("修改成功");
e.lblDataLimit.string = "" + Qe.default.formatGold(t.limit);
}, !0, function(e) {
Ke.default.alertTip(e.message || "修改失败");
});
});
};
n.handldLiftLimit = function() {
Ve.default.request(Je.GameConfig.ServerEventName.LiftLimit, {
userID: this.userID,
clubID: Ze.App.Club.CurrentClubID
}, function() {
Ke.default.alertTip("解除限制成功");
}, !0, function(e) {
Ke.default.alertTip(e.message || "解除失败");
});
};
n.onClickClose = function() {
Ke.default.playSfx();
this.removeEvents();
this.node.destroy();
};
return t;
}(cc.Component), $ = rt(X.prototype, "lblPage", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ee = rt(X.prototype, "pageContainer", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), te = rt(X.prototype, "itemContent", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ne = rt(X.prototype, "baseInfoItem", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ie = rt(X.prototype, "performInfoItem", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ae = rt(X.prototype, "tipsContent", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), re = rt(X.prototype, "scoreTips", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), oe = rt(X.prototype, "baseTips", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), se = rt(X.prototype, "performTips", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ce = rt(X.prototype, "avatar", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), le = rt(X.prototype, "statusContent", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ue = rt(X.prototype, "lblStatus", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), de = rt(X.prototype, "lblName", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), he = rt(X.prototype, "lblId", [ g ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), fe = rt(X.prototype, "lblScore", [ v ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), pe = rt(X.prototype, "lblLevel", [ C ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), me = rt(X.prototype, "lblCreated", [ b ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ge = rt(X.prototype, "lblUpdate", [ y ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ve = rt(X.prototype, "roleSpr", [ S ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ce = rt(X.prototype, "roleIconArr", [ _ ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), be = rt(X.prototype, "dataContent", [ T ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ye = rt(X.prototype, "userDataContent", [ E ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Se = rt(X.prototype, "proxyDataContent", [ A ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), _e = rt(X.prototype, "lblDataScore", [ I ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Te = rt(X.prototype, "lblDataBank", [ N ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ee = rt(X.prototype, "lblDataReward", [ w ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ae = rt(X.prototype, "lblDataLevel", [ D ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ie = rt(X.prototype, "lblDataLimit", [ P ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ne = rt(X.prototype, "userLimitTog", [ M ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), we = rt(X.prototype, "userFrozenTog", [ x ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), De = rt(X.prototype, "proxyLimitTog", [ O ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Pe = rt(X.prototype, "proxyFrozenTog", [ G ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Me = rt(X.prototype, "otherContent", [ R ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), xe = rt(X.prototype, "wholeTog", [ k ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Oe = rt(X.prototype, "dataBtn", [ L ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ge = rt(X.prototype, "otherBtn", [ B ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Re = rt(X.prototype, "managerTog", [ F ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ke = rt(X.prototype, "chooseManagerTog", [ U ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Le = rt(X.prototype, "userInfoContent", [ H ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Be = rt(X.prototype, "userInfoItem", [ z ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Fe = rt(X.prototype, "lblSumScore", [ j ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ue = rt(X.prototype, "lblPreson", [ W ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), He = rt(X.prototype, "lblCurExp", [ q ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ze = rt(X.prototype, "lblLastExp", [ Y ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), je = rt(X.prototype, "lblCurEarn", [ J ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), We = rt(X.prototype, "lblLastEarn", [ V ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), qe = rt(X.prototype, "lblCurTurn", [ K ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Ye = rt(X.prototype, "lblLastTurn", [ Z ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), X)) || Q);
n.default = lt;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/native-extend": "native-extend",
"../../common/GameUtils": "GameUtils",
"../../ui/hall/data/App": "App",
"../common/Avatar": "Avatar"
} ],
api: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "ebb56RrAbVJi66UePWpZGh/", "api");
n.MTableMgr = e("./table_mgr.js");
n.MHulib = e("./hulib.js");
n.Init = function() {
this.MTableMgr.Init();
this.MTableMgr.LoadTable();
};
n.getInfo = function(e) {
return this.MHulib.get_hu_info(e, 34, 33, 34);
};
cc._RF.pop();
}, {
"./hulib.js": "hulib",
"./table_mgr.js": "table_mgr"
} ],
"audio-ctrl": [ function(e, t) {
"use strict";
cc._RF.push(t, "0fa19jGtj1L0IxgCysjEKXW", "audio-ctrl");
var n = e("DataBase"), i = e("../../GameBase/GameConfig").GameConfig, a = e("./utils"), r = cc.Class({
name: "AudioCtrl",
properties: {
bgmVolume: 1,
sfxVolume: 1,
bgmAudioID: -1
},
statics: {
_instance: null,
getInstance: function() {
this._instance || (this._instance = new r());
return this._instance;
}
},
init: function(e, t) {
r._instance = this;
!1 === e && (this.bgmVolume = 0);
!1 === t && (this.sfxVolume = 0);
cc.game.on(cc.game.EVENT_HIDE, function() {
cc.audioEngine.pauseAll();
});
cc.game.on(cc.game.EVENT_SHOW, function() {
cc.audioEngine.resumeAll();
});
},
getState: function() {
return {
bgm: this.bgmVolume > 0,
sfx: this.sfxVolume > 0
};
},
isBGMPlaying: function() {
return this.bgmVolume > 0;
},
playBGM: function(e) {
this.bgmVolume = a.getValue(i.StorageKey.MusicVolume, 1);
this.bgmAudioID >= 0 && cc.audioEngine.stop(this.bgmAudioID);
this.bgmAudioID = cc.audioEngine.play(e, !0, this.bgmVolume);
cc.audioEngine.setVolume(this.bgmAudioID, this.bgmVolume);
},
playSFX: function(e) {
this.sfxVolume = a.getValue(i.StorageKey.SoundVolume, 1);
if (this.sfxVolume > 0) {
var t = cc.audioEngine.play(e, !1, this.sfxVolume);
return cc.audioEngine.getDuration(t);
}
return 0;
},
setSFXVolume: function(e) {
this.sfxVolume != e && (this.sfxVolume = e);
},
setBGMVolume: function(e, t) {
this.bgmAudioID >= 0 && (e > 0 ? cc.audioEngine.resume(this.bgmAudioID) : cc.audioEngine.pause(this.bgmAudioID));
if (this.bgmVolume != e || t) {
this.bgmVolume = e;
cc.audioEngine.setVolume(this.bgmAudioID, e);
}
},
pauseAll: function() {
cc.audioEngine.pauseAll();
},
resumeAll: function() {
cc.audioEngine.resumeAll();
this.setBGMVolume(n.getFloat(n.STORAGE_KEY.SET_MUSIC, 1));
this.setSFXVolume(n.getFloat(n.STORAGE_KEY.SET_SOUND, 1));
},
stopAll: function() {
cc.audioEngine.stopAll();
}
});
t.exports = r;
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"./utils": "utils",
DataBase: "DataBase"
} ],
calc16: [ function(e, t) {
"use strict";
cc._RF.push(t, "45cacPdJQZO5ZyNniPsol04", "calc16");
var n = {}, i = function() {
function e() {}
e.sum = function(e) {
return e.reduce(function(e, t) {
return e + t;
});
};
e.find = function(t, i, a, r) {
if (a >= 3) return r;
for (var o = t[a], s = 0; s <= i; s++) {
o[0] = s;
var c = o.join("");
if (n["" + c]) {
var l = e.sum(o) % 3 == 2;
if (r && l) continue;
if (e.find(t, i - s, a + 1, r || l)) return !0;
}
}
return !1;
};
e.checkHu = function(t, n) {
void 0 === n && (n = 0);
if (14 == t.length) {
var i = 0, a = 0, r = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
t.forEach(function(e) {
return r[e]++;
});
r.forEach(function(e, t) {
0 == t ? i += e : e % 2 != 0 && a++;
});
if (0 == a || a == i) return !0;
}
for (var o = [], s = 0, c = 0; c < 3; c++) o.push(Array(10).fill(0));
if (!t.some(function(e) {
return 3 == Math.floor(e / 10) || e < 0;
})) {
t.forEach(function(e) {
e != n ? o[Math.floor(e / 10)][e % 10] += 1 : s += 1;
});
return e.find(o, s, 0, !1);
}
};
e.array2vect = function(e) {
var t = Array(30).fill(0);
e.forEach(function(e) {
e > 0 && (t[e] += 1);
});
return t;
};
return e;
}();
t.exports = {
initTable: function() {
return new Promise(function(e, t) {
cc.resources.load("hnmj/tbl_16", function(i, a) {
if (i) {
cc.error("加载胡牌表失败:", i);
t(i);
} else {
Object.assign(n, a.json);
e();
}
});
});
},
Calc: i,
CONSTANT: {
EVENT: {
INIT: "INIT",
PASS: "PASS",
PLAY: "PLAY",
CHOW: "CHOW",
PONG: "PONG",
GANG: "GANG",
BU: "BU",
ZHI: "ZHI",
FLOWER: "FLOWER",
HU: "HU"
}
}
};
cc._RF.pop();
}, {} ],
calc19: [ function(e, t) {
"use strict";
cc._RF.push(t, "01b99heNDFI5alDdeX4Z0/A", "calc19");
function n() {
return (n = Object.assign ? Object.assign.bind() : function(e) {
for (var t = 1; t < arguments.length; t++) {
var n = arguments[t];
for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]);
}
return e;
}).apply(this, arguments);
}
function i(e, t) {
var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
if (n) return (n = n.call(e)).next.bind(n);
if (Array.isArray(e) || (n = a(e)) || t && e && "number" == typeof e.length) {
n && (e = n);
var i = 0;
return function() {
return i >= e.length ? {
done: !0
} : {
done: !1,
value: e[i++]
};
};
}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function a(e, t) {
if (e) {
if ("string" == typeof e) return r(e, t);
var n = Object.prototype.toString.call(e).slice(8, -1);
"Object" === n && e.constructor && (n = e.constructor.name);
return "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? r(e, t) : void 0;
}
}
function r(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
return i;
}
var o = t.exports, s = {}, c = {};
o.array2vect = function(e) {
var t = new Array(40).fill(0);
e.forEach(function(e) {
t[e] += 1;
});
return t;
};
o.isSingle = function(e, t) {
if (14 != e.length) return !1;
for (var n, a = i(l); !(n = a()).done; ) if (t[n.value] < 1) return !1;
return t.indexOf(2) >= 0;
};
o.sum = function(e) {
return e.reduce(function(e, t) {
return e + t;
});
};
o.encodeKey = function(e, t) {
for (var n = 0, i = 1; i < 10; i++) n = 10 * n + t[10 * e + i];
return n;
};
var l = [ 1, 9, 11, 19, 21, 29, 31, 32, 33, 34, 35, 36, 37 ];
o.checkHu = function(e) {
if (!s || !c) {
cc.error("胡牌表未初始化，请先调用 initTables");
return !1;
}
var t = o.array2vect(e);
if (o.isSingle(e, t)) return !0;
var n = [ o.sum(t.slice(1, 10)), o.sum(t.slice(11, 20)), o.sum(t.slice(21, 30)), o.sum(t.slice(31, 38)) ], i = 0, a = [];
t.forEach(function(e, t) {
switch (e) {
case 2:
i += 1;
break;

case 3:
a.push(t);
break;

case 4:
i += 2;
}
});
if (3 * a.length + 2 == e.length && 1 == i || 7 == i) return !0;
for (var r = n.findIndex(function(e) {
return e % 3 == 2;
}), l = 31; l < 38; l++) switch (t[l] % 3) {
case 1:
return !1;

case 2:
if (3 != r) return !1;
}
for (var u = 0; u < 3; u++) if (u == r) {
if (n[u] % 3 != 2) return !1;
var d = o.encodeKey(u, t);
if (d > 0 && null == s["" + d]) return !1;
} else {
if (n[u] % 3 != 0) return !1;
var h = o.encodeKey(u, t);
if (h > 0 && null == c["" + h]) return !1;
}
return !0;
};
t.exports = n({
initTables: function() {
return Promise.all([ new Promise(function(e, t) {
cc.resources.load("hnmj/tbl_eye", function(n, i) {
if (n) {
cc.error("加载 eyeTable 失败:", n);
t(n);
} else {
s = i.json;
cc.log("eyeTable 加载成功");
e();
}
});
}), new Promise(function(e, t) {
cc.resources.load("hnmj/tbl", function(n, i) {
if (n) {
cc.error("加载 table 失败:", n);
t(n);
} else {
c = i.json;
cc.log("table 加载成功");
e();
}
});
}) ]);
}
}, o);
cc._RF.pop();
}, {} ],
codeLogin: [ function(e, t) {
"use strict";
cc._RF.push(t, "4b3dbVs4DFDHLggayukF0ID", "codeLogin");
var n = e("utils"), i = e("Connector"), a = e("DataBase"), r = e("Cache"), o = e("SceneLogin");
cc.Class({
extends: cc.Component,
properties: {
errorHintLabel: cc.Label,
lblTime: cc.Label,
editboxPhone: cc.EditBox,
phone: "",
code: "",
passWd: "",
rePassWd: ""
},
start: function() {},
inputPhoneEnded: function(e) {
n.checkPhone(e.string) ? this.phone = e.string : this._showErrorHint("手机号码格式有误");
},
inputCodeEnded: function(e) {
this.code = e.string;
},
inputPassWordEnded: function(e) {
this.passWd = e.string;
},
reInputPWEnded: function(e) {
this.rePassWd = e.string;
this.passWd != this.rePassWd && this._showErrorHint("密码输入不一致");
},
_showErrorHint: function(e) {
var t = this.errorHintLabel.node;
t.active = !0;
this.errorHintLabel.string = e;
this.scheduleOnce(function() {
t.active = !1;
}, 2);
},
getLoginCode: function() {
var e = this;
cc.log("this.phone", this.phone);
!this.phone || this.phone.length < 1 ? this._showErrorHint("手机号码格式有误") : i.request("sendSmsCode", {
phone: this.phone
}, function(t) {
if (t.success) {
r.showTipsMsg(t.message);
e.lblTime.node.parent.active = !0;
e.lblTime.node.parent.getComponent(cc.Button).interactable = !1;
var n = 60;
e.lblTime.string = "重新发送(" + n + ")";
e.lblTime.schedule(function() {
e.lblTime.string = "重新发送(" + --n + ")";
if (0 == n) {
e.lblTime.unscheduleAllCallbacks();
e.lblTime.node.parent.active = !1;
}
}, 1);
}
});
},
onChangePassWd: function() {
cc.log("修改密码");
!this.phone || this.phone.length < 1 ? this._showErrorHint("手机号不能为空") : !this.passWd || this.passWd.length < 1 ? this._showErrorHint("密码不能为空") : this.passWd == this.rePassWd ? !this.code || this.code.length < 1 ? this._showErrorHint("验证码不能为空") : this._startConfirmChange() : this._showErrorHint("密码输入不一致");
},
onCodeLogin: function() {
!this.phone || this.phone.length < 1 ? this._showErrorHint("手机号不能为空") : !this.code || this.code.length < 1 ? this._showErrorHint("验证码不能为空") : this._startCodeLogin();
},
_startConfirmChange: function() {
var e = this;
i.request("changePassword", {
phone: this.phone,
password: this.passWd
}, function(t) {
t.success && (e.node.active = !1);
});
},
hide: function() {
cc.log(11111);
cc.find("Canvas/nodeForget").active = !1;
},
_startCodeLogin: function() {
var e = this;
i.request("loginByCode", {
phone: this.phone,
code: this.code
}, function(t) {
if (t.success) {
o.loginSuccessCallback(t);
a.setInt(a.STORAGE_KEY.LAST_LOGIN, parseInt(new Date().getTime() / 1e3));
a.setString(a.STORAGE_KEY.LOGIN_PHONE, e.phone);
}
});
}
});
cc._RF.pop();
}, {
Cache: "Cache",
Connector: "Connector",
DataBase: "DataBase",
SceneLogin: "SceneLogin",
utils: "utils"
} ],
date: [ function(e, t) {
"use strict";
cc._RF.push(t, "8d4be3DLLdH3KP2mlyVDPBa", "date");
cc.Class({
extends: cc.Component,
properties: {
pfbDatePicker: cc.Prefab,
defaultTime: 0
},
onLoad: function() {
var e = this, t = new Date();
this.year = t.getFullYear();
this.month = t.getMonth();
this.day = t.getDate() - this.defaultTime;
this.updateDate();
this.node.on("touchend", function() {
e.onClickDate();
});
},
onClickDate: function() {
var e = this, t = cc.instantiate(this.pfbDatePicker);
t.parent = cc.find("Canvas");
var n = t.getComponent("UIDatePicker");
n.setDate(this.year, this.month, this.day);
n.setPickDateCallback(function(t, n, i) {
e.year = t;
e.month = n;
e.day = i;
e.updateDate();
});
},
updateDate: function() {
this.node.getComponent(cc.Label).string = cc.js.formatStr("%s-%s-%s", this.year, this.month + 1 > 9 ? this.month + 1 : "0" + (this.month + 1), this.day > 9 ? this.day : "0" + this.day);
}
});
cc._RF.pop();
}, {} ],
"goeasy-im-1.5.0": [ function(e, t, n) {
(function(e) {
"use strict";
cc._RF.push(t, "0ff1cgrNwxAP74DQ3eiNw16", "goeasy-im-1.5.0");
i = "undefined" != typeof self ? self : void 0, a = function() {
return function(e) {
var t = {};
function n(i) {
if (t[i]) return t[i].exports;
var a = t[i] = {
i: i,
l: !1,
exports: {}
};
return e[i].call(a.exports, a, a.exports, n), a.l = !0, a.exports;
}
return n.m = e, n.c = t, n.d = function(e, t, i) {
n.o(e, t) || Object.defineProperty(e, t, {
configurable: !1,
enumerable: !0,
get: i
});
}, n.n = function(e) {
var t = e && e.__esModule ? function() {
return e.default;
} : function() {
return e;
};
return n.d(t, "a", t), t;
}, n.o = function(e, t) {
return Object.prototype.hasOwnProperty.call(e, t);
}, n.p = "", n(n.s = 120);
}([ function(e, t) {
t.__esModule = !0, t.default = function(e, t) {
if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
};
}, function(e, t, n) {
t.__esModule = !0;
var i, a = (i = n(127)) && i.__esModule ? i : {
default: i
};
t.default = function() {
function e(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), 
(0, a.default)(e, i.key, i);
}
}
return function(t, n, i) {
return n && e(t.prototype, n), i && e(t, i), t;
};
}();
}, function(e, t, n) {
e.exports = {
default: n(152),
__esModule: !0
};
}, function(e, t, n) {
t.__esModule = !0;
var i, a = (i = n(20)) && i.__esModule ? i : {
default: i
};
t.default = function(e, t) {
if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return !t || "object" !== (void 0 === t ? "undefined" : (0, a.default)(t)) && "function" != typeof t ? e : t;
};
}, function(e, t, n) {
t.__esModule = !0;
var i = o(n(154)), a = o(n(16)), r = o(n(20));
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
t.default = function(e, t) {
if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === t ? "undefined" : (0, 
r.default)(t)));
e.prototype = (0, a.default)(t && t.prototype, {
constructor: {
value: e,
enumerable: !1,
writable: !0,
configurable: !0
}
}), t && (i.default ? (0, i.default)(e, t) : e.__proto__ = t);
};
}, function(e, t, n) {
e.exports = {
default: n(160),
__esModule: !0
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.noop = t.GoEasyDomainNumber = t.env = t.goEasyArray = t.UUID = t.calibrator = void 0;
var i = n(85), a = n(147), r = n(151), o = n(93), s = n(94);
t.calibrator = i.calibrator, t.UUID = a.UUID, t.goEasyArray = r.goEasyArray, t.env = o.env, 
t.GoEasyDomainNumber = s.GoEasyDomainNumber, t.noop = function() {};
}, function(e) {
var t = e.exports = {
version: "2.6.12"
};
"number" == typeof __e && (__e = t);
}, function(e, t, n) {
t.__esModule = !0;
var i = r(n(2)), a = r(n(183));
function r(e) {
return e && e.__esModule ? e : {
default: e
};
}
t.default = function e(t, n, r) {
null === t && (t = Function.prototype);
var o = (0, a.default)(t, n);
if (void 0 === o) {
var s = (0, i.default)(t);
return null === s ? void 0 : e(s, n, r);
}
if ("value" in o) return o.value;
var c = o.get;
return void 0 === c ? void 0 : c.call(r);
};
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
});
t.default = {
default: "default",
text: "text",
image: "image",
video: "video",
audio: "audio",
emoji: "emoji",
file: "file"
};
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
});
t.default = {
WRITE: "WRITE",
READ: "READ",
NONE: "NONE"
};
}, function(e) {
var t = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("", "return this")();
"number" == typeof __g && (__g = t);
}, function(e, t, n) {
var i = n(61)("wks"), a = n(45), r = n(11).Symbol, o = "function" == typeof r;
(e.exports = function(e) {
return i[e] || (i[e] = o && r[e] || (o ? r : a)("Symbol." + e));
}).store = i;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = s(n(0)), a = s(n(1)), r = n(6), o = s(n(10));
function s(e) {
return e && e.__esModule ? e : {
default: e
};
}
var c = function() {
function e(t) {
var n = this;
(0, i.default)(this, e), this.uuid = null, this.name = "", this.params = null, this.success = null, 
this.fail = null, this.permission = o.default.NONE, this.singleTimeout = 0, this.totalTimeout = 0, 
this.startTime = 0, this.complete = !1, this.retried = 0, this.uuid = r.UUID.get(), 
this.name = t.name, this.params = t.params, this.permission = t.permission, this.totalTimeout = t.totalTimeout, 
this.singleTimeout = t.singleTimeout, this.success = function(e) {
n.complete || (n.complete = !0, t.success(e));
}, this.fail = function(e) {
n.complete || (n.complete = !0, t.fail(e));
};
}
return (0, a.default)(e, [ {
key: "start",
value: function() {
this.startTime = Date.now();
}
}, {
key: "isTimeout",
value: function() {
return this.startTime + this.totalTimeout < Date.now();
}
} ]), e;
}();
t.default = c;
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
});
t.EmitType = {
authorize: "authorize",
manualDisconnect: "manualDisconnect",
subscribe: "subscribe",
unsubscribe: "unsubscribe",
publish: "publish",
ack: "ack",
historyMessages: "historyMessages",
hereNow: "hereNow",
hereNowByUserIds: "hereNowByUserIds",
imLastConversations: "imLastConversations",
markPrivateMessageAsRead: "markPrivateMessageAsRead",
markGroupMessageAsRead: "markGroupMessageAsRead",
imGroupOnlineCount: "imGroupOnlineCount",
imHereNow: "imHereNow",
imGroupHereNow: "imGroupHereNow",
publishIM: "publishIM",
imHistory: "imHistory",
subscribeUserPresence: "subscribeUserPresence",
unsubscribeUserPresence: "unsubscribeUserPresence",
subscribeGroupPresence: "subscribeGroupPresence",
unsubscribeGroupPresence: "unsubscribeGroupPresence",
removeConversation: "removeConversation",
topConversation: "topConversation",
imData: "imData",
subscribeGroups: "subscribeGroups",
unsubscribeGroup: "unsubscribeGroup"
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.str = t.noop = t.GoEasyDomainNumber = t.env = t.goEasyArray = t.UUID = t.calibrator = void 0;
var i = n(181), a = n(6);
t.calibrator = a.calibrator, t.UUID = a.UUID, t.goEasyArray = a.goEasyArray, t.env = a.env, 
t.GoEasyDomainNumber = a.GoEasyDomainNumber, t.noop = a.noop, t.str = i.str;
}, function(e, t, n) {
e.exports = {
default: n(122),
__esModule: !0
};
}, function(e, t, n) {
var i = n(11), a = n(7), r = n(33), o = n(27), s = n(28), c = function e(t, n, c) {
var l, u, d, h = t & e.F, f = t & e.G, p = t & e.S, m = t & e.P, g = t & e.B, v = t & e.W, C = f ? a : a[n] || (a[n] = {}), b = C.prototype, y = f ? i : p ? i[n] : (i[n] || {}).prototype;
for (l in f && (c = n), c) (u = !h && y && void 0 !== y[l]) && s(C, l) || (d = u ? y[l] : c[l], 
C[l] = f && "function" != typeof y[l] ? c[l] : g && u ? r(d, i) : v && y[l] == d ? function(e) {
var t = function(t, n, i) {
if (this instanceof e) {
switch (arguments.length) {
case 0:
return new e();

case 1:
return new e(t);

case 2:
return new e(t, n);
}
return new e(t, n, i);
}
return e.apply(this, arguments);
};
return t.prototype = e.prototype, t;
}(d) : m && "function" == typeof d ? r(Function.call, d) : d, m && ((C.virtual || (C.virtual = {}))[l] = d, 
t & e.R && b && !b[l] && o(b, l, d)));
};
c.F = 1, c.G = 2, c.S = 4, c.P = 8, c.B = 16, c.W = 32, c.U = 64, c.R = 128, e.exports = c;
}, function(e, t, n) {
var i = n(23);
e.exports = function(e) {
if (!i(e)) throw TypeError(e + " is not an object!");
return e;
};
}, function(e, t, n) {
e.exports = !n(30)(function() {
return 7 != Object.defineProperty({}, "a", {
get: function() {
return 7;
}
}).a;
});
}, function(e, t, n) {
t.__esModule = !0;
var i = o(n(131)), a = o(n(138)), r = "function" == typeof a.default && "symbol" == typeof i.default ? function(e) {
return typeof e;
} : function(e) {
return e && "function" == typeof a.default && e.constructor === a.default && e !== a.default.prototype ? "symbol" : typeof e;
};
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
t.default = "function" == typeof a.default && "symbol" === r(i.default) ? function(e) {
return void 0 === e ? "undefined" : r(e);
} : function(e) {
return e && "function" == typeof a.default && e.constructor === a.default && e !== a.default.prototype ? "symbol" : void 0 === e ? "undefined" : r(e);
};
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
});
t.SocketTimeout = {
connect: 1500,
reconnectionDelayMax: 3e3,
commonQuerySingle: 2500,
commonQueryTotal: 12e3,
commonRequestSingle: 1700,
commonRequestTotal: 12e3,
commonInfiniteSingle: 1700,
commonInfiniteTotal: 864e5
};
}, function(e, t, n) {
var i = n(18), a = n(79), r = n(56), o = Object.defineProperty;
t.f = n(19) ? Object.defineProperty : function(e, t, n) {
if (i(e), t = r(t, !0), i(n), a) try {
return o(e, t, n);
} catch (e) {}
if ("get" in n || "set" in n) throw TypeError("Accessors not supported!");
return "value" in n && (e[t] = n.value), e;
};
}, function(e) {
e.exports = function(e) {
return "object" == typeof e ? null !== e : "function" == typeof e;
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.ImEventType = t.eventCenter = void 0;
var i = n(130), a = n(84);
t.eventCenter = i.eventCenter, t.ImEventType = a.ImEventType;
}, function(e, t, n) {
e.exports = {
default: n(175),
__esModule: !0
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.Conversion = t.ConversationType = t.Conversations = void 0;
var i = n(100), a = n(69), r = n(176);
t.Conversations = r.Conversations, t.ConversationType = a.ConversationType, t.Conversion = i.Conversion;
}, function(e, t, n) {
var i = n(22), a = n(44);
e.exports = n(19) ? function(e, t, n) {
return i.f(e, t, a(1, n));
} : function(e, t, n) {
return e[t] = n, e;
};
}, function(e) {
var t = {}.hasOwnProperty;
e.exports = function(e, n) {
return t.call(e, n);
};
}, function(e, t, n) {
var i = n(81), a = n(58);
e.exports = function(e) {
return i(a(e));
};
}, function(e) {
e.exports = function(e) {
try {
return !!e();
} catch (e) {
return !0;
}
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.SocketTimeout = t.IMTimeout = void 0;
var i = n(21);
t.IMTimeout = {};
t.SocketTimeout = i.SocketTimeout;
}, function(e, t, n) {
var i = n(212), a = n(213), r = n(215), o = n(216);
"undefined" != typeof navigator && /Android/i.test(navigator.userAgent), "undefined" != typeof navigator && /PhantomJS/i.test(navigator.userAgent);
t.protocol = 3;
var s = t.packets = {
open: 0,
close: 1,
ping: 2,
pong: 3,
message: 4,
upgrade: 5,
noop: 6
}, c = i(s), l = {
type: "error",
data: "parser error"
}, u = n(217);
t.encodePacket = function(e, t, n, i) {
"function" == typeof t && (i = t, t = !1), "function" == typeof n && (i = n, n = null);
void 0 === e.data || e.data.buffer || e.data;
var a = s[e.type];
return void 0 !== e.data && (a += n ? o.encode(String(e.data), {
strict: !1
}) : String(e.data)), i("" + a);
}, t.decodePacket = function(e, t, n) {
if (void 0 === e) return l;
if ("string" == typeof e) {
if (n && !1 === (e = function(e) {
try {
e = o.decode(e, {
strict: !1
});
} catch (e) {
return !1;
}
return e;
}(e))) return l;
var i = e.charAt(0);
return Number(i) == i && c[i] ? e.length > 1 ? {
type: c[i],
data: e.substring(1)
} : {
type: c[i]
} : l;
}
i = new Uint8Array(e)[0];
var a = sliceBuffer(e, 1);
return u && "blob" === t && (a = new u([ a ])), {
type: c[i],
data: a
};
}, t.encodePayload = function(e, n, i) {
"function" == typeof n && (i = n, n = null);
var o = a(e);
if (!e.length) return i("0:");
!function(e, t, n) {
for (var i = new Array(e.length), a = r(e.length, n), o = function(e, n, a) {
t(n, function(t, n) {
i[e] = n, a(t, i);
});
}, s = 0; s < e.length; s++) o(s, e[s], a);
}(e, function(e, i) {
t.encodePacket(e, !!o && n, !0, function(e) {
i(null, function(e) {
return e.length + ":" + e;
}(e));
});
}, function(e, t) {
return i(t.join(""));
});
}, t.decodePayload = function(e, n, i) {
var a;
if ("function" == typeof n && (i = n, n = null), "" === e) return i(l, 0, 1);
for (var r, o, s = "", c = 0, u = e.length; c < u; c++) {
var d = e.charAt(c);
if (":" === d) {
if ("" === s || s != (r = Number(s))) return i(l, 0, 1);
if (s != (o = e.substr(c + 1, r)).length) return i(l, 0, 1);
if (o.length) {
if (a = t.decodePacket(o, n, !0), l.type === a.type && l.data === a.data) return i(l, 0, 1);
if (!1 === i(a, c + r, u)) return;
}
c += r, s = "";
} else s += d;
}
return "" !== s ? i(l, 0, 1) : void 0;
};
}, function(e, t, n) {
var i = n(43);
e.exports = function(e, t, n) {
if (i(e), void 0 === t) return e;
switch (n) {
case 1:
return function(n) {
return e.call(t, n);
};

case 2:
return function(n, i) {
return e.call(t, n, i);
};

case 3:
return function(n, i, a) {
return e.call(t, n, i, a);
};
}
return function() {
return e.apply(t, arguments);
};
};
}, function(e, t, n) {
var i = n(80), a = n(62);
e.exports = Object.keys || function(e) {
return i(e, a);
};
}, function(e) {
var t = {}.toString;
e.exports = function(e) {
return t.call(e).slice(8, -1);
};
}, function(e) {
e.exports = !0;
}, function(e) {
e.exports = {};
}, function(e, t, n) {
var i = n(58);
e.exports = function(e) {
return Object(i(e));
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = w(n(5)), a = w(n(25)), r = w(n(0)), o = w(n(1)), s = n(26), c = n(15), l = n(24), u = n(182), d = w(n(9)), h = n(21), f = w(n(196)), p = w(n(230)), m = w(n(231)), g = w(n(247)), v = w(n(117)), C = w(n(248)), b = w(n(249)), y = w(n(250)), S = w(n(251)), _ = w(n(252)), T = w(n(253)), E = w(n(254)), A = w(n(255)), I = w(n(256)), N = w(n(41));
function w(e) {
return e && e.__esModule ? e : {
default: e
};
}
var D = function() {
function e(t) {
(0, r.default)(this, e), this._appKey = void 0, this._host = void 0, this._supportOldBrowser = !1, 
this._allowNotification = !1, this._event = l.eventCenter, this._goEasyUploader = null, 
this._connection = null, this._goEasySocket = null, this._dataCache = null, this._messageSender = null, 
this._history = null, this._conversations = null, this._iMReceiver = null, this._groupMessageReceive = null, 
this._groupPresenceSubscriber = null, this._groupOnlineCount = null, this._groupHereNow = null, 
this._privateMessageReceive = null, this._userPresenceSubscriber = null, this._userHereNow = null, 
this._appKey = t.appkey, this._host = t.host, this._supportOldBrowser = t.supportOldBrowser, 
this._allowNotification = t.allowNotification;
}
return (0, o.default)(e, [ {
key: "on",
value: function(e, t) {
this._event.on(e, t);
}
}, {
key: "initialBeforeConnect",
value: function(t) {
var n = this.setUriAndOpts(t.forceTLS);
e.userId = t.id, e.userData = t.data, this._goEasySocket = new f.default({
appkey: this._appKey,
host: this._host,
userId: t.id,
userData: (0, a.default)(t.data),
otp: t.otp,
artifactVersion: "1.2.2",
imVersion: e.version,
type: "im",
opts: n.opts,
uri: n.uri,
allowNotification: this._allowNotification
}), this._dataCache = new I.default(this, t), this._connection = new p.default(this), 
this._messageSender = new m.default(this), this._history = new g.default(this), 
this._goEasyUploader = new v.default(this), this._userHereNow = new T.default(this), 
this._groupHereNow = new E.default(this), this._groupOnlineCount = new y.default(this);
}
}, {
key: "initialAfterConnect",
value: function() {
this._iMReceiver = new A.default(this), this._conversations = new s.Conversations(this), 
this._groupPresenceSubscriber = new S.default(this), this._groupMessageReceive = new C.default(this), 
this._userPresenceSubscriber = new _.default(this), this._privateMessageReceive = new b.default(this);
}
}, {
key: "connect",
value: function(e) {
if (this.getStatus() !== N.default.DISCONNECTED) return i.default.reject({
code: 408,
content: "IM is connected, don't try again until im.disconnect() is called. "
});
if (!c.calibrator.isObject(e)) return i.default.reject({
code: 400,
content: "TypeError: user require an object."
});
if (c.calibrator.isEmpty(e.id) || !c.calibrator.isStringOrNumber(e.id)) return i.default.reject({
code: 400,
content: "TypeError: id require number or string."
});
if (c.calibrator.isNumber(e.id) && (e.id = e.id.toString()), e.data = c.calibrator.isDef(e.data) ? e.data : {}, 
(c.calibrator.isObject(e.data) ? (0, a.default)(e.data).length : e.data.length) > 300) return i.default.reject({
code: 400,
content: "user.data-length limit 300 byte."
});
this.initialBeforeConnect(e);
var t = this._connection.connect(e);
return this.initialAfterConnect(), t;
}
}, {
key: "disconnect",
value: function() {
return this._connection.disconnect();
}
}, {
key: "getStatus",
value: function() {
return this._goEasySocket ? this._goEasySocket.getStatus() : N.default.DISCONNECTED;
}
}, {
key: "createTextMessage",
value: function(e) {
return u.messageCreator.create(d.default.text, e);
}
}, {
key: "createImageMessage",
value: function(e) {
return u.messageCreator.create(d.default.image, e);
}
}, {
key: "createFileMessage",
value: function(e) {
return u.messageCreator.create(d.default.file, e);
}
}, {
key: "createAudioMessage",
value: function(e) {
return u.messageCreator.create(d.default.audio, e);
}
}, {
key: "createVideoMessage",
value: function(e) {
return u.messageCreator.create(d.default.video, e);
}
}, {
key: "createCustomMessage",
value: function(e) {
return u.messageCreator.create(e.type, e);
}
}, {
key: "latestConversations",
value: function() {
return this._conversations ? this._conversations.latestConversations() : i.default.reject({
code: 500,
content: "Please connect GoEasyIM first."
});
}
}, {
key: "groupMarkAsRead",
value: function(e, t) {
return this._conversations.groupMarkAsRead(e, t);
}
}, {
key: "privateMarkAsRead",
value: function(e, t) {
return this._conversations.privateMarkAsRead(e, t);
}
}, {
key: "removePrivateConversation",
value: function(e) {
return this._conversations.removeConversation(e, s.ConversationType.PRIVATE);
}
}, {
key: "removeGroupConversation",
value: function(e) {
return this._conversations.removeConversation(e, s.ConversationType.GROUP);
}
}, {
key: "topPrivateConversation",
value: function(e, t) {
return this._conversations.topConversation(e, t, s.ConversationType.PRIVATE);
}
}, {
key: "topGroupConversation",
value: function(e, t) {
return this._conversations.topConversation(e, t, s.ConversationType.GROUP);
}
}, {
key: "history",
value: function(e) {
return this._history.history(e);
}
}, {
key: "upload",
value: function(e, t, n) {
return this._goEasyUploader.upload(e, t, n);
}
}, {
key: "sendSystemMessage",
value: function(e, t) {
return this._messageSender.send(e, t, s.ConversationType.SYSTEM);
}
}, {
key: "sendMessage",
value: function(e) {
return this._messageSender.sendMessage(e);
}
}, {
key: "sendPrivateMessage",
value: function(e, t) {
return this._messageSender.send(e, t, s.ConversationType.PRIVATE);
}
}, {
key: "subscribeUserPresence",
value: function(e) {
return this._userPresenceSubscriber.presence(e);
}
}, {
key: "unsubscribeUserPresence",
value: function(e) {
return this._userPresenceSubscriber.unPresence(e);
}
}, {
key: "hereNow",
value: function(e) {
return this._userHereNow.hereNow(e, s.ConversationType.PRIVATE);
}
}, {
key: "sendGroupMessage",
value: function(e, t) {
return this._messageSender.send(e, t, s.ConversationType.GROUP);
}
}, {
key: "subscribeGroup",
value: function(e) {
return this._groupMessageReceive.subscribe(e);
}
}, {
key: "unsubscribeGroup",
value: function(e) {
return this._groupMessageReceive.unsubscribe(e);
}
}, {
key: "subscribeGroupPresence",
value: function(e) {
return this._groupPresenceSubscriber.presence(e);
}
}, {
key: "unsubscribeGroupPresence",
value: function(e) {
return this._groupPresenceSubscriber.unPresence(e);
}
}, {
key: "groupHereNow",
value: function(e) {
return this._groupHereNow.hereNow(e);
}
}, {
key: "groupOnlineCount",
value: function(e) {
return this._groupOnlineCount.get(e);
}
}, {
key: "setUriAndOpts",
value: function(e) {
var t = void 0, n = void 0, i = "://" + c.GoEasyDomainNumber.refreshNumber() + this._host;
if (c.env.isBrowserClient()) {
t = !1 === e ? "http" + i + ":80" : "https" + i + ":443";
n = {
transports: !0 === this._supportOldBrowser ? [ "polling", "websocket" ] : [ "websocket" ],
timeout: h.SocketTimeout.connect
};
} else t = "https://wx-" + this._host + ":443", n = {
transports: [ "websocket" ],
reconnectionDelayMax: h.SocketTimeout.reconnectionDelayMax
};
return {
uri: t,
opts: n
};
}
} ]), e;
}();
D.version = null, D.userId = void 0, D.userData = null, t.default = D;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = u(n(16)), a = u(n(0)), r = u(n(1)), o = u(n(39)), s = n(6), c = (u(n(9)), 
u(n(49))), l = n(26);
function u(e) {
return e && e.__esModule ? e : {
default: e
};
}
var d = function() {
function e(t) {
(0, a.default)(this, e), this.type = "", this.to = {
type: null,
id: null,
data: null
}, this.timestamp = Date.now(), this.senderId = null, this.payload = null, this.messageId = s.UUID.get(), 
this.status = c.default.new, this.validate(t), this.setSenderId(), this.setType(t), 
this.setNotification(t), this.setPayload(t), this.setTo(t), this.setData();
}
return (0, r.default)(e, [ {
key: "validate",
value: function(e) {
if (!s.calibrator.isObject(e)) throw Error("it is an empty message.");
}
}, {
key: "setType",
value: function() {
throw Error("Abstract method");
}
}, {
key: "setNotification",
value: function(e) {
if (e.notification) {
if (!s.calibrator.isObject(e.notification)) throw Error("notification require an object.");
if (s.calibrator.isEmpty(e.notification.title)) throw Error("notification's title is empty.");
if (s.calibrator.isEmpty(e.notification.body)) throw Error("notification's body is empty.");
if (e.notification.title.length > 32) throw Error("notification's title over max length 32");
if (e.notification.body.length > 50) throw Error("notification's body over max length 50");
this.notification = e.notification;
}
}
}, {
key: "setPayload",
value: function() {
this.payload = (0, i.default)(null);
}
}, {
key: "setSenderId",
value: function() {
if (!o.default.userId) throw Error("please call connect() first.");
this.senderId = o.default.userId;
}
}, {
key: "setTo",
value: function(e) {
this.to = e.to;
}
}, {
key: "setData",
value: function() {
this.to && this.to.type == l.ConversationType.GROUP && (this.senderData = o.default.userData);
}
} ]), e;
}();
t.default = d;
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
});
t.default = {
DISCONNECTED: "disconnected",
DISCONNECTING: "disconnecting",
CONNECTING: "connecting",
CONNECTED: "connected",
RECONNECTING: "reconnecting",
RECONNECTED: "reconnected",
EXPIRED_RECONNECTED: "reconnected",
CONNECT_FAILED: "connect_failed"
};
}, function(e) {
function t(e) {
if (e) return function(e) {
for (var n in t.prototype) e[n] = t.prototype[n];
return e;
}(e);
}
e.exports = t, t.prototype.on = t.prototype.addEventListener = function(e, t) {
return this._callbacks = this._callbacks || {}, (this._callbacks["$" + e] = this._callbacks["$" + e] || []).push(t), 
this;
}, t.prototype.once = function(e, t) {
function n() {
this.off(e, n), t.apply(this, arguments);
}
return n.fn = t, this.on(e, n), this;
}, t.prototype.off = t.prototype.removeListener = t.prototype.removeAllListeners = t.prototype.removeEventListener = function(e, t) {
if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, 
this;
var n, i = this._callbacks["$" + e];
if (!i) return this;
if (1 == arguments.length) return delete this._callbacks["$" + e], this;
for (var a = 0; a < i.length; a++) if ((n = i[a]) === t || n.fn === t) {
i.splice(a, 1);
break;
}
return this;
}, t.prototype.emit = function(e) {
this._callbacks = this._callbacks || {};
var t = [].slice.call(arguments, 1), n = this._callbacks["$" + e];
if (n) for (var i = 0, a = (n = n.slice(0)).length; i < a; ++i) n[i].apply(this, t);
return this;
}, t.prototype.listeners = function(e) {
return this._callbacks = this._callbacks || {}, this._callbacks["$" + e] || [];
}, t.prototype.hasListeners = function(e) {
return !!this.listeners(e).length;
};
}, function(e) {
e.exports = function(e) {
if ("function" != typeof e) throw TypeError(e + " is not a function!");
return e;
};
}, function(e) {
e.exports = function(e, t) {
return {
enumerable: !(1 & e),
configurable: !(2 & e),
writable: !(4 & e),
value: t
};
};
}, function(e) {
var t = 0, n = Math.random();
e.exports = function(e) {
return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++t + n).toString(36));
};
}, function(e, t, n) {
var i = n(22).f, a = n(28), r = n(12)("toStringTag");
e.exports = function(e, t, n) {
e && !a(e = n ? e : e.prototype, r) && i(e, r, {
configurable: !0,
value: t
});
};
}, function(e, t) {
t.f = {}.propertyIsEnumerable;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = l(n(16)), a = l(n(0)), r = l(n(1)), o = n(6), s = n(26), c = l(n(49));
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = function() {
function e() {
(0, a.default)(this, e);
}
return (0, r.default)(e, null, [ {
key: "assemble",
value: function(e) {
if (!o.calibrator.isDef(e)) return null;
try {
var t = (0, i.default)(null);
return t.type = e.mt, t.timestamp = e.ts, t.senderId = e.s, t.payload = JSON.parse(e.p), 
t.messageId = e.i, t.status = c.default.success, e.t == s.ConversationType.GROUP ? (t.groupId = e.r, 
t.senderData = e.d && JSON.parse(e.d)) : t.receiverId = e.r, t;
} catch (e) {
throw Error(e);
}
}
} ]), e;
}();
t.default = u;
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
});
t.default = {
new: "new",
sending: "sending",
success: "success",
fail: "fail"
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(2)), a = d(n(0)), r = d(n(1)), o = d(n(3)), s = d(n(8)), c = d(n(4)), l = d(n(70)), u = n(15);
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
if ((0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e), 
!u.calibrator.isDef(e.file)) throw Error("file is empty.");
}
}, {
key: "setPayload",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e);
}
} ]), t;
}(l.default);
t.default = h;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = u(n(2)), a = u(n(0)), r = u(n(1)), o = u(n(3)), s = u(n(8)), c = u(n(4)), l = n(15);
function u(e) {
return e && e.__esModule ? e : {
default: e
};
}
var d = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
if ((0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e), 
!l.calibrator.isDef(e.file)) throw Error("file is empty.");
}
}, {
key: "setPayload",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e);
}
} ]), t;
}(u(n(70)).default);
t.default = d;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = l(n(2)), a = l(n(0)), r = l(n(1)), o = l(n(3)), s = l(n(8)), c = l(n(4));
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
if ((0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e), 
!(e.file instanceof File)) throw Error("wrong file type.");
if (0 == e.file.size) throw Error("File size is 0.");
if (e.file.size > 31457280) throw Error("message-length limit 30mib");
}
}, {
key: "setPayload",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e), 
this.payload.contentType = e.file.type, this.payload.name = e.file.name, this.payload.size = e.file.size;
var n = (window.URL || window.webkitURL).createObjectURL(e.file);
this.payload.url = n;
}
} ]), t;
}(l(n(70)).default);
t.default = u;
}, function(e, t, n) {
(function(i) {
function a() {
var e;
try {
e = t.storage.debug;
} catch (e) {}
return !e && void 0 !== i && "env" in i && (e = i.env.DEBUG), e;
}
(t = e.exports = n(200)).log = function() {
return "object" == typeof console && console.log && Function.prototype.apply.call(console.log, console, arguments);
}, t.formatArgs = function(e) {
var n = this.useColors;
if (e[0] = (n ? "%c" : "") + this.namespace + (n ? " %c" : " ") + e[0] + (n ? "%c " : " ") + "+" + t.humanize(this.diff), 
n) {
var i = "color: " + this.color;
e.splice(1, 0, i, "color: inherit");
var a = 0, r = 0;
e[0].replace(/%[a-zA-Z%]/g, function(e) {
"%%" !== e && "%c" === e && (r = ++a);
}), e.splice(r, 0, i);
}
}, t.save = function(e) {
try {
null == e ? t.storage.removeItem("debug") : t.storage.debug = e;
} catch (e) {}
}, t.load = a, t.useColors = function() {
return !("undefined" == typeof window || !window.process || "renderer" !== window.process.type) || ("undefined" == typeof navigator || !navigator.userAgent || !navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) && ("undefined" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || "undefined" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}, t.storage = "undefined" != typeof chrome && "undefined" != typeof chrome.storage ? chrome.storage.local : function() {
try {
return window.localStorage;
} catch (e) {}
}(), t.colors = [ "#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33" ], 
t.formatters.j = function(e) {
try {
return JSON.stringify(e);
} catch (e) {
return "[UnexpectedJSONParseError]: " + e.message;
}
}, t.enable(a());
}).call(t, n(71));
}, function(e, t) {
t.encode = function(e) {
var t = "";
for (var n in e) e.hasOwnProperty(n) && (t.length && (t += "&"), t += encodeURIComponent(n) + "=" + encodeURIComponent(e[n]));
return t;
}, t.decode = function(e) {
for (var t = {}, n = e.split("&"), i = 0, a = n.length; i < a; i++) {
var r = n[i].split("=");
t[decodeURIComponent(r[0])] = decodeURIComponent(r[1]);
}
return t;
};
}, function(e, t, n) {
var i = n(23), a = n(11).document, r = i(a) && i(a.createElement);
e.exports = function(e) {
return r ? a.createElement(e) : {};
};
}, function(e, t, n) {
var i = n(23);
e.exports = function(e, t) {
if (!i(e)) return e;
var n, a;
if (t && "function" == typeof (n = e.toString) && !i(a = n.call(e))) return a;
if ("function" == typeof (n = e.valueOf) && !i(a = n.call(e))) return a;
if (!t && "function" == typeof (n = e.toString) && !i(a = n.call(e))) return a;
throw TypeError("Can't convert object to primitive value");
};
}, function(e, t, n) {
var i = n(18), a = n(124), r = n(62), o = n(60)("IE_PROTO"), s = function() {}, c = function() {
var e, t = n(55)("iframe"), i = r.length;
for (t.style.display = "none", n(83).appendChild(t), t.src = "javascript:", (e = t.contentWindow.document).open(), 
e.write("<script>document.F=Object<\/script>"), e.close(), c = e.F; i--; ) delete c.prototype[r[i]];
return c();
};
e.exports = Object.create || function(e, t) {
var n;
return null !== e ? (s.prototype = i(e), n = new s(), s.prototype = null, n[o] = e) : n = c(), 
void 0 === t ? n : a(n, t);
};
}, function(e) {
e.exports = function(e) {
if (null == e) throw TypeError("Can't call method on  " + e);
return e;
};
}, function(e) {
var t = Math.ceil, n = Math.floor;
e.exports = function(e) {
return isNaN(e = +e) ? 0 : (e > 0 ? n : t)(e);
};
}, function(e, t, n) {
var i = n(61)("keys"), a = n(45);
e.exports = function(e) {
return i[e] || (i[e] = a(e));
};
}, function(e, t, n) {
var i = n(7), a = n(11), r = a["__core-js_shared__"] || (a["__core-js_shared__"] = {});
(e.exports = function(e, t) {
return r[e] || (r[e] = void 0 !== t ? t : {});
})("versions", []).push({
version: i.version,
mode: n(36) ? "pure" : "global",
copyright: "© 2020 Denis Pushkarev (zloirock.ru)"
});
}, function(e) {
e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
}, function(e, t, n) {
t.f = n(12);
}, function(e, t, n) {
var i = n(11), a = n(7), r = n(36), o = n(63), s = n(22).f;
e.exports = function(e) {
var t = a.Symbol || (a.Symbol = r ? {} : i.Symbol || {});
"_" == e.charAt(0) || e in t || s(t, e, {
value: o.f(e)
});
};
}, function(e, t) {
t.f = Object.getOwnPropertySymbols;
}, function(e, t, n) {
var i = n(47), a = n(44), r = n(29), o = n(56), s = n(28), c = n(79), l = Object.getOwnPropertyDescriptor;
t.f = n(19) ? l : function(e, t) {
if (e = r(e), t = o(t, !0), c) try {
return l(e, t);
} catch (e) {}
if (s(e, t)) return a(!i.f.call(e, t), e[t]);
};
}, function(e, t, n) {
var i = n(17), a = n(7), r = n(30);
e.exports = function(e, t) {
var n = (a.Object || {})[e] || Object[e], o = {};
o[e] = t(n), i(i.S + i.F * r(function() {
n(1);
}), "Object", o);
};
}, function(e, t, n) {
var i = n(43);
e.exports.f = function(e) {
return new function(e) {
var t, n;
this.promise = new e(function(e, i) {
if (void 0 !== t || void 0 !== n) throw TypeError("Bad Promise constructor");
t = e, n = i;
}), this.resolve = i(t), this.reject = i(n);
}(e);
};
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
});
t.ConversationType = {
GROUP: "group",
PRIVATE: "private"
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(2)), a = d(n(0)), r = d(n(1)), o = d(n(3)), s = d(n(8)), c = d(n(4)), l = d(n(40)), u = d(n(9));
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function(e) {
function t(e) {
(0, a.default)(this, t);
var n = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
return n.file = null, n.onProgress = null, n.setFile(e.file), n.setOnProgress(e.onProgress), 
n;
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e);
}
}, {
key: "setPayload",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e), 
this.payload.size = "", this.payload.contentType = "", this.payload.name = "", this.payload.url = "";
}
}, {
key: "setType",
value: function() {
this.type = u.default.file;
}
}, {
key: "setFile",
value: function(e) {
this.file = e;
}
}, {
key: "setOnProgress",
value: function(e) {
this.onProgress = e;
}
} ]), t;
}(l.default);
t.default = h;
}, function(e) {
var t, n, i = e.exports = {};
function a() {
throw new Error("setTimeout has not been defined");
}
function r() {
throw new Error("clearTimeout has not been defined");
}
function o(e) {
if (t === setTimeout) return setTimeout(e, 0);
if ((t === a || !t) && setTimeout) return t = setTimeout, setTimeout(e, 0);
try {
return t(e, 0);
} catch (n) {
try {
return t.call(null, e, 0);
} catch (n) {
return t.call(this, e, 0);
}
}
}
!function() {
try {
t = "function" == typeof setTimeout ? setTimeout : a;
} catch (e) {
t = a;
}
try {
n = "function" == typeof clearTimeout ? clearTimeout : r;
} catch (e) {
n = r;
}
}();
var s, c = [], l = !1, u = -1;
function d() {
l && s && (l = !1, s.length ? c = s.concat(c) : u = -1, c.length && h());
}
function h() {
if (!l) {
var e = o(d);
l = !0;
for (var t = c.length; t; ) {
for (s = c, c = []; ++u < t; ) s && s[u].run();
u = -1, t = c.length;
}
s = null, l = !1, function(e) {
if (n === clearTimeout) return clearTimeout(e);
if ((n === r || !n) && clearTimeout) return n = clearTimeout, clearTimeout(e);
try {
n(e);
} catch (t) {
try {
return n.call(null, e);
} catch (t) {
return n.call(this, e);
}
}
}(e);
}
}
function f(e, t) {
this.fun = e, this.array = t;
}
function p() {}
i.nextTick = function(e) {
var t = new Array(arguments.length - 1);
if (arguments.length > 1) for (var n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
c.push(new f(e, t)), 1 !== c.length || l || o(h);
}, f.prototype.run = function() {
this.fun.apply(null, this.array);
}, i.title = "browser", i.browser = !0, i.env = {}, i.argv = [], i.version = "", 
i.versions = {}, i.on = p, i.addListener = p, i.once = p, i.off = p, i.removeListener = p, 
i.removeAllListeners = p, i.emit = p, i.prependListener = p, i.prependOnceListener = p, 
i.listeners = function() {
return [];
}, i.binding = function() {
throw new Error("process.binding is not supported");
}, i.cwd = function() {
return "/";
}, i.chdir = function() {
throw new Error("process.chdir is not supported");
}, i.umask = function() {
return 0;
};
}, function(e, t, n) {
var i, a = (i = n(25)) && i.__esModule ? i : {
default: i
};
n(202)("socket.io-parser");
var r = n(42), o = n(105);
function s() {}
t.protocol = 4, t.types = [ "CONNECT", "DISCONNECT", "EVENT", "ACK", "ERROR", "BINARY_EVENT", "BINARY_ACK" ], 
t.CONNECT = 0, t.DISCONNECT = 1, t.EVENT = 2, t.ACK = 3, t.ERROR = 4, t.BINARY_EVENT = 5, 
t.BINARY_ACK = 6, t.Encoder = s, t.Decoder = l;
var c = t.ERROR + '"encode error"';
function l() {
this.reconstructor = null;
}
function u(e) {
this.reconPack = e, this.buffers = [];
}
function d(e) {
return {
type: t.ERROR,
data: "parser error: " + e
};
}
s.prototype.encode = function(e, n) {
n([ function(e) {
var n = "" + e.type;
t.BINARY_EVENT !== e.type && t.BINARY_ACK !== e.type || (n += e.attachments + "-");
e.nsp && "/" !== e.nsp && (n += e.nsp + ",");
null != e.id && (n += e.id);
if (null != e.data) {
var i = function(e) {
try {
return (0, a.default)(e);
} catch (e) {
return !1;
}
}(e.data);
if (!1 === i) return c;
n += i;
}
return n;
}(e) ]);
}, r(l.prototype), l.prototype.add = function(e) {
var n;
if ("string" != typeof e) throw new Error("Unknown type: " + e);
n = function(e) {
var n = 0, i = {
type: Number(e.charAt(0))
};
if (null == t.types[i.type]) return d("unknown packet type " + i.type);
if (t.BINARY_EVENT === i.type || t.BINARY_ACK === i.type) {
for (var a = ""; "-" !== e.charAt(++n) && (a += e.charAt(n), n != e.length); ) ;
if (a != Number(a) || "-" !== e.charAt(n)) throw new Error("Illegal attachments");
i.attachments = Number(a);
}
if ("/" === e.charAt(n + 1)) for (i.nsp = ""; ++n && "," !== (s = e.charAt(n)) && (i.nsp += s, 
n !== e.length); ) ; else i.nsp = "/";
var r = e.charAt(n + 1);
if ("" !== r && Number(r) == r) {
for (i.id = ""; ++n; ) {
var s;
if (null == (s = e.charAt(n)) || Number(s) != s) {
--n;
break;
}
if (i.id += e.charAt(n), n === e.length) break;
}
i.id = Number(i.id);
}
if (e.charAt(++n)) {
var c = function(e) {
try {
return JSON.parse(e);
} catch (e) {
return !1;
}
}(e.substr(n));
if (!1 === c || i.type !== t.ERROR && !o(c)) return d("invalid payload");
i.data = c;
}
return i;
}(e), this.emit("decoded", n);
}, l.prototype.destroy = function() {
this.reconstructor && this.reconstructor.finishedReconstruction();
}, u.prototype.takeBinaryData = function(e) {
if (this.buffers.push(e), this.buffers.length === this.reconPack.attachments) {
var t = binary.reconstructPacket(this.reconPack, this.buffers);
return this.finishedReconstruction(), t;
}
return null;
}, u.prototype.finishedReconstruction = function() {
this.reconPack = null, this.buffers = [];
};
}, function(e, t, n) {
e.exports = {
default: n(207),
__esModule: !0
};
}, function(e, t, n) {
var i = n(32), a = n(42);
function r(e) {
this.path = e.path, this.hostname = e.hostname, this.port = e.port, this.secure = e.secure, 
this.query = e.query, this.timestampParam = e.timestampParam, this.timestampRequests = e.timestampRequests, 
this.readyState = "", this.agent = e.agent || !1, this.socket = e.socket, this.enablesXDR = e.enablesXDR, 
this.pfx = e.pfx, this.key = e.key, this.passphrase = e.passphrase, this.cert = e.cert, 
this.ca = e.ca, this.ciphers = e.ciphers, this.rejectUnauthorized = e.rejectUnauthorized, 
this.forceNode = e.forceNode, this.isReactNative = e.isReactNative, this.extraHeaders = e.extraHeaders, 
this.localAddress = e.localAddress;
}
e.exports = r, a(r.prototype), r.prototype.onError = function(e, t) {
var n = new Error(e);
return n.type = "TransportError", n.description = t, this.emit("error", n), this;
}, r.prototype.open = function() {
return "closed" !== this.readyState && "" !== this.readyState || (this.readyState = "opening", 
this.doOpen()), this;
}, r.prototype.close = function() {
return "opening" !== this.readyState && "open" !== this.readyState || (this.doClose(), 
this.onClose()), this;
}, r.prototype.send = function(e) {
if ("open" !== this.readyState) throw new Error("Transport not open");
this.write(e);
}, r.prototype.onOpen = function() {
this.readyState = "open", this.writable = !0, this.emit("open");
}, r.prototype.onData = function(e) {
var t = i.decodePacket(e, this.socket.binaryType);
this.onPacket(t);
}, r.prototype.onPacket = function(e) {
this.emit("packet", e);
}, r.prototype.onClose = function() {
this.readyState = "closed", this.emit("close");
};
}, function(e) {
e.exports = function(e, t) {
var n = function() {};
n.prototype = t.prototype, e.prototype = new n(), e.prototype.constructor = e;
};
}, function(e, t, n) {
(function(i) {
function a() {
var e;
try {
e = t.storage.debug;
} catch (e) {}
return !e && void 0 !== i && "env" in i && (e = i.env.DEBUG), e;
}
(t = e.exports = n(218)).log = function() {
return "object" == typeof console && console.log && Function.prototype.apply.call(console.log, console, arguments);
}, t.formatArgs = function(e) {
var n = this.useColors;
if (e[0] = (n ? "%c" : "") + this.namespace + (n ? " %c" : " ") + e[0] + (n ? "%c " : " ") + "+" + t.humanize(this.diff), 
n) {
var i = "color: " + this.color;
e.splice(1, 0, i, "color: inherit");
var a = 0, r = 0;
e[0].replace(/%[a-zA-Z%]/g, function(e) {
"%%" !== e && "%c" === e && (r = ++a);
}), e.splice(r, 0, i);
}
}, t.save = function(e) {
try {
null == e ? t.storage.removeItem("debug") : t.storage.debug = e;
} catch (e) {}
}, t.load = a, t.useColors = function() {
return !("undefined" == typeof window || !window.process || "renderer" !== window.process.type) || ("undefined" == typeof navigator || !navigator.userAgent || !navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) && ("undefined" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || "undefined" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}, t.storage = "undefined" != typeof chrome && "undefined" != typeof chrome.storage ? chrome.storage.local : function() {
try {
return window.localStorage;
} catch (e) {}
}(), t.colors = [ "#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33" ], 
t.formatters.j = function(e) {
try {
return JSON.stringify(e);
} catch (e) {
return "[UnexpectedJSONParseError]: " + e.message;
}
}, t.enable(a());
}).call(t, n(71));
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = r(n(0)), a = r(n(1));
function r(e) {
return e && e.__esModule ? e : {
default: e
};
}
var o = function() {
function e() {
(0, i.default)(this, e);
}
return (0, a.default)(e, [ {
key: "upload",
value: function() {
throw Error("Not implementation yet.");
}
} ]), e;
}();
t.default = o;
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
});
t.default = {
message: "message",
imMessage: "imMessage",
userPresence: "userPresence",
groupPresence: "groupPresence"
};
}, function(e, t, n) {
e.exports = !n(19) && !n(30)(function() {
return 7 != Object.defineProperty(n(55)("div"), "a", {
get: function() {
return 7;
}
}).a;
});
}, function(e, t, n) {
var i = n(28), a = n(29), r = n(125)(!1), o = n(60)("IE_PROTO");
e.exports = function(e, t) {
var n, s = a(e), c = 0, l = [];
for (n in s) n != o && i(s, n) && l.push(n);
for (;t.length > c; ) i(s, n = t[c++]) && (~r(l, n) || l.push(n));
return l;
};
}, function(e, t, n) {
var i = n(35);
e.exports = Object("z").propertyIsEnumerable(0) ? Object : function(e) {
return "String" == i(e) ? e.split("") : Object(e);
};
}, function(e, t, n) {
var i = n(59), a = Math.min;
e.exports = function(e) {
return e > 0 ? a(i(e), 9007199254740991) : 0;
};
}, function(e, t, n) {
var i = n(11).document;
e.exports = i && i.documentElement;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.ImEventType = void 0;
var i, a = (0, ((i = n(16)) && i.__esModule ? i : {
default: i
}).default)(null);
a.PRIVATE_MESSAGE_RECEIVED = "PRIVATE_MESSAGE_RECEIVED", a.GROUP_MESSAGE_RECEIVED = "GROUP_MESSAGE_RECEIVED", 
a.SYSTEM_MESSAGE_RECEIVED = "SYSTEM_MESSAGE_RECEIVED", a.CONVERSATIONS_UPDATED = "CONVERSATIONS_UPDATED", 
a.CONNECTED = "CONNECTED", a.CONNECTING = "CONNECTING", a.DISCONNECTED = "DISCONNECTED", 
a.USER_PRESENCE = "USER_PRESENCE", a.GROUP_PRESENCE = "GROUP_PRESENCE", t.ImEventType = a;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.calibrator = void 0;
var i = o(n(20)), a = o(n(0)), r = o(n(1));
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
var s = new (function() {
function e() {
(0, a.default)(this, e);
}
return (0, r.default)(e, [ {
key: "isUndef",
value: function(e) {
return null == e;
}
}, {
key: "isTrue",
value: function(e) {
return !0 === e;
}
}, {
key: "isFalse",
value: function(e) {
return !1 === e;
}
}, {
key: "isPrimitive",
value: function(e) {
return "string" == typeof e || "number" == typeof e || "symbol" === (void 0 === e ? "undefined" : (0, 
i.default)(e)) || "boolean" == typeof e;
}
}, {
key: "isDef",
value: function(e) {
return null != e;
}
}, {
key: "isObject",
value: function(e) {
return null !== e && "object" === (void 0 === e ? "undefined" : (0, i.default)(e));
}
}, {
key: "isPlainObject",
value: function(e) {
return "[object Object]" === Object.prototype.toString.call(e);
}
}, {
key: "isRegExp",
value: function(e) {
return "[object RegExp]" === Object.prototype.toString.call(e);
}
}, {
key: "isValidArrayIndex",
value: function(e) {
var t = parseFloat(String(e));
return t >= 0 && Math.floor(t) === t && isFinite(e);
}
}, {
key: "isStringOrNumber",
value: function(e) {
return "string" == typeof e || "number" == typeof e;
}
}, {
key: "isString",
value: function(e) {
return "string" == typeof e;
}
}, {
key: "isNumber",
value: function(e) {
return "number" == typeof e;
}
}, {
key: "isArray",
value: function(e) {
return "[object Array]" == Object.prototype.toString.call(e);
}
}, {
key: "isEmpty",
value: function(e) {
return this.isArray(e) ? 0 == e.length : this.isObject(e) ? !this.isDef(e) : !this.isNumber(e) && (this.isString(e) ? "" == e.trim() : !this.isDef(e));
}
}, {
key: "isNative",
value: function(e) {
return "function" == typeof e && /native code/.test(e.toString());
}
}, {
key: "isFunction",
value: function(e) {
return "function" == typeof e;
}
} ]), e;
}())();
t.calibrator = s;
}, function(e, t, n) {
var i = n(133)(!0);
n(87)(String, "String", function(e) {
this._t = String(e), this._i = 0;
}, function() {
var e, t = this._t, n = this._i;
return n >= t.length ? {
value: void 0,
done: !0
} : (e = i(t, n), this._i += e.length, {
value: e,
done: !1
});
});
}, function(e, t, n) {
var i = n(36), a = n(17), r = n(88), o = n(27), s = n(37), c = n(134), l = n(46), u = n(89), d = n(12)("iterator"), h = !([].keys && "next" in [].keys()), f = function() {
return this;
};
e.exports = function(e, t, n, p, m, g, v) {
c(n, t, p);
var C, b, y, S = function(e) {
if (!h && e in A) return A[e];
switch (e) {
case "keys":
case "values":
return function() {
return new n(this, e);
};
}
return function() {
return new n(this, e);
};
}, _ = t + " Iterator", T = "values" == m, E = !1, A = e.prototype, I = A[d] || A["@@iterator"] || m && A[m], N = I || S(m), w = m ? T ? S("entries") : N : void 0, D = "Array" == t && A.entries || I;
if (D && (y = u(D.call(new e()))) !== Object.prototype && y.next && (l(y, _, !0), 
i || "function" == typeof y[d] || o(y, d, f)), T && I && "values" !== I.name && (E = !0, 
N = function() {
return I.call(this);
}), i && !v || !h && !E && A[d] || o(A, d, N), s[t] = N, s[_] = f, m) if (C = {
values: T ? N : S("values"),
keys: g ? N : S("keys"),
entries: w
}, v) for (b in C) b in A || r(A, b, C[b]); else a(a.P + a.F * (h || E), t, C);
return C;
};
}, function(e, t, n) {
e.exports = n(27);
}, function(e, t, n) {
var i = n(28), a = n(38), r = n(60)("IE_PROTO"), o = Object.prototype;
e.exports = Object.getPrototypeOf || function(e) {
return e = a(e), i(e, r) ? e[r] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? o : null;
};
}, function(e, t, n) {
n(135);
for (var i = n(11), a = n(27), r = n(37), o = n(12)("toStringTag"), s = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), c = 0; c < s.length; c++) {
var l = s[c], u = i[l], d = u && u.prototype;
d && !d[o] && a(d, o, l), r[l] = r.Array;
}
}, function(e, t, n) {
var i = n(80), a = n(62).concat("length", "prototype");
t.f = Object.getOwnPropertyNames || function(e) {
return i(e, a);
};
}, function() {}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.env = void 0;
var i = o(n(20)), a = o(n(0)), r = o(n(1));
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
var s = new (function() {
function e() {
(0, a.default)(this, e);
}
return (0, r.default)(e, [ {
key: "isWx",
value: function() {
return !("undefined" == typeof wx || !wx.getLocation || "undefined" == typeof GameGlobal && "function" == typeof WebSocket && "function" == typeof XMLHttpRequest);
}
}, {
key: "isUni",
value: function() {
return !("object" !== ("undefined" == typeof uni ? "undefined" : (0, i.default)(uni)) || !uni.getSystemInfo);
}
}, {
key: "isSupportHtmlPlus",
value: function() {
return !!("object" === ("undefined" == typeof plus ? "undefined" : (0, i.default)(plus)) && plus.navigator && plus.navigator.getUserAgent() && plus.navigator.getUserAgent().indexOf("Html5Plus") > -1);
}
}, {
key: "isTT",
value: function() {
return !("object" !== ("undefined" == typeof tt ? "undefined" : (0, i.default)(tt)) || !tt.getSystemInfo);
}
}, {
key: "isBrowserClient",
value: function() {
return this.isUni() ? "function" == typeof WebSocket && "function" == typeof XMLHttpRequest && "object" == ("undefined" == typeof localStorage ? "undefined" : (0, 
i.default)(localStorage)) : !(this.isReactNative() || this.isWx() || this.isTT());
}
}, {
key: "isReactNative",
value: function() {
return "undefined" != typeof navigator && "ReactNative" == navigator.product;
}
} ]), e;
}())();
t.env = s;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.GoEasyDomainNumber = void 0;
var i = c(n(0)), a = c(n(1)), r = n(93), o = n(158), s = c(n(159));
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
var l = function() {
function e() {
(0, i.default)(this, e);
}
return (0, a.default)(e, null, [ {
key: "refreshNumber",
value: function() {
var e = Math.floor(Math.random() * (s.default.maxNumber - 1) + 1);
return r.env.isBrowserClient() && (e = parseInt(o.storage.getData("goEasyNode")) || e), 
e > 0 && e < s.default.maxNumber ? e += 1 : e == s.default.maxNumber && (e = 1), 
r.env.isBrowserClient() && o.storage.setData("goEasyNode", e), e;
}
} ]), e;
}();
t.GoEasyDomainNumber = l;
}, function(e, t, n) {
var i = n(35), a = n(12)("toStringTag"), r = "Arguments" == i(function() {
return arguments;
}());
e.exports = function(e) {
var t, n, o;
return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof (n = function(e, t) {
try {
return e[t];
} catch (e) {}
}(t = Object(e), a)) ? n : r ? i(t) : "Object" == (o = i(t)) && "function" == typeof t.callee ? "Arguments" : o;
};
}, function(e, t, n) {
var i = n(18), a = n(43), r = n(12)("species");
e.exports = function(e, t) {
var n, o = i(e).constructor;
return void 0 === o || null == (n = i(o)[r]) ? t : a(n);
};
}, function(e, t, n) {
var i, a, r, o = n(33), s = n(167), c = n(83), l = n(55), u = n(11), d = u.process, h = u.setImmediate, f = u.clearImmediate, p = u.MessageChannel, m = u.Dispatch, g = 0, v = {}, C = function() {
var e = +this;
if (v.hasOwnProperty(e)) {
var t = v[e];
delete v[e], t();
}
}, b = function(e) {
C.call(e.data);
};
h && f || (h = function(e) {
for (var t = [], n = 1; arguments.length > n; ) t.push(arguments[n++]);
return v[++g] = function() {
s("function" == typeof e ? e : Function(e), t);
}, i(g), g;
}, f = function(e) {
delete v[e];
}, "process" == n(35)(d) ? i = function(e) {
d.nextTick(o(C, e, 1));
} : m && m.now ? i = function(e) {
m.now(o(C, e, 1));
} : p ? (r = (a = new p()).port2, a.port1.onmessage = b, i = o(r.postMessage, r, 1)) : u.addEventListener && "function" == typeof postMessage && !u.importScripts ? (i = function(e) {
u.postMessage(e + "", "*");
}, u.addEventListener("message", b, !1)) : i = "onreadystatechange" in l("script") ? function(e) {
c.appendChild(l("script")).onreadystatechange = function() {
c.removeChild(this), C.call(e);
};
} : function(e) {
setTimeout(o(C, e, 1), 0);
}), e.exports = {
set: h,
clear: f
};
}, function(e) {
e.exports = function(e) {
try {
return {
e: !1,
v: e()
};
} catch (e) {
return {
e: !0,
v: e
};
}
};
}, function(e, t, n) {
var i = n(18), a = n(23), r = n(68);
e.exports = function(e, t) {
if (i(e), a(t) && t.constructor === e) return t;
var n = r.f(e);
return (0, n.resolve)(t), n.promise;
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.Conversion = void 0;
var i = c(n(0)), a = c(n(1)), r = n(69), o = c(n(39)), s = c(n(48));
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
t.Conversion = function() {
function e() {
(0, i.default)(this, e), this.type = "", this.lastMessage = null, this.unread = 0, 
this.top = !1, this.data = null, this.lc = 0, this.lm = 0;
}
return (0, a.default)(e, null, [ {
key: "buildByInMessage",
value: function(t) {
var n = new e();
return n.type = t.t, n.lastMessage = s.default.assemble(t), n.lc = n.lastMessage.timestamp - 1, 
n.lm = n.lastMessage.timestamp, n.unread = 0, t.t == r.ConversationType.GROUP ? n.groupId = t.r : o.default.userId == t.r ? n.userId = t.s : n.userId = t.r, 
n;
}
}, {
key: "buildByOutMessage",
value: function(t, n, i) {
var a = new e();
return a.type = n, a.lastMessage = t, a.lm = a.lastMessage.timestamp, a.lc = a.lm, 
a.unread = 0, n == r.ConversationType.GROUP ? (a.groupId = i, a.lastMessage.groupId = i) : (a.userId = i, 
a.lastMessage.receiverId = i), a;
}
}, {
key: "buildByConversation",
value: function(t, n) {
var i = new e();
i.type = n.t, n.lmsg.t = n.t, i.lastMessage = s.default.assemble(n.lmsg), i.unread = 0, 
i.lc = n.lcts, i.lm = i.lastMessage.timestamp, i.top = n.top || !1;
var a = n.d ? JSON.parse(n.d) : {};
return i.data = a, n.t == r.ConversationType.GROUP ? (i.groupId = n.g, t.putGroupData(i.groupId, a)) : (i.userId = n.uid, 
t.putUserData(i.userId, a), o.default.userId == n.lmsg.s ? i.lastMessage.senderData = o.default.userData : i.lastMessage.senderData = a), 
i;
}
} ]), e;
}();
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = o(n(0)), a = o(n(1)), r = n(6);
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
var s = function() {
function e() {
(0, i.default)(this, e);
}
return (0, a.default)(e, null, [ {
key: "resolve",
value: function() {
return r.env.isUni() ? "uniApp" : r.env.isWx() ? "wx" : "html";
}
} ]), e;
}();
t.default = s;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = h(n(2)), a = h(n(0)), r = h(n(1)), o = h(n(3)), s = h(n(8)), c = h(n(4)), l = h(n(40)), u = h(n(9)), d = n(6);
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
var f = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
if (d.calibrator.isEmpty(e.text) || "" == e.text.trim()) throw Error("text is empty");
}
}, {
key: "setType",
value: function() {
this.type = u.default.text;
}
}, {
key: "setPayload",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e), 
this.payload.text = e.text;
}
} ]), t;
}(l.default);
t.default = f;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = u(n(0)), a = u(n(1)), r = u(n(41)), o = u(n(10)), s = u(n(197)), c = u(n(198)), l = n(6);
function u(e) {
return e && e.__esModule ? e : {
default: e
};
}
var d = function() {
function e() {
(0, i.default)(this, e), this.io = c.default, this.status = r.default.DISCONNECTED, 
this.permissions = [ o.default.NONE ], this.emitter = null, this.connectedObservers = [], 
this.disconnectedObservers = [], this.emitter = new s.default(this);
}
return (0, a.default)(e, [ {
key: "connect",
value: function() {
this.status = r.default.CONNECTING;
}
}, {
key: "emit",
value: function(e) {
this.emitter.emit(e);
}
}, {
key: "doEmit",
value: function() {}
}, {
key: "on",
value: function(e, t) {
this.io.on(e, t);
}
}, {
key: "disconnect",
value: function() {
this.io.disconnect();
}
}, {
key: "getStatus",
value: function() {
return this.status;
}
}, {
key: "addConnectedObserver",
value: function(e) {
l.calibrator.isFunction(e) && this.connectedObservers.push(e);
}
}, {
key: "addDisconnectedObserver",
value: function(e) {
l.calibrator.isFunction(e) && this.disconnectedObservers.push(e);
}
}, {
key: "notify",
value: function(e, t) {
for (var n = 0; n < e.length; n++) e[n](t);
}
} ]), e;
}();
t.default = d;
}, function(e) {
var t = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, n = [ "source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor" ];
e.exports = function(e) {
var i = e, a = e.indexOf("["), r = e.indexOf("]");
-1 != a && -1 != r && (e = e.substring(0, a) + e.substring(a, r).replace(/:/g, ";") + e.substring(r, e.length));
for (var o = t.exec(e || ""), s = {}, c = 14; c--; ) s[n[c]] = o[c] || "";
return -1 != a && -1 != r && (s.source = i, s.host = s.host.substring(1, s.host.length - 1).replace(/;/g, ":"), 
s.authority = s.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), 
s.ipv6uri = !0), s;
};
}, function(e) {
var t = {}.toString;
e.exports = Array.isArray || function(e) {
return "[object Array]" == t.call(e);
};
}, function(e, t, n) {
var i, a = (i = n(20)) && i.__esModule ? i : {
default: i
}, r = n(205), o = n(110), s = n(42), c = n(72), l = n(111), u = n(112), d = (n(53)("socket.io-client:manager"), 
n(109)), h = n(226), f = n(94).GoEasyDomainNumber, p = Object.prototype.hasOwnProperty;
function m(e, t) {
if (!(this instanceof m)) return new m(e, t);
e && "object" === (void 0 === e ? "undefined" : (0, a.default)(e)) && (t = e, e = void 0), 
(t = t || {}).path = t.path || "/socket.io", this.nsps = {}, this.subs = [], this.opts = t, 
this.reconnection(!1 !== t.reconnection), this.reconnectionAttempts(t.reconnectionAttempts || Infinity), 
this.reconnectionDelay(t.reconnectionDelay || 1e3), this.reconnectionDelayMax(t.reconnectionDelayMax || 5e3), 
this.randomizationFactor(t.randomizationFactor || .5), this.backoff = new h({
min: this.reconnectionDelay(),
max: this.reconnectionDelayMax(),
jitter: this.randomizationFactor()
}), this.timeout(null == t.timeout ? 2e4 : t.timeout), this.readyState = "closed", 
this.uri = e, this.connecting = [], this.lastPing = null, this.encoding = !1, this.packetBuffer = [];
var n = t.parser || c;
this.encoder = new n.Encoder(), this.decoder = new n.Decoder(), this.autoConnect = !1 !== t.autoConnect, 
this.autoConnect && this.open();
}
function g() {
var e = !1;
return "object" === ("undefined" == typeof uni ? "undefined" : (0, a.default)(uni)) && uni.getSystemInfo && (e = !0), 
e && !0 === getApp().uniAppRunningBackend;
}
e.exports = m, m.prototype.emitAll = function() {
for (var e in this.emit.apply(this, arguments), this.nsps) p.call(this.nsps, e) && this.nsps[e].emit.apply(this.nsps[e], arguments);
}, m.prototype.updateSocketIds = function() {
for (var e in this.nsps) p.call(this.nsps, e) && (this.nsps[e].id = this.generateId(e));
}, m.prototype.generateId = function(e) {
return ("/" === e ? "" : e + "#") + this.engine.id;
}, s(m.prototype), m.prototype.reconnection = function(e) {
return arguments.length ? (this._reconnection = !!e, this) : this._reconnection;
}, m.prototype.reconnectionAttempts = function(e) {
return arguments.length ? (this._reconnectionAttempts = e, this) : this._reconnectionAttempts;
}, m.prototype.reconnectionDelay = function(e) {
return arguments.length ? (this._reconnectionDelay = e, this.backoff && this.backoff.setMin(e), 
this) : this._reconnectionDelay;
}, m.prototype.randomizationFactor = function(e) {
return arguments.length ? (this._randomizationFactor = e, this.backoff && this.backoff.setJitter(e), 
this) : this._randomizationFactor;
}, m.prototype.reconnectionDelayMax = function(e) {
return arguments.length ? (this._reconnectionDelayMax = e, this.backoff && this.backoff.setMax(e), 
this) : this._reconnectionDelayMax;
}, m.prototype.timeout = function(e) {
return arguments.length ? (this._timeout = e, this) : this._timeout;
}, m.prototype.maybeReconnectOnOpen = function() {
!this.reconnecting && this._reconnection && 0 === this.backoff.attempts && this.reconnect();
}, m.prototype.open = m.prototype.connect = function(e) {
if (this.readyState, ~this.readyState.indexOf("open")) return this;
this.uri, this.engine = r(this.uri, this.opts);
var t = this.engine, n = this;
this.readyState = "opening", this.skipReconnect = !1;
var i = l(t, "open", function() {
n.onopen(), e && e();
}), a = l(t, "error", function(t) {
if ("undefined" != typeof window) {
var i = parseInt(n.uri.match(/[1-9][0-9]*/g)[0]), a = f.refreshNumber();
n.uri = n.uri.replace(i, a);
}
if (n.cleanup(), n.readyState = "closed", n.emitAll("connect_error", t), e) {
var r = new Error("Connection error");
r.data = t, e(r);
} else n.maybeReconnectOnOpen();
});
if (!1 !== this._timeout) {
var o = this._timeout, s = setTimeout(function() {
i.destroy(), t.close(), t.emit("error", "timeout"), n.emitAll("connect_timeout", o);
}, o);
this.subs.push({
destroy: function() {
clearTimeout(s);
}
});
}
return this.subs.push(i), this.subs.push(a), this;
}, m.prototype.onopen = function() {
this.cleanup(), this.readyState = "open", this.emit("open");
var e = this.engine;
this.subs.push(l(e, "data", u(this, "ondata"))), this.subs.push(l(e, "ping", u(this, "onping"))), 
this.subs.push(l(e, "pong", u(this, "onpong"))), this.subs.push(l(e, "error", u(this, "onerror"))), 
this.subs.push(l(e, "close", u(this, "onclose"))), this.subs.push(l(this.decoder, "decoded", u(this, "ondecoded")));
}, m.prototype.onping = function() {
this.lastPing = new Date(), this.emitAll("ping");
}, m.prototype.onpong = function() {
this.emitAll("pong", new Date() - this.lastPing);
}, m.prototype.ondata = function(e) {
this.decoder.add(e);
}, m.prototype.ondecoded = function(e) {
this.emit("packet", e);
}, m.prototype.onerror = function(e) {
this.emitAll("error", e);
}, m.prototype.socket = function(e, t) {
var n = this.nsps[e];
if (!n) {
n = new o(this, e, t), this.nsps[e] = n;
var i = this;
n.on("connecting", a), n.on("connect", function() {
n.id = i.generateId(e);
}), this.autoConnect && a();
}
function a() {
~d(i.connecting, n) || i.connecting.push(n);
}
return n;
}, m.prototype.destroy = function(e) {
var t = d(this.connecting, e);
~t && this.connecting.splice(t, 1), this.connecting.length || this.close();
}, m.prototype.packet = function(e) {
var t = this;
e.query && 0 === e.type && (e.nsp += "?" + e.query), t.encoding ? t.packetBuffer.push(e) : (t.encoding = !0, 
this.encoder.encode(e, function(n) {
for (var i = 0; i < n.length; i++) t.engine.write(n[i], e.options);
t.encoding = !1, t.processPacketQueue();
}));
}, m.prototype.processPacketQueue = function() {
if (this.packetBuffer.length > 0 && !this.encoding) {
var e = this.packetBuffer.shift();
this.packet(e);
}
}, m.prototype.cleanup = function() {
for (var e = this.subs.length, t = 0; t < e; t++) this.subs.shift().destroy();
this.packetBuffer = [], this.encoding = !1, this.lastPing = null, this.decoder.destroy();
}, m.prototype.close = m.prototype.disconnect = function() {
this.skipReconnect = !0, this.reconnecting = !1, "opening" === this.readyState && this.cleanup(), 
this.backoff.reset(), this.readyState = "closed", this.engine && this.engine.close();
}, m.prototype.onclose = function(e) {
this.cleanup(), this.backoff.reset(), this.readyState = "closed", this.emit("close", e), 
this._reconnection && !this.skipReconnect && this.reconnect();
}, m.prototype.reconnect = function() {
if (g(), this.reconnecting || this.skipReconnect) return this;
var e = this;
if (this.backoff.attempts >= this._reconnectionAttempts) this.backoff.reset(), this.emitAll("reconnect_failed"), 
this.reconnecting = !1; else {
var t = this.backoff.duration();
this.reconnecting = !0;
var n = setTimeout(function() {
e.skipReconnect || (e.emitAll("reconnect_attempt", e.backoff.attempts), e.emitAll("reconnecting", e.backoff.attempts), 
e.skipReconnect || (g() ? (e.reconnecting = !1, e.reconnect(), e.emitAll("reconnect_error", "Uniapp running backend, skipped reconnect...")) : e.open(function(t) {
t ? (e.reconnecting = !1, e.reconnect(), e.emitAll("reconnect_error", t.data)) : e.onreconnect();
})));
}, t);
this.subs.push({
destroy: function() {
clearTimeout(n);
}
});
}
}, m.prototype.onreconnect = function() {
var e = this.backoff.attempts;
this.reconnecting = !1, this.backoff.reset(), this.updateSocketIds(), this.emitAll("reconnect", e);
};
}, function(e, t, n) {
var i = n(209), a = n(222);
t.polling = function(e) {
var t = !1, n = !1;
e.jsonp;
if ("undefined" != typeof location) {
var a = "https:" === location.protocol, r = location.port;
r || (r = a ? 443 : 80), t = e.hostname !== location.hostname || r !== e.port, n = e.secure !== a;
}
return e.xdomain = t, e.xscheme = n, new i(e);
}, t.websocket = a;
}, function(e) {
var t, n = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""), i = 64, a = {}, r = 0, o = 0;
function s(e) {
var t = "";
do {
t = n[e % i] + t, e = Math.floor(e / i);
} while (e > 0);
return t;
}
function c() {
var e = s(+new Date());
return e !== t ? (r = 0, t = e) : e + "." + s(r++);
}
for (;o < i; o++) a[n[o]] = o;
c.encode = s, c.decode = function(e) {
var t = 0;
for (o = 0; o < e.length; o++) t = t * i + a[e.charAt(o)];
return t;
}, e.exports = c;
}, function(e) {
var t = [].indexOf;
e.exports = function(e, n) {
if (t) return e.indexOf(n);
for (var i = 0; i < e.length; ++i) if (e[i] === n) return i;
return -1;
};
}, function(e, t, n) {
var i, a = (i = n(20)) && i.__esModule ? i : {
default: i
}, r = n(72), o = n(42), s = n(224), c = n(111), l = n(112), u = (n(53)("socket.io-client:socket"), 
n(54)), d = n(225);
e.exports = p;
var h = {
connect: 1,
connect_error: 1,
connect_timeout: 1,
connecting: 1,
disconnect: 1,
error: 1,
reconnect: 1,
reconnect_attempt: 1,
reconnect_failed: 1,
reconnect_error: 1,
reconnecting: 1,
ping: 1,
pong: 1
}, f = o.prototype.emit;
function p(e, t, n) {
this.io = e, this.nsp = t, this.json = this, this.ids = 0, this.acks = {}, this.receiveBuffer = [], 
this.sendBuffer = [], this.connected = !1, this.disconnected = !0, this.flags = {}, 
n && n.query && (this.query = n.query), this.io.autoConnect && this.open();
}
o(p.prototype), p.prototype.subEvents = function() {
if (!this.subs) {
var e = this.io;
this.subs = [ c(e, "open", l(this, "onopen")), c(e, "packet", l(this, "onpacket")), c(e, "close", l(this, "onclose")) ];
}
}, p.prototype.open = p.prototype.connect = function() {
return this.connected ? this : (this.subEvents(), this.io.open(), "open" === this.io.readyState && this.onopen(), 
this.emit("connecting"), this);
}, p.prototype.send = function() {
var e = s(arguments);
return e.unshift("message"), this.emit.apply(this, e), this;
}, p.prototype.emit = function(e) {
if (h.hasOwnProperty(e)) return f.apply(this, arguments), this;
var t = s(arguments), n = {
type: (void 0 !== this.flags.binary ? this.flags.binary : d(t)) ? r.BINARY_EVENT : r.EVENT,
data: t,
options: {}
};
return n.options.compress = !this.flags || !1 !== this.flags.compress, "function" == typeof t[t.length - 1] && (this.ids, 
this.acks[this.ids] = t.pop(), n.id = this.ids++), this.connected ? this.packet(n) : this.sendBuffer.push(n), 
this.flags = {}, this;
}, p.prototype.packet = function(e) {
e.nsp = this.nsp, this.io.packet(e);
}, p.prototype.onopen = function() {
if ("/" !== this.nsp) if (this.query) {
var e = "object" === (0, a.default)(this.query) ? u.encode(this.query) : this.query;
this.packet({
type: r.CONNECT,
query: e
});
} else this.packet({
type: r.CONNECT
});
}, p.prototype.onclose = function(e) {
this.connected = !1, this.disconnected = !0, delete this.id, this.emit("disconnect", e);
}, p.prototype.onpacket = function(e) {
var t = e.nsp === this.nsp, n = e.type === r.ERROR && "/" === e.nsp;
if (t || n) switch (e.type) {
case r.CONNECT:
this.onconnect();
break;

case r.EVENT:
case r.BINARY_EVENT:
this.onevent(e);
break;

case r.ACK:
case r.BINARY_ACK:
this.onack(e);
break;

case r.DISCONNECT:
this.ondisconnect();
break;

case r.ERROR:
this.emit("error", e.data);
}
}, p.prototype.onevent = function(e) {
var t = e.data || [];
null != e.id && t.push(this.ack(e.id)), this.connected ? f.apply(this, t) : this.receiveBuffer.push(t);
}, p.prototype.ack = function(e) {
var t = this, n = !1;
return function() {
if (!n) {
n = !0;
var i = s(arguments);
t.packet({
type: d(i) ? r.BINARY_ACK : r.ACK,
id: e,
data: i
});
}
};
}, p.prototype.onack = function(e) {
var t = this.acks[e.id];
"function" == typeof t ? (e.id, e.data, t.apply(this, e.data), delete this.acks[e.id]) : e.id;
}, p.prototype.onconnect = function() {
this.connected = !0, this.disconnected = !1, this.emit("connect"), this.emitBuffered();
}, p.prototype.emitBuffered = function() {
var e;
for (e = 0; e < this.receiveBuffer.length; e++) f.apply(this, this.receiveBuffer[e]);
for (this.receiveBuffer = [], e = 0; e < this.sendBuffer.length; e++) this.packet(this.sendBuffer[e]);
this.sendBuffer = [];
}, p.prototype.ondisconnect = function() {
this.nsp, this.destroy(), this.onclose("io server disconnect");
}, p.prototype.destroy = function() {
if (this.subs) {
for (var e = 0; e < this.subs.length; e++) this.subs[e].destroy();
this.subs = null;
}
this.io.destroy(this);
}, p.prototype.close = p.prototype.disconnect = function() {
return this.connected && (this.nsp, this.packet({
type: r.DISCONNECT
})), this.destroy(), this.connected && this.onclose("io client disconnect"), this;
}, p.prototype.compress = function(e) {
return this.flags.compress = e, this;
}, p.prototype.binary = function(e) {
return this.flags.binary = e, this;
};
}, function(e) {
e.exports = function(e, t, n) {
return e.on(t, n), {
destroy: function() {
e.removeListener(t, n);
}
};
};
}, function(e) {
var t = [].slice;
e.exports = function(e, n) {
if ("string" == typeof n && (n = e[n]), "function" != typeof n) throw new Error("bind() requires a function");
var i = t.call(arguments, 2);
return function() {
return n.apply(e, i.concat(t.call(arguments)));
};
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.uniApp = void 0;
var i = o(n(0)), a = o(n(1)), r = n(6);
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
var s = new (function() {
function e() {
(0, i.default)(this, e), this.overrided = !1;
}
return (0, a.default)(e, [ {
key: "overrideUniShowHideMethods",
value: function() {
if (r.env.isUni() && !this.overrided && getApp() && "undefined" != typeof getApp().$options) {
this.overrided = !0;
var e = getApp().$options;
if ("undefined" != typeof e.onShow) {
var t = e.onShow[0];
e.onShow[0] = function() {
getApp().uniAppRunningBackend = !1, t && t.call(e);
};
}
if ("undefined" != typeof e.onHide) {
var n = e.onHide[0];
e.onHide[0] = function() {
getApp().uniAppRunningBackend = !0, n && n.call(e);
};
}
}
}
}, {
key: "runningBackend",
value: function() {
return getApp().uniAppRunningBackend;
}
} ]), e;
}())();
t.uniApp = s;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = r(n(0)), a = r(n(1));
function r(e) {
return e && e.__esModule ? e : {
default: e
};
}
var o = function() {
function e() {
(0, i.default)(this, e);
}
return (0, a.default)(e, [ {
key: "build",
value: function() {
throw Error("Not implementation yet.");
}
} ]), e;
}();
t.default = o;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = h(n(5)), a = h(n(2)), r = h(n(0)), o = h(n(1)), s = h(n(3)), c = h(n(4)), l = h(n(116)), u = h(n(9)), d = h(n(117));
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
var f = function(e) {
function t(e) {
(0, r.default)(this, t);
var n = (0, s.default)(this, (t.__proto__ || (0, a.default)(t)).call(this));
return n.im = null, n.goEasyUploader = new d.default(e), n;
}
return (0, c.default)(t, e), (0, o.default)(t, [ {
key: "build",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
var a = new l.default();
t.upload(e).then(function(t) {
var i = t.content, r = void 0 === i ? {} : i;
(a = e.payload).url = r.url, a.name = r.newFileName, n(a);
}).catch(function(e) {
i(e);
});
});
}
}, {
key: "upload",
value: function(e) {
var t = e.type == u.default.video ? e.payload.video.name : e.payload.name;
return this.goEasyUploader.upload(e.file, t, e.onProgress);
}
} ]), t;
}(h(n(114)).default);
t.default = f;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i, a = (i = n(0)) && i.__esModule ? i : {
default: i
};
t.default = function e() {
(0, a.default)(this, e);
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = c(n(5)), a = c(n(0)), r = c(n(1)), o = n(237), s = c(n(241));
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
var l = function() {
function e(t) {
(0, a.default)(this, e), this.requestBuilder = null, this.fileUploader = o.fileUploader, 
this.requestBuilder = new s.default(t);
}
return (0, r.default)(e, [ {
key: "upload",
value: function(e, t, n) {
var a = this;
return new i.default(function(i, r) {
a.requestBuilder.build(e, t).then(function(e) {
i(a.doUpload(e, n));
}).catch(function(e) {
r(e);
});
});
}
}, {
key: "customizeUpload",
value: function(e, t) {
this.doUpload(e, t);
}
}, {
key: "doUpload",
value: function(e, t) {
return this.fileUploader.upload(e, t);
}
} ]), e;
}();
t.default = l;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i, a = (i = n(0)) && i.__esModule ? i : {
default: i
};
t.default = function e(t, n, i, r, o) {
(0, a.default)(this, e), this.host = "", this.headers = {}, this.parameters = {}, 
this.file = {}, this.payload = {}, this.host = t, this.headers = n, this.parameters = i, 
this.file = r, this.payload = o;
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = r(n(0)), a = r(n(1));
function r(e) {
return e && e.__esModule ? e : {
default: e
};
}
var o = function() {
function e() {
(0, i.default)(this, e);
}
return (0, a.default)(e, [ {
key: "build",
value: function() {}
}, {
key: "newFileName",
value: function(e) {
return e && e.newFilename || "";
}
} ]), e;
}();
t.default = o;
}, function(e, t, n) {
var i = r(n(121)), a = r(n(257));
function r(e) {
return e && e.__esModule ? e : {
default: e
};
}
i.default.version = a.default.version, e.exports = i.default;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = u(n(16)), a = u(n(0)), r = u(n(1)), o = n(24), s = u(n(39)), c = n(6), l = n(26);
function u(e) {
return e && e.__esModule ? e : {
default: e
};
}
var d = null, h = function() {
function e() {
if ((0, a.default)(this, e), !(this instanceof e && d && d._appKey && d._host)) throw Error("please call getInstance to structure instance.");
}
return (0, r.default)(e, [ {
key: "on",
value: function(e, t) {
d.on(e, t);
}
}, {
key: "connect",
value: function(e) {
return d.connect(e);
}
}, {
key: "disconnect",
value: function() {
return d.disconnect();
}
}, {
key: "getStatus",
value: function() {
return d.getStatus();
}
}, {
key: "createTextMessage",
value: function(e) {
return d.createTextMessage(e);
}
}, {
key: "createImageMessage",
value: function(e) {
return d.createImageMessage(e);
}
}, {
key: "createFileMessage",
value: function(e) {
return d.createFileMessage(e);
}
}, {
key: "createAudioMessage",
value: function(e) {
return d.createAudioMessage(e);
}
}, {
key: "createVideoMessage",
value: function(e) {
return d.createVideoMessage(e);
}
}, {
key: "createCustomMessage",
value: function(e) {
return d.createCustomMessage(e);
}
}, {
key: "latestConversations",
value: function() {
return d.latestConversations();
}
}, {
key: "removePrivateConversation",
value: function(e) {
return d.removePrivateConversation(e);
}
}, {
key: "removeGroupConversation",
value: function(e) {
return d.removeGroupConversation(e);
}
}, {
key: "history",
value: function(e) {
return d.history(e);
}
}, {
key: "upload",
value: function(e, t, n) {
return d.upload(e, t, n);
}
}, {
key: "sendMessage",
value: function(e) {
return d.sendMessage(e);
}
}, {
key: "markGroupMessageAsRead",
value: function(e, t) {
return d.groupMarkAsRead(e, t);
}
}, {
key: "markPrivateMessageAsRead",
value: function(e, t) {
return d.privateMarkAsRead(e, t);
}
}, {
key: "topPrivateConversation",
value: function(e, t) {
return d.topPrivateConversation(e, t);
}
}, {
key: "topGroupConversation",
value: function(e, t) {
return d.topGroupConversation(e, t);
}
}, {
key: "subscribeUserPresence",
value: function(e) {
return d.subscribeUserPresence(e);
}
}, {
key: "unsubscribeUserPresence",
value: function(e) {
return d.unsubscribeUserPresence(e);
}
}, {
key: "hereNow",
value: function(e) {
return d.hereNow(e);
}
}, {
key: "subscribeGroup",
value: function(e) {
return d.subscribeGroup(e);
}
}, {
key: "unsubscribeGroup",
value: function(e) {
return d.unsubscribeGroup(e);
}
}, {
key: "subscribeGroupPresence",
value: function(e) {
return d.subscribeGroupPresence(e);
}
}, {
key: "unsubscribeGroupPresence",
value: function(e) {
return d.unsubscribeGroupPresence(e);
}
}, {
key: "groupHereNow",
value: function(e) {
return d.groupHereNow(e);
}
}, {
key: "groupOnlineCount",
value: function(e) {
return d.groupOnlineCount(e);
}
} ], [ {
key: "getInstance",
value: function(t) {
var n = "";
if (!c.calibrator.isObject(t)) throw n = "options is require an object.", Error(n);
if (!c.calibrator.isPrimitive(t.appkey) || 0 == t.appkey.length) throw n = "Invalid options: 'appkey' is empty.", 
Error(n);
if (!c.calibrator.isPrimitive(t.host) || 0 == t.host.length) throw n = "Invalid options:'host' is empty.", 
Error(n);
return null == e.goEasyIM && (s.default.version = e.version, d = new s.default(t), 
this.goEasyIM = new e()), this.goEasyIM;
}
} ]), e;
}();
h.goEasyIM = null, h.EVENT = (0, i.default)(o.ImEventType), h.SCENE = (0, i.default)(l.ConversationType), 
t.default = h;
}, function(e, t, n) {
n(123);
var i = n(7).Object;
e.exports = function(e, t) {
return i.create(e, t);
};
}, function(e, t, n) {
var i = n(17);
i(i.S, "Object", {
create: n(57)
});
}, function(e, t, n) {
var i = n(22), a = n(18), r = n(34);
e.exports = n(19) ? Object.defineProperties : function(e, t) {
a(e);
for (var n, o = r(t), s = o.length, c = 0; s > c; ) i.f(e, n = o[c++], t[n]);
return e;
};
}, function(e, t, n) {
var i = n(29), a = n(82), r = n(126);
e.exports = function(e) {
return function(t, n, o) {
var s, c = i(t), l = a(c.length), u = r(o, l);
if (e && n != n) {
for (;l > u; ) if ((s = c[u++]) != s) return !0;
} else for (;l > u; u++) if ((e || u in c) && c[u] === n) return e || u || 0;
return !e && -1;
};
};
}, function(e, t, n) {
var i = n(59), a = Math.max, r = Math.min;
e.exports = function(e, t) {
return (e = i(e)) < 0 ? a(e + t, 0) : r(e, t);
};
}, function(e, t, n) {
e.exports = {
default: n(128),
__esModule: !0
};
}, function(e, t, n) {
n(129);
var i = n(7).Object;
e.exports = function(e, t, n) {
return i.defineProperty(e, t, n);
};
}, function(e, t, n) {
var i = n(17);
i(i.S + i.F * !n(19), "Object", {
defineProperty: n(22).f
});
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.eventCenter = void 0;
var i = c(n(16)), a = c(n(0)), r = c(n(1)), o = n(84), s = n(6);
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
var l = new (function() {
function e() {
(0, a.default)(this, e), this.subs = null, this.subs = (0, i.default)(null);
}
return (0, r.default)(e, [ {
key: "on",
value: function(e, t) {
if (!s.calibrator.isString(e)) throw Error("eventType require a string.");
if (!s.calibrator.isDef(o.ImEventType[e])) throw Error("event not found.");
if (!s.calibrator.isFunction(t)) throw Error("event require a callback.");
this.subs[e] = t;
}
}, {
key: "notify",
value: function(e, t) {
var n = this.subs[e];
n && n(t);
}
} ]), e;
}())();
t.eventCenter = l;
}, function(e, t, n) {
e.exports = {
default: n(132),
__esModule: !0
};
}, function(e, t, n) {
n(86), n(90), e.exports = n(63).f("iterator");
}, function(e, t, n) {
var i = n(59), a = n(58);
e.exports = function(e) {
return function(t, n) {
var r, o, s = String(a(t)), c = i(n), l = s.length;
return c < 0 || c >= l ? e ? "" : void 0 : (r = s.charCodeAt(c)) < 55296 || r > 56319 || c + 1 === l || (o = s.charCodeAt(c + 1)) < 56320 || o > 57343 ? e ? s.charAt(c) : r : e ? s.slice(c, c + 2) : o - 56320 + (r - 55296 << 10) + 65536;
};
};
}, function(e, t, n) {
var i = n(57), a = n(44), r = n(46), o = {};
n(27)(o, n(12)("iterator"), function() {
return this;
}), e.exports = function(e, t, n) {
e.prototype = i(o, {
next: a(1, n)
}), r(e, t + " Iterator");
};
}, function(e, t, n) {
var i = n(136), a = n(137), r = n(37), o = n(29);
e.exports = n(87)(Array, "Array", function(e, t) {
this._t = o(e), this._i = 0, this._k = t;
}, function() {
var e = this._t, t = this._k, n = this._i++;
return !e || n >= e.length ? (this._t = void 0, a(1)) : a(0, "keys" == t ? n : "values" == t ? e[n] : [ n, e[n] ]);
}, "values"), r.Arguments = r.Array, i("keys"), i("values"), i("entries");
}, function(e) {
e.exports = function() {};
}, function(e) {
e.exports = function(e, t) {
return {
value: t,
done: !!e
};
};
}, function(e, t, n) {
e.exports = {
default: n(139),
__esModule: !0
};
}, function(e, t, n) {
n(140), n(92), n(145), n(146), e.exports = n(7).Symbol;
}, function(e, t, n) {
var i = n(11), a = n(28), r = n(19), o = n(17), s = n(88), c = n(141).KEY, l = n(30), u = n(61), d = n(46), h = n(45), f = n(12), p = n(63), m = n(64), g = n(142), v = n(143), C = n(18), b = n(23), y = n(38), S = n(29), _ = n(56), T = n(44), E = n(57), A = n(144), I = n(66), N = n(65), w = n(22), D = n(34), P = I.f, M = w.f, x = A.f, O = i.Symbol, G = i.JSON, R = G && G.stringify, k = f("_hidden"), L = f("toPrimitive"), B = {}.propertyIsEnumerable, F = u("symbol-registry"), U = u("symbols"), H = u("op-symbols"), z = Object.prototype, j = "function" == typeof O && !!N.f, W = i.QObject, q = !W || !W.prototype || !W.prototype.findChild, Y = r && l(function() {
return 7 != E(M({}, "a", {
get: function() {
return M(this, "a", {
value: 7
}).a;
}
})).a;
}) ? function(e, t, n) {
var i = P(z, t);
i && delete z[t], M(e, t, n), i && e !== z && M(z, t, i);
} : M, J = function(e) {
var t = U[e] = E(O.prototype);
return t._k = e, t;
}, V = j && "symbol" == typeof O.iterator ? function(e) {
return "symbol" == typeof e;
} : function(e) {
return e instanceof O;
}, K = function e(t, n, i) {
return t === z && e(H, n, i), C(t), n = _(n, !0), C(i), a(U, n) ? (i.enumerable ? (a(t, k) && t[k][n] && (t[k][n] = !1), 
i = E(i, {
enumerable: T(0, !1)
})) : (a(t, k) || M(t, k, T(1, {})), t[k][n] = !0), Y(t, n, i)) : M(t, n, i);
}, Z = function(e, t) {
C(e);
for (var n, i = g(t = S(t)), a = 0, r = i.length; r > a; ) K(e, n = i[a++], t[n]);
return e;
}, Q = function(e) {
var t = B.call(this, e = _(e, !0));
return !(this === z && a(U, e) && !a(H, e)) && (!(t || !a(this, e) || !a(U, e) || a(this, k) && this[k][e]) || t);
}, X = function(e, t) {
if (e = S(e), t = _(t, !0), e !== z || !a(U, t) || a(H, t)) {
var n = P(e, t);
return !n || !a(U, t) || a(e, k) && e[k][t] || (n.enumerable = !0), n;
}
}, $ = function(e) {
for (var t, n = x(S(e)), i = [], r = 0; n.length > r; ) a(U, t = n[r++]) || t == k || t == c || i.push(t);
return i;
}, ee = function(e) {
for (var t, n = e === z, i = x(n ? H : S(e)), r = [], o = 0; i.length > o; ) !a(U, t = i[o++]) || n && !a(z, t) || r.push(U[t]);
return r;
};
j || (s((O = function() {
if (this instanceof O) throw TypeError("Symbol is not a constructor!");
var e = h(arguments.length > 0 ? arguments[0] : void 0), t = function t(n) {
this === z && t.call(H, n), a(this, k) && a(this[k], e) && (this[k][e] = !1), Y(this, e, T(1, n));
};
return r && q && Y(z, e, {
configurable: !0,
set: t
}), J(e);
}).prototype, "toString", function() {
return this._k;
}), I.f = X, w.f = K, n(91).f = A.f = $, n(47).f = Q, N.f = ee, r && !n(36) && s(z, "propertyIsEnumerable", Q, !0), 
p.f = function(e) {
return J(f(e));
}), o(o.G + o.W + o.F * !j, {
Symbol: O
});
for (var te = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), ne = 0; te.length > ne; ) f(te[ne++]);
for (var ie = D(f.store), ae = 0; ie.length > ae; ) m(ie[ae++]);
o(o.S + o.F * !j, "Symbol", {
for: function(e) {
return a(F, e += "") ? F[e] : F[e] = O(e);
},
keyFor: function(e) {
if (!V(e)) throw TypeError(e + " is not a symbol!");
for (var t in F) if (F[t] === e) return t;
},
useSetter: function() {
q = !0;
},
useSimple: function() {
q = !1;
}
}), o(o.S + o.F * !j, "Object", {
create: function(e, t) {
return void 0 === t ? E(e) : Z(E(e), t);
},
defineProperty: K,
defineProperties: Z,
getOwnPropertyDescriptor: X,
getOwnPropertyNames: $,
getOwnPropertySymbols: ee
});
var re = l(function() {
N.f(1);
});
o(o.S + o.F * re, "Object", {
getOwnPropertySymbols: function(e) {
return N.f(y(e));
}
}), G && o(o.S + o.F * (!j || l(function() {
var e = O();
return "[null]" != R([ e ]) || "{}" != R({
a: e
}) || "{}" != R(Object(e));
})), "JSON", {
stringify: function(e) {
for (var t, n, i = [ e ], a = 1; arguments.length > a; ) i.push(arguments[a++]);
if (n = t = i[1], (b(t) || void 0 !== e) && !V(e)) return v(t) || (t = function(e, t) {
if ("function" == typeof n && (t = n.call(this, e, t)), !V(t)) return t;
}), i[1] = t, R.apply(G, i);
}
}), O.prototype[L] || n(27)(O.prototype, L, O.prototype.valueOf), d(O, "Symbol"), 
d(Math, "Math", !0), d(i.JSON, "JSON", !0);
}, function(e, t, n) {
var i = n(45)("meta"), a = n(23), r = n(28), o = n(22).f, s = 0, c = Object.isExtensible || function() {
return !0;
}, l = !n(30)(function() {
return c(Object.preventExtensions({}));
}), u = function(e) {
o(e, i, {
value: {
i: "O" + ++s,
w: {}
}
});
}, d = e.exports = {
KEY: i,
NEED: !1,
fastKey: function(e, t) {
if (!a(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
if (!r(e, i)) {
if (!c(e)) return "F";
if (!t) return "E";
u(e);
}
return e[i].i;
},
getWeak: function(e, t) {
if (!r(e, i)) {
if (!c(e)) return !0;
if (!t) return !1;
u(e);
}
return e[i].w;
},
onFreeze: function(e) {
return l && d.NEED && c(e) && !r(e, i) && u(e), e;
}
};
}, function(e, t, n) {
var i = n(34), a = n(65), r = n(47);
e.exports = function(e) {
var t = i(e), n = a.f;
if (n) for (var o, s = n(e), c = r.f, l = 0; s.length > l; ) c.call(e, o = s[l++]) && t.push(o);
return t;
};
}, function(e, t, n) {
var i = n(35);
e.exports = Array.isArray || function(e) {
return "Array" == i(e);
};
}, function(e, t, n) {
var i = n(29), a = n(91).f, r = {}.toString, o = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
e.exports.f = function(e) {
return o && "[object Window]" == r.call(e) ? function(e) {
try {
return a(e);
} catch (e) {
return o.slice();
}
}(e) : a(i(e));
};
}, function(e, t, n) {
n(64)("asyncIterator");
}, function(e, t, n) {
n(64)("observable");
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.UUID = void 0;
var i = o(n(0)), a = o(n(1)), r = o(n(148));
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
var s = function() {
function e() {
(0, i.default)(this, e);
}
return (0, a.default)(e, null, [ {
key: "get",
value: function() {
return (0, r.default)().replace(/-/g, "");
}
} ]), e;
}();
t.UUID = s;
}, function(e, t, n) {
var i, a, r = n(149), o = n(150), s = 0, c = 0;
e.exports = function(e, t, n) {
var l = t && n || 0, u = t || [], d = (e = e || {}).node || i, h = void 0 !== e.clockseq ? e.clockseq : a;
if (null == d || null == h) {
var f = r();
null == d && (d = i = [ 1 | f[0], f[1], f[2], f[3], f[4], f[5] ]), null == h && (h = a = 16383 & (f[6] << 8 | f[7]));
}
var p = void 0 !== e.msecs ? e.msecs : new Date().getTime(), m = void 0 !== e.nsecs ? e.nsecs : c + 1, g = p - s + (m - c) / 1e4;
if (g < 0 && void 0 === e.clockseq && (h = h + 1 & 16383), (g < 0 || p > s) && void 0 === e.nsecs && (m = 0), 
m >= 1e4) throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");
s = p, c = m, a = h;
var v = (1e4 * (268435455 & (p += 122192928e5)) + m) % 4294967296;
u[l++] = v >>> 24 & 255, u[l++] = v >>> 16 & 255, u[l++] = v >>> 8 & 255, u[l++] = 255 & v;
var C = p / 4294967296 * 1e4 & 268435455;
u[l++] = C >>> 8 & 255, u[l++] = 255 & C, u[l++] = C >>> 24 & 15 | 16, u[l++] = C >>> 16 & 255, 
u[l++] = h >>> 8 | 128, u[l++] = 255 & h;
for (var b = 0; b < 6; ++b) u[l + b] = d[b];
return t || o(u);
};
}, function(e) {
var t = "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof window.msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto);
if (t) {
var n = new Uint8Array(16);
e.exports = function() {
return t(n), n;
};
} else {
var i = new Array(16);
e.exports = function() {
for (var e, t = 0; t < 16; t++) 0 == (3 & t) && (e = 4294967296 * Math.random()), 
i[t] = e >>> ((3 & t) << 3) & 255;
return i;
};
}
}, function(e) {
for (var t = [], n = 0; n < 256; ++n) t[n] = (n + 256).toString(16).substr(1);
e.exports = function(e, n) {
var i = n || 0, a = t;
return [ a[e[i++]], a[e[i++]], a[e[i++]], a[e[i++]], "-", a[e[i++]], a[e[i++]], "-", a[e[i++]], a[e[i++]], "-", a[e[i++]], a[e[i++]], "-", a[e[i++]], a[e[i++]], a[e[i++]], a[e[i++]], a[e[i++]], a[e[i++]] ].join("");
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.goEasyArray = void 0;
var i = c(n(2)), a = c(n(0)), r = c(n(1)), o = c(n(3)), s = c(n(4));
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
var l = new (function(e) {
function t() {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).apply(this, arguments));
}
return (0, s.default)(t, e), (0, r.default)(t, [ {
key: "deleteByKey",
value: function(e, t, n) {
var i = e.findIndex(function(e) {
return e[t] == n;
});
i > -1 && e.splice(i, 1);
}
}, {
key: "unshiftGuid",
value: function(e) {
var t = !1, n = this.findIndex(function(t) {
return t == e;
});
for (n > -1 && (t = !0, this.splice(n, 1)), this.unshift(e); this.length > 300; ) this.pop();
return t;
}
} ]), t;
}(Array))();
t.goEasyArray = l;
}, function(e, t, n) {
n(153), e.exports = n(7).Object.getPrototypeOf;
}, function(e, t, n) {
var i = n(38), a = n(89);
n(67)("getPrototypeOf", function() {
return function(e) {
return a(i(e));
};
});
}, function(e, t, n) {
e.exports = {
default: n(155),
__esModule: !0
};
}, function(e, t, n) {
n(156), e.exports = n(7).Object.setPrototypeOf;
}, function(e, t, n) {
var i = n(17);
i(i.S, "Object", {
setPrototypeOf: n(157).set
});
}, function(e, t, n) {
var i = n(23), a = n(18), r = function(e, t) {
if (a(e), !i(t) && null !== t) throw TypeError(t + ": can't set as prototype!");
};
e.exports = {
set: Object.setPrototypeOf || ("__proto__" in {} ? function(e, t, i) {
try {
(i = n(33)(Function.call, n(66).f(Object.prototype, "__proto__").set, 2))(e, []), 
t = !(e instanceof Array);
} catch (e) {
t = !0;
}
return function(e, n) {
return r(e, n), t ? e.__proto__ = n : i(e, n), e;
};
}({}, !1) : void 0),
check: r
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.storage = void 0;
var i = r(n(0)), a = r(n(1));
function r(e) {
return e && e.__esModule ? e : {
default: e
};
}
var o = new (function() {
function e() {
(0, i.default)(this, e);
}
return (0, a.default)(e, [ {
key: "getCookie",
value: function() {
var e, t = new RegExp("(^| )" + name + "=([^;]*)(;|$)");
return (e = document.cookie.match(t)) ? unescape(e[2]) : null;
}
}, {
key: "getData",
value: function(e) {
return window.localStorage ? window.localStorage.getItem(e) : this.getCookie(e);
}
}, {
key: "setCookie",
value: function(e, t) {
var n = new Date();
n.setTime(n.getTime() + 2592e6), document.cookie = e + "=" + escape(t) + ";expires=" + n.toGMTString();
}
}, {
key: "setData",
value: function(e, t) {
window.localStorage ? window.localStorage.setItem(e, t) : this.setCookie(e, t);
}
} ]), e;
}())();
t.storage = o;
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.default = {
connectTimeout: 3e3,
authorizeTimeout: 5e3,
historyTimeout: 3e3,
hereNowTimeout: 3e3,
publishTimeout: 3e3,
subscribeTimeout: 3e3,
manualDisconnectTimeout: 1500,
emitRetryFrequency: 500,
maxRetries: 3,
maxNumber: 10
};
}, function(e, t, n) {
n(92), n(86), n(90), n(161), n(173), n(174), e.exports = n(7).Promise;
}, function(e, t, n) {
var i, a, r, o, s = n(36), c = n(11), l = n(33), u = n(95), d = n(17), h = n(23), f = n(43), p = n(162), m = n(163), g = n(96), v = n(97).set, C = n(168)(), b = n(68), y = n(98), S = n(169), _ = n(99), T = c.TypeError, E = c.process, A = E && E.versions, I = A && A.v8 || "", N = c.Promise, w = "process" == u(E), D = function() {}, P = a = b.f, M = !!function() {
try {
var e = N.resolve(1), t = (e.constructor = {})[n(12)("species")] = function(e) {
e(D, D);
};
return (w || "function" == typeof PromiseRejectionEvent) && e.then(D) instanceof t && 0 !== I.indexOf("6.6") && -1 === S.indexOf("Chrome/66");
} catch (e) {}
}(), x = function(e) {
var t;
return !(!h(e) || "function" != typeof (t = e.then)) && t;
}, O = function(e, t) {
if (!e._n) {
e._n = !0;
var n = e._c;
C(function() {
for (var i = e._v, a = 1 == e._s, r = 0, o = function(t) {
var n, r, o, s = a ? t.ok : t.fail, c = t.resolve, l = t.reject, u = t.domain;
try {
s ? (a || (2 == e._h && k(e), e._h = 1), !0 === s ? n = i : (u && u.enter(), n = s(i), 
u && (u.exit(), o = !0)), n === t.promise ? l(T("Promise-chain cycle")) : (r = x(n)) ? r.call(n, c, l) : c(n)) : l(i);
} catch (e) {
u && !o && u.exit(), l(e);
}
}; n.length > r; ) o(n[r++]);
e._c = [], e._n = !1, t && !e._h && G(e);
});
}
}, G = function(e) {
v.call(c, function() {
var t, n, i, a = e._v, r = R(e);
if (r && (t = y(function() {
w ? E.emit("unhandledRejection", a, e) : (n = c.onunhandledrejection) ? n({
promise: e,
reason: a
}) : (i = c.console) && i.error && i.error("Unhandled promise rejection", a);
}), e._h = w || R(e) ? 2 : 1), e._a = void 0, r && t.e) throw t.v;
});
}, R = function(e) {
return 1 !== e._h && 0 === (e._a || e._c).length;
}, k = function(e) {
v.call(c, function() {
var t;
w ? E.emit("rejectionHandled", e) : (t = c.onrejectionhandled) && t({
promise: e,
reason: e._v
});
});
}, L = function(e) {
var t = this;
t._d || (t._d = !0, (t = t._w || t)._v = e, t._s = 2, t._a || (t._a = t._c.slice()), 
O(t, !0));
}, B = function e(t) {
var n, i = this;
if (!i._d) {
i._d = !0, i = i._w || i;
try {
if (i === t) throw T("Promise can't be resolved itself");
(n = x(t)) ? C(function() {
var a = {
_w: i,
_d: !1
};
try {
n.call(t, l(e, a, 1), l(L, a, 1));
} catch (e) {
L.call(a, e);
}
}) : (i._v = t, i._s = 1, O(i, !1));
} catch (e) {
L.call({
_w: i,
_d: !1
}, e);
}
}
};
M || (N = function(e) {
p(this, N, "Promise", "_h"), f(e), i.call(this);
try {
e(l(B, this, 1), l(L, this, 1));
} catch (e) {
L.call(this, e);
}
}, (i = function() {
this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, 
this._n = !1;
}).prototype = n(170)(N.prototype, {
then: function(e, t) {
var n = P(g(this, N));
return n.ok = "function" != typeof e || e, n.fail = "function" == typeof t && t, 
n.domain = w ? E.domain : void 0, this._c.push(n), this._a && this._a.push(n), this._s && O(this, !1), 
n.promise;
},
catch: function(e) {
return this.then(void 0, e);
}
}), r = function() {
var e = new i();
this.promise = e, this.resolve = l(B, e, 1), this.reject = l(L, e, 1);
}, b.f = P = function(e) {
return e === N || e === o ? new r(e) : a(e);
}), d(d.G + d.W + d.F * !M, {
Promise: N
}), n(46)(N, "Promise"), n(171)("Promise"), o = n(7).Promise, d(d.S + d.F * !M, "Promise", {
reject: function(e) {
var t = P(this);
return (0, t.reject)(e), t.promise;
}
}), d(d.S + d.F * (s || !M), "Promise", {
resolve: function(e) {
return _(s && this === o ? N : this, e);
}
}), d(d.S + d.F * !(M && n(172)(function(e) {
N.all(e).catch(D);
})), "Promise", {
all: function(e) {
var t = this, n = P(t), i = n.resolve, a = n.reject, r = y(function() {
var n = [], r = 0, o = 1;
m(e, !1, function(e) {
var s = r++, c = !1;
n.push(void 0), o++, t.resolve(e).then(function(e) {
c || (c = !0, n[s] = e, --o || i(n));
}, a);
}), --o || i(n);
});
return r.e && a(r.v), n.promise;
},
race: function(e) {
var t = this, n = P(t), i = n.reject, a = y(function() {
m(e, !1, function(e) {
t.resolve(e).then(n.resolve, i);
});
});
return a.e && i(a.v), n.promise;
}
});
}, function(e) {
e.exports = function(e, t, n, i) {
if (!(e instanceof t) || void 0 !== i && i in e) throw TypeError(n + ": incorrect invocation!");
return e;
};
}, function(e, t, n) {
var i = n(33), a = n(164), r = n(165), o = n(18), s = n(82), c = n(166), l = {}, u = {};
(t = e.exports = function(e, t, n, d, h) {
var f, p, m, g, v = h ? function() {
return e;
} : c(e), C = i(n, d, t ? 2 : 1), b = 0;
if ("function" != typeof v) throw TypeError(e + " is not iterable!");
if (r(v)) {
for (f = s(e.length); f > b; b++) if ((g = t ? C(o(p = e[b])[0], p[1]) : C(e[b])) === l || g === u) return g;
} else for (m = v.call(e); !(p = m.next()).done; ) if ((g = a(m, C, p.value, t)) === l || g === u) return g;
}).BREAK = l, t.RETURN = u;
}, function(e, t, n) {
var i = n(18);
e.exports = function(e, t, n, a) {
try {
return a ? t(i(n)[0], n[1]) : t(n);
} catch (t) {
var r = e.return;
throw void 0 !== r && i(r.call(e)), t;
}
};
}, function(e, t, n) {
var i = n(37), a = n(12)("iterator"), r = Array.prototype;
e.exports = function(e) {
return void 0 !== e && (i.Array === e || r[a] === e);
};
}, function(e, t, n) {
var i = n(95), a = n(12)("iterator"), r = n(37);
e.exports = n(7).getIteratorMethod = function(e) {
if (null != e) return e[a] || e["@@iterator"] || r[i(e)];
};
}, function(e) {
e.exports = function(e, t, n) {
var i = void 0 === n;
switch (t.length) {
case 0:
return i ? e() : e.call(n);

case 1:
return i ? e(t[0]) : e.call(n, t[0]);

case 2:
return i ? e(t[0], t[1]) : e.call(n, t[0], t[1]);

case 3:
return i ? e(t[0], t[1], t[2]) : e.call(n, t[0], t[1], t[2]);

case 4:
return i ? e(t[0], t[1], t[2], t[3]) : e.call(n, t[0], t[1], t[2], t[3]);
}
return e.apply(n, t);
};
}, function(e, t, n) {
var i = n(11), a = n(97).set, r = i.MutationObserver || i.WebKitMutationObserver, o = i.process, s = i.Promise, c = "process" == n(35)(o);
e.exports = function() {
var e, t, n, l = function() {
var i, a;
for (c && (i = o.domain) && i.exit(); e; ) {
a = e.fn, e = e.next;
try {
a();
} catch (i) {
throw e ? n() : t = void 0, i;
}
}
t = void 0, i && i.enter();
};
if (c) n = function() {
o.nextTick(l);
}; else if (!r || i.navigator && i.navigator.standalone) if (s && s.resolve) {
var u = s.resolve(void 0);
n = function() {
u.then(l);
};
} else n = function() {
a.call(i, l);
}; else {
var d = !0, h = document.createTextNode("");
new r(l).observe(h, {
characterData: !0
}), n = function() {
h.data = d = !d;
};
}
return function(i) {
var a = {
fn: i,
next: void 0
};
t && (t.next = a), e || (e = a, n()), t = a;
};
};
}, function(e, t, n) {
var i = n(11).navigator;
e.exports = i && i.userAgent || "";
}, function(e, t, n) {
var i = n(27);
e.exports = function(e, t, n) {
for (var a in t) n && e[a] ? e[a] = t[a] : i(e, a, t[a]);
return e;
};
}, function(e, t, n) {
var i = n(11), a = n(7), r = n(22), o = n(19), s = n(12)("species");
e.exports = function(e) {
var t = "function" == typeof a[e] ? a[e] : i[e];
o && t && !t[s] && r.f(t, s, {
configurable: !0,
get: function() {
return this;
}
});
};
}, function(e, t, n) {
var i = n(12)("iterator"), a = !1;
try {
var r = [ 7 ][i]();
r.return = function() {
a = !0;
}, Array.from(r, function() {
throw 2;
});
} catch (e) {}
e.exports = function(e, t) {
if (!t && !a) return !1;
var n = !1;
try {
var r = [ 7 ], o = r[i]();
o.next = function() {
return {
done: n = !0
};
}, r[i] = function() {
return o;
}, e(r);
} catch (e) {}
return n;
};
}, function(e, t, n) {
var i = n(17), a = n(7), r = n(11), o = n(96), s = n(99);
i(i.P + i.R, "Promise", {
finally: function(e) {
var t = o(this, a.Promise || r.Promise), n = "function" == typeof e;
return this.then(n ? function(n) {
return s(t, e()).then(function() {
return n;
});
} : e, n ? function(n) {
return s(t, e()).then(function() {
throw n;
});
} : e);
}
});
}, function(e, t, n) {
var i = n(17), a = n(68), r = n(98);
i(i.S, "Promise", {
try: function(e) {
var t = a.f(this), n = r(e);
return (n.e ? t.reject : t.resolve)(n.v), t.promise;
}
});
}, function(e, t, n) {
var i = n(7), a = i.JSON || (i.JSON = {
stringify: JSON.stringify
});
e.exports = function(e) {
return a.stringify.apply(a, arguments);
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.Conversations = void 0;
var i = C(n(5)), a = C(n(177)), r = C(n(0)), o = C(n(1)), s = n(100), c = C(n(39)), l = n(24), u = n(69), d = C(n(13)), h = C(n(10)), f = n(31), p = n(14), m = n(6), g = C(n(48)), v = C(n(49));
function C(e) {
return e && e.__esModule ? e : {
default: e
};
}
t.Conversations = function() {
function e(t) {
(0, r.default)(this, e), this.im = null, this.list = [], this.synchronized = !1, 
this.im = t, t._iMReceiver.addIMMessageObserver(this.updateByInMessage.bind(this));
}
return (0, o.default)(e, [ {
key: "onUpdated",
value: function() {
var e = this;
this.latestConversations().then(function() {
e.im._event.notify(l.ImEventType.CONVERSATIONS_UPDATED, {
unreadTotal: e.getUnreadTotal(e.list),
conversations: e.list.slice(0)
});
});
}
}, {
key: "latestConversations",
value: function() {
return this.synchronized ? this.loadLocalConversations() : this.loadServerConversations();
}
}, {
key: "updateByInMessage",
value: function(e) {
var t, n = this;
t = e.t == u.ConversationType.GROUP ? e.r : c.default.userId == e.r ? e.s : e.r;
var i = this.list.findIndex(function(n) {
return e.t == u.ConversationType.GROUP && t == n.groupId || e.t == u.ConversationType.PRIVATE && t == n.userId;
}), a = void 0;
function r(e) {
e.type === u.ConversationType.PRIVATE && (c.default.userId === e.lastMessage.senderId ? e.lastMessage.senderData = c.default.userData : e.lastMessage.senderData = e.data);
}
i > -1 ? (a = this.list[i], this.list.splice(i, 1), a.lc < e.ts && (a.lastMessage = g.default.assemble(e), 
a.lm = e.ts), c.default.userId != e.senderId && (a.unread += 1), r(a), this.insertOne(a), 
this.onUpdated()) : (a = s.Conversion.buildByInMessage(e), c.default.userId != e.senderId && (a.unread += 1), 
this.insertOne(a), this.im._dataCache.loadData(t, e.t).then(function(e) {
a.data = e, r(a), n.onUpdated();
}).catch(function() {
e.t;
}));
}
}, {
key: "updateByOutMessage",
value: function(e, t, n, i) {
var r = {};
(0, a.default)(r, e), delete r.file;
var o = this.list.findIndex(function(e) {
return e.type == u.ConversationType.GROUP && n == e.groupId || e.type == u.ConversationType.PRIVATE && n == e.userId;
}), l = void 0;
o > -1 ? (l = this.list[o], this.list.splice(o, 1), l.unread = 0, l.lc = l.lm, l.lastMessage = r, 
e.status === v.default.success && (l.lc = e.timestamp, l.lm = e.timestamp)) : l = s.Conversion.buildByOutMessage(r, t, n, i), 
l.data = i;
var d = this.im._dataCache;
t === u.ConversationType.GROUP ? d.putGroupData(l.groupId, i) : (d.putUserData(l.userId, i), 
l.lastMessage.senderData = c.default.userData), this.insertOne(l), this.onUpdated();
}
}, {
key: "imLastConversations",
value: function(e, t) {
var n = new d.default({
name: p.EmitType.imLastConversations,
params: {},
permission: h.default.READ,
singleTimeout: f.SocketTimeout.commonQuerySingle,
totalTimeout: f.SocketTimeout.commonQueryTotal,
fail: t,
success: e
});
this.im._goEasySocket.emit(n);
}
}, {
key: "loadServerConversations",
value: function() {
var e = this, t = this.im;
return new i.default(function(n, i) {
e.imLastConversations(function(a) {
if (200 == a.code) {
for (var r = a.content, o = function(n) {
var i = r[n], a = e.list.find(function(e) {
return i.t == u.ConversationType.GROUP && i.g == e.groupId || i.t == u.ConversationType.PRIVATE && i.uid == e.userId;
});
m.calibrator.isDef(a) ? a.top = i.top : (a = s.Conversion.buildByConversation(t._dataCache, i), 
e.insertOne(a));
}, c = 0, l = r.length; c < l; c++) o(c);
e.synchronized = !0, n({
code: 200,
content: {
unreadTotal: e.getUnreadTotal(e.list),
conversations: e.list.slice(0)
}
});
} else i(a);
}, function(e) {
i({
code: e.resultCode,
content: e.content
});
});
});
}
}, {
key: "loadLocalConversations",
value: function() {
var e = this, t = [];
return this.list.map(function(n) {
if (!n.data) {
var i = "private" == n.t ? n.userId : n.groupId, a = e.im._dataCache.loadData(i, n.t);
a.then(function(e) {
n.data = e;
}).catch(function() {
n.type;
}), t.push(a);
}
}), 0 != t.length ? new i.default(function(n, a) {
i.default.all(t).then(function() {
n({
code: 200,
content: {
unreadTotal: e.getUnreadTotal(e.list),
conversations: e.list.slice(0)
}
});
}).catch(function(e) {
a({
code: 408,
content: e.message
});
});
}) : i.default.resolve({
code: 200,
content: {
unreadTotal: this.getUnreadTotal(this.list),
conversations: this.list
}
});
}
}, {
key: "privateMarkAsRead",
value: function(e) {
var t = this.list.find(function(t) {
return t.userId == e;
}), n = {
friendId: e
};
return this.markAsRead(n, t);
}
}, {
key: "groupMarkAsRead",
value: function(e) {
var t = this.list.find(function(t) {
return t.groupId === e;
}), n = {
groupId: e
};
return this.markAsRead(n, t);
}
}, {
key: "markAsRead",
value: function(e, t) {
var n = this;
return !t || t.unread <= 0 ? i.default.resolve({
code: 200,
content: "OK"
}) : (e.lastTimestamp = t.lm, e.lastConsumedTimestamp = t.lc, new i.default(function(i, a) {
var r = t.type == u.ConversationType.PRIVATE ? p.EmitType.markPrivateMessageAsRead : p.EmitType.markGroupMessageAsRead;
n.requestEmit(r, e, function(e) {
200 == e.code ? (n.resetConversation(t, t.lm, e.content.amount), i({
code: 200,
content: "OK"
})) : a(e);
}, function(e) {
a(e || {
code: e.code || 408,
content: e.content || "Failed to query message"
});
});
}));
}
}, {
key: "resetConversation",
value: function(e, t, n) {
t <= e.lc || (e.unread -= n, e.lc = t, this.onUpdated());
}
}, {
key: "getUnreadTotal",
value: function(e) {
for (var t = 0, n = 0, i = e.length; n < i; n++) t += e[n].unread;
return t;
}
}, {
key: "insertOne",
value: function(e) {
var t = this.getPosIndex(e);
this.list.splice(t + 1, 0, e);
}
}, {
key: "getPosIndex",
value: function(e) {
if (0 == this.list.length) return -1;
for (var t, n, i = 0, a = this.list.length; a - i > 1; ) {
t = Math.floor((i + a) / 2), n = this.list[t];
var r = this.compares(e, n);
if (0 == r) return t;
r > 0 ? i = t : a = t;
}
return 0 == i && this.compares(this.list[0], e) > 0 ? -1 : i;
}
}, {
key: "compares",
value: function(e, t) {
var n;
return (n = e.top == t.top ? t.lastMessage.timestamp - e.lastMessage.timestamp : e.top ? -1 : 1) > 0 ? 1 : 0 === n ? 0 : -1;
}
}, {
key: "removeConversation",
value: function(e, t) {
var n = this, a = t == u.ConversationType.PRIVATE ? "userId" : "groupId";
return m.calibrator.isStringOrNumber(e) ? (m.calibrator.isNumber(e) && (e = e.toString()), 
-1 == this.findConversationIndex(t, e) ? i.default.reject({
code: 400,
content: "Failed to remove conversation, " + a + " does not exists."
}) : new i.default(function(i, a) {
var r = {
targetId: e,
type: t
};
n.requestEmit(p.EmitType.removeConversation, r, function(r) {
var o = n.findConversationIndex(t, e);
o > -1 && n.list.splice(o, 1), n.onUpdated(), 200 == r.code ? i({}) : a({
code: r.code || 408,
content: r.content || "Failed to remove conversation"
});
}, function(e) {
a({
code: e.code || 408,
content: e.content || "Failed to remove conversation"
});
});
})) : i.default.reject({
code: 400,
content: "Failed to remove conversation, " + a + " must be  a string or integer."
});
}
}, {
key: "topConversation",
value: function(e, t, n) {
var a = this, r = n == u.ConversationType.PRIVATE ? "userId" : "groupId";
if (!m.calibrator.isStringOrNumber(e)) return i.default.reject({
code: 400,
content: "Failed to top conversation, " + r + " must be a string or integer."
});
m.calibrator.isNumber(e) && (e = e.toString());
var o = this.findConversationIndex(n, e);
return -1 == o || this.list[o].top == t ? i.default.reject({
code: 400,
content: "Failed to top conversation, " + r + " does not exists."
}) : new i.default(function(i, r) {
var o = {
targetId: e,
top: t,
type: n
};
a.requestEmit(p.EmitType.topConversation, o, function() {
var r = a.findConversationIndex(n, e), o = a.list[r];
o.top = t, a.list.splice(r, 1), a.insertOne(o), a.onUpdated(), i({});
}, function(e) {
r({
code: e.code || 408,
content: e.content || "Failed to top Conversation"
});
});
});
}
}, {
key: "requestEmit",
value: function(e, t, n, i) {
var a = new d.default({
name: e,
params: t,
permission: h.default.WRITE,
singleTimeout: f.SocketTimeout.commonRequestSingle,
totalTimeout: f.SocketTimeout.commonRequestTotal,
success: n,
fail: i
});
this.im._goEasySocket.emit(a);
}
}, {
key: "findConversationIndex",
value: function(e, t) {
return this.list.findIndex(function(n) {
return e == u.ConversationType.PRIVATE ? n.type == e && n.userId == t : n.type == e && n.groupId == t;
});
}
} ]), e;
}();
}, function(e, t, n) {
e.exports = {
default: n(178),
__esModule: !0
};
}, function(e, t, n) {
n(179), e.exports = n(7).Object.assign;
}, function(e, t, n) {
var i = n(17);
i(i.S + i.F, "Object", {
assign: n(180)
});
}, function(e, t, n) {
var i = n(19), a = n(34), r = n(65), o = n(47), s = n(38), c = n(81), l = Object.assign;
e.exports = !l || n(30)(function() {
var e = {}, t = {}, n = Symbol(), i = "abcdefghijklmnopqrst";
return e[n] = 7, i.split("").forEach(function(e) {
t[e] = e;
}), 7 != l({}, e)[n] || Object.keys(l({}, t)).join("") != i;
}) ? function(e, t) {
for (var n = s(e), l = arguments.length, u = 1, d = r.f, h = o.f; l > u; ) for (var f, p = c(arguments[u++]), m = d ? a(p).concat(d(p)) : a(p), g = m.length, v = 0; g > v; ) f = m[v++], 
i && !h.call(p, f) || (n[f] = p[f]);
return n;
} : l;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.str = void 0;
var i = o(n(0)), a = o(n(1)), r = n(85);
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
var s = new (function() {
function e() {
(0, i.default)(this, e);
}
return (0, a.default)(e, [ {
key: "fileExtension",
value: function(e, t) {
if (r.calibrator.isString(e)) try {
var n = e.split(t);
return n[n.length - 1];
} catch (e) {
throw Error(e);
}
}
} ]), e;
}())();
t.str = s;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.messageCreator = void 0;
var i = y(n(0)), a = y(n(1)), r = y(n(50)), o = y(n(186)), s = y(n(187)), c = y(n(188)), l = y(n(51)), u = y(n(189)), d = y(n(190)), h = y(n(191)), f = y(n(192)), p = y(n(193)), m = y(n(194)), g = y(n(101)), v = y(n(102)), C = y(n(52)), b = y(n(195));
function y(e) {
return e && e.__esModule ? e : {
default: e
};
}
var S = new (function() {
function e() {
(0, i.default)(this, e), this.messageTypes = {
wx: {
image: o.default,
file: r.default,
audio: s.default,
video: c.default,
text: v.default
},
uniApp: {
image: h.default,
file: l.default,
audio: u.default,
video: d.default,
text: v.default
},
html: {
image: f.default,
file: C.default,
audio: p.default,
video: m.default,
text: v.default
}
};
}
return (0, a.default)(e, [ {
key: "create",
value: function(e, t) {
var n = g.default.resolve(), i = this.messageTypes[n][e];
return i ? new i(t) : new b.default(t);
}
} ]), e;
}())();
t.messageCreator = S;
}, function(e, t, n) {
e.exports = {
default: n(184),
__esModule: !0
};
}, function(e, t, n) {
n(185);
var i = n(7).Object;
e.exports = function(e, t) {
return i.getOwnPropertyDescriptor(e, t);
};
}, function(e, t, n) {
var i = n(29), a = n(66).f;
n(67)("getOwnPropertyDescriptor", function() {
return function(e, t) {
return a(i(e), t);
};
});
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = h(n(2)), a = h(n(0)), r = h(n(1)), o = h(n(3)), s = h(n(8)), c = h(n(4)), l = h(n(50)), u = h(n(9)), d = n(15);
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
var f = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
if ((0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e), 
!d.calibrator.isDef(e.file.tempFiles) || 0 == e.file.tempFiles[0].length) throw Error("tempFiles is empty.");
}
}, {
key: "setType",
value: function() {
this.type = u.default.image;
}
}, {
key: "setFile",
value: function(e) {
var t = "chooseMedia:ok" == e.errMsg ? e.tempFiles[0].tempFilePath : e.tempFiles[0].path;
e.tempFiles[0].path = t, this.file = e;
}
}, {
key: "setPayload",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e);
var n = this, a = e.file.tempFiles[0], r = "chooseMedia:ok" == e.file.errMsg ? a.tempFilePath : a.path;
this.payload.url = r, this.payload.size = a.size, this.payload.width = "", this.payload.height = "", 
this.payload.contentType = "";
var o = d.calibrator.isEmpty(a.name) || null == a.name ? r : a.name;
this.payload.name = "wx-image." + d.str.fileExtension(o, "."), this.payload.contentType = "image/" + d.str.fileExtension(o, "."), 
wx.getImageInfo({
src: r,
success: function(e) {
n.payload.width = e.width, n.payload.height = e.height;
}
});
}
} ]), t;
}(l.default);
t.default = f;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = h(n(2)), a = h(n(0)), r = h(n(1)), o = h(n(3)), s = h(n(8)), c = h(n(4)), l = h(n(50)), u = h(n(9)), d = n(15);
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
var f = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e);
}
}, {
key: "setType",
value: function() {
this.type = u.default.audio;
}
}, {
key: "setPayload",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e);
var n = e.file.tempFilePath;
this.payload.url = n, this.payload.duration = e.file.duration / 1e3, this.payload.size = e.file.fileSize;
var a = d.calibrator.isEmpty(e.file.name) || null == e.file.name ? n : e.file.name;
this.payload.contentType = "audio/" + d.str.fileExtension(a, "."), this.payload.name = "wx-audio." + d.str.fileExtension(a, ".");
}
} ]), t;
}(l.default);
t.default = f;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = p(n(16)), a = p(n(2)), r = p(n(0)), o = p(n(1)), s = p(n(3)), c = p(n(8)), l = p(n(4)), u = p(n(50)), d = p(n(9)), h = n(6), f = n(15);
function p(e) {
return e && e.__esModule ? e : {
default: e
};
}
var m = function(e) {
function t(e) {
return (0, r.default)(this, t), (0, s.default)(this, (t.__proto__ || (0, a.default)(t)).call(this, e));
}
return (0, l.default)(t, e), (0, o.default)(t, [ {
key: "validate",
value: function(e) {
(0, c.default)(t.prototype.__proto__ || (0, a.default)(t.prototype), "validate", this).call(this, e);
}
}, {
key: "setType",
value: function() {
this.type = d.default.video;
}
}, {
key: "setFile",
value: function(e) {
this.file = "chooseMedia:ok" == e.errMsg ? e.tempFiles[0] : e;
}
}, {
key: "setPayload",
value: function(e) {
this.payload = (0, i.default)(null);
var t = (0, i.default)(null), n = (0, i.default)(null), a = "chooseMedia:ok" == e.file.errMsg ? e.file.tempFiles[0] : e.file, r = a.duration, o = a.height, s = a.size, c = a.tempFilePath, l = a.thumbTempFilePath, u = a.width, d = a.name, p = void 0 === d ? "" : d, m = h.calibrator.isEmpty(p) ? c : p;
t.contentType = "video/" + f.str.fileExtension(m, "."), t.name = "wx-video." + f.str.fileExtension(m, "."), 
t.url = c, t.width = n.width = u, t.height = n.height = o, t.size = s, t.duration = r, 
n.url = l, n.contentType = "image/jpg", n.name = "wx-thumbnail.jpg", this.payload.video = t, 
this.payload.thumbnail = n;
}
} ]), t;
}(u.default);
t.default = m;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = h(n(2)), a = h(n(0)), r = h(n(1)), o = h(n(3)), s = h(n(8)), c = h(n(4)), l = h(n(51)), u = h(n(9)), d = n(15);
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
var f = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e);
}
}, {
key: "setType",
value: function() {
this.type = u.default.audio;
}
}, {
key: "setPayload",
value: function(e) {
var n = this;
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e);
var a = this, r = e.file.tempFilePath;
this.payload.url = r;
var o = d.calibrator.isEmpty(e.file.name) || null == e.file.name ? r : e.file.name;
if (this.payload.contentType = "audio/" + d.str.fileExtension(o, "."), this.payload.name = "uni-audio." + d.str.fileExtension(o, "."), 
d.calibrator.isDef(e.file.duration)) this.payload.duration = e.file.duration / 1e3; else {
this.payload.duration = 0;
var c = uni.createInnerAudioContext();
c.src = r, c.onCanplay(function() {
a.payload.duration = c.duration, c.destroy();
});
}
uni.getFileInfo({
filePath: r,
success: function(e) {
n.payload.size = e.size;
}
});
}
} ]), t;
}(l.default);
t.default = f;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = f(n(16)), a = f(n(2)), r = f(n(0)), o = f(n(1)), s = f(n(3)), c = f(n(8)), l = f(n(4)), u = f(n(51)), d = f(n(9)), h = n(15);
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
var p = function(e) {
function t(e) {
return (0, r.default)(this, t), (0, s.default)(this, (t.__proto__ || (0, a.default)(t)).call(this, e));
}
return (0, l.default)(t, e), (0, o.default)(t, [ {
key: "validate",
value: function(e) {
(0, c.default)(t.prototype.__proto__ || (0, a.default)(t.prototype), "validate", this).call(this, e);
}
}, {
key: "setType",
value: function() {
this.type = d.default.video;
}
}, {
key: "setPayload",
value: function(e) {
var t = (0, i.default)(null), n = (0, i.default)(null);
this.payload = (0, i.default)(null);
var a = e.file, r = a.duration, o = a.height, s = a.size, c = a.tempFilePath, l = a.width, u = a.name, d = void 0 === u ? "" : u, f = h.calibrator.isEmpty(d) ? c : d;
t.contentType = "video/" + h.str.fileExtension(f, "."), t.name = "uni-video." + h.str.fileExtension(f, "."), 
t.size = s, t.duration = r, t.url = n.url = c, t.width = n.width = l, t.height = n.height = o, 
n.contentType = "image/jpg", n.name = "wx-thumbnail.jpg", this.payload.video = t, 
this.payload.thumbnail = n;
}
} ]), t;
}(u.default);
t.default = p;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = h(n(2)), a = h(n(0)), r = h(n(1)), o = h(n(3)), s = h(n(8)), c = h(n(4)), l = h(n(51)), u = n(15), d = h(n(9));
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
var f = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
if ((0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e), 
!u.calibrator.isDef(e.file.tempFiles) || 0 == e.file.tempFiles[0].length) throw Error("tempFiles is empty.");
}
}, {
key: "setType",
value: function() {
this.type = d.default.image;
}
}, {
key: "setPayload",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e);
var n = this, a = e.file.tempFiles[0];
this.payload.url = a.path, this.payload.size = a.size, this.payload.width = "", 
this.payload.height = "";
var r = u.calibrator.isEmpty(a.name) || null == a.name ? a.path : a.name;
this.payload.contentType = "image/" + u.str.fileExtension(r, "."), this.payload.name = "uni-image." + u.str.fileExtension(r, "."), 
uni.getImageInfo({
src: a.path,
success: function(e) {
n.payload.width = e.width, n.payload.height = e.height;
}
});
}
} ]), t;
}(l.default);
t.default = f;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(2)), a = d(n(0)), r = d(n(1)), o = d(n(3)), s = d(n(8)), c = d(n(4)), l = d(n(52)), u = d(n(9));
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e);
var n = [ "gif", "jpg", "png", "jpeg" ];
if (!n.find(function(t) {
return t == e.file.type.split("/")[1].toLowerCase();
})) throw Error("Only " + n.join(",") + " is supported image.");
}
}, {
key: "setType",
value: function() {
this.type = u.default.image;
}
}, {
key: "setPayload",
value: function(e) {
var n = this;
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e);
var a = window.URL || window.webkitURL, r = new Image();
r.src = a.createObjectURL(e.file), r.onload = function() {
n.payload.width = r.width, n.payload.height = r.height, a.revokeObjectURL(r.src);
};
}
} ]), t;
}(l.default);
t.default = h;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(2)), a = d(n(0)), r = d(n(1)), o = d(n(3)), s = d(n(8)), c = d(n(4)), l = d(n(52)), u = d(n(9));
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "validate",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "validate", this).call(this, e);
var n = [ "mp3", "ogg", "wav", "wma", "ape", "acc", "mpeg" ];
if (!n.find(function(t) {
return t == e.file.type.split("/")[1].toLowerCase();
})) throw Error("Only " + n.join(",") + " is supported audio.");
}
}, {
key: "setType",
value: function() {
this.type = u.default.audio;
}
}, {
key: "setPayload",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "setPayload", this).call(this, e);
var n = this, a = window.URL || window.webkitURL, r = document.createElement("audio");
r.src = a.createObjectURL(e.file), r.onloadedmetadata = function() {
n.payload.duration = r.duration, a.revokeObjectURL(r.src);
};
}
} ]), t;
}(l.default);
t.default = h;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = h(n(16)), a = h(n(2)), r = h(n(0)), o = h(n(1)), s = h(n(3)), c = h(n(8)), l = h(n(4)), u = h(n(52)), d = h(n(9));
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
var f = function(e) {
function t(e) {
return (0, r.default)(this, t), (0, s.default)(this, (t.__proto__ || (0, a.default)(t)).call(this, e));
}
return (0, l.default)(t, e), (0, o.default)(t, [ {
key: "validate",
value: function(e) {
(0, c.default)(t.prototype.__proto__ || (0, a.default)(t.prototype), "validate", this).call(this, e);
var n = [ "avi", "mov", "rmvb", "rm", "flv", "mp4", "3gp", "quicktime" ];
if (!n.find(function(t) {
return t == e.file.type.split("/")[1].toLowerCase();
})) throw Error("Only " + n.join(",") + " is supported video.");
}
}, {
key: "setType",
value: function() {
this.type = d.default.video;
}
}, {
key: "setPayload",
value: function(e) {
this.payload = (0, i.default)(null);
var t = (0, i.default)(null), n = (0, i.default)(null);
t.contentType = e.file.type, t.size = e.file.size, t.duration = 0, t.url = n.url = "", 
t.name = e.file.name, t.width = n.width = 0, t.height = n.height = 0, n.contentType = "image/jpg", 
this.payload.video = t, this.payload.thumbnail = n;
var a = this, r = window.URL || window.webkitURL, o = document.createElement("video"), s = r.createObjectURL(e.file);
o.src = s, o.onloadedmetadata = function() {
a.payload.video.duration = o.duration, a.payload.video.width = a.payload.thumbnail.width = o.videoWidth, 
a.payload.video.height = a.payload.thumbnail.height = o.videoHeight, a.payload.video.url = s, 
a.payload.thumbnail.url = function(e) {
var t = document.createElement("canvas");
return t.width = e.videoWidth, t.height = e.videoHeight, t.getContext("2d").drawImage(e, 0, 0, t.width, t.height), 
t.toDataURL("image/png");
}(o), r.revokeObjectURL(o.src);
};
}
} ]), t;
}(u.default);
t.default = f;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = u(n(2)), a = u(n(0)), r = u(n(1)), o = u(n(3)), s = u(n(4)), c = u(n(40)), l = n(6);
function u(e) {
return e && e.__esModule ? e : {
default: e
};
}
var d = function(e) {
function t(e) {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this, e));
}
return (0, s.default)(t, e), (0, r.default)(t, [ {
key: "setType",
value: function(e) {
if (!l.calibrator.isStringOrNumber(e.type)) throw Error("type require a string or number.");
if (l.calibrator.isEmpty(e.type)) throw Error("type is empty.");
this.type = e.type;
}
}, {
key: "setPayload",
value: function(e) {
if (l.calibrator.isEmpty(e.payload)) throw Error("payload is empty.");
if (!l.calibrator.isPlainObject(e.payload) && !l.calibrator.isStringOrNumber(e.payload)) throw Error("payload require object | string | number.");
this.payload = e.payload;
}
} ]), t;
}(c.default);
t.default = d;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = _(n(5)), a = _(n(25)), r = _(n(2)), o = _(n(0)), s = _(n(1)), c = _(n(3)), l = _(n(8)), u = _(n(4)), d = _(n(103)), h = n(14), f = _(n(227)), p = _(n(13)), m = _(n(10)), g = _(n(41)), v = _(n(228)), C = n(6), b = n(113), y = n(21), S = _(n(229));
function _(e) {
return e && e.__esModule ? e : {
default: e
};
}
var T = function(e) {
function t(e) {
(0, o.default)(this, t);
var n = (0, c.default)(this, (t.__proto__ || (0, r.default)(t)).call(this));
return n.ioSocket = null, n.sid = null, n.appKey = null, n.userId = null, n.userData = null, 
n.otp = null, n.artifactVersion = "0.0.0", n.imVersion = "0.0.0", n.uri = null, 
n.ioOpts = null, n.type = "", n.allowNotification = !1, n.reconnectingTimes = 0, 
n.messageObservers = {}, n.connectFailedObservers = [], n.connectingObservers = [], 
n.expiredReconnectedObservers = [], n.ioSocket = new f.default({
onDisconnected: n.onIoDisconnected.bind(n),
onReconnecting: n.onIoReconnecting.bind(n)
}), n.ioSocket.addConnectedObserver(n.onIoReconnected.bind(n)), n.appKey = e.appkey, 
n.userId = e.userId, n.userData = e.userData || "", n.otp = e.otp || null, n.ioOpts = e.opts, 
n.uri = e.uri, n.allowNotification = e.allowNotification, n.imVersion = e.imVersion, 
n.artifactVersion = e.artifactVersion, n.type = e.type || "", n.addConnectedObserver(e.onSuccess), 
n.addConnectingObserver(e.onProgress), n.addConnectFailedObserver(e.onFailed), n;
}
return (0, u.default)(t, e), (0, s.default)(t, [ {
key: "onIoReconnected",
value: function() {
this.status === g.default.RECONNECTING && this.authorize();
}
}, {
key: "emit",
value: function(e) {
(0, l.default)(t.prototype.__proto__ || (0, r.default)(t.prototype), "emit", this).call(this, e);
}
}, {
key: "doEmit",
value: function(e, t, n) {
b.uniApp.overrideUniShowHideMethods(), t.sid = this.sid, this.ioSocket.doEmit(e, t, n);
}
}, {
key: "sendAck",
value: function(e, t) {
this.ioSocket.io.emit(e, t);
}
}, {
key: "connect",
value: function() {
var e = this;
(0, l.default)(t.prototype.__proto__ || (0, r.default)(t.prototype), "connect", this).call(this), 
this.onConnecting(this.reconnectingTimes), this.ioSocket.connect({
uri: this.uri,
opts: this.ioOpts
}), this.notifier = new S.default(this), this.notifier.support() ? this.notifier.getRegId().then(function(t) {
e.regId = t, e.authorize();
}).catch(function(t) {
console.error("注册厂商通道失败：" + (0, a.default)(t)), e.authorize();
}) : this.authorize();
}
}, {
key: "disconnect",
value: function() {
var e = this;
return new i.default(function(t, n) {
var i = function() {
e.status = g.default.DISCONNECTED, e.ioSocket.disconnect(), t();
};
if (e.allowNotification) {
var a = new p.default({
name: h.EmitType.manualDisconnect,
params: {},
permission: m.default.READ,
singleTimeout: y.SocketTimeout.commonInfiniteSingle,
totalTimeout: y.SocketTimeout.commonInfiniteTotal,
fail: function(e) {
n(e);
},
success: i
});
e.emit(a);
} else i();
});
}
}, {
key: "authorize",
value: function() {
var e = {
appkey: this.appKey,
userId: this.userId,
userData: this.userData,
otp: this.otp,
artifactVersion: this.artifactVersion,
type: this.type,
sid: this.sid,
imVersion: this.imVersion,
allowNT: this.allowNotification,
regId: this.regId
}, t = new p.default({
name: h.EmitType.authorize,
params: e,
permission: m.default.NONE,
singleTimeout: y.SocketTimeout.commonInfiniteSingle,
totalTimeout: y.SocketTimeout.commonInfiniteTotal,
success: this.onAuthorizeSuccess.bind(this),
fail: this.onAuthorizeFailed.bind(this)
});
this.ioSocket.emit(t);
}
}, {
key: "onConnecting",
value: function() {
this.notify(this.connectingObservers, this.reconnectingTimes);
}
}, {
key: "onIoReconnecting",
value: function() {
b.uniApp.overrideUniShowHideMethods(), this.reconnectingTimes++, this.status == g.default.CONNECTED || this.status == g.default.EXPIRED_RECONNECTED || this.status == g.default.RECONNECTING ? this.status = g.default.RECONNECTING : this.status = g.default.CONNECTING, 
this.onConnecting();
}
}, {
key: "onIoDisconnected",
value: function() {
this.status == g.default.DISCONNECTING && (this.status = g.default.DISCONNECTED, 
this.notify(this.disconnectedObservers));
}
}, {
key: "onAuthorizeSuccess",
value: function(e) {
this.status === g.default.RECONNECTING ? this.sid !== e.sid ? (this.status = g.default.EXPIRED_RECONNECTED, 
this.notify(this.expiredReconnectedObservers)) : this.status = g.default.RECONNECTED : (this.status = g.default.CONNECTED, 
this.sid = e.sid);
e.enablePublish && (this.permissions.find(function(e) {
return e == m.default.WRITE;
}) || this.permissions.push(m.default.WRITE)), e.enableSubscribe && (this.permissions.find(function(e) {
return e == m.default.READ;
}) || this.permissions.push(m.default.READ)), this.reconnectingTimes = 0, this.notify(this.connectedObservers);
}
}, {
key: "onAuthorizeFailed",
value: function(e) {
this.ioSocket.disconnect(), this.status = g.default.CONNECT_FAILED;
var t = {
code: e.resultCode || 408,
content: e.content || "Host unreachable or timeout"
};
this.notify(this.connectFailedObservers, t);
}
}, {
key: "addConnectingObserver",
value: function(e) {
C.calibrator.isFunction(e) && this.connectingObservers.push(e);
}
}, {
key: "addConnectFailedObserver",
value: function(e) {
C.calibrator.isFunction(e) && this.connectFailedObservers.push(e);
}
}, {
key: "addExpiredReconnectedObserver",
value: function(e) {
C.calibrator.isFunction(e) && this.expiredReconnectedObservers.push(e);
}
}, {
key: "addMessageObserver",
value: function(e, t) {
var n = this;
this.ioSocket.io.on(e, function(t) {
n.notifyMessageObservers(e, t);
}), this.messageObservers[e] || (this.messageObservers[e] = []), this.messageObservers[e].push(new v.default(t));
}
}, {
key: "notifyMessageObservers",
value: function(e, t) {
for (var n = this.messageObservers[e], i = 0; i < n.length; i++) n[i].onMessage(e, t);
}
} ]), t;
}(d.default);
t.default = T;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = o(n(0)), a = o(n(1)), r = o(n(41));
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
var s = function() {
function e(t) {
(0, i.default)(this, e), this.socket = null, this.socket = t;
}
return (0, a.default)(e, [ {
key: "emit",
value: function(e) {
this.socket.status !== r.default.CONNECT_FAILED && this.socket.status !== r.default.DISCONNECTED ? (e.start(), 
this.doEmit(e)) : e.fail({
resultCode: "409",
content: "Please connect first"
});
}
}, {
key: "doEmit",
value: function(e) {
var t = this;
if (e.isTimeout()) e.fail({
resultCode: 408,
content: "Host unreachable or timeout"
}); else if (this.socket.status !== r.default.CONNECT_FAILED) if (this.authenticated()) if (this.hasPermission(e)) if (this.socket.status === r.default.CONNECTED || this.socket.status === r.default.RECONNECTED || this.socket.status === r.default.EXPIRED_RECONNECTED) {
if (!e.complete) {
var n = setTimeout(function() {
t.doEmit(e);
}, e.singleTimeout);
this.socket.doEmit(e.name, e.params, function(t) {
clearTimeout(n), 200 === t.resultCode || 200 == t.code ? e.success(t) : e.fail(t);
}), e.retried++;
}
} else setTimeout(function() {
t.doEmit(e);
}, 500); else e.fail({
resultCode: 401,
content: "No permission"
}); else setTimeout(function() {
t.doEmit(e);
}, 500); else e.fail({
resultCode: 408,
content: "Failed to connect GoEasy."
});
}
}, {
key: "hasPermission",
value: function(e) {
return !!this.socket.permissions.find(function(t) {
return t === e.permission;
});
}
}, {
key: "authenticated",
value: function() {
return this.socket.status === r.default.CONNECTED || this.socket.status === r.default.RECONNECTING || this.socket.status === r.default.RECONNECTED || this.socket.status === r.default.EXPIRED_RECONNECTED;
}
} ]), e;
}();
t.default = s;
}, function(e, t, n) {
var i, a = (i = n(20)) && i.__esModule ? i : {
default: i
}, r = n(199), o = n(72), s = n(106);
n(53)("socket.io-client");
e.exports = t = l;
var c = t.managers = {};
function l(e, t) {
"object" === (void 0 === e ? "undefined" : (0, a.default)(e)) && (t = e, e = void 0), 
t = t || {};
var n, i = r(e), o = i.source, l = i.id, u = i.path, d = c[l] && u in c[l].nsps;
return t.forceNew || t["force new connection"] || !1 === t.multiplex || d ? n = s(o, t) : (c[l] || (c[l] = s(o, t)), 
n = c[l]), i.query && !t.query && (t.query = i.query), n.socket(i.path, t);
}
t.protocol = o.protocol, t.connect = l, t.Manager = n(106), t.Socket = n(110);
}, function(e, t, n) {
var i = n(104);
n(53)("socket.io-client:url");
e.exports = function(e, t) {
var n = e;
t = t || "undefined" != typeof location && location, null == e && (e = t.protocol + "//" + t.host);
"string" == typeof e && ("/" === e.charAt(0) && (e = "/" === e.charAt(1) ? t.protocol + e : t.host + e), 
/^(https?|wss?):\/\//.test(e) || (e = void 0 !== t ? t.protocol + "//" + e : "https://" + e), 
n = i(e));
n.port || (/^(http|ws)$/.test(n.protocol) ? n.port = "80" : /^(http|ws)s$/.test(n.protocol) && (n.port = "443"));
n.path = n.path || "/";
var a = -1 !== n.host.indexOf(":") ? "[" + n.host + "]" : n.host;
return n.id = n.protocol + "://" + a + ":" + n.port, n.href = n.protocol + "://" + a + (t && t.port === n.port ? "" : ":" + n.port), 
n;
};
}, function(e, t, n) {
function i(e) {
var n;
function i() {
if (i.enabled) {
var e = i, a = +new Date(), r = a - (n || a);
e.diff = r, e.prev = n, e.curr = a, n = a;
for (var o = new Array(arguments.length), s = 0; s < o.length; s++) o[s] = arguments[s];
o[0] = t.coerce(o[0]), "string" != typeof o[0] && o.unshift("%O");
var c = 0;
o[0] = o[0].replace(/%([a-zA-Z%])/g, function(n, i) {
if ("%%" === n) return n;
c++;
var a = t.formatters[i];
if ("function" == typeof a) {
var r = o[c];
n = a.call(e, r), o.splice(c, 1), c--;
}
return n;
}), t.formatArgs.call(e, o), (i.log || t.log || console.log.bind(console)).apply(e, o);
}
}
return i.namespace = e, i.enabled = t.enabled(e), i.useColors = t.useColors(), i.color = function(e) {
var n, i = 0;
for (n in e) i = (i << 5) - i + e.charCodeAt(n), i |= 0;
return t.colors[Math.abs(i) % t.colors.length];
}(e), i.destroy = a, "function" == typeof t.init && t.init(i), t.instances.push(i), 
i;
}
function a() {
var e = t.instances.indexOf(this);
return -1 !== e && (t.instances.splice(e, 1), !0);
}
(t = e.exports = i.debug = i.default = i).coerce = function(e) {
return e instanceof Error ? e.stack || e.message : e;
}, t.disable = function() {
t.enable("");
}, t.enable = function(e) {
var n;
t.save(e), t.names = [], t.skips = [];
var i = ("string" == typeof e ? e : "").split(/[\s,]+/), a = i.length;
for (n = 0; n < a; n++) i[n] && ("-" === (e = i[n].replace(/\*/g, ".*?"))[0] ? t.skips.push(new RegExp("^" + e.substr(1) + "$")) : t.names.push(new RegExp("^" + e + "$")));
for (n = 0; n < t.instances.length; n++) {
var r = t.instances[n];
r.enabled = t.enabled(r.namespace);
}
}, t.enabled = function(e) {
if ("*" === e[e.length - 1]) return !0;
var n, i;
for (n = 0, i = t.skips.length; n < i; n++) if (t.skips[n].test(e)) return !1;
for (n = 0, i = t.names.length; n < i; n++) if (t.names[n].test(e)) return !0;
return !1;
}, t.humanize = n(201), t.instances = [], t.names = [], t.skips = [], t.formatters = {};
}, function(e) {
var t = 1e3, n = 6e4, i = 36e5, a = 24 * i;
function r(e, t, n) {
if (!(e < t)) return e < 1.5 * t ? Math.floor(e / t) + " " + n : Math.ceil(e / t) + " " + n + "s";
}
e.exports = function(e, o) {
o = o || {};
var s, c = typeof e;
if ("string" === c && e.length > 0) return function(e) {
if (!((e = String(e)).length > 100)) {
var r = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);
if (r) {
var o = parseFloat(r[1]);
switch ((r[2] || "ms").toLowerCase()) {
case "years":
case "year":
case "yrs":
case "yr":
case "y":
return 315576e5 * o;

case "days":
case "day":
case "d":
return o * a;

case "hours":
case "hour":
case "hrs":
case "hr":
case "h":
return o * i;

case "minutes":
case "minute":
case "mins":
case "min":
case "m":
return o * n;

case "seconds":
case "second":
case "secs":
case "sec":
case "s":
return o * t;

case "milliseconds":
case "millisecond":
case "msecs":
case "msec":
case "ms":
return o;

default:
return;
}
}
}
}(e);
if ("number" === c && !1 === isNaN(e)) return o.long ? r(s = e, a, "day") || r(s, i, "hour") || r(s, n, "minute") || r(s, t, "second") || s + " ms" : function(e) {
return e >= a ? Math.round(e / a) + "d" : e >= i ? Math.round(e / i) + "h" : e >= n ? Math.round(e / n) + "m" : e >= t ? Math.round(e / t) + "s" : e + "ms";
}(e);
throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(e));
};
}, function(e, t, n) {
(function(i) {
function a() {
var e;
try {
e = t.storage.debug;
} catch (e) {}
return !e && void 0 !== i && "env" in i && (e = i.env.DEBUG), e;
}
(t = e.exports = n(203)).log = function() {
return "object" == typeof console && console.log && Function.prototype.apply.call(console.log, console, arguments);
}, t.formatArgs = function(e) {
var n = this.useColors;
if (e[0] = (n ? "%c" : "") + this.namespace + (n ? " %c" : " ") + e[0] + (n ? "%c " : " ") + "+" + t.humanize(this.diff), 
n) {
var i = "color: " + this.color;
e.splice(1, 0, i, "color: inherit");
var a = 0, r = 0;
e[0].replace(/%[a-zA-Z%]/g, function(e) {
"%%" !== e && "%c" === e && (r = ++a);
}), e.splice(r, 0, i);
}
}, t.save = function(e) {
try {
null == e ? t.storage.removeItem("debug") : t.storage.debug = e;
} catch (e) {}
}, t.load = a, t.useColors = function() {
return !("undefined" == typeof window || !window.process || "renderer" !== window.process.type) || ("undefined" == typeof navigator || !navigator.userAgent || !navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) && ("undefined" != typeof document && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || "undefined" != typeof window && window.console && (window.console.firebug || window.console.exception && window.console.table) || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && parseInt(RegExp.$1, 10) >= 31 || "undefined" != typeof navigator && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/));
}, t.storage = "undefined" != typeof chrome && "undefined" != typeof chrome.storage ? chrome.storage.local : function() {
try {
return window.localStorage;
} catch (e) {}
}(), t.colors = [ "#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33" ], 
t.formatters.j = function(e) {
try {
return JSON.stringify(e);
} catch (e) {
return "[UnexpectedJSONParseError]: " + e.message;
}
}, t.enable(a());
}).call(t, n(71));
}, function(e, t, n) {
function i(e) {
var n;
function i() {
if (i.enabled) {
var e = i, a = +new Date(), r = a - (n || a);
e.diff = r, e.prev = n, e.curr = a, n = a;
for (var o = new Array(arguments.length), s = 0; s < o.length; s++) o[s] = arguments[s];
o[0] = t.coerce(o[0]), "string" != typeof o[0] && o.unshift("%O");
var c = 0;
o[0] = o[0].replace(/%([a-zA-Z%])/g, function(n, i) {
if ("%%" === n) return n;
c++;
var a = t.formatters[i];
if ("function" == typeof a) {
var r = o[c];
n = a.call(e, r), o.splice(c, 1), c--;
}
return n;
}), t.formatArgs.call(e, o), (i.log || t.log || console.log.bind(console)).apply(e, o);
}
}
return i.namespace = e, i.enabled = t.enabled(e), i.useColors = t.useColors(), i.color = function(e) {
var n, i = 0;
for (n in e) i = (i << 5) - i + e.charCodeAt(n), i |= 0;
return t.colors[Math.abs(i) % t.colors.length];
}(e), i.destroy = a, "function" == typeof t.init && t.init(i), t.instances.push(i), 
i;
}
function a() {
var e = t.instances.indexOf(this);
return -1 !== e && (t.instances.splice(e, 1), !0);
}
(t = e.exports = i.debug = i.default = i).coerce = function(e) {
return e instanceof Error ? e.stack || e.message : e;
}, t.disable = function() {
t.enable("");
}, t.enable = function(e) {
var n;
t.save(e), t.names = [], t.skips = [];
var i = ("string" == typeof e ? e : "").split(/[\s,]+/), a = i.length;
for (n = 0; n < a; n++) i[n] && ("-" === (e = i[n].replace(/\*/g, ".*?"))[0] ? t.skips.push(new RegExp("^" + e.substr(1) + "$")) : t.names.push(new RegExp("^" + e + "$")));
for (n = 0; n < t.instances.length; n++) {
var r = t.instances[n];
r.enabled = t.enabled(r.namespace);
}
}, t.enabled = function(e) {
if ("*" === e[e.length - 1]) return !0;
var n, i;
for (n = 0, i = t.skips.length; n < i; n++) if (t.skips[n].test(e)) return !1;
for (n = 0, i = t.names.length; n < i; n++) if (t.names[n].test(e)) return !0;
return !1;
}, t.humanize = n(204), t.instances = [], t.names = [], t.skips = [], t.formatters = {};
}, function(e) {
var t = 1e3, n = 6e4, i = 36e5, a = 24 * i;
function r(e, t, n) {
if (!(e < t)) return e < 1.5 * t ? Math.floor(e / t) + " " + n : Math.ceil(e / t) + " " + n + "s";
}
e.exports = function(e, o) {
o = o || {};
var s, c = typeof e;
if ("string" === c && e.length > 0) return function(e) {
if (!((e = String(e)).length > 100)) {
var r = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);
if (r) {
var o = parseFloat(r[1]);
switch ((r[2] || "ms").toLowerCase()) {
case "years":
case "year":
case "yrs":
case "yr":
case "y":
return 315576e5 * o;

case "days":
case "day":
case "d":
return o * a;

case "hours":
case "hour":
case "hrs":
case "hr":
case "h":
return o * i;

case "minutes":
case "minute":
case "mins":
case "min":
case "m":
return o * n;

case "seconds":
case "second":
case "secs":
case "sec":
case "s":
return o * t;

case "milliseconds":
case "millisecond":
case "msecs":
case "msec":
case "ms":
return o;

default:
return;
}
}
}
}(e);
if ("number" === c && !1 === isNaN(e)) return o.long ? r(s = e, a, "day") || r(s, i, "hour") || r(s, n, "minute") || r(s, t, "second") || s + " ms" : function(e) {
return e >= a ? Math.round(e / a) + "d" : e >= i ? Math.round(e / i) + "h" : e >= n ? Math.round(e / n) + "m" : e >= t ? Math.round(e / t) + "s" : e + "ms";
}(e);
throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(e));
};
}, function(e, t, n) {
e.exports = n(206), e.exports.parser = n(32);
}, function(e, t, n) {
var i = r(n(73)), a = r(n(20));
function r(e) {
return e && e.__esModule ? e : {
default: e
};
}
var o = n(107), s = n(42), c = (n(76)("engine.io-client:socket"), n(109)), l = n(32), u = n(104), d = n(54);
function h(e, t) {
if (!(this instanceof h)) return new h(e, t);
t = t || {}, e && "object" === (void 0 === e ? "undefined" : (0, a.default)(e)) && (t = e, 
e = null), e ? (e = u(e), t.hostname = e.host, t.secure = "https" === e.protocol || "wss" === e.protocol, 
t.port = e.port, e.query && (t.query = e.query)) : t.host && (t.hostname = u(t.host).host), 
this.secure = null != t.secure ? t.secure : "undefined" != typeof location && "https:" === location.protocol, 
t.hostname && !t.port && (t.port = this.secure ? "443" : "80"), this.agent = t.agent || !1, 
this.hostname = t.hostname || ("undefined" != typeof location ? location.hostname : "localhost"), 
this.port = t.port || ("undefined" != typeof location && location.port ? location.port : this.secure ? 443 : 80), 
this.query = t.query || {}, "string" == typeof this.query && (this.query = d.decode(this.query)), 
this.upgrade = !1 !== t.upgrade, this.path = (t.path || "/engine.io").replace(/\/$/, "") + "/", 
this.forceJSONP = !!t.forceJSONP, this.jsonp = !1 !== t.jsonp, this.forceBase64 = !!t.forceBase64, 
this.enablesXDR = !!t.enablesXDR, this.timestampParam = t.timestampParam || "t", 
this.timestampRequests = t.timestampRequests, this.transports = t.transports || [ "polling", "websocket" ], 
this.transportOptions = t.transportOptions || {}, this.readyState = "", this.writeBuffer = [], 
this.prevBufferLen = 0, this.policyPort = t.policyPort || 843, this.rememberUpgrade = t.rememberUpgrade || !1, 
this.binaryType = null, this.onlyBinaryUpgrades = t.onlyBinaryUpgrades, this.perMessageDeflate = !1 !== t.perMessageDeflate && (t.perMessageDeflate || {}), 
!0 === this.perMessageDeflate && (this.perMessageDeflate = {}), this.perMessageDeflate && null == this.perMessageDeflate.threshold && (this.perMessageDeflate.threshold = 1024), 
this.pfx = t.pfx || null, this.key = t.key || null, this.passphrase = t.passphrase || null, 
this.cert = t.cert || null, this.ca = t.ca || null, this.ciphers = t.ciphers || null, 
this.rejectUnauthorized = void 0 === t.rejectUnauthorized || t.rejectUnauthorized, 
this.forceNode = !!t.forceNode, this.isReactNative = "undefined" != typeof navigator && "string" == typeof navigator.product && "reactnative" === navigator.product.toLowerCase(), 
("undefined" == typeof self || this.isReactNative) && (t.extraHeaders && (0, i.default)(t.extraHeaders).length > 0 && (this.extraHeaders = t.extraHeaders), 
t.localAddress && (this.localAddress = t.localAddress)), this.id = null, this.upgrades = null, 
this.pingInterval = null, this.pingTimeout = null, this.pingIntervalTimer = null, 
this.pingTimeoutTimer = null, this.open();
}
e.exports = h, h.priorWebsocketSuccess = !1, s(h.prototype), h.protocol = l.protocol, 
h.Socket = h, h.Transport = n(74), h.transports = n(107), h.parser = n(32), h.prototype.createTransport = function(e) {
var t = function(e) {
var t = {};
for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
return t;
}(this.query);
t.EIO = l.protocol, t.transport = e;
var n = this.transportOptions[e] || {};
return this.id && (t.sid = this.id), new o[e]({
query: t,
socket: this,
agent: n.agent || this.agent,
hostname: n.hostname || this.hostname,
port: n.port || this.port,
secure: n.secure || this.secure,
path: n.path || this.path,
forceJSONP: n.forceJSONP || this.forceJSONP,
jsonp: n.jsonp || this.jsonp,
forceBase64: n.forceBase64 || this.forceBase64,
enablesXDR: n.enablesXDR || this.enablesXDR,
timestampRequests: n.timestampRequests || this.timestampRequests,
timestampParam: n.timestampParam || this.timestampParam,
policyPort: n.policyPort || this.policyPort,
pfx: n.pfx || this.pfx,
key: n.key || this.key,
passphrase: n.passphrase || this.passphrase,
cert: n.cert || this.cert,
ca: n.ca || this.ca,
ciphers: n.ciphers || this.ciphers,
rejectUnauthorized: n.rejectUnauthorized || this.rejectUnauthorized,
perMessageDeflate: n.perMessageDeflate || this.perMessageDeflate,
extraHeaders: n.extraHeaders || this.extraHeaders,
forceNode: n.forceNode || this.forceNode,
localAddress: n.localAddress || this.localAddress,
requestTimeout: n.requestTimeout || this.requestTimeout,
protocols: n.protocols || void 0,
isReactNative: this.isReactNative
});
}, h.prototype.open = function() {
var e;
if (this.rememberUpgrade && h.priorWebsocketSuccess && -1 !== this.transports.indexOf("websocket")) e = "websocket"; else {
if (0 === this.transports.length) {
var t = this;
return void setTimeout(function() {
t.emit("error", "No transports available");
}, 0);
}
e = this.transports[0];
}
this.readyState = "opening";
try {
e = this.createTransport(e);
} catch (e) {
return this.transports.shift(), void this.open();
}
e.open(), this.setTransport(e);
}, h.prototype.setTransport = function(e) {
e.name;
var t = this;
this.transport && (this.transport.name, this.transport.removeAllListeners()), this.transport = e, 
e.on("drain", function() {
t.onDrain();
}).on("packet", function(e) {
t.onPacket(e);
}).on("error", function(e) {
t.onError(e);
}).on("close", function() {
t.onClose("transport close");
});
}, h.prototype.probe = function(e) {
var t = this.createTransport(e, {
probe: 1
}), n = !1, i = this;
function a() {
if (i.onlyBinaryUpgrades) {
var e = !this.supportsBinary && i.transport.supportsBinary;
n = n || e;
}
n || (t.send([ {
type: "ping",
data: "probe"
} ]), t.once("packet", function(e) {
if (!n) if ("pong" === e.type && "probe" === e.data) {
if (i.upgrading = !0, i.emit("upgrading", t), !t) return;
h.priorWebsocketSuccess = "websocket" === t.name, i.transport.name, i.transport.pause(function() {
n || "closed" !== i.readyState && (u(), i.setTransport(t), t.send([ {
type: "upgrade"
} ]), i.emit("upgrade", t), t = null, i.upgrading = !1, i.flush());
});
} else {
var a = new Error("probe error");
a.transport = t.name, i.emit("upgradeError", a);
}
}));
}
function r() {
n || (n = !0, u(), t.close(), t = null);
}
function o(e) {
var n = new Error("probe error: " + e);
n.transport = t.name, r(), i.emit("upgradeError", n);
}
function s() {
o("transport closed");
}
function c() {
o("socket closed");
}
function l(e) {
t && e.name !== t.name && (e.name, t.name, r());
}
function u() {
t.removeListener("open", a), t.removeListener("error", o), t.removeListener("close", s), 
i.removeListener("close", c), i.removeListener("upgrading", l);
}
h.priorWebsocketSuccess = !1, t.once("open", a), t.once("error", o), t.once("close", s), 
this.once("close", c), this.once("upgrading", l), t.open();
}, h.prototype.onOpen = function() {
if (this.readyState = "open", h.priorWebsocketSuccess = "websocket" === this.transport.name, 
this.emit("open"), this.flush(), "open" === this.readyState && this.upgrade && this.transport.pause) for (var e = 0, t = this.upgrades.length; e < t; e++) this.probe(this.upgrades[e]);
}, h.prototype.onPacket = function(e) {
if ("opening" === this.readyState || "open" === this.readyState || "closing" === this.readyState) switch (e.type, 
e.data, this.emit("packet", e), this.emit("heartbeat"), e.type) {
case "open":
this.onHandshake(JSON.parse(e.data));
break;

case "pong":
this.setPing(), this.emit("pong");
break;

case "error":
var t = new Error("server error");
t.code = e.data, this.onError(t);
break;

case "message":
this.emit("data", e.data), this.emit("message", e.data);
} else this.readyState;
}, h.prototype.onHandshake = function(e) {
this.emit("handshake", e), this.id = e.sid, this.transport.query.sid = e.sid, this.upgrades = this.filterUpgrades(e.upgrades), 
this.pingInterval = e.pingInterval, this.pingTimeout = e.pingTimeout, this.onOpen(), 
"closed" !== this.readyState && (this.setPing(), this.removeListener("heartbeat", this.onHeartbeat), 
this.on("heartbeat", this.onHeartbeat));
}, h.prototype.onHeartbeat = function(e) {
clearTimeout(this.pingTimeoutTimer);
var t = this;
t.pingTimeoutTimer = setTimeout(function() {
"closed" !== t.readyState && t.onClose("ping timeout");
}, e || t.pingInterval + t.pingTimeout);
}, h.prototype.setPing = function() {
var e = this;
clearTimeout(e.pingIntervalTimer), e.pingIntervalTimer = setTimeout(function() {
e.pingTimeout, e.ping(), e.onHeartbeat(e.pingTimeout);
}, e.pingInterval);
}, h.prototype.ping = function() {
var e = this;
this.sendPacket("ping", function() {
e.emit("ping");
});
}, h.prototype.onDrain = function() {
this.writeBuffer.splice(0, this.prevBufferLen), this.prevBufferLen = 0, 0 === this.writeBuffer.length ? this.emit("drain") : this.flush();
}, h.prototype.flush = function() {
"closed" !== this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length && (this.writeBuffer.length, 
this.transport.send(this.writeBuffer), this.prevBufferLen = this.writeBuffer.length, 
this.emit("flush"));
}, h.prototype.write = h.prototype.send = function(e, t, n) {
return this.sendPacket("message", e, t, n), this;
}, h.prototype.sendPacket = function(e, t, n, i) {
if ("function" == typeof t && (i = t, t = void 0), "function" == typeof n && (i = n, 
n = null), "closing" !== this.readyState && "closed" !== this.readyState) {
(n = n || {}).compress = !1 !== n.compress;
var a = {
type: e,
data: t,
options: n
};
this.emit("packetCreate", a), this.writeBuffer.push(a), i && this.once("flush", i), 
this.flush();
}
}, h.prototype.close = function() {
if ("opening" === this.readyState || "open" === this.readyState) {
this.readyState = "closing";
var e = this;
this.writeBuffer.length ? this.once("drain", function() {
this.upgrading ? i() : t();
}) : this.upgrading ? i() : t();
}
function t() {
e.onClose("forced close"), e.transport.close();
}
function n() {
e.removeListener("upgrade", n), e.removeListener("upgradeError", n), t();
}
function i() {
e.once("upgrade", n), e.once("upgradeError", n);
}
return this;
}, h.prototype.onError = function(e) {
h.priorWebsocketSuccess = !1, this.emit("error", e), this.onClose("transport error", e);
}, h.prototype.onClose = function(e, t) {
"opening" !== this.readyState && "open" !== this.readyState && "closing" !== this.readyState || (clearTimeout(this.pingIntervalTimer), 
clearTimeout(this.pingTimeoutTimer), this.transport.removeAllListeners("close"), 
this.transport.close(), this.transport.removeAllListeners(), this.readyState = "closed", 
this.id = null, this.emit("close", e, t), this.writeBuffer = [], this.prevBufferLen = 0);
}, h.prototype.filterUpgrades = function(e) {
for (var t = [], n = 0, i = e.length; n < i; n++) ~c(this.transports, e[n]) && t.push(e[n]);
return t;
};
}, function(e, t, n) {
n(208), e.exports = n(7).Object.keys;
}, function(e, t, n) {
var i = n(38), a = n(34);
n(67)("keys", function() {
return function(e) {
return a(i(e));
};
});
}, function(e, t, n) {
(function(t) {
var i = n(211), a = n(75);
e.exports = u;
var r, o = /\n/g, s = /\\n/g;
function c() {}
function l() {
return "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== t ? t : {};
}
function u(e) {
if (i.call(this, e), this.query = this.query || {}, !r) {
var t = l();
r = t.___eio = t.___eio || [];
}
this.index = r.length;
var n = this;
r.push(function(e) {
n.onData(e);
}), this.query.j = this.index, "function" == typeof addEventListener && addEventListener("beforeunload", function() {
n.script && (n.script.onerror = c);
}, !1);
}
a(u, i), u.prototype.supportsBinary = !1, u.prototype.doClose = function() {
this.script && (this.script.parentNode.removeChild(this.script), this.script = null), 
this.form && (this.form.parentNode.removeChild(this.form), this.form = null, this.iframe = null), 
i.prototype.doClose.call(this);
}, u.prototype.doPoll = function() {
var e = this, t = document.createElement("script");
this.script && (this.script.parentNode.removeChild(this.script), this.script = null), 
t.async = !0, t.src = this.uri(), t.onerror = function(t) {
e.onError("jsonp poll error", t);
};
var n = document.getElementsByTagName("script")[0];
n ? n.parentNode.insertBefore(t, n) : (document.head || document.body).appendChild(t), 
this.script = t, "undefined" != typeof navigator && /gecko/i.test(navigator.userAgent) && setTimeout(function() {
var e = document.createElement("iframe");
document.body.appendChild(e), document.body.removeChild(e);
}, 100);
}, u.prototype.doWrite = function(e, t) {
var n = this;
if (!this.form) {
var i, a = document.createElement("form"), r = document.createElement("textarea"), c = this.iframeId = "eio_iframe_" + this.index;
a.className = "socketio", a.style.position = "absolute", a.style.top = "-1000px", 
a.style.left = "-1000px", a.target = c, a.method = "POST", a.setAttribute("accept-charset", "utf-8"), 
r.name = "d", a.appendChild(r), document.body.appendChild(a), this.form = a, this.area = r;
}
function l() {
u(), t();
}
function u() {
if (n.iframe) try {
n.form.removeChild(n.iframe);
} catch (e) {
n.onError("jsonp polling iframe removal error", e);
}
try {
var e = '<iframe src="javascript:0" name="' + n.iframeId + '">';
i = document.createElement(e);
} catch (e) {
(i = document.createElement("iframe")).name = n.iframeId, i.src = "javascript:0";
}
i.id = n.iframeId, n.form.appendChild(i), n.iframe = i;
}
this.form.action = this.uri(), u(), e = e.replace(s, "\\\n"), this.area.value = e.replace(o, "\\n");
try {
this.form.submit();
} catch (e) {}
this.iframe.attachEvent ? this.iframe.onreadystatechange = function() {
"complete" === n.iframe.readyState && l();
} : this.iframe.onload = l;
};
}).call(t, n(210));
}, function(e) {
var t;
t = function() {
return this;
}();
try {
t = t || Function("", "return this")() || (0, eval)("this");
} catch (e) {
"object" == typeof window && (t = window);
}
e.exports = t;
}, function(e, t, n) {
var i = n(74), a = n(54), r = n(32), o = n(75), s = n(108);
n(76)("engine.io-client:polling");
e.exports = l;
var c = null != new (n(220))({
xdomain: !1
}).responseType;
function l(e) {
var t = e && e.forceBase64;
c && !t || (this.supportsBinary = !1), i.call(this, e);
}
o(l, i), l.prototype.name = "polling", l.prototype.doOpen = function() {
this.poll();
}, l.prototype.pause = function(e) {
var t = this;
function n() {
t.readyState = "paused", e();
}
if (this.readyState = "pausing", this.polling || !this.writable) {
var i = 0;
this.polling && (i++, this.once("pollComplete", function() {
--i || n();
})), this.writable || (i++, this.once("drain", function() {
--i || n();
}));
} else n();
}, l.prototype.poll = function() {
this.polling = !0, this.doPoll(), this.emit("poll");
}, l.prototype.onData = function(e) {
var t = this;
r.decodePayload(e, this.socket.binaryType, function(e) {
if ("opening" === t.readyState && t.onOpen(), "close" === e.type) return t.onClose(), 
!1;
t.onPacket(e);
}), "closed" !== this.readyState && (this.polling = !1, this.emit("pollComplete"), 
"open" === this.readyState ? this.poll() : this.readyState);
}, l.prototype.doClose = function() {
var e = this;
function t() {
e.write([ {
type: "close"
} ]);
}
"open" === this.readyState ? t() : this.once("open", t);
}, l.prototype.write = function(e) {
var t = this;
this.writable = !1;
var n = function() {
t.writable = !0, t.emit("drain");
};
r.encodePayload(e, this.supportsBinary, function(e) {
t.doWrite(e, n);
});
}, l.prototype.uri = function() {
var e = this.query || {}, t = this.secure ? "https" : "http", n = "";
return !1 !== this.timestampRequests && (e[this.timestampParam] = s()), this.supportsBinary || e.sid || (e.b64 = 1), 
e = a.encode(e), this.port && ("https" === t && 443 !== Number(this.port) || "http" === t && 80 !== Number(this.port)) && (n = ":" + this.port), 
e.length && (e = "?" + e), t + "://" + (-1 !== this.hostname.indexOf(":") ? "[" + this.hostname + "]" : this.hostname) + n + this.path + e;
};
}, function(e, t, n) {
var i, a = (i = n(73)) && i.__esModule ? i : {
default: i
};
e.exports = a.default || function(e) {
var t = [], n = Object.prototype.hasOwnProperty;
for (var i in e) n.call(e, i) && t.push(i);
return t;
};
}, function(t, n, i) {
var a = i(214), r = Object.prototype.toString, o = "function" == typeof Blob || "undefined" != typeof Blob && "[object BlobConstructor]" === r.call(Blob), s = "function" == typeof File || "undefined" != typeof File && "[object FileConstructor]" === r.call(File);
t.exports = function t(n) {
if (!n || "object" != typeof n) return !1;
if (a(n)) {
for (var i = 0, r = n.length; i < r; i++) if (t(n[i])) return !0;
return !1;
}
if ("function" == typeof e && e.isBuffer && e.isBuffer(n) || "function" == typeof ArrayBuffer && n instanceof ArrayBuffer || o && n instanceof Blob || s && n instanceof File) return !0;
if (n.toJSON && "function" == typeof n.toJSON && 1 === arguments.length) return t(n.toJSON(), !0);
for (var c in n) if (Object.prototype.hasOwnProperty.call(n, c) && t(n[c])) return !0;
return !1;
};
}, function(e) {
var t = {}.toString;
e.exports = Array.isArray || function(e) {
return "[object Array]" == t.call(e);
};
}, function(e) {
function t() {}
e.exports = function(e, n, i) {
var a = !1;
return i = i || t, r.count = e, 0 === e ? n() : r;
function r(e, t) {
if (r.count <= 0) throw new Error("after called too many times");
--r.count, e ? (a = !0, n(e), n = i) : 0 !== r.count || a || n(null, t);
}
};
}, function(e) {
var t, n, i, a = String.fromCharCode;
function r(e) {
for (var t, n, i = [], a = 0, r = e.length; a < r; ) (t = e.charCodeAt(a++)) >= 55296 && t <= 56319 && a < r ? 56320 == (64512 & (n = e.charCodeAt(a++))) ? i.push(((1023 & t) << 10) + (1023 & n) + 65536) : (i.push(t), 
a--) : i.push(t);
return i;
}
function o(e, t) {
if (e >= 55296 && e <= 57343) {
if (t) throw Error("Lone surrogate U+" + e.toString(16).toUpperCase() + " is not a scalar value");
return !1;
}
return !0;
}
function s(e, t) {
return a(e >> t & 63 | 128);
}
function c(e, t) {
if (0 == (4294967168 & e)) return a(e);
var n = "";
return 0 == (4294965248 & e) ? n = a(e >> 6 & 31 | 192) : 0 == (4294901760 & e) ? (o(e, t) || (e = 65533), 
n = a(e >> 12 & 15 | 224), n += s(e, 6)) : 0 == (4292870144 & e) && (n = a(e >> 18 & 7 | 240), 
n += s(e, 12), n += s(e, 6)), n + a(63 & e | 128);
}
function l() {
if (i >= n) throw Error("Invalid byte index");
var e = 255 & t[i];
if (i++, 128 == (192 & e)) return 63 & e;
throw Error("Invalid continuation byte");
}
function u(e) {
var a, r;
if (i > n) throw Error("Invalid byte index");
if (i == n) return !1;
if (a = 255 & t[i], i++, 0 == (128 & a)) return a;
if (192 == (224 & a)) {
if ((r = (31 & a) << 6 | l()) >= 128) return r;
throw Error("Invalid continuation byte");
}
if (224 == (240 & a)) {
if ((r = (15 & a) << 12 | l() << 6 | l()) >= 2048) return o(r, e) ? r : 65533;
throw Error("Invalid continuation byte");
}
if (240 == (248 & a) && (r = (7 & a) << 18 | l() << 12 | l() << 6 | l()) >= 65536 && r <= 1114111) return r;
throw Error("Invalid UTF-8 detected");
}
e.exports = {
version: "2.1.2",
encode: function(e, t) {
for (var n = !1 !== (t = t || {}).strict, i = r(e), a = i.length, o = -1, s = ""; ++o < a; ) s += c(i[o], n);
return s;
},
decode: function(e, o) {
var s = !1 !== (o = o || {}).strict;
t = r(e), n = t.length, i = 0;
for (var c, l = []; !1 !== (c = u(s)); ) l.push(c);
return function(e) {
for (var t, n = e.length, i = -1, r = ""; ++i < n; ) (t = e[i]) > 65535 && (r += a((t -= 65536) >>> 10 & 1023 | 55296), 
t = 56320 | 1023 & t), r += a(t);
return r;
}(l);
}
};
}, function(e) {
var t = void 0 !== t ? t : "undefined" != typeof WebKitBlobBuilder ? WebKitBlobBuilder : "undefined" != typeof MSBlobBuilder ? MSBlobBuilder : "undefined" != typeof MozBlobBuilder && MozBlobBuilder, n = function() {
try {
return 2 === new Blob([ "hi" ]).size;
} catch (e) {
return !1;
}
}(), i = n && function() {
try {
return 2 === new Blob([ new Uint8Array([ 1, 2 ]) ]).size;
} catch (e) {
return !1;
}
}(), a = t && t.prototype.append && t.prototype.getBlob;
function r(e) {
return e.map(function(e) {
if (e.buffer instanceof ArrayBuffer) {
var t = e.buffer;
if (e.byteLength !== t.byteLength) {
var n = new Uint8Array(e.byteLength);
n.set(new Uint8Array(t, e.byteOffset, e.byteLength)), t = n.buffer;
}
return t;
}
return e;
});
}
function o(e, n) {
n = n || {};
var i = new t();
return r(e).forEach(function(e) {
i.append(e);
}), n.type ? i.getBlob(n.type) : i.getBlob();
}
function s(e, t) {
return new Blob(r(e), t || {});
}
"undefined" != typeof Blob && (o.prototype = Blob.prototype, s.prototype = Blob.prototype), 
e.exports = n ? i ? Blob : s : a ? o : void 0;
}, function(e, t, n) {
function i(e) {
var n;
function i() {
if (i.enabled) {
var e = i, a = +new Date(), r = a - (n || a);
e.diff = r, e.prev = n, e.curr = a, n = a;
for (var o = new Array(arguments.length), s = 0; s < o.length; s++) o[s] = arguments[s];
o[0] = t.coerce(o[0]), "string" != typeof o[0] && o.unshift("%O");
var c = 0;
o[0] = o[0].replace(/%([a-zA-Z%])/g, function(n, i) {
if ("%%" === n) return n;
c++;
var a = t.formatters[i];
if ("function" == typeof a) {
var r = o[c];
n = a.call(e, r), o.splice(c, 1), c--;
}
return n;
}), t.formatArgs.call(e, o), (i.log || t.log || console.log.bind(console)).apply(e, o);
}
}
return i.namespace = e, i.enabled = t.enabled(e), i.useColors = t.useColors(), i.color = function(e) {
var n, i = 0;
for (n in e) i = (i << 5) - i + e.charCodeAt(n), i |= 0;
return t.colors[Math.abs(i) % t.colors.length];
}(e), i.destroy = a, "function" == typeof t.init && t.init(i), t.instances.push(i), 
i;
}
function a() {
var e = t.instances.indexOf(this);
return -1 !== e && (t.instances.splice(e, 1), !0);
}
(t = e.exports = i.debug = i.default = i).coerce = function(e) {
return e instanceof Error ? e.stack || e.message : e;
}, t.disable = function() {
t.enable("");
}, t.enable = function(e) {
var n;
t.save(e), t.names = [], t.skips = [];
var i = ("string" == typeof e ? e : "").split(/[\s,]+/), a = i.length;
for (n = 0; n < a; n++) i[n] && ("-" === (e = i[n].replace(/\*/g, ".*?"))[0] ? t.skips.push(new RegExp("^" + e.substr(1) + "$")) : t.names.push(new RegExp("^" + e + "$")));
for (n = 0; n < t.instances.length; n++) {
var r = t.instances[n];
r.enabled = t.enabled(r.namespace);
}
}, t.enabled = function(e) {
if ("*" === e[e.length - 1]) return !0;
var n, i;
for (n = 0, i = t.skips.length; n < i; n++) if (t.skips[n].test(e)) return !1;
for (n = 0, i = t.names.length; n < i; n++) if (t.names[n].test(e)) return !0;
return !1;
}, t.humanize = n(219), t.instances = [], t.names = [], t.skips = [], t.formatters = {};
}, function(e) {
var t = 1e3, n = 6e4, i = 36e5, a = 24 * i;
function r(e, t, n) {
if (!(e < t)) return e < 1.5 * t ? Math.floor(e / t) + " " + n : Math.ceil(e / t) + " " + n + "s";
}
e.exports = function(e, o) {
o = o || {};
var s, c = typeof e;
if ("string" === c && e.length > 0) return function(e) {
if (!((e = String(e)).length > 100)) {
var r = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);
if (r) {
var o = parseFloat(r[1]);
switch ((r[2] || "ms").toLowerCase()) {
case "years":
case "year":
case "yrs":
case "yr":
case "y":
return 315576e5 * o;

case "days":
case "day":
case "d":
return o * a;

case "hours":
case "hour":
case "hrs":
case "hr":
case "h":
return o * i;

case "minutes":
case "minute":
case "mins":
case "min":
case "m":
return o * n;

case "seconds":
case "second":
case "secs":
case "sec":
case "s":
return o * t;

case "milliseconds":
case "millisecond":
case "msecs":
case "msec":
case "ms":
return o;

default:
return;
}
}
}
}(e);
if ("number" === c && !1 === isNaN(e)) return o.long ? r(s = e, a, "day") || r(s, i, "hour") || r(s, n, "minute") || r(s, t, "second") || s + " ms" : function(e) {
return e >= a ? Math.round(e / a) + "d" : e >= i ? Math.round(e / i) + "h" : e >= n ? Math.round(e / n) + "m" : e >= t ? Math.round(e / t) + "s" : e + "ms";
}(e);
throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(e));
};
}, function(e, t, n) {
var i = n(221);
e.exports = function(e) {
var t = e.xdomain, n = e.xscheme, a = e.enablesXDR;
try {
if ("undefined" != typeof XMLHttpRequest && (!t || i)) return new XMLHttpRequest();
} catch (e) {}
try {
if ("undefined" != typeof XDomainRequest && !n && a) return new XDomainRequest();
} catch (e) {}
if (!t) try {
return new (self[[ "Active" ].concat("Object").join("X")])("Microsoft.XMLHTTP");
} catch (e) {}
};
}, function(e) {
try {
e.exports = "undefined" != typeof XMLHttpRequest && "withCredentials" in new XMLHttpRequest();
} catch (t) {
e.exports = !1;
}
}, function(t, n, i) {
var a, r, o, s = (a = i(20)) && a.__esModule ? a : {
default: a
}, c = i(74), l = i(32), u = i(54), d = i(75), h = i(108);
i(76)("engine.io-client:websocket");
if ("undefined" == typeof uni && "undefined" == typeof wx || "undefined" != typeof WebSocket) if ("undefined" != typeof WebSocket) r = WebSocket; else if ("undefined" != typeof self) r = self.WebSocket || self.MozWebSocket; else try {
o = i(223);
} catch (e) {}
var f = r || o;
function p(e) {
e && e.forceBase64 && (this.supportsBinary = !1), ("undefined" == typeof uni && "undefined" == typeof wx || "undefined" != typeof WebSocket) && (this.perMessageDeflate = e.perMessageDeflate, 
this.usingBrowserWebSocket = r && !e.forceNode, this.protocols = e.protocols, this.usingBrowserWebSocket || (f = o)), 
c.call(this, e);
}
"undefined" == typeof uni && "undefined" == typeof wx || "undefined" != typeof WebSocket || (f = function(e) {
var t = this;
if (t.onopen = function() {}, t.onclose = function() {}, t.onmessage = function() {}, 
t.onerror = function() {}, "object" === ("undefined" == typeof tt ? "undefined" : (0, 
s.default)(tt)) && tt.getSystemInfo) {
var n = tt.connectSocket({
url: e
});
t.send = function(e) {
n.send({
data: e
});
}, t.close = function() {
n.close();
}, n.onOpen(function() {
t.onopen();
}), n.onError(function(e) {
t.onerror(e);
}), n.onMessage(function(e) {
t.onmessage(e);
}), n.onClose(function() {
t.onclose();
});
} else "undefined" != typeof uni ? (t.send = function(e) {
uni.sendSocketMessage({
data: e
});
}, t.close = function() {
uni.closeSocket();
}, uni.onSocketOpen(function() {
t.onopen();
}), uni.onSocketError(function(e) {
t.onerror(e);
}), uni.onSocketMessage(function(e) {
t.onmessage(e);
}), uni.onSocketClose(function() {
t.onclose();
}), uni.connectSocket({
url: e
})) : (t.send = function(e) {
wx.sendSocketMessage({
data: e
});
}, t.close = function() {
wx.closeSocket();
}, wx.onSocketOpen(function() {
t.onopen();
}), wx.onSocketError(function(e) {
t.onerror(e);
}), wx.onSocketMessage(function(e) {
t.onmessage(e);
}), wx.onSocketClose(function() {
t.onclose();
}), wx.connectSocket({
url: e
}));
}), t.exports = p, d(p, c), p.prototype.name = "websocket", p.prototype.supportsBinary = !1, 
p.prototype.doOpen = function() {
if (this.check()) {
var e, t, n = this.uri();
("undefined" == typeof uni && "undefined" == typeof wx || "undefined" != typeof WebSocket) && (e = this.protocols), 
(t = "undefined" == typeof uni && "undefined" == typeof wx || "undefined" != typeof WebSocket ? {
agent: this.agent,
perMessageDeflate: this.perMessageDeflate
} : {
agent: this.agent
}).pfx = this.pfx, t.key = this.key, t.passphrase = this.passphrase, t.cert = this.cert, 
t.ca = this.ca, t.ciphers = this.ciphers, t.rejectUnauthorized = this.rejectUnauthorized, 
this.extraHeaders && (t.headers = this.extraHeaders), this.localAddress && (t.localAddress = this.localAddress);
try {
"undefined" == typeof uni && "undefined" == typeof wx || "undefined" != typeof WebSocket ? this.ws = this.usingBrowserWebSocket && !this.isReactNative ? e ? new f(n, e) : new f(n) : new f(n, e, t) : this.ws = new f(n);
} catch (e) {
return this.emit("error", e);
}
void 0 === this.ws.binaryType && (this.supportsBinary = !1), this.ws.supports && this.ws.supports.binary ? (this.supportsBinary = !0, 
this.ws.binaryType = "nodebuffer") : this.ws.binaryType = "arraybuffer", this.addEventListeners();
}
}, p.prototype.addEventListeners = function() {
var e = this;
this.ws.onopen = function() {
e.onOpen();
}, this.ws.onclose = function() {
e.onClose();
}, this.ws.onmessage = function(t) {
e.onData(t.data);
}, this.ws.onerror = function(t) {
e.onError("websocket error", t);
};
}, p.prototype.write = function(t) {
var n = this;
this.writable = !1;
for (var i = t.length, a = 0, r = i; a < r; a++) !function(t) {
l.encodePacket(t, n.supportsBinary, function(a) {
if ("undefined" == typeof uni && "undefined" == typeof wx || "undefined" != typeof WebSocket) {
if (!n.usingBrowserWebSocket) {
var r = {};
(t.options && (r.compress = t.options.compress), n.perMessageDeflate) && ("string" == typeof a ? e.byteLength(a) : a.length) < n.perMessageDeflate.threshold && (r.compress = !1);
}
try {
n.usingBrowserWebSocket ? n.ws.send(a) : n.ws.send(a, r);
} catch (e) {}
} else try {
n.ws.send(a);
} catch (e) {}
--i || (n.emit("flush"), setTimeout(function() {
n.writable = !0, n.emit("drain");
}, 0));
});
}(t[a]);
}, p.prototype.onClose = function() {
c.prototype.onClose.call(this);
}, p.prototype.doClose = function() {
"undefined" != typeof this.ws && this.ws.close();
}, p.prototype.uri = function() {
var e = this.query || {}, t = this.secure ? "wss" : "ws", n = "";
return this.port && ("wss" === t && 443 !== Number(this.port) || "ws" === t && 80 !== Number(this.port)) && (n = ":" + this.port), 
this.timestampRequests && (e[this.timestampParam] = h()), this.supportsBinary || (e.b64 = 1), 
(e = u.encode(e)).length && (e = "?" + e), t + "://" + (-1 !== this.hostname.indexOf(":") ? "[" + this.hostname + "]" : this.hostname) + n + this.path + e;
}, p.prototype.check = function() {
return !(!f || "__initialize" in f && this.name === p.prototype.name);
};
}, function() {}, function(e) {
e.exports = function(e, t) {
for (var n = [], i = (t = t || 0) || 0; i < e.length; i++) n[i - t] = e[i];
return n;
};
}, function(t, n, i) {
var a = i(105), r = Object.prototype.toString, o = "function" == typeof Blob || "undefined" != typeof Blob && "[object BlobConstructor]" === r.call(Blob), s = "function" == typeof File || "undefined" != typeof File && "[object FileConstructor]" === r.call(File);
t.exports = function t(n) {
if (!n || "object" != typeof n) return !1;
if (a(n)) {
for (var i = 0, r = n.length; i < r; i++) if (t(n[i])) return !0;
return !1;
}
if ("function" == typeof e && e.isBuffer && e.isBuffer(n) || "function" == typeof ArrayBuffer && n instanceof ArrayBuffer || o && n instanceof Blob || s && n instanceof File) return !0;
if (n.toJSON && "function" == typeof n.toJSON && 1 === arguments.length) return t(n.toJSON(), !0);
for (var c in n) if (Object.prototype.hasOwnProperty.call(n, c) && t(n[c])) return !0;
return !1;
};
}, function(e) {
function t(e) {
e = e || {}, this.ms = e.min || 100, this.max = e.max || 1e4, this.factor = e.factor || 2, 
this.jitter = e.jitter > 0 && e.jitter <= 1 ? e.jitter : 0, this.attempts = 0;
}
e.exports = t, t.prototype.duration = function() {
var e = this.ms * Math.pow(this.factor, this.attempts++);
if (this.jitter) {
var t = Math.random(), n = Math.floor(t * this.jitter * e);
e = 0 == (1 & Math.floor(10 * t)) ? e - n : e + n;
}
return 0 | Math.min(e, this.max);
}, t.prototype.reset = function() {
this.attempts = 0;
}, t.prototype.setMin = function(e) {
this.ms = e;
}, t.prototype.setMax = function(e) {
this.max = e;
}, t.prototype.setJitter = function(e) {
this.jitter = e;
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(2)), a = d(n(0)), r = d(n(1)), o = d(n(3)), s = d(n(8)), c = d(n(4)), l = d(n(103)), u = d(n(41));
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function(e) {
function t(e) {
(0, a.default)(this, t);
var n = (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
return n.reconnectingObservers = [], n.addReconnectingObserver(e.onReconnecting), 
n.addDisconnectedObserver(e.onDisconnected), n;
}
return (0, c.default)(t, e), (0, r.default)(t, [ {
key: "connect",
value: function(e) {
(0, s.default)(t.prototype.__proto__ || (0, i.default)(t.prototype), "connect", this).call(this), 
this.io = this.io.connect(e.uri, e.opts), this.initListener();
}
}, {
key: "doEmit",
value: function(e, t, n) {
this.io.emit(e, t, n);
}
}, {
key: "initListener",
value: function() {
var e = this;
this.io.on("reconnecting", function(t) {
e.status = u.default.CONNECTING, e.notify(e.reconnectingObservers, t);
}), this.io.on("connect", function() {
e.status = u.default.CONNECTED, e.notify(e.connectedObservers);
}), this.io.on("disconnect", function() {
e.status = u.default.DISCONNECTED, e.notify(e.disconnectedObservers);
}), this.io.on("connect_error", function() {});
}
}, {
key: "addReconnectingObserver",
value: function(e) {
this.reconnectingObservers.push(e);
}
} ]), t;
}(l.default);
t.default = h;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = o(n(0)), a = o(n(1)), r = n(6);
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
var s = function() {
function e(t) {
(0, i.default)(this, e), this.callback = r.noop, this.guidList = [], this.callback = t;
}
return (0, a.default)(e, [ {
key: "onMessage",
value: function(e, t) {
"string" == typeof t && (t = JSON.parse(t)), this.guidList.findIndex(function(e) {
return e === t.i;
}) > -1 || (this.guidList.unshift(t.i), this.guidList.length > 300 && this.guidList.pop(), 
this.callback(t));
}
} ]), e;
}();
t.default = s;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = l(n(25)), a = l(n(5)), r = l(n(0)), o = l(n(1)), s = n(6), c = n(113);
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = function() {
function e(t) {
(0, r.default)(this, e), this.goEasySocket = null, this.goEasySocket = t, this.support() && (this.GoEasyUniapp = uni.requireNativePlugin("GoEasy-Uniapp"), 
t.addMessageObserver("imMessage", this.onNewMessageReceived.bind(this)), t.addMessageObserver("message", this.onNewMessageReceived.bind(this)));
}
return (0, o.default)(e, [ {
key: "onNewMessageReceived",
value: function(e) {
this.createLocalNotification(e);
}
}, {
key: "createLocalNotification",
value: function(e) {
if (s.calibrator.isObject(e.nt) && !0 === c.uniApp.runningBackend()) {
var t = e.nt.t, n = e.nt.c;
this.GoEasyUniapp ? this.GoEasyUniapp.createLocalNotification(t, n) : plus.push.createMessage(n, null, {
title: t
});
}
}
}, {
key: "getRegId",
value: function() {
var e = this;
return new a.default(function(t) {
try {
e.GoEasyUniapp ? e.GoEasyUniapp.regId(function(e) {
t(e);
}, function(n) {
if (1e6 == n.data.code) var a = setInterval(function() {
e.GoEasyUniapp.regId(function(e) {
clearInterval(a), t(e);
}, function(e) {
1e6 != e.data.code && (clearInterval(a), console.error("注册厂商通道失败：" + (0, i.default)(e)), 
t());
});
}, 5e3); else console.error("注册厂商通道失败：" + (0, i.default)(n)), t();
}) : (console.error("注册厂商通道失败：GoEasy-Uniapp is not installed correctly"), t());
} catch (e) {
console.error("注册厂商通道失败：" + (0, i.default)(e)), t();
}
});
}
}, {
key: "support",
value: function() {
return s.env.isUni() && !0 === this.goEasySocket.allowNotification && s.env.isSupportHtmlPlus() && !s.env.isBrowserClient();
}
} ]), e;
}();
t.default = u;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.connection = void 0;
var i = s(n(5)), a = s(n(0)), r = s(n(1)), o = n(24);
n(21), s(n(10)), n(14), s(n(13));
function s(e) {
return e && e.__esModule ? e : {
default: e
};
}
var c = function() {
function e(t) {
(0, a.default)(this, e), this.im = null, this.im = t;
}
return (0, r.default)(e, [ {
key: "connect",
value: function() {
var e = this;
return new i.default(function(t, n) {
e.im._goEasySocket.addConnectedObserver(function() {
e.im._event.notify(o.ImEventType.CONNECTED), t();
}), e.im._goEasySocket.addConnectFailedObserver(function(e) {
n({
code: e.resultCode || 408,
content: e.content || "Failed to connect GoEasy"
});
}), e.im._goEasySocket.addConnectingObserver(function(t) {
e.im._event.notify(o.ImEventType.CONNECTING, t);
}), e.im._goEasySocket.addDisconnectedObserver(function() {
e.im._event.notify(o.ImEventType.DISCONNECT), n({
code: 400,
content: "GoEasy disconnected."
});
}), e.im._goEasySocket.connect();
});
}
}, {
key: "disconnect",
value: function() {
var e = this;
return new i.default(function(t, n) {
e.im._goEasySocket.disconnect().then(function() {
t();
}).catch(function(e) {
n(e);
});
});
}
} ]), e;
}();
t.default = c;
var l = new c();
t.connection = l;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = g(n(25)), a = g(n(5)), r = g(n(0)), o = g(n(1)), s = g(n(232)), c = g(n(13)), l = n(31), u = g(n(10)), d = n(14), h = g(n(49)), f = n(26), p = g(n(40)), m = n(6);
function g(e) {
return e && e.__esModule ? e : {
default: e
};
}
var v = function() {
function e(t) {
(0, r.default)(this, e), this.im = null, this.bulletMessageBuilder = null, this.im = t, 
this.bulletMessageBuilder = new s.default(t);
}
return (0, o.default)(e, [ {
key: "send",
value: function(e, t, n) {
var i = this;
return new a.default(function(a, r) {
t.status === h.default.new ? (t.status = h.default.sending, i.bulletMessageBuilder.build(e, t, n).then(function(e) {
var n = new c.default({
name: d.EmitType.publishIM,
params: e,
permission: u.default.WRITE,
singleTimeout: l.SocketTimeout.commonRequestSingle,
totalTimeout: l.SocketTimeout.commonRequestTotal,
fail: function(e) {
t.status = h.default.fail, r({
code: e.resultCode || 408,
content: e.content || "Failed to send private message."
});
},
success: function(e) {
t.status = h.default.success, 200 == e.resultCode ? a({
code: 200,
content: e.content
}) : r(e);
}
});
i.im._goEasySocket.emit(n);
}).catch(function(e) {
r({
code: e.code || 400,
content: e.content || e
});
})) : r({
code: 400,
content: "Please create a new message, a message can only be sent once"
});
});
}
}, {
key: "sendMessage",
value: function(e) {
var t = this, n = this.im;
return new a.default(function(a, r) {
if (e instanceof p.default) if (e.status === h.default.new) {
e.status = h.default.sending;
var o = e.to;
if (delete e.to, o) if (!o.type || o.type != f.ConversationType.GROUP && o.type != f.ConversationType.PRIVATE) r({
code: 400,
content: "message require property to.type"
}); else if (o.id) if (o.data && m.calibrator.isFunction(o.data)) r({
code: 400,
content: "to.data can not be function"
}); else {
var s = e.notification;
if (s) if (m.calibrator.isObject(s)) {
if (m.calibrator.isEmpty(s.title)) return void r({
code: 400,
content: "notification title is required"
});
if (!m.calibrator.isString(s.title)) return void r({
code: 400,
content: "notification title must be string"
});
if (m.calibrator.isEmpty(e.notification.body)) return void r({
code: 400,
content: "notification body is required"
});
if (!m.calibrator.isString(e.notification.body)) return void r({
code: 400,
content: "notification body must be string"
});
} else if (m.calibrator.isPrimitive(e.notification)) return void r({
code: 400,
content: "notification must be an json object"
});
o.data || (o.data = {}), n._conversations.updateByOutMessage(e, o.type, o.id, o.data), 
t.bulletMessageBuilder.build(o.id, e, o.type).then(function(t) {
t.d = (0, i.default)(o.data);
var s = new c.default({
name: d.EmitType.publishIM,
params: t,
permission: u.default.WRITE,
singleTimeout: l.SocketTimeout.commonRequestSingle,
totalTimeout: l.SocketTimeout.commonRequestTotal,
fail: function(t) {
e.status = h.default.fail, r({
code: t.resultCode || 408,
content: t.content || "Failed to send private message."
});
},
success: function(t) {
e.status = h.default.success, e.timestamp = t.content.timestamp, a(e), n._conversations.updateByOutMessage(e, o.type, o.id, o.data);
}
});
n._goEasySocket.emit(s);
}).catch(function(e) {
r({
code: e.code || 400,
content: e.content || e
});
});
} else r({
code: 400,
content: "message require property to.id"
}); else r({
code: 400,
content: "message require property to."
});
} else r({
code: 400,
content: "Please create a new message, a message can only be sent once"
}); else r({
code: 400,
content: "it is invalid message"
});
});
}
} ]), e;
}();
t.default = v;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = l(n(25)), a = l(n(5)), r = l(n(0)), o = l(n(1)), s = l(n(233)), c = l(n(234));
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = function() {
function e(t) {
(0, r.default)(this, e), this.im = null, this.im = t;
}
return (0, o.default)(e, [ {
key: "build",
value: function(e, t, n) {
var r = this;
return new a.default(function(a, o) {
var l = new s.default({
to: e,
message: t,
conversationType: n
}), u = t.type;
new c.default(u, r.im).build(t).then(function(e) {
l.p = (0, i.default)(e), a(l);
}).catch(function(e) {
o(e);
});
});
}
} ]), e;
}();
t.default = u;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(25)), a = d(n(0)), r = d(n(1)), o = n(15), s = d(n(40)), c = d(n(102)), l = d(n(9)), u = d(n(39));
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function() {
function e(t) {
(0, a.default)(this, e), this.mt = null, this.to = null, this.p = null, this.t = null, 
this.guid = null, this.nt = null, this.validate(t.to, t.message), this.mt = t.message.type, 
this.to = t.to, this.t = t.conversationType, this.guid = t.message.messageId, this.p = t.message.payload, 
this.nt = t.message.notification;
}
return (0, r.default)(e, [ {
key: "validate",
value: function(e, t) {
if (!(t instanceof s.default)) throw Error("createMessage first.");
if (o.calibrator.isEmpty(e)) throw Error("userId is empty.");
if (!o.calibrator.isStringOrNumber(e)) throw Error("userId should be a string or number.");
if (u.default.userId == e) throw Error("userId can not be the same as your id.");
if (t.type == l.default.text) {
if (!(t instanceof c.default)) throw Error("it is not textMessage");
if ((o.calibrator.isObject(t.payload) ? (0, i.default)(t.payload).length : t.payload.length) > 3072) throw Error("message-length limit 3kb");
}
}
} ]), e;
}();
t.default = h;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = c(n(0)), a = n(235), r = c(n(236)), o = c(n(115)), s = c(n(9));
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
t.default = function e(t, n) {
return (0, i.default)(this, e), t == s.default.video ? new r.default(n) : t == s.default.audio || t == s.default.image || t == s.default.file ? new o.default(n) : a.simplePayloadBuilder;
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.simplePayloadBuilder = void 0;
var i = l(n(5)), a = l(n(2)), r = l(n(0)), o = l(n(1)), s = l(n(3)), c = l(n(4));
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = new (function(e) {
function t() {
return (0, r.default)(this, t), (0, s.default)(this, (t.__proto__ || (0, a.default)(t)).call(this));
}
return (0, c.default)(t, e), (0, o.default)(t, [ {
key: "build",
value: function(e) {
return new i.default(function(t, n) {
try {
t(e.payload);
} catch (e) {
n(e);
}
});
}
} ]), t;
}(l(n(114)).default))();
t.simplePayloadBuilder = u;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(5)), a = d(n(2)), r = d(n(0)), o = d(n(1)), s = d(n(3)), c = d(n(4)), l = d(n(115)), u = d(n(116));
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function(e) {
function t(e) {
return (0, r.default)(this, t), (0, s.default)(this, (t.__proto__ || (0, a.default)(t)).call(this, e));
}
return (0, c.default)(t, e), (0, o.default)(t, [ {
key: "build",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
var a = new u.default();
t.upload(e).then(function(t) {
t.content;
a = e.payload;
var i = "?x-oss-process=video/snapshot,t_0000,f_jpg,w_" + e.payload.video.width + ",m_fast,ar_auto";
a.video.url = t.content.url, a.thumbnail.url = t.content.url + i, a.video.name = t.content.newFileName, 
n(a);
}).catch(function(e) {
i(e);
});
});
}
} ]), t;
}(l.default);
t.default = h;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.fileUploader = void 0;
var i = l(n(0)), a = l(n(1)), r = l(n(101)), o = n(238), s = n(239), c = n(240);
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = function() {
function e() {
(0, i.default)(this, e), this.uploader = {
uniApp: o.uniAppFileUploader,
wx: s.wxFileUploader,
html: c.htmlFileUploader
};
}
return (0, a.default)(e, [ {
key: "upload",
value: function(e, t) {
var n = r.default.resolve();
return this.uploader[n].upload(e, t);
}
} ]), e;
}();
t.default = u;
var d = new u();
t.fileUploader = d;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.uniAppFileUploader = void 0;
var i = l(n(5)), a = l(n(2)), r = l(n(0)), o = l(n(1)), s = l(n(3)), c = l(n(4));
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = new (function(e) {
function t() {
return (0, r.default)(this, t), (0, s.default)(this, (t.__proto__ || (0, a.default)(t)).call(this));
}
return (0, c.default)(t, e), (0, o.default)(t, [ {
key: "upload",
value: function(e, t) {
var n = this;
try {
return new i.default(function(i, a) {
uni.uploadFile({
url: e.host,
filePath: n.getTempFilePath(e),
name: "file",
formData: e.parameters,
success: function(t) {
if (200 === t.statusCode) {
var n = e.payload;
n.message = t.errMsg, i({
code: 200,
content: n
});
} else a({
code: t.statusCode,
content: t.errMsg
});
},
fail: function(e) {
a({
code: 500,
content: e.errMsg
});
}
}).onProgressUpdate(function(e) {
t && t(e);
});
});
} catch (e) {
return new i.default(function(t, n) {
n({
code: 500,
content: e
});
});
}
}
}, {
key: "getTempFilePath",
value: function(e) {
var t = e.file || e.fileRes;
return Array.isArray(t.tempFiles) ? t.tempFiles[0].path : t.tempFilePath;
}
} ]), t;
}(l(n(77)).default))();
t.uniAppFileUploader = u;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.wxFileUploader = void 0;
var i = l(n(5)), a = l(n(2)), r = l(n(0)), o = l(n(1)), s = l(n(3)), c = l(n(4));
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = new (function(e) {
function t() {
return (0, r.default)(this, t), (0, s.default)(this, (t.__proto__ || (0, a.default)(t)).apply(this, arguments));
}
return (0, c.default)(t, e), (0, o.default)(t, [ {
key: "upload",
value: function(e, t) {
var n = this;
try {
return new i.default(function(i, a) {
wx.uploadFile({
url: e.host,
filePath: n.getTempFilePath(e),
name: "file",
formData: e.parameters,
success: function(t) {
if (200 === t.statusCode) {
var n = e.payload;
n.message = t.errMsg, i({
code: 200,
content: n
});
} else a({
code: t.statusCode,
content: t.errMsg
});
},
fail: function(e) {
a({
code: 500,
content: e.errMsg
});
}
}).onProgressUpdate(function(e) {
t && t(e);
});
});
} catch (e) {
return new i.default(function(t, n) {
n({
code: 500,
content: e
});
});
}
}
}, {
key: "getTempFilePath",
value: function(e) {
var t = e.file || e.fileRes;
return Array.isArray(t.tempFiles) ? t.tempFiles[0].path : t.tempFilePath;
}
} ]), t;
}(l(n(77)).default))();
t.wxFileUploader = u;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.htmlFileUploader = void 0;
var i = l(n(5)), a = l(n(2)), r = l(n(0)), o = l(n(1)), s = l(n(3)), c = l(n(4));
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = new (function(e) {
function t() {
return (0, r.default)(this, t), (0, s.default)(this, (t.__proto__ || (0, a.default)(t)).call(this));
}
return (0, c.default)(t, e), (0, o.default)(t, [ {
key: "upload",
value: function(e, t) {
try {
return new i.default(function(n, i) {
var a = new XMLHttpRequest();
for (var r in a.open("post", e.host, !0), e.headers) a.setRequestHeader(r, e.headers[r]);
a.upload.onprogress = function(e) {
t && t(e);
}, a.upload.onloadstart = function(e) {
t && t(e);
}, a.upload.onloadend = function(e) {
t && t(e);
};
var o = new FormData();
for (var s in e.parameters) "fileRes" == s ? o.append("file", e.parameters[s]) : o.append(s, e.parameters[s]);
a.send(o), a.onreadystatechange = function() {
if (4 == a.readyState) if (a.status >= 200 && a.status < 300 || 304 == a.status) {
var t = e.payload;
t.message = a.responseText, n({
code: 200,
content: t
});
} else i({
code: a.status,
content: a.responseText
});
};
});
} catch (e) {
return new i.default(function(t, n) {
n({
code: 500,
content: e
});
});
}
}
} ]), t;
}(l(n(77)).default))();
t.htmlFileUploader = u;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = c(n(5)), a = c(n(0)), r = c(n(1)), o = c(n(242)), s = c(n(246));
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
var l = function() {
function e(t) {
(0, a.default)(this, e), this.uploadTokenResolver = null, this.uploadTokenResolver = new s.default(t);
}
return (0, r.default)(e, [ {
key: "build",
value: function(e, t) {
var n = this;
return new i.default(function(i, a) {
n.uploadTokenResolver.resolve(t).then(function(t) {
var n = t.content;
i(new o.default(n.vendor).build(n, e));
}).catch(function(e) {
a(e);
});
});
}
} ]), e;
}();
t.default = l;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i, a = (i = n(0)) && i.__esModule ? i : {
default: i
}, r = n(243), o = n(244), s = n(245);
t.default = function e(t) {
return (0, a.default)(this, e), t == r.OssType.aliYun ? o.aliYunOSSRequestBuilder : s.qiNiuYunOSSRequestBuilder;
};
}, function(e, t) {
Object.defineProperty(t, "__esModule", {
value: !0
});
t.OssType = {
aliYun: "ALI",
qiNiu: "QN"
};
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.aliYunOSSRequestBuilder = void 0;
var i = l(n(2)), a = l(n(0)), r = l(n(1)), o = l(n(3)), s = l(n(4)), c = l(n(118));
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = function(e) {
function t() {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
}
return (0, s.default)(t, e), (0, r.default)(t, [ {
key: "url",
value: function(e) {
return e.host + "/" + e.dir + "/" + this.newFileName(e);
}
}, {
key: "build",
value: function(e, t) {
var n = {
key: e.dir + "/" + this.newFileName(e),
OSSAccessKeyId: e.accessKeyId,
policy: e.policy,
signature: e.signature,
success_action_status: "200",
fileRes: t
}, i = {
newFileName: this.newFileName(e),
url: this.url(e)
};
return new c.default(e.host, null, n, t, i);
}
} ]), t;
}(l(n(119)).default);
t.default = u;
var d = new u();
t.aliYunOSSRequestBuilder = d;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
}), t.qiNiuYunOSSRequestBuilder = void 0;
var i = u(n(2)), a = u(n(0)), r = u(n(1)), o = u(n(3)), s = u(n(4)), c = u(n(119)), l = u(n(118));
function u(e) {
return e && e.__esModule ? e : {
default: e
};
}
var d = new (function(e) {
function t() {
return (0, a.default)(this, t), (0, o.default)(this, (t.__proto__ || (0, i.default)(t)).call(this));
}
return (0, s.default)(t, e), (0, r.default)(t, [ {
key: "url",
value: function(e) {
return e.downloadUrl;
}
}, {
key: "build",
value: function(e, t) {
var n = {
key: this.newFileName(e),
token: e.token,
file: t
}, i = {
newFileName: this.newFileName(e),
url: this.url(e)
};
return new l.default(e.host, null, n, t, i);
}
} ]), t;
}(c.default))();
t.qiNiuYunOSSRequestBuilder = d;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = l(n(5)), a = l(n(0)), r = l(n(1)), o = l(n(13)), s = l(n(10)), c = n(31);
function l(e) {
return e && e.__esModule ? e : {
default: e
};
}
var u = function() {
function e(t) {
(0, a.default)(this, e), this.im = null, this.im = t;
}
return (0, r.default)(e, [ {
key: "resolve",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
var a = new o.default({
name: "uploadToken",
params: {
filename: e
},
permission: s.default.WRITE,
singleTimeout: c.SocketTimeout.commonRequestSingle,
totalTimeout: c.SocketTimeout.commonRequestTotal,
fail: function(e) {
i(e);
},
success: function(e) {
200 == e.code ? n(e) : i(e);
}
});
t.im._goEasySocket.emit(a);
});
}
} ]), e;
}();
t.default = u;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = h(n(16)), a = h(n(5)), r = h(n(0)), o = h(n(1)), s = n(15), c = h(n(13)), l = h(n(10)), u = n(31), d = n(14);
function h(e) {
return e && e.__esModule ? e : {
default: e
};
}
var f = function() {
function e(t) {
(0, r.default)(this, e), this.im = null, this.im = t;
}
return (0, o.default)(e, [ {
key: "history",
value: function(e) {
var t = this;
return new a.default(function(n, i) {
t.transformOptions(e);
var a = new c.default({
name: d.EmitType.imHistory,
params: e,
permission: l.default.READ,
singleTimeout: u.SocketTimeout.commonQuerySingle,
totalTimeout: u.SocketTimeout.commonQueryTotal,
fail: function(e) {
i({
code: e.code || 408,
content: e.content || "Failed to query message"
});
},
success: function(a) {
if (200 == a.code) {
var r = t.transformHistories(a, e);
n({
code: 200,
content: r
});
} else i(a);
}
});
t.im._goEasySocket.emit(a);
});
}
}, {
key: "transformOptions",
value: function(e) {
if (!s.calibrator.isObject(e) || !s.calibrator.isDef(e.friendId) && !s.calibrator.isDef(e.groupId)) throw Error("friendId or groupId is not define.");
if (s.calibrator.isDef(e.friendId) && s.calibrator.isDef(e.groupId)) throw Error("only contain friendId or groupId.");
if (s.calibrator.isDef(e.limit) || (e.limit = 10), e.limit > 30 && (e.limit = 30), 
s.calibrator.isDef(e.friendId)) {
if (!s.calibrator.isStringOrNumber(e.friendId)) throw Error("TypeError: friendId require string or number.");
s.calibrator.isNumber(e.friendId) && (e.friendId = e.friendId.toString());
} else {
if (!s.calibrator.isStringOrNumber(e.groupId)) throw Error("TypeError: groupId require string or number.");
s.calibrator.isNumber(e.groupId) && (e.groupId = e.groupId.toString());
}
return e;
}
}, {
key: "transformHistories",
value: function(e, t) {
var n = [];
return e && e.content && e.content.map(function(e) {
var a = (0, i.default)(null);
a.timestamp = e.ts, a.senderId = e.s, a.type = e.mt, a.payload = "string" == typeof e.p ? JSON.parse(e.p) : e.p, 
t.groupId && e.d && (a.senderData = JSON.parse(e.d)), n.push(a);
}), n;
}
} ]), e;
}();
t.default = f;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = p(n(5)), a = p(n(0)), r = p(n(1)), o = p(n(13)), s = n(14), c = p(n(10)), l = n(21), u = n(26), d = p(n(48)), h = n(6), f = n(24);
function p(e) {
return e && e.__esModule ? e : {
default: e
};
}
var m = function() {
function e(t) {
(0, a.default)(this, e), this.im = null, this.im = t, t._iMReceiver.addIMMessageObserver(this.newNewMessageReceived.bind(this));
}
return (0, r.default)(e, [ {
key: "newNewMessageReceived",
value: function(e) {
if (e.t === u.ConversationType.GROUP) {
var t = d.default.assemble(e);
this.im._event.notify(f.ImEventType.GROUP_MESSAGE_RECEIVED, t);
}
}
}, {
key: "subscribe",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
if (Array.isArray(e) && 0 != e.length) {
for (var a = 0; a < e.length; a++) {
if (!h.calibrator.isStringOrNumber(e[a])) return void i({
code: 400,
content: "TypeError: groups item require string or number."
});
h.calibrator.isNumber(e[a]) && (e[a] = e[a].toString());
}
var r = new o.default({
name: s.EmitType.subscribeGroups,
params: {
groupIds: e
},
permission: c.default.WRITE,
singleTimeout: l.SocketTimeout.commonInfiniteSingle,
totalTimeout: l.SocketTimeout.commonInfiniteTotal,
success: function() {
n({
code: 200,
content: "ok"
});
},
fail: function(e) {
i({
code: e.resultCode || 408,
content: e.content || "Failed to subscribe group message"
});
}
});
t.im._goEasySocket.emit(r);
} else i({
code: 400,
content: "TypeError: groups require array."
});
});
}
}, {
key: "unsubscribe",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
if (h.calibrator.isStringOrNumber(e)) {
e = e.toString();
var a = new o.default({
name: s.EmitType.unsubscribeGroup,
params: {
groupId: e
},
permission: c.default.READ,
singleTimeout: l.SocketTimeout.commonRequestSingle,
totalTimeout: l.SocketTimeout.commonRequestTotal,
success: function() {
n({
code: 200,
content: "ok"
});
},
fail: function(e) {
i({
code: e.resultCode || 408,
content: e.content || "Failed to unsubscribe group message"
});
}
});
t.im._goEasySocket.emit(a);
} else i({
code: 400,
content: "TypeError: channel require string or number."
});
});
}
} ]), e;
}();
t.default = m;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = c(n(0)), a = c(n(1)), r = c(n(48)), o = n(26), s = n(24);
function c(e) {
return e && e.__esModule ? e : {
default: e
};
}
var l = function() {
function e(t) {
(0, i.default)(this, e), this.im = null, this.im = t, t._iMReceiver.addIMMessageObserver(this.onNewMessageReceived.bind(this));
}
return (0, a.default)(e, [ {
key: "onNewMessageReceived",
value: function(e) {
if (e.t === o.ConversationType.PRIVATE) {
var t = r.default.assemble(e);
this.im._event.notify(s.ImEventType.PRIVATE_MESSAGE_RECEIVED, t);
}
}
} ]), e;
}();
t.default = l;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(5)), a = d(n(0)), r = d(n(1)), o = d(n(13)), s = n(14), c = d(n(10)), l = n(21), u = n(6);
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function() {
function e(t) {
(0, a.default)(this, e), this.im = null, this.im = t;
}
return (0, r.default)(e, [ {
key: "get",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
if (u.calibrator.isStringOrNumber(e)) {
u.calibrator.isNumber(e) && (e = e.toString());
var a = new o.default({
name: s.EmitType.imGroupOnlineCount,
params: {
groupId: e
},
permission: c.default.READ,
singleTimeout: l.SocketTimeout.commonQuerySingle,
totalTimeout: l.SocketTimeout.commonQueryTotal,
fail: function(e) {
i(e || {
code: 408,
content: "Failed to query online group users"
});
},
success: function(e) {
200 == e.code ? n(e) : i(e);
}
});
t.im._goEasySocket.emit(a);
} else i({
code: 400,
content: "TypeError: groupId require string or number."
});
});
}
} ]), e;
}();
t.default = h;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = f(n(5)), a = f(n(0)), r = f(n(1)), o = f(n(13)), s = f(n(10)), c = n(31), l = n(14), u = n(6), d = n(24), h = f(n(78));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
var p = function() {
function e(t) {
(0, a.default)(this, e), this.im = null, this.im = t, t._goEasySocket.addMessageObserver(h.default.groupPresence, this.newMessageReceived.bind(this));
}
return (0, r.default)(e, [ {
key: "presence",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
if (Array.isArray(e) && 0 != e.length) {
for (var a = 0; a < e.length; a++) {
if (!u.calibrator.isStringOrNumber(e[a])) return void i({
code: 400,
content: "TypeError: groupIds item require string or number."
});
if (u.calibrator.isNumber(e[a]) && (e[a] = e[a].toString()), 0 == e[a].length) return void i({
code: 400,
content: "TypeError: groupIds has empty item."
});
}
var r = {
groupIds: e
};
t.emitRocket(l.EmitType.subscribeGroupPresence, r, function() {
n({
code: 200,
content: "ok"
});
}, function(e) {
i({
code: e.code || 408,
content: e.content || "Failed to subscribe group message"
});
}, c.SocketTimeout.commonInfiniteSingle, c.SocketTimeout.commonInfiniteTotal);
} else i({
code: 400,
content: "TypeError: groupIds require array."
});
});
}
}, {
key: "unPresence",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
if (u.calibrator.isStringOrNumber(e)) {
u.calibrator.isNumber(e) && (e = e.toString());
var a = {
groupId: e
};
t.emitRocket(l.EmitType.unsubscribeGroupPresence, a, function() {
n({
code: 200,
content: "ok"
});
}, function(e) {
i({
code: e.code || 408,
content: e.content || "Failed to unsubscribe presence"
});
}, c.SocketTimeout.commonRequestSingle, c.SocketTimeout.commonRequestTotal);
} else i({
code: 400,
content: "TypeError: groupId require string or number."
});
});
}
}, {
key: "emitRocket",
value: function(e, t, n, i, a, r) {
var c = new o.default({
name: e,
params: t,
singleTimeout: a,
totalTimeout: r,
permission: s.default.WRITE,
success: n,
fail: i
});
this.im._goEasySocket.emit(c);
}
}, {
key: "newMessageReceived",
value: function(e) {
var t = this, n = null;
e.c && (n = JSON.parse(e.c)), n && n.events && n.events.map(function(e) {
e.groupOnlineCount = n.userAmount, e.groupId = n.channel, "string" == typeof e.userData && (e.userData = JSON.parse(e.userData)), 
t.im._event.notify(d.ImEventType.GROUP_PRESENCE, e);
});
}
} ]), e;
}();
t.default = p;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = f(n(5)), a = f(n(0)), r = f(n(1)), o = f(n(13)), s = f(n(10)), c = n(31), l = n(14), u = n(6), d = n(24), h = f(n(78));
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
var p = function() {
function e(t) {
(0, a.default)(this, e), this.im = null, this.im = t, this.im._goEasySocket.addMessageObserver(h.default.userPresence, this.newMessageReceived.bind(this));
}
return (0, r.default)(e, [ {
key: "presence",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
if (Array.isArray(e) && 0 != e.length) {
for (var a = 0; a < e.length; a++) {
if (!u.calibrator.isStringOrNumber(e[a])) return void i({
code: 400,
content: "TypeError: userIds item require string or number."
});
if (u.calibrator.isNumber(e[a]) && (e[a] = e[a].toString()), 0 == e[a].length) return void i({
code: 400,
content: "TypeError: userIds has empty item."
});
}
var r = {
userIds: e
};
t.emitRocket(l.EmitType.subscribeUserPresence, r, function() {
n({
code: 200,
content: "ok"
});
}, function(e) {
i({
code: e.code || 408,
content: e.content || "Failed to subscribe group message"
});
}, c.SocketTimeout.commonInfiniteSingle, c.SocketTimeout.commonInfiniteTotal);
} else i({
code: 400,
content: "TypeError: userIds require array."
});
});
}
}, {
key: "unPresence",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
if (u.calibrator.isStringOrNumber(e)) {
u.calibrator.isNumber(e) && (e = e.toString());
var a = {
userId: e
};
t.emitRocket(l.EmitType.unsubscribeUserPresence, a, function() {
n({
code: 200,
content: "ok"
});
}, function(e) {
i({
code: e.code || 408,
content: e.content || "Failed to unsubscribe presence"
});
}, c.SocketTimeout.commonRequestSingle, c.SocketTimeout.commonRequestTotal);
} else i({
code: 400,
content: "TypeError: id require string or number."
});
});
}
}, {
key: "emitRocket",
value: function(e, t, n, i, a, r) {
var c = new o.default({
name: e,
params: t,
singleTimeout: a,
totalTimeout: r,
permission: s.default.WRITE,
success: n,
fail: i
});
this.im._goEasySocket.emit(c);
}
}, {
key: "newMessageReceived",
value: function(e) {
var t = this, n = [];
e.c && (n = JSON.parse(e.c).events || []), n.map(function(e) {
"string" == typeof e.userData && (e.userData = JSON.parse(e.userData)), t.im._event.notify(d.ImEventType.USER_PRESENCE, e);
});
}
} ]), e;
}();
t.default = p;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(5)), a = d(n(0)), r = d(n(1)), o = n(14), s = d(n(13)), c = d(n(10)), l = n(21), u = n(6);
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function() {
function e(t) {
(0, a.default)(this, e), this.im = null, this.im = t;
}
return (0, r.default)(e, [ {
key: "hereNow",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
if (e.userIds && Array.isArray(e.userIds) && 0 != e.userIds.length) {
for (var a = 0; a < e.userIds.length; a++) {
if (!u.calibrator.isStringOrNumber(e.userIds[a])) return void i({
code: 400,
content: "TypeError: userIds item require string or number."
});
if (u.calibrator.isNumber(e.userIds[a]) && (e.userIds[a] = e.userIds[a].toString()), 
0 == e.userIds[a].length) return void i({
code: 400,
content: "TypeError: userIds has empty item."
});
}
var r = new s.default({
name: o.EmitType.imHereNow,
params: e,
permission: c.default.READ,
singleTimeout: l.SocketTimeout.commonQuerySingle,
totalTimeout: l.SocketTimeout.commonQueryTotal,
fail: function(e) {
i({
code: e.resultCode || 408,
content: e.content || "Failed to query online users"
});
},
success: function(e) {
200 == e.code ? n(e) : i(e);
}
});
t.im._goEasySocket.emit(r);
} else i({
code: 400,
content: "TypeError: userIds require array."
});
});
}
} ]), e;
}();
t.default = h;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = d(n(5)), a = d(n(0)), r = d(n(1)), o = n(14), s = d(n(13)), c = d(n(10)), l = n(21), u = n(15);
function d(e) {
return e && e.__esModule ? e : {
default: e
};
}
var h = function() {
function e(t) {
(0, a.default)(this, e), this.im = null, this.im = t;
}
return (0, r.default)(e, [ {
key: "hereNow",
value: function(e) {
var t = this;
return new i.default(function(n, i) {
if (u.calibrator.isStringOrNumber(e)) {
u.calibrator.isNumber(e) && (e = e.toString());
var a = new s.default({
name: o.EmitType.imGroupHereNow,
params: {
groupId: e
},
permission: c.default.READ,
singleTimeout: l.SocketTimeout.commonQuerySingle,
totalTimeout: l.SocketTimeout.commonQueryTotal,
fail: function(e) {
i({
code: e.resultCode || 408,
content: e.content || "Failed to query online group users"
});
},
success: function(e) {
200 == e.code ? n(e) : i(e);
}
});
t.im._goEasySocket.emit(a);
} else i({
code: 400,
content: "TypeError: groupId require string or number."
});
});
}
} ]), e;
}();
t.default = h;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = o(n(0)), a = o(n(1)), r = o(n(78));
function o(e) {
return e && e.__esModule ? e : {
default: e
};
}
var s = function() {
function e(t) {
(0, i.default)(this, e), this.im = null, this.observers = [], this.im = t, t._goEasySocket.addMessageObserver(r.default.imMessage, this.newNewMessageReceived.bind(this));
}
return (0, a.default)(e, [ {
key: "newNewMessageReceived",
value: function(e) {
this.sendAck(e), this.notify(e);
}
}, {
key: "addIMMessageObserver",
value: function(e) {
this.observers.push(e);
}
}, {
key: "sendAck",
value: function(e) {
this.im._goEasySocket.sendAck("imAck", {
publishGuid: e.i
});
}
}, {
key: "notify",
value: function(e) {
for (var t = 0; t < this.observers.length; t++) this.observers[t](e);
}
} ]), e;
}();
t.default = s;
}, function(e, t, n) {
Object.defineProperty(t, "__esModule", {
value: !0
});
var i = f(n(25)), a = f(n(73)), r = f(n(5)), o = f(n(0)), s = f(n(1)), c = f(n(13)), l = n(14), u = f(n(10)), d = n(21), h = n(26);
function f(e) {
return e && e.__esModule ? e : {
default: e
};
}
var p = function() {
function e(t, n) {
(0, o.default)(this, e), this.im = null, this.userData = {}, this.groupData = {}, 
this.im = t, this.putUserData(n.id, n.data);
}
return (0, s.default)(e, [ {
key: "putData",
value: function(e, t, n) {
n || (n = {}), e == h.ConversationType.PRIVATE ? this.userData[t] = n : this.groupData[t] = n;
}
}, {
key: "putUserData",
value: function(e, t) {
this.userData[e] = t;
}
}, {
key: "putGroupData",
value: function(e, t) {
this.groupData[e] = t;
}
}, {
key: "loadData",
value: function(e, t) {
var n = this;
return new r.default(function(r, o) {
var s = void 0;
if ((s = h.ConversationType.PRIVATE === t ? n.userData : n.groupData)[e] && 0 != (0, 
a.default)(s[e]).length) r(s[e]); else {
var f = {
targetId: e,
type: t
}, p = new c.default({
name: l.EmitType.imData,
params: f,
permission: u.default.READ,
singleTimeout: d.SocketTimeout.commonQuerySingle,
totalTimeout: d.SocketTimeout.commonQueryTotal,
success: function(t) {
t.content || (t.content = (0, i.default)({})), s[e] = JSON.parse(t.content), r(s[e]);
},
fail: function(e) {
o(e);
}
});
n.im._goEasySocket.emit(p);
}
});
}
} ]), e;
}();
t.default = p;
}, function(e) {
e.exports = {
name: "goeasy-js",
version: "1.2.0",
keywords: [ "realtime", "framework", "websocket", "tcp", "events", "client" ],
scripts: {
build: "npm run build-goeasy & npm run build-goeasy-dev & npm run build-goeasyim & npm run build-goeasyim-dev",
"build-goeasy": "webpack --config build/webpack.goeasy.config.js",
"build-goeasy-dev": "webpack --config build/webpack.goeasy-dev.config.js",
"build-goeasyim": "webpack --config build/webpack.goeasyim.config.js",
"build-goeasyim-dev": "webpack --config build/webpack.goeasyim-dev.config.js"
},
license: "MIT",
dependencies: {
"socket.io-client-goeasy": "./dependencies/socket.io-client-goeasy"
},
devDependencies: {
"babel-core": "^6.26.3",
"babel-loader": "^7.1.4",
"babel-plugin-add-module-exports": "^0.2.1",
"babel-plugin-transform-class-properties": "^6.24.1",
"babel-plugin-transform-runtime": "^6.23.0",
"babel-preset-env": "^1.7.0",
"babel-runtime": "^6.26.0",
"core-js": "^3.7.0",
"es3ify-loader": "^0.2.0",
"strip-loader": "^0.1.2",
"uglifyjs-webpack-plugin": "^1.3.0",
uuid: "^3.3.2",
webpack: "^3.12.0"
}
};
} ]);
}, "object" == typeof n && "object" == typeof t ? t.exports = a() : "function" == typeof define && define.amd ? define([], a) : "object" == typeof n ? n.GoEasyIM = a() : i.GoEasyIM = a();
var i, a;
cc._RF.pop();
}).call(this, e("buffer").Buffer);
}, {
buffer: 6
} ],
"hands-card": [ function(e, t, n) {
"use strict";
cc._RF.push(t, "5cb48eINRVGe7CRBp/uP2pG", "hands-card");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d = e("../../../GameBase/GameConfig"), h = y(e("../../../Main/Script/ROUTE")), f = function(e) {
if (e && e.__esModule) return e;
if (null === e || "object" != typeof e && "function" != typeof e) return {
default: e
};
var t = b(void 0);
if (t && t.has(e)) return t.get(e);
var n = {}, i = Object.defineProperty && Object.getOwnPropertyDescriptor;
for (var a in e) if ("default" !== a && Object.prototype.hasOwnProperty.call(e, a)) {
var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a];
}
n.default = e;
t && t.set(e, n);
return n;
}(e("../../../Main/Script/TableInfo")), p = (y(e("./queue")), y(e("../../../Main/Script/utils"))), m = y(e("../../../Main/NetWork/Connector")), g = y(e("../../../Main/Script/Cache")), v = y(e("../../../Main/Script/audio-ctrl")), C = y(e("../../../GamePoker/Game07/Script/Logic07"));
function b(e) {
if ("function" != typeof WeakMap) return null;
var t = new WeakMap(), n = new WeakMap();
return (b = function(e) {
return e ? n : t;
})(e);
}
function y(e) {
return e && e.__esModule ? e : {
default: e
};
}
function S(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function _(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function T(e, t, n) {
t && _(e.prototype, t);
n && _(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
function E(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function A(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
I(e, t);
}
function I(e, t) {
return (I = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function N(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var w = cc._decorator, D = w.ccclass, P = w.property, M = (i = P(cc.Prefab), a = P(cc.Node), 
r = P(cc.Node), D(o = (s = function(e) {
A(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
S(t = e.call.apply(e, [ this ].concat(i)) || this, "preCard", c, E(t));
S(t, "btnPlayCards", l, E(t));
S(t, "btnTips", u, E(t));
t.nodeCards = [];
t.nodeLbl = [];
t._handsCard = [];
return t;
}
var n = t.prototype;
n.cutCards = function(e) {
this._handsCard = e;
this.renderHandCards(!0);
};
n.onLoad = function() {
d.GameConfig.isTest && this.touchEvent();
};
n.renderHandCards = function(e) {
var t = this;
void 0 === e && (e = !1);
this.node.destroyAllChildren();
this.nodeCards = [];
this.nodeLbl = [];
if (0 != this._handsCard.length) {
Math.ceil(this._handsCard.length / 2);
this._handsCard.forEach(function(n, i) {
var a = cc.instantiate(t.preCard);
a.getComponent("ModuleCards07").init(n);
a.width = 1.3 * a.width;
a.height = 1.3 * a.height;
a.parent = t.node;
a.name = n + "";
a._prior = !1;
a._before = !1;
a.active = !e;
a._value = n;
a.isZhankai = !1;
a.setPosition(-t._handsCard.length / 2 * 70 - 30 + 70 * (i + 1), -t.node.height / 2 + a.height / 2);
a.pos0 = cc.v2(a.x, a.y);
a.pos1 = cc.v2(a.x, a.y + 15);
a.zIndex = i;
if (e) {
a.active = !0;
a && (a.opacity = 0);
a.runAction(cc.sequence(cc.delayTime(i / t._handsCard.length), cc.fadeIn(.2)));
}
t.nodeCards.push(a);
});
}
};
n.removeHandsCard = function(e) {
void 0 === e && (e = []);
if (0 != e.length) {
var t = this.handsCard.concat();
e.forEach(function(e) {
for (var n = 0; n < t.length; n++) {
var i = t.findIndex(function(t) {
return e == t;
});
if (i >= 0) {
t.splice(i, 1);
return;
}
}
});
this.handsCard = t;
}
};
n.touchEvent = function() {
var e = this;
this.node.on(cc.Node.EventType.TOUCH_START, function(t) {
e.onTouchBegan(t, "touchstart");
});
this.node.on(cc.Node.EventType.TOUCH_MOVE, function(t) {
e.onTouchBegan(t, "touchmove");
});
this.node.on(cc.Node.EventType.TOUCH_END, function() {
e.nodeCards.forEach(function(e) {
e.getChildByName("bgCardMask").active = !1;
});
e.checkCurrent();
});
this.node.on(cc.Node.EventType.TOUCH_CANCEL, function() {
e.checkCurrent();
});
};
n.onTouchBegan = function(e, t) {
f.default.isWai = !0;
var n = e.target.convertToNodeSpaceAR(e.getLocation());
if (0 != this.nodeCards.length) for (var i = 0; i < this.nodeCards.length; i++) {
var a = this.nodeCards[i], r = this.nodeCards[i].getBoundingBox();
i != this.nodeCards.length - 1 && (r.width = this.nodeCards[i + 1].x - this.nodeCards[i].x);
if (r.contains(n)) {
f.default.isWai = !1;
this.checkStatus(a, t);
}
}
};
n.checkStatus = function(e, t) {
var n = e.getChildByName("bgCardMask"), i = cc.url.raw("resources/Audio/Common/cardEffect.mp3");
if ("touchmove" != t || e._prior != this.firstCheck) {
if ("touchstart" == t) {
this.firstCheck = !e._prior;
n.active = !0;
}
e._prior = !e._prior;
e.position = e._prior ? e.pos1 : e.pos0;
v.default.getInstance().playSFX(i);
} else n.active = !0;
};
n.checkCurrent = function() {
f.default.select = null;
var e = [], t = [];
this.nodeCards.forEach(function(n) {
if (n._prior) {
e.push(n._value);
t.push(n);
}
});
var n = this.btnPlayCards.getComponent(cc.Button), i = C.default.checkCard(e, this.nodeCards.length, f.default.config, f.default.current), a = null;
p.default.isNullOrEmpty(i.cardList) || (a = i.cardList);
p.default.isNullOrEmpty(i.otherCard) || t.forEach(function(e) {
if (-1 != i.otherCard.indexOf(e._value)) {
e.position = e.pos0;
e._prior = !1;
}
});
if (null != a) {
n.interactable = C.default.compare(f.default.current, a);
var r, o = this.nodeCards.findIndex(function(e) {
return 103 == e._value;
});
if (f.default.currentPlayer == f.default.idx && this.nodeCards.length == (f.default.config.ext ? 16 : 15) && o > 0 && f.default.config.black && 1 == f.default.turn && a.cards.findIndex(function(e) {
return 103 == e;
}) < 0) {
n.interactable = !1;
g.default.alertTip("必须带黑桃三");
}
f.default.select = a;
r = 2 == f.default.options.person ? (f.default.currentPlayer + 1) % 2 : (f.default.currentPlayer + 1) % 3;
if (f.default.currentPlayer == f.default.idx && 1 == n.interactable && "DAN" == a.type && 1 == f.default.baodan[r]) {
var s = [], c = [], l = 0;
this.nodeCards.forEach(function(e) {
return s.push(e._value);
});
var u = [ [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [], [] ];
s.forEach(function(e) {
u[e % 100].push(e);
});
u.forEach(function(e) {
e.length > 0 && c.push(e[0] % 100);
});
c.forEach(function(e) {
l = Math.max(e, l);
});
if (a.card != l) {
n.interactable = !1;
g.default.alertTip("下家已报单,出单牌必须出手中最大的");
}
}
} else n.interactable = !1;
};
n.tipsStart = function() {
var e = this, t = [];
this.handsCard.forEach(function(e) {
t.push(e);
});
var n = C.default.autoplay(t, f.default.current, this.node.tipsTime, f.default.config);
if (null != n) {
var i = n[this.node.tipsTime % n.length];
if (null != i && 0 != i.length) {
f.default.tipResult = [];
f.default.tipResult = i;
this.node.tipsTime++;
this.nodeCards.forEach(function(e) {
e.getChildByName("bgCardMask").active = !1;
e._prior = !1;
e.setPosition(e.pos0);
});
i.forEach(function(t) {
for (var n = 0; n < e.nodeCards.length; n++) {
var i = e.nodeCards[n];
if (i._value == t && !i._prior) {
i._prior = !0;
i.position = i.pos1;
return;
}
}
});
this.checkCurrent();
}
}
};
n.acChupai = function() {
null == this.btnPlayCards._last && (this.btnPlayCards._last = 0);
if (!(new Date().getTime() - this.btnPlayCards._last < 1e3)) {
this.btnPlayCards._last = new Date().getTime();
var e = JSON.parse(JSON.stringify(f.default.select));
m.default.gameMessage(h.default.CS_PLAY_CARD, e.cards, !0);
}
};
n.changeBtn = function(e) {
this.btnPlayCards.active = e;
this.btnTips.active = e;
};
n.playCard = function() {
this.changeBtn(!0);
this.node.tipsTime = 0;
this.btnTips.getComponent(cc.Button).interactable = null != f.default.current;
this.tipsStart();
};
T(t, [ {
key: "handsCard",
get: function() {
return this._handsCard;
},
set: function(e) {
if (this._handsCard != e) {
this._handsCard = e;
this.renderHandCards();
}
}
} ]);
return t;
}(cc.Component), c = N(s.prototype, "preCard", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), l = N(s.prototype, "btnPlayCards", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), u = N(s.prototype, "btnTips", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), s)) || o);
n.default = M;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../GamePoker/Game07/Script/Logic07": "Logic07",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/audio-ctrl": "audio-ctrl",
"../../../Main/Script/utils": "utils",
"./queue": "queue"
} ],
hulib: [ function(e, t) {
"use strict";
cc._RF.push(t, "9c906HZQqBCGqi+FoO1fdsg", "hulib");
var n = e("./table_mgr.js"), i = {};
function a() {
i = {
array_num: 0,
m_num: [ 0, 0, 0, 0 ],
m: []
};
for (var e = 0; e < 4; e++) {
i.m[e] = [];
for (var t = 0; t < 5; t++) i.m[e].push({
eye: !1,
gui_num: 0
});
}
}
a();
var r = t.exports;
r.get_hu_info = function(e, t, n, r) {
a();
var o = e.concat();
34 != t && (o[t] += 1);
var s = n, c = r, l = 0;
if (34 != s) {
l += o[s];
o[s] = 0;
}
if (34 != c) {
l += parseInt(o[c]);
o[c] = 0;
}
return !!this._split(o, l, i) && this.check_probability(i, l);
};
r.check_7dui = function(e, t) {
for (var n = 0, i = 0; i < 34; i++) e[i] % 2 != 0 && (n += 1);
return !(n > t);
};
r.check_probability = function(e, t) {
if (0 == e.array_num) return t >= 2;
if (1 == e.array_num) return !0;
for (var n = 0; n < e.m_num[0]; n++) {
var i = e.m[0][n], a = i.eye, r = t - i.gui_num;
if (this.check_probability_sub(e, a, r, 1, e.array_num)) return !0;
}
return !1;
};
r.check_probability_sub = function(e, t, n, i, a) {
for (var r = 0; r < e.m_num[i]; r++) {
var o = e.m[i][r];
if (!(t && o.eye || n < o.gui_num)) if (i < a - 1) {
if (this.check_probability_sub(e, t || o.eye, n - o.gui_num, i + 1, e.array_num)) return !0;
} else if (t || o.eye || !(o.gui_num + 2 > n)) return !0;
}
return !1;
};
r._split = function(e, t, n) {
return !!(this._split_color(e, t, 0, 0, 8, !0, n) && this._split_color(e, t, 1, 9, 17, !0, n) && this._split_color(e, t, 2, 18, 26, !0, n) && this._split_color(e, t, 3, 27, 33, !1, n));
};
r._split_color = function(e, t, n, i, a, r, o) {
for (var s = 0, c = 0, l = i; l <= a; l++) {
s = 10 * s + e[l];
c += e[l];
}
return 0 === c || !!this.list_probability(n, t, c, s, r, o);
};
r.list_probability = function(e, t, i, a, r, o) {
for (var s = !1, c = o.array_num, l = 0; l <= t; l++) {
var u = !1, d = (i + l) % 3;
if (1 != d) {
2 == d && (u = !0);
if (s || n.check(a, l, u, r)) {
var h = o.m[c][o.m_num[c]];
o.m_num[c]++;
h.eye = u;
h.gui_num = l;
s = !0;
}
}
}
if (o.m_num[c] <= 0) return !1;
o.array_num++;
return !0;
};
cc._RF.pop();
}, {
"./table_mgr.js": "table_mgr"
} ],
"native-extend": [ function(e, t) {
"use strict";
cc._RF.push(t, "0a9902osxNL8r0bksXDNdfk", "native-extend");
var n = e("../../GameBase/GameConfig").GameConfig, i = e("./Cache"), a = e("./utils"), r = e("../NetWork/Connector"), o = e("../../script/common/GameUtils").default, s = "AppController", c = "org/cocos2dx/javascript/AppActivity", l = function() {};
i.location = {
lat: 0,
long: 0
};
l.shareLinkWithSG = function(e, t, n, i, a) {
cc.sys.isNative ? cc.sys.os === cc.sys.OS_IOS ? jsb.reflection.callStaticMethod(s, "shareLinkWithSG:title:description:roomId:roomToken:", e, t, n, i, a) : jsb.reflection.callStaticMethod(c, "shareLinkWithSG", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)V", e, t, n, i, a) : cc.log(e, t, n, i);
};
l.makeCall = function(e) {
cc.sys.isNative && (cc.sys.os === cc.sys.OS_IOS ? jsb.reflection.callStaticMethod(s, "makeCall:", e) : jsb.reflection.callStaticMethod(c, "makeCall", "(Ljava/lang/String;)V", e));
};
l.openUrl = function(e) {
if (cc.sys.isNative) if (cc.sys.os === cc.sys.OS_IOS) jsb.reflection.callStaticMethod(s, "openUrl:", e); else try {
jsb.reflection.callStaticMethod(c, "openUrl", "(Ljava/lang/String;)V", e);
} catch (e) {
console.log("报错---", e.strack);
} else cc.sys.openURL(e);
};
l.selectPicture = function() {
if (cc.sys.isNative) if (cc.sys.os === cc.sys.OS_IOS) {
var e = a.getValue(n.StorageKey.UserToken, "");
jsb.reflection.callStaticMethod(s, "selectPicture:token:", r.logicUrl + n.ServerEventName.Upload, e);
} else jsb.reflection.callStaticMethod(c, "selectPicture", "()V");
};
l.selectQRCode = function() {
if (cc.sys.isNative) if (cc.sys.os === cc.sys.OS_IOS) {
var e = a.getValue(n.StorageKey.UserToken, "");
jsb.reflection.callStaticMethod(s, "selectQRCode:token:", r.logicUrl + n.ServerEventName.OTCQrCode, e);
} else jsb.reflection.callStaticMethod(c, "selectQRCode", "()V");
};
l.selectReceipt = function() {
if (cc.sys.isNative) if (cc.sys.os === cc.sys.OS_IOS) {
var e = a.getValue(n.StorageKey.UserToken, "");
jsb.reflection.callStaticMethod(s, "selectQRCode:token:", r.logicUrl + n.ServerEventName.OTCReceipt, e);
} else jsb.reflection.callStaticMethod(c, "selectQRCode", "()V");
};
l.getUUID = function() {
var e = "testDeviceId1";
cc.sys.isNative && (e = cc.sys.os === cc.sys.OS_IOS ? jsb.reflection.callStaticMethod(s, "getUUID") : jsb.reflection.callStaticMethod(c, "getUUID", "()Ljava/lang/String;"));
return e;
};
l.getIDFA = function() {
return cc.sys.isNative && cc.sys.os === cc.sys.OS_IOS && jsb.reflection.callStaticMethod(s, "getIDFA") || "";
};
l.getInviter = function() {
if (cc.sys.isNative) {
var e, t;
t = cc.sys.os === cc.sys.OS_IOS ? jsb.reflection.callStaticMethod(s, "getInviter") : jsb.reflection.callStaticMethod(c, "getInviter", "()Ljava/lang/String;");
try {
e = t;
} catch (t) {
e = "inviter=888888";
cc.log(t);
}
return e;
}
};
l.reportError = function(e) {
cc.sys.isNative && (cc.sys.os === cc.sys.OS_IOS || jsb.reflection.callStaticMethod(c, "postException", "(ILjava/lang/String;Ljava/lang/String;Ljava/lang/String;)V", 5, "CatchedError", e.message, e.stack));
};
l.setCopy = function(e) {
cc.sys.isNative && (cc.sys.os === cc.sys.OS_IOS ? jsb.reflection.callStaticMethod(s, "setCopy:", e) : jsb.reflection.callStaticMethod(c, "setCopy", "(Ljava/lang/String;)V", e));
};
l.showLocation = function() {
cc.sys.isNative && (cc.sys.os === cc.sys.OS_IOS ? jsb.reflection.callStaticMethod(s, "showLocation") : jsb.reflection.callStaticMethod(c, "showLocation", "()V"));
};
l.getCopy = function() {
var e = "888888";
cc.sys.isNative && (e = cc.sys.os === cc.sys.OS_IOS ? jsb.reflection.callStaticMethod(s, "getCopy") : jsb.reflection.callStaticMethod(c, "getCopy", "()Ljava/lang/String;"));
return e;
};
l.getPhotoCallback = function(e, t) {
if (!a.isNullOrEmpty(e)) {
var o = "avatar" == t ? n.ServerEventName.Upload : n.isUpdateReceipt ? n.ServerEventName.OTCReceipt : n.ServerEventName.OTCQrCode, s = a.getValue(n.StorageKey.UserToken, "");
i.showMask("正在上传...");
if (cc.sys.isNative) try {
var l;
l = cc.sys.os == cc.sys.OS_IOS ? e : jsb.reflection.callStaticMethod(c, "uploadImage", "(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;", r.logicUrl + o, s, e);
i.hideMask();
a.isNullOrEmpty(l) && i.alertTip("上传图片失败，请重试");
this.avatarUrlCallBack && this.avatarUrlCallBack(l);
this.wechatQrCodeCallBack && this.wechatQrCodeCallBack(l);
this.ReceiptCallBack && this.ReceiptCallBack(l);
this.serviceImgCallBack && this.serviceImgCallBack(l);
} catch (e) {
i.hideMask();
console.log("上传", JSON.stringify(e));
console.log("上传1", e.message);
i.alertTip("上传失败");
} else i.hideMask();
}
};
l.avatarUrlCallBack = null;
l.wechatQrCodeCallBack = null;
l.ReceiptCallBack = null;
l.serviceImgCallBack = null;
l.getLocationCallback = function(e, t) {
var r = a.getValue(n.StorageKey.Location, {
lat: 0,
long: 0
});
if (0 == e && 0 == t) {
e = r.lat;
t = r.long;
} else e == r.lat && t == r.long || a.saveValue(n.StorageKey.Location, {
lat: e,
long: t
});
i.location = {
lat: e,
long: t
};
};
l.reCallInviter = function() {
cc.sys.isNative && cc.sys.os == cc.sys.OS_IOS && jsb.reflection.callStaticMethod(s, "reCallInviter");
};
l.wechatAuth = function() {
cc.sys.isNative && (cc.sys.os == cc.sys.OS_IOS ? jsb.reflection.callStaticMethod(s, "sendWXAuthReq") : jsb.reflection.callStaticMethod(c, "sendWXAuthReq", "()V"));
};
l.wechatCallback = function(e) {
console.log("微信返回-----", e);
null != e && "" != e && this.wxLoginCallBack && this.wxLoginCallBack(e);
};
l.wxLoginCallBack = null;
l.refreshToken = function(e, t) {
var i = a.getValue(n.StorageKey.WxLoginData, {});
if (!a.isNullOrEmpty(i) || !a.isNullOrEmpty(i.refresh_token)) {
t = i.refresh_token;
var o = "https://api.weixin.qq.com/sns/oauth2/refresh_token?appid=" + n.GameInfo.appid + "&grant_type=" + t + "&refresh_token=" + t;
r.get(o, "getJson", function(e) {
if (e) {
i.access_token = e.access_token;
i.refresh_token = e.refresh_token;
a.saveValue(n.StorageKey.WxLoginData, data.data);
a.saveValue(n.StorageKey.RefreshTokenTime, new Date().getTime());
a.saveValue(n.StorageKey.AccessTokenTime, new Date().getTime());
}
});
}
};
l.saveImage = function(e) {
var t = "";
if (cc.sys.isNative) try {
t = cc.sys.os === cc.sys.OS_IOS ? jsb.reflection.callStaticMethod(s, "saveTextureToLocal:", e) : jsb.reflection.callStaticMethod(c, "saveTextureToLocal", "(Ljava/lang/String;)I", e);
} catch (e) {
i.alertTip("保存失败,请截屏保存");
}
a.isNullOrEmpty(t) && i.alertTip("保存失败,请截屏保存");
};
l.saveImageCallback = function(e) {
i.alertTip(e ? "保存成功" : "保存失败,请截屏保存");
};
cc.sys.isNative && (window.__errorHandler = function(e, t, i, a) {
var r = null != db.player.id ? db.player.id : "00000", s = {
filename: e,
lineNumber: t,
message: i,
stack: a,
version: cc.gameVersion,
areaCode: "00",
playerId: r
};
cc.log("catch error in __errorHandler " + s);
o.LogsClient(n.LogsEvents.BUG, {
action: s
});
});
t.exports = {
Social: l
};
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/common/GameUtils": "GameUtils",
"../NetWork/Connector": "Connector",
"./Cache": "Cache",
"./utils": "utils"
} ],
nodeInfo: [ function(e, t) {
"use strict";
cc._RF.push(t, "21b2bo9TJxFY4Z3UBCSVZAh", "nodeInfo");
var n = e("../Script/Cache"), i = e("../Script/utils");
function a(e) {
for (var t, n = "", i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = new Uint8Array(e), r = a.byteLength, o = r % 3, s = r - o, c = 0; c < s; c += 3) n += i[(16515072 & (t = a[c] << 16 | a[c + 1] << 8 | a[c + 2])) >> 18] + i[(258048 & t) >> 12] + i[(4032 & t) >> 6] + i[63 & t];
1 == o ? n += i[(252 & (t = a[s])) >> 2] + i[(3 & t) << 4] + "==" : 2 == o && (n += i[(16128 & (t = a[s] << 8 | a[s + 1])) >> 8] + i[(1008 & t) >> 4] + i[(15 & t) << 2] + "=");
return "data:image/jpeg;base64," + n;
}
cc.Class({
extends: cc.Component,
properties: {
sprHead: cc.Sprite,
lblName: cc.Label,
lblId: cc.Label,
lblPhone: cc.Label,
nodeChgInfo: cc.Node,
editName: cc.EditBox,
preHead: cc.Prefab,
layerHead: cc.Node
},
start: function() {},
init: function(e) {
this.playerName = i.getStringByLength(e.name, 6);
this.lblId.string = e.id;
this.lblName.string = e.name;
this.lblPhone.string = e.phone;
i.setHead(this.sprHead, e.head);
},
hide: function() {
this.node.active = !1;
},
showChgInfo: function() {
this.nodeChgInfo.active = !0;
this.editName.string = "";
this.initHead();
},
hiddeChgInfo: function() {
this.nodeChgInfo.active = !1;
},
confirm: function() {
"" != this.editName.string.trim() ? this.save(this.currentPath) : n.showTipsMsg("名字不能为空");
},
save: function(e) {
var t = this;
if ("" != this.currentPath && cc.sys.isNative) {
var n = jsb.fileUtils.getDataFromFile(e);
if (n) {
var i = a(n);
connector.request("uploadHead", {
userId: db.player.user_id,
base: i
}, function(e) {
cc.log("更新头像------", e);
cc.loader.load(e.head, function(n, i) {
if (!n) {
var a = new cc.SpriteFrame(i);
nodePersonCenter.sprHead.spriteFrame = a;
hall.sprHead.spriteFrame = a;
db.player.user_head = e.head;
t.node.active = !1;
}
});
});
}
}
},
initHead: function() {
var e = this;
this.lblName.string = this.playerName;
this.layerHead.destroyAllChildren();
for (var t = function(t) {
var i = cc.instantiate(e.preHead);
i.parent = e.layerHead;
var a = "head_" + t;
i.getComponent(cc.Sprite).spriteFrame = n.sprHead[a];
if (0 == t) {
i.getChildByName("nodeSel").active = !0;
e.currentPath = "";
}
i.on("touchend", function() {
e.layerHead.children.forEach(function(e) {
return e.getChildByName("nodeSel").active = !1;
});
i.getChildByName("nodeSel").active = !0;
e.currentPath = n.sprHead[a]._textureFilename;
});
}, i = 0; i < 8; i++) t(i);
}
});
cc._RF.pop();
}, {
"../Script/Cache": "Cache",
"../Script/utils": "utils"
} ],
player07: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "b0381vuWLFDgKXyzuKywlUW", "player07");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M, x, O, G, R, k, L, B, F, U, H, z, j, W, q, Y, J, V, K, Z, Q = e("../../../GameBase/GameConfig"), X = (te(e("../../../Main/Script/Cache")), 
te(e("../../../Main/Script/TableInfo"))), $ = te(e("../../../Main/Script/utils")), ee = e("../../../script/ui/hall/data/App");
function te(e) {
return e && e.__esModule ? e : {
default: e
};
}
function ne(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function ie(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function ae(e, t, n) {
t && ie(e.prototype, t);
n && ie(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
function re(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function oe(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
se(e, t);
}
function se(e, t) {
return (se = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function ce(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var le = cc._decorator, ue = le.ccclass, de = le.property, he = [ cc.v2(106, 48), cc.v2(-106, 48), cc.v2(106, 48) ], fe = [ cc.v2(90, 0), cc.v2(-90, 0), cc.v2(90, 0) ], pe = (i = de(cc.Node), 
a = de(cc.Node), r = de(cc.Node), o = de(cc.Node), s = de(cc.Node), c = de(cc.Node), 
l = de(cc.Node), u = de(cc.Node), d = de(cc.Node), h = de(cc.Node), f = de(cc.Node), 
p = de(cc.Node), m = de([ sp.SkeletonData ]), g = de(cc.Prefab), v = de(cc.Label), 
C = de(cc.Prefab), b = de(cc.Sprite), y = de(cc.Label), S = de(cc.Label), _ = de(cc.Label), 
T = de(cc.Label), E = de(cc.Font), A = de(cc.Font), ue(I = (N = function(e) {
oe(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
ne(t = e.call.apply(e, [ this ].concat(i)) || this, "nodeAction", w, re(t));
ne(t, "nodeBanker", D, re(t));
ne(t, "nodeOffline", P, re(t));
ne(t, "nodeBaoDan", M, re(t));
ne(t, "nodeAutoPlay", x, re(t));
ne(t, "nodeReady", O, re(t));
ne(t, "nodeNiao", G, re(t));
ne(t, "nodeClock", R, re(t));
ne(t, "nodeCardCount", k, re(t));
ne(t, "layerShowCard", L, re(t));
ne(t, "nodeShowCard", B, re(t));
ne(t, "nodePass", F, re(t));
ne(t, "pokerSkeleton", U, re(t));
ne(t, "preType", H, re(t));
ne(t, "lblCardType", z, re(t));
ne(t, "prePlayCards", j, re(t));
ne(t, "sprAvatar", W, re(t));
ne(t, "lblScore", q, re(t));
ne(t, "lblName", Y, re(t));
ne(t, "lblBombScore", J, re(t));
ne(t, "lblCardCount", V, re(t));
ne(t, "winFont", K, re(t));
ne(t, "loseFont", Z, re(t));
t.sex = "male";
t._playerData = null;
t._wallet = 0;
t.playPos = [ cc.v2(69.5 - cc.winSize.width / 2 + Q.GameConfig.FitScreen, 0), cc.v2(cc.winSize.width / 2 - 69.5 - Q.GameConfig.FitScreen, 130), cc.v2(69.5 - cc.winSize.width / 2 + Q.GameConfig.FitScreen, 110) ];
t.showCardPos = [ cc.v2(550, 130), cc.v2(-277, 0), cc.v2(69.5 - cc.winSize.width / 2 + Q.GameConfig.FitScreen, 110) ];
return t;
}
var n = t.prototype;
n.refreshUI = function() {
this.sex = this._playerData.prop.sex;
this.lblName.string = "" + $.default.getStringByLength(this._playerData.prop.name, 6);
$.default.setHead(this.sprAvatar, this._playerData.prop.head);
this.wallet = this._playerData.wallet;
this.node.position = this.playPos[X.default.realIdx[this._playerData.idx]];
this.nodeCardCount.position = fe[X.default.realIdx[this._playerData.idx]];
this.nodeBaoDan.position = he[X.default.realIdx[this._playerData.idx]];
if (0 == X.default.realIdx[this._playerData.idx]) {
var e = cc.find("Canvas").convertToWorldSpaceAR(cc.v2(0, -10)), t = this.node.convertToNodeSpaceAR(e);
this.layerShowCard.position = t;
}
this.initPlayer();
};
n.onLoad = function() {
this.node.on(cc.Node.EventType.TOUCH_END, this.showPlayerInfo, this);
};
n.showPlayerInfo = function() {
if (this._playerData) {
ee.App.lockScene();
var e = this._playerData.idx;
$.default.pop(Q.GameConfig.pop.PlayerInfo, function(t) {
ee.App.unlockScene();
t.getComponent("ModulePlayerInfo").init(e);
});
}
};
n.initPlayer = function() {
this.nodeBaoDan.active = !1;
this.nodeNiao.active = !1;
this.nodeBanker.active = !1;
this.nodeAutoPlay.active = !1;
this.nodeAction.active = !1;
this.hideClock();
this.removeDropCard();
};
n.activeAction = function(e) {
this.nodeAction.active = e;
if (e) {
this.nodeAction.stopAllActions();
this.nodeAction.runAction(cc.repeatForever(cc.sequence(cc.fadeOut(1), cc.delayTime(.2), cc.fadeIn(1))));
}
};
n.activeBanker = function(e) {
this.nodeBanker.active = e;
};
n.activeBaodan = function(e) {
this.nodeBaoDan.active = e;
};
n.activeAutoPlay = function(e) {
this.nodeAutoPlay.active = e;
};
n.activeOffline = function(e) {
this.nodeOffline.active = e;
};
n.activeReady = function(e) {
this.nodeReady.active = e;
};
n.cardCount = function(e) {
this.lblCardCount.string = e + "";
};
n.activeNiao = function(e) {
if (!$.default.isNullOrEmpty(e.ready)) if (1 == e.ready) {
this.nodeNiao.active = !0;
this.nodeNiao.scale = 0;
var t = cc.fadeIn(.5), n = cc.scaleTo(.1, 3), i = cc.scaleTo(.3, .2), a = cc.scaleTo(.1, 1), r = cc.sequence(n, cc.delayTime(.3), i, a);
cc.spawn(t, r);
this.nodeNiao.runAction(r);
} else this.nodeNiao.active = !1;
};
n.showBombScores = function(e, t, n, i) {
var a = this;
this.lblScore.string = $.default.formatGold(t, 2);
if (n < 0) {
this.lblBombScore.font = this.loseFont;
this.lblBombScore.string = $.default.formatGold(n);
} else {
this.lblBombScore.font = this.winFont;
this.lblBombScore.string = $.default.formatGold(n);
}
this.lblBombScore.node.anchorX = 1 == e ? 1 : 0;
this.lblBombScore.node.position = 1 == e ? cc.v2(-81, -108) : cc.v2(79, -108);
this.lblBombScore.node.opacity = 0;
this.lblBombScore.node.active = !0;
var r = cc.fadeIn(.3), o = 1 == e ? cc.moveTo(.3, cc.v2(-81, -65)) : cc.moveTo(.3, cc.v2(79, -65)), s = cc.spawn(r, o), c = cc.delayTime(1), l = cc.callFunc(function() {
a.lblBombScore.node.active = !1;
i && i();
});
this.lblBombScore.node.runAction(cc.sequence(s, c, l));
};
n.showClock = function(e) {
var t = this.nodeClock.getChildByName("time").getComponent(cc.Label), n = $.default.isNullOrEmpty(e) ? 15 : parseInt(e);
t.string = "" + n;
t.unscheduleAllCallbacks();
this.nodeClock.active = !0;
t.schedule(function() {
n--;
t.string = "" + Math.max(n, 0);
}, 1);
};
n.hideClock = function() {
this.nodeClock.getChildByName("time").getComponent(cc.Label).unscheduleAllCallbacks();
this.nodeClock.active = !1;
};
n.showCard = function(e) {
this.hideClock();
this.activeAutoPlay(e.auto);
this.activeAction(!1);
this.lblCardCount.string = "" + e.hands;
this.lblCardType.string = "";
this.nodeShowCard.removeAllChildren();
var t, n = X.default.realIdx[e.idx];
switch (e.type) {
case "BOMB":
t = 0;
break;

case "LIANDUI":
t = 1;
break;

case "SHUN":
t = 2;
var i = e.cards.length;
this.lblCardType.string = [ "", "", "", "", "", "五连顺", "六连顺", "七连顺", "八连顺", "九连顺", "十连顺", "十一连顺", "十二连顺" ][i];
break;

case "FEIJI":
t = 0 != n ? 4 : 3;
}
if (t) {
var a = new cc.Node();
a.parent = this.layerShowCard;
a.addComponent(sp.Skeleton);
var r = a.getComponent(sp.Skeleton);
r.skeletonData = this.pokerSkeleton[t];
r.premultipliedAlpha = !1;
r.setAnimation(1, "animation", !1);
r && r.setCompleteListener(function() {
a.destroy();
});
}
var o = cc.instantiate(this.prePlayCards);
o.scale = 0 == n ? 1 : .8;
o.parent = this.nodeShowCard;
var s = JSON.parse(JSON.stringify(e));
o.getComponent("LayoutShowCards07").init(s);
};
n.showPass = function() {
this.removeDropCard();
this.lblCardType.string = "要不起";
};
n.removeDropCard = function() {
this.lblCardType.string = "";
this.nodeShowCard.removeAllChildren();
};
n.summaryShowCard = function(e) {
if (0 != e.length) {
var t = cc.instantiate(this.prePlayCards);
t.parent = this.nodeShowCard;
var n = JSON.parse(JSON.stringify(e));
t.getComponent("LayoutShowCards07").initRemainCard(n);
}
};
n.leaveRoom = function() {
if (this.node) {
this.node.removeFromParent();
this.node.destroy();
}
};
ae(t, [ {
key: "playerData",
set: function(e) {
if (this._playerData != e) {
this._playerData = e;
this.refreshUI();
}
}
}, {
key: "wallet",
get: function() {
return this._wallet;
},
set: function(e) {
if (this._wallet != e) {
this._wallet = e;
this.lblScore.string = "" + $.default.formatGold(this._wallet, 2);
}
}
} ]);
return t;
}(cc.Component), w = ce(N.prototype, "nodeAction", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), D = ce(N.prototype, "nodeBanker", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), P = ce(N.prototype, "nodeOffline", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), M = ce(N.prototype, "nodeBaoDan", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), x = ce(N.prototype, "nodeAutoPlay", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), O = ce(N.prototype, "nodeReady", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), G = ce(N.prototype, "nodeNiao", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), R = ce(N.prototype, "nodeClock", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), k = ce(N.prototype, "nodeCardCount", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), L = ce(N.prototype, "layerShowCard", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), B = ce(N.prototype, "nodeShowCard", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), F = ce(N.prototype, "nodePass", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), U = ce(N.prototype, "pokerSkeleton", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), H = ce(N.prototype, "preType", [ g ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), z = ce(N.prototype, "lblCardType", [ v ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), j = ce(N.prototype, "prePlayCards", [ C ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), W = ce(N.prototype, "sprAvatar", [ b ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), q = ce(N.prototype, "lblScore", [ y ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Y = ce(N.prototype, "lblName", [ S ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), J = ce(N.prototype, "lblBombScore", [ _ ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), V = ce(N.prototype, "lblCardCount", [ T ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), K = ce(N.prototype, "winFont", [ E ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Z = ce(N.prototype, "loseFont", [ A ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), N)) || I);
n.default = pe;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/utils": "utils",
"../../../script/ui/hall/data/App": "App"
} ],
pwdLogin: [ function(e, t) {
"use strict";
cc._RF.push(t, "091f4bmjhxDv4cdF79v5vi1", "pwdLogin");
e("utils");
var n = e("../Script/DataBase"), i = e("Connector"), a = (e("Cache"), e("SceneLogin"));
cc.Class({
extends: cc.Component,
properties: {
errorHintLabel: cc.Label,
preForget: cc.Prefab,
editboxPassWd: cc.EditBox,
editboxPhone: cc.EditBox,
phone: "",
passWd: ""
},
autoLogin: function() {
if (cc.sys.os == cc.sys.OS_IOS || cc.sys.os == cc.sys.OS_ANDROID) {
var e = n.getInt(n.STORAGE_KEY.LAST_LOGIN), t = n.getString(n.STORAGE_KEY.LOGIN_PASSWD), r = n.getString(n.STORAGE_KEY.LOGIN_PHONE);
"" != t && "" != r && parseInt(new Date() / 1e3) - e < 604800 && i.request("loginByPhone", {
phone: this.phone,
password: this.passWd
}, function(e) {
a.loginSuccessCallback(e);
});
}
},
onLoad: function() {
var e = n.getString(n.STORAGE_KEY.LOGIN_PASSWD), t = n.getString(n.STORAGE_KEY.LOGIN_PHONE), i = n.getInt(n.STORAGE_KEY.NEW_PLAYER);
this.editboxPassWd.string = e;
this.passWd = e;
this.editboxPhone.string = t;
this.phone = t;
cc.log("初始密码，手机", e, t, i);
},
inputPhoneEnded: function(e) {
this.phone = e.string;
},
inputPassWordEnded: function(e) {
this.passWd = e.string;
},
_showErrorHint: function(e) {
var t = this.errorHintLabel.node;
t.active = !0;
this.errorHintLabel.string = e;
this.scheduleOnce(function() {
t.active = !1;
}, 2);
},
onChangePd: function() {
null != cc.find("Canvas/nodeForget") ? cc.find("Canvas/nodeForget").active = !0 : cc.instantiate(this.preForget).parent = cc.find("Canvas");
},
onLogin: function() {
!this.phone || this.phone.length < 1 ? this._showErrorHint("手机号码格式有误") : !this.passWd || this.passWd.length < 1 ? this._showErrorHint("密码不能为空") : this._startLogin();
},
_startLogin: function() {
var e = this;
i.request("loginByPhone", {
phone: this.phone,
password: this.passWd
}, function(t) {
if (t.success) {
a.loginSuccessCallback(t);
n.setInt(n.STORAGE_KEY.LAST_LOGIN, parseInt(new Date().getTime() / 1e3));
n.setString(n.STORAGE_KEY.LOGIN_PHONE, e.phone);
n.setString(n.STORAGE_KEY.LOGIN_PASSWD, e.passWd);
}
});
}
});
cc._RF.pop();
}, {
"../Script/DataBase": "DataBase",
Cache: "Cache",
Connector: "Connector",
SceneLogin: "SceneLogin",
utils: "utils"
} ],
queue: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "f37a96yzmVIQpNDca+HEGHa", "queue");
n.__esModule = !0;
n.Queue = void 0;
var i;
(i = e("../../../Main/Script/ROUTE")) && i.__esModule;
var a = function() {
function e() {
this._queue = [];
this.gameStart = !1;
this.debugData = [ {
route: "SC_JOIN_TABLE",
data: {
options: {
tid: "157039",
matchID: "9iryhW5X",
roomID: 10024,
gameType: "HNMJ",
level: 0,
isLeague: !0,
fee: "10",
bird: 0,
base: 20,
lower: 1e4,
shuffle: 0,
clock: 60
},
players: [ {
prop: {
pid: 109149,
name: " 焱龍",
sex: "female",
head: "http://wx.qlogo.cn/mmopen/vi_32/SiaSGJ04TTtib4HaoMVLM0UP9Byiaz7XDibj6j9YJicaGoLqic5I8AG2Hs0Xz6T4aYibCnXrzvVkdLnjJaF2Oblnjr4Bg/132",
ip: "c0c15b5a-eedd-4f84-a0c0-f20ce9538838"
},
location: {
lat: 0,
long: 0
},
wallet: 95700,
idx: 0,
scores: {
base: 0,
fee: 0
},
ready: 0,
qi: [],
ground: []
}, {
prop: {
pid: 109150,
name: "蓝山队长",
sex: "male",
head: "http://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI6E4GGSOT6VMicjv1LskibIF9EgRuv2QicvvSicM4eOQQQ7PRwticdJ0jXldx2JBCicWopGd4x5BOick5HQ/132",
ip: "cda85f59-6784-4f1b-ae97-00e052cb0393"
},
location: {
lat: 0,
long: 0
},
wallet: 95350,
idx: 1,
scores: {
base: 0,
fee: 0
},
ready: 0,
qi: [],
ground: []
}, {
prop: {
pid: 109151,
name: "随缘",
sex: "male",
head: "http://wx.qlogo.cn/mmopen/vi_32/RZec1iaJEWKMEHWuibRXpRq6iczicQJmDuFGeE1RFeyYjrZZfXSK4Bklw7Ru8UyHbkR0GDWj3jd1bDnwulVpTouvYA/132",
ip: "800133e2-15b5-429e-84e0-c62d61ba5820"
},
location: {
lat: 0,
long: 0
},
wallet: 95569,
idx: 2,
scores: {
base: 0,
fee: 0
},
ready: 0,
qi: [],
ground: []
}, {
prop: {
pid: 109152,
name: "北方姑娘南方梦",
sex: "male",
head: "http://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83epherEfVrWjeyRjBiaLTwCMYo58ibQib4uSrY77QLBheVOviczhuJibxCYiaguSUAdr5kjUwEHtice2FexqQ/132",
ip: null
},
location: {
lat: 0,
long: 0
},
wallet: 90290,
idx: 3,
scores: {
base: 0,
fee: 0
},
ready: 0,
qi: [],
ground: []
} ],
idx: 2,
tid: "157039",
status: "WAIT"
}
}, {
route: "SC_JOIN_GAME",
data: {
options: {
tid: "157039",
matchID: "9iryhW5X",
roomID: 10024,
gameType: "HNMJ",
level: 0,
isLeague: !0,
fee: "10",
bird: 0,
base: 20,
lower: 1e4,
shuffle: 0,
clock: 60
},
prop: {
pid: 109151,
name: "随缘",
sex: "male",
head: "http://wx.qlogo.cn/mmopen/vi_32/RZec1iaJEWKMEHWuibRXpRq6iczicQJmDuFGeE1RFeyYjrZZfXSK4Bklw7Ru8UyHbkR0GDWj3jd1bDnwulVpTouvYA/132",
ip: "800133e2-15b5-429e-84e0-c62d61ba5820"
},
location: {
lat: 0,
long: 0
},
wallet: 95569,
idx: 2,
scores: {
base: 0,
fee: 0
},
ready: 0,
qi: [],
ground: [],
clock: 2
}
}, {
route: "SC_CHANGE_STATUS",
data: {
idx: 3,
prop: {
pid: 109152,
name: "北方姑娘南方梦",
sex: "male",
head: "http://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83epherEfVrWjeyRjBiaLTwCMYo58ibQib4uSrY77QLBheVOviczhuJibxCYiaguSUAdr5kjUwEHtice2FexqQ/132",
ip: "e7226d87-112c-47e0-9f47-aa8cce75dbd3"
},
location: {
lat: 0,
long: 0
},
wallet: 90290,
offline: !1
}
}, {
route: "SC_JOIN_GAME",
data: {
options: {
tid: "157039",
matchID: "9iryhW5X",
roomID: 10024,
gameType: "HNMJ",
level: 0,
isLeague: !0,
fee: "10",
bird: 0,
base: 20,
lower: 1e4,
shuffle: 0,
clock: 60
},
prop: {
pid: 109152,
name: "北方姑娘南方梦",
sex: "male",
head: "http://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83epherEfVrWjeyRjBiaLTwCMYo58ibQib4uSrY77QLBheVOviczhuJibxCYiaguSUAdr5kjUwEHtice2FexqQ/132",
ip: "e7226d87-112c-47e0-9f47-aa8cce75dbd3"
},
location: {
lat: 0,
long: 0
},
wallet: 90290,
idx: 3,
scores: {
base: 0,
fee: 0
},
ready: 0,
qi: [],
ground: [],
clock: 2
}
}, {
route: "SC_GAME_READY",
data: {
idx: 1,
ready: 1,
auto: !1
}
}, {
route: "SC_GAME_READY",
data: {
idx: 0,
ready: 1,
auto: !1
}
}, {
route: "SC_GAME_READY",
data: {
idx: 3,
ready: 1,
auto: !1
}
}, {
route: "SC_GAME_READY",
data: {
idx: 2,
ready: 1,
auto: !1
}
}, {
route: "SC_GAME_INIT",
data: {
zhuang: 0,
turn: 1,
round: 1,
wind: 0,
hands: [ 8, 12, 17, 18, 19, 26, 27, 28, 28, 29, 29, 31, 47 ],
deck: 92
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 13,
deck: 91
}
}, {
route: "SC_ACTION",
data: {
event: "FLOWER",
card: 46,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 13,
deck: 90
}
}, {
route: "SC_ACTION",
data: {
event: "FLOWER",
card: 48,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 13,
deck: 89
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "vVTqtUXBXF",
clock: "2021-11-20 15:53:53",
hands: [ 1, 5, 5, 5, 6, 6, 12, 12, 13, 15, 16, 17, 19, 23 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 5,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 13,
deck: 88
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "omNIG_JSb",
clock: "2021-11-20 15:53:54",
hands: [ 1, 4, 7, 7, 11, 13, 19, 24, 24, 26, 27, 34, 35, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 7,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "CHOW",
card: 7,
tile: 7,
idx: 1,
from: 0
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "DojPCR_8h",
clock: "2021-11-20 15:53:56",
hands: [ 2, 3, 8, 12, 14, 15, 19, 23, 28, 34, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 15,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 37,
hands: [ 8, 12, 17, 18, 19, 26, 27, 28, 28, 29, 29, 31, 47 ],
deck: 87
}
}, {
route: "SC_ACTION",
data: {
event: "FLOWER",
card: 47,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 36,
hands: [ 8, 12, 17, 18, 19, 26, 27, 28, 28, 29, 29, 31, 37 ],
deck: 86
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "N0WtPDQo3",
clock: "2021-11-20 15:53:57",
hands: [ 8, 12, 17, 18, 19, 26, 27, 28, 28, 29, 29, 31, 36, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 28,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 13,
deck: 85
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "aJZh49uDY",
clock: "2021-11-20 15:53:58",
hands: [ 1, 5, 5, 6, 6, 9, 12, 12, 13, 15, 16, 17, 19, 23 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 5,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 13,
deck: 84
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "ufE1o55uL",
clock: "2021-11-20 15:53:59",
hands: [ 1, 3, 4, 7, 11, 13, 19, 24, 24, 26, 27, 34, 35, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 11,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 13,
deck: 83
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "22iFeEw1-",
clock: "2021-11-20 15:54:00",
hands: [ 2, 3, 8, 12, 14, 19, 23, 28, 29, 34, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 19,
idx: 1
}
}, {
route: "SC_QUEST",
data: {
quests: [ {
event: "CHOW",
card: 19,
tile: 17,
idx: 2,
from: 1
} ],
serialID: "lJFu8rYfb",
clock: "2021-11-20 15:54:01"
}
}, {
route: "SC_ACTION",
data: {
event: "CHOW",
card: 19,
tile: 17,
idx: 2,
from: 1
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "dwDiuom7u",
clock: "2021-11-20 15:54:02",
hands: [ 8, 12, 19, 26, 27, 28, 29, 29, 31, 36, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 31,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 10,
deck: 82
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "TNFg_JQW_",
clock: "2021-11-20 15:54:03",
hands: [ 1, 5, 6, 6, 9, 12, 12, 13, 15, 16, 17, 19, 23, 33 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 15,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 10,
deck: 81
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "CmJr9djaU",
clock: "2021-11-20 15:54:04",
hands: [ 1, 3, 4, 7, 13, 19, 24, 24, 26, 27, 28, 34, 35, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 19,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 10,
deck: 80
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "gLrEvgj5o",
clock: "2021-11-20 15:54:05",
hands: [ 2, 3, 8, 12, 14, 22, 23, 28, 29, 34, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 8,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 13,
hands: [ 8, 12, 19, 26, 27, 28, 29, 29, 36, 37 ],
deck: 79
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "ygJFtI8bG",
clock: "2021-11-20 15:54:06",
hands: [ 8, 12, 13, 19, 26, 27, 28, 29, 29, 36, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 28,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 10,
deck: 78
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "s5Apie6HE",
clock: "2021-11-20 15:54:07",
hands: [ 1, 5, 6, 6, 9, 12, 12, 13, 16, 17, 18, 19, 23, 33 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 33,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 10,
deck: 77
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "yG59XOZBU",
clock: "2021-11-20 15:54:08",
hands: [ 1, 3, 4, 7, 13, 18, 24, 24, 26, 27, 28, 34, 35, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 37,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 10,
deck: 76
}
}, {
route: "SC_ACTION",
data: {
event: "FLOWER",
card: 45,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 10,
deck: 75
}
}, {
route: "SC_ACTION",
data: {
event: "FLOWER",
card: 42,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 10,
deck: 74
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "8R1Cmr8v6",
clock: "2021-11-20 15:54:09",
hands: [ 2, 3, 12, 14, 22, 23, 26, 28, 29, 34, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 2,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 24,
hands: [ 8, 12, 13, 19, 26, 27, 29, 29, 36, 37 ],
deck: 73
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "L1mtDc79_",
clock: "2021-11-20 15:54:10",
hands: [ 8, 12, 13, 19, 24, 26, 27, 29, 29, 36, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 19,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "CHOW",
card: 19,
tile: 17,
idx: 3,
from: 2
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "zjaZ75WYx",
clock: "2021-11-20 15:54:12",
hands: [ 1, 5, 6, 6, 9, 12, 12, 13, 16, 19, 23 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 6,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 10,
deck: 72
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "cNz8Ev0Rp",
clock: "2021-11-20 15:54:13",
hands: [ 1, 3, 4, 7, 9, 13, 18, 24, 24, 26, 27, 28, 34, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 1,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 10,
deck: 71
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "gHIcHHxap",
clock: "2021-11-20 15:54:14",
hands: [ 3, 12, 14, 14, 22, 23, 26, 28, 29, 34, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 14,
idx: 1
}
}, {
route: "SC_QUEST",
data: {
quests: [ {
event: "CHOW",
card: 14,
tile: 12,
idx: 2,
from: 1
} ],
serialID: "UNIe-ujme",
clock: "2021-11-20 15:54:15"
}
}, {
route: "SC_ACTION",
data: {
event: "CHOW",
card: 14,
tile: 12,
idx: 2,
from: 1
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "FVWvC8QZB",
clock: "2021-11-20 15:54:16",
hands: [ 8, 24, 26, 27, 29, 29, 36, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 29,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 7,
deck: 70
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "4OvXgjh1l",
clock: "2021-11-20 15:54:17",
hands: [ 1, 5, 6, 9, 12, 12, 13, 16, 19, 23, 34 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 13,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 7,
deck: 69
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "BtkfCg7xV",
clock: "2021-11-20 15:54:18",
hands: [ 1, 3, 4, 7, 9, 13, 18, 24, 24, 26, 27, 28, 34, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 28,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 7,
deck: 68
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "-6Ge1CRwx",
clock: "2021-11-20 15:54:19",
hands: [ 3, 12, 14, 22, 23, 26, 28, 29, 34, 35, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 37,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 31,
hands: [ 8, 24, 26, 27, 29, 36, 37 ],
deck: 67
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "SvW62KAJi",
clock: "2021-11-20 15:54:20",
hands: [ 8, 24, 26, 27, 29, 31, 36, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 37,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 7,
deck: 66
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "ju__TCmti",
clock: "2021-11-20 15:54:21",
hands: [ 1, 5, 6, 9, 12, 12, 16, 19, 23, 31, 34 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 5,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "CHOW",
card: 5,
tile: 3,
idx: 0,
from: 3
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "hE5BK26h-",
clock: "2021-11-20 15:54:23",
hands: [ 1, 7, 9, 13, 18, 24, 24, 26, 27, 34, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 35,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 7,
deck: 65
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "jGsIQXF4x",
clock: "2021-11-20 15:54:24",
hands: [ 3, 12, 14, 22, 23, 25, 26, 28, 29, 34, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 34,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 32,
hands: [ 8, 24, 26, 27, 29, 31, 36 ],
deck: 64
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "mtkldJ59P",
clock: "2021-11-20 15:54:25",
hands: [ 8, 24, 26, 27, 29, 31, 32, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 24,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "PONG",
card: 24,
idx: 0,
from: 2
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "ZeH3_LqjV",
clock: "2021-11-20 15:54:27",
hands: [ 1, 7, 9, 13, 18, 26, 27, 34 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 18,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 7,
deck: 63
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "iX01N7wCt",
clock: "2021-11-20 15:54:28",
hands: [ 3, 12, 14, 22, 23, 25, 26, 28, 29, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 23,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 35,
hands: [ 8, 26, 27, 29, 31, 32, 36 ],
deck: 62
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "W4qk7jX6Q",
clock: "2021-11-20 15:54:29",
hands: [ 8, 26, 27, 29, 31, 32, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 32,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 7,
deck: 61
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "8c1P_VRNY",
clock: "2021-11-20 15:54:30",
hands: [ 1, 6, 9, 12, 12, 16, 19, 23, 23, 31, 34 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 31,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 7,
deck: 60
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "J0mc-9u9J",
clock: "2021-11-20 15:54:31",
hands: [ 1, 7, 9, 13, 26, 27, 33, 34 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 1,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 7,
deck: 59
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "EkHBfCLBK",
clock: "2021-11-20 15:54:32",
hands: [ 3, 11, 12, 14, 22, 25, 26, 28, 29, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 29,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 4,
hands: [ 8, 26, 27, 29, 31, 35, 36 ],
deck: 58
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "8O7tcAGSn",
clock: "2021-11-20 15:54:33",
hands: [ 4, 8, 26, 27, 29, 31, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 29,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 7,
deck: 57
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "Ee2-zec_I",
clock: "2021-11-20 15:54:34",
hands: [ 1, 6, 9, 11, 12, 12, 16, 19, 23, 23, 34 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 23,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 7,
deck: 56
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "nV7zagq_U",
clock: "2021-11-20 15:54:35",
hands: [ 7, 9, 13, 26, 27, 33, 34, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 33,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 7,
deck: 55
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "3mF7bVLpC",
clock: "2021-11-20 15:54:36",
hands: [ 1, 3, 11, 12, 14, 22, 25, 26, 28, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 11,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 16,
hands: [ 4, 8, 26, 27, 31, 35, 36 ],
deck: 54
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "IGm2lB0iR",
clock: "2021-11-20 15:54:37",
hands: [ 4, 8, 16, 26, 27, 31, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 31,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 7,
deck: 53
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "lTHAq8WCV",
clock: "2021-11-20 15:54:38",
hands: [ 1, 6, 9, 11, 12, 12, 16, 19, 21, 23, 34 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 11,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 7,
deck: 52
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "YIkD-tsm6",
clock: "2021-11-20 15:54:39",
hands: [ 6, 7, 9, 13, 26, 27, 34, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 27,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "CHOW",
card: 27,
tile: 25,
idx: 1,
from: 0
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "wXIPdMUHv",
clock: "2021-11-20 15:54:41",
hands: [ 1, 3, 12, 14, 22, 28, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 22,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 32,
hands: [ 4, 8, 16, 26, 27, 35, 36 ],
deck: 51
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "suG2I8VdD",
clock: "2021-11-20 15:54:42",
hands: [ 4, 8, 16, 26, 27, 32, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 16,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 7,
deck: 50
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "84rvBDjXD",
clock: "2021-11-20 15:54:43",
hands: [ 1, 2, 6, 9, 12, 12, 16, 19, 21, 23, 34 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 34,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 7,
deck: 49
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "wT1frz4AT",
clock: "2021-11-20 15:54:44",
hands: [ 6, 7, 9, 13, 17, 26, 34, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 34,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 7,
deck: 48
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "06Tb1VAjY",
clock: "2021-11-20 15:54:45",
hands: [ 1, 3, 12, 14, 25, 28, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 28,
idx: 1
}
}, {
route: "SC_QUEST",
data: {
quests: [ {
event: "CHOW",
card: 28,
tile: 26,
idx: 2,
from: 1
} ],
serialID: "WWlC6CyBb",
clock: "2021-11-20 15:54:46"
}
}, {
route: "SC_ACTION",
data: {
event: "CHOW",
card: 28,
tile: 26,
idx: 2,
from: 1
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "P65OzBN6A",
clock: "2021-11-20 15:54:47",
hands: [ 4, 8, 32, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 4,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 4,
deck: 47
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "tag4o-QXp",
clock: "2021-11-20 15:54:48",
hands: [ 1, 2, 6, 9, 12, 12, 14, 16, 19, 21, 23 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 12,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 4,
deck: 46
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "E3DH4nQe5",
clock: "2021-11-20 15:54:49",
hands: [ 6, 7, 9, 13, 17, 26, 33, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 26,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 4,
deck: 45
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "XuNe6AIE9",
clock: "2021-11-20 15:54:51",
hands: [ 1, 3, 12, 14, 25, 32, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 32,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 26,
hands: [ 8, 32, 35, 36 ],
deck: 44
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "2zJoNQ_hP",
clock: "2021-11-20 15:54:52",
hands: [ 8, 26, 32, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 36,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 4,
deck: 43
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "o3NYfC6p3",
clock: "2021-11-20 15:54:53",
hands: [ 1, 2, 4, 6, 9, 12, 14, 16, 19, 21, 23 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 21,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 4,
deck: 42
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "Mtcd5glMi",
clock: "2021-11-20 15:54:54",
hands: [ 6, 7, 9, 13, 17, 21, 33, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 33,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 4,
deck: 41
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "qg_tvXWmh",
clock: "2021-11-20 15:54:55",
hands: [ 1, 3, 12, 14, 25, 34, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 35,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 14,
hands: [ 8, 26, 32, 35 ],
deck: 40
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "X9dDsHV-o",
clock: "2021-11-20 15:54:56",
hands: [ 8, 14, 26, 32, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 14,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 4,
deck: 39
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "DAT62053U",
clock: "2021-11-20 15:54:57",
hands: [ 1, 2, 4, 6, 9, 12, 14, 16, 16, 19, 23 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 23,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 4,
deck: 38
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "m_LPj81Vr",
clock: "2021-11-20 15:54:58",
hands: [ 6, 6, 7, 9, 13, 17, 21, 37 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 37,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 4,
deck: 37
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "fi8yw5yys",
clock: "2021-11-20 15:54:59",
hands: [ 1, 3, 12, 14, 22, 25, 34, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 12,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 7,
hands: [ 8, 26, 32, 35 ],
deck: 36
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "Eizo74Fy6",
clock: "2021-11-20 15:55:00",
hands: [ 7, 8, 26, 32, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 26,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 4,
deck: 35
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "zppUhUnxT",
clock: "2021-11-20 15:55:01",
hands: [ 1, 2, 4, 6, 7, 9, 12, 14, 16, 16, 19 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 16,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 4,
deck: 34
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "V7SPd8yno",
clock: "2021-11-20 15:55:02",
hands: [ 6, 6, 7, 9, 13, 15, 17, 21 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 9,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 4,
deck: 33
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "8Faz_W3gD",
clock: "2021-11-20 15:55:03",
hands: [ 1, 3, 14, 22, 25, 33, 34, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 33,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 29,
hands: [ 7, 8, 32, 35 ],
deck: 32
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "hZAWGfgcP",
clock: "2021-11-20 15:55:04",
hands: [ 7, 8, 29, 32, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 29,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 4,
deck: 31
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "EMSAoF3do",
clock: "2021-11-20 15:55:05",
hands: [ 1, 2, 4, 6, 7, 9, 12, 14, 16, 19, 31 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 7,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 4,
deck: 30
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "kyuO0dNCf",
clock: "2021-11-20 15:55:06",
hands: [ 6, 6, 7, 13, 15, 17, 21, 25 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 25,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 4,
deck: 29
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "xrUrvsjM2",
clock: "2021-11-20 15:55:07",
hands: [ 1, 2, 3, 14, 22, 25, 34, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 25,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 17,
hands: [ 7, 8, 32, 35 ],
deck: 28
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "Ssp8ulCI1",
clock: "2021-11-20 15:55:08",
hands: [ 7, 8, 17, 32, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 17,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 4,
deck: 27
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "_Bo9OMIne",
clock: "2021-11-20 15:55:09",
hands: [ 1, 2, 4, 6, 9, 12, 14, 16, 19, 24, 31 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 6,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "PONG",
card: 6,
idx: 0,
from: 3
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "ZTMgob-uj",
clock: "2021-11-20 15:55:11",
hands: [ 7, 13, 15, 17, 21 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 13,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 4,
deck: 26
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "O4An8BjXI",
clock: "2021-11-20 15:55:12",
hands: [ 1, 2, 3, 14, 21, 22, 34, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 22,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 43,
hands: [ 7, 8, 32, 35 ],
deck: 25
}
}, {
route: "SC_ACTION",
data: {
event: "FLOWER",
card: 43,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 41,
hands: [ 7, 8, 32, 35 ],
deck: 24
}
}, {
route: "SC_ACTION",
data: {
event: "FLOWER",
card: 41,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 8,
hands: [ 7, 8, 32, 35 ],
deck: 23
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "PrzFrl15P",
clock: "2021-11-20 15:55:13",
hands: [ 7, 8, 8, 32, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 8,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 4,
deck: 22
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "rGqvfecBa",
clock: "2021-11-20 15:55:14",
hands: [ 1, 2, 4, 9, 12, 14, 16, 19, 22, 24, 31 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 24,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 4,
deck: 21
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "BAHxCyUCj",
clock: "2021-11-20 15:55:15",
hands: [ 7, 9, 15, 17, 21 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 17,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 4,
deck: 20
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "JxQc1UeV_",
clock: "2021-11-20 15:55:16",
hands: [ 1, 2, 3, 14, 21, 34, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 1,
idx: 1
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 2,
card: 13,
hands: [ 7, 8, 32, 35 ],
deck: 19
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 2,
serialID: "3sjYi1okv",
clock: "2021-11-20 15:55:17",
hands: [ 7, 8, 13, 32, 35 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 8,
idx: 2
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 4,
deck: 18
}
}, {
route: "SC_ACTION",
data: {
event: "FLOWER",
card: 44,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 3,
card: -1,
hands: 4,
deck: 17
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 3,
serialID: "3jNzx8iKh",
clock: "2021-11-20 15:55:18",
hands: [ 1, 2, 4, 9, 12, 14, 16, 16, 19, 22, 31 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 31,
idx: 3
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 0,
card: -1,
hands: 4,
deck: 16
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 0,
serialID: "BoJiRmPJt",
clock: "2021-11-20 15:55:19",
hands: [ 7, 9, 15, 21, 25 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 9,
idx: 0
}
}, {
route: "SC_ACTION",
data: {
event: "DRAW",
idx: 1,
card: -1,
hands: 4,
deck: 15
}
}, {
route: "SC_PLAY_CARD",
data: {
idx: 1,
serialID: "g7G8_u76z",
clock: "2021-11-20 15:55:20",
hands: [ 2, 3, 14, 18, 21, 34, 35, 36 ]
}
}, {
route: "SC_ACTION",
data: {
event: "PLAY",
card: 21,
idx: 1
}
}, {
route: "SC_GAME_SUMMARY",
data: {
deck: [ 36, 32, 22, 36, 27, 3, 3, 27, 11, 15, 5, 21, 23, 4, 2 ],
turn: 1,
totalTurn: 4,
round: 1,
wind: 0,
draw: !0,
players: [ {
kong: 0,
score: null,
idx: 0,
ground: [ {
event: "CHOW",
card: 5,
tile: 3,
idx: 0,
from: 3
}, {
event: "PONG",
card: 24,
idx: 0,
from: 2
}, {
event: "PONG",
card: 6,
idx: 0,
from: 3
} ],
hands: [ 7, 15, 21, 25 ]
}, {
kong: 0,
score: null,
idx: 1,
ground: [ {
event: "CHOW",
card: 7,
tile: 7,
idx: 1,
from: 0
}, {
event: "CHOW",
card: 27,
tile: 25,
idx: 1,
from: 0
} ],
hands: [ 2, 3, 14, 18, 34, 35, 36 ]
}, {
kong: 0,
score: null,
idx: 2,
ground: [ {
event: "CHOW",
card: 19,
tile: 17,
idx: 2,
from: 1
}, {
event: "CHOW",
card: 14,
tile: 12,
idx: 2,
from: 1
}, {
event: "CHOW",
card: 28,
tile: 26,
idx: 2,
from: 1
} ],
hands: [ 7, 13, 32, 35 ]
}, {
kong: 0,
score: null,
idx: 3,
ground: [ {
event: "CHOW",
card: 19,
tile: 17,
idx: 3,
from: 2
} ],
hands: [ 1, 2, 4, 9, 12, 14, 16, 16, 19, 22 ]
} ]
}
} ];
}
var t = e.prototype;
t.onDebug = function() {
var e = this.debugData.shift();
this.push(e);
};
t.push = function(e) {
this.gameStart = !0;
this._queue.push(e);
};
t.next = function() {
return this.debugData.shift();
};
return e;
}();
a.Instance = new a();
var r = a.Instance;
n.Queue = r;
cc._RF.pop();
}, {
"../../../Main/Script/ROUTE": "ROUTE"
} ],
register: [ function(e, t) {
"use strict";
cc._RF.push(t, "5345f0keWBL85OTWyEus7Xm", "register");
var n = e("../Script/utils"), i = e("Connector"), a = e("Cache"), r = e("SceneLogin"), o = e("DataBase");
cc.Class({
extends: cc.Component,
properties: {
errorHintLabel: cc.Label,
lblTime: cc.Label,
inviteCode: "98k98",
phone: "",
code: "111111",
userName: "",
passWd: "",
rePassWd: ""
},
inputInviteEnded: function(e) {
this.inviteCode = e.string;
},
inputUserNameEnded: function(e) {
this.userName = e.string;
},
inputPhoneEnded: function(e) {
n.checkPhone(e.string);
this.phone = e.string;
},
inputCodeEnded: function(e) {
this.code = e.string;
},
inputPassWordEnded: function(e) {
this.passWd = e.string;
},
reInputPWEnded: function(e) {
this.rePassWd = e.string;
this.passWd != this.rePassWd && this._showErrorHint("密码输入不一致");
},
_showErrorHint: function(e) {
var t = this.errorHintLabel.node;
t.active = !0;
this.errorHintLabel.string = e;
this.scheduleOnce(function() {
t.active = !1;
}.bind(this), 2);
},
getLoginCode: function() {
var e = this;
!this.phone || this.phone.length < 1 ? this._showErrorHint("手机号码格式有误") : i.request("sendSmsCode", {
phone: this.phone,
type: "register"
}, function(t) {
if (t.success) {
a.showTipsMsg(t.message);
e.lblTime.unscheduleAllCallbacks();
e.lblTime.node.parent.active = !0;
e.lblTime.node.parent.getComponent(cc.Button).interactable = !1;
var n = 60;
e.lblTime.string = "重新发送(" + n + ")";
e.lblTime.schedule(function() {
e.lblTime.string = "重新发送(" + --n + ")";
if (0 == n) {
e.lblTime.unscheduleAllCallbacks();
e.lblTime.node.parent.active = !1;
}
}, 1);
}
});
},
onRegister: function() {
this.code = "111111";
this.inviteCode = "98k98";
!this.phone || this.phone.length < 1 ? this._showErrorHint("手机号码格式有误") : !this.code || this.code.length < 1 ? this._showErrorHint("验证码不能为空") : !this.inviteCode || this.inviteCode.length < 1 ? this._showErrorHint("邀请码不能为空") : !this.passWd || this.passWd.length < 1 ? this._showErrorHint("密码不能为空") : this.passWd == this.rePassWd ? this._startRegister() : this._showErrorHint("密码输入不一致");
},
_startRegister: function() {
var e = this;
i.request("register", {
code: this.code,
phone: this.phone,
password: this.passWd,
inviteCode: this.inviteCode
}, function(t) {
a.showTipsMsg(t.message, function() {
t.success && i.request("loginByPhone", {
phone: e.phone,
password: e.passWd
}, function(t) {
r.loginSuccessCallback(t);
o.setInt(o.STORAGE_KEY.LAST_LOGIN, parseInt(new Date().getTime() / 1e3));
o.setInt(o.STORAGE_KEY.NEW_PLAYER, 0);
o.setString(o.STORAGE_KEY.LOGIN_PHONE, e.phone);
o.setString(o.STORAGE_KEY.LOGIN_PASSWD, e.passWd);
});
});
});
},
back: function() {
this.node.active = !1;
}
});
cc._RF.pop();
}, {
"../Script/utils": "utils",
Cache: "Cache",
Connector: "Connector",
DataBase: "DataBase",
SceneLogin: "SceneLogin"
} ],
"socket-ctrl": [ function(e, t) {
"use strict";
cc._RF.push(t, "7465f/gS4NOUbyjh01IyXY/", "socket-ctrl");
var n = e("DataBase"), i = e("ROUTE"), a = e("PACK"), r = e("Cache"), o = cc.Class({
name: "SocketCtrl",
properties: {
logicUrl: "http://test.lalazvu.cn:8000/",
status: null,
_socket: null,
_queueGameMsg: [],
_queueChatMsg: []
},
statics: {
_instance: null,
getInstance: function() {
this._instance || (this._instance = new o());
return this._instance;
}
},
emit: function(e, t) {
cc.log(e, t);
null != this._socket && this._socket.emit(e, t);
},
gameMessage: function(e, t) {
this.emit(a.CS_GAME_MESSAGE, {
route: e,
data: t
});
},
connect: function(e, t) {
var o = this;
cc.log("调用长连接CONNECTING", e);
this.status = 1;
r.showMask("正在连接..请稍后...");
try {
if (null != this._socket) {
cc.log("_socket存在，断开前面的连接");
this._socket.disconnect();
this._socket = null;
}
} catch (e) {
cc.log(e);
}
cc.sys.isNative ? this._socket = SocketIO.connect(e.url, {
"force new connection": !0,
reconnection: !1
}) : this._socket = io(e.url, {
"force new connection": !0,
reconnection: !1
});
this._socket.on("connect", function() {
n.connectInfo = e.connectInfo;
cc.log("_socket connect success", n.connectInfo);
null != o._socket && o._socket.emit(a.CS_CONNECT_INIT, e.connectInfo);
});
this._socket.on("error", function() {
o.status = 0;
r.showTipsMsg("网络连接失败", function() {
if (cc.director.getScene().name == n.getTableScene()) {
console.log("跳转登陆---------------2");
cc.director.loadScene("Login");
}
});
});
this._socket.on(a.SC_PONG, function() {});
this._socket.on("disconnect", function() {
o._socket = null;
o.status = 0;
cc.log("disconnect closed");
});
this._socket.on(a.SC_ENTER_ROOM, function() {
cc.log("connected");
o._queueChatMsg = [];
o._queueGameMsg = [];
t();
if (2 != o.status) {
o._socket.on(a.SC_GAME_DESTORY, function() {
cc.log("PACK.SC_GAME_DESTORY");
o._queueChatMsg = [];
o._queueGameMsg = [];
o.disconnect();
});
o._socket.on(a.SC_SERVER_NOTICE, function(e) {
o._queueGameMsg.push({
route: i.SC_SYSTEM_NOTICE,
data: e
});
});
o._socket.on(a.SC_GAME_MESSAGE, function(e) {
cc.log("PACK.SC_GAME_MESSAGE", e);
var t;
t = "string" == typeof e ? JSON.parse(e) : e;
e && e.route == i.SC_RECONNECT && e.data.isDone && r.showTipsMsg("房间已被解散", function() {
cc.director.loadScene("Lobby");
});
o._queueGameMsg.push(t);
cc.log(o._queueGameMsg);
});
o._socket.on(a.SC_GAME_VOICE, function(e) {
cc.log("PACK.SC_GAME_VOICE", e);
var t;
t = "string" == typeof e ? JSON.parse(e) : e;
o._queueChatMsg.push(t);
});
o.status = 2;
}
});
this._socket.on(a.SC_JOIN_ERROR, function(e) {
o._queueChatMsg = [];
o._queueGameMsg = [];
var t;
t = "string" == typeof e ? JSON.parse(e) : e;
r.showConfirm(t.msg, function() {
o.disconnect();
});
r.hideMask();
});
},
disconnect: function() {
cc.log("手动断开连接,disconnect");
this.status = 3;
cc.director.loadScene("Lobby");
n.connectInfo = null;
if (null != this._socket) {
this._socket.disconnect();
this._socket = null;
}
this.status = 0;
},
request: function(e, t, i, a) {
cc.log("调用短连接", this.logicUrl + e);
var o = "getJson" == t ? "GET" : "POST";
a || r.showMask("正在加载...请稍后");
try {
var s = cc.loader.getXMLHttpRequest();
s.open(o, this.logicUrl + e, !0);
s.setRequestHeader("cache-control", "no-cache");
s.setRequestHeader("contentType", "text/html;charset=uft-8");
s.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;");
s.onreadystatechange = function() {
if (404 == s.status) {
r.hideMask();
r.showTipsMsg("加载失败");
}
if (4 == s.readyState && s.status >= 200 && s.status <= 207) {
var e, t = s.responseText;
r.hideMask();
try {
cc.log("response=>" + t);
(e = JSON.parse(t)).success && i ? i(e) : r.showTipsMsg(e.message, function() {
e.restart && cc.game.restart();
});
} catch (e) {
cc.error(e);
cc.error(e.message);
r.showTipsMsg(e.message);
r.hideMask();
}
}
};
s.timeout = 1e4;
s.onerror = function() {
cc.log("request onerror");
r.hideMask();
r.showTipsMsg("网络连接失败", function() {
if (cc.director.getScene().name == n.getTableScene()) {
console.log("跳转登陆---------------10");
cc.director.loadScene("Login");
}
});
};
s.ontimeout = function() {
cc.log("request ontimeout");
r.hideMask();
r.showTipsMsg("网络连接超时", function() {
if (cc.director.getScene().name == n.getTableScene()) {
console.log("跳转登陆---------------11");
cc.director.loadScene("Login");
}
});
};
t.version = cc.gameVersion;
t.areaCode = "00";
s.send(JSON.stringify(t));
} catch (e) {
cc.log(e);
r.hideMask();
r.showTipsMsg(e.message);
}
}
});
t.exports = o.getInstance();
cc._RF.pop();
}, {
Cache: "Cache",
DataBase: "DataBase",
PACK: "PACK",
ROUTE: "ROUTE"
} ],
table_mgr: [ function(e, t) {
"use strict";
cc._RF.push(t, "b4680OevIVElaU46qwdzvOc", "table_mgr");
var n = e("./table.js"), i = t.exports;
i.m_tbl = {};
i.m_eye_tbl = {};
i.m_feng_tbl = {};
i.m_feng_eye_tbl = {};
i.Init = function() {
for (var e = 0; e < 9; e++) {
this.m_tbl[e] = new n();
this.m_tbl[e].init();
}
for (var t = 0; t < 9; t++) {
this.m_eye_tbl[t] = new n();
this.m_eye_tbl[t].init();
}
for (var i = 0; i < 9; i++) {
this.m_feng_tbl[i] = new n();
this.m_feng_tbl[i].init();
}
for (var a = 0; a < 9; a++) {
this.m_feng_eye_tbl[a] = new n();
this.m_feng_eye_tbl[a].init();
}
};
i.getTable = function(e, t, n) {
return n ? t ? this.m_eye_tbl[e] : this.m_tbl[e] : t ? this.m_feng_eye_tbl[e] : this.m_feng_tbl[e];
};
i.Add = function(e, t, n, i) {
var a = this.getTable(t, n, i);
a && a.add(e);
};
i.check = function(e, t, n, i) {
var a = this.getTable(t, n, i);
return !!a && a.check(e);
};
i.LoadTable = function() {
for (var e = 0; e < 9; e++) {
var t = "table_%d".replace("%d", e);
this.m_tbl[e].load(t);
}
for (var n = 0; n < 9; n++) {
var i = "eye_table_%d".replace("%d", n);
this.m_eye_tbl[n].load(i);
}
};
i.DumpTable = function() {
for (var e = 0; e < 9; e++) {
var t = "table_%d".replace("%d", e);
this.m_tbl[e].dump(t);
}
for (var n = 0; n < 9; n++) {
var i = "eye_table_%d".replace("%d", n);
this.m_eye_tbl[n].dump(i);
}
};
i.LoadFengTable = function() {
for (var e = 0; e < 9; e++) {
var t = "feng_table_%d".replace("%d", e);
this.m_feng_tbl[e].load(t);
}
for (var n = 0; n < 9; n++) {
var i = "feng_eye_table_%d".replace("%d", n);
this.m_feng_eye_tbl[n].load(i);
}
};
i.DumpFengTable = function() {
for (var e = 0; e < 9; e++) {
var t = "feng_table_%d.tbl".replace("%d", e);
this.m_feng_tbl[e].dump(t);
}
for (var n = 0; n < 9; n++) {
var i = "feng_eye_table_%d.tbl".replace("%d", n);
this.m_feng_eye_tbl[n].dump(i);
}
};
cc._RF.pop();
}, {
"./table.js": "table"
} ],
table: [ function(e, t) {
"use strict";
cc._RF.push(t, "2b6e7XtA/tA365Tqmav3A9G", "table");
var n = function() {
this.tbl = {};
};
t.exports = n;
n.prototype.init = function() {
this.tbl = {};
};
n.prototype.check = function(e) {
return !!this.tbl[e];
};
n.prototype.add = function(e) {
this.tbl[e] = 1;
};
n.prototype.dump = function() {};
n.prototype.load = function(e) {
var t = this;
cc.url.raw("resources/tbl/" + e);
cc.loader.loadRes("tbl/" + e, function(e, n) {
if (e) ; else {
var i = n.text;
i = i.split("\n");
for (var a = 0; a < i.length; a++) if (i[a]) {
i[a] = i[a].replace("\r", "");
t.tbl[i[a]] = 1;
}
}
});
if (cc.sys.isNative) {
var n = jsb.fileUtils.getStringFromFile(cc.url.raw("resources/" + e + ".json"));
n = n.split("\n");
for (var i = 0; i < n.length; i++) if (n[i]) {
n[i] = n[i].replace("\r", "");
this.tbl[n[i]] = 1;
}
}
};
cc._RF.pop();
}, {} ],
ui: [ function(e, t, n) {
"use strict";
cc._RF.push(t, "8588fv6TkdGsZbwyaYwyBmv", "ui");
n.__esModule = !0;
n.default = void 0;
var i, a, r, o, s, c, l, u, d, h, f, p, m, g, v, C, b, y, S, _, T, E, A, I, N, w, D, P, M, x, O, G, R, k, L, B, F, U, H, z, j, W, q, Y, J, V, K, Z, Q, X, $, ee, te, ne, ie, ae, re = e("../../../GameBase/GameConfig"), oe = ve(e("../../../Main/Script/ROUTE")), se = function(e) {
if (e && e.__esModule) return e;
if (null === e || "object" != typeof e && "function" != typeof e) return {
default: e
};
var t = ge(void 0);
if (t && t.has(e)) return t.get(e);
var n = {}, i = Object.defineProperty && Object.getOwnPropertyDescriptor;
for (var a in e) if ("default" !== a && Object.prototype.hasOwnProperty.call(e, a)) {
var r = i ? Object.getOwnPropertyDescriptor(e, a) : null;
r && (r.get || r.set) ? Object.defineProperty(n, a, r) : n[a] = e[a];
}
n.default = e;
t && t.set(e, n);
return n;
}(e("../../../Main/Script/TableInfo")), ce = ve(e("../../../Main/Script/utils")), le = ve(e("../../../Main/NetWork/Connector")), ue = ve(e("../../../Main/Script/Cache")), de = ve(e("../../../Main/Script/audio-ctrl")), he = (ve(e("../../../GamePoker/Game07/Script/Logic07")), 
ve(e("./hands-card"))), fe = ve(e("../../../Main/Script/DataBase")), pe = ve(e("../../../Main/Script/PACK")), me = e("./queue");
function ge(e) {
if ("function" != typeof WeakMap) return null;
var t = new WeakMap(), n = new WeakMap();
return (ge = function(e) {
return e ? n : t;
})(e);
}
function ve(e) {
return e && e.__esModule ? e : {
default: e
};
}
function Ce(e, t, n, i) {
n && Object.defineProperty(e, t, {
enumerable: n.enumerable,
configurable: n.configurable,
writable: n.writable,
value: n.initializer ? n.initializer.call(i) : void 0
});
}
function be(e, t) {
for (var n = 0; n < t.length; n++) {
var i = t[n];
i.enumerable = i.enumerable || !1;
i.configurable = !0;
"value" in i && (i.writable = !0);
Object.defineProperty(e, i.key, i);
}
}
function ye(e, t, n) {
t && be(e.prototype, t);
n && be(e, n);
Object.defineProperty(e, "prototype", {
writable: !1
});
return e;
}
function Se(e) {
if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return e;
}
function _e(e, t) {
e.prototype = Object.create(t.prototype);
e.prototype.constructor = e;
Te(e, t);
}
function Te(e, t) {
return (Te = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
e.__proto__ = t;
return e;
})(e, t);
}
function Ee(e, t, n, i, a) {
var r = {};
Object.keys(i).forEach(function(e) {
r[e] = i[e];
});
r.enumerable = !!r.enumerable;
r.configurable = !!r.configurable;
("value" in r || r.initializer) && (r.writable = !0);
r = n.slice().reverse().reduce(function(n, i) {
return i(e, t, n) || n;
}, r);
if (a && void 0 !== r.initializer) {
r.value = r.initializer ? r.initializer.call(a) : void 0;
r.initializer = void 0;
}
if (void 0 === r.initializer) {
Object.defineProperty(e, t, r);
r = null;
}
return r;
}
var Ae = cc._decorator, Ie = Ae.ccclass, Ne = Ae.property, we = {
DONE: "DONE",
HANDLE: "HANDLE"
}, De = {
ext: !1,
show: !0,
black: !1,
bird: !0,
rand: !0,
four: !0,
aaa: !1,
limit: !0,
person: 3,
clan: !0,
turn: 10
}, Pe = (i = Ne(cc.Node), a = Ne(cc.Node), r = Ne(cc.Node), o = Ne(he.default), 
s = Ne([ cc.Node ]), c = Ne([ cc.Node ]), l = Ne([ cc.Node ]), u = Ne(cc.Prefab), 
d = Ne(cc.Prefab), h = Ne(cc.Prefab), f = Ne(cc.Prefab), p = Ne([ sp.SkeletonData ]), 
m = Ne(cc.Node), g = Ne(cc.Node), v = Ne(cc.Node), C = Ne(cc.Node), b = Ne(cc.Node), 
y = Ne(cc.Label), S = Ne(cc.Label), _ = Ne(cc.Label), T = Ne(cc.Label), E = Ne(cc.Label), 
A = Ne(cc.Label), I = Ne(cc.Prefab), N = Ne(cc.Node), w = Ne(cc.Node), D = Ne(cc.Node), 
Ie(P = (M = function(e) {
_e(t, e);
function t() {
for (var t, n = arguments.length, i = new Array(n), a = 0; a < n; a++) i[a] = arguments[a];
Ce(t = e.call.apply(e, [ this ].concat(i)) || this, "showCardContent1", x, Se(t));
Ce(t, "showCardContent2", O, Se(t));
Ce(t, "sprDisnable", G, Se(t));
Ce(t, "layerHandCards", R, Se(t));
Ce(t, "dropCards", k, Se(t));
Ce(t, "bgCount", L, Se(t));
Ce(t, "imgPass", B, Se(t));
Ce(t, "summaryPrefab", F, Se(t));
Ce(t, "nodeBack", U, Se(t));
Ce(t, "preType", H, Se(t));
Ce(t, "preCoin", z, Se(t));
Ce(t, "pokerSkeleton", j, Se(t));
Ce(t, "btnBirdReady", W, Se(t));
Ce(t, "btnNormalReady", q, Se(t));
Ce(t, "btnExit", Y, Se(t));
Ce(t, "btnTips", J, Se(t));
Ce(t, "btnPlayCards", V, Se(t));
Ce(t, "lblGameLevel", K, Se(t));
Ce(t, "lblClubType", Z, Se(t));
Ce(t, "lblGameType", Q, Se(t));
Ce(t, "lblBase", X, Se(t));
Ce(t, "lblNiao", $, Se(t));
Ce(t, "lblTurn", ee, Se(t));
Ce(t, "prePlayerInfo", te, Se(t));
Ce(t, "layerPlayer", ne, Se(t));
t.players = [];
Ce(t, "btnStartAuto", ie, Se(t));
Ce(t, "maskAuto", ae, Se(t));
t._autoStatus = !1;
t.isChgTable = !1;
t._status = we.DONE;
return t;
}
var n = t.prototype;
n.onLoad = function() {
var e = this;
this.addEvents();
ce.default.pop(re.GameConfig.pop.TipsCard, function(t) {
t.setPosition(-cc.winSize.width / 2 + 200, cc.winSize.height / 2 - t.height / 2);
e.tipsCardPrefab = t.getComponent("ModuleTipsCard");
});
fe.default.connectInfo && fe.default.connectInfo.reconnect ? le.default.emit(pe.default.CS_REJOIN_DONE, {}) : le.default.emit(pe.default.CS_JOIN_DONE, {});
};
n.addEvents = function() {};
n.start = function() {
re.GameConfig.isTest && this.schedule(this.loop, .3);
};
n.loop = function() {
if (this._status == we.DONE) {
var e = me.Queue.next();
if (!e) return;
console.log(e.route + ":" + e.data);
this._status = we.HANDLE;
switch (e.route) {
case oe.default.SC_JOIN_TABLE:
this.initTable(e.data);
break;

case oe.default.SC_GAME_READY:
this.changeReady(e.data);
break;

case oe.default.SC_PLAYER_LEAVE:
this.leavePlayer(e.data.idx);
break;

case oe.default.SC_JOIN_GAME:
this.addPlayer(e.data);
break;

case oe.default.SC_PREPARE:
break;

case oe.default.SC_RECONNECT:
this.reconnect(e.data);
break;

case oe.default.SC_GAME_INIT:
this.initGame(e.data);
break;

case oe.default.SC_PLAY_CARD:
e.data.clock = 0;
this.playCard(e.data);
break;

case oe.default.SC_SHOW_CARD:
this.showPlayCards(e.data);
break;

case oe.default.SC_PASS_CARD:
this.showPass(e.data);
break;

case oe.default.SC_REFRESH_CARD:
db.player.card = e.data.card;
break;

case oe.default.SC_CHANGE_STATUS:
this.changeStatus(e.data);
break;

case oe.default.SC_SCORE:
this.scoreFly(e.data);
break;

case oe.default.SC_FINISH:
this.finish();
break;

case oe.default.SC_ROUND_SUMMARY:
this.roundSummary(e.data);
break;

case oe.default.SC_GAME_SUMMARY:
break;

case oe.default.SC_GAME_VOTE:
this.gameVote(e.data);
break;

case oe.default.SC_GAME_CHAT:
null != this.chat && this.chat.contentFly(e.data);
break;

case oe.default.SC_SYSTEM_NOTICE:
null != this.chat && this.chat.systemNotice(e.data);
break;

case oe.default.SC_PLAY_ERROR:
this._status = we.DONE;
break;

case oe.default.SC_ALERT:
this.acBaodan(e.data);
break;

case oe.default.SC_LOCATION:
this.refreshLoc(e.data);
break;

case oe.default.SC_CANCEL_AUTO:
this.cancelAuto(e.data);
break;

case oe.default.SC_START_AUTO:
this.startAuto(e.data);
break;

case oe.default.SC_TIPS:
this.showTipsCard(e.data);
break;

default:
this._status = we.DONE;
}
}
};
n.initTable = function(e) {
var t = cc.find("Canvas");
this.showCardContent1.position = cc.v2(t.width / 2 - 139 - 35 - re.GameConfig.FitScreen, 130);
this.showCardContent2.position = cc.v2(139 - t.width / 2 + 70 + re.GameConfig.FitScreen, 130);
this.isChgTable = !1;
e.turn = e.turn || 0;
se.default.status = e.status;
se.default.idx = e.idx;
se.default.options = e.options;
De.person = -1 != e.options.gameType.indexOf("SOLO") ? 2 : 3;
se.default.config = De;
se.default.tid = e.tid;
se.default.current = e.current;
this.btnBirdReady.active = 0 == e.ready || se.default.status == re.GameConfig.GameStatus.WAIT;
this.btnNormalReady.active = 0 == e.ready || se.default.status == re.GameConfig.GameStatus.WAIT;
this.btnExit.active = se.default.status != re.GameConfig.GameStatus.START && (0 == e.turn || e.turn >= 10);
this.lblGameLevel.string = re.GameConfig.GameRoomLevel[e.options.level];
this.lblClubType.string = e.options.isLeague ? "大联盟" : "亲友圈";
this.lblGameType.string = re.GameConfig.GameName[e.options.gameType] + "（10小局起）";
this.lblBase.string = "底分: ¥" + ce.default.formatGold(e.options.base);
this.lblNiao.string = "打鸟: ¥" + ce.default.formatGold(5 * e.options.base);
this.setTurn(e);
this.initRealIdx(e);
this.initPlayers(e);
this.autoStatus = !1;
this._status = we.DONE;
};
n.setTurn = function(e) {
se.default.turn = e.turn;
this.lblTurn.string = 0 == e.turn ? "" : e.turn + "局";
};
n.initRealIdx = function(e) {
var t = e.idx;
se.default.idx = e.idx;
var n = [ 0, 0, 0 ];
n[t] = 0;
n[(t + 1) % 3] = 1;
2 == se.default.config.person ? n[(t + 2) % 3] = 1 : n[(t + 2) % 3] = 2;
se.default.realIdx = n;
};
n.initPlayers = function(e) {
var t = this;
this.players = new Array(se.default.config.person);
se.default.players = e.players;
e.players.forEach(function(n) {
console.log("hahahahhaha");
if (null != n) {
var i = cc.instantiate(t.prePlayerInfo);
t.layerPlayer.addChild(i);
var a = i.getComponent("player07");
a.playerData = n;
a.activeReady(0 != n.ready);
a.activeNiao(n);
a.activeAutoPlay(n.auto);
t.players[se.default.realIdx[n.idx]] = a;
se.default.idx == e.idx && (t.autoStatus = n.auto);
}
});
};
n.initGame = function(e) {
this.players.forEach(function(e) {
e.activeReady(!1);
e.cardCount(15);
});
se.default.baodan = 2 == De.person ? [ !1, !1 ] : [ !1, !1, !1 ];
se.default.zhuang = e.zhuang;
se.default.firstPlay = !0;
se.default.current = null;
se.default.status = re.GameConfig.GameStatus.START;
this.btnExit.active = !1;
this.setTurn(e);
this.btnStartAuto.active = !0;
this.initHands(e, !1);
};
n.addPlayer = function(e) {
this._status = we.DONE;
if (e.idx != se.default.idx) if (this.players[se.default.realIdx[e.idx]]) this.players[se.default.realIdx[e.idx]].playerData = e; else {
se.default.players[e.idx] = e;
var t = cc.instantiate(this.prePlayerInfo);
t.parent = this.layerPlayer;
var n = t.getComponent("player07");
n.playerData = e;
this.players[se.default.realIdx[e.idx]] = n;
}
};
n.scoreFly = function(e) {
var t = this;
this.players.forEach(function(e) {
e.removeDropCard();
});
this.sprDisnable.active = !1;
var n = e.from.length, i = cc.url.raw("resources/Audio/Common/addScore.mp3");
de.default.getInstance().playSFX(i);
var a = [], r = [ cc.v2(69.5 - cc.winSize.width / 2 + re.GameConfig.FitScreen, -63), cc.v2(cc.winSize.width / 2 - 69.5 - re.GameConfig.FitScreen, 67), cc.v2(69.5 - cc.winSize.width / 2 + re.GameConfig.FitScreen, 47) ], o = r[se.default.realIdx[e.to[0].idx]];
try {
this.players[se.default.realIdx[e.to[0].idx]].showBombScores(se.default.realIdx[e.to[0].idx], e.to[0].wallet, e.to[0].score, function() {
for (var i = 0; i < 20; i++) {
var s = cc.instantiate(t.preCoin);
s.parent = t.node;
s.setPosition(r[se.default.realIdx[e.from[i % n].idx]]);
var c = cc.v2(100 * Math.random() - 50, 100 * Math.random() - 50);
a.push(cc.targetedAction(s, cc.sequence(cc.delayTime(.1 * Math.random()), cc.spawn(cc.moveBy(.3, c), cc.scaleTo(.3, .7)), cc.moveTo(.4, o), cc.callFunc(function() {
this.destroy();
}, s))));
}
t.node.runAction(cc.spawn(a));
});
e.from.forEach(function(e) {
t.players[se.default.realIdx[e.idx]].showBombScores(se.default.realIdx[e.idx], e.wallet, e.score);
});
} catch (e) {
console.log("----err", e);
}
this._status = we.DONE;
};
n.finish = function() {
this.players.forEach(function(e) {
e.removeDropCard();
});
this.sprDisnable.active = !1;
se.default.current = null;
this._status = we.DONE;
};
n.initHands = function(e, t) {
e.hands.sort(function(e, t) {
return e % 100 - t % 100;
});
t ? this.layerHandCards.handsCard = e.hands.reverse() : this.cutCards(e.hands.reverse());
this._status = we.DONE;
};
n.cutCards = function(e) {
var t = this;
this._delayTime = 100;
for (var n = [ cc.v2(522, 122), cc.v2(-522, 122) ], i = cc.url.raw("resources/Audio/Common/deal07.mp3"), a = Math.ceil(e.length / 2), r = function(e) {
var i = cc.instantiate(t.nodeBack);
i.parent = t.node;
i.setPosition(0, 0);
i.runAction(cc.sequence(cc.delayTime(.02 * e % 3), cc.spawn(cc.rotateBy(.3, 180), cc.scaleTo(.3, 1), cc.moveTo(.6, n[e % 2]), cc.sequence(cc.delayTime(.4), cc.fadeOut(.2))), cc.delayTime(.2), cc.callFunc(function() {
i.destroy();
})));
}, o = 0; o < 2 * e.length; o++) r(o);
for (var s = function(e) {
var n = cc.instantiate(t.nodeBack);
n.parent = t.node;
n.setPosition(0, 0);
n.runAction(cc.sequence(cc.delayTime(.02 * e % 3), cc.spawn(cc.rotateBy(.3, 180), cc.scaleTo(.3, 1), cc.moveTo(.6, 40 * (8 - a + e) - 273, -145), cc.callFunc(function() {
e % 9 == 0 && de.default.getInstance().playSFX(i);
}), cc.sequence(cc.delayTime(.4), cc.fadeOut(.2))), cc.callFunc(function() {
n.destroy();
})));
}, c = 0; c < e.length; c++) s(c);
this.layerHandCards.cutCards(e);
};
n.playCard = function(e) {
se.default.currentPlayer = e.idx;
var t = e.idx, n = se.default.realIdx[t];
this.players[n].removeDropCard();
this.showAction(t);
se.default.firstPlay && this.players[n].activeBanker(!0);
var i = Math.max(se.default.options.clock - e.clock, 0);
this.players[n].showClock(i);
t == se.default.idx && this.layerHandCards.playCard();
se.default.firstPlay = !1;
this._status = we.DONE;
};
n.showPass = function(e) {
var t = se.default.realIdx[e.idx];
this.players[t].showPass();
this._delayTime = 5;
this.layerHandCards.changeBtn(!1);
this.sprDisnable.active = e.idx == se.default.idx;
this.layerPlayer.getComponent("BgTableAudioCtr07").PassVoice(se.default.players[e.idx].prop.sex);
this._status = we.DONE;
};
n.showAction = function(e) {
this.players[se.default.realIdx[e]].activeAction(!0);
};
n.readyGame = function(e, t) {
re.GameConfig.isTest && le.default.gameMessage(oe.default.CS_GAME_READY, {
readyStatus: parseInt(t)
});
};
n.changeReady = function(e) {
if (se.default.idx == e.idx) {
this.btnNormalReady.active = !1;
this.btnBirdReady.active = !1;
this.initDesk();
}
try {
this.players[se.default.realIdx[e.idx]].activeReady(!0);
this.players[se.default.realIdx[e.idx]].activeNiao(e);
} catch (e) {}
this._status = we.DONE;
};
n.exitGame = function() {
var e = this;
if (re.GameConfig.isTest && !this.onExitting && se.default.status != re.GameConfig.GameStatus.START) {
this.onExitting = !0;
ue.default.showConfirm("是否退出房间", function() {
e.onExitting = !1;
le.default.gameMessage(oe.default.CS_PLAYER_LEAVE, {});
}, function() {
e.onExitting = !1;
});
}
};
n.leavePlayer = function(e) {
if (0 != se.default.realIdx[e] || this.isChgTable) {
se.default.players[e] = null;
se.default.turn = 0;
this.btnExit.active = !0;
this.players[se.default.realIdx[e]].leaveRoom();
this.players[se.default.realIdx[e]] = null;
this._status = we.DONE;
} else {
le.default.disconnect();
this.node.removeAllChildren();
this.node.destroy();
}
};
n.initDesk = function() {
this.sprDisnable.active = !1;
this.node.getChildByName("roundSummary") && this.node.getChildByName("roundSummary").removeFromParent();
this.players.forEach(function(e) {
e && e.initPlayer();
});
this.layerHandCards.handsCard = [];
};
n.acBaodan = function(e) {
var t = se.default.players[e.idx].prop.sex;
ue.default.playSound(t + "_baodan");
se.default.baodan[e.idx] = !0;
this.players[se.default.realIdx[e.idx]].activeBaodan(!0);
this._status = we.DONE;
};
n.showPlayCards = function(e) {
this.layerHandCards.changeBtn(!1);
se.default.current = null;
se.default.current = e;
if (se.default.idx == e.idx) {
this.autoStatus = e.auto;
this.layerHandCards.removeHandsCard(e.cards);
}
this.sprDisnable.active = !1;
this._delayTime = 7;
this.players[se.default.realIdx[e.idx]].showCard(e);
this._status = we.DONE;
};
n.showTipsCard = function(e) {
this.tipsCardPrefab.refreshCard(e.cards);
};
n.roundSummary = function(e) {
var t = this;
se.default.turn >= 10 && (this.autoStatus = !1);
this.tipsCardPrefab && this.tipsCardPrefab.removeCards();
this.players.forEach(function(e) {
e.removeDropCard();
});
se.default.zhuang = null;
se.default.baodan = 2 == De.person ? [ !1, !1 ] : [ !1, !1, !1 ];
se.default.status = re.GameConfig.GameStatus.SUMMARY;
this.btnExit.active = 0 == se.default.turn || se.default.turn >= 10;
var n = e.winner == se.default.idx ? "audio_win.mp3" : "audio_lose.mp3";
this.playManageAudio && this.playManageAudio(n);
this.node.runAction(cc.sequence(cc.delayTime(.5), cc.callFunc(function() {
var n = cc.instantiate(t.summaryPrefab);
t.node.addChild(n, 2, "roundSummary");
n.getComponent("ModuleSummary07").initData(e);
e.players.forEach(function(e) {
if (t.players[se.default.realIdx[e.idx]]) {
t.players[se.default.realIdx[e.idx]].initPlayer();
t.players[se.default.realIdx[e.idx]].wallet = e.wallet;
t.players[se.default.realIdx[e.idx]].summaryShowCard(e.hands);
}
});
})));
this._status = we.DONE;
this.scheduleOnce(function() {
le.default.gameMessage(oe.default.CS_GAME_READY, {
readyStatus: 1
});
}, 9);
};
n.reconnect = function(e) {
var t = this;
se.default.baodan = -1 != e.options.gameType.indexOf("SOLO") ? [ !1, !1 ] : [ !1, !1, !1 ];
se.default.zhuang = e.zhuang;
se.default.firstPlay = !1;
se.default.status = e.status;
this.initTable(e);
e.players.forEach(function(e) {
if (e && null != e.ready) {
t.players[se.default.realIdx[e.idx]].activeReady(0 != e.ready);
t.players[se.default.realIdx[e.idx]].activeNiao(e);
t.players[se.default.realIdx[e.idx]].cardCount(e.hands);
}
});
if (null != e.ready) {
this.btnBirdReady.active = 0 == e.ready;
this.btnNormalReady.active = 0 == e.ready;
}
e.vote && this.gameVote(e);
if (e.status != re.GameConfig.GameStatus.WAIT && e.status != re.GameConfig.GameStatus.PREPARE) if (e.status != re.GameConfig.GameStatus.SUMMARY) {
this.btnExit.active = !1;
e.players.forEach(function(n) {
t.players[se.default.realIdx[n.idx]].activeAutoPlay(n.auto);
t.players[se.default.realIdx[n.idx]].activeReady(!1);
se.default.idx == n.idx && (t.autoStatus = n.auto);
if (n.alert) {
se.default.baodan[n.idx] = !0;
t.players[se.default.realIdx[n.idx]].activeBaodan(!0);
}
null != e.currentCard && n.idx == e.currentCard.idx && t.showPlayCards(e.currentCard);
});
se.default.current = e.current;
this.showAction(e.currentPlayer);
this.initHands(e, !0);
e.players.forEach(function(n) {
null != n && n.idx == e.currentPlayer && t.playCard(n);
});
this.btnBirdReady.active = !1;
this.btnNormalReady.active = !1;
} else this.btnExit.active = 0 == se.default.turn || se.default.turn >= 10; else this.btnExit.active = 0 == se.default.turn || se.default.turn >= 10;
};
n.changeStatus = function(e) {
if (!(se.default.idx < 0)) {
var t = se.default.realIdx[e.idx];
this.players[t] && this.players[t].activeOffline(e.offline);
this._status = we.DONE;
}
};
n.cancelAuto = function() {
this.autoStatus = !1;
this._status = we.DONE;
};
n.onClickCancelAuto = function() {
le.default.gameMessage(oe.default.CS_CANCEL_AUTO, {});
};
ye(t, [ {
key: "autoStatus",
set: function(e) {
if (this._autoStatus != e) {
this.btnStartAuto.active = !e;
this.maskAuto.active = e;
this._autoStatus = e;
}
}
} ]);
return t;
}(cc.Component), x = Ee(M.prototype, "showCardContent1", [ i ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), O = Ee(M.prototype, "showCardContent2", [ a ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), G = Ee(M.prototype, "sprDisnable", [ r ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), R = Ee(M.prototype, "layerHandCards", [ o ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), k = Ee(M.prototype, "dropCards", [ s ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), L = Ee(M.prototype, "bgCount", [ c ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), B = Ee(M.prototype, "imgPass", [ l ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), F = Ee(M.prototype, "summaryPrefab", [ u ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), U = Ee(M.prototype, "nodeBack", [ d ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), H = Ee(M.prototype, "preType", [ h ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), z = Ee(M.prototype, "preCoin", [ f ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), j = Ee(M.prototype, "pokerSkeleton", [ p ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return [];
}
}), W = Ee(M.prototype, "btnBirdReady", [ m ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), q = Ee(M.prototype, "btnNormalReady", [ g ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Y = Ee(M.prototype, "btnExit", [ v ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), J = Ee(M.prototype, "btnTips", [ C ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), V = Ee(M.prototype, "btnPlayCards", [ b ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), K = Ee(M.prototype, "lblGameLevel", [ y ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Z = Ee(M.prototype, "lblClubType", [ S ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), Q = Ee(M.prototype, "lblGameType", [ _ ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), X = Ee(M.prototype, "lblBase", [ T ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), $ = Ee(M.prototype, "lblNiao", [ E ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ee = Ee(M.prototype, "lblTurn", [ A ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), te = Ee(M.prototype, "prePlayerInfo", [ I ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ne = Ee(M.prototype, "layerPlayer", [ N ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ie = Ee(M.prototype, "btnStartAuto", [ w ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), ae = Ee(M.prototype, "maskAuto", [ D ], {
configurable: !0,
enumerable: !0,
writable: !0,
initializer: function() {
return null;
}
}), M)) || P);
n.default = Pe;
t.exports = n.default;
cc._RF.pop();
}, {
"../../../GameBase/GameConfig": "GameConfig",
"../../../GamePoker/Game07/Script/Logic07": "Logic07",
"../../../Main/NetWork/Connector": "Connector",
"../../../Main/Script/Cache": "Cache",
"../../../Main/Script/DataBase": "DataBase",
"../../../Main/Script/PACK": "PACK",
"../../../Main/Script/ROUTE": "ROUTE",
"../../../Main/Script/TableInfo": "TableInfo",
"../../../Main/Script/audio-ctrl": "audio-ctrl",
"../../../Main/Script/utils": "utils",
"./hands-card": "hands-card",
"./queue": "queue"
} ],
use_reversed_rotateBy: [ function(e, t) {
"use strict";
cc._RF.push(t, "40a2dWHBIBFvp3MIK+nA8BY", "use_reversed_rotateBy");
cc.RotateBy._reverse = !0;
cc._RF.pop();
}, {} ],
"use_v2.0.x_cc.Toggle_event": [ function(e, t) {
"use strict";
cc._RF.push(t, "84225oqSx9OPZhu2vhtDly7", "use_v2.0.x_cc.Toggle_event");
cc.Toggle && (cc.Toggle._triggerEventInScript_check = !0);
cc._RF.pop();
}, {} ],
utils: [ function(require, module, exports) {
"use strict";
cc._RF.push(module, "c1aa514KXBP3qYn1WXR56HX", "utils");
function _createForOfIteratorHelperLoose(e, t) {
var n = "undefined" != typeof Symbol && e[Symbol.iterator] || e["@@iterator"];
if (n) return (n = n.call(e)).next.bind(n);
if (Array.isArray(e) || (n = _unsupportedIterableToArray(e)) || t && e && "number" == typeof e.length) {
n && (e = n);
var i = 0;
return function() {
return i >= e.length ? {
done: !0
} : {
done: !1,
value: e[i++]
};
};
}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}
function _unsupportedIterableToArray(e, t) {
if (e) {
if ("string" == typeof e) return _arrayLikeToArray(e, t);
var n = Object.prototype.toString.call(e).slice(8, -1);
"Object" === n && e.constructor && (n = e.constructor.name);
return "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? _arrayLikeToArray(e, t) : void 0;
}
}
function _arrayLikeToArray(e, t) {
(null == t || t > e.length) && (t = e.length);
for (var n = 0, i = new Array(t); n < t; n++) i[n] = e[n];
return i;
}
var _require = require("../../GameBase/GameConfig"), GameConfig = _require.GameConfig, _require2 = require("../../script/common/network/Http"), Http = _require2.default, JSEncrypt = require("./jsencrypt"), loadNative = function(e, t) {
var n = jsb.fileUtils.getWritablePath() + "img/", i = n + CryptoJS.MD5(e).toString() + ".png";
function a() {
cc.loader.load(i, function(e, n) {
if (e) cc.error(e); else {
var i = new cc.SpriteFrame(n);
if (i) {
i.retain();
t(i);
}
}
});
}
if (jsb.fileUtils.isFileExist(i)) {
cc.log("Remote is find" + i);
a();
} else {
var r = function(e) {
if ("undefined" != typeof e) {
jsb.fileUtils.isDirectoryExist(n) || jsb.fileUtils.createDirectory(n);
if (jsb.fileUtils.writeDataToFile(new Uint8Array(e), i)) {
cc.log("Remote write file succeed.");
a();
} else cc.log("Remote write file failed.");
} else cc.log("Remote download file failed.");
}, o = new XMLHttpRequest();
o.onreadystatechange = function() {
cc.log("xhr.readyState  " + o.readyState);
cc.log("xhr.status  " + o.status);
if (4 === o.readyState) if (200 === o.status) {
o.responseType = "arraybuffer";
r(o.response);
} else r(null);
}.bind(this);
o.open("GET", e, !0);
o.send();
}
};
Date.prototype.format = function(e) {
var t = {
"M+": this.getMonth() + 1,
"d+": this.getDate(),
"h+": this.getHours(),
"m+": this.getMinutes(),
"s+": this.getSeconds(),
"q+": Math.floor((this.getMonth() + 3) / 3),
S: this.getMilliseconds()
};
/(y+)/.test(e) && (e = e.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length)));
for (var n in t) new RegExp("(" + n + ")").test(e) && (e = e.replace(RegExp.$1, 1 == RegExp.$1.length ? t[n] : ("00" + t[n]).substr(("" + t[n]).length)));
return e;
};
var screenShoot = function(e, t) {
void 0 === t && (t = 80);
if (cc.sys.isNative) {
var n = new cc.Node();
n.parent = cc.director.getScene();
n.width = cc.view.getVisibleSize().width;
n.x = cc.view.getVisibleSize().height;
n.y = cc.view.getVisibleSize().width;
n.height = cc.view.getVisibleSize().height;
var i = n.addComponent(cc.Camera);
i.cullingMask = 4294967295;
var a = new cc.RenderTexture();
a.initWithSize(n.width, n.height);
i.targetTexture = a;
i.render(null);
var r = a.readPixels(), o = a.width, s = a.height, c = jsb.fileUtils.getWritablePath() + "result_share.jpg";
jsb.fileUtils.isFileExist(c) && jsb.fileUtils.removeFile(c);
if (jsb.saveImageData(r, o, s, c)) {
e && e(c);
i.destroy();
a.destroy();
}
}
}, SaveToLocal = function(e, t) {
var n = null, i = new XMLHttpRequest();
i.onreadystatechange = function() {
if (4 === i.readyState && 200 === i.status && i.response && cc.sys.isNative) try {
var e = jsb.fileUtils.getWritablePath();
n = e + "textureName.png";
var a = new Uint8Array(i.response);
jsb.fileUtils.writeDataToFile(a, n);
t && t(n);
} catch (e) {
t && t("error");
}
}, i.responseType = "arraybuffer";
i.open("GET", e, !0);
i.send();
}, checkPhone = function(e) {
if (e.length < 11) return !1;
var t = parseInt(e);
return !!/^1(2|3|4|5|6|7|8|9)\d{9}$/.test(t);
}, fitScreen = function() {
if (cc.view.getFrameSize().width / cc.view.getFrameSize().height >= 2436 / 1125 - .05) {
this.isIphoneX = !0;
GameConfig.FitScreen = 44;
} else this.isIphoneX = !1;
if (cc.view.getFrameSize().width / cc.view.getFrameSize().height >= 1.775) {
var e = cc.view.getFrameSize().width * (640 / cc.view.getFrameSize().height);
cc.view.setDesignResolutionSize(e, 640, cc.ResolutionPolicy.FIXED_HEIGHT);
} else {
var t = cc.view.getFrameSize().height * (1136 / cc.view.getFrameSize().width);
cc.view.setDesignResolutionSize(1136, t, cc.ResolutionPolicy.FIXED_WIDTH);
}
}, formatGold = function(e) {
return (e / 100).toFixed(2);
}, toPercent = function(e) {
return Number(100 * e).toFixed(1) + "%";
}, getTimeStamp = function(e) {
void 0 === e && (e = "");
return "" == e ? new Date().getTime() + GameConfig.ServerTimeDiff : new Date(e).getTime() + GameConfig.ServerTimeDiff || 0;
}, getFormatDate = function(e) {
void 0 === e && (e = "");
var t = "" == e ? new Date() : new Date(e);
return "" + t.getFullYear() + (t.getMonth() + 1 >= 10 ? t.getMonth() + 1 : "0" + (t.getMonth() + 1)) + (t.getDate() >= 10 ? t.getDate() : "0" + t.getDate());
}, getChips = function(e, t) {
for (var n = []; e > 0; ) for (var i = t.length - 1; i >= 0; i--) {
for (var a = Math.floor(e / t[i].value), r = a - 1; r >= 0; r--) n.push(t[i]);
if ((e -= a * t[i].value) > 0 && e < t[0].value) {
n.push(t[i]);
e = 0;
}
if (e <= 0) break;
}
return n;
}, setScore = function(e, t) {
var n = cc.color("#ffca3b"), i = cc.color("#5deeff");
e.node.color = t > 0 ? n : i;
e.string = t > 0 ? "+" + t : t;
}, subName = function(e, t) {
if (null == e || e.length <= 0) return "";
var n = /[^\x00-\xff]/g;
if (e.replace(n, "mm").length <= t) return e;
for (var i = Math.floor(t / 2); i < e.length; i++) if (e.substr(0, i).replace(n, "mm").length >= t) return e.substr(0, i) + "...";
return e;
}, generateUniqueID = function(e) {
for (var t = ""; t.length < e; t += Math.random().toString(36).substr(2)) ;
return t.substr(0, e);
}, getStringByteLength = function(e) {
var t = 0;
if (e) for (var n = 0; n < e.length; n++) null !== e[n].match(/[^x00-xff]/gi) ? t += 2 : t += 1;
return t;
}, getStringByLength = function(e, t) {
e && e.replace(/[\u4e00-\u9fa5]/g, "aa").replace(/[A-Z]/g, "aa").length > 2 * t && (e = e.substr(0, t) + "...");
return e;
}, showNode = function(e, t) {
if (null != e) {
cc.log("实例化了");
e.active = !0;
} else {
cc.log("没实例化");
(e = cc.instantiate(t)).parent = cc.find("Canvas");
}
return e;
}, decodeInviter = function(e) {
if (isNullOrEmpty(e)) return {};
for (var t, n = {}, i = e.replace(/^\?/, "").split("&"), a = i.length, r = 0; r < a; r++) i[r] && (n[(t = i[r].split("="))[0]] = t[1]);
return n;
}, deepcopyArr = function(e) {
var t = [];
e.forEach(function(e, n) {
var i = JSON.stringify(e);
t[n] = JSON.parse(i);
});
return t;
}, formatFloat = function(e, t) {
return Math.round(e * Math.pow(10, t)) / Math.pow(10, t);
}, getDistance = function(e, t) {
var n = Math.PI / 180 * e.lat, i = Math.PI / 180 * t.lat, a = Math.PI / 180 * e.long, r = Math.PI / 180 * t.long, o = 6371 * Math.acos(Math.sin(n) * Math.sin(i) + Math.cos(n) * Math.cos(i) * Math.cos(a - r));
return formatFloat(o, 1) < 1 ? formatFloat(1e3 * o, 1) + "米" : formatFloat(o, 1) + "公里";
}, judgeDistance = function(e, t, n, i) {
void 0 === i && (i = 1e3);
var a = Math.PI / 180 * e.lat, r = Math.PI / 180 * t.lat, o = Math.PI / 180 * e.long, s = Math.PI / 180 * t.long, c = 6371 * Math.acos(Math.sin(a) * Math.sin(r) + Math.cos(a) * Math.cos(r) * Math.cos(o - s));
return formatFloat(c * i, 1) <= n ? 1 : 0;
}, sortByProps = function(e, t) {
for (var n = [], i = 2; i < arguments.length; i++) n[i - 2] = arguments[i];
var a = [], r = !0;
if (n.length < 1) for (var o in e) {
if (e[o] > t[o]) {
a.push(1);
break;
}
if (e[o] !== t[o]) {
a.push(-1);
break;
}
a.push(0);
} else for (var s = 0; s < n.length; s++) {
var c = n[s];
for (var l in c) {
r = "asc" === c[l];
if (e[l] > t[l]) {
a.push(r ? 1 : -1);
break;
}
if (e[l] !== t[l]) {
a.push(r ? -1 : 1);
break;
}
a.push(0);
}
}
for (var u = 0; u < a.length; u++) if (1 === a[u] || -1 === a[u]) return a[u];
return 0;
}, showLogger = function() {
cc.loader.loadRes("Main/Prefab/logger", function(e, t) {
cc.instantiate(t).getChildByName("logger").getComponent("Logger").init();
});
}, setHead = function(e, t) {
if (isNullOrEmpty(t)) e.spriteFrame = GameConfig.AvatartAtlas.getSpriteFrame("mj_face0"); else {
var n = t.split("://")[0], i = t.split("://")[1];
switch (n) {
case "remote":
cc.loader.load(GameConfig.ConfigUrl + imgUrl + "?file=a.png", function(t, n) {
if (t) cc.isValid(e, !0) && (e.spriteFrame = GameConfig.AvatartAtlas.getSpriteFrame("mj_face0")); else try {
var i = new cc.SpriteFrame(n);
e && (e.spriteFrame = i);
} catch (t) {
cc.isValid(e, !0) && (e.spriteFrame = GameConfig.AvatartAtlas.getSpriteFrame("mj_face0"));
}
});
break;

case "file":
e.spriteFrame = GameConfig.AvatartAtlas.getSpriteFrame("mj_face" + i);
break;

case "https":
case "http":
cc.loader.load(t + "?file=a.png", function(t, n) {
if (t) cc.isValid(e, !0) && (e.spriteFrame = GameConfig.AvatartAtlas.getSpriteFrame("mj_face0")); else try {
var i = new cc.SpriteFrame(n);
e && (e.spriteFrame = i);
} catch (t) {
cc.isValid(e, !0) && (e.spriteFrame = GameConfig.AvatartAtlas.getSpriteFrame("mj_face0"));
}
});
}
}
}, compare = function(e) {
return function(t, n) {
return t[e] - n[e];
};
}, logInfo = function(e) {
cc.logInfo || (cc.logInfo = "");
cc.logInfo += e + "\n";
try {
cc.director.emit("refreshLog", {
msg: null
});
} catch (e) {}
}, isNullOrEmpty = function(e) {
if ("undefined" == typeof e || null === e || "number" == typeof e && isNaN(e)) return !0;
if ("number" == typeof e || "boolean" == typeof e || "function" == typeof e || 1 === e.nodeType) return !1;
if (e.constructor === Array && e.length < 1) return !0;
if ("string" == typeof e) return "" === e.replace(/\s+/g, "");
if ("Object" === Object.prototype.toString.call(e).slice(8, -1)) {
var t = 0;
for (var n in e) e.hasOwnProperty(n) && t++;
if (t < 1) return !0;
}
return !1;
}, judgeDate = function(e, t) {
var n = new Date(e), i = new Date(t);
return n.getFullYear() == i.getFullYear() && n.getMonth() == i.getMonth() && n.getDate() == i.getDate();
}, pop = function(e, t) {
if (!isNullOrEmpty(e)) {
var n = e.replace(/[/]/g, "");
cc.find("Canvas").getChildByName(n) ? t && t(cc.find("Canvas").getChildByName(n)) : cc.loader.loadRes(e, function(e, i) {
if (!e) {
var a = cc.instantiate(i);
if (cc.find("Canvas").getChildByName(n)) {
t && t(cc.find("Canvas").getChildByName(n));
return;
}
cc.find("Canvas").addChild(a, 0, n);
t && t(a);
}
});
}
}, saveValue = function(e, t) {
void 0 === t && (t = "");
var n = new Object();
switch (typeof t) {
case "object":
n.type = Array.isArray(t) ? "array" : typeof t;
n.value = t;
break;

default:
n.type = typeof t;
n.value = t;
}
var i = JSON.stringify(n);
cc.sys.localStorage.setItem(GameConfig.ApkName + e, i);
}, getValue = function(e, t) {
void 0 === t && (t = "");
var n = cc.sys.localStorage.getItem(GameConfig.ApkName + e);
return isNullOrEmpty(n) ? t : JSON.parse(n).value;
}, dispatchAllEvent = function(e, t, n) {
if (cc.isValid(e, !0)) {
var i = new cc.Event.EventCustom(t, !0);
isNullOrEmpty(n) || i.setUserData(n);
e.dispatchEvent(i);
}
}, QRCreate = function QRCreate(ctx, str) {
var url = eval("'" + encodeURI(str).replace(/%/gm, "\\x") + "'"), qrcode = new QRCode(-1, QRErrorCorrectLevel.H);
qrcode.addData(url);
qrcode.make();
ctx.fillColor = cc.Color.BLACK;
for (var tileW = ctx.node.width / qrcode.getModuleCount(), tileH = ctx.node.height / qrcode.getModuleCount(), row = 0; row < qrcode.getModuleCount(); row++) for (var col = 0; col < qrcode.getModuleCount(); col++) if (qrcode.isDark(row, col)) {
var w = Math.ceil((col + 1) * tileW) - Math.floor(col * tileW), h = Math.ceil((row + 1) * tileW) - Math.floor(row * tileW);
ctx.rect(Math.round(col * tileW), Math.round(row * tileH), w, h);
ctx.fill();
}
}, versionCompareHandle = function(e, t) {
for (var n = e.split("."), i = t.split("."), a = 0; a < n.length; ++a) {
var r = parseInt(n[a]), o = parseInt(i[a] || 0);
if (r !== o) return r - o;
}
return i.length > n.length ? -1 : 0;
}, LogsClient = function(e, t) {
console.log("打点----", e);
var n = {
url: GameConfig.ServerEventName.LogsClient,
data: {
deviceID: GameConfig.DeviceID,
event: e,
data: t
}
};
Http.post(n).then(function() {
console.log("打点成功");
}).catch(function() {
console.log("打点失败");
});
}, XMLRequest = function(e, t, n) {
testConnect(e + "CONFIG", function(i) {
i || n(e, t);
});
}, XMLRequestOSS = function(e, t) {
testConnect(e, function(e, n) {
if (e) {
n = {
servers: [ "http://119.23.220.94/", "http://119.23.70.124/", "http://119.23.208.85/", "http://112.74.61.86/", "http://120.77.175.130/", "http://119.23.57.214/", "http://119.23.60.138/", "http://120.77.202.81/", "http://119.23.220.22/", "http://120.77.213.170/" ],
update: [ "https://pku.qzhagy.com/update/" ]
};
console.log("asdasdasdad");
t(n);
} else t(n);
});
}, NewXMLRequestOSS = function(e, t) {
testConnect(e, function(e, n) {
t(e ? "err" : n);
});
}, testConnect = function(e, t) {
try {
var n = cc.loader.getXMLHttpRequest();
n.open("GET", e, !0);
n.setRequestHeader("cache-control", "no-cache");
n.setRequestHeader("contentType", "text/html;charset=uft-8");
n.onreadystatechange = function() {
if (404 != n.status && 403 != n.status) {
if (4 == n.readyState && n.status >= 200 && n.status <= 207) {
try {
console.log("测速: " + e, n.responseText);
var i = n.responseText, a = JSON.parse(i);
if (a.servers && a.servers.length > 0 && a.update && a.update.length > 0) {
t(null, a);
return;
}
} catch (e) {
t("500");
return;
}
t("502");
}
} else t("404");
};
n.timeout = 5e3;
n.onerror = function() {
t("fail");
};
n.ontimeout = function() {
t("timeout");
};
n.send();
} catch (e) {
t(e.message);
}
}, timestampToTime = function(e) {
var t = new Date(e);
return t.getFullYear() + "-" + (t.getMonth() + 1 < 10 ? "0" + (t.getMonth() + 1) : t.getMonth() + 1) + "-" + (t.getDate() < 10 ? "0" + t.getDate() : t.getDate()) + " " + (t.getHours() < 10 ? "0" + t.getHours() : t.getHours()) + ":" + (t.getMinutes() < 10 ? "0" + t.getMinutes() : t.getMinutes()) + ":" + (t.getSeconds() < 10 ? "0" + t.getSeconds() : t.getSeconds());
}, timeToString = function(e) {
if (0 == e) return "";
var t, n = Math.floor(e / 86400), i = Math.floor(e % 86400 / 3600), a = Math.floor(e % 86400 % 3600 / 60), r = Math.floor(e % 86400 % 3600 % 60);
n > 0 ? t = n + "天" + i + "小时" + a + "分" : i > 0 ? t = i + "小时" + a + "分" + r + "秒" : a > 0 ? t = a + "分" + r + "秒" : r > 0 && (t = r + "秒");
return t;
};
cc.quickLaunch = function(e, t) {
if (null != e && null != t) {
var n = t.split("|"), i = n[0], a = n[1];
if (null != i && null != a) {
i = parseInt(i);
e = parseInt(e);
if ("Lobby" == cc.director.getScene().name) cc.find("Canvas").getComponent("SceneHall").quickLaunch(e, a, i); else {
cc.roomToken = e;
cc.tableId = a;
cc.quickType = i;
}
}
}
};
var encryptData = function(e, t) {
var n = e.ts, i = [ "ts", "sign" ], a = [];
for (var r in e) a.push(r);
for (var o, s = "", c = _createForOfIteratorHelperLoose(a = a.sort()); !(o = c()).done; ) {
var l = o.value;
i.includes(l) || (s += l + "=" + JSON.stringify(e[l]) + "&");
}
var u = md5(s + "key=" + t);
u = u.toUpperCase();
var d = md5("" + u + n);
return d.toUpperCase();
}, encryptToken = function(e) {
var t = new JSEncrypt.JSEncrypt(), n = getValue(GameConfig.StorageKey.TokenPKey);
t.setPublicKey(n);
return t.encrypt(e);
}, decryptToken = function(e) {
var t = new JSEncrypt.JSEncrypt(), n = getValue(GameConfig.StorageKey.TokenPKey);
t.setPublicKey(n);
return t.decrypt(e);
}, getIP = function() {
return new Promise(function(e, t) {
var n = new XMLHttpRequest();
n.onreadystatechange = function() {
if (4 == n.readyState && n.status >= 200 && n.status < 400) {
var i = n.responseText;
console.log("ip===>" + i);
e(i);
} else 4 == n.readyState && t("");
};
n.timeout = 1e4;
n.onerror = function() {
t("");
};
n.ontimeout = function() {
t("");
};
n.open("GET", "https://ifconfig.co/ip", !0);
n.send();
});
};
cc.refreshGPS = function(e) {
null == cc.location && (cc.location = {
x: 0,
y: 0,
regeo: "未知"
});
var t = e.x.toFixed(4), n = e.y.toFixed(4);
if (0 != t && t != cc.location.x.toFixed(4) || 0 != n && n != cc.location.y.toFixed(4)) {
cc.needRefreshGPS = !0;
cc.location = e;
cc.hideRegeo && cc.location.regeo && (cc.location.regeo = "隐藏");
}
cc.log("cc.location:" + JSON.stringify(cc.location) + ",cc.needRefreshGPS:" + cc.needRefreshGPS);
};
cc.needRefreshGPS = !1;
module.exports = {
loadNative: loadNative,
screenShoot: screenShoot,
SaveToLocal: SaveToLocal,
formatGold: formatGold,
getChips: getChips,
generateUniqueID: generateUniqueID,
getStringByteLength: getStringByteLength,
getStringByLength: getStringByLength,
showLogger: showLogger,
logInfo: logInfo,
fitScreen: fitScreen,
checkPhone: checkPhone,
dispatchAllEvent: dispatchAllEvent,
XMLRequest: XMLRequest,
XMLRequestOSS: XMLRequestOSS,
NewXMLRequestOSS: NewXMLRequestOSS,
getTimeStamp: getTimeStamp,
testConnect: testConnect,
pop: pop,
saveValue: saveValue,
getValue: getValue,
judgeDate: judgeDate,
QRCreate: QRCreate,
subName: subName,
setScore: setScore,
showNode: showNode,
timestampToTime: timestampToTime,
timeToString: timeToString,
deepcopyArr: deepcopyArr,
setHead: setHead,
compare: compare,
sortByProps: sortByProps,
judgeDistance: judgeDistance,
getDistance: getDistance,
decodeInviter: decodeInviter,
toPercent: toPercent,
encryptData: encryptData,
decryptToken: decryptToken,
encryptToken: encryptToken,
getIP: getIP,
getFormatDate: getFormatDate,
LogsClient: LogsClient,
versionCompareHandle: versionCompareHandle,
isNullOrEmpty: isNullOrEmpty
};
cc._RF.pop();
}, {
"../../GameBase/GameConfig": "GameConfig",
"../../script/common/network/Http": "Http",
"./jsencrypt": 10
} ],
"voice-ctrl": [ function(e, t) {
"use strict";
cc._RF.push(t, "49a92zXVp1B5orLE/vsEdF7", "voice-ctrl");
var n = 12, i = 128 - n;
function a(e) {
e -= i;
var t = Math.floor(e / n) + i, a = e % n + i;
return String.fromCharCode(t) + String.fromCharCode(a);
}
for (var r = {}, o = {}, s = 0; s < 256; ++s) {
var c, l = s + 1;
c = l >= i ? a(l) : String.fromCharCode(l);
r[s] = c;
o[c] = s;
}
function u(e) {
var t = "", n = e.length, i = n >> 16 & 255, a = n >> 8 & 255, o = 255 & n;
t += r[n >> 24 & 255];
t += r[i];
t += r[a];
t += r[o];
for (var s = 0; s < e.length; ++s) t += r[e[s]];
return t;
}
function d(e, t) {
var n = e.charCodeAt(t);
return n >= i ? e.charAt(t) + e.charAt(t + 1) : e.charAt(t);
}
function h(e) {
for (var t = 0, n = 0, i = 0; i < 4; ++i) {
t += (s = d(e, t)).length;
n |= o[s] << 8 * (3 - i);
}
for (var a = new Uint8Array(n), r = 0; t < e.length; ) {
var s;
t += (s = d(e, t)).length;
a[r] = o[s];
r++;
}
return a;
}
var f = e("audio-ctrl"), p = cc.Class({
name: "VoiceCtrl",
properties: {
_voiceMediaPath: null,
_currentBGMVolume: 0,
_currentSFXVolume: 0
},
statics: {
_instance: null,
getInstance: function() {
this._instance || (this._instance = new p());
return this._instance;
}
},
init: function() {
if (cc.sys.isNative) {
this._voiceMediaPath = jsb.fileUtils.getWritablePath() + "/voicemsgs/";
this.setStorageDir(this._voiceMediaPath);
}
},
prepare: function(e) {
if (cc.sys.isNative) {
f.getInstance().pauseAll();
cc.log("prepare");
this.clearCache(e);
cc.sys.os == cc.sys.OS_ANDROID ? jsb.reflection.callStaticMethod("com/wuyouqp/voicesdk/VoiceRecorder", "prepare", "(Ljava/lang/String;)V", e) : cc.sys.os == cc.sys.OS_IOS && jsb.reflection.callStaticMethod("VoiceSDK", "prepareRecord:", e);
}
},
release: function() {
if (cc.sys.isNative) {
f.getInstance().resumeAll();
cc.log("release");
cc.sys.os == cc.sys.OS_ANDROID ? jsb.reflection.callStaticMethod("com/wuyouqp/voicesdk/VoiceRecorder", "release", "()V") : cc.sys.os == cc.sys.OS_IOS && jsb.reflection.callStaticMethod("VoiceSDK", "finishRecord");
}
},
cancel: function() {
if (cc.sys.isNative) {
cc.log("cancel");
f.getInstance().resumeAll();
cc.sys.os == cc.sys.OS_ANDROID ? jsb.reflection.callStaticMethod("com/wuyouqp/voicesdk/VoiceRecorder", "cancel", "()V") : cc.sys.os == cc.sys.OS_IOS && jsb.reflection.callStaticMethod("VoiceSDK", "cancelRecord");
}
},
writeVoice: function(e, t) {
if (cc.sys.isNative && t && t.length > 0) {
var n = h(t), i = this._voiceMediaPath + e;
this.clearCache(e);
jsb.fileUtils.writeDataToFile(n, i);
}
},
clearCache: function(e) {
if (cc.sys.isNative) {
var t = this._voiceMediaPath + e;
jsb.fileUtils.isFileExist(t) && jsb.fileUtils.removeFile(t);
jsb.fileUtils.isFileExist(t + ".wav") && jsb.fileUtils.removeFile(t + ".wav");
}
},
play: function(e) {
if (cc.sys.isNative) {
f.getInstance().isBGMPlaying() && f.getInstance().setBGMVolume(.3);
cc.sys.os == cc.sys.OS_ANDROID ? jsb.reflection.callStaticMethod("com/wuyouqp/voicesdk/VoicePlayer", "play", "(Ljava/lang/String;)V", e) : cc.sys.os == cc.sys.OS_IOS && jsb.reflection.callStaticMethod("VoiceSDK", "play:", e);
}
},
stop: function() {
if (cc.sys.isNative) {
f.getInstance().isBGMPlaying() && f.getInstance().setBGMVolume(1);
cc.sys.os == cc.sys.OS_ANDROID ? jsb.reflection.callStaticMethod("com/wuyouqp/voicesdk/VoicePlayer", "stop", "()V") : cc.sys.os == cc.sys.OS_IOS && jsb.reflection.callStaticMethod("VoiceSDK", "stopPlay");
}
},
getVoiceLevel: function(e) {
return Math.floor(Math.random() * e + 1);
},
getVoiceData: function(e) {
if (cc.sys.isNative) {
var t = jsb.fileUtils.getDataFromFile(this._voiceMediaPath + e);
if (t) return u(t);
}
return "";
},
setStorageDir: function(e) {
if (cc.sys.isNative) if (cc.sys.os == cc.sys.OS_ANDROID) jsb.reflection.callStaticMethod("com/wuyouqp/voicesdk/VoiceRecorder", "setStorageDir", "(Ljava/lang/String;)V", e); else if (cc.sys.os == cc.sys.OS_IOS) {
jsb.reflection.callStaticMethod("VoiceSDK", "setStorageDir:", e);
jsb.fileUtils.isDirectoryExist(e) || jsb.fileUtils.createDirectory(e);
}
}
});
t.exports = p;
cc._RF.pop();
}, {
"audio-ctrl": "audio-ctrl"
} ]
}, {}, [ "AudioBase", "BombAnim", "GameBase", "GameConfig", "HallBase", "ClipsPre", "ModuleAudioDownload", "ModuleChat", "ModuleClock", "ModuleGPS11", "ModuleMatchPop", "ModuleNodeFace", "ModulePlayerInfo", "ModuleTableSet", "ModuleTipsCard", "SummaryInfo", "PlayerBase", "ReplayBase", "ReportPop", "api", "calc16", "hulib", "table", "table_mgr", "MJGameConfig", "ModuleCalc16", "ModuleCards16", "ModuleGameSummary16", "ModuleGround16", "ModuleGroundDetail16", "ModuleHandGround16", "ModuleHands16", "ModuleNiaoCards16", "ModuleOtherHands16", "ModulePart16", "ModulePlayer16", "ModuleReplay16", "ModuleReplayHands16", "ModuleRoundSummary16", "ModuleRoundSummaryPlayer16", "ModuleShowNiao", "ModuleSummarySelect16", "SceneTable16", "hands-card", "player07", "queue", "ui", "calc19", "ModuleCards19", "ModulePlayer19", "ModuleRoundSummary19", "ModuleRoundSummaryPlayer19", "ModuleTouxiang19", "SceneTable19", "ModuleCardsMJ", "ModuleFlowerMJ", "ModuleGroundCardsMJ", "ModuleGroundDetailMJ", "ModuleGroundMJ", "ModuleHandGroundMJ", "ModuleHandsMJ", "ModuleOtherCardsMJ", "ModuleOtherHandsMJ", "ModuleReplayHandsMJ", "ModuleReplayMJ", "ModuleSelfCardsMJ", "PlayerMJ", "BgTableAudioCtr07", "BtnTips07", "LayerHandsCards07", "LayoutShowCards07", "Logic07", "ModuleBalance07", "ModuleCards07", "ModuleGPS07", "ModulePlayerHead07", "ModuleSummary07", "ModuleSummaryItem07", "ReHands07", "Replay07", "SceneTable07", "Logic_09", "ModuleAudioCtr_09", "ModuleBalance_09", "ModuleCardsInit_09", "ModuleCards_09", "ModuleDeal_09", "ModuleFinish_09", "ModuleHands_09", "ModulePlayerInfo_09", "ModuleRemainCards_09", "ModuleReplay_09", "ModuleShowCards_09", "ModuleSummary09", "ModuleSummaryItem09", "ModuleTips_09", "ModuleTouxiang_09", "SceneTable09", "BaseCardZP", "BaseGroupZP", "BaseHandZP", "BaseSummaryDeck", "BaseSummaryToggleZP", "ModuleChiBoxZp", "ModuleSummaryGroup05", "ModuleTingItem", "ModuleCard08", "ModuleGameSummary08", "ModuleGroup08", "ModuleHands08", "ModulePart08", "ModulePlayer08", "ModuleReplay08", "ModuleRoundSummary08", "ModuleSummaryItem08", "ModuleTips08", "ModuleTouxiang08", "SceneTable08", "ChatItem", "GoEasy", "GoEasyChat", "GoEasyConfig", "goeasy-im-1.5.0", "LotteryPop", "RewardPop", "ModuleActivePop", "ModuleBill", "ModuleCashPop", "ModuleChangePop", "ModuleClubItem", "ModuleClubPop", "ModuleHistory", "ModuleHistoryItem", "ModuleInfoPop", "ModuleMarketConfirm", "ModuleMarketPop", "ModuleMessagePop", "ModulePay", "ModuleProfitRoomItem", "ModuleProxyChild", "ModuleProxyChildItem", "ModuleProxyProfit", "ModuleProxyTotal", "ModuleProxyUserItem", "ModuleProxyUsers", "ModulePunishUserItem", "ModuleRule", "ModuleRulePop", "ModuleServicePop", "ModuleSettingPop", "UIDatePicker", "UIItemDay", "date", "AdminHead07", "AdminHead08", "AdminHead09", "AdminHistoryPop", "AdminOtherPage", "AdminReplay07", "AdminReplay08", "AdminTradeInfo", "AdminTradeItem", "AdminTradePage", "ProxyCreditPage", "nodeInfo", "ModuleInviterPop", "ModuleLoginPop", "codeLogin", "pwdLogin", "register", "Connector", "socket-ctrl", "Base_DragBtn", "CONSTS", "Cache", "DataBase", "Effect_Drag", "Effect_Shake", "GameEventNames", "ModuleAutoTipsPop", "ModuleDistance", "ModuleNotice", "ModuleTipsPop", "ModuleWinConfirm", "ModuleWinMask", "ModuleWinSetting", "ModuleWinTips", "NoticeManager", "PACK", "PopBase", "ROUTE", "SceneHall", "SceneHotUpdate", "SceneLogin", "SelectLink", "TableInfo", "audio-ctrl", "native-extend", "utils", "voice-ctrl", "use_reversed_rotateBy", "use_v2.0.x_cc.Toggle_event", "Effect_Scale", "PopQueue", "PopupBase", "PopupManager", "GameUtils", "Http", "TestPop", "AdComponent", "Avatar", "CompList", "CompListRenderer", "Music", "Number", "GameMenu", "MJGameSummayItem", "MJRulePop", "ModuleDistanceMJ", "ModuleGameSummaryMJ", "AdminClubItem", "AdminDetailPop", "AdminManagerPop", "AdminPunishPop", "AdminReplay09", "AdminUserItem", "BlackListItem", "BlackListPop", "ChangeIDPop", "ChangeProxyPop", "ChangeUserPop", "ChildScoreItem", "ChildScoreListPop", "ChildUserItem", "ChildUserListPop", "ClubActivePop", "ClubBankPop", "ClubHistoryDetailItem", "ClubHistoryDetailPop", "ClubHistoryListItem", "ClubHistoryListPop", "ClubListItem", "ClubListPop", "ClubManager", "ClubNoticePop", "ClubProxyItem", "ClubProxyListPop", "ClubRankPop", "ClubRewardPop", "ClubScoreListPop", "ClubUserItem", "ClubUserListPop", "ClubWalletListPop", "CreateClubPop", "CreateRoomItem", "CreateRoomPop", "CreateRoomRule", "FreezeListItem", "FreezeListPop", "HistoryPop", "HistoryRecordItem", "HistoryTagItem", "InviteListItem", "InviteListPop", "ModuleTableItem", "ModuleTablePop", "ProxyLevelPop", "QuestItem", "QuestionPop", "RobotPop", "RoomListItem", "RoomTagItem", "RoomToggle", "SharePop", "TableGameItem", "TablePop", "TableRoomBtn", "TableRoomItem", "TableRoomPop", "UserBaseItem", "UserInfoPop", "App", "Dict", "EventCall", "EventDatas", "EventManager", "Proxy", "ProxyData", "PushManager", "ProxyBuyTradeItem", "ProxyCreateSellPage", "ProxyTradeInfoPage", "RewardTradeItem", "SelectTradeType", "ProxyCreditHistory", "ProxyCreditHistoryItem", "ProxyInviteUser", "ProxyMarketPop", "ProxyProfitDetail", "ProxyRecord", "ProxyTotal" ]);